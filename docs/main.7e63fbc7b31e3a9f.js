var NZ=Object.defineProperty,PZ=Object.defineProperties,LZ=Object.getOwnPropertyDescriptors,YN=Object.getOwnPropertySymbols,FZ=Object.prototype.hasOwnProperty,BZ=Object.prototype.propertyIsEnumerable,Ow=(T,I,m)=>I in T?NZ(T,I,{enumerable:!0,configurable:!0,writable:!0,value:m}):T[I]=m,Qe=(T,I)=>{for(var m in I||(I={}))FZ.call(I,m)&&Ow(T,m,I[m]);if(YN)for(var m of YN(I))BZ.call(I,m)&&Ow(T,m,I[m]);return T},er=(T,I)=>PZ(T,LZ(I)),_s=(T,I,m)=>(Ow(T,"symbol"!=typeof I?I+"":I,m),m);(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{38506:T=>{function I(y,S,s,n,l,u,h){try{var _=y[u](h),b=_.value}catch(M){return void s(M)}_.done?S(b):Promise.resolve(b).then(n,l)}T.exports=function(y){return function(){var S=this,s=arguments;return new Promise(function(n,l){var u=y.apply(S,s);function h(b){I(u,n,l,h,_,"next",b)}function _(b){I(u,n,l,h,_,"throw",b)}h(void 0)})}},T.exports.default=T.exports,T.exports.__esModule=!0},89926:(T,I,m)=>{T.exports=m(16775)},87048:(T,I,m)=>{T.exports=m(29032)},20272:(T,I,m)=>{T.exports=m(93928)},26775:(T,I,m)=>{T.exports=m(40779)},78804:(T,I,m)=>{T.exports=m(88092)},11761:(T,I,m)=>{T.exports=m(43910)},64770:(T,I,m)=>{T.exports=m(89412)},71049:(T,I,m)=>{T.exports=m(71166)},3498:(T,I,m)=>{T.exports=m(14570)},38330:(T,I,m)=>{T.exports=m(68786)},23289:(T,I,m)=>{T.exports=m(94768)},53130:(T,I,m)=>{T.exports=m(5219)},45107:(T,I,m)=>{T.exports=m(47833)},45635:(T,I,m)=>{T.exports=m(16625)},96916:(T,I,m)=>{T.exports=m(95609)},58258:(T,I,m)=>{T.exports=m(56447)},14569:(T,I,m)=>{T.exports=m(3024)},97326:(T,I,m)=>{T.exports=m(15814)},57124:(T,I,m)=>{T.exports=m(80345)},57272:(T,I,m)=>{T.exports=m(90974)},66360:(T,I,m)=>{T.exports=m(23458)},71094:(T,I,m)=>{T.exports=m(75223)},93165:(T,I,m)=>{T.exports=m(31151)},19898:(T,I,m)=>{T.exports=m(31175)},84916:(T,I,m)=>{T.exports=m(60918)},31946:(T,I,m)=>{T.exports=m(68625)},18753:(T,I,m)=>{T.exports=m(58917)},90343:(T,I,m)=>{T.exports=m(2126)},12988:(T,I,m)=>{T.exports=m(93648)},23005:(T,I,m)=>{T.exports=m(58300)},26394:(T,I,m)=>{T.exports=m(7137)},93449:(T,I,m)=>{T.exports=m(24435)},3599:(T,I,m)=>{T.exports=m(30218)},39126:(T,I,m)=>{T.exports=m(91388)},2805:(T,I,m)=>{"use strict";m.r(I),m.d(I,{__extends:()=>S,__assign:()=>s,__rest:()=>n,__decorate:()=>l,__param:()=>u,__metadata:()=>h,__awaiter:()=>_,__generator:()=>b,__createBinding:()=>M,__exportStar:()=>k,__values:()=>H,__read:()=>U,__spread:()=>V,__spreadArrays:()=>J,__spreadArray:()=>X,__await:()=>j,__asyncGenerator:()=>oe,__asyncDelegator:()=>ee,__asyncValues:()=>se,__makeTemplateObject:()=>Q,__importStar:()=>$,__importDefault:()=>Y,__classPrivateFieldGet:()=>P,__classPrivateFieldSet:()=>ae});var y=function(W,q){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,ie){re.__proto__=ie}||function(re,ie){for(var be in ie)Object.prototype.hasOwnProperty.call(ie,be)&&(re[be]=ie[be])})(W,q)};function S(W,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function re(){this.constructor=W}y(W,q),W.prototype=null===q?Object.create(q):(re.prototype=q.prototype,new re)}var s=function(){return s=Object.assign||function(q){for(var re,ie=1,be=arguments.length;ie<be;ie++)for(var le in re=arguments[ie])Object.prototype.hasOwnProperty.call(re,le)&&(q[le]=re[le]);return q},s.apply(this,arguments)};function n(W,q){var re={};for(var ie in W)Object.prototype.hasOwnProperty.call(W,ie)&&q.indexOf(ie)<0&&(re[ie]=W[ie]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var be=0;for(ie=Object.getOwnPropertySymbols(W);be<ie.length;be++)q.indexOf(ie[be])<0&&Object.prototype.propertyIsEnumerable.call(W,ie[be])&&(re[ie[be]]=W[ie[be]])}return re}function l(W,q,re,ie){var fe,be=arguments.length,le=be<3?q:null===ie?ie=Object.getOwnPropertyDescriptor(q,re):ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(W,q,re,ie);else for(var Se=W.length-1;Se>=0;Se--)(fe=W[Se])&&(le=(be<3?fe(le):be>3?fe(q,re,le):fe(q,re))||le);return be>3&&le&&Object.defineProperty(q,re,le),le}function u(W,q){return function(re,ie){q(re,ie,W)}}function h(W,q){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(W,q)}function _(W,q,re,ie){return new(re||(re=Promise))(function(le,fe){function Se(Ie){try{me(ie.next(Ie))}catch(De){fe(De)}}function ve(Ie){try{me(ie.throw(Ie))}catch(De){fe(De)}}function me(Ie){Ie.done?le(Ie.value):function(le){return le instanceof re?le:new re(function(fe){fe(le)})}(Ie.value).then(Se,ve)}me((ie=ie.apply(W,q||[])).next())})}function b(W,q){var ie,be,le,fe,re={label:0,sent:function(){if(1&le[0])throw le[1];return le[1]},trys:[],ops:[]};return fe={next:Se(0),throw:Se(1),return:Se(2)},"function"==typeof Symbol&&(fe[Symbol.iterator]=function(){return this}),fe;function Se(me){return function(Ie){return function(me){if(ie)throw new TypeError("Generator is already executing.");for(;re;)try{if(ie=1,be&&(le=2&me[0]?be.return:me[0]?be.throw||((le=be.return)&&le.call(be),0):be.next)&&!(le=le.call(be,me[1])).done)return le;switch(be=0,le&&(me=[2&me[0],le.value]),me[0]){case 0:case 1:le=me;break;case 4:return re.label++,{value:me[1],done:!1};case 5:re.label++,be=me[1],me=[0];continue;case 7:me=re.ops.pop(),re.trys.pop();continue;default:if(!(le=(le=re.trys).length>0&&le[le.length-1])&&(6===me[0]||2===me[0])){re=0;continue}if(3===me[0]&&(!le||me[1]>le[0]&&me[1]<le[3])){re.label=me[1];break}if(6===me[0]&&re.label<le[1]){re.label=le[1],le=me;break}if(le&&re.label<le[2]){re.label=le[2],re.ops.push(me);break}le[2]&&re.ops.pop(),re.trys.pop();continue}me=q.call(W,re)}catch(Ie){me=[6,Ie],be=0}finally{ie=le=0}if(5&me[0])throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}([me,Ie])}}}var M=Object.create?function(W,q,re,ie){void 0===ie&&(ie=re),Object.defineProperty(W,ie,{enumerable:!0,get:function(){return q[re]}})}:function(W,q,re,ie){void 0===ie&&(ie=re),W[ie]=q[re]};function k(W,q){for(var re in W)"default"!==re&&!Object.prototype.hasOwnProperty.call(q,re)&&M(q,W,re)}function H(W){var q="function"==typeof Symbol&&Symbol.iterator,re=q&&W[q],ie=0;if(re)return re.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ie>=W.length&&(W=void 0),{value:W&&W[ie++],done:!W}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(W,q){var re="function"==typeof Symbol&&W[Symbol.iterator];if(!re)return W;var be,fe,ie=re.call(W),le=[];try{for(;(void 0===q||q-- >0)&&!(be=ie.next()).done;)le.push(be.value)}catch(Se){fe={error:Se}}finally{try{be&&!be.done&&(re=ie.return)&&re.call(ie)}finally{if(fe)throw fe.error}}return le}function V(){for(var W=[],q=0;q<arguments.length;q++)W=W.concat(U(arguments[q]));return W}function J(){for(var W=0,q=0,re=arguments.length;q<re;q++)W+=arguments[q].length;var ie=Array(W),be=0;for(q=0;q<re;q++)for(var le=arguments[q],fe=0,Se=le.length;fe<Se;fe++,be++)ie[be]=le[fe];return ie}function X(W,q,re){if(re||2===arguments.length)for(var le,ie=0,be=q.length;ie<be;ie++)(le||!(ie in q))&&(le||(le=Array.prototype.slice.call(q,0,ie)),le[ie]=q[ie]);return W.concat(le||q)}function j(W){return this instanceof j?(this.v=W,this):new j(W)}function oe(W,q,re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,ie=re.apply(W,q||[]),le=[];return be={},fe("next"),fe("throw"),fe("return"),be[Symbol.asyncIterator]=function(){return this},be;function fe(xe){ie[xe]&&(be[xe]=function(Re){return new Promise(function(ke,gt){le.push([xe,Re,ke,gt])>1||Se(xe,Re)})})}function Se(xe,Re){try{!function(xe){xe.value instanceof j?Promise.resolve(xe.value.v).then(me,Ie):De(le[0][2],xe)}(ie[xe](Re))}catch(ke){De(le[0][3],ke)}}function me(xe){Se("next",xe)}function Ie(xe){Se("throw",xe)}function De(xe,Re){xe(Re),le.shift(),le.length&&Se(le[0][0],le[0][1])}}function ee(W){var q,re;return q={},ie("next"),ie("throw",function(be){throw be}),ie("return"),q[Symbol.iterator]=function(){return this},q;function ie(be,le){q[be]=W[be]?function(fe){return(re=!re)?{value:j(W[be](fe)),done:"return"===be}:le?le(fe):fe}:le}}function se(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var re,q=W[Symbol.asyncIterator];return q?q.call(W):(W=H(W),re={},ie("next"),ie("throw"),ie("return"),re[Symbol.asyncIterator]=function(){return this},re);function ie(le){re[le]=W[le]&&function(fe){return new Promise(function(Se,ve){!function(le,fe,Se,ve){Promise.resolve(ve).then(function(me){le({value:me,done:Se})},fe)}(Se,ve,(fe=W[le](fe)).done,fe.value)})}}}function Q(W,q){return Object.defineProperty?Object.defineProperty(W,"raw",{value:q}):W.raw=q,W}var ce=Object.create?function(W,q){Object.defineProperty(W,"default",{enumerable:!0,value:q})}:function(W,q){W.default=q};function $(W){if(W&&W.__esModule)return W;var q={};if(null!=W)for(var re in W)"default"!==re&&Object.prototype.hasOwnProperty.call(W,re)&&M(q,W,re);return ce(q,W),q}function Y(W){return W&&W.__esModule?W:{default:W}}function P(W,q,re,ie){if("a"===re&&!ie)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof q?W!==q||!ie:!q.has(W))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===re?ie:"a"===re?ie.call(W):ie?ie.value:q.get(W)}function ae(W,q,re,ie,be){if("m"===ie)throw new TypeError("Private method is not writable");if("a"===ie&&!be)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof q?W!==q||!be:!q.has(W))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ie?be.call(W,re):be?be.value=re:q.set(W,re),re}},76588:function(T,I,m){var S,s;S=[m(96761)],void 0!==(s=function(n){"use strict";return n}.apply(I,S))&&(T.exports=s)},96761:function(T,I){var S;void 0!==(S=function(){"use strict";var s={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return s.CONNECTING_SNAP_RADIUS=s.SNAP_RADIUS,s.CURRENT_CONNECTION_PREFERENCE=8,s.BUMP_DELAY=250,s.BUMP_RANDOMNESS=10,s.COLLAPSE_CHARS=30,s.LONGPRESS=750,s.SOUND_LIMIT=100,s.DRAG_STACK=!0,s.HSV_SATURATION=.45,s.HSV_VALUE=.65,s.SPRITE={width:96,height:124,url:"sprites.png"},s.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},s.DRAG_NONE=0,s.DRAG_STICKY=1,s.DRAG_BEGIN=1,s.DRAG_FREE=2,s.OPPOSITE_TYPE=[],s.OPPOSITE_TYPE[s.connectionTypes.INPUT_VALUE]=s.connectionTypes.OUTPUT_VALUE,s.OPPOSITE_TYPE[s.connectionTypes.OUTPUT_VALUE]=s.connectionTypes.INPUT_VALUE,s.OPPOSITE_TYPE[s.connectionTypes.NEXT_STATEMENT]=s.connectionTypes.PREVIOUS_STATEMENT,s.OPPOSITE_TYPE[s.connectionTypes.PREVIOUS_STATEMENT]=s.connectionTypes.NEXT_STATEMENT,s.VARIABLE_CATEGORY_NAME="VARIABLE",s.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",s.PROCEDURE_CATEGORY_NAME="PROCEDURE",s.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",s.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",s.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",s.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",s.utils={},s.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),s.Msg={},s.utils.global.Blockly||(s.utils.global.Blockly={}),s.utils.global.Blockly.Msg||(s.utils.global.Blockly.Msg=s.Msg),s.utils.colour={},s.utils.colour.parse=function(n){n=String(n).toLowerCase().trim();var l=s.utils.colour.names[n];if(l||(l="0x"==n.substring(0,2)?"#"+n.substring(2):n,/^#[0-9a-f]{6}$/.test(l="#"==l[0]?l:"#"+l)))return l;if(/^#[0-9a-f]{3}$/.test(l))return["#",l[1],l[1],l[2],l[2],l[3],l[3]].join("");var u=n.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return u&&(n=Number(u[1]),l=Number(u[2]),u=Number(u[3]),0<=n&&256>n&&0<=l&&256>l&&0<=u&&256>u)?s.utils.colour.rgbToHex(n,l,u):null},s.utils.colour.rgbToHex=function(n,l,u){return l=n<<16|l<<8|u,16>n?"#"+(16777216|l).toString(16).substr(1):"#"+l.toString(16)},s.utils.colour.hexToRgb=function(n){return(n=s.utils.colour.parse(n))?[(n=parseInt(n.substr(1),16))>>16,n>>8&255,255&n]:[0,0,0]},s.utils.colour.hsvToHex=function(n,l,u){var h=0,_=0,b=0;if(0==l)b=_=h=u;else{var M=Math.floor(n/60),k=n/60-M;n=u*(1-l);var H=u*(1-l*k);switch(l=u*(1-l*(1-k)),M){case 1:h=H,_=u,b=n;break;case 2:h=n,_=u,b=l;break;case 3:h=n,_=H,b=u;break;case 4:h=l,_=n,b=u;break;case 5:h=u,_=n,b=H;break;case 6:case 0:h=u,_=l,b=n}}return s.utils.colour.rgbToHex(Math.floor(h),Math.floor(_),Math.floor(b))},s.utils.colour.blend=function(n,l,u){return(n=s.utils.colour.parse(n))&&(l=s.utils.colour.parse(l))?(n=s.utils.colour.hexToRgb(n),l=s.utils.colour.hexToRgb(l),s.utils.colour.rgbToHex(Math.round(l[0]+u*(n[0]-l[0])),Math.round(l[1]+u*(n[1]-l[1])),Math.round(l[2]+u*(n[2]-l[2])))):null},s.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},s.utils.Coordinate=function(n,l){this.x=n,this.y=l},s.utils.Coordinate.equals=function(n,l){return n==l||!(!n||!l)&&n.x==l.x&&n.y==l.y},s.utils.Coordinate.distance=function(n,l){var u=n.x-l.x;return n=n.y-l.y,Math.sqrt(u*u+n*n)},s.utils.Coordinate.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},s.utils.Coordinate.difference=function(n,l){return new s.utils.Coordinate(n.x-l.x,n.y-l.y)},s.utils.Coordinate.sum=function(n,l){return new s.utils.Coordinate(n.x+l.x,n.y+l.y)},s.utils.Coordinate.prototype.clone=function(){return new s.utils.Coordinate(this.x,this.y)},s.utils.Coordinate.prototype.scale=function(n){return this.x*=n,this.y*=n,this},s.utils.Coordinate.prototype.translate=function(n,l){return this.x+=n,this.y+=l,this},s.utils.Rect=function(n,l,u,h){this.top=n,this.bottom=l,this.left=u,this.right=h},s.utils.Rect.prototype.contains=function(n,l){return n>=this.left&&n<=this.right&&l>=this.top&&l<=this.bottom},s.utils.Rect.prototype.intersects=function(n){return!(this.left>n.right||this.right<n.left||this.top>n.bottom||this.bottom<n.top)},s.utils.string={},s.utils.string.startsWith=function(n,l){return 0==n.lastIndexOf(l,0)},s.utils.string.shortestStringLength=function(n){return n.length?n.reduce(function(l,u){return l.length<u.length?l:u}).length:0},s.utils.string.commonWordPrefix=function(n,l){if(!n.length)return 0;if(1==n.length)return n[0].length;var u=0;l=l||s.utils.string.shortestStringLength(n);for(var h=0;h<l;h++){for(var _=n[0][h],b=1;b<n.length;b++)if(_!=n[b][h])return u;" "==_&&(u=h+1)}for(b=1;b<n.length;b++)if((_=n[b][h])&&" "!=_)return u;return l},s.utils.string.commonWordSuffix=function(n,l){if(!n.length)return 0;if(1==n.length)return n[0].length;var u=0;l=l||s.utils.string.shortestStringLength(n);for(var h=0;h<l;h++){for(var _=n[0].substr(-h-1,1),b=1;b<n.length;b++)if(_!=n[b].substr(-h-1,1))return u;" "==_&&(u=h+1)}for(b=1;b<n.length;b++)if((_=n[b].charAt(n[b].length-h-1))&&" "!=_)return u;return l},s.utils.string.wrap=function(n,l){n=n.split("\n");for(var u=0;u<n.length;u++)n[u]=s.utils.string.wrapLine_(n[u],l);return n.join("\n")},s.utils.string.wrapLine_=function(n,l){if(n.length<=l)return n;for(var u=n.trim().split(/\s+/),h=0;h<u.length;h++)u[h].length>l&&(l=u[h].length);h=-1/0;var _=1;do{var b=h,M=n;n=[];var k=u.length/_,H=1;for(h=0;h<u.length-1;h++)H<(h+1.5)/k?(H++,n[h]=!0):n[h]=!1;n=s.utils.string.wrapMutate_(u,n,l),h=s.utils.string.wrapScore_(u,n,l),n=s.utils.string.wrapToText_(u,n),_++}while(h>b);return M},s.utils.string.wrapScore_=function(n,l,u){for(var h=[0],_=[],b=0;b<n.length;b++)h[h.length-1]+=n[b].length,!0===l[b]?(h.push(0),_.push(n[b].charAt(n[b].length-1))):!1===l[b]&&h[h.length-1]++;for(n=Math.max.apply(Math,h),b=l=0;b<h.length;b++)l-=2*Math.pow(Math.abs(u-h[b]),1.5),l-=Math.pow(n-h[b],1.5),-1!=".?!".indexOf(_[b])?l+=u/3:-1!=",;)]}".indexOf(_[b])&&(l+=u/4);return 1<h.length&&h[h.length-1]<=h[h.length-2]&&(l+=.5),l},s.utils.string.wrapMutate_=function(n,l,u){for(var _,h=s.utils.string.wrapScore_(n,l,u),b=0;b<l.length-1;b++)if(l[b]!=l[b+1]){var M=[].concat(l);M[b]=!M[b],M[b+1]=!M[b+1];var k=s.utils.string.wrapScore_(n,M,u);k>h&&(h=k,_=M)}return _?s.utils.string.wrapMutate_(n,_,u):l},s.utils.string.wrapToText_=function(n,l){for(var u=[],h=0;h<n.length;h++)u.push(n[h]),void 0!==l[h]&&u.push(l[h]?"\n":" ");return u.join("")},s.utils.Size=function(n,l){this.width=n,this.height=l},s.utils.Size.equals=function(n,l){return n==l||!(!n||!l)&&n.width==l.width&&n.height==l.height},s.utils.style={},s.utils.style.getSize=function(n){if("none"!=s.utils.style.getStyle_(n,"display"))return s.utils.style.getSizeWithDisplay_(n);var l=n.style,u=l.display,h=l.visibility,_=l.position;l.visibility="hidden",l.position="absolute",l.display="inline";var b=n.offsetWidth;return n=n.offsetHeight,l.display=u,l.position=_,l.visibility=h,new s.utils.Size(b,n)},s.utils.style.getSizeWithDisplay_=function(n){return new s.utils.Size(n.offsetWidth,n.offsetHeight)},s.utils.style.getStyle_=function(n,l){return s.utils.style.getComputedStyle(n,l)||s.utils.style.getCascadedStyle(n,l)||n.style&&n.style[l]},s.utils.style.getComputedStyle=function(n,l){return document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(n,null))&&(n[l]||n.getPropertyValue(l))||""},s.utils.style.getCascadedStyle=function(n,l){return n.currentStyle?n.currentStyle[l]:null},s.utils.style.getPageOffset=function(n){var l=new s.utils.Coordinate(0,0);n=n.getBoundingClientRect();var u=document.documentElement;return u=new s.utils.Coordinate(window.pageXOffset||u.scrollLeft,window.pageYOffset||u.scrollTop),l.x=n.left+u.x,l.y=n.top+u.y,l},s.utils.style.getViewportPageOffset=function(){var n=document.body,l=document.documentElement;return new s.utils.Coordinate(n.scrollLeft||l.scrollLeft,n.scrollTop||l.scrollTop)},s.utils.style.setElementShown=function(n,l){n.style.display=l?"":"none"},s.utils.style.isRightToLeft=function(n){return"rtl"==s.utils.style.getStyle_(n,"direction")},s.utils.style.getBorderBox=function(n){var l=s.utils.style.getComputedStyle(n,"borderLeftWidth"),u=s.utils.style.getComputedStyle(n,"borderRightWidth"),h=s.utils.style.getComputedStyle(n,"borderTopWidth");return n=s.utils.style.getComputedStyle(n,"borderBottomWidth"),{top:parseFloat(h),right:parseFloat(u),bottom:parseFloat(n),left:parseFloat(l)}},s.utils.style.scrollIntoContainerView=function(n,l,u){n=s.utils.style.getContainerOffsetToScrollInto(n,l,u),l.scrollLeft=n.x,l.scrollTop=n.y},s.utils.style.getContainerOffsetToScrollInto=function(n,l,u){var h=s.utils.style.getPageOffset(n),_=s.utils.style.getPageOffset(l),b=s.utils.style.getBorderBox(l),M=h.x-_.x-b.left;return h=h.y-_.y-b.top,_=s.utils.style.getSizeWithDisplay_(n),n=l.clientWidth-_.width,_=l.clientHeight-_.height,b=l.scrollLeft,l=l.scrollTop,u?(b+=M-n/2,l+=h-_/2):(b+=Math.min(M,Math.max(M-n,0)),l+=Math.min(h,Math.max(h-_,0))),new s.utils.Coordinate(b,l)},s.utils.userAgent={},function(n){function l(h){return-1!=u.indexOf(h.toUpperCase())}s.utils.userAgent.raw=n;var u=s.utils.userAgent.raw.toUpperCase();s.utils.userAgent.IE=l("Trident")||l("MSIE"),s.utils.userAgent.EDGE=l("Edge"),s.utils.userAgent.JAVA_FX=l("JavaFX"),s.utils.userAgent.CHROME=(l("Chrome")||l("CriOS"))&&!s.utils.userAgent.EDGE,s.utils.userAgent.WEBKIT=l("WebKit")&&!s.utils.userAgent.EDGE,s.utils.userAgent.GECKO=l("Gecko")&&!s.utils.userAgent.WEBKIT&&!s.utils.userAgent.IE&&!s.utils.userAgent.EDGE,s.utils.userAgent.ANDROID=l("Android"),n=s.utils.global.navigator&&s.utils.global.navigator.maxTouchPoints,s.utils.userAgent.IPAD=l("iPad")||l("Macintosh")&&0<n,s.utils.userAgent.IPOD=l("iPod"),s.utils.userAgent.IPHONE=l("iPhone")&&!s.utils.userAgent.IPAD&&!s.utils.userAgent.IPOD,s.utils.userAgent.MAC=l("Macintosh"),s.utils.userAgent.TABLET=s.utils.userAgent.IPAD||s.utils.userAgent.ANDROID&&!l("Mobile")||l("Silk"),s.utils.userAgent.MOBILE=!s.utils.userAgent.TABLET&&(s.utils.userAgent.IPOD||s.utils.userAgent.IPHONE||s.utils.userAgent.ANDROID||l("IEMobile"))}(s.utils.global.navigator&&s.utils.global.navigator.userAgent||""),s.utils.noEvent=function(n){n.preventDefault(),n.stopPropagation()},s.utils.isTargetInput=function(n){return"textarea"==n.target.type||"text"==n.target.type||"number"==n.target.type||"email"==n.target.type||"password"==n.target.type||"search"==n.target.type||"tel"==n.target.type||"url"==n.target.type||n.target.isContentEditable||n.target.dataset&&"true"==n.target.dataset.isTextInput},s.utils.getRelativeXY=function(n){var l=new s.utils.Coordinate(0,0),u=n.getAttribute("x");return u&&(l.x=parseInt(u,10)),(u=n.getAttribute("y"))&&(l.y=parseInt(u,10)),(u=(u=n.getAttribute("transform"))&&u.match(s.utils.getRelativeXY.XY_REGEX_))&&(l.x+=Number(u[1]),u[3]&&(l.y+=Number(u[3]))),(n=n.getAttribute("style"))&&-1<n.indexOf("translate")&&(n=n.match(s.utils.getRelativeXY.XY_STYLE_REGEX_))&&(l.x+=Number(n[1]),n[3]&&(l.y+=Number(n[3]))),l},s.utils.getInjectionDivXY_=function(n){for(var l=0,u=0;n;){var h=s.utils.getRelativeXY(n);if(l+=h.x,u+=h.y,-1!=(" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;n=n.parentNode}return new s.utils.Coordinate(l,u)},s.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,s.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,s.utils.isRightButton=function(n){return!(!n.ctrlKey||!s.utils.userAgent.MAC)||2==n.button},s.utils.mouseToSvg=function(n,l,u){var h=l.createSVGPoint();return h.x=n.clientX,h.y=n.clientY,u||(u=l.getScreenCTM().inverse()),h.matrixTransform(u)},s.utils.getScrollDeltaPixels=function(n){switch(n.deltaMode){default:return{x:n.deltaX,y:n.deltaY};case 1:return{x:n.deltaX*s.LINE_MODE_MULTIPLIER,y:n.deltaY*s.LINE_MODE_MULTIPLIER};case 2:return{x:n.deltaX*s.PAGE_MODE_MULTIPLIER,y:n.deltaY*s.PAGE_MODE_MULTIPLIER}}},s.utils.tokenizeInterpolation=function(n){return s.utils.tokenizeInterpolation_(n,!0)},s.utils.replaceMessageReferences=function(n){return"string"!=typeof n?n:(n=s.utils.tokenizeInterpolation_(n,!1)).length?String(n[0]):""},s.utils.checkMessageReferences=function(n){for(var l=!0,u=s.Msg,h=n.match(/%{BKY_[A-Z]\w*}/gi),_=0;_<h.length;_++)null==u[h[_].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+h[_]+" in "+n),l=!1);return l},s.utils.tokenizeInterpolation_=function(n,l){var u=[],h=n.split("");h.push("");var _=0;n=[];for(var b=null,M=0;M<h.length;M++){var k=h[M];0==_?"%"==k?((k=n.join(""))&&u.push(k),n.length=0,_=1):n.push(k):1==_?"%"==k?(n.push(k),_=0):l&&"0"<=k&&"9">=k?(_=2,b=k,(k=n.join(""))&&u.push(k),n.length=0):"{"==k?_=3:(n.push("%",k),_=0):2==_?"0"<=k&&"9">=k?b+=k:(u.push(parseInt(b,10)),M--,_=0):3==_&&(""==k?(n.splice(0,0,"%{"),M--,_=0):"}"!=k?n.push(k):(_=n.join(""),/[A-Z]\w*/i.test(_)?(k=_.toUpperCase(),(k=s.utils.string.startsWith(k,"BKY_")?k.substring(4):null)&&k in s.Msg?"string"==typeof(_=s.Msg[k])?Array.prototype.push.apply(u,s.utils.tokenizeInterpolation_(_,l)):u.push(l?String(_):_):u.push("%{"+_+"}")):u.push("%{"+_+"}"),_=n.length=0))}for((k=n.join(""))&&u.push(k),l=[],M=n.length=0;M<u.length;++M)"string"==typeof u[M]?n.push(u[M]):((k=n.join(""))&&l.push(k),n.length=0,l.push(u[M]));return(k=n.join(""))&&l.push(k),n.length=0,l},s.utils.genUid=function(){for(var n=s.utils.genUid.soup_.length,l=[],u=0;20>u;u++)l[u]=s.utils.genUid.soup_.charAt(Math.random()*n);return l.join("")},s.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s.utils.is3dSupported=function(){if(void 0!==s.utils.is3dSupported.cached_)return s.utils.is3dSupported.cached_;if(!s.utils.global.getComputedStyle)return!1;var n=document.createElement("p"),l="none",u={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var h in document.body.insertBefore(n,null),u)if(void 0!==n.style[h]){if(n.style[h]="translate3d(1px,1px,1px)",!(l=s.utils.global.getComputedStyle(n)))return document.body.removeChild(n),!1;l=l.getPropertyValue(u[h])}return document.body.removeChild(n),s.utils.is3dSupported.cached_="none"!==l,s.utils.is3dSupported.cached_},s.utils.runAfterPageLoad=function(n){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)n();else var l=setInterval(function(){"complete"==document.readyState&&(clearInterval(l),n())},10)},s.utils.getViewportBBox=function(){var n=s.utils.style.getViewportPageOffset();return new s.utils.Rect(n.y,document.documentElement.clientHeight+n.y,n.x,document.documentElement.clientWidth+n.x)},s.utils.arrayRemove=function(n,l){return-1!=(l=n.indexOf(l))&&(n.splice(l,1),!0)},s.utils.getDocumentScroll=function(){var n=document.documentElement,l=window;return s.utils.userAgent.IE&&l.pageYOffset!=n.scrollTop?new s.utils.Coordinate(n.scrollLeft,n.scrollTop):new s.utils.Coordinate(l.pageXOffset||n.scrollLeft,l.pageYOffset||n.scrollTop)},s.utils.getBlockTypeCounts=function(n,l){var u=Object.create(null),h=n.getDescendants(!0);for(l&&(n=n.getNextBlock())&&(n=h.indexOf(n),h.splice(n,h.length-n)),n=0;l=h[n];n++)u[l.type]?u[l.type]++:u[l.type]=1;return u},s.utils.screenToWsCoordinates=function(n,l){var u=l.x;l=l.y;var h=n.getInjectionDiv().getBoundingClientRect();return u=new s.utils.Coordinate(u-h.left,l-h.top),l=n.getOriginOffsetInPixels(),s.utils.Coordinate.difference(u,l).scale(1/n.scale)},s.utils.parseBlockColour=function(n){var l="string"==typeof n?s.utils.replaceMessageReferences(n):n,u=Number(l);if(!isNaN(u)&&0<=u&&360>=u)return{hue:u,hex:s.utils.colour.hsvToHex(u,s.HSV_SATURATION,255*s.HSV_VALUE)};if(u=s.utils.colour.parse(l))return{hue:null,hex:u};throw u='Invalid colour: "'+l+'"',n!=l&&(u+=' (from "'+n+'")'),Error(u)},s.Touch={},s.Touch.TOUCH_ENABLED="ontouchstart"in s.utils.global||!!(s.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!s.utils.global.navigator||!s.utils.global.navigator.maxTouchPoints&&!s.utils.global.navigator.msMaxTouchPoints),s.Touch.touchIdentifier_=null,s.Touch.TOUCH_MAP={},s.utils.global.PointerEvent?s.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:s.Touch.TOUCH_ENABLED&&(s.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),s.longPid_=0,s.longStart=function(n,l){s.longStop_(),n.changedTouches&&1!=n.changedTouches.length||(s.longPid_=setTimeout(function(){n.changedTouches&&(n.button=2,n.clientX=n.changedTouches[0].clientX,n.clientY=n.changedTouches[0].clientY),l&&l.handleRightClick(n)},s.LONGPRESS))},s.longStop_=function(){s.longPid_&&(clearTimeout(s.longPid_),s.longPid_=0)},s.Touch.clearTouchIdentifier=function(){s.Touch.touchIdentifier_=null},s.Touch.shouldHandleEvent=function(n){return!s.Touch.isMouseOrTouchEvent(n)||s.Touch.checkTouchIdentifier(n)},s.Touch.getTouchIdentifierFromEvent=function(n){return null!=n.pointerId?n.pointerId:n.changedTouches&&n.changedTouches[0]&&null!=n.changedTouches[0].identifier?n.changedTouches[0].identifier:"mouse"},s.Touch.checkTouchIdentifier=function(n){var l=s.Touch.getTouchIdentifierFromEvent(n);return null!=s.Touch.touchIdentifier_?s.Touch.touchIdentifier_==l:("mousedown"==n.type||"touchstart"==n.type||"pointerdown"==n.type)&&(s.Touch.touchIdentifier_=l,!0)},s.Touch.setClientFromTouch=function(n){if(s.utils.string.startsWith(n.type,"touch")){var l=n.changedTouches[0];n.clientX=l.clientX,n.clientY=l.clientY}},s.Touch.isMouseOrTouchEvent=function(n){return s.utils.string.startsWith(n.type,"touch")||s.utils.string.startsWith(n.type,"mouse")||s.utils.string.startsWith(n.type,"pointer")},s.Touch.isTouchEvent=function(n){return s.utils.string.startsWith(n.type,"touch")||s.utils.string.startsWith(n.type,"pointer")},s.Touch.splitEventByTouches=function(n){var l=[];if(n.changedTouches)for(var u=0;u<n.changedTouches.length;u++)l[u]={type:n.type,changedTouches:[n.changedTouches[u]],target:n.target,stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.preventDefault()}};else l.push(n);return l},s.browserEvents={},s.browserEvents.conditionalBind=function(n,l,u,h,_,b){var M=!1,k=function(X){var j=!_;X=s.Touch.splitEventByTouches(X);for(var ee,oe=0;ee=X[oe];oe++)(!j||s.Touch.shouldHandleEvent(ee))&&(s.Touch.setClientFromTouch(ee),u?h.call(u,ee):h(ee),M=!0)},H=[];if(s.utils.global.PointerEvent&&l in s.Touch.TOUCH_MAP)for(var V,U=0;V=s.Touch.TOUCH_MAP[l][U];U++)n.addEventListener(V,k,!1),H.push([n,V,k]);else if(n.addEventListener(l,k,!1),H.push([n,l,k]),l in s.Touch.TOUCH_MAP){var J=function(X){k(X),M&&!b&&X.preventDefault()};for(U=0;V=s.Touch.TOUCH_MAP[l][U];U++)n.addEventListener(V,J,!1),H.push([n,V,J])}return H},s.browserEvents.bind=function(n,l,u,h){var _=function(U){u?h.call(u,U):h(U)},b=[];if(s.utils.global.PointerEvent&&l in s.Touch.TOUCH_MAP)for(var k,M=0;k=s.Touch.TOUCH_MAP[l][M];M++)n.addEventListener(k,_,!1),b.push([n,k,_]);else if(n.addEventListener(l,_,!1),b.push([n,l,_]),l in s.Touch.TOUCH_MAP){var H=function(U){if(U.changedTouches&&1==U.changedTouches.length){var V=U.changedTouches[0];U.clientX=V.clientX,U.clientY=V.clientY}_(U),U.preventDefault()};for(M=0;k=s.Touch.TOUCH_MAP[l][M];M++)n.addEventListener(k,H,!1),b.push([n,k,H])}return b},s.browserEvents.unbind=function(n){for(;n.length;){var l=n.pop(),u=l[2];l[0].removeEventListener(l[1],u,!1)}return u},s.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},s.ComponentManager.prototype.addComponent=function(n,l){var u=n.component.id;if(!l&&this.componentData_[u])throw Error('Plugin "'+u+'" with capabilities "'+this.componentData_[u].capabilities+'" already added.');this.componentData_[u]=n,l=[];for(var h=0;h<n.capabilities.length;h++){var _=String(n.capabilities[h]).toLowerCase();l.push(_),void 0===this.capabilityToComponentIds_[_]?this.capabilityToComponentIds_[_]=[u]:this.capabilityToComponentIds_[_].push(u)}this.componentData_[u].capabilities=l},s.ComponentManager.prototype.removeComponent=function(n){var l=this.componentData_[n];if(l){for(var u=0;u<l.capabilities.length;u++){var h=String(l.capabilities[u]).toLowerCase();this.capabilityToComponentIds_[h].splice(this.capabilityToComponentIds_[h].indexOf(n),1)}delete this.componentData_[n]}},s.ComponentManager.prototype.addCapability=function(n,l){if(!this.getComponent(n))throw Error('Cannot add capability, "'+l+'". Plugin "'+n+'" has not been added to the ComponentManager');this.hasCapability(n,l)?console.warn('Plugin "'+n+'already has capability "'+l+'"'):(l=String(l).toLowerCase(),this.componentData_[n].capabilities.push(l),this.capabilityToComponentIds_[l].push(n))},s.ComponentManager.prototype.removeCapability=function(n,l){if(!this.getComponent(n))throw Error('Cannot remove capability, "'+l+'". Plugin "'+n+'" has not been added to the ComponentManager');this.hasCapability(n,l)?(l=String(l).toLowerCase(),this.componentData_[n].capabilities.splice(this.componentData_[n].capabilities.indexOf(l),1),this.capabilityToComponentIds_[l].splice(this.capabilityToComponentIds_[l].indexOf(n),1)):console.warn('Plugin "'+n+"doesn't have capability \""+l+'" to remove')},s.ComponentManager.prototype.hasCapability=function(n,l){return l=String(l).toLowerCase(),-1!==this.componentData_[n].capabilities.indexOf(l)},s.ComponentManager.prototype.getComponent=function(n){return this.componentData_[n]&&this.componentData_[n].component},s.ComponentManager.prototype.getComponents=function(n,l){if(n=String(n).toLowerCase(),!(n=this.capabilityToComponentIds_[n]))return[];var u=[];if(l){var h=[],_=this.componentData_;n.forEach(function(b){h.push(_[b])}),h.sort(function(b,M){return b.weight-M.weight}),h.forEach(function(b){u.push(b.component)})}else _=this.componentData_,n.forEach(function(b){u.push(_[b].component)});return u},s.ComponentManager.Capability=function(n){this.name_=n},s.ComponentManager.Capability.prototype.toString=function(){return this.name_},s.ComponentManager.Capability.POSITIONABLE=new s.ComponentManager.Capability("positionable"),s.ComponentManager.Capability.DRAG_TARGET=new s.ComponentManager.Capability("drag_target"),s.ComponentManager.Capability.DELETE_AREA=new s.ComponentManager.Capability("delete_area"),s.ComponentManager.Capability.AUTOHIDEABLE=new s.ComponentManager.Capability("autohideable"),s.utils.Svg=function(n){this.tagName_=n},s.utils.Svg.prototype.toString=function(){return this.tagName_},s.utils.Svg.ANIMATE=new s.utils.Svg("animate"),s.utils.Svg.CIRCLE=new s.utils.Svg("circle"),s.utils.Svg.CLIPPATH=new s.utils.Svg("clipPath"),s.utils.Svg.DEFS=new s.utils.Svg("defs"),s.utils.Svg.FECOMPOSITE=new s.utils.Svg("feComposite"),s.utils.Svg.FECOMPONENTTRANSFER=new s.utils.Svg("feComponentTransfer"),s.utils.Svg.FEFLOOD=new s.utils.Svg("feFlood"),s.utils.Svg.FEFUNCA=new s.utils.Svg("feFuncA"),s.utils.Svg.FEGAUSSIANBLUR=new s.utils.Svg("feGaussianBlur"),s.utils.Svg.FEPOINTLIGHT=new s.utils.Svg("fePointLight"),s.utils.Svg.FESPECULARLIGHTING=new s.utils.Svg("feSpecularLighting"),s.utils.Svg.FILTER=new s.utils.Svg("filter"),s.utils.Svg.FOREIGNOBJECT=new s.utils.Svg("foreignObject"),s.utils.Svg.G=new s.utils.Svg("g"),s.utils.Svg.IMAGE=new s.utils.Svg("image"),s.utils.Svg.LINE=new s.utils.Svg("line"),s.utils.Svg.PATH=new s.utils.Svg("path"),s.utils.Svg.PATTERN=new s.utils.Svg("pattern"),s.utils.Svg.POLYGON=new s.utils.Svg("polygon"),s.utils.Svg.RECT=new s.utils.Svg("rect"),s.utils.Svg.SVG=new s.utils.Svg("svg"),s.utils.Svg.TEXT=new s.utils.Svg("text"),s.utils.Svg.TSPAN=new s.utils.Svg("tspan"),s.utils.dom={},s.utils.dom.SVG_NS="http://www.w3.org/2000/svg",s.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",s.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",s.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},s.utils.dom.cacheWidths_=null,s.utils.dom.cacheReference_=0,s.utils.dom.canvasContext_=null,s.utils.dom.createSvgElement=function(n,l,u){for(var h in n=document.createElementNS(s.utils.dom.SVG_NS,String(n)),l)n.setAttribute(h,l[h]);return document.body.runtimeStyle&&(n.runtimeStyle=n.currentStyle=n.style),u&&u.appendChild(n),n},s.utils.dom.addClass=function(n,l){var u=n.getAttribute("class")||"";return-1==(" "+u+" ").indexOf(" "+l+" ")&&(u&&(u+=" "),n.setAttribute("class",u+l),!0)},s.utils.dom.removeClasses=function(n,l){l=l.split(" ");for(var u=0;u<l.length;u++)s.utils.dom.removeClass(n,l[u])},s.utils.dom.removeClass=function(n,l){var u=n.getAttribute("class");if(-1==(" "+u+" ").indexOf(" "+l+" "))return!1;u=u.split(/\s+/);for(var h=0;h<u.length;h++)u[h]&&u[h]!=l||(u.splice(h,1),h--);return u.length?n.setAttribute("class",u.join(" ")):n.removeAttribute("class"),!0},s.utils.dom.hasClass=function(n,l){return-1!=(" "+n.getAttribute("class")+" ").indexOf(" "+l+" ")},s.utils.dom.removeNode=function(n){return n&&n.parentNode?n.parentNode.removeChild(n):null},s.utils.dom.insertAfter=function(n,l){var u=l.nextSibling;if(!(l=l.parentNode))throw Error("Reference node has no parent.");u?l.insertBefore(n,u):l.appendChild(n)},s.utils.dom.containsNode=function(n,l){return!!(n.compareDocumentPosition(l)&s.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},s.utils.dom.setCssTransform=function(n,l){n.style.transform=l,n.style["-webkit-transform"]=l},s.utils.dom.startTextWidthCache=function(){s.utils.dom.cacheReference_++,s.utils.dom.cacheWidths_||(s.utils.dom.cacheWidths_=Object.create(null))},s.utils.dom.stopTextWidthCache=function(){s.utils.dom.cacheReference_--,s.utils.dom.cacheReference_||(s.utils.dom.cacheWidths_=null)},s.utils.dom.getTextWidth=function(n){var u,l=n.textContent+"\n"+n.className.baseVal;if(s.utils.dom.cacheWidths_&&(u=s.utils.dom.cacheWidths_[l]))return u;try{u=s.utils.userAgent.IE||s.utils.userAgent.EDGE?n.getBBox().width:n.getComputedTextLength()}catch(h){return 8*n.textContent.length}return s.utils.dom.cacheWidths_&&(s.utils.dom.cacheWidths_[l]=u),u},s.utils.dom.getFastTextWidth=function(n,l,u,h){return s.utils.dom.getFastTextWidthWithSizeString(n,l+"pt",u,h)},s.utils.dom.getFastTextWidthWithSizeString=function(n,l,u,h){var b,_=n.textContent;return n=_+"\n"+n.className.baseVal,s.utils.dom.cacheWidths_&&(b=s.utils.dom.cacheWidths_[n])||(s.utils.dom.canvasContext_||((b=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(b),s.utils.dom.canvasContext_=b.getContext("2d")),s.utils.dom.canvasContext_.font=u+" "+l+" "+h,b=s.utils.dom.canvasContext_.measureText(_).width,s.utils.dom.cacheWidths_&&(s.utils.dom.cacheWidths_[n]=b)),b},s.utils.dom.measureFontMetrics=function(n,l,u,h){var _=document.createElement("span");_.style.font=u+" "+l+" "+h,_.textContent=n,(n=document.createElement("div")).style.width="1px",n.style.height="0px",(l=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),l.appendChild(_),l.appendChild(n),document.body.appendChild(l);try{u={},l.style.alignItems="baseline",u.baseline=n.offsetTop-_.offsetTop,l.style.alignItems="flex-end",u.height=n.offsetTop-_.offsetTop}finally{document.body.removeChild(l)}return u},s.utils.math={},s.utils.math.toRadians=function(n){return n*Math.PI/180},s.utils.math.toDegrees=function(n){return 180*n/Math.PI},s.utils.math.clamp=function(n,l,u){if(u<n){var h=u;u=n,n=h}return Math.max(n,Math.min(l,u))},s.DropDownDiv=function(){},s.DropDownDiv.boundsElement_=null,s.DropDownDiv.owner_=null,s.DropDownDiv.positionToField_=null,s.DropDownDiv.ARROW_SIZE=16,s.DropDownDiv.BORDER_SIZE=1,s.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,s.DropDownDiv.PADDING_Y=16,s.DropDownDiv.ANIMATION_TIME=.25,s.DropDownDiv.animateOutTimer_=null,s.DropDownDiv.onHide_=null,s.DropDownDiv.rendererClassName_="",s.DropDownDiv.themeClassName_="",s.DropDownDiv.createDom=function(){if(!s.DropDownDiv.DIV_){var n=document.createElement("div");n.className="blocklyDropDownDiv",(s.parentContainer||document.body).appendChild(n),s.DropDownDiv.DIV_=n;var l=document.createElement("div");l.className="blocklyDropDownContent",n.appendChild(l),s.DropDownDiv.content_=l,(l=document.createElement("div")).className="blocklyDropDownArrow",n.appendChild(l),s.DropDownDiv.arrow_=l,s.DropDownDiv.DIV_.style.opacity=0,s.DropDownDiv.DIV_.style.transition="transform "+s.DropDownDiv.ANIMATION_TIME+"s, opacity "+s.DropDownDiv.ANIMATION_TIME+"s",n.addEventListener("focusin",function(){s.utils.dom.addClass(n,"blocklyFocused")}),n.addEventListener("focusout",function(){s.utils.dom.removeClass(n,"blocklyFocused")})}},s.DropDownDiv.setBoundsElement=function(n){s.DropDownDiv.boundsElement_=n},s.DropDownDiv.getContentDiv=function(){return s.DropDownDiv.content_},s.DropDownDiv.clearContent=function(){s.DropDownDiv.content_.textContent="",s.DropDownDiv.content_.style.width=""},s.DropDownDiv.setColour=function(n,l){s.DropDownDiv.DIV_.style.backgroundColor=n,s.DropDownDiv.DIV_.style.borderColor=l},s.DropDownDiv.showPositionedByBlock=function(n,l,u,h){return s.DropDownDiv.showPositionedByRect_(s.DropDownDiv.getScaledBboxOfBlock_(l),n,u,h)},s.DropDownDiv.showPositionedByField=function(n,l,u){return s.DropDownDiv.positionToField_=!0,s.DropDownDiv.showPositionedByRect_(s.DropDownDiv.getScaledBboxOfField_(n),n,l,u)},s.DropDownDiv.getScaledBboxOfBlock_=function(n){var l=n.getSvgRoot(),u=l.getBBox(),h=n.workspace.scale;return n=u.height*h,u=u.width*h,l=s.utils.style.getPageOffset(l),new s.utils.Rect(l.y,l.y+n,l.x,l.x+u)},s.DropDownDiv.getScaledBboxOfField_=function(n){return n=n.getScaledBBox(),new s.utils.Rect(n.top,n.bottom,n.left,n.right)},s.DropDownDiv.showPositionedByRect_=function(n,l,u,h){var _=n.left+(n.right-n.left)/2,b=n.bottom;n=n.top,h&&(n+=h);for(var M=(h=l.getSourceBlock()).workspace;M.options.parentWorkspace;)M=M.options.parentWorkspace;return s.DropDownDiv.setBoundsElement(M.getParentSvg().parentNode),s.DropDownDiv.show(l,h.RTL,_,b,_,n,u)},s.DropDownDiv.show=function(n,l,u,h,_,b,M){return s.DropDownDiv.owner_=n,s.DropDownDiv.onHide_=M||null,(n=s.DropDownDiv.DIV_).style.direction=l?"rtl":"ltr",l=s.getMainWorkspace(),s.DropDownDiv.rendererClassName_=l.getRenderer().getClassName(),s.DropDownDiv.themeClassName_=l.getTheme().getClassName(),s.utils.dom.addClass(n,s.DropDownDiv.rendererClassName_),s.utils.dom.addClass(n,s.DropDownDiv.themeClassName_),s.DropDownDiv.positionInternal_(u,h,_,b)},s.DropDownDiv.getBoundsInfo_=function(){var n=s.utils.style.getPageOffset(s.DropDownDiv.boundsElement_),l=s.utils.style.getSize(s.DropDownDiv.boundsElement_);return{left:n.x,right:n.x+l.width,top:n.y,bottom:n.y+l.height,width:l.width,height:l.height}},s.DropDownDiv.getPositionMetrics_=function(n,l,u,h){var _=s.DropDownDiv.getBoundsInfo_(),b=s.utils.style.getSize(s.DropDownDiv.DIV_);return l+b.height<_.bottom?s.DropDownDiv.getPositionBelowMetrics_(n,l,_,b):h-b.height>_.top?s.DropDownDiv.getPositionAboveMetrics_(u,h,_,b):l+b.height<document.documentElement.clientHeight?s.DropDownDiv.getPositionBelowMetrics_(n,l,_,b):h-b.height>document.documentElement.clientTop?s.DropDownDiv.getPositionAboveMetrics_(u,h,_,b):s.DropDownDiv.getPositionTopOfPageMetrics_(n,_,b)},s.DropDownDiv.getPositionBelowMetrics_=function(n,l,u,h){return{initialX:(n=s.DropDownDiv.getPositionX(n,u.left,u.right,h.width)).divX,initialY:l,finalX:n.divX,finalY:l+s.DropDownDiv.PADDING_Y,arrowX:n.arrowX,arrowY:-(s.DropDownDiv.ARROW_SIZE/2+s.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},s.DropDownDiv.getPositionAboveMetrics_=function(n,l,u,h){return{initialX:(n=s.DropDownDiv.getPositionX(n,u.left,u.right,h.width)).divX,initialY:l-h.height,finalX:n.divX,finalY:l-h.height-s.DropDownDiv.PADDING_Y,arrowX:n.arrowX,arrowY:h.height-2*s.DropDownDiv.BORDER_SIZE-s.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},s.DropDownDiv.getPositionTopOfPageMetrics_=function(n,l,u){return{initialX:(n=s.DropDownDiv.getPositionX(n,l.left,l.right,u.width)).divX,initialY:0,finalX:n.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},s.DropDownDiv.getPositionX=function(n,l,u,h){var _=n;return n=s.utils.math.clamp(l,n-h/2,u-h),{arrowX:h=s.utils.math.clamp(l=s.DropDownDiv.ARROW_HORIZONTAL_PADDING,(_-=s.DropDownDiv.ARROW_SIZE/2)-n,h-l-s.DropDownDiv.ARROW_SIZE),divX:n}},s.DropDownDiv.isVisible=function(){return!!s.DropDownDiv.owner_},s.DropDownDiv.hideIfOwner=function(n,l){return s.DropDownDiv.owner_===n&&(l?s.DropDownDiv.hideWithoutAnimation():s.DropDownDiv.hide(),!0)},s.DropDownDiv.hide=function(){var n=s.DropDownDiv.DIV_;n.style.transform="translate(0, 0)",n.style.opacity=0,s.DropDownDiv.animateOutTimer_=setTimeout(function(){s.DropDownDiv.hideWithoutAnimation()},1e3*s.DropDownDiv.ANIMATION_TIME),s.DropDownDiv.onHide_&&(s.DropDownDiv.onHide_(),s.DropDownDiv.onHide_=null)},s.DropDownDiv.hideWithoutAnimation=function(){if(s.DropDownDiv.isVisible()){s.DropDownDiv.animateOutTimer_&&clearTimeout(s.DropDownDiv.animateOutTimer_);var n=s.DropDownDiv.DIV_;n.style.transform="",n.style.left="",n.style.top="",n.style.opacity=0,n.style.display="none",n.style.backgroundColor="",n.style.borderColor="",s.DropDownDiv.onHide_&&(s.DropDownDiv.onHide_(),s.DropDownDiv.onHide_=null),s.DropDownDiv.clearContent(),s.DropDownDiv.owner_=null,s.DropDownDiv.rendererClassName_&&(s.utils.dom.removeClass(n,s.DropDownDiv.rendererClassName_),s.DropDownDiv.rendererClassName_=""),s.DropDownDiv.themeClassName_&&(s.utils.dom.removeClass(n,s.DropDownDiv.themeClassName_),s.DropDownDiv.themeClassName_=""),s.getMainWorkspace().markFocused()}},s.DropDownDiv.positionInternal_=function(n,l,u,h){(n=s.DropDownDiv.getPositionMetrics_(n,l,u,h)).arrowVisible?(s.DropDownDiv.arrow_.style.display="",s.DropDownDiv.arrow_.style.transform="translate("+n.arrowX+"px,"+n.arrowY+"px) rotate(45deg)",s.DropDownDiv.arrow_.setAttribute("class",n.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):s.DropDownDiv.arrow_.style.display="none",l=Math.floor(n.initialX),u=Math.floor(n.initialY),h=Math.floor(n.finalX);var _=Math.floor(n.finalY),b=s.DropDownDiv.DIV_;return b.style.left=l+"px",b.style.top=u+"px",b.style.display="block",b.style.opacity=1,b.style.transform="translate("+(h-l)+"px,"+(_-u)+"px)",!!n.arrowAtTop},s.DropDownDiv.repositionForWindowResize=function(){if(s.DropDownDiv.owner_){var n=s.DropDownDiv.owner_,l=n.getSourceBlock();n=s.DropDownDiv.positionToField_?s.DropDownDiv.getScaledBboxOfField_(n):s.DropDownDiv.getScaledBboxOfBlock_(l),s.DropDownDiv.positionInternal_(l=n.left+(n.right-n.left)/2,n.bottom,l,n.top)}else s.DropDownDiv.hide()},s.registry={},s.registry.typeMap_=Object.create(null),s.registry.DEFAULT="default",s.registry.Type=function(n){this.name_=n},s.registry.Type.prototype.toString=function(){return this.name_},s.registry.Type.CONNECTION_CHECKER=new s.registry.Type("connectionChecker"),s.registry.Type.CURSOR=new s.registry.Type("cursor"),s.registry.Type.EVENT=new s.registry.Type("event"),s.registry.Type.FIELD=new s.registry.Type("field"),s.registry.Type.RENDERER=new s.registry.Type("renderer"),s.registry.Type.TOOLBOX=new s.registry.Type("toolbox"),s.registry.Type.THEME=new s.registry.Type("theme"),s.registry.Type.TOOLBOX_ITEM=new s.registry.Type("toolboxItem"),s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new s.registry.Type("flyoutsVerticalToolbox"),s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new s.registry.Type("flyoutsHorizontalToolbox"),s.registry.Type.METRICS_MANAGER=new s.registry.Type("metricsManager"),s.registry.Type.BLOCK_DRAGGER=new s.registry.Type("blockDragger"),s.registry.register=function(n,l,u,h){if(!(n instanceof s.registry.Type)&&"string"!=typeof n||""==String(n).trim())throw Error('Invalid type "'+n+'". The type must be a non-empty string or a Blockly.registry.Type.');if(n=String(n).toLowerCase(),"string"!=typeof l||""==l.trim())throw Error('Invalid name "'+l+'". The name must be a non-empty string.');if(l=l.toLowerCase(),!u)throw Error("Can not register a null value");var _=s.registry.typeMap_[n];if(_||(_=s.registry.typeMap_[n]=Object.create(null)),s.registry.validate_(n,u),!h&&_[l])throw Error('Name "'+l+'" with type "'+n+'" already registered.');_[l]=u},s.registry.validate_=function(n,l){if(n===String(s.registry.Type.FIELD)&&"function"!=typeof l.fromJson)throw Error('Type "'+n+'" must have a fromJson function')},s.registry.unregister=function(n,l){n=String(n).toLowerCase(),l=l.toLowerCase();var u=s.registry.typeMap_[n];u&&u[l]?delete s.registry.typeMap_[n][l]:console.warn("Unable to unregister ["+l+"]["+n+"] from the registry.")},s.registry.getItem_=function(n,l,u){n=String(n).toLowerCase(),l=l.toLowerCase();var h=s.registry.typeMap_[n];if(!h||!h[l]){if(l="Unable to find ["+l+"]["+n+"] in the registry.",u)throw Error(l+" You must require or register a "+n+" plugin.");return console.warn(l),null}return h[l]},s.registry.hasItem=function(n,l){return n=String(n).toLowerCase(),l=l.toLowerCase(),!!(n=s.registry.typeMap_[n])&&!!n[l]},s.registry.getClass=function(n,l,u){return s.registry.getItem_(n,l,u)},s.registry.getObject=function(n,l,u){return s.registry.getItem_(n,l,u)},s.registry.getClassFromOptions=function(n,l,u){return"function"==typeof(l=l.plugins[n.toString()]||s.registry.DEFAULT)?l:s.registry.getClass(n,l,u)},s.Events={},s.Events.group_="",s.Events.recordUndo=!0,s.Events.disabled_=0,s.Events.CREATE="create",s.Events.BLOCK_CREATE=s.Events.CREATE,s.Events.DELETE="delete",s.Events.BLOCK_DELETE=s.Events.DELETE,s.Events.CHANGE="change",s.Events.BLOCK_CHANGE=s.Events.CHANGE,s.Events.MOVE="move",s.Events.BLOCK_MOVE=s.Events.MOVE,s.Events.VAR_CREATE="var_create",s.Events.VAR_DELETE="var_delete",s.Events.VAR_RENAME="var_rename",s.Events.UI="ui",s.Events.BLOCK_DRAG="drag",s.Events.SELECTED="selected",s.Events.CLICK="click",s.Events.MARKER_MOVE="marker_move",s.Events.BUBBLE_OPEN="bubble_open",s.Events.TRASHCAN_OPEN="trashcan_open",s.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",s.Events.THEME_CHANGE="theme_change",s.Events.VIEWPORT_CHANGE="viewport_change",s.Events.COMMENT_CREATE="comment_create",s.Events.COMMENT_DELETE="comment_delete",s.Events.COMMENT_CHANGE="comment_change",s.Events.COMMENT_MOVE="comment_move",s.Events.FINISHED_LOADING="finished_loading",s.Events.BUMP_EVENTS=[s.Events.BLOCK_CREATE,s.Events.BLOCK_MOVE,s.Events.COMMENT_CREATE,s.Events.COMMENT_MOVE],s.Events.FIRE_QUEUE_=[],s.Events.fire=function(n){s.Events.isEnabled()&&(s.Events.FIRE_QUEUE_.length||setTimeout(s.Events.fireNow_,0),s.Events.FIRE_QUEUE_.push(n))},s.Events.fireNow_=function(){for(var u,n=s.Events.filter(s.Events.FIRE_QUEUE_,!0),l=s.Events.FIRE_QUEUE_.length=0;u=n[l];l++)if(u.workspaceId){var h=s.Workspace.getById(u.workspaceId);h&&h.fireChangeListener(u)}},s.Events.filter=function(n,l){n=n.slice(),l||n.reverse();for(var b,u=[],h=Object.create(null),_=0;b=n[_];_++)if(!b.isNull()){var M=[b.isUiEvent?s.Events.UI:b.type,b.blockId,b.workspaceId].join(" "),k=h[M],H=k?k.event:null;k?b.type==s.Events.MOVE&&k.index==_-1?(H.newParentId=b.newParentId,H.newInputName=b.newInputName,H.newCoordinate=b.newCoordinate,k.index=_):b.type==s.Events.CHANGE&&b.element==H.element&&b.name==H.name?H.newValue=b.newValue:b.type==s.Events.VIEWPORT_CHANGE?(H.viewTop=b.viewTop,H.viewLeft=b.viewLeft,H.scale=b.scale,H.oldScale=b.oldScale):(b.type!=s.Events.CLICK||H.type!=s.Events.BUBBLE_OPEN)&&(h[M]={event:b,index:_},u.push(b)):(h[M]={event:b,index:_},u.push(b))}for(n=u.filter(function(U){return!U.isNull()}),l||n.reverse(),_=1;b=n[_];_++)b.type==s.Events.CHANGE&&"mutation"==b.element&&n.unshift(n.splice(_,1)[0]);return n},s.Events.clearPendingUndo=function(){for(var l,n=0;l=s.Events.FIRE_QUEUE_[n];n++)l.recordUndo=!1},s.Events.disable=function(){s.Events.disabled_++},s.Events.enable=function(){s.Events.disabled_--},s.Events.isEnabled=function(){return 0==s.Events.disabled_},s.Events.getGroup=function(){return s.Events.group_},s.Events.setGroup=function(n){s.Events.group_="boolean"==typeof n?n?s.utils.genUid():"":n},s.Events.getDescendantIds=function(n){var l=[];n=n.getDescendants(!1);for(var h,u=0;h=n[u];u++)l[u]=h.id;return l},s.Events.fromJson=function(n,l){var u=s.Events.get(n.type);if(!u)throw Error("Unknown event type.");return(u=new u).fromJson(n),u.workspaceId=l.id,u},s.Events.get=function(n){return s.registry.getClass(s.registry.Type.EVENT,n)},s.Events.disableOrphans=function(n){if((n.type==s.Events.MOVE||n.type==s.Events.CREATE)&&n.workspaceId){var l=s.Workspace.getById(n.workspaceId),u=l.getBlockById(n.blockId);if(u){n=s.Events.recordUndo;try{s.Events.recordUndo=!1;var h=u.getParent();if(h&&h.isEnabled()){var b,_=u.getDescendants(!1);for(l=0;b=_[l];l++)b.setEnabled(!0)}else if((u.outputConnection||u.previousConnection)&&!l.isDragging())do{u.setEnabled(!1),u=u.getNextBlock()}while(u)}finally{s.Events.recordUndo=n}}}},s.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=s.Events.getGroup(),this.recordUndo=s.Events.recordUndo},s.Events.Abstract.prototype.isUiEvent=!1,s.Events.Abstract.prototype.toJson=function(){var n={type:this.type};return this.group&&(n.group=this.group),n},s.Events.Abstract.prototype.fromJson=function(n){this.isBlank=!1,this.group=n.group},s.Events.Abstract.prototype.isNull=function(){return!1},s.Events.Abstract.prototype.run=function(n){},s.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var n=s.Workspace.getById(this.workspaceId);if(!n)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return n},s.utils.object={},s.utils.object.inherits=function(n,l){n.superClass_=l.prototype,n.prototype=Object.create(l.prototype),n.prototype.constructor=n},s.utils.object.mixin=function(n,l){for(var u in l)n[u]=l[u]},s.utils.object.deepMerge=function(n,l){for(var u in l)n[u]=null!=l[u]&&"object"==typeof l[u]?s.utils.object.deepMerge(n[u]||Object.create(null),l[u]):l[u];return n},s.utils.object.values=function(n){return Object.values?Object.values(n):Object.keys(n).map(function(l){return n[l]})},s.utils.xml={},s.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",s.utils.xml.document=function(){return document},s.utils.xml.createElement=function(n){return s.utils.xml.document().createElementNS(s.utils.xml.NAME_SPACE,n)},s.utils.xml.createTextNode=function(n){return s.utils.xml.document().createTextNode(n)},s.utils.xml.textToDomDocument=function(n){return(new DOMParser).parseFromString(n,"text/xml")},s.utils.xml.domToText=function(n){return(new XMLSerializer).serializeToString(n)},s.inputTypes={VALUE:s.connectionTypes.INPUT_VALUE,STATEMENT:s.connectionTypes.NEXT_STATEMENT,DUMMY:5},s.Xml={},s.Xml.workspaceToDom=function(n,l){var u=s.utils.xml.createElement("xml"),h=s.Xml.variablesToDom(s.Variables.allUsedVarModels(n));h.hasChildNodes()&&u.appendChild(h);var b,_=n.getTopComments(!0);for(h=0;b=_[h];h++)u.appendChild(b.toXmlWithXY(l));for(n=n.getTopBlocks(!0),h=0;_=n[h];h++)u.appendChild(s.Xml.blockToDomWithXY(_,l));return u},s.Xml.variablesToDom=function(n){for(var h,l=s.utils.xml.createElement("variables"),u=0;h=n[u];u++){var _=s.utils.xml.createElement("variable");_.appendChild(s.utils.xml.createTextNode(h.name)),h.type&&_.setAttribute("type",h.type),_.id=h.getId(),l.appendChild(_)}return l},s.Xml.blockToDomWithXY=function(n,l){if(n.isInsertionMarker()&&!(n=n.getChildren(!1)[0]))return new DocumentFragment;var u;n.workspace.RTL&&(u=n.workspace.getWidth()),l=s.Xml.blockToDom(n,l);var h=n.getRelativeToSurfaceXY();return l.setAttribute("x",Math.round(n.workspace.RTL?u-h.x:h.x)),l.setAttribute("y",Math.round(h.y)),l},s.Xml.fieldToDom_=function(n){if(n.isSerializable()){var l=s.utils.xml.createElement("field");return l.setAttribute("name",n.name||""),n.toXml(l)}return null},s.Xml.allFieldsToDom_=function(n,l){for(var h,u=0;h=n.inputList[u];u++)for(var b,_=0;b=h.fieldRow[_];_++)(b=s.Xml.fieldToDom_(b))&&l.appendChild(b)},s.Xml.blockToDom=function(n,l){if(n.isInsertionMarker())return(n=n.getChildren(!1)[0])?s.Xml.blockToDom(n):new DocumentFragment;var u=s.utils.xml.createElement(n.isShadow()?"shadow":"block");if(u.setAttribute("type",n.type),l||u.setAttribute("id",n.id),n.mutationToDom){var h=n.mutationToDom();h&&(h.hasChildNodes()||h.hasAttributes())&&u.appendChild(h)}if(s.Xml.allFieldsToDom_(n,u),h=n.getCommentText()){var _=n.commentModel.size,b=n.commentModel.pinned,M=s.utils.xml.createElement("comment");M.appendChild(s.utils.xml.createTextNode(h)),M.setAttribute("pinned",b),M.setAttribute("h",_.height),M.setAttribute("w",_.width),u.appendChild(M)}for(n.data&&((h=s.utils.xml.createElement("data")).appendChild(s.utils.xml.createTextNode(n.data)),u.appendChild(h)),h=0;_=n.inputList[h];h++){var k;if(b=!0,_.type!=s.inputTypes.DUMMY){var H=_.connection.targetBlock();_.type==s.inputTypes.VALUE?k=s.utils.xml.createElement("value"):_.type==s.inputTypes.STATEMENT&&(k=s.utils.xml.createElement("statement")),!(M=_.connection.getShadowDom())||H&&H.isShadow()||k.appendChild(s.Xml.cloneShadow_(M,l)),H&&(M=s.Xml.blockToDom(H,l)).nodeType==s.utils.dom.NodeType.ELEMENT_NODE&&(k.appendChild(M),b=!1),k.setAttribute("name",_.name),b||u.appendChild(k)}}return null!=n.inputsInline&&n.inputsInline!=n.inputsInlineDefault&&u.setAttribute("inline",n.inputsInline),n.isCollapsed()&&u.setAttribute("collapsed",!0),n.isEnabled()||u.setAttribute("disabled",!0),n.isDeletable()||n.isShadow()||u.setAttribute("deletable",!1),n.isMovable()||n.isShadow()||u.setAttribute("movable",!1),n.isEditable()||u.setAttribute("editable",!1),(h=n.getNextBlock())&&(M=s.Xml.blockToDom(h,l)).nodeType==s.utils.dom.NodeType.ELEMENT_NODE&&((k=s.utils.xml.createElement("next")).appendChild(M),u.appendChild(k)),!(M=n.nextConnection&&n.nextConnection.getShadowDom())||h&&h.isShadow()||k.appendChild(s.Xml.cloneShadow_(M,l)),u},s.Xml.cloneShadow_=function(n,l){for(var h,u=n=n.cloneNode(!0);u;)if(l&&"shadow"==u.nodeName&&u.removeAttribute("id"),u.firstChild)u=u.firstChild;else{for(;u&&!u.nextSibling;)h=u,u=u.parentNode,h.nodeType==s.utils.dom.NodeType.TEXT_NODE&&""==h.data.trim()&&u.firstChild!=h&&s.utils.dom.removeNode(h);u&&(h=u,u=u.nextSibling,h.nodeType==s.utils.dom.NodeType.TEXT_NODE&&""==h.data.trim()&&s.utils.dom.removeNode(h))}return n},s.Xml.domToText=function(n){return s.utils.xml.domToText(n).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},s.Xml.domToPrettyText=function(n){n=s.Xml.domToText(n).split("<");for(var l="",u=1;u<n.length;u++){var h=n[u];"/"==h[0]&&(l=l.substring(2)),n[u]=l+"<"+h,"/"!=h[0]&&"/>"!=h.slice(-2)&&(l+="  ")}return(n=(n=n.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},s.Xml.textToDom=function(n){var l=s.utils.xml.textToDomDocument(n);if(!l||!l.documentElement||l.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+n);return l.documentElement},s.Xml.clearWorkspaceAndLoadFromXml=function(n,l){return l.setResizesEnabled(!1),l.clear(),n=s.Xml.domToWorkspace(n,l),l.setResizesEnabled(!0),n},s.Xml.domToWorkspace=function(n,l){if(n instanceof s.Workspace){var u=n;n=l,l=u,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var h;l.RTL&&(h=l.getWidth()),u=[],s.utils.dom.startTextWidthCache();var _=s.Events.getGroup();_||s.Events.setGroup(!0),l.setResizesEnabled&&l.setResizesEnabled(!1);var b=!0;try{for(var k,M=0;k=n.childNodes[M];M++){var H=k.nodeName.toLowerCase(),U=k;if("block"==H||"shadow"==H&&!s.Events.recordUndo){var V=s.Xml.domToBlock(U,l);u.push(V.id);var J=U.hasAttribute("x")?parseInt(U.getAttribute("x"),10):10,X=U.hasAttribute("y")?parseInt(U.getAttribute("y"),10):10;isNaN(J)||isNaN(X)||V.moveBy(l.RTL?h-J:J,X),b=!1}else{if("shadow"==H)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==H)l.rendered?s.WorkspaceCommentSvg?s.WorkspaceCommentSvg.fromXml(U,l,h):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):s.WorkspaceComment?s.WorkspaceComment.fromXml(U,l):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==H){if(!b)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");s.Xml.domToVariables(U,l),b=!1}}}}finally{_||s.Events.setGroup(!1),s.utils.dom.stopTextWidthCache()}return l.setResizesEnabled&&l.setResizesEnabled(!0),s.Events.fire(new(s.Events.get(s.Events.FINISHED_LOADING))(l)),u},s.Xml.appendDomToWorkspace=function(n,l){var u;if(Object.prototype.hasOwnProperty.call(l,"scale")&&(u=l.getBlocksBoundingBox()),n=s.Xml.domToWorkspace(n,l),u&&u.top!=u.bottom){var h=u.bottom,_=l.RTL?u.right:u.left,b=1/0,M=-1/0,k=1/0;for(u=0;u<n.length;u++){var H=l.getBlockById(n[u]).getRelativeToSurfaceXY();H.y<k&&(k=H.y),H.x<b&&(b=H.x),H.x>M&&(M=H.x)}for(h=h-k+10,_=l.RTL?_-M:_-b,u=0;u<n.length;u++)l.getBlockById(n[u]).moveBy(_,h)}return n},s.Xml.domToBlock=function(n,l){if(n instanceof s.Workspace){var u=n;n=l,l=u,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}s.Events.disable(),u=l.getAllVariables();try{var h=s.Xml.domToBlockHeadless_(n,l),_=h.getDescendants(!1);if(l.rendered){h.setConnectionTracking(!1);for(var b=_.length-1;0<=b;b--)_[b].initSvg();for(b=_.length-1;0<=b;b--)_[b].render(!1);setTimeout(function(){h.disposed||h.setConnectionTracking(!0)},1),h.updateDisabled(),l.resizeContents()}else for(b=_.length-1;0<=b;b--)_[b].initModel()}finally{s.Events.enable()}if(s.Events.isEnabled()){for(n=s.Variables.getAddedVariables(l,u),b=0;b<n.length;b++)l=n[b],s.Events.fire(new(s.Events.get(s.Events.VAR_CREATE))(l));s.Events.fire(new(s.Events.get(s.Events.CREATE))(h))}return h},s.Xml.domToVariables=function(n,l){for(var h,u=0;h=n.childNodes[u];u++)if(h.nodeType==s.utils.dom.NodeType.ELEMENT_NODE){var _=h.getAttribute("type"),b=h.getAttribute("id");l.createVariable(h.textContent,_,b)}},s.Xml.mapSupportedXmlTags_=function(n){for(var h,l={mutation:[],comment:[],data:[],field:[],input:[],next:[]},u=0;h=n.childNodes[u];u++)if(h.nodeType!=s.utils.dom.NodeType.TEXT_NODE)switch(h.nodeName.toLowerCase()){case"mutation":l.mutation.push(h);break;case"comment":if(!s.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}l.comment.push(h);break;case"data":l.data.push(h);break;case"title":case"field":l.field.push(h);break;case"value":case"statement":l.input.push(h);break;case"next":l.next.push(h);break;default:console.warn("Ignoring unknown tag: "+h.nodeName)}return l},s.Xml.applyMutationTagNodes_=function(n,l){for(var _,u=!1,h=0;_=n[h];h++)l.domToMutation&&(l.domToMutation(_),l.initSvg&&(u=!0));return u},s.Xml.applyCommentTagNodes_=function(n,l){for(var h,u=0;h=n[u];u++){var _=h.textContent,b="true"==h.getAttribute("pinned"),M=parseInt(h.getAttribute("w"),10);h=parseInt(h.getAttribute("h"),10),l.setCommentText(_),l.commentModel.pinned=b,isNaN(M)||isNaN(h)||(l.commentModel.size=new s.utils.Size(M,h)),b&&l.getCommentIcon&&!l.isInFlyout&&setTimeout(function(){l.getCommentIcon().setVisible(!0)},1)}},s.Xml.applyDataTagNodes_=function(n,l){for(var h,u=0;h=n[u];u++)l.data=h.textContent},s.Xml.applyFieldTagNodes_=function(n,l){for(var h,u=0;h=n[u];u++){var _=h.getAttribute("name");s.Xml.domToField_(l,_,h)}},s.Xml.findChildBlocks_=function(n){for(var h,l={childBlockElement:null,childShadowElement:null},u=0;h=n.childNodes[u];u++)h.nodeType==s.utils.dom.NodeType.ELEMENT_NODE&&("block"==h.nodeName.toLowerCase()?l.childBlockElement=h:"shadow"==h.nodeName.toLowerCase()&&(l.childShadowElement=h));return l},s.Xml.applyInputTagNodes_=function(n,l,u,h){for(var b,_=0;b=n[_];_++){var M=b.getAttribute("name"),k=u.getInput(M);if(!k){console.warn("Ignoring non-existent input "+M+" in block "+h);break}if((b=s.Xml.findChildBlocks_(b)).childBlockElement){if(!k.connection)throw TypeError("Input connection does not exist.");s.Xml.domToBlockHeadless_(b.childBlockElement,l,k.connection,!1)}b.childShadowElement&&k.connection.setShadowDom(b.childShadowElement)}},s.Xml.applyNextTagNodes_=function(n,l,u){for(var _,h=0;_=n[h];h++){if((_=s.Xml.findChildBlocks_(_)).childBlockElement){if(!u.nextConnection)throw TypeError("Next statement does not exist.");if(u.nextConnection.isConnected())throw TypeError("Next statement is already connected.");s.Xml.domToBlockHeadless_(_.childBlockElement,l,u.nextConnection,!0)}_.childShadowElement&&u.nextConnection&&u.nextConnection.setShadowDom(_.childShadowElement)}},s.Xml.domToBlockHeadless_=function(n,l,u,h){var _=n.getAttribute("type");if(!_)throw TypeError("Block type unspecified: "+n.outerHTML);var b=n.getAttribute("id");b=l.newBlock(_,b);var M=s.Xml.mapSupportedXmlTags_(n),k=s.Xml.applyMutationTagNodes_(M.mutation,b);if(s.Xml.applyCommentTagNodes_(M.comment,b),s.Xml.applyDataTagNodes_(M.data,b),u)if(h){if(!b.previousConnection)throw TypeError("Next block does not have previous statement.");u.connect(b.previousConnection)}else if(b.outputConnection)u.connect(b.outputConnection);else{if(!b.previousConnection)throw TypeError("Child block does not have output or previous statement.");u.connect(b.previousConnection)}if(s.Xml.applyFieldTagNodes_(M.field,b),s.Xml.applyInputTagNodes_(M.input,l,b,_),s.Xml.applyNextTagNodes_(M.next,l,b),k&&b.initSvg(),(l=n.getAttribute("inline"))&&b.setInputsInline("true"==l),(l=n.getAttribute("disabled"))&&b.setEnabled("true"!=l&&"disabled"!=l),(l=n.getAttribute("deletable"))&&b.setDeletable("true"==l),(l=n.getAttribute("movable"))&&b.setMovable("true"==l),(l=n.getAttribute("editable"))&&b.setEditable("true"==l),(l=n.getAttribute("collapsed"))&&b.setCollapsed("true"==l),"shadow"==n.nodeName.toLowerCase()){for(n=b.getChildren(!1),l=0;u=n[l];l++)if(!u.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(b.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");b.setShadow(!0)}return b},s.Xml.domToField_=function(n,l,u){var h=n.getField(l);h?h.fromXml(u):console.warn("Ignoring non-existent field "+l+" in block "+n.type)},s.Xml.deleteNext=function(n){for(var u,l=0;u=n.childNodes[l];l++)if("next"==u.nodeName.toLowerCase()){n.removeChild(u);break}},s.Events.BlockBase=function(n){s.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===n)?"":n.id,this.workspaceId=this.isBlank?"":n.workspace.id},s.utils.object.inherits(s.Events.BlockBase,s.Events.Abstract),s.Events.BlockBase.prototype.toJson=function(){var n=s.Events.BlockBase.superClass_.toJson.call(this);return n.blockId=this.blockId,n},s.Events.BlockBase.prototype.fromJson=function(n){s.Events.BlockBase.superClass_.fromJson.call(this,n),this.blockId=n.blockId},s.Events.BlockChange=function(n,l,u,h,_){s.Events.Change.superClass_.constructor.call(this,n),n&&(this.element=void 0===l?"":l,this.name=void 0===u?"":u,this.oldValue=void 0===h?"":h,this.newValue=void 0===_?"":_)},s.utils.object.inherits(s.Events.BlockChange,s.Events.BlockBase),s.Events.Change=s.Events.BlockChange,s.Events.BlockChange.prototype.type=s.Events.CHANGE,s.Events.BlockChange.prototype.toJson=function(){var n=s.Events.BlockChange.superClass_.toJson.call(this);return n.element=this.element,this.name&&(n.name=this.name),n.oldValue=this.oldValue,n.newValue=this.newValue,n},s.Events.BlockChange.prototype.fromJson=function(n){s.Events.BlockChange.superClass_.fromJson.call(this,n),this.element=n.element,this.name=n.name,this.oldValue=n.oldValue,this.newValue=n.newValue},s.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},s.Events.BlockChange.prototype.run=function(n){var l=this.getEventWorkspace_().getBlockById(this.blockId);if(l)switch(l.mutator&&l.mutator.setVisible(!1),n=n?this.newValue:this.oldValue,this.element){case"field":(l=l.getField(this.name))?l.setValue(n):console.warn("Can't set non-existent field: "+this.name);break;case"comment":l.setCommentText(n||null);break;case"collapsed":l.setCollapsed(!!n);break;case"disabled":l.setEnabled(!n);break;case"inline":l.setInputsInline(!!n);break;case"mutation":var u="";if(l.mutationToDom&&(u=(u=l.mutationToDom())&&s.Xml.domToText(u)),l.domToMutation){var h=s.Xml.textToDom(n||"<mutation/>");l.domToMutation(h)}s.Events.fire(new s.Events.BlockChange(l,"mutation",null,u,n));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},s.Events.Create=function(n){s.Events.Create.superClass_.constructor.call(this,n),n&&(n.isShadow()&&(this.recordUndo=!1),this.xml=n.workspace.rendered?s.Xml.blockToDomWithXY(n):s.Xml.blockToDom(n),this.ids=s.Events.getDescendantIds(n))},s.utils.object.inherits(s.Events.Create,s.Events.BlockBase),s.Events.BlockCreate=s.Events.Create,s.Events.Create.prototype.type=s.Events.CREATE,s.Events.Create.prototype.toJson=function(){var n=s.Events.Create.superClass_.toJson.call(this);return n.xml=s.Xml.domToText(this.xml),n.ids=this.ids,this.recordUndo||(n.recordUndo=this.recordUndo),n},s.Events.Create.prototype.fromJson=function(n){s.Events.Create.superClass_.fromJson.call(this,n),this.xml=s.Xml.textToDom(n.xml),this.ids=n.ids,void 0!==n.recordUndo&&(this.recordUndo=n.recordUndo)},s.Events.Create.prototype.run=function(n){var l=this.getEventWorkspace_();if(n)(n=s.utils.xml.createElement("xml")).appendChild(this.xml),s.Xml.domToWorkspace(n,l);else{n=0;for(var u;u=this.ids[n];n++){var h=l.getBlockById(u);h?h.dispose(!1):u==this.blockId&&console.warn("Can't uncreate non-existent block: "+u)}}},s.Events.Delete=function(n){if(s.Events.Delete.superClass_.constructor.call(this,n),n){if(n.getParent())throw Error("Connected blocks cannot be deleted.");n.isShadow()&&(this.recordUndo=!1),this.oldXml=n.workspace.rendered?s.Xml.blockToDomWithXY(n):s.Xml.blockToDom(n),this.ids=s.Events.getDescendantIds(n)}},s.utils.object.inherits(s.Events.Delete,s.Events.BlockBase),s.Events.BlockDelete=s.Events.Delete,s.Events.Delete.prototype.type=s.Events.DELETE,s.Events.Delete.prototype.toJson=function(){var n=s.Events.Delete.superClass_.toJson.call(this);return n.oldXml=s.Xml.domToText(this.oldXml),n.ids=this.ids,this.recordUndo||(n.recordUndo=this.recordUndo),n},s.Events.Delete.prototype.fromJson=function(n){s.Events.Delete.superClass_.fromJson.call(this,n),this.oldXml=s.Xml.textToDom(n.oldXml),this.ids=n.ids,void 0!==n.recordUndo&&(this.recordUndo=n.recordUndo)},s.Events.Delete.prototype.run=function(n){var l=this.getEventWorkspace_();if(n){n=0;for(var u;u=this.ids[n];n++){var h=l.getBlockById(u);h?h.dispose(!1):u==this.blockId&&console.warn("Can't delete non-existent block: "+u)}}else(n=s.utils.xml.createElement("xml")).appendChild(this.oldXml),s.Xml.domToWorkspace(n,l)},s.Events.Move=function(n){s.Events.Move.superClass_.constructor.call(this,n),n&&(n.isShadow()&&(this.recordUndo=!1),n=this.currentLocation_(),this.oldParentId=n.parentId,this.oldInputName=n.inputName,this.oldCoordinate=n.coordinate)},s.utils.object.inherits(s.Events.Move,s.Events.BlockBase),s.Events.BlockMove=s.Events.Move,s.Events.Move.prototype.type=s.Events.MOVE,s.Events.Move.prototype.toJson=function(){var n=s.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(n.newParentId=this.newParentId),this.newInputName&&(n.newInputName=this.newInputName),this.newCoordinate&&(n.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(n.recordUndo=this.recordUndo),n},s.Events.Move.prototype.fromJson=function(n){if(s.Events.Move.superClass_.fromJson.call(this,n),this.newParentId=n.newParentId,this.newInputName=n.newInputName,n.newCoordinate){var l=n.newCoordinate.split(",");this.newCoordinate=new s.utils.Coordinate(Number(l[0]),Number(l[1]))}void 0!==n.recordUndo&&(this.recordUndo=n.recordUndo)},s.Events.Move.prototype.recordNew=function(){var n=this.currentLocation_();this.newParentId=n.parentId,this.newInputName=n.inputName,this.newCoordinate=n.coordinate},s.Events.Move.prototype.currentLocation_=function(){var n=this.getEventWorkspace_().getBlockById(this.blockId),l={},u=n.getParent();return u?(l.parentId=u.id,(n=u.getInputWithBlock(n))&&(l.inputName=n.name)):l.coordinate=n.getRelativeToSurfaceXY(),l},s.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&s.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},s.Events.Move.prototype.run=function(n){var l=this.getEventWorkspace_(),u=l.getBlockById(this.blockId);if(u){var h=n?this.newParentId:this.oldParentId,_=n?this.newInputName:this.oldInputName,b=n?this.newCoordinate:this.oldCoordinate;if(n=null,h&&!(n=l.getBlockById(h)))return void console.warn("Can't connect to non-existent block: "+h);if(u.getParent()&&u.unplug(),b)_=u.getRelativeToSurfaceXY(),u.moveBy(b.x-_.x,b.y-_.y);else{if(l=(u=u.outputConnection||u.previousConnection).type,_){if(n=n.getInput(_))var M=n.connection}else l==s.connectionTypes.PREVIOUS_STATEMENT&&(M=n.nextConnection);M?u.connect(M):console.warn("Can't connect to non-existent input: "+_)}}else console.warn("Can't move non-existent block: "+this.blockId)},s.registry.register(s.registry.Type.EVENT,s.Events.CREATE,s.Events.Create),s.registry.register(s.registry.Type.EVENT,s.Events.DELETE,s.Events.Delete),s.registry.register(s.registry.Type.EVENT,s.Events.CHANGE,s.Events.BlockChange),s.registry.register(s.registry.Type.EVENT,s.Events.MOVE,s.Events.Move),s.Events.FinishedLoading=function(n){this.isBlank=void 0===n,this.workspaceId=n?n.id:"",this.group=s.Events.getGroup(),this.recordUndo=!1},s.utils.object.inherits(s.Events.FinishedLoading,s.Events.Abstract),s.Events.FinishedLoading.prototype.type=s.Events.FINISHED_LOADING,s.Events.FinishedLoading.prototype.toJson=function(){var n={type:this.type};return this.group&&(n.group=this.group),this.workspaceId&&(n.workspaceId=this.workspaceId),n},s.Events.FinishedLoading.prototype.fromJson=function(n){this.isBlank=!1,this.workspaceId=n.workspaceId,this.group=n.group},s.registry.register(s.registry.Type.EVENT,s.Events.FINISHED_LOADING,s.Events.FinishedLoading),s.Events.UiBase=function(n){s.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===n,this.workspaceId=n||"",this.recordUndo=!1},s.utils.object.inherits(s.Events.UiBase,s.Events.Abstract),s.Events.UiBase.prototype.isUiEvent=!0,s.Events.Ui=function(n,l,u,h){s.Events.Ui.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.element=void 0===l?"":l,this.oldValue=void 0===u?"":u,this.newValue=void 0===h?"":h},s.utils.object.inherits(s.Events.Ui,s.Events.UiBase),s.Events.Ui.prototype.type=s.Events.UI,s.Events.Ui.prototype.toJson=function(){var n=s.Events.Ui.superClass_.toJson.call(this);return n.element=this.element,void 0!==this.newValue&&(n.newValue=this.newValue),this.blockId&&(n.blockId=this.blockId),n},s.Events.Ui.prototype.fromJson=function(n){s.Events.Ui.superClass_.fromJson.call(this,n),this.element=n.element,this.newValue=n.newValue,this.blockId=n.blockId},s.registry.register(s.registry.Type.EVENT,s.Events.UI,s.Events.Ui),s.Events.VarBase=function(n){s.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===n)?"":n.getId(),this.workspaceId=this.isBlank?"":n.workspace.id},s.utils.object.inherits(s.Events.VarBase,s.Events.Abstract),s.Events.VarBase.prototype.toJson=function(){var n=s.Events.VarBase.superClass_.toJson.call(this);return n.varId=this.varId,n},s.Events.VarBase.prototype.fromJson=function(n){s.Events.VarBase.superClass_.toJson.call(this),this.varId=n.varId},s.Events.VarCreate=function(n){s.Events.VarCreate.superClass_.constructor.call(this,n),n&&(this.varType=n.type,this.varName=n.name)},s.utils.object.inherits(s.Events.VarCreate,s.Events.VarBase),s.Events.VarCreate.prototype.type=s.Events.VAR_CREATE,s.Events.VarCreate.prototype.toJson=function(){var n=s.Events.VarCreate.superClass_.toJson.call(this);return n.varType=this.varType,n.varName=this.varName,n},s.Events.VarCreate.prototype.fromJson=function(n){s.Events.VarCreate.superClass_.fromJson.call(this,n),this.varType=n.varType,this.varName=n.varName},s.Events.VarCreate.prototype.run=function(n){var l=this.getEventWorkspace_();n?l.createVariable(this.varName,this.varType,this.varId):l.deleteVariableById(this.varId)},s.Events.VarDelete=function(n){s.Events.VarDelete.superClass_.constructor.call(this,n),n&&(this.varType=n.type,this.varName=n.name)},s.utils.object.inherits(s.Events.VarDelete,s.Events.VarBase),s.Events.VarDelete.prototype.type=s.Events.VAR_DELETE,s.Events.VarDelete.prototype.toJson=function(){var n=s.Events.VarDelete.superClass_.toJson.call(this);return n.varType=this.varType,n.varName=this.varName,n},s.Events.VarDelete.prototype.fromJson=function(n){s.Events.VarDelete.superClass_.fromJson.call(this,n),this.varType=n.varType,this.varName=n.varName},s.Events.VarDelete.prototype.run=function(n){var l=this.getEventWorkspace_();n?l.deleteVariableById(this.varId):l.createVariable(this.varName,this.varType,this.varId)},s.Events.VarRename=function(n,l){s.Events.VarRename.superClass_.constructor.call(this,n),n&&(this.oldName=n.name,this.newName=void 0===l?"":l)},s.utils.object.inherits(s.Events.VarRename,s.Events.VarBase),s.Events.VarRename.prototype.type=s.Events.VAR_RENAME,s.Events.VarRename.prototype.toJson=function(){var n=s.Events.VarRename.superClass_.toJson.call(this);return n.oldName=this.oldName,n.newName=this.newName,n},s.Events.VarRename.prototype.fromJson=function(n){s.Events.VarRename.superClass_.fromJson.call(this,n),this.oldName=n.oldName,this.newName=n.newName},s.Events.VarRename.prototype.run=function(n){this.getEventWorkspace_().renameVariableById(this.varId,n?this.newName:this.oldName)},s.registry.register(s.registry.Type.EVENT,s.Events.VAR_CREATE,s.Events.VarCreate),s.registry.register(s.registry.Type.EVENT,s.Events.VAR_DELETE,s.Events.VarDelete),s.registry.register(s.registry.Type.EVENT,s.Events.VAR_RENAME,s.Events.VarRename),s.BlockDragSurfaceSvg=function(n){this.container_=n,this.createDom()},s.BlockDragSurfaceSvg.prototype.SVG_=null,s.BlockDragSurfaceSvg.prototype.dragGroup_=null,s.BlockDragSurfaceSvg.prototype.container_=null,s.BlockDragSurfaceSvg.prototype.scale_=1,s.BlockDragSurfaceSvg.prototype.surfaceXY_=null,s.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new s.utils.Coordinate(0,0),s.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},this.SVG_))},s.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(n){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(n),this.SVG_.style.display="block",this.surfaceXY_=new s.utils.Coordinate(0,0)},s.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(n,l,u){this.scale_=u,n=n.toFixed(0),l=l.toFixed(0),this.childSurfaceXY_.x=parseInt(n,10),this.childSurfaceXY_.y=parseInt(l,10),this.dragGroup_.setAttribute("transform","translate("+n+","+l+") scale("+u+")")},s.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var n=this.surfaceXY_.x,l=this.surfaceXY_.y;n=n.toFixed(0),l=l.toFixed(0),this.SVG_.style.display="block",s.utils.dom.setCssTransform(this.SVG_,"translate3d("+n+"px, "+l+"px, 0px)")},s.BlockDragSurfaceSvg.prototype.translateBy=function(n,l){this.surfaceXY_=new s.utils.Coordinate(this.surfaceXY_.x+n,this.surfaceXY_.y+l),this.translateSurfaceInternal_()},s.BlockDragSurfaceSvg.prototype.translateSurface=function(n,l){this.surfaceXY_=new s.utils.Coordinate(n*this.scale_,l*this.scale_),this.translateSurfaceInternal_()},s.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var n=s.utils.getRelativeXY(this.SVG_);return new s.utils.Coordinate(n.x/this.scale_,n.y/this.scale_)},s.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},s.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},s.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},s.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},s.BlockDragSurfaceSvg.prototype.clearAndHide=function(n){if(n?n.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},s.Css={},s.Css.injected_=!1,s.Css.register=function(n){if(s.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(s.Css.CONTENT,n),n.length=0},s.Css.inject=function(n,l){if(!s.Css.injected_){s.Css.injected_=!0;var u=s.Css.CONTENT.join("\n");s.Css.CONTENT.length=0,n&&(n=l.replace(/[\\/]$/,""),u=u.replace(/<<<PATH>>>/g,n),(n=document.createElement("style")).id="blockly-common-style",u=document.createTextNode(u),n.appendChild(u),document.head.insertBefore(n,document.head.firstChild))}},s.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],s.Grid=function(n,l){this.gridPattern_=n,this.spacing_=l.spacing,this.length_=l.length,this.line2_=(this.line1_=n.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=l.snap},s.Grid.prototype.scale_=1,s.Grid.prototype.dispose=function(){this.gridPattern_=null},s.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},s.Grid.prototype.getSpacing=function(){return this.spacing_},s.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},s.Grid.prototype.update=function(n){this.scale_=n;var l=this.spacing_*n||100;this.gridPattern_.setAttribute("width",l),this.gridPattern_.setAttribute("height",l);var u=(l=Math.floor(this.spacing_/2)+.5)-this.length_/2,h=l+this.length_/2;this.setLineAttributes_(this.line1_,n,u*=n,h*=n,l*=n,l),this.setLineAttributes_(this.line2_,n,l,l,u,h)},s.Grid.prototype.setLineAttributes_=function(n,l,u,h,_,b){n&&(n.setAttribute("stroke-width",l),n.setAttribute("x1",u),n.setAttribute("y1",_),n.setAttribute("x2",h),n.setAttribute("y2",b))},s.Grid.prototype.moveTo=function(n,l){this.gridPattern_.setAttribute("x",n),this.gridPattern_.setAttribute("y",l),(s.utils.userAgent.IE||s.utils.userAgent.EDGE)&&this.update(this.scale_)},s.Grid.createDom=function(n,l,u){return n=s.utils.dom.createSvgElement(s.utils.Svg.PATTERN,{id:"blocklyGridPattern"+n,patternUnits:"userSpaceOnUse"},u),0<l.length&&0<l.spacing?(s.utils.dom.createSvgElement(s.utils.Svg.LINE,{stroke:l.colour},n),1<l.length&&s.utils.dom.createSvgElement(s.utils.Svg.LINE,{stroke:l.colour},n)):s.utils.dom.createSvgElement(s.utils.Svg.LINE,{},n),n},s.Theme=function(n,l,u,h){this.name=n,this.blockStyles=l||Object.create(null),this.categoryStyles=u||Object.create(null),this.componentStyles=h||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,s.registry.register(s.registry.Type.THEME,n,this)},s.Theme.prototype.getClassName=function(){return this.name+"-theme"},s.Theme.prototype.setBlockStyle=function(n,l){this.blockStyles[n]=l},s.Theme.prototype.setCategoryStyle=function(n,l){this.categoryStyles[n]=l},s.Theme.prototype.getComponentStyle=function(n){return(n=this.componentStyles[n])&&"string"==typeof n&&this.getComponentStyle(n)?this.getComponentStyle(n):n?String(n):null},s.Theme.prototype.setComponentStyle=function(n,l){this.componentStyles[n]=l},s.Theme.prototype.setFontStyle=function(n){this.fontStyle=n},s.Theme.prototype.setStartHats=function(n){this.startHats=n},s.Theme.defineTheme=function(n,l){var u=new s.Theme(n),h=l.base;return h&&("string"==typeof h&&(h=s.registry.getObject(s.registry.Type.THEME,h)),h instanceof s.Theme&&(s.utils.object.deepMerge(u,h),u.name=n)),s.utils.object.deepMerge(u.blockStyles,l.blockStyles),s.utils.object.deepMerge(u.categoryStyles,l.categoryStyles),s.utils.object.deepMerge(u.componentStyles,l.componentStyles),s.utils.object.deepMerge(u.fontStyle,l.fontStyle),null!=l.startHats&&(u.startHats=l.startHats),u},s.Themes={},s.Themes.Classic={},s.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},s.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},s.Themes.Classic=new s.Theme("classic",s.Themes.Classic.defaultBlockStyles,s.Themes.Classic.categoryStyles),s.utils.IdGenerator={},s.utils.IdGenerator.nextId_=0,s.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(s.utils.IdGenerator.nextId_++).toString(36)},s.utils.Metrics=function(){},s.utils.toolbox={},s.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",s.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",s.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},s.utils.toolbox.convertToolboxDefToJson=function(n){return n?((n instanceof Element||"string"==typeof n)&&(n=s.utils.toolbox.parseToolboxTree(n),n=s.utils.toolbox.convertToToolboxJson_(n)),s.utils.toolbox.validateToolbox_(n),n):null},s.utils.toolbox.validateToolbox_=function(n){var l=n.kind;if(n=n.contents,l&&l!=s.utils.toolbox.FLYOUT_TOOLBOX_KIND&&l!=s.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+l+". Please supply either "+s.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+s.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!n)throw Error("Toolbox must have a contents attribute.")},s.utils.toolbox.convertFlyoutDefToJsonArray=function(n){return n?n.contents?n.contents:Array.isArray(n)&&0<n.length&&!n[0].nodeType?n:s.utils.toolbox.xmlToJsonArray_(n):[]},s.utils.toolbox.hasCategories=function(n){if(!n)return!1;var l=n.kind;return l?l==s.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!n.contents.filter(function(u){return"CATEGORY"==u.kind.toUpperCase()}).length},s.utils.toolbox.isCategoryCollapsible=function(n){return!(!n||!n.contents||!n.contents.filter(function(l){return"CATEGORY"==l.kind.toUpperCase()}).length)},s.utils.toolbox.convertToToolboxJson_=function(n){var l={contents:s.utils.toolbox.xmlToJsonArray_(n)};return n instanceof Node&&s.utils.toolbox.addAttributes_(n,l),l},s.utils.toolbox.xmlToJsonArray_=function(n){var h,l=[],u=n.childNodes;for(u||(u=n),n=0;h=u[n];n++)if(h.tagName){var _={},b=h.tagName.toUpperCase();_.kind=b,"BLOCK"==b?_.blockxml=h:h.childNodes&&0<h.childNodes.length&&(_.contents=s.utils.toolbox.xmlToJsonArray_(h)),s.utils.toolbox.addAttributes_(h,_),l.push(_)}return l},s.utils.toolbox.addAttributes_=function(n,l){for(var u=0;u<n.attributes.length;u++){var h=n.attributes[u];-1<h.nodeName.indexOf("css-")?(l.cssconfig=l.cssconfig||{},l.cssconfig[h.nodeName.replace("css-","")]=h.value):l[h.nodeName]=h.value}},s.utils.toolbox.parseToolboxTree=function(n){if(n){if("string"!=typeof n&&(s.utils.userAgent.IE&&n.outerHTML?n=n.outerHTML:n instanceof Element||(n=null)),"string"==typeof n&&"xml"!=(n=s.Xml.textToDom(n)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else n=null;return n},s.Options=function(n){var l=!!n.readOnly;if(l)var u=null,h=!1,_=!1,b=!1,M=!1,k=!1,H=!1;else{u=s.utils.toolbox.convertToolboxDefToJson(n.toolbox),h=s.utils.toolbox.hasCategories(u),void 0===(_=n.trashcan)&&(_=h);var U=n.maxTrashcanContents;_?void 0===U&&(U=32):U=0,void 0===(b=n.collapse)&&(b=h),void 0===(M=n.comments)&&(M=h),void 0===(k=n.disable)&&(k=h),void 0===(H=n.sounds)&&(H=!0)}var V=!!n.rtl,J=n.horizontalLayout;void 0===J&&(J=!1);var X=n.toolboxPosition;X="end"!==X,X=J?X?s.utils.toolbox.Position.TOP:s.utils.toolbox.Position.BOTTOM:X==V?s.utils.toolbox.Position.RIGHT:s.utils.toolbox.Position.LEFT;var j=n.css;void 0===j&&(j=!0);var oe="https://blockly-demo.appspot.com/static/media/";n.media?oe=n.media:n.path&&(oe=n.path+"media/");var ee=void 0===n.oneBasedIndex||!!n.oneBasedIndex,se=n.renderer||"geras",Q=n.plugins||{};this.RTL=V,this.oneBasedIndex=ee,this.collapse=b,this.comments=M,this.disable=k,this.readOnly=l,this.maxBlocks=n.maxBlocks||1/0,this.maxInstances=n.maxInstances,this.pathToMedia=oe,this.hasCategories=h,this.moveOptions=s.Options.parseMoveOptions_(n,h),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=_,this.maxTrashcanContents=U,this.hasSounds=H,this.hasCss=j,this.horizontalLayout=J,this.languageTree=u,this.gridOptions=s.Options.parseGridOptions_(n),this.zoomOptions=s.Options.parseZoomOptions_(n),this.toolboxPosition=X,this.theme=s.Options.parseThemeOptions_(n),this.renderer=se,this.rendererOverrides=n.rendererOverrides,this.gridPattern=null,this.parentWorkspace=n.parentWorkspace,this.plugins=Q},s.BlocklyOptions=function(){},s.Options.parseMoveOptions_=function(n,l){var u=n.move||{},h={};return void 0===u.scrollbars&&void 0===n.scrollbars?h.scrollbars=l:"object"==typeof u.scrollbars?(h.scrollbars={},h.scrollbars.horizontal=!!u.scrollbars.horizontal,h.scrollbars.vertical=!!u.scrollbars.vertical,h.scrollbars.horizontal&&h.scrollbars.vertical?h.scrollbars=!0:h.scrollbars.horizontal||h.scrollbars.vertical||(h.scrollbars=!1)):h.scrollbars=!!u.scrollbars||!!n.scrollbars,h.wheel=h.scrollbars&&void 0!==u.wheel?!!u.wheel:"object"==typeof h.scrollbars,h.drag=!(!h.scrollbars||void 0!==u.drag&&!u.drag),h},s.Options.parseZoomOptions_=function(n){var l={};return l.controls=void 0!==(n=n.zoom||{}).controls&&!!n.controls,l.wheel=void 0!==n.wheel&&!!n.wheel,l.startScale=void 0===n.startScale?1:Number(n.startScale),l.maxScale=void 0===n.maxScale?3:Number(n.maxScale),l.minScale=void 0===n.minScale?.3:Number(n.minScale),l.scaleSpeed=void 0===n.scaleSpeed?1.2:Number(n.scaleSpeed),l.pinch=void 0===n.pinch?l.wheel||l.controls:!!n.pinch,l},s.Options.parseGridOptions_=function(n){n=n.grid||{};var l={};return l.spacing=Number(n.spacing)||0,l.colour=n.colour||"#888",l.length=void 0===n.length?1:Number(n.length),l.snap=0<l.spacing&&!!n.snap,l},s.Options.parseThemeOptions_=function(n){return"string"==typeof(n=n.theme||s.Themes.Classic)?s.registry.getObject(s.registry.Type.THEME,n):n instanceof s.Theme?n:s.Theme.defineTheme(n.name||"builtin"+s.utils.IdGenerator.getNextUniqueId(),n)},s.Options.parseToolboxTree=function(n){return s.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),s.utils.toolbox.parseToolboxTree(n)},s.ScrollbarPair=function(n,l,u,h,_){this.workspace_=n,u=void 0===u||u;var b=(l=void 0===l||l)&&u;l&&(this.hScroll=new s.Scrollbar(n,!0,b,h,_)),u&&(this.vScroll=new s.Scrollbar(n,!1,b,h,_)),b&&(this.corner_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{height:s.Scrollbar.scrollbarThickness,width:s.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),s.utils.dom.insertAfter(this.corner_,n.getBubbleCanvas())),this.oldHostMetrics_=null},s.ScrollbarPair.prototype.dispose=function(){s.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},s.ScrollbarPair.prototype.resize=function(){var n=this.workspace_.getMetrics();if(n){var l=!1,u=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==n.viewWidth&&this.oldHostMetrics_.viewHeight==n.viewHeight&&this.oldHostMetrics_.absoluteTop==n.absoluteTop&&this.oldHostMetrics_.absoluteLeft==n.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==n.scrollWidth&&this.oldHostMetrics_.viewLeft==n.viewLeft&&this.oldHostMetrics_.scrollLeft==n.scrollLeft||(l=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==n.scrollHeight&&this.oldHostMetrics_.viewTop==n.viewTop&&this.oldHostMetrics_.scrollTop==n.scrollTop||(u=!0)):u=l=!0,l||u){try{s.Events.disable(),this.hScroll&&l&&this.hScroll.resize(n),this.vScroll&&u&&this.vScroll.resize(n)}finally{s.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==n.viewWidth&&this.oldHostMetrics_.absoluteLeft==n.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==n.viewHeight&&this.oldHostMetrics_.absoluteTop==n.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=n}},s.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},s.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},s.ScrollbarPair.prototype.setOrigin=function(n,l){this.hScroll&&this.hScroll.setOrigin(n,l),this.vScroll&&this.vScroll.setOrigin(n,l)},s.ScrollbarPair.prototype.set=function(n,l,u){this.hScroll&&this.hScroll.set(n,!1),this.vScroll&&this.vScroll.set(l,!1),(u||void 0===u)&&(n={},this.hScroll&&(n.x=this.hScroll.getRatio_()),this.vScroll&&(n.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(n))},s.ScrollbarPair.prototype.setX=function(n){this.hScroll&&this.hScroll.set(n,!0)},s.ScrollbarPair.prototype.setY=function(n){this.vScroll&&this.vScroll.set(n,!0)},s.ScrollbarPair.prototype.setContainerVisible=function(n){this.hScroll&&this.hScroll.setContainerVisible(n),this.vScroll&&this.vScroll.setContainerVisible(n)},s.ScrollbarPair.prototype.isVisible=function(){var n=!1;return this.hScroll&&(n=this.hScroll.isVisible()),this.vScroll&&(n=n||this.vScroll.isVisible()),n},s.ScrollbarPair.prototype.resizeContent=function(n){this.hScroll&&this.hScroll.resizeContentHorizontal(n),this.vScroll&&this.vScroll.resizeContentVertical(n)},s.ScrollbarPair.prototype.resizeView=function(n){this.hScroll&&this.hScroll.resizeViewHorizontal(n),this.vScroll&&this.vScroll.resizeViewVertical(n)},s.Scrollbar=function(n,l,u,h,_){this.workspace_=n,this.pair_=u||!1,this.horizontal_=l,this.margin_=void 0!==_?_:s.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(h),this.position=new s.utils.Coordinate(0,0),n=s.Scrollbar.scrollbarThickness,l?(this.svgBackground_.setAttribute("height",n),this.outerSvg_.setAttribute("height",n),this.svgHandle_.setAttribute("height",n-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",n),this.outerSvg_.setAttribute("width",n),this.svgHandle_.setAttribute("width",n-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=s.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=s.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},s.Scrollbar.prototype.origin_=new s.utils.Coordinate(0,0),s.Scrollbar.prototype.startDragMouse_=0,s.Scrollbar.prototype.scrollbarLength_=0,s.Scrollbar.prototype.handleLength_=0,s.Scrollbar.prototype.handlePosition_=0,s.Scrollbar.prototype.isVisible_=!0,s.Scrollbar.prototype.containerVisible_=!0,s.Scrollbar.scrollbarThickness=15,s.Touch.TOUCH_ENABLED&&(s.Scrollbar.scrollbarThickness=25),s.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,s.Scrollbar.metricsAreEquivalent_=function(n,l){return n.viewWidth==l.viewWidth&&n.viewHeight==l.viewHeight&&n.viewLeft==l.viewLeft&&n.viewTop==l.viewTop&&n.absoluteTop==l.absoluteTop&&n.absoluteLeft==l.absoluteLeft&&n.scrollWidth==l.scrollWidth&&n.scrollHeight==l.scrollHeight&&n.scrollLeft==l.scrollLeft&&n.scrollTop==l.scrollTop},s.Scrollbar.prototype.dispose=function(){this.cleanUp_(),s.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,s.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,s.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},s.Scrollbar.prototype.constrainHandleLength_=function(n){return 0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength_)},s.Scrollbar.prototype.setHandleLength_=function(n){this.handleLength_=n,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},s.Scrollbar.prototype.constrainHandlePosition_=function(n){return 0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength_-this.handleLength_)},s.Scrollbar.prototype.setHandlePosition=function(n){this.handlePosition_=n,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},s.Scrollbar.prototype.setScrollbarLength_=function(n){this.scrollbarLength_=n,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},s.Scrollbar.prototype.setPosition=function(n,l){this.position.x=n,this.position.y=l,s.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},s.Scrollbar.prototype.resize=function(n){!n&&!(n=this.workspace_.getMetrics())||this.oldHostMetrics_&&s.Scrollbar.metricsAreEquivalent_(n,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(n):this.resizeVertical_(n),this.oldHostMetrics_=n,this.updateMetrics_())},s.Scrollbar.prototype.requiresViewResize_=function(n){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==n.viewWidth||this.oldHostMetrics_.viewHeight!==n.viewHeight||this.oldHostMetrics_.absoluteLeft!==n.absoluteLeft||this.oldHostMetrics_.absoluteTop!==n.absoluteTop},s.Scrollbar.prototype.resizeHorizontal_=function(n){this.requiresViewResize_(n)?this.resizeViewHorizontal(n):this.resizeContentHorizontal(n)},s.Scrollbar.prototype.resizeViewHorizontal=function(n){var l=n.viewWidth-2*this.margin_;this.pair_&&(l-=s.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,l)),l=n.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(l+=s.Scrollbar.scrollbarThickness),this.setPosition(l,n.absoluteTop+n.viewHeight-s.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(n)},s.Scrollbar.prototype.resizeContentHorizontal=function(n){if(n.viewWidth>=n.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var l=this.scrollbarLength_*n.viewWidth/n.scrollWidth;l=this.constrainHandleLength_(l),this.setHandleLength_(l);var u=this.scrollbarLength_-this.handleLength_;n=this.constrainHandlePosition_(n=(n.viewLeft-n.scrollLeft)/(l=n.scrollWidth-n.viewWidth)*u),this.setHandlePosition(n),this.ratio=u/l}},s.Scrollbar.prototype.resizeVertical_=function(n){this.requiresViewResize_(n)?this.resizeViewVertical(n):this.resizeContentVertical(n)},s.Scrollbar.prototype.resizeViewVertical=function(n){var l=n.viewHeight-2*this.margin_;this.pair_&&(l-=s.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,l)),this.setPosition(this.workspace_.RTL?n.absoluteLeft+this.margin_:n.absoluteLeft+n.viewWidth-s.Scrollbar.scrollbarThickness-this.margin_,n.absoluteTop+this.margin_),this.resizeContentVertical(n)},s.Scrollbar.prototype.resizeContentVertical=function(n){if(n.viewHeight>=n.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var l=this.scrollbarLength_*n.viewHeight/n.scrollHeight;l=this.constrainHandleLength_(l),this.setHandleLength_(l);var u=this.scrollbarLength_-this.handleLength_;n=this.constrainHandlePosition_(n=(n.viewTop-n.scrollTop)/(l=n.scrollHeight-n.viewHeight)*u),this.setHandlePosition(n),this.ratio=u/l}},s.Scrollbar.prototype.createDom_=function(n){var l="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");n&&(l+=" "+n),this.outerSvg_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{class:l},null),this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),n=Math.floor((s.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:n,ry:n},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),s.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},s.Scrollbar.prototype.isVisible=function(){return this.isVisible_},s.Scrollbar.prototype.setContainerVisible=function(n){var l=n!=this.containerVisible_;this.containerVisible_=n,l&&this.updateDisplay_()},s.Scrollbar.prototype.setVisible=function(n){var l=n!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=n,l&&this.updateDisplay_()},s.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},s.Scrollbar.prototype.onMouseDownBar_=function(n){if(this.workspace_.markFocused(),s.Touch.clearTouchIdentifier(),this.cleanUp_(),s.utils.isRightButton(n))n.stopPropagation();else{var l=s.utils.mouseToSvg(n,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());l=this.horizontal_?l.x:l.y;var u=s.utils.getInjectionDivXY_(this.svgHandle_),h=this.handlePosition_,_=.95*this.handleLength_;l<=(u=this.horizontal_?u.x:u.y)?h-=_:l>=u+this.handleLength_&&(h+=_),this.setHandlePosition(this.constrainHandlePosition_(h)),this.updateMetrics_(),n.stopPropagation(),n.preventDefault()}},s.Scrollbar.prototype.onMouseDownHandle_=function(n){this.workspace_.markFocused(),this.cleanUp_(),s.utils.isRightButton(n)?n.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?n.clientX:n.clientY,s.Scrollbar.onMouseUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),s.Scrollbar.onMouseMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),n.stopPropagation(),n.preventDefault())},s.Scrollbar.prototype.onMouseMoveHandle_=function(n){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?n.clientX:n.clientY)-this.startDragMouse_))),this.updateMetrics_()},s.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),s.Touch.clearTouchIdentifier(),this.cleanUp_()},s.Scrollbar.prototype.cleanUp_=function(){s.hideChaff(!0),s.Scrollbar.onMouseUpWrapper_&&(s.browserEvents.unbind(s.Scrollbar.onMouseUpWrapper_),s.Scrollbar.onMouseUpWrapper_=null),s.Scrollbar.onMouseMoveWrapper_&&(s.browserEvents.unbind(s.Scrollbar.onMouseMoveWrapper_),s.Scrollbar.onMouseMoveWrapper_=null)},s.Scrollbar.prototype.getRatio_=function(){var n=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(n)&&(n=0),n},s.Scrollbar.prototype.updateMetrics_=function(){var n=this.getRatio_(),l={};this.horizontal_?l.x=n:l.y=n,this.workspace_.setMetrics(l)},s.Scrollbar.prototype.set=function(n,l){this.setHandlePosition(this.constrainHandlePosition_(n*this.ratio)),(l||void 0===l)&&this.updateMetrics_()},s.Scrollbar.prototype.setOrigin=function(n,l){this.origin_=new s.utils.Coordinate(n,l)},s.Tooltip={},s.Tooltip.visible=!1,s.Tooltip.blocked_=!1,s.Tooltip.LIMIT=50,s.Tooltip.mouseOutPid_=0,s.Tooltip.showPid_=0,s.Tooltip.lastX_=0,s.Tooltip.lastY_=0,s.Tooltip.element_=null,s.Tooltip.poisonedElement_=null,s.Tooltip.OFFSET_X=0,s.Tooltip.OFFSET_Y=10,s.Tooltip.RADIUS_OK=10,s.Tooltip.HOVER_MS=750,s.Tooltip.MARGINS=5,s.Tooltip.DIV=null,s.Tooltip.getTooltipOfObject=function(n){if(n=s.Tooltip.getTargetObject_(n)){for(n=n.tooltip;"function"==typeof n;)n=n();if("string"!=typeof n)throw Error("Tooltip function must return a string.");return n}return""},s.Tooltip.getTargetObject_=function(n){for(;n&&n.tooltip;){if("string"==typeof n.tooltip||"function"==typeof n.tooltip)return n;n=n.tooltip}return null},s.Tooltip.createDom=function(){s.Tooltip.DIV||(s.Tooltip.DIV=document.createElement("div"),s.Tooltip.DIV.className="blocklyTooltipDiv",(s.parentContainer||document.body).appendChild(s.Tooltip.DIV))},s.Tooltip.bindMouseEvents=function(n){n.mouseOverWrapper_=s.browserEvents.bind(n,"mouseover",null,s.Tooltip.onMouseOver_),n.mouseOutWrapper_=s.browserEvents.bind(n,"mouseout",null,s.Tooltip.onMouseOut_),n.addEventListener("mousemove",s.Tooltip.onMouseMove_,!1)},s.Tooltip.unbindMouseEvents=function(n){n&&(s.browserEvents.unbind(n.mouseOverWrapper_),s.browserEvents.unbind(n.mouseOutWrapper_),n.removeEventListener("mousemove",s.Tooltip.onMouseMove_))},s.Tooltip.onMouseOver_=function(n){s.Tooltip.blocked_||(n=s.Tooltip.getTargetObject_(n.currentTarget),s.Tooltip.element_!=n&&(s.Tooltip.hide(),s.Tooltip.poisonedElement_=null,s.Tooltip.element_=n),clearTimeout(s.Tooltip.mouseOutPid_))},s.Tooltip.onMouseOut_=function(n){s.Tooltip.blocked_||(s.Tooltip.mouseOutPid_=setTimeout(function(){s.Tooltip.element_=null,s.Tooltip.poisonedElement_=null,s.Tooltip.hide()},1),clearTimeout(s.Tooltip.showPid_))},s.Tooltip.onMouseMove_=function(n){if(s.Tooltip.element_&&s.Tooltip.element_.tooltip&&!s.Tooltip.blocked_)if(s.Tooltip.visible){var l=s.Tooltip.lastX_-n.pageX;n=s.Tooltip.lastY_-n.pageY,Math.sqrt(l*l+n*n)>s.Tooltip.RADIUS_OK&&s.Tooltip.hide()}else s.Tooltip.poisonedElement_!=s.Tooltip.element_&&(clearTimeout(s.Tooltip.showPid_),s.Tooltip.lastX_=n.pageX,s.Tooltip.lastY_=n.pageY,s.Tooltip.showPid_=setTimeout(s.Tooltip.show_,s.Tooltip.HOVER_MS))},s.Tooltip.dispose=function(){s.Tooltip.element_=null,s.Tooltip.poisonedElement_=null,s.Tooltip.hide()},s.Tooltip.hide=function(){s.Tooltip.visible&&(s.Tooltip.visible=!1,s.Tooltip.DIV&&(s.Tooltip.DIV.style.display="none")),s.Tooltip.showPid_&&clearTimeout(s.Tooltip.showPid_)},s.Tooltip.block=function(){s.Tooltip.hide(),s.Tooltip.blocked_=!0},s.Tooltip.unblock=function(){s.Tooltip.blocked_=!1},s.Tooltip.show_=function(){if(!s.Tooltip.blocked_&&(s.Tooltip.poisonedElement_=s.Tooltip.element_,s.Tooltip.DIV)){s.Tooltip.DIV.textContent="";var n=s.Tooltip.getTooltipOfObject(s.Tooltip.element_);n=(n=s.utils.string.wrap(n,s.Tooltip.LIMIT)).split("\n");for(var l=0;l<n.length;l++){var u=document.createElement("div");u.appendChild(document.createTextNode(n[l])),s.Tooltip.DIV.appendChild(u)}n=s.Tooltip.element_.RTL,l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,s.Tooltip.DIV.style.direction=n?"rtl":"ltr",s.Tooltip.DIV.style.display="block",s.Tooltip.visible=!0;var h=s.Tooltip.lastX_;h=n?h-(s.Tooltip.OFFSET_X+s.Tooltip.DIV.offsetWidth):h+s.Tooltip.OFFSET_X;var _=s.Tooltip.lastY_+s.Tooltip.OFFSET_Y;_+s.Tooltip.DIV.offsetHeight>u+window.scrollY&&(_-=s.Tooltip.DIV.offsetHeight+2*s.Tooltip.OFFSET_Y),n?h=Math.max(s.Tooltip.MARGINS-window.scrollX,h):h+s.Tooltip.DIV.offsetWidth>l+window.scrollX-2*s.Tooltip.MARGINS&&(h=l-s.Tooltip.DIV.offsetWidth-2*s.Tooltip.MARGINS),s.Tooltip.DIV.style.top=_+"px",s.Tooltip.DIV.style.left=h+"px"}},s.utils.aria={},s.utils.aria.ARIA_PREFIX_="aria-",s.utils.aria.ROLE_ATTRIBUTE_="role",s.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},s.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},s.utils.aria.setRole=function(n,l){n.setAttribute(s.utils.aria.ROLE_ATTRIBUTE_,l)},s.utils.aria.setState=function(n,l,u){Array.isArray(u)&&(u=u.join(" ")),n.setAttribute(s.utils.aria.ARIA_PREFIX_+l,u)},s.IASTNodeLocation=function(){},s.IASTNodeLocationSvg=function(){},s.IASTNodeLocationWithBlock=function(){},s.IKeyboardAccessible=function(){},s.utils.deprecation={},s.utils.deprecation.warn=function(n,l,u,h){n=n+" was deprecated on "+l+" and will be deleted on "+u+".",h&&(n+="\nUse "+h+" instead."),console.warn(n)},s.Connection=function(n,l){this.sourceBlock_=n,this.type=l},s.Connection.CAN_CONNECT=0,s.Connection.REASON_SELF_CONNECTION=1,s.Connection.REASON_WRONG_TYPE=2,s.Connection.REASON_TARGET_NULL=3,s.Connection.REASON_CHECKS_FAILED=4,s.Connection.REASON_DIFFERENT_WORKSPACES=5,s.Connection.REASON_SHADOW_PARENT=6,s.Connection.REASON_DRAG_CHECKS_FAILED=7,s.Connection.prototype.targetConnection=null,s.Connection.prototype.disposed=!1,s.Connection.prototype.check_=null,s.Connection.prototype.shadowDom_=null,s.Connection.prototype.x=0,s.Connection.prototype.y=0,s.Connection.prototype.connect_=function(n){var k,l=s.connectionTypes.INPUT_VALUE,u=this.getSourceBlock(),h=n.getSourceBlock();if(n.isConnected()&&n.disconnect(),this.isConnected()){var _=this.getShadowDom(!0);this.shadowDom_=null;var b=this.targetBlock();if(b.isShadow())b.dispose(!1);else{this.disconnect();var M=b}this.shadowDom_=_}s.Events.isEnabled()&&(k=new(s.Events.get(s.Events.BLOCK_MOVE))(h)),s.Connection.connectReciprocally_(this,n),h.setParent(u),k&&(k.recordNew(),s.Events.fire(k)),M&&((h=s.Connection.getConnectionForOrphanedConnection(h,n=this.type===l?M.outputConnection:M.previousConnection))?n.connect(h):n.onFailedConnect(this))},s.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var n=this.targetBlock();n&&n.unplug()}this.disposed=!0},s.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},s.Connection.prototype.isSuperior=function(){return this.type==s.connectionTypes.INPUT_VALUE||this.type==s.connectionTypes.NEXT_STATEMENT},s.Connection.prototype.isConnected=function(){return!!this.targetConnection},s.Connection.prototype.canConnectWithReason=function(n){return s.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,n,!1)},s.Connection.prototype.checkConnection=function(n){s.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var l=this.getConnectionChecker(),u=l.canConnectWithReason(this,n,!1);if(u!=s.Connection.CAN_CONNECT)throw Error(l.getErrorMessage(u,this,n))},s.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},s.Connection.prototype.isConnectionAllowed=function(n){return s.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,n,!0)},s.Connection.prototype.onFailedConnect=function(n){},s.Connection.prototype.connect=function(n){if(this.targetConnection!=n&&this.getConnectionChecker().canConnect(this,n,!1)){var l=s.Events.getGroup();l||s.Events.setGroup(!0),this.isSuperior()?this.connect_(n):n.connect_(this),l||s.Events.setGroup(!1)}},s.Connection.connectReciprocally_=function(n,l){if(!n||!l)throw Error("Cannot connect null connections.");n.targetConnection=l,l.targetConnection=n},s.Connection.getSingleConnection_=function(n,l){for(var b,u=null,h=(l=l.outputConnection).getConnectionChecker(),_=0;b=n.inputList[_];_++)if((b=b.connection)&&h.canConnect(l,b,!1)){if(u)return null;u=b}return u},s.Connection.getConnectionForOrphanedOutput_=function(n,l){for(var u;u=s.Connection.getSingleConnection_(n,l);)if(!(n=u.targetBlock())||n.isShadow())return u;return null},s.Connection.getConnectionForOrphanedConnection=function(n,l){if(l.type===s.connectionTypes.OUTPUT_VALUE)return s.Connection.getConnectionForOrphanedOutput_(n,l.getSourceBlock());n=n.lastConnectionInStack(!0);var u=l.getConnectionChecker();return n&&u.canConnect(l,n,!1)?n:null},s.Connection.prototype.disconnect=function(){var n=this.targetConnection;if(!n)throw Error("Source connection not connected.");if(n.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var l=this.sourceBlock_,u=n.getSourceBlock();n=this}else l=n.getSourceBlock(),u=this.sourceBlock_;var h=s.Events.getGroup();h||s.Events.setGroup(!0),this.disconnectInternal_(l,u),u.isShadow()||n.respawnShadow_(),h||s.Events.setGroup(!1)},s.Connection.prototype.disconnectInternal_=function(n,l){var u;s.Events.isEnabled()&&(u=new(s.Events.get(s.Events.BLOCK_MOVE))(l)),this.targetConnection=this.targetConnection.targetConnection=null,l.setParent(null),u&&(u.recordNew(),s.Events.fire(u))},s.Connection.prototype.respawnShadow_=function(){var n=this.getSourceBlock(),l=this.getShadowDom();if(n.workspace&&l)if((n=s.Xml.domToBlock(l,n.workspace)).outputConnection)this.connect(n.outputConnection);else{if(!n.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(n.previousConnection)}},s.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},s.Connection.prototype.checkType=function(n){return s.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,n,!1)},s.Connection.prototype.checkType_=function(n){return s.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(n)},s.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},s.Connection.prototype.setCheck=function(n){return n?(Array.isArray(n)||(n=[n]),this.check_=n,this.onCheckChanged_()):this.check_=null,this},s.Connection.prototype.getCheck=function(){return this.check_},s.Connection.prototype.setShadowDom=function(n){this.shadowDom_=n,(n=this.targetBlock())?n.isShadow()&&(n.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},s.Connection.prototype.getShadowDom=function(n){return n&&this.targetBlock().isShadow()?s.Xml.blockToDom(this.targetBlock()):this.shadowDom_},s.Connection.prototype.neighbours=function(n){return[]},s.Connection.prototype.getParentInput=function(){for(var n=null,l=this.sourceBlock_.inputList,u=0;u<l.length;u++)if(l[u].connection===this){n=l[u];break}return n},s.Connection.prototype.toString=function(){var n=this.sourceBlock_;if(!n)return"Orphan Connection";if(n.outputConnection==this)var l="Output Connection of ";else if(n.previousConnection==this)l="Previous Connection of ";else if(n.nextConnection==this)l="Next Connection of ";else{l=null;for(var h,u=0;h=n.inputList[u];u++)if(h.connection==this){l=h;break}if(!l)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";l='Input "'+l.name+'" connection on '}return l+n.toDevString()},s.IConnectionChecker=function(){},s.ConnectionChecker=function(){},s.ConnectionChecker.prototype.canConnect=function(n,l,u,h){return this.canConnectWithReason(n,l,u,h)==s.Connection.CAN_CONNECT},s.ConnectionChecker.prototype.canConnectWithReason=function(n,l,u,h){var _=this.doSafetyChecks(n,l);return _!=s.Connection.CAN_CONNECT?_:this.doTypeChecks(n,l)?u&&!this.doDragChecks(n,l,h||0)?s.Connection.REASON_DRAG_CHECKS_FAILED:s.Connection.CAN_CONNECT:s.Connection.REASON_CHECKS_FAILED},s.ConnectionChecker.prototype.getErrorMessage=function(n,l,u){switch(n){case s.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case s.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case s.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case s.Connection.REASON_TARGET_NULL:return"Target connection is null.";case s.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+l+" expected "+l.getCheck()+", found "+u.getCheck();case s.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case s.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},s.ConnectionChecker.prototype.doSafetyChecks=function(n,l){if(!n||!l)return s.Connection.REASON_TARGET_NULL;if(n.isSuperior())var u=n.getSourceBlock(),h=l.getSourceBlock();else h=n.getSourceBlock(),u=l.getSourceBlock();return u==h?s.Connection.REASON_SELF_CONNECTION:l.type!=s.OPPOSITE_TYPE[n.type]?s.Connection.REASON_WRONG_TYPE:u.workspace!==h.workspace?s.Connection.REASON_DIFFERENT_WORKSPACES:u.isShadow()&&!h.isShadow()?s.Connection.REASON_SHADOW_PARENT:s.Connection.CAN_CONNECT},s.ConnectionChecker.prototype.doTypeChecks=function(n,l){if(n=n.getCheck(),l=l.getCheck(),!n||!l)return!0;for(var u=0;u<n.length;u++)if(-1!=l.indexOf(n[u]))return!0;return!1},s.ConnectionChecker.prototype.doDragChecks=function(n,l,u){if(n.distanceFrom(l)>u||l.getSourceBlock().isInsertionMarker())return!1;switch(l.type){case s.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(n,l);case s.connectionTypes.OUTPUT_VALUE:if(l.isConnected()&&!l.targetBlock().isInsertionMarker()||n.isConnected())return!1;break;case s.connectionTypes.INPUT_VALUE:if(l.isConnected()&&!l.targetBlock().isMovable()&&!l.targetBlock().isShadow())return!1;break;case s.connectionTypes.NEXT_STATEMENT:if(l.isConnected()&&!n.getSourceBlock().nextConnection&&!l.targetBlock().isShadow()&&l.targetBlock().nextConnection)return!1;break;default:return!1}return-1==s.draggingConnections.indexOf(l)},s.ConnectionChecker.prototype.canConnectToPrevious_=function(n,l){return!(n.targetConnection||-1!=s.draggingConnections.indexOf(l)||l.targetConnection&&(!(n=l.targetBlock()).isInsertionMarker()||n.getPreviousBlock()))},s.registry.register(s.registry.Type.CONNECTION_CHECKER,s.registry.DEFAULT,s.ConnectionChecker),s.VariableMap=function(n){this.variableMap_=Object.create(null),this.workspace=n},s.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},s.VariableMap.prototype.renameVariable=function(n,l){var u=this.getVariable(l,n.type),h=this.workspace.getAllBlocks(!1);s.Events.setGroup(!0);try{u&&u.getId()!=n.getId()?this.renameVariableWithConflict_(n,l,u,h):this.renameVariableAndUses_(n,l,h)}finally{s.Events.setGroup(!1)}},s.VariableMap.prototype.renameVariableById=function(n,l){var u=this.getVariableById(n);if(!u)throw Error("Tried to rename a variable that didn't exist. ID: "+n);this.renameVariable(u,l)},s.VariableMap.prototype.renameVariableAndUses_=function(n,l,u){for(s.Events.fire(new(s.Events.get(s.Events.VAR_RENAME))(n,l)),n.name=l,l=0;l<u.length;l++)u[l].updateVarName(n)},s.VariableMap.prototype.renameVariableWithConflict_=function(n,l,u,h){var _=n.type;for(l!=u.name&&this.renameVariableAndUses_(u,l,h),l=0;l<h.length;l++)h[l].renameVarById(n.getId(),u.getId());s.Events.fire(new(s.Events.get(s.Events.VAR_DELETE))(n)),n=this.getVariablesOfType(_).indexOf(n),this.variableMap_[_].splice(n,1)},s.VariableMap.prototype.createVariable=function(n,l,u){var h=this.getVariable(n,l);if(h){if(u&&h.getId()!=u)throw Error('Variable "'+n+'" is already in use and its id is "'+h.getId()+'" which conflicts with the passed in id, "'+u+'".');return h}if(u&&this.getVariableById(u))throw Error('Variable id, "'+u+'", is already in use.');return h=u||s.utils.genUid(),h=new s.VariableModel(this.workspace,n,l=l||"",h),(n=this.variableMap_[l]||[]).push(h),delete this.variableMap_[l],this.variableMap_[l]=n,h},s.VariableMap.prototype.deleteVariable=function(n){for(var h,l=this.variableMap_[n.type],u=0;h=l[u];u++)if(h.getId()==n.getId()){l.splice(u,1),s.Events.fire(new(s.Events.get(s.Events.VAR_DELETE))(n));break}},s.VariableMap.prototype.deleteVariableById=function(n){var l=this.getVariableById(n);if(l){var _,u=l.name,h=this.getVariableUsesById(n);for(n=0;_=h[n];n++)if("procedures_defnoreturn"==_.type||"procedures_defreturn"==_.type)return n=_.getFieldValue("NAME"),u=s.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",u).replace("%2",n),void s.alert(u);var b=this;1<h.length?(u=s.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(h.length)).replace("%2",u),s.confirm(u,function(M){M&&l&&b.deleteVariableInternal(l,h)})):b.deleteVariableInternal(l,h)}else console.warn("Can't delete non-existent variable: "+n)},s.VariableMap.prototype.deleteVariableInternal=function(n,l){var u=s.Events.getGroup();u||s.Events.setGroup(!0);try{for(var h=0;h<l.length;h++)l[h].dispose(!0);this.deleteVariable(n)}finally{u||s.Events.setGroup(!1)}},s.VariableMap.prototype.getVariable=function(n,l){if(l=this.variableMap_[l||""])for(var h,u=0;h=l[u];u++)if(s.Names.equals(h.name,n))return h;return null},s.VariableMap.prototype.getVariableById=function(n){for(var l=Object.keys(this.variableMap_),u=0;u<l.length;u++)for(var b,h=l[u],_=0;b=this.variableMap_[h][_];_++)if(b.getId()==n)return b;return null},s.VariableMap.prototype.getVariablesOfType=function(n){return(n=this.variableMap_[n||""])?n.slice():[]},s.VariableMap.prototype.getVariableTypes=function(n){var l={};s.utils.object.mixin(l,this.variableMap_),n&&n.getPotentialVariableMap()&&s.utils.object.mixin(l,n.getPotentialVariableMap().variableMap_),n=Object.keys(l),l=!1;for(var u=0;u<n.length;u++)""==n[u]&&(l=!0);return l||n.push(""),n},s.VariableMap.prototype.getAllVariables=function(){var l,n=[];for(l in this.variableMap_)n=n.concat(this.variableMap_[l]);return n},s.VariableMap.prototype.getAllVariableNames=function(){var l,n=[];for(l in this.variableMap_)for(var _,u=this.variableMap_[l],h=0;_=u[h];h++)n.push(_.name);return n},s.VariableMap.prototype.getVariableUsesById=function(n){for(var l=[],u=this.workspace.getAllBlocks(!1),h=0;h<u.length;h++){var _=u[h].getVarModels();if(_)for(var b=0;b<_.length;b++)_[b].getId()==n&&l.push(u[h])}return l},s.Workspace=function(n){this.id=s.utils.genUid(),s.Workspace.WorkspaceDB_[this.id]=this,this.options=n||new s.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(s.registry.getClassFromOptions(s.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new s.VariableMap(this),this.potentialVariableMap_=null},s.Workspace.prototype.rendered=!1,s.Workspace.prototype.isClearing=!1,s.Workspace.prototype.MAX_UNDO=1024,s.Workspace.prototype.connectionDBList=null,s.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete s.Workspace.WorkspaceDB_[this.id]},s.Workspace.SCAN_ANGLE=3,s.Workspace.prototype.sortObjects_=function(n,l){return n=n.getRelativeToSurfaceXY(),l=l.getRelativeToSurfaceXY(),n.y+s.Workspace.prototype.sortObjects_.offset*n.x-(l.y+s.Workspace.prototype.sortObjects_.offset*l.x)},s.Workspace.prototype.addTopBlock=function(n){this.topBlocks_.push(n)},s.Workspace.prototype.removeTopBlock=function(n){if(!s.utils.arrayRemove(this.topBlocks_,n))throw Error("Block not present in workspace's list of top-most blocks.")},s.Workspace.prototype.getTopBlocks=function(n){var l=[].concat(this.topBlocks_);return n&&1<l.length&&(this.sortObjects_.offset=Math.sin(s.utils.math.toRadians(s.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),l.sort(this.sortObjects_)),l},s.Workspace.prototype.addTypedBlock=function(n){this.typedBlocksDB_[n.type]||(this.typedBlocksDB_[n.type]=[]),this.typedBlocksDB_[n.type].push(n)},s.Workspace.prototype.removeTypedBlock=function(n){this.typedBlocksDB_[n.type].splice(this.typedBlocksDB_[n.type].indexOf(n),1),this.typedBlocksDB_[n.type].length||delete this.typedBlocksDB_[n.type]},s.Workspace.prototype.getBlocksByType=function(n,l){return this.typedBlocksDB_[n]?(n=this.typedBlocksDB_[n].slice(0),l&&1<n.length&&(this.sortObjects_.offset=Math.sin(s.utils.math.toRadians(s.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n):[]},s.Workspace.prototype.addTopComment=function(n){this.topComments_.push(n),this.commentDB_[n.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+n.id+'"'),this.commentDB_[n.id]=n},s.Workspace.prototype.removeTopComment=function(n){if(!s.utils.arrayRemove(this.topComments_,n))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[n.id]},s.Workspace.prototype.getTopComments=function(n){var l=[].concat(this.topComments_);return n&&1<l.length&&(this.sortObjects_.offset=Math.sin(s.utils.math.toRadians(s.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),l.sort(this.sortObjects_)),l},s.Workspace.prototype.getAllBlocks=function(n){if(n){n=this.getTopBlocks(!0);for(var l=[],u=0;u<n.length;u++)l.push.apply(l,n[u].getDescendants(!0))}else for(l=this.getTopBlocks(!1),u=0;u<l.length;u++)l.push.apply(l,l[u].getChildren(!1));return l.filter(function(h){return!h.isInsertionMarker()})},s.Workspace.prototype.clear=function(){this.isClearing=!0;try{var n=s.Events.getGroup();for(n||s.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);n||s.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},s.Workspace.prototype.renameVariableById=function(n,l){this.variableMap_.renameVariableById(n,l)},s.Workspace.prototype.createVariable=function(n,l,u){return this.variableMap_.createVariable(n,l,u)},s.Workspace.prototype.getVariableUsesById=function(n){return this.variableMap_.getVariableUsesById(n)},s.Workspace.prototype.deleteVariableById=function(n){this.variableMap_.deleteVariableById(n)},s.Workspace.prototype.getVariable=function(n,l){return this.variableMap_.getVariable(n,l)},s.Workspace.prototype.getVariableById=function(n){return this.variableMap_.getVariableById(n)},s.Workspace.prototype.getVariablesOfType=function(n){return this.variableMap_.getVariablesOfType(n)},s.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},s.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},s.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},s.Workspace.prototype.getWidth=function(){return 0},s.Workspace.prototype.newBlock=function(n,l){return new s.Block(this,n,l)},s.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},s.Workspace.prototype.remainingCapacityOfType=function(n){return this.options.maxInstances?(void 0!==this.options.maxInstances[n]?this.options.maxInstances[n]:1/0)-this.getBlocksByType(n,!1).length:1/0},s.Workspace.prototype.isCapacityAvailable=function(n){if(!this.hasBlockLimits())return!0;var u,l=0;for(u in n){if(n[u]>this.remainingCapacityOfType(u))return!1;l+=n[u]}return!(l>this.remainingCapacity())},s.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},s.Workspace.prototype.getUndoStack=function(){return this.undoStack_},s.Workspace.prototype.getRedoStack=function(){return this.redoStack_},s.Workspace.prototype.undo=function(n){var l=n?this.redoStack_:this.undoStack_,u=n?this.undoStack_:this.redoStack_,h=l.pop();if(h){for(var _=[h];l.length&&h.group&&h.group==l[l.length-1].group;)_.push(l.pop());for(l=0;h=_[l];l++)u.push(h);_=s.Events.filter(_,n),s.Events.recordUndo=!1;try{for(l=0;h=_[l];l++)h.run(n)}finally{s.Events.recordUndo=!0}}},s.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,s.Events.clearPendingUndo()},s.Workspace.prototype.addChangeListener=function(n){return this.listeners_.push(n),n},s.Workspace.prototype.removeChangeListener=function(n){s.utils.arrayRemove(this.listeners_,n)},s.Workspace.prototype.fireChangeListener=function(n){if(n.recordUndo)for(this.undoStack_.push(n),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var u,l=0;u=this.listeners_[l];l++)u(n)},s.Workspace.prototype.getBlockById=function(n){return this.blockDB_[n]||null},s.Workspace.prototype.setBlockById=function(n,l){this.blockDB_[n]=l},s.Workspace.prototype.removeBlockById=function(n){delete this.blockDB_[n]},s.Workspace.prototype.getCommentById=function(n){return this.commentDB_[n]||null},s.Workspace.prototype.allInputsFilled=function(n){for(var h,l=this.getTopBlocks(!1),u=0;h=l[u];u++)if(!h.allInputsFilled(n))return!1;return!0},s.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},s.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new s.VariableMap(this)},s.Workspace.prototype.getVariableMap=function(){return this.variableMap_},s.Workspace.prototype.setVariableMap=function(n){this.variableMap_=n},s.Workspace.WorkspaceDB_=Object.create(null),s.Workspace.getById=function(n){return s.Workspace.WorkspaceDB_[n]||null},s.Workspace.getAll=function(){var l,n=[];for(l in s.Workspace.WorkspaceDB_)n.push(s.Workspace.WorkspaceDB_[l]);return n},s.WorkspaceDragSurfaceSvg=function(n){this.container_=n,this.createDom()},s.WorkspaceDragSurfaceSvg.prototype.SVG_=null,s.WorkspaceDragSurfaceSvg.prototype.container_=null,s.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},s.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(n,l){n=n.toFixed(0),l=l.toFixed(0),this.SVG_.style.display="block",s.utils.dom.setCssTransform(this.SVG_,"translate3d("+n+"px, "+l+"px, 0px)")},s.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return s.utils.getRelativeXY(this.SVG_)},s.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(n){if(!n)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var l=this.SVG_.childNodes[0],u=this.SVG_.childNodes[1];if(!(l&&u&&s.utils.dom.hasClass(l,"blocklyBlockCanvas")&&s.utils.dom.hasClass(u,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?s.utils.dom.insertAfter(l,this.previousSibling_):n.insertBefore(l,n.firstChild),s.utils.dom.insertAfter(u,l),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");s.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},s.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(n,l,u,h,_,b){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=u,n.setAttribute("transform","translate(0, 0) scale("+b+")"),l.setAttribute("transform","translate(0, 0) scale("+b+")"),this.SVG_.setAttribute("width",h),this.SVG_.setAttribute("height",_),this.SVG_.appendChild(n),this.SVG_.appendChild(l),this.SVG_.style.display="block"},s.blockRendering={},s.blockRendering.useDebugger=!1,s.blockRendering.register=function(n,l){s.registry.register(s.registry.Type.RENDERER,n,l)},s.blockRendering.unregister=function(n){s.registry.unregister(s.registry.Type.RENDERER,n)},s.blockRendering.startDebugger=function(){s.blockRendering.useDebugger=!0},s.blockRendering.stopDebugger=function(){s.blockRendering.useDebugger=!1},s.blockRendering.init=function(n,l,u){return(n=new(s.registry.getClass(s.registry.Type.RENDERER,n))(n)).init(l,u),n},s.ASTNode=function(n,l,u){if(!l)throw Error("Cannot create a node without a location.");this.type_=n,this.isConnection_=s.ASTNode.isConnectionType_(n),this.location_=l,this.wsCoordinate_=null,this.processParams_(u||null)},s.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},s.ASTNode.NAVIGATE_ALL_FIELDS=!1,s.ASTNode.DEFAULT_OFFSET_Y=-20,s.ASTNode.isConnectionType_=function(n){switch(n){case s.ASTNode.types.PREVIOUS:case s.ASTNode.types.NEXT:case s.ASTNode.types.INPUT:case s.ASTNode.types.OUTPUT:return!0}return!1},s.ASTNode.createFieldNode=function(n){return n?new s.ASTNode(s.ASTNode.types.FIELD,n):null},s.ASTNode.createConnectionNode=function(n){if(!n)return null;var l=n.type;return l==s.connectionTypes.INPUT_VALUE||l==s.connectionTypes.NEXT_STATEMENT&&n.getParentInput()?s.ASTNode.createInputNode(n.getParentInput()):l==s.connectionTypes.NEXT_STATEMENT?new s.ASTNode(s.ASTNode.types.NEXT,n):l==s.connectionTypes.OUTPUT_VALUE?new s.ASTNode(s.ASTNode.types.OUTPUT,n):l==s.connectionTypes.PREVIOUS_STATEMENT?new s.ASTNode(s.ASTNode.types.PREVIOUS,n):null},s.ASTNode.createInputNode=function(n){return n&&n.connection?new s.ASTNode(s.ASTNode.types.INPUT,n.connection):null},s.ASTNode.createBlockNode=function(n){return n?new s.ASTNode(s.ASTNode.types.BLOCK,n):null},s.ASTNode.createStackNode=function(n){return n?new s.ASTNode(s.ASTNode.types.STACK,n):null},s.ASTNode.createWorkspaceNode=function(n,l){return l&&n?new s.ASTNode(s.ASTNode.types.WORKSPACE,n,{wsCoordinate:l}):null},s.ASTNode.createTopNode=function(n){var l=n.previousConnection||n.outputConnection;return l?s.ASTNode.createConnectionNode(l):s.ASTNode.createBlockNode(n)},s.ASTNode.prototype.processParams_=function(n){n&&n.wsCoordinate&&(this.wsCoordinate_=n.wsCoordinate)},s.ASTNode.prototype.getLocation=function(){return this.location_},s.ASTNode.prototype.getType=function(){return this.type_},s.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},s.ASTNode.prototype.isConnection=function(){return this.isConnection_},s.ASTNode.prototype.findNextForInput_=function(){var u,n=this.location_.getParentInput(),l=n.getSourceBlock();for(n=l.inputList.indexOf(n)+1;u=l.inputList[n];n++){for(var b,h=u.fieldRow,_=0;b=h[_];_++)if(b.isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(b);if(u.connection)return s.ASTNode.createInputNode(u)}return null},s.ASTNode.prototype.findNextForField_=function(){var n=this.location_,l=n.getParentInput(),u=n.getSourceBlock(),h=u.inputList.indexOf(l);for(n=l.fieldRow.indexOf(n)+1;l=u.inputList[h];h++){for(var _=l.fieldRow;n<_.length;){if(_[n].isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(_[n]);n++}if(n=0,l.connection)return s.ASTNode.createInputNode(l)}return null},s.ASTNode.prototype.findPrevForInput_=function(){for(var h,n=this.location_.getParentInput(),l=n.getSourceBlock(),u=l.inputList.indexOf(n);h=l.inputList[u];u--){if(h.connection&&h!==n)return s.ASTNode.createInputNode(h);for(var b,_=(h=h.fieldRow).length-1;b=h[_];_--)if(b.isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(b)}return null},s.ASTNode.prototype.findPrevForField_=function(){var _,n=this.location_,l=n.getParentInput(),u=n.getSourceBlock(),h=u.inputList.indexOf(l);for(n=l.fieldRow.indexOf(n)-1;_=u.inputList[h];h--){if(_.connection&&_!==l)return s.ASTNode.createInputNode(_);for(_=_.fieldRow;-1<n;){if(_[n].isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(_[n]);n--}0<=h-1&&(n=u.inputList[h-1].fieldRow.length-1)}return null},s.ASTNode.prototype.navigateBetweenStacks_=function(n){var l=this.getLocation();if(l instanceof s.Block||(l=l.getSourceBlock()),!l||!l.workspace)return null;var u=l.getRootBlock();l=u.workspace.getTopBlocks(!0);for(var _,h=0;_=l[h];h++)if(u.id==_.id)return-1==(n=h+(n?1:-1))||n==l.length?null:s.ASTNode.createStackNode(l[n]);throw Error("Couldn't find "+(n?"next":"previous")+" stack?!")},s.ASTNode.prototype.findTopASTNodeForBlock_=function(n){var l=n.previousConnection||n.outputConnection;return l?s.ASTNode.createConnectionNode(l):s.ASTNode.createBlockNode(n)},s.ASTNode.prototype.getOutAstNodeForBlock_=function(n){if(!n)return null;var l=(n=n.getTopStackBlock()).previousConnection||n.outputConnection;return l&&l.targetConnection&&l.targetConnection.getParentInput()?s.ASTNode.createInputNode(l.targetConnection.getParentInput()):s.ASTNode.createStackNode(n)},s.ASTNode.prototype.findFirstFieldOrInput_=function(n){n=n.inputList;for(var u,l=0;u=n[l];l++){for(var b,h=u.fieldRow,_=0;b=h[_];_++)if(b.isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(b);if(u.connection)return s.ASTNode.createInputNode(u)}return null},s.ASTNode.prototype.getSourceBlock=function(){return this.getType()===s.ASTNode.types.BLOCK||this.getType()===s.ASTNode.types.STACK?this.getLocation():this.getType()===s.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},s.ASTNode.prototype.next=function(){switch(this.type_){case s.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case s.ASTNode.types.OUTPUT:var n=this.location_;return s.ASTNode.createBlockNode(n.getSourceBlock());case s.ASTNode.types.FIELD:return this.findNextForField_();case s.ASTNode.types.INPUT:return this.findNextForInput_();case s.ASTNode.types.BLOCK:return s.ASTNode.createConnectionNode(this.location_.nextConnection);case s.ASTNode.types.PREVIOUS:return s.ASTNode.createBlockNode((n=this.location_).getSourceBlock());case s.ASTNode.types.NEXT:return s.ASTNode.createConnectionNode((n=this.location_).targetConnection)}return null},s.ASTNode.prototype.in=function(){switch(this.type_){case s.ASTNode.types.WORKSPACE:var n=this.location_.getTopBlocks(!0);if(0<n.length)return s.ASTNode.createStackNode(n[0]);break;case s.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(n=this.location_);case s.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(n=this.location_);case s.ASTNode.types.INPUT:return s.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},s.ASTNode.prototype.prev=function(){switch(this.type_){case s.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case s.ASTNode.types.FIELD:return this.findPrevForField_();case s.ASTNode.types.INPUT:return this.findPrevForInput_();case s.ASTNode.types.BLOCK:var n=this.location_;return s.ASTNode.createConnectionNode(n.previousConnection||n.outputConnection);case s.ASTNode.types.PREVIOUS:if((n=(n=this.location_).targetConnection)&&!n.getParentInput())return s.ASTNode.createConnectionNode(n);break;case s.ASTNode.types.NEXT:return s.ASTNode.createBlockNode((n=this.location_).getSourceBlock())}return null},s.ASTNode.prototype.out=function(){switch(this.type_){case s.ASTNode.types.STACK:var n=this.location_,l=n.getRelativeToSurfaceXY();return l=new s.utils.Coordinate(l.x,l.y+s.ASTNode.DEFAULT_OFFSET_Y),s.ASTNode.createWorkspaceNode(n.workspace,l);case s.ASTNode.types.OUTPUT:return(l=(n=this.location_).targetConnection)?s.ASTNode.createConnectionNode(l):s.ASTNode.createStackNode(n.getSourceBlock());case s.ASTNode.types.FIELD:return s.ASTNode.createBlockNode(this.location_.getSourceBlock());case s.ASTNode.types.INPUT:return s.ASTNode.createBlockNode((n=this.location_).getSourceBlock());case s.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(n=this.location_);case s.ASTNode.types.PREVIOUS:case s.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((n=this.location_).getSourceBlock())}return null},s.Blocks=Object.create(null),s.Extensions={},s.Extensions.ALL_=Object.create(null),s.Extensions.register=function(n,l){if("string"!=typeof n||""==n.trim())throw Error('Error: Invalid extension name "'+n+'"');if(s.Extensions.ALL_[n])throw Error('Error: Extension "'+n+'" is already registered.');if("function"!=typeof l)throw Error('Error: Extension "'+n+'" must be a function');s.Extensions.ALL_[n]=l},s.Extensions.registerMixin=function(n,l){if(!l||"object"!=typeof l)throw Error('Error: Mixin "'+n+'" must be a object');s.Extensions.register(n,function(){this.mixin(l)})},s.Extensions.registerMutator=function(n,l,u,h){var _='Error when registering mutator "'+n+'": ';s.Extensions.checkHasFunction_(_,l.domToMutation,"domToMutation"),s.Extensions.checkHasFunction_(_,l.mutationToDom,"mutationToDom");var b=s.Extensions.checkMutatorDialog_(l,_);if(u&&"function"!=typeof u)throw Error('Extension "'+n+'" is not a function');s.Extensions.register(n,function(){if(b){if(!s.Mutator)throw Error(_+"Missing require for Blockly.Mutator");this.setMutator(new s.Mutator(h||[]))}this.mixin(l),u&&u.apply(this)})},s.Extensions.unregister=function(n){s.Extensions.ALL_[n]?delete s.Extensions.ALL_[n]:console.warn('No extension mapping for name "'+n+'" found to unregister')},s.Extensions.apply=function(n,l,u){var h=s.Extensions.ALL_[n];if("function"!=typeof h)throw Error('Error: Extension "'+n+'" not found.');if(u)s.Extensions.checkNoMutatorProperties_(n,l);else var _=s.Extensions.getMutatorProperties_(l);if(h.apply(l),u)s.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+n+'": ',l);else if(!s.Extensions.mutatorPropertiesMatch_(_,l))throw Error('Error when applying extension "'+n+'": mutation properties changed when applying a non-mutator extension.')},s.Extensions.checkHasFunction_=function(n,l,u){if(!l)throw Error(n+'missing required property "'+u+'"');if("function"!=typeof l)throw Error(n+'" required property "'+u+'" must be a function')},s.Extensions.checkNoMutatorProperties_=function(n,l){if(s.Extensions.getMutatorProperties_(l).length)throw Error('Error: tried to apply mutation "'+n+'" to a block that already has mutator functions.  Block id: '+l.id)},s.Extensions.checkMutatorDialog_=function(n,l){var u=void 0!==n.compose,h=void 0!==n.decompose;if(u&&h){if("function"!=typeof n.compose)throw Error(l+"compose must be a function.");if("function"!=typeof n.decompose)throw Error(l+"decompose must be a function.");return!0}if(!u&&!h)return!1;throw Error(l+'Must have both or neither of "compose" and "decompose"')},s.Extensions.checkBlockHasMutatorProperties_=function(n,l){if("function"!=typeof l.domToMutation)throw Error(n+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof l.mutationToDom)throw Error(n+'Applying a mutator didn\'t add "mutationToDom"');s.Extensions.checkMutatorDialog_(l,n)},s.Extensions.getMutatorProperties_=function(n){var l=[];return void 0!==n.domToMutation&&l.push(n.domToMutation),void 0!==n.mutationToDom&&l.push(n.mutationToDom),void 0!==n.compose&&l.push(n.compose),void 0!==n.decompose&&l.push(n.decompose),l},s.Extensions.mutatorPropertiesMatch_=function(n,l){if((l=s.Extensions.getMutatorProperties_(l)).length!=n.length)return!1;for(var u=0;u<l.length;u++)if(n[u]!=l[u])return!1;return!0},s.Extensions.buildTooltipForDropdown=function(n,l){var u=[];return"object"==typeof document&&s.utils.runAfterPageLoad(function(){for(var h in l)s.utils.checkMessageReferences(l[h])}),function(){this.type&&-1==u.indexOf(this.type)&&(s.Extensions.checkDropdownOptionsInTable_(this,n,l),u.push(this.type)),this.setTooltip(function(){var h=String(this.getFieldValue(n)),_=l[h];return null==_?-1==u.indexOf(this.type)&&(h="No tooltip mapping for value "+h+" of field "+n,null!=this.type&&(h+=" of block type "+this.type),console.warn(h+".")):_=s.utils.replaceMessageReferences(_),_}.bind(this))}},s.Extensions.checkDropdownOptionsInTable_=function(n,l,u){var h=n.getField(l);if(!h.isOptionListDynamic()){h=h.getOptions();for(var _=0;_<h.length;++_){var b=h[_][1];null==u[b]&&console.warn("No tooltip mapping for value "+b+" of field "+l+" of block type "+n.type)}}},s.Extensions.buildTooltipWithFieldText=function(n,l){return"object"==typeof document&&s.utils.runAfterPageLoad(function(){s.utils.checkMessageReferences(n)}),function(){this.setTooltip(function(){var u=this.getField(l);return s.utils.replaceMessageReferences(n).replace("%1",u?u.getText():"")}.bind(this))}},s.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var n=this.getParent();return n&&n.getInputsInline()&&n.tooltip||this.tooltipWhenNotConnected_}.bind(this))},s.Extensions.register("parent_tooltip_when_inline",s.Extensions.extensionParentTooltip_),s.fieldRegistry={},s.fieldRegistry.register=function(n,l){s.registry.register(s.registry.Type.FIELD,n,l)},s.fieldRegistry.unregister=function(n){s.registry.unregister(s.registry.Type.FIELD,n)},s.fieldRegistry.fromJson=function(n){var l=s.registry.getObject(s.registry.Type.FIELD,n.type);return l?l.fromJson(n):(console.warn("Blockly could not create a field of type "+n.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},s.IDeletable=function(){},s.blockAnimations={},s.blockAnimations.disconnectPid_=0,s.blockAnimations.disconnectGroup_=null,s.blockAnimations.disposeUiEffect=function(n){var l=n.workspace,u=n.getSvgRoot();l.getAudioManager().play("delete"),n=l.getSvgXY(u),(u=u.cloneNode(!0)).translateX_=n.x,u.translateY_=n.y,u.setAttribute("transform","translate("+n.x+","+n.y+")"),l.getParentSvg().appendChild(u),u.bBox_=u.getBBox(),s.blockAnimations.disposeUiStep_(u,l.RTL,new Date,l.scale)},s.blockAnimations.disposeUiStep_=function(n,l,u,h){var _=(new Date-u)/150;1<_?s.utils.dom.removeNode(n):(n.setAttribute("transform","translate("+(n.translateX_+(l?-1:1)*n.bBox_.width*h/2*_)+","+(n.translateY_+n.bBox_.height*h*_)+") scale("+(1-_)*h+")"),setTimeout(s.blockAnimations.disposeUiStep_,10,n,l,u,h))},s.blockAnimations.connectionUiEffect=function(n){var l=n.workspace,u=l.scale;if(l.getAudioManager().play("click"),!(1>u)){var h=l.getSvgXY(n.getSvgRoot());n.outputConnection?(h.x+=(n.RTL?3:-3)*u,h.y+=13*u):n.previousConnection&&(h.x+=(n.RTL?-23:23)*u,h.y+=3*u),n=s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{cx:h.x,cy:h.y,r:0,fill:"none",stroke:"#888","stroke-width":10},l.getParentSvg()),s.blockAnimations.connectionUiStep_(n,new Date,u)}},s.blockAnimations.connectionUiStep_=function(n,l,u){var h=(new Date-l)/150;1<h?s.utils.dom.removeNode(n):(n.setAttribute("r",25*h*u),n.style.opacity=1-h,s.blockAnimations.disconnectPid_=setTimeout(s.blockAnimations.connectionUiStep_,10,n,l,u))},s.blockAnimations.disconnectUiEffect=function(n){if(n.workspace.getAudioManager().play("disconnect"),!(1>n.workspace.scale)){var l=n.getHeightWidth().height;l=Math.atan(10/l)/Math.PI*180,n.RTL||(l*=-1),s.blockAnimations.disconnectUiStep_(n.getSvgRoot(),l,new Date)}},s.blockAnimations.disconnectUiStep_=function(n,l,u){var h=(new Date-u)/200;1<h?n.skew_="":(n.skew_="skewX("+Math.round(Math.sin(h*Math.PI*3)*(1-h)*l)+")",s.blockAnimations.disconnectGroup_=n,s.blockAnimations.disconnectPid_=setTimeout(s.blockAnimations.disconnectUiStep_,10,n,l,u)),n.setAttribute("transform",n.translate_+n.skew_)},s.blockAnimations.disconnectUiStop=function(){if(s.blockAnimations.disconnectGroup_){clearTimeout(s.blockAnimations.disconnectPid_);var n=s.blockAnimations.disconnectGroup_;n.skew_="",n.setAttribute("transform",n.translate_),s.blockAnimations.disconnectGroup_=null}},s.Events.BlockDrag=function(n,l,u){s.Events.BlockDrag.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.isStart=l,this.blocks=u},s.utils.object.inherits(s.Events.BlockDrag,s.Events.UiBase),s.Events.BlockDrag.prototype.type=s.Events.BLOCK_DRAG,s.Events.BlockDrag.prototype.toJson=function(){var n=s.Events.BlockDrag.superClass_.toJson.call(this);return n.isStart=this.isStart,n.blockId=this.blockId,n.blocks=this.blocks,n},s.Events.BlockDrag.prototype.fromJson=function(n){s.Events.BlockDrag.superClass_.fromJson.call(this,n),this.isStart=n.isStart,this.blockId=n.blockId,this.blocks=n.blocks},s.registry.register(s.registry.Type.EVENT,s.Events.BLOCK_DRAG,s.Events.BlockDrag),s.IBlockDragger=function(){},s.InsertionMarkerManager=function(n){this.topBlock_=s.selected=n,this.workspace_=n.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},s.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},s.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",s.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,s.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{s.Events.enable()}},s.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},s.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},s.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},s.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(s.Events.disable(),this.hidePreview_(),s.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var n=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;s.blockAnimations.connectionUiEffect(n.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},s.InsertionMarkerManager.prototype.update=function(n,l){var u=this.getCandidate_(n);((this.wouldDeleteBlock_=this.shouldDelete_(u,l))||this.shouldUpdatePreviews_(u,n))&&(s.Events.disable(),this.maybeHidePreview_(u),this.maybeShowPreview_(u),s.Events.enable())},s.InsertionMarkerManager.prototype.createMarkerBlock_=function(n){var l=n.type;s.Events.disable();try{var u=this.workspace_.newBlock(l);if(u.setInsertionMarker(!0),n.mutationToDom){var h=n.mutationToDom();h&&u.domToMutation(h)}for(l=0;l<n.inputList.length;l++){var _=n.inputList[l];if(_.name!=s.constants.COLLAPSED_INPUT_NAME){var b=u.inputList[l];if(!b)throw Error(s.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(h=0;h<_.fieldRow.length;h++){var M=_.fieldRow[h],k=b.fieldRow[h];if(!k)throw Error(s.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));k.setValue(M.getValue())}}}u.setCollapsed(n.isCollapsed()),u.setInputsInline(n.getInputsInline()),u.initSvg(),u.getSvgRoot().setAttribute("visibility","hidden")}finally{s.Events.enable()}return u},s.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var n=this.topBlock_.getConnections_(!1),l=this.topBlock_.lastConnectionInStack(!0);if(l&&l!=this.topBlock_.nextConnection){if(n.push(l),this.lastOnStack_=l,this.lastMarker_){s.Events.disable();try{this.lastMarker_.dispose()}finally{s.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(l.getSourceBlock())}return n},s.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(n,l){var u=n.local,h=n.closest;return n=n.radius,u&&h?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==h&&this.localConnection_==u||(u=this.localConnection_.x+l.x-this.closestConnection_.x,l=this.localConnection_.y+l.y-this.closestConnection_.y,l=Math.sqrt(u*u+l*l),h&&n>l-s.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},s.InsertionMarkerManager.prototype.getCandidate_=function(n){for(var l=this.getStartRadius_(),u=null,h=null,_=0;_<this.availableConnections_.length;_++){var b=this.availableConnections_[_],M=b.closest(l,n);M.connection&&(u=M.connection,h=b,l=M.radius)}return{closest:u,local:h,radius:l}},s.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?s.CONNECTING_SNAP_RADIUS:s.SNAP_RADIUS},s.InsertionMarkerManager.prototype.shouldDelete_=function(n,l){return!(!l||!this.workspace_.getComponentManager().hasCapability(l.id,s.ComponentManager.Capability.DELETE_AREA))&&l.wouldDelete(this.topBlock_,n&&!!n.closest)},s.InsertionMarkerManager.prototype.maybeShowPreview_=function(n){if(!this.wouldDeleteBlock_){var l=n.closest;n=n.local,l&&(l==this.closestConnection_||l.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=l,this.localConnection_=n,this.showPreview_()))}},s.InsertionMarkerManager.prototype.showPreview_=function(){var n=this.closestConnection_,l=this.workspace_.getRenderer();switch(l.getConnectionPreviewMethod(n,this.localConnection_,this.topBlock_)){case s.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case s.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case s.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}n&&l.shouldHighlightConnection(n)&&n.highlight()},s.InsertionMarkerManager.prototype.maybeHidePreview_=function(n){if(n.closest){var l=this.closestConnection_!=n.closest;n=this.localConnection_!=n.local,this.closestConnection_&&this.localConnection_&&(l||n||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},s.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},s.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var n=this.localConnection_,l=this.closestConnection_,u=this.lastOnStack_&&n==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((n=u.getMatchingConnection(n.getSourceBlock(),n))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");u.render(),u.rendered=!0,u.getSvgRoot().setAttribute("visibility","visible"),n&&l&&u.positionNearConnection(n,l),l&&n.connect(l),this.markerConnection_=n},s.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var n=this.markerConnection_,l=n.getSourceBlock(),u=l.nextConnection,h=l.previousConnection,_=l.outputConnection;if(_=n.type==s.connectionTypes.INPUT_VALUE&&!(_&&_.targetConnection),!(n!=u||h&&h.targetConnection)||_?n.targetBlock().unplug(!1):n.type==s.connectionTypes.NEXT_STATEMENT&&n!=u?((u=n.targetConnection).getSourceBlock().unplug(!1),h=h?h.targetConnection:null,l.unplug(!0),h&&h.connect(u)):l.unplug(!0),n.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(n=l.getSvgRoot())&&n.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},s.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var n=this.closestConnection_;this.highlightedBlock_=n.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(n,!0)},s.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},s.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},s.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},s.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var n=[];return this.firstMarker_&&n.push(this.firstMarker_),this.lastMarker_&&n.push(this.lastMarker_),n},s.BlockDragger=function(n,l){this.draggingBlock_=n,this.workspace_=l,this.draggedConnectionManager_=new s.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=s.BlockDragger.initIconData_(n)},s.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},s.BlockDragger.initIconData_=function(n){var l=[];n=n.getDescendants(!1);for(var h,u=0;h=n[u];u++){h=h.getIcons();for(var _=0;_<h.length;_++){var b={location:h[_].getIconLocation(),icon:h[_]};l.push(b)}}return l},s.BlockDragger.prototype.startDrag=function(n,l){s.Events.getGroup()||s.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),s.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),s.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(l)&&this.disconnectBlock_(l,n),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},s.BlockDragger.prototype.shouldDisconnect_=function(n){return!!(this.draggingBlock_.getParent()||n&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},s.BlockDragger.prototype.disconnectBlock_=function(n,l){this.draggingBlock_.unplug(n),n=this.pixelsToWorkspaceUnits_(l),n=s.utils.Coordinate.sum(this.startXY_,n),this.draggingBlock_.translate(n.x,n.y),s.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},s.BlockDragger.prototype.fireDragStartEvent_=function(){var n=new(s.Events.get(s.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));s.Events.fire(n)},s.BlockDragger.prototype.drag=function(n,l){l=this.pixelsToWorkspaceUnits_(l);var u=s.utils.Coordinate.sum(this.startXY_,l);this.draggingBlock_.moveDuringDrag(u),this.dragIcons_(l),u=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(n),this.draggedConnectionManager_.update(l,this.dragTarget_),n=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),n!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==u&&(u&&u.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},s.BlockDragger.prototype.endDrag=function(n,l){if(this.drag(n,l),this.dragIconData_=[],this.fireDragEndEvent_(),s.utils.dom.stopTextWidthCache(),s.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))n=this.startXY_;else{var u=(n=this.getNewLocationAfterDrag_(l)).delta;n=n.newLocation}this.draggingBlock_.moveOffDragSurface(n),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),u?this.updateBlockAfterMove_(u):s.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),s.Events.setGroup(!1)},s.BlockDragger.prototype.getNewLocationAfterDrag_=function(n){var l={};return l.delta=this.pixelsToWorkspaceUnits_(n),l.newLocation=s.utils.Coordinate.sum(this.startXY_,l.delta),l},s.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),s.draggingConnections=[],!0)},s.BlockDragger.prototype.updateBlockAfterMove_=function(n){this.draggingBlock_.moveConnections(n.x,n.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},s.BlockDragger.prototype.fireDragEndEvent_=function(){var n=new(s.Events.get(s.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));s.Events.fire(n)},s.BlockDragger.prototype.updateToolboxStyle_=function(n){var l=this.workspace_.getToolbox();if(l){var u=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";n&&"function"==typeof l.removeStyle?l.removeStyle(u):n||"function"!=typeof l.addStyle||l.addStyle(u)}},s.BlockDragger.prototype.fireMoveEvent_=function(){var n=new(s.Events.get(s.Events.BLOCK_MOVE))(this.draggingBlock_);n.oldCoordinate=this.startXY_,n.recordNew(),s.Events.fire(n)},s.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},s.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(n){return n=new s.utils.Coordinate(n.x/this.workspace_.scale,n.y/this.workspace_.scale),this.workspace_.isMutator&&n.scale(1/this.workspace_.options.parentWorkspace.scale),n},s.BlockDragger.prototype.dragIcons_=function(n){for(var l=0;l<this.dragIconData_.length;l++){var u=this.dragIconData_[l];u.icon.setIconLocation(s.utils.Coordinate.sum(u.location,n))}},s.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},s.registry.register(s.registry.Type.BLOCK_DRAGGER,s.registry.DEFAULT,s.BlockDragger),s.IContextMenu=function(){},s.IDraggable=function(){},s.IBubble=function(){},s.Bubble=function(n,l,u,h,_,b){this.workspace_=n,this.content_=l,this.shape_=u,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,u=s.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(u=-u),this.arrow_radians_=s.utils.math.toRadians(u),n.getBubbleCanvas().appendChild(this.createDom_(l,!(!_||!b))),this.setAnchorLocation(h),_&&b||(_=(n=this.content_.getBBox()).width+2*s.Bubble.BORDER_WIDTH,b=n.height+2*s.Bubble.BORDER_WIDTH),this.setBubbleSize(_,b),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},s.Bubble.BORDER_WIDTH=6,s.Bubble.ARROW_THICKNESS=5,s.Bubble.ARROW_ANGLE=20,s.Bubble.ARROW_BEND=4,s.Bubble.ANCHOR_RADIUS=8,s.Bubble.onMouseUpWrapper_=null,s.Bubble.onMouseMoveWrapper_=null,s.Bubble.unbindDragEvents_=function(){s.Bubble.onMouseUpWrapper_&&(s.browserEvents.unbind(s.Bubble.onMouseUpWrapper_),s.Bubble.onMouseUpWrapper_=null),s.Bubble.onMouseMoveWrapper_&&(s.browserEvents.unbind(s.Bubble.onMouseMoveWrapper_),s.Bubble.onMouseMoveWrapper_=null)},s.Bubble.bubbleMouseUp_=function(n){s.Touch.clearTouchIdentifier(),s.Bubble.unbindDragEvents_()},s.Bubble.prototype.rendered_=!1,s.Bubble.prototype.anchorXY_=null,s.Bubble.prototype.relativeLeft_=0,s.Bubble.prototype.relativeTop_=0,s.Bubble.prototype.width_=0,s.Bubble.prototype.height_=0,s.Bubble.prototype.autoLayout_=!0,s.Bubble.prototype.createDom_=function(n,l){this.bubbleGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null);var u={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return s.utils.userAgent.JAVA_FX&&(u={}),u=s.utils.dom.createSvgElement(s.utils.Svg.G,u,this.bubbleGroup_),this.bubbleArrow_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{},u),this.bubbleBack_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:s.Bubble.BORDER_WIDTH,ry:s.Bubble.BORDER_WIDTH},u),l?(this.resizeGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),s.utils.dom.createSvgElement(s.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(l=2*s.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),s.utils.dom.createSvgElement(s.utils.Svg.LINE,{class:"blocklyResizeLine",x1:l/3,y1:l-1,x2:l-1,y2:l/3},this.resizeGroup_),s.utils.dom.createSvgElement(s.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*l/3,y1:l-1,x2:l-1,y2:2*l/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=s.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=s.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(n),this.bubbleGroup_},s.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},s.Bubble.prototype.setSvgId=function(n){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=n)},s.Bubble.prototype.bubbleMouseDown_=function(n){var l=this.workspace_.getGesture(n);l&&l.handleBubbleStart(n,this)},s.Bubble.prototype.showContextMenu=function(n){},s.Bubble.prototype.isDeletable=function(){return!1},s.Bubble.prototype.setDeleteStyle=function(n){},s.Bubble.prototype.resizeMouseDown_=function(n){this.promote(),s.Bubble.unbindDragEvents_(),s.utils.isRightButton(n)||(this.workspace_.startDrag(n,new s.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),s.Bubble.onMouseUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",this,s.Bubble.bubbleMouseUp_),s.Bubble.onMouseMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),s.hideChaff()),n.stopPropagation()},s.Bubble.prototype.resizeMouseMove_=function(n){this.autoLayout_=!1,n=this.workspace_.moveDrag(n),this.setBubbleSize(this.workspace_.RTL?-n.x:n.x,n.y),this.workspace_.RTL&&this.positionBubble_()},s.Bubble.prototype.registerResizeEvent=function(n){this.resizeCallback_=n},s.Bubble.prototype.registerMoveEvent=function(n){this.moveCallback_=n},s.Bubble.prototype.promote=function(){var n=this.bubbleGroup_.parentNode;return n.lastChild!==this.bubbleGroup_&&(n.appendChild(this.bubbleGroup_),!0)},s.Bubble.prototype.setAnchorLocation=function(n){this.anchorXY_=n,this.rendered_&&this.positionBubble_()},s.Bubble.prototype.layoutBubble_=function(){var n=this.workspace_.getMetricsManager().getViewMetrics(!0),l=this.getOptimalRelativeLeft_(n),u=this.getOptimalRelativeTop_(n),h=this.shape_.getBBox(),_={x:l,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},b={x:-this.width_-30,y:u};u={x:h.width,y:u};var M={x:l,y:h.height};l=h.width<h.height?u:M,h=h.width<h.height?M:u,u=this.getOverlap_(_,n),M=this.getOverlap_(b,n);var k=this.getOverlap_(l,n);n=this.getOverlap_(h,n),u==(n=Math.max(u,M,k,n))?(this.relativeLeft_=_.x,this.relativeTop_=_.y):M==n?(this.relativeLeft_=b.x,this.relativeTop_=b.y):k==n?(this.relativeLeft_=l.x,this.relativeTop_=l.y):(this.relativeLeft_=h.x,this.relativeTop_=h.y)},s.Bubble.prototype.getOverlap_=function(n,l){var u=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x+this.anchorXY_.x;return n=n.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(u+this.width_,l.left+l.width)-Math.max(u,l.left))*(Math.min(n+this.height_,l.top+l.height)-Math.max(n,l.top))/(this.width_*this.height_)))},s.Bubble.prototype.getOptimalRelativeLeft_=function(n){var l=-this.width_/4;if(this.width_>n.width)return l;if(this.workspace_.RTL)var u=this.anchorXY_.x-l,h=u-this.width_,_=n.left+n.width,b=n.left+s.Scrollbar.scrollbarThickness/this.workspace_.scale;else u=(h=l+this.anchorXY_.x)+this.width_,b=n.left,_=n.left+n.width-s.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?h<b?l=-(b-this.anchorXY_.x+this.width_):u>_&&(l=-(_-this.anchorXY_.x)):h<b?l=b-this.anchorXY_.x:u>_&&(l=_-this.anchorXY_.x-this.width_),l},s.Bubble.prototype.getOptimalRelativeTop_=function(n){var l=-this.height_/4;if(this.height_>n.height)return l;var u=this.anchorXY_.y+l,_=n.top;n=n.top+n.height-s.Scrollbar.scrollbarThickness/this.workspace_.scale;var b=this.anchorXY_.y;return u<_?l=_-b:u+this.height_>n&&(l=n-b-this.height_),l},s.Bubble.prototype.positionBubble_=function(){var n=this.anchorXY_.x;this.moveTo(n=this.workspace_.RTL?n-(this.relativeLeft_+this.width_):n+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},s.Bubble.prototype.moveTo=function(n,l){this.bubbleGroup_.setAttribute("transform","translate("+n+","+l+")")},s.Bubble.prototype.setDragging=function(n){!n&&this.moveCallback_&&this.moveCallback_()},s.Bubble.prototype.getBubbleSize=function(){return new s.utils.Size(this.width_,this.height_)},s.Bubble.prototype.setBubbleSize=function(n,l){var u=2*s.Bubble.BORDER_WIDTH;n=Math.max(n,u+45),l=Math.max(l,u+20),this.width_=n,this.height_=l,this.bubbleBack_.setAttribute("width",n),this.bubbleBack_.setAttribute("height",l),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*s.Bubble.BORDER_WIDTH+","+(l-u)+") scale(-1 1)":"translate("+(n-u)+","+(l-u)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},s.Bubble.prototype.renderArrow_=function(){var n=[],l=this.width_/2,u=this.height_/2,h=-this.relativeLeft_,_=-this.relativeTop_;if(l==h&&u==_)n.push("M "+l+","+u);else{_-=u,h-=l,this.workspace_.RTL&&(h*=-1);var b=Math.sqrt(_*_+h*h),M=Math.acos(h/b);0>_&&(M=2*Math.PI-M);var k=M+Math.PI/2;k>2*Math.PI&&(k-=2*Math.PI);var H=Math.sin(k),U=Math.cos(k),V=this.getBubbleSize();k=(V.width+V.height)/s.Bubble.ARROW_THICKNESS,k=Math.min(k,V.width,V.height)/4,h=l+(V=1-s.Bubble.ANCHOR_RADIUS/b)*h,_=u+V*_,V=l+k*U;var J=u+k*H;l-=k*U,u-=k*H,(H=M+this.arrow_radians_)>2*Math.PI&&(H-=2*Math.PI),M=Math.sin(H)*b/s.Bubble.ARROW_BEND,b=Math.cos(H)*b/s.Bubble.ARROW_BEND,n.push("M"+V+","+J),n.push("C"+(V+b)+","+(J+M)+" "+h+","+_+" "+h+","+_),n.push("C"+h+","+_+" "+(l+b)+","+(u+M)+" "+l+","+u)}n.push("z"),this.bubbleArrow_.setAttribute("d",n.join(" "))},s.Bubble.prototype.setColour=function(n){this.bubbleBack_.setAttribute("fill",n),this.bubbleArrow_.setAttribute("fill",n)},s.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&s.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&s.browserEvents.unbind(this.onMouseDownResizeWrapper_),s.Bubble.unbindDragEvents_(),s.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},s.Bubble.prototype.moveDuringDrag=function(n,l){n?n.translateSurface(l.x,l.y):this.moveTo(l.x,l.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-l.x-this.width_:l.x-this.anchorXY_.x,this.relativeTop_=l.y-this.anchorXY_.y,this.renderArrow_()},s.Bubble.prototype.getRelativeToSurfaceXY=function(){return new s.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},s.Bubble.prototype.setAutoLayout=function(n){this.autoLayout_=n},s.Bubble.textToDom=function(n){var l=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:s.Bubble.BORDER_WIDTH},null);n=n.split("\n");for(var u=0;u<n.length;u++){var h=s.utils.dom.createSvgElement(s.utils.Svg.TSPAN,{dy:"1em",x:s.Bubble.BORDER_WIDTH},l),_=document.createTextNode(n[u]);h.appendChild(_)}return l},s.Bubble.createNonEditableBubble=function(n,l,u){if((u=new s.Bubble(l.workspace,n,l.pathObject.svgPath,u,null,null)).setSvgId(l.id),l.RTL){l=n.getBBox().width;for(var _,h=0;_=n.childNodes[h];h++)_.setAttribute("text-anchor","end"),_.setAttribute("x",l+s.Bubble.BORDER_WIDTH)}return u},s.Events.CommentBase=function(n){this.commentId=(this.isBlank=void 0===n)?"":n.id,this.workspaceId=this.isBlank?"":n.workspace.id,this.group=s.Events.getGroup(),this.recordUndo=s.Events.recordUndo},s.utils.object.inherits(s.Events.CommentBase,s.Events.Abstract),s.Events.CommentBase.prototype.toJson=function(){var n=s.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(n.commentId=this.commentId),n},s.Events.CommentBase.prototype.fromJson=function(n){s.Events.CommentBase.superClass_.fromJson.call(this,n),this.commentId=n.commentId},s.Events.CommentChange=function(n,l,u){s.Events.CommentChange.superClass_.constructor.call(this,n),n&&(this.oldContents_=void 0===l?"":l,this.newContents_=void 0===u?"":u)},s.utils.object.inherits(s.Events.CommentChange,s.Events.CommentBase),s.Events.CommentChange.prototype.type=s.Events.COMMENT_CHANGE,s.Events.CommentChange.prototype.toJson=function(){var n=s.Events.CommentChange.superClass_.toJson.call(this);return n.oldContents=this.oldContents_,n.newContents=this.newContents_,n},s.Events.CommentChange.prototype.fromJson=function(n){s.Events.CommentChange.superClass_.fromJson.call(this,n),this.oldContents_=n.oldContents,this.newContents_=n.newContents},s.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},s.Events.CommentChange.prototype.run=function(n){var l=this.getEventWorkspace_().getCommentById(this.commentId);l?l.setContent(n?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},s.Events.CommentCreate=function(n){s.Events.CommentCreate.superClass_.constructor.call(this,n),n&&(this.xml=n.toXmlWithXY())},s.utils.object.inherits(s.Events.CommentCreate,s.Events.CommentBase),s.Events.CommentCreate.prototype.type=s.Events.COMMENT_CREATE,s.Events.CommentCreate.prototype.toJson=function(){var n=s.Events.CommentCreate.superClass_.toJson.call(this);return n.xml=s.Xml.domToText(this.xml),n},s.Events.CommentCreate.prototype.fromJson=function(n){s.Events.CommentCreate.superClass_.fromJson.call(this,n),this.xml=s.Xml.textToDom(n.xml)},s.Events.CommentCreate.prototype.run=function(n){s.Events.CommentCreateDeleteHelper(this,n)},s.Events.CommentCreateDeleteHelper=function(n,l){var u=n.getEventWorkspace_();l?((l=s.utils.xml.createElement("xml")).appendChild(n.xml),s.Xml.domToWorkspace(l,u)):(u=u.getCommentById(n.commentId))?u.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+n.commentId)},s.Events.CommentDelete=function(n){s.Events.CommentDelete.superClass_.constructor.call(this,n),n&&(this.xml=n.toXmlWithXY())},s.utils.object.inherits(s.Events.CommentDelete,s.Events.CommentBase),s.Events.CommentDelete.prototype.type=s.Events.COMMENT_DELETE,s.Events.CommentDelete.prototype.toJson=function(){return s.Events.CommentDelete.superClass_.toJson.call(this)},s.Events.CommentDelete.prototype.fromJson=function(n){s.Events.CommentDelete.superClass_.fromJson.call(this,n)},s.Events.CommentDelete.prototype.run=function(n){s.Events.CommentCreateDeleteHelper(this,!n)},s.Events.CommentMove=function(n){s.Events.CommentMove.superClass_.constructor.call(this,n),n&&(this.comment_=n,this.oldCoordinate_=n.getXY(),this.newCoordinate_=null)},s.utils.object.inherits(s.Events.CommentMove,s.Events.CommentBase),s.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},s.Events.CommentMove.prototype.type=s.Events.COMMENT_MOVE,s.Events.CommentMove.prototype.setOldCoordinate=function(n){this.oldCoordinate_=n},s.Events.CommentMove.prototype.toJson=function(){var n=s.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(n.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(n.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),n},s.Events.CommentMove.prototype.fromJson=function(n){if(s.Events.CommentMove.superClass_.fromJson.call(this,n),n.oldCoordinate){var l=n.oldCoordinate.split(",");this.oldCoordinate_=new s.utils.Coordinate(Number(l[0]),Number(l[1]))}n.newCoordinate&&(l=n.newCoordinate.split(","),this.newCoordinate_=new s.utils.Coordinate(Number(l[0]),Number(l[1])))},s.Events.CommentMove.prototype.isNull=function(){return s.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},s.Events.CommentMove.prototype.run=function(n){var l=this.getEventWorkspace_().getCommentById(this.commentId);if(l){n=n?this.newCoordinate_:this.oldCoordinate_;var u=l.getXY();l.moveBy(n.x-u.x,n.y-u.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_CREATE,s.Events.CommentCreate),s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_CHANGE,s.Events.CommentChange),s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_MOVE,s.Events.CommentMove),s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_DELETE,s.Events.CommentDelete),s.BubbleDragger=function(n,l){this.draggingBubble_=n,this.workspace_=l,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=s.utils.is3dSupported()&&l.getBlockDragSurface()?l.getBlockDragSurface():null},s.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},s.BubbleDragger.prototype.startBubbleDrag=function(){s.Events.getGroup()||s.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},s.BubbleDragger.prototype.dragBubble=function(n,l){l=this.pixelsToWorkspaceUnits_(l),l=s.utils.Coordinate.sum(this.startXY_,l),this.draggingBubble_.moveDuringDrag(this.dragSurface_,l),l=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(n),n=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),n!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==l&&(l&&l.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},s.BubbleDragger.prototype.shouldDelete_=function(n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,s.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.draggingBubble_,!1)},s.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},s.BubbleDragger.prototype.endBubbleDrag=function(n,l){this.dragBubble(n,l),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?n=this.startXY_:(n=this.pixelsToWorkspaceUnits_(l),n=s.utils.Coordinate.sum(this.startXY_,n)),this.draggingBubble_.moveTo(n.x,n.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),s.Events.setGroup(!1)},s.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var n=new(s.Events.get(s.Events.COMMENT_MOVE))(this.draggingBubble_);n.setOldCoordinate(this.startXY_),n.recordNew(),s.Events.fire(n)}},s.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(n){return n=new s.utils.Coordinate(n.x/this.workspace_.scale,n.y/this.workspace_.scale),this.workspace_.isMutator&&n.scale(1/this.workspace_.options.parentWorkspace.scale),n},s.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},s.Events.Click=function(n,l,u){s.Events.Click.superClass_.constructor.call(this,n?n.workspace.id:l),this.blockId=n?n.id:null,this.targetType=u},s.utils.object.inherits(s.Events.Click,s.Events.UiBase),s.Events.Click.prototype.type=s.Events.CLICK,s.Events.Click.prototype.toJson=function(){var n=s.Events.Click.superClass_.toJson.call(this);return n.targetType=this.targetType,this.blockId&&(n.blockId=this.blockId),n},s.Events.Click.prototype.fromJson=function(n){s.Events.Click.superClass_.fromJson.call(this,n),this.targetType=n.targetType,this.blockId=n.blockId},s.registry.register(s.registry.Type.EVENT,s.Events.CLICK,s.Events.Click),s.WorkspaceDragger=function(n){this.workspace_=n,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new s.utils.Coordinate(n.scrollX,n.scrollY)},s.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},s.WorkspaceDragger.prototype.startDrag=function(){s.selected&&s.selected.unselect(),this.workspace_.setupDragSurface()},s.WorkspaceDragger.prototype.endDrag=function(n){this.drag(n),this.workspace_.resetDragSurface()},s.WorkspaceDragger.prototype.drag=function(n){if(n=s.utils.Coordinate.sum(this.startScrollXY_,n),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(n.x,n.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(n.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,n.y)}},s.Gesture=function(n,l){this.mouseDownXY_=null,this.currentDragDeltaXY_=new s.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=l,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=n,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!s.DRAG_STACK},s.Gesture.prototype.dispose=function(){s.Touch.clearTouchIdentifier(),s.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&s.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&s.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},s.Gesture.prototype.updateFromEvent_=function(n){var l=new s.utils.Coordinate(n.clientX,n.clientY);this.updateDragDelta_(l)&&(this.updateIsDragging_(),s.longStop_()),this.mostRecentEvent_=n},s.Gesture.prototype.updateDragDelta_=function(n){return this.currentDragDeltaXY_=s.utils.Coordinate.difference(n,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=s.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?s.FLYOUT_DRAG_RADIUS:s.DRAG_RADIUS))},s.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),s.Events.getGroup()||s.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},s.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},s.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},s.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new s.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},s.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},s.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(s.registry.getClassFromOptions(s.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},s.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new s.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},s.Gesture.prototype.doStart=function(n){s.utils.isTargetInput(n)?this.cancel():(this.hasStarted_=!0,s.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),s.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=n,s.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),s.utils.isRightButton(n)?this.handleRightClick(n):("touchstart"!=n.type.toLowerCase()&&"pointerdown"!=n.type.toLowerCase()||"mouse"==n.pointerType||s.longStart(n,this),this.mouseDownXY_=new s.utils.Coordinate(n.clientX,n.clientY),this.healStack_=n.altKey||n.ctrlKey||n.metaKey,this.bindMouseEvents(n)))},s.Gesture.prototype.bindMouseEvents=function(n){this.onMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),n.preventDefault(),n.stopPropagation()},s.Gesture.prototype.handleMove=function(n){this.updateFromEvent_(n),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),n.preventDefault(),n.stopPropagation()},s.Gesture.prototype.handleUp=function(n){this.updateFromEvent_(n),s.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(n,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(n,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(n),n.preventDefault(),n.stopPropagation(),this.dispose())},s.Gesture.prototype.cancel=function(){this.isEnding_||(s.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},s.Gesture.prototype.handleRightClick=function(n){this.targetBlock_?(this.bringBlockToFront_(),s.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(n)):this.startBubble_?this.startBubble_.showContextMenu(n):this.startWorkspace_&&!this.flyout_&&(s.hideChaff(),this.startWorkspace_.showContextMenu(n)),n.preventDefault(),n.stopPropagation(),this.dispose()},s.Gesture.prototype.handleWsStart=function(n,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(l),this.mostRecentEvent_=n,this.doStart(n)},s.Gesture.prototype.fireWorkspaceClick_=function(n){s.Events.fire(new(s.Events.get(s.Events.CLICK))(null,n.id,"workspace"))},s.Gesture.prototype.handleFlyoutStart=function(n,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(l),this.handleWsStart(n,l.getWorkspace())},s.Gesture.prototype.handleBlockStart=function(n,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(l),this.mostRecentEvent_=n},s.Gesture.prototype.handleBubbleStart=function(n,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(l),this.mostRecentEvent_=n},s.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},s.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},s.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(s.Events.getGroup()||s.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var n=new(s.Events.get(s.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");s.Events.fire(n)}this.bringBlockToFront_(),s.Events.setGroup(!1)},s.Gesture.prototype.doWorkspaceClick_=function(n){n=this.creatorWorkspace_,s.selected&&s.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||n)},s.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},s.Gesture.prototype.setStartField=function(n){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=n)},s.Gesture.prototype.setStartBubble=function(n){this.startBubble_||(this.startBubble_=n)},s.Gesture.prototype.setStartBlock=function(n){this.startBlock_||this.startBubble_||(this.startBlock_=n,n.isInFlyout&&n!=n.getRootBlock()?this.setTargetBlock_(n.getRootBlock()):this.setTargetBlock_(n))},s.Gesture.prototype.setTargetBlock_=function(n){n.isShadow()?this.setTargetBlock_(n.getParent()):this.targetBlock_=n},s.Gesture.prototype.setStartWorkspace_=function(n){this.startWorkspace_||(this.startWorkspace_=n)},s.Gesture.prototype.setStartFlyout_=function(n){this.flyout_||(this.flyout_=n)},s.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},s.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},s.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},s.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},s.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},s.Gesture.prototype.hasStarted=function(){return this.hasStarted_},s.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},s.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},s.Gesture.inProgress=function(){for(var u,n=s.Workspace.getAll(),l=0;u=n[l];l++)if(u.currentGesture_)return!0;return!1},s.IRegistrable=function(){},s.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},s.Marker.prototype.setDrawer=function(n){this.drawer_=n},s.Marker.prototype.getDrawer=function(){return this.drawer_},s.Marker.prototype.getCurNode=function(){return this.curNode_},s.Marker.prototype.setCurNode=function(n){var l=this.curNode_;this.curNode_=n,this.drawer_&&this.drawer_.draw(l,this.curNode_)},s.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},s.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},s.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},s.Cursor=function(){s.Cursor.superClass_.constructor.call(this),this.type="cursor"},s.utils.object.inherits(s.Cursor,s.Marker),s.Cursor.prototype.next=function(){var n=this.getCurNode();if(!n)return null;for(n=n.next();n&&n.next()&&(n.getType()==s.ASTNode.types.NEXT||n.getType()==s.ASTNode.types.BLOCK);)n=n.next();return n&&this.setCurNode(n),n},s.Cursor.prototype.in=function(){var n=this.getCurNode();return n?((n.getType()==s.ASTNode.types.PREVIOUS||n.getType()==s.ASTNode.types.OUTPUT)&&(n=n.next()),(n=n.in())&&this.setCurNode(n),n):null},s.Cursor.prototype.prev=function(){var n=this.getCurNode();if(!n)return null;for(n=n.prev();n&&n.prev()&&(n.getType()==s.ASTNode.types.NEXT||n.getType()==s.ASTNode.types.BLOCK);)n=n.prev();return n&&this.setCurNode(n),n},s.Cursor.prototype.out=function(){var n=this.getCurNode();return n?((n=n.out())&&n.getType()==s.ASTNode.types.BLOCK&&(n=n.prev()||n),n&&this.setCurNode(n),n):null},s.registry.register(s.registry.Type.CURSOR,s.registry.DEFAULT,s.Cursor),s.MarkerManager=function(n){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=n},s.MarkerManager.LOCAL_MARKER="local_marker_1",s.MarkerManager.prototype.registerMarker=function(n,l){this.markers_[n]&&this.unregisterMarker(n),l.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,l)),this.setMarkerSvg(l.getDrawer().createDom()),this.markers_[n]=l},s.MarkerManager.prototype.unregisterMarker=function(n){var l=this.markers_[n];if(!l)throw Error("Marker with ID "+n+" does not exist. Can only unregister markers that exist.");l.dispose(),delete this.markers_[n]},s.MarkerManager.prototype.getCursor=function(){return this.cursor_},s.MarkerManager.prototype.getMarker=function(n){return this.markers_[n]||null},s.MarkerManager.prototype.setCursor=function(n){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=n)&&(n=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(n),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},s.MarkerManager.prototype.setCursorSvg=function(n){n?(this.workspace_.getBlockCanvas().appendChild(n),this.cursorSvg_=n):this.cursorSvg_=null},s.MarkerManager.prototype.setMarkerSvg=function(n){n?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(n,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(n)):this.markerSvg_=null},s.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},s.MarkerManager.prototype.dispose=function(){for(var u,n=Object.keys(this.markers_),l=0;u=n[l];l++)this.unregisterMarker(u);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},s.WidgetDiv={},s.WidgetDiv.owner_=null,s.WidgetDiv.dispose_=null,s.WidgetDiv.rendererClassName_="",s.WidgetDiv.themeClassName_="",s.WidgetDiv.createDom=function(){s.WidgetDiv.DIV||(s.WidgetDiv.DIV=document.createElement("div"),s.WidgetDiv.DIV.className="blocklyWidgetDiv",(s.parentContainer||document.body).appendChild(s.WidgetDiv.DIV))},s.WidgetDiv.show=function(n,l,u){s.WidgetDiv.hide(),s.WidgetDiv.owner_=n,s.WidgetDiv.dispose_=u,(n=s.WidgetDiv.DIV).style.direction=l?"rtl":"ltr",n.style.display="block",l=s.getMainWorkspace(),s.WidgetDiv.rendererClassName_=l.getRenderer().getClassName(),s.WidgetDiv.themeClassName_=l.getTheme().getClassName(),s.utils.dom.addClass(n,s.WidgetDiv.rendererClassName_),s.utils.dom.addClass(n,s.WidgetDiv.themeClassName_)},s.WidgetDiv.hide=function(){if(s.WidgetDiv.isVisible()){s.WidgetDiv.owner_=null;var n=s.WidgetDiv.DIV;n.style.display="none",n.style.left="",n.style.top="",s.WidgetDiv.dispose_&&s.WidgetDiv.dispose_(),s.WidgetDiv.dispose_=null,n.textContent="",s.WidgetDiv.rendererClassName_&&(s.utils.dom.removeClass(n,s.WidgetDiv.rendererClassName_),s.WidgetDiv.rendererClassName_=""),s.WidgetDiv.themeClassName_&&(s.utils.dom.removeClass(n,s.WidgetDiv.themeClassName_),s.WidgetDiv.themeClassName_=""),s.getMainWorkspace().markFocused()}},s.WidgetDiv.isVisible=function(){return!!s.WidgetDiv.owner_},s.WidgetDiv.hideIfOwner=function(n){s.WidgetDiv.owner_==n&&s.WidgetDiv.hide()},s.WidgetDiv.positionInternal_=function(n,l,u){s.WidgetDiv.DIV.style.left=n+"px",s.WidgetDiv.DIV.style.top=l+"px",s.WidgetDiv.DIV.style.height=u+"px"},s.WidgetDiv.positionWithAnchor=function(n,l,u,h){var _=s.WidgetDiv.calculateY_(n,l,u);n=s.WidgetDiv.calculateX_(n,l,u,h),0>_?s.WidgetDiv.positionInternal_(n,0,u.height+_):s.WidgetDiv.positionInternal_(n,_,u.height)},s.WidgetDiv.calculateX_=function(n,l,u,h){return h?(l=Math.max(l.right-u.width,n.left),Math.min(l,n.right-u.width)):(l=Math.min(l.left,n.right-u.width),Math.max(l,n.left))},s.WidgetDiv.calculateY_=function(n,l,u){return l.bottom+u.height>=n.bottom?l.top-u.height:l.bottom},s.Field=function(n,l,u){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new s.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,u&&this.configure_(u),this.setValue(n),l&&this.setValidator(l)},s.Field.prototype.DEFAULT_VALUE=null,s.Field.prototype.name=void 0,s.Field.prototype.disposed=!1,s.Field.prototype.maxDisplayLength=50,s.Field.prototype.sourceBlock_=null,s.Field.prototype.isDirty_=!0,s.Field.prototype.visible_=!0,s.Field.prototype.clickTarget_=null,s.Field.NBSP="\xa0",s.Field.prototype.EDITABLE=!0,s.Field.prototype.SERIALIZABLE=!1,s.Field.prototype.configure_=function(n){var l=n.tooltip;"string"==typeof l&&(l=s.utils.replaceMessageReferences(n.tooltip)),l&&this.setTooltip(l)},s.Field.prototype.setSourceBlock=function(n){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=n},s.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},s.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},s.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},s.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},s.Field.prototype.initModel=function(){},s.Field.prototype.createBorderRect_=function(){this.borderRect_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},s.Field.prototype.createTextElement_=function(){this.textElement_=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},s.Field.prototype.bindEvents_=function(){s.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=s.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},s.Field.prototype.fromXml=function(n){this.setValue(n.textContent)},s.Field.prototype.toXml=function(n){return n.textContent=this.getValue(),n},s.Field.prototype.dispose=function(){s.DropDownDiv.hideIfOwner(this),s.WidgetDiv.hideIfOwner(this),s.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&s.browserEvents.unbind(this.mouseDownWrapper_),s.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},s.Field.prototype.updateEditable=function(){var n=this.fieldGroup_;this.EDITABLE&&n&&(this.sourceBlock_.isEditable()?(s.utils.dom.addClass(n,"blocklyEditableText"),s.utils.dom.removeClass(n,"blocklyNonEditableText"),n.style.cursor=this.CURSOR):(s.utils.dom.addClass(n,"blocklyNonEditableText"),s.utils.dom.removeClass(n,"blocklyEditableText"),n.style.cursor=""))},s.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},s.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},s.Field.prototype.isSerializable=function(){var n=!1;return this.name&&(this.SERIALIZABLE?n=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),n=!0)),n},s.Field.prototype.isVisible=function(){return this.visible_},s.Field.prototype.setVisible=function(n){if(this.visible_!=n){this.visible_=n;var l=this.getSvgRoot();l&&(l.style.display=n?"block":"none")}},s.Field.prototype.setValidator=function(n){this.validator_=n},s.Field.prototype.getValidator=function(){return this.validator_},s.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},s.Field.prototype.applyColour=function(){},s.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},s.Field.prototype.showEditor=function(n){this.isClickable()&&this.showEditor_(n)},s.Field.prototype.updateSize_=function(n){var l=this.getConstants(),u=2*(n=null!=n?n:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),h=l.FIELD_TEXT_HEIGHT,_=0;this.textElement_&&(u+=_=s.utils.dom.getFastTextWidth(this.textElement_,l.FIELD_TEXT_FONTSIZE,l.FIELD_TEXT_FONTWEIGHT,l.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(h=Math.max(h,l.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=h,this.size_.width=u,this.positionTextElement_(n,_),this.positionBorderRect_()},s.Field.prototype.positionTextElement_=function(n,l){if(this.textElement_){var u=this.getConstants(),h=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-l-n:n),this.textElement_.setAttribute("y",u.FIELD_TEXT_BASELINE_CENTER?h:h-u.FIELD_TEXT_HEIGHT/2+u.FIELD_TEXT_BASELINE)}},s.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},s.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new s.utils.Size(0,0)},s.Field.prototype.getScaledBBox=function(){if(this.borderRect_)n=this.borderRect_.getBoundingClientRect(),u=s.utils.style.getPageOffset(this.borderRect_),h=n.width,n=n.height;else{var n=this.sourceBlock_.getHeightWidth(),l=this.sourceBlock_.workspace.scale,u=this.getAbsoluteXY_(),h=n.width*l;n=n.height*l,s.utils.userAgent.GECKO?(u.x+=1.5*l,u.y+=1.5*l):s.utils.userAgent.EDGE||s.utils.userAgent.IE||(u.x-=.5*l,u.y-=.5*l),h+=1*l,n+=1*l}return new s.utils.Rect(u.y,u.y+n,u.x,u.x+h)},s.Field.prototype.getDisplayText_=function(){var n=this.getText();return n?(n.length>this.maxDisplayLength&&(n=n.substring(0,this.maxDisplayLength-2)+"\u2026"),n=n.replace(/\s/g,s.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(n+="\u200f"),n):s.Field.NBSP},s.Field.prototype.getText=function(){if(this.getText_){var n=this.getText_.call(this);if(null!==n)return String(n)}return String(this.getValue())},s.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},s.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},s.Field.prototype.setValue=function(n){if(null!==n){var l=this.doClassValidation_(n);if(!((n=this.processValidation_(n,l))instanceof Error)){if((l=this.getValidator())&&(l=l.call(this,n),(n=this.processValidation_(n,l))instanceof Error))return;if(!(l=this.sourceBlock_)||!l.disposed){var u=this.getValue();u===n?this.doValueUpdate_(n):(l&&s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(l,"field",this.name||null,u,n)),this.doValueUpdate_(n),this.isDirty_&&this.forceRerender())}}}},s.Field.prototype.processValidation_=function(n,l){return null===l?(this.doValueInvalid_(n),this.isDirty_&&this.forceRerender(),Error()):(void 0!==l&&(n=l),n)},s.Field.prototype.getValue=function(){return this.value_},s.Field.prototype.doClassValidation_=function(n){return null==n?null:n},s.Field.prototype.doValueUpdate_=function(n){this.value_=n,this.isDirty_=!0},s.Field.prototype.doValueInvalid_=function(n){},s.Field.prototype.onMouseDown_=function(n){this.sourceBlock_&&this.sourceBlock_.workspace&&(n=this.sourceBlock_.workspace.getGesture(n))&&n.setStartField(this)},s.Field.prototype.setTooltip=function(n){n||""===n||(n=this.sourceBlock_);var l=this.getClickTarget_();l?l.tooltip=n:this.tooltip_=n},s.Field.prototype.getTooltip=function(){var n=this.getClickTarget_();return s.Tooltip.getTooltipOfObject(n||{tooltip:this.tooltip_})},s.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},s.Field.prototype.getAbsoluteXY_=function(){return s.utils.style.getPageOffset(this.getClickTarget_())},s.Field.prototype.referencesVariables=function(){return!1},s.Field.prototype.getParentInput=function(){for(var n=null,l=this.sourceBlock_,u=l.inputList,h=0;h<l.inputList.length;h++)for(var _=u[h],b=_.fieldRow,M=0;M<b.length;M++)if(b[M]===this){n=_;break}return n},s.Field.prototype.getFlipRtl=function(){return!1},s.Field.prototype.isTabNavigable=function(){return!1},s.Field.prototype.onShortcut=function(n){return!1},s.Field.prototype.setCursorSvg=function(n){n?(this.fieldGroup_.appendChild(n),this.cursorSvg_=n):this.cursorSvg_=null},s.Field.prototype.setMarkerSvg=function(n){n?(this.fieldGroup_.appendChild(n),this.markerSvg_=n):this.markerSvg_=null},s.Field.prototype.updateMarkers_=function(){var n=this.sourceBlock_.workspace;n.keyboardAccessibilityMode&&this.cursorSvg_&&n.getCursor().draw(),n.keyboardAccessibilityMode&&this.markerSvg_&&n.getMarker(s.MarkerManager.LOCAL_MARKER).draw()},s.FieldLabel=function(n,l,u){this.class_=null,s.FieldLabel.superClass_.constructor.call(this,n,null,u),u||(this.class_=l||null)},s.utils.object.inherits(s.FieldLabel,s.Field),s.FieldLabel.prototype.DEFAULT_VALUE="",s.FieldLabel.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.text);return new s.FieldLabel(l,void 0,n)},s.FieldLabel.prototype.EDITABLE=!1,s.FieldLabel.prototype.configure_=function(n){s.FieldLabel.superClass_.configure_.call(this,n),this.class_=n.class},s.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&s.utils.dom.addClass(this.textElement_,this.class_)},s.FieldLabel.prototype.doClassValidation_=function(n){return null==n?null:String(n)},s.FieldLabel.prototype.setClass=function(n){this.textElement_&&(this.class_&&s.utils.dom.removeClass(this.textElement_,this.class_),n&&s.utils.dom.addClass(this.textElement_,n)),this.class_=n},s.fieldRegistry.register("field_label",s.FieldLabel),s.Input=function(n,l,u,h){if(n!=s.inputTypes.DUMMY&&!l)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=n,this.name=l,this.sourceBlock_=u,this.connection=h,this.fieldRow=[]},s.Input.prototype.align=s.constants.ALIGN.LEFT,s.Input.prototype.visible_=!0,s.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},s.Input.prototype.appendField=function(n,l){return this.insertFieldAt(this.fieldRow.length,n,l),this},s.Input.prototype.insertFieldAt=function(n,l,u){if(0>n||n>this.fieldRow.length)throw Error("index "+n+" out of bounds.");return(l||""==l&&u)&&("string"==typeof l&&(l=s.fieldRegistry.fromJson({type:"field_label",text:l})),l.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(l.init(),l.applyColour()),l.name=u,l.setVisible(this.isVisible()),l.prefixField&&(n=this.insertFieldAt(n,l.prefixField)),this.fieldRow.splice(n,0,l),++n,l.suffixField&&(n=this.insertFieldAt(n,l.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),n},s.Input.prototype.removeField=function(n,l){for(var h,u=0;h=this.fieldRow[u];u++)if(h.name===n)return h.dispose(),this.fieldRow.splice(u,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(l)return!1;throw Error('Field "'+n+'" not found.')},s.Input.prototype.isVisible=function(){return this.visible_},s.Input.prototype.setVisible=function(n){var l=[];if(this.visible_==n)return l;this.visible_=n;for(var h,u=0;h=this.fieldRow[u];u++)h.setVisible(n);return this.connection&&(this.connection=this.connection,n?l=this.connection.startTrackingAll():this.connection.stopTrackingAll(),u=this.connection.targetBlock())&&(u.getSvgRoot().style.display=n?"block":"none"),l},s.Input.prototype.markDirty=function(){for(var l,n=0;l=this.fieldRow[n];n++)l.markDirty()},s.Input.prototype.setCheck=function(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(n),this},s.Input.prototype.setAlign=function(n){return this.align=n,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},s.Input.prototype.setShadowDom=function(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(n),this},s.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},s.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var n=0;n<this.fieldRow.length;n++)this.fieldRow[n].init()},s.Input.prototype.dispose=function(){for(var l,n=0;l=this.fieldRow[n];n++)l.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},s.Block=function(n,l,u){if(s.Generator&&void 0!==s.Generator.prototype[l])throw Error('Block prototypeName "'+l+'" conflicts with Blockly.Generator members.');if(this.id=u&&!n.getBlockById(u)?u:s.utils.genUid(),n.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new s.utils.Size(160,80)},this.xy_=new s.utils.Coordinate(0,0),this.workspace=n,this.isInFlyout=n.isFlyout,this.isInMutator=n.isMutator,this.RTL=n.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,l){if(this.type=l,!(u=s.Blocks[l])||"object"!=typeof u)throw TypeError("Unknown block type: "+l);s.utils.object.mixin(this,u)}n.addTopBlock(this),n.addTypedBlock(this),(n=s.Events.getGroup())||s.Events.setGroup(!0),l=s.Events.recordUndo;try{"function"==typeof this.init&&(s.Events.recordUndo=!1,this.init(),s.Events.recordUndo=l),s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(this))}finally{n||s.Events.setGroup(!1),s.Events.recordUndo=l}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},s.Block.COLLAPSED_INPUT_NAME=s.constants.COLLAPSED_INPUT_NAME,s.Block.COLLAPSED_FIELD_NAME=s.constants.COLLAPSED_FIELD_NAME,s.Block.prototype.data=null,s.Block.prototype.disposed=!1,s.Block.prototype.hue_=null,s.Block.prototype.colour_="#000000",s.Block.prototype.styleName_="",s.Block.prototype.dispose=function(n){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(n),s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_DELETE))(this)),s.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),s.selected==this&&(s.selected=null);for(var l=this.childBlocks_.length-1;0<=l;l--)this.childBlocks_[l].dispose(!1);l=0;for(var u;u=this.inputList[l];l++)u.dispose();this.inputList.length=0;var _,h=this.getConnections_(!0);for(l=0;_=h[l];l++)_.dispose()}finally{s.Events.enable(),this.disposed=!0}}},s.Block.prototype.initModel=function(){for(var l,n=0;l=this.inputList[n];n++)for(var h,u=0;h=l.fieldRow[u];u++)h.initModel&&h.initModel()},s.Block.prototype.unplug=function(n){this.outputConnection?this.unplugFromRow_(n):this.previousConnection&&this.unplugFromStack_(n)},s.Block.prototype.unplugFromRow_=function(n){var l=null;this.outputConnection.isConnected()&&(l=this.outputConnection.targetConnection,this.outputConnection.disconnect()),l&&n&&(n=this.getOnlyValueConnection_())&&n.isConnected()&&!n.targetBlock().isShadow()&&((n=n.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(n,l,!1)?l.connect(n):n.onFailedConnect(l))},s.Block.prototype.getOnlyValueConnection_=function(){for(var n=null,l=0;l<this.inputList.length;l++){var u=this.inputList[l].connection;if(u&&u.type==s.connectionTypes.INPUT_VALUE&&u.targetConnection){if(n)return null;n=u}}return n},s.Block.prototype.unplugFromStack_=function(n){var l=null;this.previousConnection.isConnected()&&(l=this.previousConnection.targetConnection,this.previousConnection.disconnect());var u=this.getNextBlock();n&&u&&!u.isShadow()&&((n=this.nextConnection.targetConnection).disconnect(),l&&this.workspace.connectionChecker.canConnect(l,n,!1)&&l.connect(n))},s.Block.prototype.getConnections_=function(n){n=[],this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection);for(var u,l=0;u=this.inputList[l];l++)u.connection&&n.push(u.connection);return n},s.Block.prototype.lastConnectionInStack=function(n){for(var l=this.nextConnection;l;){var u=l.targetBlock();if(!u||n&&u.isShadow())return l;l=u.nextConnection}return null},s.Block.prototype.bumpNeighbours=function(){},s.Block.prototype.getParent=function(){return this.parentBlock_},s.Block.prototype.getInputWithBlock=function(n){for(var u,l=0;u=this.inputList[l];l++)if(u.connection&&u.connection.targetBlock()==n)return u;return null},s.Block.prototype.getSurroundParent=function(){var n=this;do{var l=n;if(!(n=n.getParent()))return null}while(n.getNextBlock()==l);return n},s.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},s.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},s.Block.prototype.getFirstStatementConnection=function(){for(var l,n=0;l=this.inputList[n];n++)if(l.connection&&l.connection.type==s.connectionTypes.NEXT_STATEMENT)return l.connection;return null},s.Block.prototype.getRootBlock=function(){var n=this;do{var l=n;n=l.parentBlock_}while(n);return l},s.Block.prototype.getTopStackBlock=function(){var n=this;do{var l=n.getPreviousBlock()}while(l&&l.getNextBlock()==n&&(n=l));return n},s.Block.prototype.getChildren=function(n){if(!n)return this.childBlocks_;n=[];for(var u,l=0;u=this.inputList[l];l++)u.connection&&(u=u.connection.targetBlock())&&n.push(u);return(l=this.getNextBlock())&&n.push(l),n},s.Block.prototype.setParent=function(n){if(n!=this.parentBlock_){if(this.parentBlock_){if(s.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=n)?n.childBlocks_.push(this):this.workspace.addTopBlock(this)}},s.Block.prototype.getDescendants=function(n){for(var h,l=[this],u=this.getChildren(n),_=0;h=u[_];_++)l.push.apply(l,h.getDescendants(n));return l},s.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},s.Block.prototype.setDeletable=function(n){this.deletable_=n},s.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},s.Block.prototype.setMovable=function(n){this.movable_=n},s.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(s.utils.getBlockTypeCounts(this,!0))},s.Block.prototype.isShadow=function(){return this.isShadow_},s.Block.prototype.setShadow=function(n){this.isShadow_=n},s.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},s.Block.prototype.setInsertionMarker=function(n){this.isInsertionMarker_=n},s.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},s.Block.prototype.setEditable=function(n){this.editable_=n,n=0;for(var l;l=this.inputList[n];n++)for(var h,u=0;h=l.fieldRow[u];u++)h.updateEditable()},s.Block.prototype.isDisposed=function(){return this.disposed},s.Block.prototype.getMatchingConnection=function(n,l){var u=this.getConnections_(!0);if(n=n.getConnections_(!0),u.length!=n.length)throw Error("Connection lists did not match in length.");for(var h=0;h<n.length;h++)if(n[h]==l)return u[h];return null},s.Block.prototype.setHelpUrl=function(n){this.helpUrl=n},s.Block.prototype.setTooltip=function(n){this.tooltip=n},s.Block.prototype.getTooltip=function(){return s.Tooltip.getTooltipOfObject(this)},s.Block.prototype.getColour=function(){return this.colour_},s.Block.prototype.getStyleName=function(){return this.styleName_},s.Block.prototype.getHue=function(){return this.hue_},s.Block.prototype.setColour=function(n){n=s.utils.parseBlockColour(n),this.hue_=n.hue,this.colour_=n.hex},s.Block.prototype.setStyle=function(n){this.styleName_=n},s.Block.prototype.setOnChange=function(n){if(n&&"function"!=typeof n)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=n)&&(this.onchangeWrapper_=n.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},s.Block.prototype.getField=function(n){if("string"!=typeof n)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===n?"nothing":n+" of type "+typeof n)+" instead");for(var u,l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)if(_.name===n)return _;return null},s.Block.prototype.getVars=function(){for(var u,n=[],l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)_.referencesVariables()&&n.push(_.getValue());return n},s.Block.prototype.getVarModels=function(){for(var u,n=[],l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)_.referencesVariables()&&(_=this.workspace.getVariableById(_.getValue()))&&n.push(_);return n},s.Block.prototype.updateVarName=function(n){for(var u,l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)_.referencesVariables()&&n.getId()==_.getValue()&&_.refreshVariableName()},s.Block.prototype.renameVarById=function(n,l){for(var h,u=0;h=this.inputList[u];u++)for(var b,_=0;b=h.fieldRow[_];_++)b.referencesVariables()&&n==b.getValue()&&b.setValue(l)},s.Block.prototype.getFieldValue=function(n){return(n=this.getField(n))?n.getValue():null},s.Block.prototype.setFieldValue=function(n,l){var u=this.getField(l);if(!u)throw Error('Field "'+l+'" not found.');u.setValue(n)},s.Block.prototype.setPreviousStatement=function(n,l){if(n){if(void 0===l&&(l=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(s.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(l)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},s.Block.prototype.setNextStatement=function(n,l){if(n)void 0===l&&(l=null),this.nextConnection||(this.nextConnection=this.makeConnection_(s.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(l);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},s.Block.prototype.setOutput=function(n,l){if(n){if(void 0===l&&(l=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(s.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(l)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},s.Block.prototype.setInputsInline=function(n){this.inputsInline!=n&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,n)),this.inputsInline=n)},s.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var n=1;n<this.inputList.length;n++)if(this.inputList[n-1].type==s.inputTypes.DUMMY&&this.inputList[n].type==s.inputTypes.DUMMY)return!1;for(n=1;n<this.inputList.length;n++)if(this.inputList[n-1].type==s.inputTypes.VALUE&&this.inputList[n].type==s.inputTypes.DUMMY)return!0;return!1},s.Block.prototype.setOutputShape=function(n){this.outputShape_=n},s.Block.prototype.getOutputShape=function(){return this.outputShape_},s.Block.prototype.isEnabled=function(){return!this.disabled},s.Block.prototype.setEnabled=function(n){this.isEnabled()!=n&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!n)),this.disabled=!n)},s.Block.prototype.getInheritedDisabled=function(){for(var n=this.getSurroundParent();n;){if(n.disabled)return!0;n=n.getSurroundParent()}return!1},s.Block.prototype.isCollapsed=function(){return this.collapsed_},s.Block.prototype.setCollapsed=function(n){this.collapsed_!=n&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,n)),this.collapsed_=n)},s.Block.prototype.toString=function(n,l){function u(U){var V=U.getCheck();return!V&&U.targetConnection&&(V=U.targetConnection.getCheck()),!!V&&(-1!=V.indexOf("Boolean")||-1!=V.indexOf("Number"))}function h(){M&&M.getType()==k.getType()&&M.getLocation()==k.getLocation()&&(M=null)}var _=[];l=l||"?";var b=s.ASTNode.NAVIGATE_ALL_FIELDS;s.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var M=s.ASTNode.createBlockNode(this),k=M;M;){switch(M.getType()){case s.ASTNode.types.INPUT:var H=M.getLocation();M.in()?u(H)&&_.push("("):_.push(l);break;case s.ASTNode.types.FIELD:(H=M.getLocation()).name!=s.constants.COLLAPSED_FIELD_NAME&&_.push(H.getText())}if(!(M=(H=M).in()||H.next())){for(M=H.out(),h();M&&!M.next();)M=M.out(),h(),M&&M.getType()==s.ASTNode.types.INPUT&&u(M.getLocation())&&_.push(")");M&&(M=M.next())}}for(s.ASTNode.NAVIGATE_ALL_FIELDS=b,l=2;l<_.length;l++)"("==_[l-2]&&")"==_[l]&&(_[l-2]=_[l-1],_.splice(l-1,2));return _=(_=_.reduce(function(U,V){return U+("("==U.substr(-1)||")"==V?"":" ")+V},"")).trim()||"???",n&&_.length>n&&(_=_.substring(0,n-3)+"..."),_},s.Block.prototype.appendValueInput=function(n){return this.appendInput_(s.inputTypes.VALUE,n)},s.Block.prototype.appendStatementInput=function(n){return this.appendInput_(s.inputTypes.STATEMENT,n)},s.Block.prototype.appendDummyInput=function(n){return this.appendInput_(s.inputTypes.DUMMY,n||"")},s.Block.prototype.jsonInit=function(n){var l=n.type?'Block "'+n.type+'": ':"";if(n.output&&n.previousStatement)throw Error(l+"Must not have both an output and a previousStatement.");if(n.style&&n.style.hat&&(this.hat=n.style.hat,n.style=null),n.style&&n.colour)throw Error(l+"Must not have both a colour and a style.");n.style?this.jsonInitStyle_(n,l):this.jsonInitColour_(n,l);for(var u=0;void 0!==n["message"+u];)this.interpolate_(n["message"+u],n["args"+u]||[],n["lastDummyAlign"+u],l),u++;if(void 0!==n.inputsInline&&this.setInputsInline(n.inputsInline),void 0!==n.output&&this.setOutput(!0,n.output),void 0!==n.outputShape&&this.setOutputShape(n.outputShape),void 0!==n.previousStatement&&this.setPreviousStatement(!0,n.previousStatement),void 0!==n.nextStatement&&this.setNextStatement(!0,n.nextStatement),void 0!==n.tooltip&&(u=s.utils.replaceMessageReferences(u=n.tooltip),this.setTooltip(u)),void 0!==n.enableContextMenu&&(this.contextMenu=!!(u=n.enableContextMenu)),void 0!==n.helpUrl&&(u=s.utils.replaceMessageReferences(u=n.helpUrl),this.setHelpUrl(u)),"string"==typeof n.extensions&&(console.warn(l+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+n.type+"' block."),n.extensions=[n.extensions]),void 0!==n.mutator&&s.Extensions.apply(n.mutator,this,!0),n=n.extensions,Array.isArray(n))for(l=0;l<n.length;++l)s.Extensions.apply(n[l],this,!1)},s.Block.prototype.jsonInitColour_=function(n,l){if("colour"in n)if(void 0===n.colour)console.warn(l+"Undefined colour value.");else{n=n.colour;try{this.setColour(n)}catch(u){console.warn(l+"Illegal colour value: ",n)}}},s.Block.prototype.jsonInitStyle_=function(n,l){n=n.style;try{this.setStyle(n)}catch(u){console.warn(l+"Style does not exist: ",n)}},s.Block.prototype.mixin=function(n,l){if(void 0!==l&&"boolean"!=typeof l)throw Error("opt_disableCheck must be a boolean if provided");if(!l){for(var u in l=[],n)void 0!==this[u]&&l.push(u);if(l.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(l))}s.utils.object.mixin(this,n)},s.Block.prototype.interpolate_=function(n,l,u,h){n=s.utils.tokenizeInterpolation(n),this.validateTokens_(n,l.length),l=this.interpolateArguments_(n,l,u),u=[],n=0;for(var _;_=l[n];n++)if(this.isInputKeyword_(_.type)){if(_=this.inputFromJson_(_,h)){for(var M,b=0;M=u[b];b++)_.appendField(M[0],M[1]);u.length=0}}else(b=this.fieldFromJson_(_))&&u.push([b,_.name])},s.Block.prototype.validateTokens_=function(n,l){for(var u=[],h=0,_=0;_<n.length;_++){var b=n[_];if("number"==typeof b){if(1>b||b>l)throw Error('Block "'+this.type+'": Message index %'+b+" out of range.");if(u[b])throw Error('Block "'+this.type+'": Message index %'+b+" duplicated.");u[b]=!0,h++}}if(h!=l)throw Error('Block "'+this.type+'": Message does not reference all '+l+" arg(s).")},s.Block.prototype.interpolateArguments_=function(n,l,u){for(var h=[],_=0;_<n.length;_++){var b=n[_];"number"==typeof b&&(b=l[b-1]),("string"!=typeof b||(b=this.stringToFieldJson_(b)))&&h.push(b)}return(n=h.length)&&!this.isInputKeyword_(h[n-1].type)&&(n={type:"input_dummy"},u&&(n.align=u),h.push(n)),h},s.Block.prototype.fieldFromJson_=function(n){var l=s.fieldRegistry.fromJson(n);return!l&&n.alt?"string"==typeof n.alt?(n=this.stringToFieldJson_(n.alt))?this.fieldFromJson_(n):null:this.fieldFromJson_(n.alt):l},s.Block.prototype.inputFromJson_=function(n,l){var u={LEFT:s.constants.ALIGN.LEFT,RIGHT:s.constants.ALIGN.RIGHT,CENTRE:s.constants.ALIGN.CENTRE,CENTER:s.constants.ALIGN.CENTRE},h=null;switch(n.type){case"input_value":h=this.appendValueInput(n.name);break;case"input_statement":h=this.appendStatementInput(n.name);break;case"input_dummy":h=this.appendDummyInput(n.name)}return h?(n.check&&h.setCheck(n.check),n.align&&(void 0===(u=u[n.align.toUpperCase()])?console.warn(l+"Illegal align value: ",n.align):h.setAlign(u)),h):null},s.Block.prototype.isInputKeyword_=function(n){return"input_value"==n||"input_statement"==n||"input_dummy"==n},s.Block.prototype.stringToFieldJson_=function(n){return(n=n.trim())?{type:"field_label",text:n}:null},s.Block.prototype.appendInput_=function(n,l){var u=null;return(n==s.inputTypes.VALUE||n==s.inputTypes.STATEMENT)&&(u=this.makeConnection_(n)),n==s.inputTypes.STATEMENT&&this.statementInputCount++,n=new s.Input(n,l,this,u),this.inputList.push(n),n},s.Block.prototype.moveInputBefore=function(n,l){if(n!=l){for(var b,u=-1,h=l?-1:this.inputList.length,_=0;b=this.inputList[_];_++)if(b.name==n){if(u=_,-1!=h)break}else if(l&&b.name==l&&(h=_,-1!=u))break;if(-1==u)throw Error('Named input "'+n+'" not found.');if(-1==h)throw Error('Reference input "'+l+'" not found.');this.moveNumberedInputBefore(u,h)}},s.Block.prototype.moveNumberedInputBefore=function(n,l){if(n==l)throw Error("Can't move input to itself.");if(n>=this.inputList.length)throw RangeError("Input index "+n+" out of bounds.");if(l>this.inputList.length)throw RangeError("Reference input "+l+" out of bounds.");var u=this.inputList[n];this.inputList.splice(n,1),n<l&&l--,this.inputList.splice(l,0,u)},s.Block.prototype.removeInput=function(n,l){for(var h,u=0;h=this.inputList[u];u++)if(h.name==n)return h.type==s.inputTypes.STATEMENT&&this.statementInputCount--,h.dispose(),this.inputList.splice(u,1),!0;if(l)return!1;throw Error("Input not found: "+n)},s.Block.prototype.getInput=function(n){for(var u,l=0;u=this.inputList[l];l++)if(u.name==n)return u;return null},s.Block.prototype.getInputTargetBlock=function(n){return(n=this.getInput(n))&&n.connection&&n.connection.targetBlock()},s.Block.prototype.getCommentText=function(){return this.commentModel.text},s.Block.prototype.setCommentText=function(n){this.commentModel.text!=n&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,n)),this.comment=this.commentModel.text=n)},s.Block.prototype.setWarningText=function(n,l){},s.Block.prototype.setMutator=function(n){},s.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},s.Block.prototype.moveBy=function(n,l){if(this.parentBlock_)throw Error("Block has parent.");var u=new(s.Events.get(s.Events.BLOCK_MOVE))(this);this.xy_.translate(n,l),u.recordNew(),s.Events.fire(u)},s.Block.prototype.makeConnection_=function(n){return new s.Connection(this,n)},s.Block.prototype.allInputsFilled=function(n){if(void 0===n&&(n=!0),!n&&this.isShadow())return!1;for(var u,l=0;u=this.inputList[l];l++)if(u.connection&&(!(u=u.connection.targetBlock())||!u.allInputsFilled(n)))return!1;return!(l=this.getNextBlock())||l.allInputsFilled(n)},s.Block.prototype.toDevString=function(){var n=this.type?'"'+this.type+'" block':"Block";return this.id&&(n+=' (id="'+this.id+'")'),n},s.blockRendering.IPathObject=function(n,l){},s.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},s.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},s.Menu.prototype.addChild=function(n){this.menuItems_.push(n)},s.Menu.prototype.render=function(n){var l=document.createElement("div");l.className="blocklyMenu goog-menu blocklyNonSelectable",l.tabIndex=0,this.roleName_&&s.utils.aria.setRole(l,this.roleName_),this.element_=l;for(var h,u=0;h=this.menuItems_[u];u++)l.appendChild(h.createDom());this.mouseOverHandler_=s.browserEvents.conditionalBind(l,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=s.browserEvents.conditionalBind(l,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=s.browserEvents.conditionalBind(l,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=s.browserEvents.conditionalBind(l,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=s.browserEvents.conditionalBind(l,"keydown",this,this.handleKeyEvent_),n.appendChild(l)},s.Menu.prototype.getElement=function(){return this.element_},s.Menu.prototype.focus=function(){var n=this.getElement();n&&(n.focus({preventScroll:!0}),s.utils.dom.addClass(n,"blocklyFocused"))},s.Menu.prototype.blur_=function(){var n=this.getElement();n&&(n.blur(),s.utils.dom.removeClass(n,"blocklyFocused"))},s.Menu.prototype.setRole=function(n){this.roleName_=n},s.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(s.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(s.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(s.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(s.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(s.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var l,n=0;l=this.menuItems_[n];n++)l.dispose();this.element_=null},s.Menu.prototype.getMenuItem_=function(n){for(var l=this.getElement();n&&n!=l;){if(s.utils.dom.hasClass(n,"blocklyMenuItem"))for(var h,u=0;h=this.menuItems_[u];u++)if(h.getElement()==n)return h;n=n.parentElement}return null},s.Menu.prototype.setHighlighted=function(n){var l=this.highlightedItem_;l&&(l.setHighlighted(!1),this.highlightedItem_=null),n&&(n.setHighlighted(!0),this.highlightedItem_=n,l=this.getElement(),s.utils.style.scrollIntoContainerView(n.getElement(),l),s.utils.aria.setState(l,s.utils.aria.State.ACTIVEDESCENDANT,n.getId()))},s.Menu.prototype.highlightNext=function(){var n=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(n,1)},s.Menu.prototype.highlightPrevious=function(){var n=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>n?this.menuItems_.length:n,-1)},s.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},s.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},s.Menu.prototype.highlightHelper_=function(n,l){n+=l;for(var u;u=this.menuItems_[n];){if(u.isEnabled()){this.setHighlighted(u);break}n+=l}},s.Menu.prototype.handleMouseOver_=function(n){(n=this.getMenuItem_(n.target))&&(n.isEnabled()?this.highlightedItem_!=n&&this.setHighlighted(n):this.setHighlighted(null))},s.Menu.prototype.handleClick_=function(n){var l=this.openingCoords;if(this.openingCoords=null,l&&"number"==typeof n.clientX){var u=new s.utils.Coordinate(n.clientX,n.clientY);if(1>s.utils.Coordinate.distance(l,u))return}(n=this.getMenuItem_(n.target))&&n.performAction()},s.Menu.prototype.handleMouseEnter_=function(n){this.focus()},s.Menu.prototype.handleMouseLeave_=function(n){this.getElement()&&(this.blur_(),this.setHighlighted(null))},s.Menu.prototype.handleKeyEvent_=function(n){if(this.menuItems_.length&&!(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)){var l=this.highlightedItem_;switch(n.keyCode){case s.utils.KeyCodes.ENTER:case s.utils.KeyCodes.SPACE:l&&l.performAction();break;case s.utils.KeyCodes.UP:this.highlightPrevious();break;case s.utils.KeyCodes.DOWN:this.highlightNext();break;case s.utils.KeyCodes.PAGE_UP:case s.utils.KeyCodes.HOME:this.highlightFirst_();break;case s.utils.KeyCodes.PAGE_DOWN:case s.utils.KeyCodes.END:this.highlightLast_();break;default:return}n.preventDefault(),n.stopPropagation()}},s.Menu.prototype.getSize=function(){var n=this.getElement(),l=s.utils.style.getSize(n);return l.height=n.scrollHeight,l},s.MenuItem=function(n,l){this.content_=n,this.value_=l,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},s.MenuItem.prototype.createDom=function(){var n=document.createElement("div");n.id=s.utils.IdGenerator.getNextUniqueId(),this.element_=n,n.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var l=document.createElement("div");if(l.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var u=document.createElement("div");u.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",l.appendChild(u)}return u=this.content_,"string"==typeof this.content_&&(u=document.createTextNode(this.content_)),l.appendChild(u),n.appendChild(l),this.roleName_&&s.utils.aria.setRole(n,this.roleName_),s.utils.aria.setState(n,s.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),s.utils.aria.setState(n,s.utils.aria.State.DISABLED,!this.enabled_),n},s.MenuItem.prototype.dispose=function(){this.element_=null},s.MenuItem.prototype.getElement=function(){return this.element_},s.MenuItem.prototype.getId=function(){return this.element_.id},s.MenuItem.prototype.getValue=function(){return this.value_},s.MenuItem.prototype.setRightToLeft=function(n){this.rightToLeft_=n},s.MenuItem.prototype.setRole=function(n){this.roleName_=n},s.MenuItem.prototype.setCheckable=function(n){this.checkable_=n},s.MenuItem.prototype.setChecked=function(n){this.checked_=n},s.MenuItem.prototype.setHighlighted=function(n){this.highlight_=n;var l=this.getElement();l&&this.isEnabled()&&(n?(s.utils.dom.addClass(l,"blocklyMenuItemHighlight"),s.utils.dom.addClass(l,"goog-menuitem-highlight")):(s.utils.dom.removeClass(l,"blocklyMenuItemHighlight"),s.utils.dom.removeClass(l,"goog-menuitem-highlight")))},s.MenuItem.prototype.isEnabled=function(){return this.enabled_},s.MenuItem.prototype.setEnabled=function(n){this.enabled_=n},s.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},s.MenuItem.prototype.onAction=function(n,l){this.actionHandler_=n.bind(l)},s.ContextMenu={},s.ContextMenu.currentBlock=null,s.ContextMenu.menu_=null,s.ContextMenu.show=function(n,l,u){if(s.WidgetDiv.show(s.ContextMenu,u,s.ContextMenu.dispose),l.length){var h=s.ContextMenu.populate_(l,u);s.ContextMenu.menu_=h,s.ContextMenu.position_(h,n,u),setTimeout(function(){h.focus()},1),s.ContextMenu.currentBlock=null}else s.ContextMenu.hide()},s.ContextMenu.populate_=function(n,l){var u=new s.Menu;u.setRole(s.utils.aria.Role.MENU);for(var _,h=0;_=n[h];h++){var b=new s.MenuItem(_.text);b.setRightToLeft(l),b.setRole(s.utils.aria.Role.MENUITEM),u.addChild(b),b.setEnabled(_.enabled),_.enabled&&b.onAction(function(M){s.ContextMenu.hide(),this.callback(this.scope)},_)}return u},s.ContextMenu.position_=function(n,l,u){var h=s.utils.getViewportBBox();l=new s.utils.Rect(l.clientY+h.top,l.clientY+h.top,l.clientX+h.left,l.clientX+h.left),s.ContextMenu.createWidget_(n);var _=n.getSize();u&&(l.left+=_.width,l.right+=_.width,h.left+=_.width,h.right+=_.width),s.WidgetDiv.positionWithAnchor(h,l,_,u),n.focus()},s.ContextMenu.createWidget_=function(n){n.render(s.WidgetDiv.DIV);var l=n.getElement();s.utils.dom.addClass(l,"blocklyContextMenu"),s.browserEvents.conditionalBind(l,"contextmenu",null,s.utils.noEvent),n.focus()},s.ContextMenu.hide=function(){s.WidgetDiv.hideIfOwner(s.ContextMenu),s.ContextMenu.currentBlock=null},s.ContextMenu.dispose=function(){s.ContextMenu.menu_&&(s.ContextMenu.menu_.dispose(),s.ContextMenu.menu_=null)},s.ContextMenu.callbackFactory=function(n,l){return function(){s.Events.disable();try{var u=s.Xml.domToBlock(l,n.workspace),h=n.getRelativeToSurfaceXY();h.x=n.RTL?h.x-s.SNAP_RADIUS:h.x+s.SNAP_RADIUS,h.y+=2*s.SNAP_RADIUS,u.moveBy(h.x,h.y)}finally{s.Events.enable()}s.Events.isEnabled()&&!u.isShadow()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(u)),u.select()}},s.ContextMenu.commentDeleteOption=function(n){return{text:s.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){s.Events.setGroup(!0),n.dispose(!0,!0),s.Events.setGroup(!1)}}},s.ContextMenu.commentDuplicateOption=function(n){return{text:s.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){s.duplicate(n)}}},s.ContextMenu.workspaceCommentOption=function(n,l){if(!s.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var u={enabled:!s.utils.userAgent.IE};return u.text=s.Msg.ADD_COMMENT,u.callback=function(){var h=new s.WorkspaceCommentSvg(n,s.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,s.WorkspaceCommentSvg.DEFAULT_SIZE,s.WorkspaceCommentSvg.DEFAULT_SIZE),_=n.getInjectionDiv().getBoundingClientRect();_=new s.utils.Coordinate(l.clientX-_.left,l.clientY-_.top);var b=n.getOriginOffsetInPixels();(_=s.utils.Coordinate.difference(_,b)).scale(1/n.scale),h.moveBy(_.x,_.y),n.rendered&&(h.initSvg(),h.render(),h.select())},u},s.ContextMenuRegistry=function(){s.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},s.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},s.ContextMenuRegistry.registry=null,s.ContextMenuRegistry.prototype.register=function(n){if(this.registry_[n.id])throw Error('Menu item with ID "'+n.id+'" is already registered.');this.registry_[n.id]=n},s.ContextMenuRegistry.prototype.unregister=function(n){if(!this.registry_[n])throw Error('Menu item with ID "'+n+'" not found.');delete this.registry_[n]},s.ContextMenuRegistry.prototype.getItem=function(n){return this.registry_[n]||null},s.ContextMenuRegistry.prototype.getContextMenuOptions=function(n,l){var u=[],h=this.registry_;return Object.keys(h).forEach(function(_){if(n==(_=h[_]).scopeType){var b=_.preconditionFn(l);"hidden"!=b&&(_={text:"function"==typeof _.displayText?_.displayText(l):_.displayText,enabled:"enabled"==b,callback:_.callback,scope:l,weight:_.weight},u.push(_))}}),u.sort(function(_,b){return _.weight-b.weight}),u},new s.ContextMenuRegistry,s.Events.Selected=function(n,l,u){s.Events.Selected.superClass_.constructor.call(this,u),this.oldElementId=n,this.newElementId=l},s.utils.object.inherits(s.Events.Selected,s.Events.UiBase),s.Events.Selected.prototype.type=s.Events.SELECTED,s.Events.Selected.prototype.toJson=function(){var n=s.Events.Selected.superClass_.toJson.call(this);return n.oldElementId=this.oldElementId,n.newElementId=this.newElementId,n},s.Events.Selected.prototype.fromJson=function(n){s.Events.Selected.superClass_.fromJson.call(this,n),this.oldElementId=n.oldElementId,this.newElementId=n.newElementId},s.registry.register(s.registry.Type.EVENT,s.Events.SELECTED,s.Events.Selected),s.IBoundedElement=function(){},s.ICopyable=function(){},s.RenderedConnection=function(n,l){s.RenderedConnection.superClass_.constructor.call(this,n,l),this.db_=n.workspace.connectionDBList[l],this.dbOpposite_=n.workspace.connectionDBList[s.OPPOSITE_TYPE[l]],this.offsetInBlock_=new s.utils.Coordinate(0,0),this.trackedState_=s.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},s.utils.object.inherits(s.RenderedConnection,s.Connection),s.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},s.RenderedConnection.prototype.dispose=function(){s.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==s.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},s.RenderedConnection.prototype.getSourceBlock=function(){return s.RenderedConnection.superClass_.getSourceBlock.call(this)},s.RenderedConnection.prototype.targetBlock=function(){return s.RenderedConnection.superClass_.targetBlock.call(this)},s.RenderedConnection.prototype.distanceFrom=function(n){var l=this.x-n.x;return n=this.y-n.y,Math.sqrt(l*l+n*n)},s.RenderedConnection.prototype.bumpAwayFrom=function(n){if(!this.sourceBlock_.workspace.isDragging()){var l=this.sourceBlock_.getRootBlock();if(!l.isInFlyout){var u=!1;if(!l.isMovable()){if(!(l=n.getSourceBlock().getRootBlock()).isMovable())return;n=this,u=!0}var h=s.selected==l;h||l.addSelect();var _=n.x+s.SNAP_RADIUS+Math.floor(Math.random()*s.BUMP_RANDOMNESS)-this.x,b=n.y+s.SNAP_RADIUS+Math.floor(Math.random()*s.BUMP_RANDOMNESS)-this.y;u&&(b=-b),l.RTL&&(_=n.x-s.SNAP_RADIUS-Math.floor(Math.random()*s.BUMP_RANDOMNESS)-this.x),l.moveBy(_,b),h||l.removeSelect()}}},s.RenderedConnection.prototype.moveTo=function(n,l){this.trackedState_==s.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,l),this.trackedState_=s.RenderedConnection.TrackedState.TRACKED):this.trackedState_==s.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,l)),this.x=n,this.y=l},s.RenderedConnection.prototype.moveBy=function(n,l){this.moveTo(this.x+n,this.y+l)},s.RenderedConnection.prototype.moveToOffset=function(n){this.moveTo(n.x+this.offsetInBlock_.x,n.y+this.offsetInBlock_.y)},s.RenderedConnection.prototype.setOffsetInBlock=function(n,l){this.offsetInBlock_.x=n,this.offsetInBlock_.y=l},s.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},s.RenderedConnection.prototype.tighten=function(){var n=this.targetConnection.x-this.x,l=this.targetConnection.y-this.y;if(0!=n||0!=l){var u=this.targetBlock(),h=u.getSvgRoot();if(!h)throw Error("block is not rendered.");h=s.utils.getRelativeXY(h),u.getSvgRoot().setAttribute("transform","translate("+(h.x-n)+","+(h.y-l)+")"),u.moveConnections(-n,-l)}},s.RenderedConnection.prototype.closest=function(n,l){return this.dbOpposite_.searchForClosest(this,n,l)},s.RenderedConnection.prototype.highlight=function(){var n=this.sourceBlock_.workspace.getRenderer().getConstants(),l=n.shapeFor(this);l=this.type==s.connectionTypes.INPUT_VALUE||this.type==s.connectionTypes.OUTPUT_VALUE?s.utils.svgPaths.moveBy(0,-(n=n.TAB_OFFSET_FROM_TOP))+s.utils.svgPaths.lineOnAxis("v",n)+l.pathDown+s.utils.svgPaths.lineOnAxis("v",n):s.utils.svgPaths.moveBy(-(n=n.NOTCH_OFFSET_LEFT-n.CORNER_RADIUS),0)+s.utils.svgPaths.lineOnAxis("h",n)+l.pathLeft+s.utils.svgPaths.lineOnAxis("h",n),n=this.sourceBlock_.getRelativeToSurfaceXY(),s.Connection.highlightedPath_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:l,transform:"translate("+(this.x-n.x)+","+(this.y-n.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},s.RenderedConnection.prototype.unhighlight=function(){s.utils.dom.removeNode(s.Connection.highlightedPath_),delete s.Connection.highlightedPath_},s.RenderedConnection.prototype.setTracking=function(n){n&&this.trackedState_==s.RenderedConnection.TrackedState.TRACKED||!n&&this.trackedState_==s.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(n?(this.db_.addConnection(this,this.y),this.trackedState_=s.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==s.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=s.RenderedConnection.TrackedState.UNTRACKED))},s.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var n=this.targetBlock().getDescendants(!1),l=0;l<n.length;l++){for(var u=n[l],h=u.getConnections_(!0),_=0;_<h.length;_++)h[_].setTracking(!1);for(u=u.getIcons(),_=0;_<u.length;_++)u[_].setVisible(!1)}},s.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var n=[];if(this.type!=s.connectionTypes.INPUT_VALUE&&this.type!=s.connectionTypes.NEXT_STATEMENT)return n;var l=this.targetBlock();if(l){if(l.isCollapsed()){var u=[];l.outputConnection&&u.push(l.outputConnection),l.nextConnection&&u.push(l.nextConnection),l.previousConnection&&u.push(l.previousConnection)}else u=l.getConnections_(!0);for(var h=0;h<u.length;h++)n.push.apply(n,u[h].startTrackingAll());n.length||(n[0]=l)}return n},s.RenderedConnection.prototype.isConnectionAllowed=function(n,l){return s.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(n)>l)&&s.RenderedConnection.superClass_.isConnectionAllowed.call(this,n)},s.RenderedConnection.prototype.onFailedConnect=function(n){var l=this.getSourceBlock();if(s.Events.recordUndo){var u=s.Events.getGroup();setTimeout(function(){l.isDisposed()||l.getParent()||(s.Events.setGroup(u),this.bumpAwayFrom(n),s.Events.setGroup(!1))}.bind(this),s.BUMP_DELAY)}},s.RenderedConnection.prototype.disconnectInternal_=function(n,l){s.RenderedConnection.superClass_.disconnectInternal_.call(this,n,l),n.rendered&&n.render(),l.rendered&&(l.updateDisabled(),l.render(),l.getSvgRoot().style.display="block")},s.RenderedConnection.prototype.respawnShadow_=function(){s.RenderedConnection.superClass_.respawnShadow_.call(this);var n=this.targetBlock();n&&(n.initSvg(),n.render(!1),(n=this.getSourceBlock()).rendered&&n.render())},s.RenderedConnection.prototype.neighbours=function(n){return this.dbOpposite_.getNeighbours(this,n)},s.RenderedConnection.prototype.connect_=function(n){s.RenderedConnection.superClass_.connect_.call(this,n);var l=this.getSourceBlock();n=n.getSourceBlock();var u=l.rendered,h=n.rendered;u&&l.updateDisabled(),h&&n.updateDisabled(),u&&h&&(this.type==s.connectionTypes.NEXT_STATEMENT||this.type==s.connectionTypes.PREVIOUS_STATEMENT?n.render():l.render()),(l=l.getInputWithBlock(n))&&(l=l.isVisible(),n.getSvgRoot().style.display=l?"block":"none")},s.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},s.BasicCursor=function(){s.BasicCursor.superClass_.constructor.call(this)},s.utils.object.inherits(s.BasicCursor,s.Cursor),s.BasicCursor.registrationName="basicCursor",s.BasicCursor.prototype.next=function(){var n=this.getCurNode();return n?((n=this.getNextNode_(n,this.validNode_))&&this.setCurNode(n),n):null},s.BasicCursor.prototype.in=function(){return this.next()},s.BasicCursor.prototype.prev=function(){var n=this.getCurNode();return n?((n=this.getPreviousNode_(n,this.validNode_))&&this.setCurNode(n),n):null},s.BasicCursor.prototype.out=function(){return this.prev()},s.BasicCursor.prototype.getNextNode_=function(n,l){if(!n)return null;var u=n.in()||n.next();return l(u)?u:u?this.getNextNode_(u,l):l(n=this.findSiblingOrParent_(n.out()))?n:n?this.getNextNode_(n,l):null},s.BasicCursor.prototype.getPreviousNode_=function(n,l){if(!n)return null;var u=n.prev();return l(u=u?this.getRightMostChild_(u):n.out())?u:u?this.getPreviousNode_(u,l):null},s.BasicCursor.prototype.validNode_=function(n){var l=!1;return((n=n&&n.getType())==s.ASTNode.types.OUTPUT||n==s.ASTNode.types.INPUT||n==s.ASTNode.types.FIELD||n==s.ASTNode.types.NEXT||n==s.ASTNode.types.PREVIOUS||n==s.ASTNode.types.WORKSPACE)&&(l=!0),l},s.BasicCursor.prototype.findSiblingOrParent_=function(n){return n?n.next()||this.findSiblingOrParent_(n.out()):null},s.BasicCursor.prototype.getRightMostChild_=function(n){if(!n.in())return n;for(n=n.in();n.next();)n=n.next();return this.getRightMostChild_(n)},s.registry.register(s.registry.Type.CURSOR,s.BasicCursor.registrationName,s.BasicCursor),s.TabNavigateCursor=function(){s.TabNavigateCursor.superClass_.constructor.call(this)},s.utils.object.inherits(s.TabNavigateCursor,s.BasicCursor),s.TabNavigateCursor.prototype.validNode_=function(n){var l=!1,u=n&&n.getType();return n&&(n=n.getLocation(),u==s.ASTNode.types.FIELD&&n&&n.isTabNavigable()&&n.isClickable()&&(l=!0)),l},s.BlockSvg=function(n,l,u){this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=n.getRenderer().getConstants().getBlockStyle(null),this.pathObject=n.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=n,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=s.utils.is3dSupported()&&!!n.getBlockDragSurface();var h=this.pathObject.svgPath;h.tooltip=this,s.Tooltip.bindMouseEvents(h),s.BlockSvg.superClass_.constructor.call(this,n,l,u),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:s.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},s.utils.object.inherits(s.BlockSvg,s.Block),s.BlockSvg.prototype.height=0,s.BlockSvg.prototype.width=0,s.BlockSvg.prototype.warningTextDb_=null,s.BlockSvg.INLINE=-1,s.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",s.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var l,n=0;l=this.inputList[n];n++)l.init();for(l=this.getIcons(),n=0;n<l.length;n++)l[n].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),n=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!n||s.browserEvents.conditionalBind(n,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,n.parentNode||this.workspace.getCanvas().appendChild(n)},s.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},s.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},s.BlockSvg.prototype.getColourShadow=function(){return s.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},s.BlockSvg.prototype.getColourBorder=function(){return s.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},s.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(s.selected!=this){var n=null;if(s.selected){n=s.selected.id,s.Events.disable();try{s.selected.unselect()}finally{s.Events.enable()}}n=new(s.Events.get(s.Events.SELECTED))(n,this.id,this.workspace.id),s.Events.fire(n),s.selected=this,this.addSelect()}},s.BlockSvg.prototype.unselect=function(){if(s.selected==this){var n=new(s.Events.get(s.Events.SELECTED))(this.id,null,this.workspace.id);n.workspaceId=this.workspace.id,s.Events.fire(n),s.selected=null,this.removeSelect()}},s.BlockSvg.prototype.mutator=null,s.BlockSvg.prototype.comment=null,s.BlockSvg.prototype.commentIcon_=null,s.BlockSvg.prototype.warning=null,s.BlockSvg.prototype.getIcons=function(){var n=[];return this.mutator&&n.push(this.mutator),this.commentIcon_&&n.push(this.commentIcon_),this.warning&&n.push(this.warning),n},s.BlockSvg.prototype.setParent=function(n){var l=this.parentBlock_;if(n!=l){s.utils.dom.startTextWidthCache(),s.BlockSvg.superClass_.setParent.call(this,n),s.utils.dom.stopTextWidthCache();var u=this.getSvgRoot();if(!this.workspace.isClearing&&u){var h=this.getRelativeToSurfaceXY();n?(n.getSvgRoot().appendChild(u),n=this.getRelativeToSurfaceXY(),this.moveConnections(n.x-h.x,n.y-h.y)):l&&(this.workspace.getCanvas().appendChild(u),this.translate(h.x,h.y)),this.applyColour()}}},s.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var n=0,l=0,u=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,h=this.getSvgRoot();if(h)do{var _=s.utils.getRelativeXY(h);n+=_.x,l+=_.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==h&&(n+=(_=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,l+=_.y),h=h.parentNode}while(h&&h!=this.workspace.getCanvas()&&h!=u);return new s.utils.Coordinate(n,l)},s.BlockSvg.prototype.moveBy=function(n,l){if(this.parentBlock_)throw Error("Block has parent.");var u=s.Events.isEnabled();if(u)var h=new(s.Events.get(s.Events.BLOCK_MOVE))(this);var _=this.getRelativeToSurfaceXY();this.translate(_.x+n,_.y+l),this.moveConnections(n,l),u&&(h.recordNew(),s.Events.fire(h)),this.workspace.resizeContents()},s.BlockSvg.prototype.translate=function(n,l){this.getSvgRoot().setAttribute("transform","translate("+n+","+l+")")},s.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var n=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(n.x,n.y),(n=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(n)}},s.BlockSvg.prototype.moveTo=function(n){var l=this.getRelativeToSurfaceXY();this.moveBy(n.x-l.x,n.y-l.y)},s.BlockSvg.prototype.moveOffDragSurface=function(n){this.useDragSurface_&&(this.translate(n.x,n.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},s.BlockSvg.prototype.moveDuringDrag=function(n){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(n.x,n.y):(this.svgGroup_.translate_="translate("+n.x+","+n.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},s.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},s.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var n=this.workspace.getGrid();if(n&&n.shouldSnap()){var l=n.getSpacing(),u=l/2,h=this.getRelativeToSurfaceXY();n=Math.round((h.x-u)/l)*l+u-h.x,l=Math.round((h.y-u)/l)*l+u-h.y,n=Math.round(n),l=Math.round(l),0==n&&0==l||this.moveBy(n,l)}}},s.BlockSvg.prototype.getBoundingRectangle=function(){var n=this.getRelativeToSurfaceXY(),l=this.getHeightWidth();if(this.RTL)var u=n.x-l.width,h=n.x;else u=n.x,h=n.x+l.width;return new s.utils.Rect(n.y,n.y+l.height,u,h)},s.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var l,n=0;l=this.inputList[n];n++)l.markDirty()},s.BlockSvg.prototype.setCollapsed=function(n){this.collapsed_!=n&&(s.BlockSvg.superClass_.setCollapsed.call(this,n),n?this.rendered&&this.render():this.updateCollapsed_())},s.BlockSvg.prototype.updateCollapsed_=function(){for(var _,n=this.isCollapsed(),l=s.constants.COLLAPSED_INPUT_NAME,u=s.constants.COLLAPSED_FIELD_NAME,h=0;_=this.inputList[h];h++)_.name!=l&&_.setVisible(!n);if(n){for(_=this.getIcons(),h=0;n=_[h];h++)n.setVisible(!1);h=this.toString(s.COLLAPSE_CHARS),(_=this.getField(u))?_.setValue(h):(_=this.getInput(l)||this.appendDummyInput(l)).appendField(new s.FieldLabel(h),u)}else this.updateDisabled(),this.removeInput(l)},s.BlockSvg.prototype.tab=function(n,l){var u=new s.TabNavigateCursor;u.setCurNode(s.ASTNode.createFieldNode(n)),n=u.getCurNode(),l?u.next():u.prev(),(l=u.getCurNode())&&l!==n&&(l.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(l))},s.BlockSvg.prototype.onMouseDown_=function(n){var l=this.workspace&&this.workspace.getGesture(n);l&&l.handleBlockStart(n,this)},s.BlockSvg.prototype.showHelp=function(){var n="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;n&&window.open(n)},s.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var n=s.ContextMenuRegistry.registry.getContextMenuOptions(s.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(n),n},s.BlockSvg.prototype.showContextMenu=function(n){var l=this.generateContextMenu();l&&l.length&&(s.ContextMenu.show(n,l,this.RTL),s.ContextMenu.currentBlock=this)},s.BlockSvg.prototype.moveConnections=function(n,l){if(this.rendered){for(var u=this.getConnections_(!1),h=0;h<u.length;h++)u[h].moveBy(n,l);for(u=this.getIcons(),h=0;h<u.length;h++)u[h].computeIconLocation();for(h=0;h<this.childBlocks_.length;h++)this.childBlocks_[h].moveConnections(n,l)}},s.BlockSvg.prototype.setDragging=function(n){if(n){var l=this.getSvgRoot();l.translate_="",l.skew_="",s.draggingConnections=s.draggingConnections.concat(this.getConnections_(!0)),s.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else s.draggingConnections=[],s.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(l=0;l<this.childBlocks_.length;l++)this.childBlocks_[l].setDragging(n)},s.BlockSvg.prototype.setMovable=function(n){s.BlockSvg.superClass_.setMovable.call(this,n),this.pathObject.updateMovable(n)},s.BlockSvg.prototype.setEditable=function(n){s.BlockSvg.superClass_.setEditable.call(this,n),n=this.getIcons();for(var l=0;l<n.length;l++)n[l].updateEditable()},s.BlockSvg.prototype.setShadow=function(n){s.BlockSvg.superClass_.setShadow.call(this,n),this.applyColour()},s.BlockSvg.prototype.setInsertionMarker=function(n){this.isInsertionMarker_!=n&&(this.isInsertionMarker_=n)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},s.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},s.BlockSvg.prototype.dispose=function(n,l){if(this.workspace){s.Tooltip.dispose(),s.Tooltip.unbindMouseEvents(this.pathObject.svgPath),s.utils.dom.startTextWidthCache();var u=this.workspace;if(s.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),s.ContextMenu.currentBlock==this&&s.ContextMenu.hide(),l&&this.rendered&&(this.unplug(n),s.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var h in this.warningTextDb_)clearTimeout(this.warningTextDb_[h]);this.warningTextDb_=null}for(l=this.getIcons(),h=0;h<l.length;h++)l[h].dispose();s.BlockSvg.superClass_.dispose.call(this,!!n),s.utils.dom.removeNode(this.svgGroup_),u.resizeContents(),this.svgGroup_=null,s.utils.dom.stopTextWidthCache()}},s.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var n=s.Xml.blockToDom(this,!0);s.Xml.deleteNext(n);var l=this.getRelativeToSurfaceXY();return n.setAttribute("x",this.RTL?-l.x:l.x),n.setAttribute("y",l.y),{xml:n,source:this.workspace,typeCounts:s.utils.getBlockTypeCounts(this,!0)}},s.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var n=this.getIcons(),l=0;l<n.length;l++)n[l].applyColour();for(n=0;l=this.inputList[n];n++)for(var h,u=0;h=l.fieldRow[u];u++)h.applyColour()},s.BlockSvg.prototype.updateDisabled=function(){var n=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var u,l=0;u=n[l];l++)u.rendered&&u.updateDisabled()},s.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},s.BlockSvg.prototype.setCommentText=function(n){if(!s.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=n&&(s.BlockSvg.superClass_.setCommentText.call(this,n),!!this.commentIcon_==(n=null!=n)?this.commentIcon_.updateText():(n?this.comment=this.commentIcon_=new s.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},s.BlockSvg.prototype.setWarningText=function(n,l){if(!s.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var u=l||"";if(u)this.warningTextDb_[u]&&(clearTimeout(this.warningTextDb_[u]),delete this.warningTextDb_[u]);else for(var h in this.warningTextDb_)clearTimeout(this.warningTextDb_[h]),delete this.warningTextDb_[h];if(this.workspace.isDragging()){var _=this;this.warningTextDb_[u]=setTimeout(function(){_.workspace&&(delete _.warningTextDb_[u],_.setWarningText(n,u))},100)}else{if(this.isInFlyout&&(n=null),l=!1,"string"==typeof n){h=this.getSurroundParent();for(var b=null;h;)h.isCollapsed()&&(b=h),h=h.getSurroundParent();b&&b.setWarningText(s.Msg.COLLAPSED_WARNINGS_WARNING,s.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new s.Warning(this),l=!0),this.warning.setText(n,u)}else this.warning&&!u?(this.warning.dispose(),l=!0):this.warning&&(l=this.warning.getText(),this.warning.setText("",u),(h=this.warning.getText())||this.warning.dispose(),l=l!=h);l&&this.rendered&&(this.render(),this.bumpNeighbours())}},s.BlockSvg.prototype.setMutator=function(n){this.mutator&&this.mutator!==n&&this.mutator.dispose(),n&&(n.setBlock(this),this.mutator=n,n.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setEnabled=function(n){this.isEnabled()!=n&&(s.BlockSvg.superClass_.setEnabled.call(this,n),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},s.BlockSvg.prototype.setHighlighted=function(n){this.rendered&&this.pathObject.updateHighlighted(n)},s.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},s.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},s.BlockSvg.prototype.setDeleteStyle=function(n){this.pathObject.updateDraggingDelete(n)},s.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},s.BlockSvg.prototype.setColour=function(n){s.BlockSvg.superClass_.setColour.call(this,n),n=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(n.style),this.style=n.style,this.styleName_=n.name,this.applyColour()},s.BlockSvg.prototype.setStyle=function(n){var l=this.workspace.getRenderer().getConstants().getBlockStyle(n);if(this.styleName_=n,!l)throw Error("Invalid style name: "+n);this.hat=l.hat,this.pathObject.setStyle(l),this.colour_=l.colourPrimary,this.style=l,this.applyColour()},s.BlockSvg.prototype.bringToFront=function(){var n=this;do{var l=n.getSvgRoot(),u=l.parentNode,h=u.childNodes;h[h.length-1]!==l&&u.appendChild(l),n=n.getParent()}while(n)},s.BlockSvg.prototype.setPreviousStatement=function(n,l){s.BlockSvg.superClass_.setPreviousStatement.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setNextStatement=function(n,l){s.BlockSvg.superClass_.setNextStatement.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setOutput=function(n,l){s.BlockSvg.superClass_.setOutput.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setInputsInline=function(n){s.BlockSvg.superClass_.setInputsInline.call(this,n),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.removeInput=function(n,l){return n=s.BlockSvg.superClass_.removeInput.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours()),n},s.BlockSvg.prototype.moveNumberedInputBefore=function(n,l){s.BlockSvg.superClass_.moveNumberedInputBefore.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.appendInput_=function(n,l){return n=s.BlockSvg.superClass_.appendInput_.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours()),n},s.BlockSvg.prototype.setConnectionTracking=function(n){if(this.previousConnection&&this.previousConnection.setTracking(n),this.outputConnection&&this.outputConnection.setTracking(n),this.nextConnection){this.nextConnection.setTracking(n);var l=this.nextConnection.targetBlock();l&&l.setConnectionTracking(n)}if(!this.collapsed_)for(l=0;l<this.inputList.length;l++){var u=this.inputList[l].connection;u&&(u.setTracking(n),(u=u.targetBlock())&&u.setConnectionTracking(n))}},s.BlockSvg.prototype.getConnections_=function(n){var l=[];if((n||this.rendered)&&(this.outputConnection&&l.push(this.outputConnection),this.previousConnection&&l.push(this.previousConnection),this.nextConnection&&l.push(this.nextConnection),n||!this.collapsed_)){n=0;for(var u;u=this.inputList[n];n++)u.connection&&l.push(u.connection)}return l},s.BlockSvg.prototype.lastConnectionInStack=function(n){return s.BlockSvg.superClass_.lastConnectionInStack.call(this,n)},s.BlockSvg.prototype.getMatchingConnection=function(n,l){return s.BlockSvg.superClass_.getMatchingConnection.call(this,n,l)},s.BlockSvg.prototype.makeConnection_=function(n){return new s.RenderedConnection(this,n)},s.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var n=this.getRootBlock();if(!n.isInFlyout)for(var h,l=this.getConnections_(!1),u=0;h=l[u];u++){h.isConnected()&&h.isSuperior()&&h.targetBlock().bumpNeighbours();for(var M,_=h.neighbours(s.SNAP_RADIUS),b=0;M=_[b];b++)h.isConnected()&&M.isConnected()||M.getSourceBlock().getRootBlock()!=n&&(h.isSuperior()?M.bumpAwayFrom(h):h.bumpAwayFrom(M))}}},s.BlockSvg.prototype.scheduleSnapAndBump=function(){var n=this,l=s.Events.getGroup();setTimeout(function(){s.Events.setGroup(l),n.snapToGrid(),s.Events.setGroup(!1)},s.BUMP_DELAY/2),setTimeout(function(){s.Events.setGroup(l),n.bumpNeighbours(),s.Events.setGroup(!1)},s.BUMP_DELAY)},s.BlockSvg.prototype.positionNearConnection=function(n,l){n.type!=s.connectionTypes.NEXT_STATEMENT&&n.type!=s.connectionTypes.INPUT_VALUE||this.moveBy(l.x-n.x,l.y-n.y)},s.BlockSvg.prototype.getParent=function(){return s.BlockSvg.superClass_.getParent.call(this)},s.BlockSvg.prototype.getRootBlock=function(){return s.BlockSvg.superClass_.getRootBlock.call(this)},s.BlockSvg.prototype.render=function(n){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,s.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==n){var l=this.getParent();l?l.render(!0):this.workspace.resizeContents()}s.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},s.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(s.MarkerManager.LOCAL_MARKER).draw()},s.BlockSvg.prototype.updateConnectionLocations_=function(){var n=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(n),this.outputConnection&&this.outputConnection.moveToOffset(n);for(var l=0;l<this.inputList.length;l++){var u=this.inputList[l].connection;u&&(u.moveToOffset(n),u.isConnected()&&u.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(n),this.nextConnection.isConnected()&&this.nextConnection.tighten())},s.BlockSvg.prototype.setCursorSvg=function(n){this.pathObject.setCursorSvg(n)},s.BlockSvg.prototype.setMarkerSvg=function(n){this.pathObject.setMarkerSvg(n)},s.BlockSvg.prototype.getHeightWidth=function(){var n=this.height,l=this.width,u=this.getNextBlock();if(u){u=u.getHeightWidth();var h=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;n+=u.height-h,l=Math.max(l,u.width)}return{height:n,width:l}},s.BlockSvg.prototype.fadeForReplacement=function(n){this.pathObject.updateReplacementFade(n)},s.BlockSvg.prototype.highlightShapeForInput=function(n,l){this.pathObject.updateShapeForInputHighlight(n,l)},s.ConnectionDB=function(n){this.connections_=[],this.connectionChecker_=n},s.ConnectionDB.prototype.addConnection=function(n,l){l=this.calculateIndexForYPos_(l),this.connections_.splice(l,0,n)},s.ConnectionDB.prototype.findIndexOfConnection_=function(n,l){if(!this.connections_.length)return-1;var u=this.calculateIndexForYPos_(l);if(u>=this.connections_.length)return-1;l=n.y;for(var h=u;0<=h&&this.connections_[h].y==l;){if(this.connections_[h]==n)return h;h--}for(h=u;h<this.connections_.length&&this.connections_[h].y==l;){if(this.connections_[h]==n)return h;h++}return-1},s.ConnectionDB.prototype.calculateIndexForYPos_=function(n){if(!this.connections_.length)return 0;for(var l=0,u=this.connections_.length;l<u;){var h=Math.floor((l+u)/2);if(this.connections_[h].y<n)l=h+1;else{if(!(this.connections_[h].y>n)){l=h;break}u=h}}return l},s.ConnectionDB.prototype.removeConnection=function(n,l){if(-1==(n=this.findIndexOfConnection_(n,l)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(n,1)},s.ConnectionDB.prototype.getNeighbours=function(n,l){function u(U){var V=_-h[U].x,J=b-h[U].y;return Math.sqrt(V*V+J*J)<=l&&H.push(h[U]),J<l}var h=this.connections_,_=n.x,b=n.y;n=0;for(var M=h.length-2,k=M;n<k;)h[k].y<b?n=k:M=k,k=Math.floor((n+M)/2);var H=[];if(M=n=k,h.length){for(;0<=n&&u(n);)n--;do{M++}while(M<h.length&&u(M))}return H},s.ConnectionDB.prototype.isInYRange_=function(n,l,u){return Math.abs(this.connections_[n].y-l)<=u},s.ConnectionDB.prototype.searchForClosest=function(n,l,u){if(!this.connections_.length)return{connection:null,radius:l};var h=n.y,_=n.x;n.x=_+u.x,n.y=h+u.y;var b=this.calculateIndexForYPos_(n.y);u=null;for(var k,M=l,H=b-1;0<=H&&this.isInYRange_(H,n.y,l);)this.connectionChecker_.canConnect(n,k=this.connections_[H],!0,M)&&(u=k,M=k.distanceFrom(n)),H--;for(;b<this.connections_.length&&this.isInYRange_(b,n.y,l);)this.connectionChecker_.canConnect(n,k=this.connections_[b],!0,M)&&(u=k,M=k.distanceFrom(n)),b++;return n.x=_,n.y=h,{connection:u,radius:M}},s.ConnectionDB.init=function(n){var l=[];return l[s.connectionTypes.INPUT_VALUE]=new s.ConnectionDB(n),l[s.connectionTypes.OUTPUT_VALUE]=new s.ConnectionDB(n),l[s.connectionTypes.NEXT_STATEMENT]=new s.ConnectionDB(n),l[s.connectionTypes.PREVIOUS_STATEMENT]=new s.ConnectionDB(n),l},s.Events.ThemeChange=function(n,l){s.Events.ThemeChange.superClass_.constructor.call(this,l),this.themeName=n},s.utils.object.inherits(s.Events.ThemeChange,s.Events.UiBase),s.Events.ThemeChange.prototype.type=s.Events.THEME_CHANGE,s.Events.ThemeChange.prototype.toJson=function(){var n=s.Events.ThemeChange.superClass_.toJson.call(this);return n.themeName=this.themeName,n},s.Events.ThemeChange.prototype.fromJson=function(n){s.Events.ThemeChange.superClass_.fromJson.call(this,n),this.themeName=n.themeName},s.registry.register(s.registry.Type.EVENT,s.Events.THEME_CHANGE,s.Events.ThemeChange),s.Events.ViewportChange=function(n,l,u,h,_){s.Events.ViewportChange.superClass_.constructor.call(this,h),this.viewTop=n,this.viewLeft=l,this.scale=u,this.oldScale=_},s.utils.object.inherits(s.Events.ViewportChange,s.Events.UiBase),s.Events.ViewportChange.prototype.type=s.Events.VIEWPORT_CHANGE,s.Events.ViewportChange.prototype.toJson=function(){var n=s.Events.ViewportChange.superClass_.toJson.call(this);return n.viewTop=this.viewTop,n.viewLeft=this.viewLeft,n.scale=this.scale,n.oldScale=this.oldScale,n},s.Events.ViewportChange.prototype.fromJson=function(n){s.Events.ViewportChange.superClass_.fromJson.call(this,n),this.viewTop=n.viewTop,this.viewLeft=n.viewLeft,this.scale=n.scale,this.oldScale=n.oldScale},s.registry.register(s.registry.Type.EVENT,s.Events.VIEWPORT_CHANGE,s.Events.ViewportChange),s.IMetricsManager=function(){},s.MetricsManager=function(n){this.workspace_=n},s.MetricsManager.prototype.getDimensionsPx_=function(n){var l=0,u=0;return n&&(l=n.getWidth(),u=n.getHeight()),new s.utils.Size(l,u)},s.MetricsManager.prototype.getFlyoutMetrics=function(n){return{width:(n=this.getDimensionsPx_(this.workspace_.getFlyout(n))).width,height:n.height,position:this.workspace_.toolboxPosition}},s.MetricsManager.prototype.getToolboxMetrics=function(){var n=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:n.width,height:n.height,position:this.workspace_.toolboxPosition}},s.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},s.MetricsManager.prototype.getAbsoluteMetrics=function(){var n=0,l=this.getToolboxMetrics(),u=this.getFlyoutMetrics(!0),h=!!this.workspace_.getToolbox(),_=!!this.workspace_.getFlyout(!0),b=h?l.position:u.position,M=b==s.utils.toolbox.Position.LEFT;return b=b==s.utils.toolbox.Position.TOP,h&&M?n=l.width:_&&M&&(n=u.width),M=0,h&&b?M=l.height:_&&b&&(M=u.height),{top:M,left:n}},s.MetricsManager.prototype.getViewMetrics=function(n){n=n?this.workspace_.scale:1;var l=this.getSvgMetrics(),u=this.getToolboxMetrics(),h=this.getFlyoutMetrics(!0),_=this.workspace_.getToolbox()?u.position:h.position;return this.workspace_.getToolbox()?_==s.utils.toolbox.Position.TOP||_==s.utils.toolbox.Position.BOTTOM?l.height-=u.height:(_==s.utils.toolbox.Position.LEFT||_==s.utils.toolbox.Position.RIGHT)&&(l.width-=u.width):this.workspace_.getFlyout(!0)&&(_==s.utils.toolbox.Position.TOP||_==s.utils.toolbox.Position.BOTTOM?l.height-=h.height:(_==s.utils.toolbox.Position.LEFT||_==s.utils.toolbox.Position.RIGHT)&&(l.width-=h.width)),{height:l.height/n,width:l.width/n,top:-this.workspace_.scrollY/n,left:-this.workspace_.scrollX/n}},s.MetricsManager.prototype.getContentMetrics=function(n){n=n?1:this.workspace_.scale;var l=this.workspace_.getBlocksBoundingBox();return{height:(l.bottom-l.top)*n,width:(l.right-l.left)*n,top:l.top*n,left:l.left*n}},s.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},s.MetricsManager.prototype.getComputedFixedEdges_=function(n){if(!this.hasFixedEdges())return{};var l=this.workspace_.isMovableHorizontally(),u=this.workspace_.isMovableVertically();n=n||this.getViewMetrics(!1);var h={};return u||(h.top=n.top,h.bottom=n.top+n.height),l||(h.left=n.left,h.right=n.left+n.width),h},s.MetricsManager.prototype.getPaddedContent_=function(n,l){var u=l.top+l.height,h=l.left+l.width,_=n.width,b=_/2,M=(n=n.height)/2;return{top:Math.min(l.top-M,u-n),bottom:Math.max(u+M,l.top+n),left:Math.min(l.left-b,h-_),right:Math.max(h+b,l.left+_)}},s.MetricsManager.prototype.getScrollMetrics=function(n,l,u){n=n?this.workspace_.scale:1,l=l||this.getViewMetrics(!1);var h=u||this.getContentMetrics();u=this.getComputedFixedEdges_(l),l=this.getPaddedContent_(l,h);var _=void 0!==u.left?u.left:l.left;return{top:(h=void 0!==u.top?u.top:l.top)/n,left:_/n,width:((void 0!==u.right?u.right:l.right)-_)/n,height:((void 0!==u.bottom?u.bottom:l.bottom)-h)/n}},s.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},s.MetricsManager.prototype.getMetrics=function(){var n=this.getToolboxMetrics(),l=this.getFlyoutMetrics(!0),u=this.getSvgMetrics(),h=this.getAbsoluteMetrics(),_=this.getViewMetrics(),b=this.getContentMetrics(),M=this.getScrollMetrics(!1,_,b);return{contentHeight:b.height,contentWidth:b.width,contentTop:b.top,contentLeft:b.left,scrollHeight:M.height,scrollWidth:M.width,scrollTop:M.top,scrollLeft:M.left,viewHeight:_.height,viewWidth:_.width,viewTop:_.top,viewLeft:_.left,absoluteTop:h.top,absoluteLeft:h.left,svgHeight:u.height,svgWidth:u.width,toolboxWidth:n.width,toolboxHeight:n.height,toolboxPosition:n.position,flyoutWidth:l.width,flyoutHeight:l.height}},s.registry.register(s.registry.Type.METRICS_MANAGER,s.registry.DEFAULT,s.MetricsManager),s.FlyoutMetricsManager=function(n,l){this.flyout_=l,s.FlyoutMetricsManager.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.FlyoutMetricsManager,s.MetricsManager),s.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var n=this.workspace_.getCanvas().getBBox()}catch(l){n={height:0,y:0,width:0,x:0}}return n},s.FlyoutMetricsManager.prototype.getContentMetrics=function(n){var l=this.getBoundingBox_();return{height:l.height*(n=n?1:this.workspace_.scale),width:l.width*n,top:l.y*n,left:l.x*n}},s.FlyoutMetricsManager.prototype.getScrollMetrics=function(n,l,u){return{height:((l=u||this.getContentMetrics()).height+2*(u=this.flyout_.MARGIN*this.workspace_.scale))/(n=n?this.workspace_.scale:1),width:(l.width+l.left+u)/n,top:0,left:0}},s.ThemeManager=function(n,l){this.workspace_=n,this.theme_=l,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},s.ThemeManager.prototype.getTheme=function(){return this.theme_},s.ThemeManager.prototype.setTheme=function(n){var u,l=this.theme_;for(this.theme_=n,(n=this.workspace_.getInjectionDiv())&&(l&&s.utils.dom.removeClass(n,l.getClassName()),s.utils.dom.addClass(n,this.theme_.getClassName())),l=0;n=this.subscribedWorkspaces_[l];l++)n.refreshTheme();for(l=0,n=Object.keys(this.componentDB_);u=n[l];l++)for(var _,h=0;_=this.componentDB_[u][h];h++){var b=_.element;_=_.propertyName;var M=this.theme_&&this.theme_.getComponentStyle(u);b.style[_]=M||""}s.hideChaff()},s.ThemeManager.prototype.subscribeWorkspace=function(n){this.subscribedWorkspaces_.push(n)},s.ThemeManager.prototype.unsubscribeWorkspace=function(n){if(0>(n=this.subscribedWorkspaces_.indexOf(n)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(n,1)},s.ThemeManager.prototype.subscribe=function(n,l,u){this.componentDB_[l]||(this.componentDB_[l]=[]),this.componentDB_[l].push({element:n,propertyName:u}),l=this.theme_&&this.theme_.getComponentStyle(l),n.style[u]=l||""},s.ThemeManager.prototype.unsubscribe=function(n){if(n)for(var h,l=Object.keys(this.componentDB_),u=0;h=l[u];u++){for(var _=this.componentDB_[h],b=_.length-1;0<=b;b--)_[b].element===n&&_.splice(b,1);this.componentDB_[h].length||delete this.componentDB_[h]}},s.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},s.TouchGesture=function(n,l){s.TouchGesture.superClass_.constructor.call(this,n,l),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},s.utils.object.inherits(s.TouchGesture,s.Gesture),s.TouchGesture.ZOOM_IN_MULTIPLIER=5,s.TouchGesture.ZOOM_OUT_MULTIPLIER=6,s.TouchGesture.prototype.doStart=function(n){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,s.TouchGesture.superClass_.doStart.call(this,n),!this.isEnding_&&s.Touch.isTouchEvent(n)&&this.handleTouchStart(n)},s.TouchGesture.prototype.bindMouseEvents=function(n){this.onStartWrapper_=s.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),n.preventDefault(),n.stopPropagation()},s.TouchGesture.prototype.handleStart=function(n){!this.isDragging()&&s.Touch.isTouchEvent(n)&&(this.handleTouchStart(n),this.isMultiTouch()&&s.longStop_())},s.TouchGesture.prototype.handleMove=function(n){this.isDragging()?s.Touch.shouldHandleEvent(n)&&s.TouchGesture.superClass_.handleMove.call(this,n):this.isMultiTouch()?(s.Touch.isTouchEvent(n)&&this.handleTouchMove(n),s.longStop_()):s.TouchGesture.superClass_.handleMove.call(this,n)},s.TouchGesture.prototype.handleUp=function(n){s.Touch.isTouchEvent(n)&&!this.isDragging()&&this.handleTouchEnd(n),!this.isMultiTouch()||this.isDragging()?s.Touch.shouldHandleEvent(n)&&s.TouchGesture.superClass_.handleUp.call(this,n):(n.preventDefault(),n.stopPropagation(),this.dispose())},s.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},s.TouchGesture.prototype.dispose=function(){s.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&s.browserEvents.unbind(this.onStartWrapper_)},s.TouchGesture.prototype.handleTouchStart=function(n){var l=s.Touch.getTouchIdentifierFromEvent(n);this.cachedPoints_[l]=this.getTouchPoint(n),2==(l=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=s.utils.Coordinate.distance(this.cachedPoints_[l[0]],this.cachedPoints_[l[1]]),this.isMultiTouch_=!0,n.preventDefault())},s.TouchGesture.prototype.handleTouchMove=function(n){var l=s.Touch.getTouchIdentifierFromEvent(n);this.cachedPoints_[l]=this.getTouchPoint(n),l=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===l.length?this.handlePinch_(n):s.TouchGesture.superClass_.handleMove.call(this,n)},s.TouchGesture.prototype.handlePinch_=function(n){var l=Object.keys(this.cachedPoints_);if(l=s.utils.Coordinate.distance(this.cachedPoints_[l[0]],this.cachedPoints_[l[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var u=l-this.previousScale_;u=0<u?u*s.TouchGesture.ZOOM_IN_MULTIPLIER:u*s.TouchGesture.ZOOM_OUT_MULTIPLIER;var h=this.startWorkspace_,_=s.utils.mouseToSvg(n,h.getParentSvg(),h.getInverseScreenCTM());h.zoom(_.x,_.y,u)}this.previousScale_=l,n.preventDefault()},s.TouchGesture.prototype.handleTouchEnd=function(n){n=s.Touch.getTouchIdentifierFromEvent(n),this.cachedPoints_[n]&&delete this.cachedPoints_[n],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},s.TouchGesture.prototype.getTouchPoint=function(n){return this.startWorkspace_?new s.utils.Coordinate(n.pageX?n.pageX:n.changedTouches[0].pageX,n.pageY?n.pageY:n.changedTouches[0].pageY):null},s.WorkspaceAudio=function(n){this.parentWorkspace_=n,this.SOUNDS_=Object.create(null)},s.WorkspaceAudio.prototype.lastSound_=null,s.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},s.WorkspaceAudio.prototype.load=function(n,l){if(n.length){try{var u=new s.utils.global.Audio}catch(k){return}for(var h,_=0;_<n.length;_++){var b=n[_],M=b.match(/\.(\w+)$/);if(M&&u.canPlayType("audio/"+M[1])){h=new s.utils.global.Audio(b);break}}h&&h.play&&(this.SOUNDS_[l]=h)}},s.WorkspaceAudio.prototype.preload=function(){for(var n in this.SOUNDS_){var l=this.SOUNDS_[n];l.volume=.01;var u=l.play();if(void 0!==u?u.then(l.pause).catch(function(){}):l.pause(),s.utils.userAgent.IPAD||s.utils.userAgent.IPHONE)break}},s.WorkspaceAudio.prototype.play=function(n,l){var u=this.SOUNDS_[n];u?(n=new Date,null!=this.lastSound_&&n-this.lastSound_<s.SOUND_LIMIT||(this.lastSound_=n,(u=s.utils.userAgent.IPAD||s.utils.userAgent.ANDROID?u:u.cloneNode()).volume=void 0===l?1:l,u.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(n,l)},s.WorkspaceSvg=function(n,l,u){s.WorkspaceSvg.superClass_.constructor.call(this,n),this.metricsManager_=new(s.registry.getClassFromOptions(s.registry.Type.METRICS_MANAGER,n,!0))(this),this.getMetrics=n.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=n.setMetrics||s.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new s.ComponentManager,this.connectionDBList=s.ConnectionDB.init(this.connectionChecker),l&&(this.blockDragSurface_=l),u&&(this.workspaceDragSurface_=u),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&s.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new s.WorkspaceAudio(n.parentWorkspace),this.grid_=this.options.gridPattern?new s.Grid(this.options.gridPattern,n.gridOptions):null,this.markerManager_=new s.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),s.Variables&&s.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(s.VARIABLE_CATEGORY_NAME,s.Variables.flyoutCategory),s.VariablesDynamic&&s.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(s.VARIABLE_DYNAMIC_CATEGORY_NAME,s.VariablesDynamic.flyoutCategory),s.Procedures&&s.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(s.PROCEDURE_CATEGORY_NAME,s.Procedures.flyoutCategory),this.addChangeListener(s.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new s.ThemeManager(this,this.options.theme||s.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=s.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new s.utils.Size(0,0)},s.utils.object.inherits(s.WorkspaceSvg,s.Workspace),s.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,s.WorkspaceSvg.prototype.rendered=!0,s.WorkspaceSvg.prototype.isVisible_=!0,s.WorkspaceSvg.prototype.isFlyout=!1,s.WorkspaceSvg.prototype.isMutator=!1,s.WorkspaceSvg.prototype.resizesEnabled_=!0,s.WorkspaceSvg.prototype.scrollX=0,s.WorkspaceSvg.prototype.scrollY=0,s.WorkspaceSvg.prototype.startScrollX=0,s.WorkspaceSvg.prototype.startScrollY=0,s.WorkspaceSvg.prototype.dragDeltaXY_=null,s.WorkspaceSvg.prototype.scale=1,s.WorkspaceSvg.prototype.oldScale_=1,s.WorkspaceSvg.prototype.oldTop_=0,s.WorkspaceSvg.prototype.oldLeft_=0,s.WorkspaceSvg.prototype.trashcan=null,s.WorkspaceSvg.prototype.scrollbar=null,s.WorkspaceSvg.prototype.flyout_=null,s.WorkspaceSvg.prototype.toolbox_=null,s.WorkspaceSvg.prototype.currentGesture_=null,s.WorkspaceSvg.prototype.blockDragSurface_=null,s.WorkspaceSvg.prototype.workspaceDragSurface_=null,s.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,s.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,s.WorkspaceSvg.prototype.injectionDiv_=null,s.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,s.WorkspaceSvg.prototype.targetWorkspace=null,s.WorkspaceSvg.prototype.inverseScreenCTM_=null,s.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,s.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},s.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},s.WorkspaceSvg.prototype.setMetricsManager=function(n){this.metricsManager_=n,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},s.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},s.WorkspaceSvg.prototype.setCursorSvg=function(n){this.markerManager_.setCursorSvg(n)},s.WorkspaceSvg.prototype.setMarkerSvg=function(n){this.markerManager_.setMarkerSvg(n)},s.WorkspaceSvg.prototype.getMarker=function(n){return this.markerManager_?this.markerManager_.getMarker(n):null},s.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},s.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},s.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},s.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},s.WorkspaceSvg.prototype.setTheme=function(n){n||(n=s.Themes.Classic),this.themeManager_.setTheme(n)},s.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(l){return!!l.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var n=new(s.Events.get(s.Events.THEME_CHANGE))(this.getTheme().name,this.id);s.Events.fire(n)},s.WorkspaceSvg.prototype.updateBlockStyles_=function(n){for(var u,l=0;u=n[l];l++){var h=u.getStyleName();h&&(u.setStyle(h),u.mutator&&u.mutator.updateBlockStyle())}},s.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var n=this.getParentSvg().getScreenCTM();n&&(this.inverseScreenCTM_=n.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},s.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},s.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},s.WorkspaceSvg.prototype.getSvgXY=function(n){var l=0,u=0,h=1;(s.utils.dom.containsNode(this.getCanvas(),n)||s.utils.dom.containsNode(this.getBubbleCanvas(),n))&&(h=this.scale);do{var _=s.utils.getRelativeXY(n);(n==this.getCanvas()||n==this.getBubbleCanvas())&&(h=1),l+=_.x*h,u+=_.y*h,n=n.parentNode}while(n&&n!=this.getParentSvg());return new s.utils.Coordinate(l,u)},s.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var n=this.cachedParentSvgSize_;return new s.utils.Size(n.width,n.height)},s.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return s.utils.getInjectionDivXY_(this.getCanvas())},s.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var n=this.svgGroup_;n;){if(-1!=(" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=n;break}n=n.parentNode}return this.injectionDiv_},s.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},s.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(n){this.resizeHandlerWrapper_=n},s.WorkspaceSvg.prototype.createDom=function(n){return this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyWorkspace"},null),n&&(this.svgBackground_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{height:"100%",width:"100%",class:n},this.svgGroup_),"blocklyMainBackground"==n&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(s.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),s.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(s.registry.getClassFromOptions(s.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(n=s.registry.getClassFromOptions(s.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new n),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},s.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(s.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),s.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var n=this.getParentSvg();n&&n.parentNode&&s.utils.dom.removeNode(n.parentNode)}this.resizeHandlerWrapper_&&(s.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},s.WorkspaceSvg.prototype.newBlock=function(n,l){return new s.BlockSvg(this,n,l)},s.WorkspaceSvg.prototype.addTrashcan=function(){if(!s.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new s.Trashcan(this);var n=this.trashcan.createDom();this.svgGroup_.insertBefore(n,this.svgBlockCanvas_)},s.WorkspaceSvg.prototype.addZoomControls=function(){if(!s.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new s.ZoomControls(this);var n=this.zoomControls_.createDom();this.svgGroup_.appendChild(n)},s.WorkspaceSvg.prototype.addFlyout=function(n){var l=new s.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return l.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(l):new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(l),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(n)},s.WorkspaceSvg.prototype.getFlyout=function(n){return this.flyout_||n?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},s.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},s.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},s.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},s.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var _,n=this.componentManager_.getComponents(s.ComponentManager.Capability.POSITIONABLE,!0),l=this.getMetricsManager().getUiMetrics(),u=[],h=0;_=n[h];h++)_.position(l,u),(_=_.getBoundingRectangle())&&u.push(_);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},s.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var n=s.utils.getDocumentScroll();s.utils.Coordinate.equals(this.lastRecordedPageScroll_,n)||(this.lastRecordedPageScroll_=n,this.updateScreenCalculations_())},s.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},s.WorkspaceSvg.prototype.setCachedParentSvgSize=function(n,l){var u=this.getParentSvg();n&&(this.cachedParentSvgSize_.width=n,u.cachedWidth_=n),l&&(this.cachedParentSvgSize_.height=l,u.cachedHeight_=l)},s.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},s.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var n=this.svgGroup_;n;){if("svg"==n.tagName){this.cachedParentSvg_=n;break}n=n.parentNode}return this.cachedParentSvg_},s.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(s.Events.isEnabled()){var n=this.scale,l=-this.scrollY,u=-this.scrollX;if(!(n==this.oldScale_&&1>Math.abs(l-this.oldTop_)&&1>Math.abs(u-this.oldLeft_))){var h=new(s.Events.get(s.Events.VIEWPORT_CHANGE))(l,u,n,this.id,this.oldScale_);this.oldScale_=n,this.oldTop_=l,this.oldLeft_=u,s.Events.fire(h)}}},s.WorkspaceSvg.prototype.translate=function(n,l){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(n,l);else{var u="translate("+n+","+l+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",u),this.svgBubbleCanvas_.setAttribute("transform",u)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(n,l,this.scale),this.grid_&&this.grid_.moveTo(n,l),this.maybeFireViewportChangeEvent()},s.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var n=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",n="translate("+n.x+","+n.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",n)}},s.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var n=this.svgBlockCanvas_.previousSibling,l=parseInt(this.getParentSvg().getAttribute("width"),10),u=parseInt(this.getParentSvg().getAttribute("height"),10),h=s.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),n,l,u,this.scale),this.workspaceDragSurface_.translateSurface(h.x,h.y)}},s.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},s.WorkspaceSvg.prototype.getWidth=function(){var n=this.getMetrics();return n?n.viewWidth/this.scale:0},s.WorkspaceSvg.prototype.setVisible=function(n){if(this.isVisible_=n,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(n),this.getFlyout()&&this.getFlyout().setContainerVisible(n),this.getParentSvg().style.display=n?"block":"none",this.toolbox_&&this.toolbox_.setVisible(n),n){for(var l=(n=this.getAllBlocks(!1)).length-1;0<=l;l--)n[l].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else s.hideChaff(!0)},s.WorkspaceSvg.prototype.render=function(){for(var n=this.getAllBlocks(!1),l=n.length-1;0<=l;l--)n[l].render(!1);if(this.currentGesture_)for(n=this.currentGesture_.getInsertionMarkers(),l=0;l<n.length;l++)n[l].render(!1);this.markerManager_.updateMarkers()},s.WorkspaceSvg.prototype.highlightBlock=function(n,l){if(void 0===l){for(var h,u=0;h=this.highlightedBlocks_[u];u++)h.setHighlighted(!1);this.highlightedBlocks_.length=0}(h=n?this.getBlockById(n):null)&&((n=void 0===l||l)?-1==this.highlightedBlocks_.indexOf(h)&&this.highlightedBlocks_.push(h):s.utils.arrayRemove(this.highlightedBlocks_,h),h.setHighlighted(n))},s.WorkspaceSvg.prototype.paste=function(n){!this.rendered||!n.tagName||n.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==n.tagName.toLowerCase()?this.pasteWorkspaceComment_(n):this.pasteBlock_(n))},s.WorkspaceSvg.prototype.pasteBlock_=function(n){s.Events.disable();try{var l=s.Xml.domToBlock(n,this),u=parseInt(n.getAttribute("x"),10),h=parseInt(n.getAttribute("y"),10);if(!isNaN(u)&&!isNaN(h)){this.RTL&&(u=-u);do{n=!1;for(var M,_=this.getAllBlocks(!1),b=0;M=_[b];b++){var k=M.getRelativeToSurfaceXY();if(1>=Math.abs(u-k.x)&&1>=Math.abs(h-k.y)){n=!0;break}}if(!n){var U,H=l.getConnections_(!1);for(b=0;U=H[b];b++)if(U.closest(s.SNAP_RADIUS,new s.utils.Coordinate(u,h)).connection){n=!0;break}}n&&(u=this.RTL?u-s.SNAP_RADIUS:u+s.SNAP_RADIUS,h+=2*s.SNAP_RADIUS)}while(n);l.moveBy(u,h)}}finally{s.Events.enable()}s.Events.isEnabled()&&!l.isShadow()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(l)),l.select()},s.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(n){s.Events.disable();try{var l=s.WorkspaceCommentSvg.fromXml(n,this),u=parseInt(n.getAttribute("x"),10),h=parseInt(n.getAttribute("y"),10);isNaN(u)||isNaN(h)||(this.RTL&&(u=-u),l.moveBy(u+50,h+50))}finally{s.Events.enable()}s.Events.isEnabled()&&s.WorkspaceComment.fireCreateEvent(l),l.select()},s.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var n=this.isFlyout?this.targetWorkspace:this;n&&!n.currentGesture_&&n.toolbox_&&n.toolbox_.getFlyout()&&n.toolbox_.refreshSelection()},s.WorkspaceSvg.prototype.renameVariableById=function(n,l){s.WorkspaceSvg.superClass_.renameVariableById.call(this,n,l),this.refreshToolboxSelection()},s.WorkspaceSvg.prototype.deleteVariableById=function(n){s.WorkspaceSvg.superClass_.deleteVariableById.call(this,n),this.refreshToolboxSelection()},s.WorkspaceSvg.prototype.createVariable=function(n,l,u){return n=s.WorkspaceSvg.superClass_.createVariable.call(this,n,l,u),this.refreshToolboxSelection(),n},s.WorkspaceSvg.prototype.recordDeleteAreas=function(){s.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},s.WorkspaceSvg.prototype.recordDragTargets=function(){var n=this.componentManager_.getComponents(s.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var u,l=0;u=n[l];l++){var h=u.getClientRect();h&&this.dragTargetAreas_.push({component:u,clientRect:h})}},s.WorkspaceSvg.prototype.getDragTarget=function(n){for(var u,l=0;u=this.dragTargetAreas_[l];l++)if(u.clientRect.contains(n.clientX,n.clientY))return u.component;return null},s.WorkspaceSvg.prototype.onMouseDown_=function(n){var l=this.getGesture(n);l&&l.handleWsStart(n,this)},s.WorkspaceSvg.prototype.startDrag=function(n,l){(n=s.utils.mouseToSvg(n,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,n.y/=this.scale,this.dragDeltaXY_=s.utils.Coordinate.difference(l,n)},s.WorkspaceSvg.prototype.moveDrag=function(n){return(n=s.utils.mouseToSvg(n,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,n.y/=this.scale,s.utils.Coordinate.sum(this.dragDeltaXY_,n)},s.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},s.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},s.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},s.WorkspaceSvg.prototype.isMovableHorizontally=function(){var n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollHorizontally())},s.WorkspaceSvg.prototype.isMovableVertically=function(){var n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollVertically())},s.WorkspaceSvg.prototype.onMouseWheel_=function(n){if(s.Gesture.inProgress())n.preventDefault(),n.stopPropagation();else{var l=this.options.zoomOptions&&this.options.zoomOptions.wheel,u=this.options.moveOptions&&this.options.moveOptions.wheel;if(l||u){var h=s.utils.getScrollDeltaPixels(n);!l||!n.ctrlKey&&u?(l=this.scrollX-h.x,u=this.scrollY-h.y,n.shiftKey&&!h.x&&(l=this.scrollX-h.y,u=this.scrollY),this.scroll(l,u)):(h=-h.y/50,l=s.utils.mouseToSvg(n,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(l.x,l.y,h)),n.preventDefault()}}},s.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var n=this.getTopBoundedElements();if(!n.length)return new s.utils.Rect(0,0,0,0);for(var l=n[0].getBoundingRectangle(),u=1;u<n.length;u++){var h=n[u];h.isInsertionMarker&&h.isInsertionMarker()||((h=h.getBoundingRectangle()).top<l.top&&(l.top=h.top),h.bottom>l.bottom&&(l.bottom=h.bottom),h.left<l.left&&(l.left=h.left),h.right>l.right&&(l.right=h.right))}return l},s.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),s.Events.setGroup(!0);for(var h,n=this.getTopBlocks(!0),l=0,u=0;h=n[u];u++)if(h.isMovable()){var _=h.getRelativeToSurfaceXY();h.moveBy(-_.x,l-_.y),h.snapToGrid(),l=h.getRelativeToSurfaceXY().y+h.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}s.Events.setGroup(!1),this.setResizesEnabled(!0)},s.WorkspaceSvg.prototype.showContextMenu=function(n){if(!this.options.readOnly&&!this.isFlyout){var l=s.ContextMenuRegistry.registry.getContextMenuOptions(s.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(l,n),s.ContextMenu.show(n,l,this.RTL)}},s.WorkspaceSvg.prototype.updateToolbox=function(n){if(n=s.utils.toolbox.convertToolboxDefToJson(n)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(s.utils.toolbox.hasCategories(n)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=n,this.toolbox_.render(n)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=n,this.flyout_.show(n)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},s.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(s.mainWorkspace=this,this.setBrowserFocus())},s.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(n){try{this.getParentSvg().parentNode.setActive()}catch(l){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},s.WorkspaceSvg.prototype.zoom=function(n,l,u){u=Math.pow(this.options.zoomOptions.scaleSpeed,u);var h=this.scale*u;if(this.scale!=h){h>this.options.zoomOptions.maxScale?u=this.options.zoomOptions.maxScale/this.scale:h<this.options.zoomOptions.minScale&&(u=this.options.zoomOptions.minScale/this.scale);var _=this.getCanvas().getCTM(),b=this.getParentSvg().createSVGPoint();b.x=n,b.y=l,b=b.matrixTransform(_.inverse()),_=_.translate((n=b.x)*(1-u),(l=b.y)*(1-u)).scale(u),this.scrollX=_.e,this.scrollY=_.f,this.setScale(h)}},s.WorkspaceSvg.prototype.zoomCenter=function(n){var l=this.getMetrics();if(this.flyout_){var u=l.svgWidth?l.svgWidth/2:0;l=l.svgHeight?l.svgHeight/2:0}else u=l.viewWidth/2+l.absoluteLeft,l=l.viewHeight/2+l.absoluteTop;this.zoom(u,l,n)},s.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var n=this.getMetrics(),l=n.viewWidth;n=n.viewHeight;var u=this.getBlocksBoundingBox(),h=u.right-u.left;if(u=u.bottom-u.top,h){this.flyout_&&(this.horizontalLayout?(n+=this.flyout_.getHeight(),u+=this.flyout_.getHeight()/this.scale):(l+=this.flyout_.getWidth(),h+=this.flyout_.getWidth()/this.scale)),l/=h,n/=u,s.Events.disable();try{this.setScale(Math.min(l,n)),this.scrollCenter()}finally{s.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},s.WorkspaceSvg.prototype.beginCanvasTransition=function(){s.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),s.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},s.WorkspaceSvg.prototype.endCanvasTransition=function(){s.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),s.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},s.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var n=this.getMetrics(),l=(n.scrollWidth-n.viewWidth)/2,u=(n.scrollHeight-n.viewHeight)/2;this.scroll(l=-l-n.scrollLeft,u=-u-n.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},s.WorkspaceSvg.prototype.centerOnBlock=function(n){if(this.isMovable()){if(n=n?this.getBlockById(n):null){var l=n.getRelativeToSurfaceXY(),u=n.getHeightWidth(),h=this.scale;n=(l.x+(this.RTL?-1:1)*u.width/2)*h,l=(l.y+u.height/2)*h,u=this.getMetrics(),this.scroll(-(n-u.viewWidth/2),-(l-u.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},s.WorkspaceSvg.prototype.setScale=function(n){this.options.zoomOptions.maxScale&&n>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&n<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale),this.scale=n,s.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),n=this.getMetrics(),this.scrollX-=n.absoluteLeft,this.scrollY-=n.absoluteTop,n.viewLeft+=n.absoluteLeft,n.viewTop+=n.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(n):this.scrollbar.resizeContent(n))},s.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},s.WorkspaceSvg.prototype.scroll=function(n,l){s.hideChaff(!0);var u=this.getMetrics();n=Math.min(n,-u.scrollLeft),l=Math.min(l,-u.scrollTop);var h=u.scrollTop+Math.max(0,u.scrollHeight-u.viewHeight);n=Math.max(n,-(u.scrollLeft+Math.max(0,u.scrollWidth-u.viewWidth))),l=Math.max(l,-h),this.scrollX=n,this.scrollY=l,this.scrollbar&&this.scrollbar.set(-(n+u.scrollLeft),-(l+u.scrollTop),!1),this.translate(n+=u.absoluteLeft,l+=u.absoluteTop)},s.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(n){var l=this.getMetrics();"number"==typeof n.x&&(this.scrollX=-(l.scrollLeft+(l.scrollWidth-l.viewWidth)*n.x)),"number"==typeof n.y&&(this.scrollY=-(l.scrollTop+(l.scrollHeight-l.viewHeight)*n.y)),this.translate(this.scrollX+l.absoluteLeft,this.scrollY+l.absoluteTop)},s.WorkspaceSvg.prototype.getBlockById=function(n){return s.WorkspaceSvg.superClass_.getBlockById.call(this,n)},s.WorkspaceSvg.prototype.getTopBlocks=function(n){return s.WorkspaceSvg.superClass_.getTopBlocks.call(this,n)},s.WorkspaceSvg.prototype.addTopBlock=function(n){this.addTopBoundedElement(n),s.WorkspaceSvg.superClass_.addTopBlock.call(this,n)},s.WorkspaceSvg.prototype.removeTopBlock=function(n){this.removeTopBoundedElement(n),s.WorkspaceSvg.superClass_.removeTopBlock.call(this,n)},s.WorkspaceSvg.prototype.addTopComment=function(n){this.addTopBoundedElement(n),s.WorkspaceSvg.superClass_.addTopComment.call(this,n)},s.WorkspaceSvg.prototype.removeTopComment=function(n){this.removeTopBoundedElement(n),s.WorkspaceSvg.superClass_.removeTopComment.call(this,n)},s.WorkspaceSvg.prototype.addTopBoundedElement=function(n){this.topBoundedElements_.push(n)},s.WorkspaceSvg.prototype.removeTopBoundedElement=function(n){s.utils.arrayRemove(this.topBoundedElements_,n)},s.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},s.WorkspaceSvg.prototype.setResizesEnabled=function(n){var l=!this.resizesEnabled_&&n;this.resizesEnabled_=n,l&&this.resizeContents()},s.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),s.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},s.WorkspaceSvg.prototype.registerButtonCallback=function(n,l){if("function"!=typeof l)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[n]=l},s.WorkspaceSvg.prototype.getButtonCallback=function(n){return(n=this.flyoutButtonCallbacks_[n])?n:null},s.WorkspaceSvg.prototype.removeButtonCallback=function(n){this.flyoutButtonCallbacks_[n]=null},s.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(n,l){if("function"!=typeof l)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[n]=l},s.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(n){return this.toolboxCategoryCallbacks_[n]||null},s.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(n){this.toolboxCategoryCallbacks_[n]=null},s.WorkspaceSvg.prototype.getGesture=function(n){var l="mousedown"==n.type||"touchstart"==n.type||"pointerdown"==n.type,u=this.currentGesture_;return u?l&&u.hasStarted()?(console.warn("Tried to start the same gesture twice."),u.cancel(),null):u:l?this.currentGesture_=new s.TouchGesture(n,this):null},s.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},s.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},s.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},s.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},s.inject=function(n,l){if(s.checkBlockColourConstants(),"string"==typeof n&&(n=document.getElementById(n)||document.querySelector(n)),!n||!s.utils.dom.containsNode(document,n))throw Error("Error: container is not in current document.");l=new s.Options(l||{});var u=document.createElement("div");u.className="injectionDiv",u.tabIndex=0,s.utils.aria.setState(u,s.utils.aria.State.LABEL,s.Msg.WORKSPACE_ARIA_LABEL),n.appendChild(u),n=s.createDom_(u,l);var h=new s.BlockDragSurfaceSvg(u),_=new s.WorkspaceDragSurfaceSvg(u),b=s.createMainWorkspace_(n,l,h,_);return s.init_(b),s.mainWorkspace=b,s.svgResize(b),u.addEventListener("focusin",function(){s.mainWorkspace=b}),b},s.createDom_=function(n,l){n.setAttribute("dir","LTR"),s.Css.inject(l.hasCss,l.pathToMedia),n=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},n);var u=s.utils.dom.createSvgElement(s.utils.Svg.DEFS,{},n),h=String(Math.random()).substring(2);return l.gridPattern=s.Grid.createDom(h,l.gridOptions,u),n},s.createMainWorkspace_=function(n,l,u,h){return l.parentWorkspace=null,(l=new s.WorkspaceSvg(l,u,h)).scale=(u=l.options).zoomOptions.startScale,n.appendChild(l.createDom("blocklyMainBackground")),s.utils.dom.addClass(l.getInjectionDiv(),l.getRenderer().getClassName()),s.utils.dom.addClass(l.getInjectionDiv(),l.getTheme().getClassName()),!u.hasCategories&&u.languageTree&&(h=l.addFlyout(s.utils.Svg.SVG),s.utils.dom.insertAfter(h,n)),u.hasTrashcan&&l.addTrashcan(),u.zoomOptions&&u.zoomOptions.controls&&l.addZoomControls(),l.getThemeManager().subscribe(n,"workspaceBackgroundColour","background-color"),l.translate(0,0),l.addChangeListener(s.bumpIntoBoundsHandler_(l)),s.svgResize(l),s.WidgetDiv.createDom(),s.DropDownDiv.createDom(),s.Tooltip.createDom(),l},s.extractObjectFromEvent_=function(n,l){var u=null;switch(l.type){case s.Events.BLOCK_CREATE:case s.Events.BLOCK_MOVE:(u=n.getBlockById(l.blockId))&&(u=u.getRootBlock());break;case s.Events.COMMENT_CREATE:case s.Events.COMMENT_MOVE:u=n.getCommentById(l.commentId)}return u},s.bumpTopObjectsIntoBounds_=function(n){var l=n.getMetricsManager();if(l.hasFixedEdges()&&!n.isDragging()){l=l.getScrollMetrics(!0);for(var _,u=n.getTopBoundedElements(),h=0;_=u[h];h++)s.bumpObjectIntoBounds_(n,l,_)}},s.bumpIntoBoundsHandler_=function(n){return function(l){var u=n.getMetricsManager();if(u.hasFixedEdges()&&!n.isDragging())if(-1!==s.Events.BUMP_EVENTS.indexOf(l.type)){u=u.getScrollMetrics(!0);var h=s.extractObjectFromEvent_(n,l);if(h){var _=s.Events.getGroup();s.Events.setGroup(l.group),s.bumpObjectIntoBounds_(n,u,h)&&!l.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==_&&s.Events.setGroup(_)}}else l.type===s.Events.VIEWPORT_CHANGE&&l.scale>l.oldScale&&s.bumpTopObjectsIntoBounds_(n)}},s.bumpObjectIntoBounds_=function(n,l,u){var h=u.getBoundingRectangle(),_=h.right-h.left,b=s.utils.math.clamp(l.top,h.top,l.top+l.height-(h.bottom-h.top))-h.top,M=l.left;return l=l.left+l.width-_,n.RTL?M=Math.min(l,M):l=Math.max(M,l),!(!(n=s.utils.math.clamp(M,h.left,l)-h.left)&&!b||(u.moveBy(n,b),0))},s.init_=function(n){var l=n.options,u=n.getParentSvg();if(s.browserEvents.conditionalBind(u.parentNode,"contextmenu",null,function(_){s.utils.isTargetInput(_)||_.preventDefault()}),u=s.browserEvents.conditionalBind(window,"resize",null,function(){s.hideChaff(!0),s.svgResize(n),s.bumpTopObjectsIntoBounds_(n)}),n.setResizeHandlerWrapper(u),s.inject.bindDocumentEvents_(),l.languageTree){u=n.getToolbox();var h=n.getFlyout(!0);u?u.init():h&&(h.init(n),h.show(l.languageTree),"function"==typeof h.scrollToStart&&h.scrollToStart())}l.hasTrashcan&&n.trashcan.init(),l.zoomOptions&&l.zoomOptions.controls&&n.zoomControls_.init(),l.moveOptions&&l.moveOptions.scrollbars?(n.scrollbar=new s.ScrollbarPair(n,!0===l.moveOptions.scrollbars||!!l.moveOptions.scrollbars.horizontal,!0===l.moveOptions.scrollbars||!!l.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),n.scrollbar.resize()):n.setMetrics({x:.5,y:.5}),l.hasSounds&&s.inject.loadSounds_(l.pathToMedia,n)},s.inject.bindDocumentEvents_=function(){s.documentEventsBound_||(s.browserEvents.conditionalBind(document,"scroll",null,function(){for(var u,n=s.Workspace.getAll(),l=0;u=n[l];l++)u.updateInverseScreenCTM&&u.updateInverseScreenCTM()}),s.browserEvents.conditionalBind(document,"keydown",null,s.onKeyDown),s.browserEvents.bind(document,"touchend",null,s.longStop_),s.browserEvents.bind(document,"touchcancel",null,s.longStop_),s.utils.userAgent.IPAD&&s.browserEvents.conditionalBind(window,"orientationchange",document,function(){s.svgResize(s.getMainWorkspace())})),s.documentEventsBound_=!0},s.inject.loadSounds_=function(n,l){var u=l.getAudioManager();u.load([n+"click.mp3",n+"click.wav",n+"click.ogg"],"click"),u.load([n+"disconnect.wav",n+"disconnect.mp3",n+"disconnect.ogg"],"disconnect"),u.load([n+"delete.mp3",n+"delete.ogg",n+"delete.wav"],"delete");var h=[];n=function(){for(;h.length;)s.browserEvents.unbind(h.pop());u.preload()},h.push(s.browserEvents.conditionalBind(document,"mousemove",null,n,!0)),h.push(s.browserEvents.conditionalBind(document,"touchstart",null,n,!0))},s.Names=function(n,l){if(this.variablePrefix_=l||"",this.reservedDict_=Object.create(null),n)for(n=n.split(","),l=0;l<n.length;l++)this.reservedDict_[n[l]]=!0;this.reset()},s.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",s.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},s.Names.prototype.setVariableMap=function(n){this.variableMap_=n},s.Names.prototype.getNameForUserVariable_=function(n){return this.variableMap_?(n=this.variableMap_.getVariableById(n))?n.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},s.Names.prototype.populateVariables=function(n){n=s.Variables.allUsedVarModels(n);for(var l=0;l<n.length;l++)this.getName(n[l].getId(),s.VARIABLE_CATEGORY_NAME)},s.Names.prototype.populateProcedures=function(n){n=(n=s.Procedures.allProcedures(n))[0].concat(n[1]);for(var l=0;l<n.length;l++)this.getName(n[l][0],s.PROCEDURE_CATEGORY_NAME)},s.Names.prototype.getName=function(n,l){var u=n;l==s.VARIABLE_CATEGORY_NAME&&(n=this.getNameForUserVariable_(n))&&(u=n),n=u.toLowerCase();var h=l==s.VARIABLE_CATEGORY_NAME||l==s.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";l in this.db_||(this.db_[l]=Object.create(null));var _=this.db_[l];return n in _?h+_[n]:(l=this.getDistinctName(u,l),_[n]=l.substr(h.length),l)},s.Names.prototype.getUserNames=function(n){return Object.keys(this.db_[n]||{})},s.Names.prototype.getDistinctName=function(n,l){n=this.safeName_(n);for(var u="";this.dbReverse_[n+u]||n+u in this.reservedDict_;)u=u?u+1:2;return this.dbReverse_[n+=u]=!0,(l==s.VARIABLE_CATEGORY_NAME||l==s.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+n},s.Names.prototype.safeName_=function(n){return n?(n=encodeURI(n.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(n[0])&&(n="my_"+n)):n=s.Msg.UNNAMED_KEY||"unnamed",n},s.Names.equals=function(n,l){return n.toLowerCase()==l.toLowerCase()},s.Procedures={},s.Procedures.NAME_TYPE=s.PROCEDURE_CATEGORY_NAME,s.Procedures.DEFAULT_ARG="x",s.Procedures.allProcedures=function(n){var l=n.getBlocksByType("procedures_defnoreturn",!1).map(function(u){return u.getProcedureDef()});return n=n.getBlocksByType("procedures_defreturn",!1).map(function(u){return u.getProcedureDef()}),l.sort(s.Procedures.procTupleComparator_),n.sort(s.Procedures.procTupleComparator_),[l,n]},s.Procedures.procTupleComparator_=function(n,l){return n[0].localeCompare(l[0],void 0,{sensitivity:"base"})},s.Procedures.findLegalName=function(n,l){if(l.isInFlyout)return n;for(n=n||s.Msg.UNNAMED_KEY||"unnamed";!s.Procedures.isLegalName_(n,l.workspace,l);){var u=n.match(/^(.*?)(\d+)$/);n=u?u[1]+(parseInt(u[2],10)+1):n+"2"}return n},s.Procedures.isLegalName_=function(n,l,u){return!s.Procedures.isNameUsed(n,l,u)},s.Procedures.isNameUsed=function(n,l,u){l=l.getAllBlocks(!1);for(var h=0;h<l.length;h++)if(l[h]!=u&&l[h].getProcedureDef){var _=l[h].getProcedureDef();if(s.Names.equals(_[0],n))return!0}return!1},s.Procedures.rename=function(n){n=n.trim();var l=s.Procedures.findLegalName(n,this.getSourceBlock()),u=this.getValue();if(u!=n&&u!=l){n=this.getSourceBlock().workspace.getAllBlocks(!1);for(var h=0;h<n.length;h++)n[h].renameProcedure&&n[h].renameProcedure(u,l)}return l},s.Procedures.flyoutCategory=function(n){function l(b,M){for(var k=0;k<b.length;k++){var H=b[k][0],U=b[k][1],V=s.utils.xml.createElement("block");V.setAttribute("type",M),V.setAttribute("gap",16);var J=s.utils.xml.createElement("mutation");for(J.setAttribute("name",H),V.appendChild(J),H=0;H<U.length;H++){var X=s.utils.xml.createElement("arg");X.setAttribute("name",U[H]),J.appendChild(X)}u.push(V)}}var u=[];if(s.Blocks.procedures_defnoreturn){var h=s.utils.xml.createElement("block");h.setAttribute("type","procedures_defnoreturn"),h.setAttribute("gap",16);var _=s.utils.xml.createElement("field");_.setAttribute("name","NAME"),_.appendChild(s.utils.xml.createTextNode(s.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),h.appendChild(_),u.push(h)}return s.Blocks.procedures_defreturn&&((h=s.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),h.setAttribute("gap",16),(_=s.utils.xml.createElement("field")).setAttribute("name","NAME"),_.appendChild(s.utils.xml.createTextNode(s.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),h.appendChild(_),u.push(h)),s.Blocks.procedures_ifreturn&&((h=s.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),h.setAttribute("gap",16),u.push(h)),u.length&&u[u.length-1].setAttribute("gap",24),l((n=s.Procedures.allProcedures(n))[0],"procedures_callnoreturn"),l(n[1],"procedures_callreturn"),u},s.Procedures.updateMutatorFlyout_=function(n){for(var _,l=[],u=n.getBlocksByType("procedures_mutatorarg",!1),h=0;_=u[h];h++)l.push(_.getFieldValue("NAME"));u=s.utils.xml.createElement("xml"),(h=s.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(_=s.utils.xml.createElement("field")).setAttribute("name","NAME"),l=s.Variables.generateUniqueNameFromOptions(s.Procedures.DEFAULT_ARG,l),l=s.utils.xml.createTextNode(l),_.appendChild(l),h.appendChild(_),u.appendChild(h),n.updateToolbox(u)},s.Procedures.mutatorOpenListener=function(n){if(n.type==s.Events.BUBBLE_OPEN&&"mutator"===n.bubbleType&&n.isOpen){var l=(n=s.Workspace.getById(n.workspaceId).getBlockById(n.blockId)).type;("procedures_defnoreturn"==l||"procedures_defreturn"==l)&&(n=n.mutator.getWorkspace(),s.Procedures.updateMutatorFlyout_(n),n.addChangeListener(s.Procedures.mutatorChangeListener_))}},s.Procedures.mutatorChangeListener_=function(n){(n.type==s.Events.BLOCK_CREATE||n.type==s.Events.BLOCK_DELETE||n.type==s.Events.BLOCK_CHANGE)&&(n=s.Workspace.getById(n.workspaceId),s.Procedures.updateMutatorFlyout_(n))},s.Procedures.getCallers=function(n,l){var u=[];l=l.getAllBlocks(!1);for(var h=0;h<l.length;h++)if(l[h].getProcedureCall){var _=l[h].getProcedureCall();_&&s.Names.equals(_,n)&&u.push(l[h])}return u},s.Procedures.mutateCallers=function(n){var _,l=s.Events.recordUndo,u=n.getProcedureDef()[0],h=n.mutationToDom(!0);for(n=s.Procedures.getCallers(u,n.workspace),u=0;_=n[u];u++){var b=_.mutationToDom();b=b&&s.Xml.domToText(b),_.domToMutation(h);var M=_.mutationToDom();b!=(M=M&&s.Xml.domToText(M))&&(s.Events.recordUndo=!1,s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(_,"mutation",null,b,M)),s.Events.recordUndo=l)}},s.Procedures.getDefinition=function(n,l){l=l.getAllBlocks(!1);for(var u=0;u<l.length;u++)if(l[u].getProcedureDef){var h=l[u].getProcedureDef();if(h&&s.Names.equals(h[0],n))return l[u]}return null},s.ShortcutRegistry=function(){s.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},s.ShortcutRegistry.modifierKeys={Shift:s.utils.KeyCodes.SHIFT,Control:s.utils.KeyCodes.CTRL,Alt:s.utils.KeyCodes.ALT,Meta:s.utils.KeyCodes.META},s.ShortcutRegistry.prototype.register=function(n,l){if(this.registry_[n.name]&&!l)throw Error('Shortcut with name "'+n.name+'" already exists.');this.registry_[n.name]=n},s.ShortcutRegistry.prototype.unregister=function(n){return this.registry_[n]?(this.removeAllKeyMappings(n),delete this.registry_[n],!0):(console.warn('Keyboard shortcut with name "'+n+'" not found.'),!1)},s.ShortcutRegistry.prototype.addKeyMapping=function(n,l,u){n=String(n);var h=this.keyMap_[n];if(h&&!u)throw Error('Shortcut with name "'+l+'" collides with shortcuts '+h.toString());h&&u?h.unshift(l):this.keyMap_[n]=[l]},s.ShortcutRegistry.prototype.removeKeyMapping=function(n,l,u){var h=this.keyMap_[n];if(!h&&!u)return console.warn('No keyboard shortcut with name "'+l+'" registered with key code "'+n+'"'),!1;var _=h.indexOf(l);return-1<_?(h.splice(_,1),0==h.length&&delete this.keyMap_[n],!0):(u||console.warn('No keyboard shortcut with name "'+l+'" registered with key code "'+n+'"'),!1)},s.ShortcutRegistry.prototype.removeAllKeyMappings=function(n){for(var l in this.keyMap_)this.removeKeyMapping(l,n,!0)},s.ShortcutRegistry.prototype.setKeyMap=function(n){this.keyMap_=n},s.ShortcutRegistry.prototype.getKeyMap=function(){return s.utils.object.deepMerge(Object.create(null),this.keyMap_)},s.ShortcutRegistry.prototype.getRegistry=function(){return s.utils.object.deepMerge(Object.create(null),this.registry_)},s.ShortcutRegistry.prototype.onKeyDown=function(n,l){var u=this.serializeKeyEvent_(l);if(!(u=this.getShortcutNamesByKeyCode(u)))return!1;for(var _,h=0;_=u[h];h++)if((!(_=this.registry_[_]).preconditionFn||_.preconditionFn(n))&&_.callback&&_.callback(n,l,_))return!0;return!1},s.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(n){return this.keyMap_[n]||[]},s.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(n){var u,l=[];for(u in this.keyMap_)-1<this.keyMap_[u].indexOf(n)&&l.push(u);return l},s.ShortcutRegistry.prototype.serializeKeyEvent_=function(n){var u,l="";for(u in s.ShortcutRegistry.modifierKeys)n.getModifierState(u)&&(""!=l&&(l+="+"),l+=u);return""!=l&&n.keyCode?l=l+"+"+n.keyCode:n.keyCode&&(l=n.keyCode.toString()),l},s.ShortcutRegistry.prototype.checkModifiers_=function(n){for(var h,l=s.utils.object.values(s.ShortcutRegistry.modifierKeys),u=0;h=n[u];u++)if(0>l.indexOf(h))throw Error(h+" is not a valid modifier key.")},s.ShortcutRegistry.prototype.createSerializedKey=function(n,l){var u="";if(l)for(var h in this.checkModifiers_(l),s.ShortcutRegistry.modifierKeys)-1<l.indexOf(s.ShortcutRegistry.modifierKeys[h])&&(""!=u&&(u+="+"),u+=h);return""!=u&&n?u=u+"+"+n:n&&(u=n.toString()),u},new s.ShortcutRegistry,s.VariableModel=function(n,l,u,h){this.workspace=n,this.name=l,this.type=u||"",this.id_=h||s.utils.genUid(),s.Events.fire(new(s.Events.get(s.Events.VAR_CREATE))(this))},s.VariableModel.prototype.getId=function(){return this.id_},s.VariableModel.compareByName=function(n,l){return n.name.localeCompare(l.name,void 0,{sensitivity:"base"})},s.Variables={},s.Variables.NAME_TYPE=s.VARIABLE_CATEGORY_NAME,s.Variables.allUsedVarModels=function(n){var l=n.getAllBlocks(!1);n=Object.create(null);for(var u=0;u<l.length;u++){var h=l[u].getVarModels();if(h)for(var _=0;_<h.length;_++){var b=h[_],M=b.getId();M&&(n[M]=b)}}for(M in l=[],n)l.push(n[M]);return l},s.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},s.Variables.allDeveloperVariables=function(n){n=n.getAllBlocks(!1);for(var h,l=Object.create(null),u=0;h=n[u];u++){var _=h.getDeveloperVariables;if(!_&&h.getDeveloperVars&&(_=h.getDeveloperVars,s.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[h.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+h.type+"')"),s.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[h.type]=!0)),_)for(h=_(),_=0;_<h.length;_++)l[h[_]]=!0}return Object.keys(l)},s.Variables.flyoutCategory=function(n){var l=[],u=document.createElement("button");return u.setAttribute("text","%{BKY_NEW_VARIABLE}"),u.setAttribute("callbackKey","CREATE_VARIABLE"),n.registerButtonCallback("CREATE_VARIABLE",function(h){s.Variables.createVariableButtonHandler(h.getTargetWorkspace())}),l.push(u),n=s.Variables.flyoutCategoryBlocks(n),l.concat(n)},s.Variables.flyoutCategoryBlocks=function(n){var l=[];if(0<(n=n.getVariablesOfType("")).length){var u=n[n.length-1];if(s.Blocks.variables_set){var h=s.utils.xml.createElement("block");h.setAttribute("type","variables_set"),h.setAttribute("gap",s.Blocks.math_change?8:24),h.appendChild(s.Variables.generateVariableFieldDom(u)),l.push(h)}if(s.Blocks.math_change&&((h=s.utils.xml.createElement("block")).setAttribute("type","math_change"),h.setAttribute("gap",s.Blocks.variables_get?20:8),h.appendChild(s.Variables.generateVariableFieldDom(u)),u=s.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),h.appendChild(u),l.push(h)),s.Blocks.variables_get){n.sort(s.VariableModel.compareByName),u=0;for(var _;_=n[u];u++)(h=s.utils.xml.createElement("block")).setAttribute("type","variables_get"),h.setAttribute("gap",8),h.appendChild(s.Variables.generateVariableFieldDom(_)),l.push(h)}}return l},s.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",s.Variables.generateUniqueName=function(n){return s.Variables.generateUniqueNameFromOptions(s.Variables.VAR_LETTER_OPTIONS.charAt(0),n.getAllVariableNames())},s.Variables.generateUniqueNameFromOptions=function(n,l){if(!l.length)return n;for(var u=s.Variables.VAR_LETTER_OPTIONS,h="",_=u.indexOf(n);;){for(var b=!1,M=0;M<l.length;M++)if(l[M].toLowerCase()==n){b=!0;break}if(!b)return n;++_==u.length&&(_=0,h=Number(h)+1),n=u.charAt(_)+h}},s.Variables.createVariableButtonHandler=function(n,l,u){var h=u||"",_=function(b){s.Variables.promptName(s.Msg.NEW_VARIABLE_TITLE,b,function(M){if(M){var k=s.Variables.nameUsedWithAnyType(M,n);if(k){if(k.type==h)var H=s.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",k.name);else H=(H=s.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",k.name).replace("%2",k.type);s.alert(H,function(){_(M)})}else n.createVariable(M,h),l&&l(M)}else l&&l(null)})};_("")},s.Variables.createVariable=s.Variables.createVariableButtonHandler,s.Variables.renameVariable=function(n,l,u){var h=function(_){var b=s.Msg.RENAME_VARIABLE_TITLE.replace("%1",l.name);s.Variables.promptName(b,_,function(M){if(M){var k=s.Variables.nameUsedWithOtherType_(M,l.type,n);k?(k=s.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",k.name).replace("%2",k.type),s.alert(k,function(){h(M)})):(n.renameVariableById(l.getId(),M),u&&u(M))}else u&&u(null)})};h("")},s.Variables.promptName=function(n,l,u){s.prompt(n,l,function(h){h&&((h=h.replace(/[\s\xa0]+/g," ").trim())==s.Msg.RENAME_VARIABLE||h==s.Msg.NEW_VARIABLE)&&(h=null),u(h)})},s.Variables.nameUsedWithOtherType_=function(n,l,u){u=u.getVariableMap().getAllVariables(),n=n.toLowerCase();for(var _,h=0;_=u[h];h++)if(_.name.toLowerCase()==n&&_.type!=l)return _;return null},s.Variables.nameUsedWithAnyType=function(n,l){l=l.getVariableMap().getAllVariables(),n=n.toLowerCase();for(var h,u=0;h=l[u];u++)if(h.name.toLowerCase()==n)return h;return null},s.Variables.generateVariableFieldDom=function(n){var l=s.utils.xml.createElement("field");return l.setAttribute("name","VAR"),l.setAttribute("id",n.getId()),l.setAttribute("variabletype",n.type),n=s.utils.xml.createTextNode(n.name),l.appendChild(n),l},s.Variables.getOrCreateVariablePackage=function(n,l,u,h){var _=s.Variables.getVariable(n,l,u,h);return _||(_=s.Variables.createVariable_(n,l,u,h)),_},s.Variables.getVariable=function(n,l,u,h){var _=n.getPotentialVariableMap(),b=null;if(l&&(!(b=n.getVariableById(l))&&_&&(b=_.getVariableById(l)),b))return b;if(u){if(null==h)throw Error("Tried to look up a variable by name without a type");!(b=n.getVariable(u,h))&&_&&(b=_.getVariable(u,h))}return b},s.Variables.createVariable_=function(n,l,u,h){var _=n.getPotentialVariableMap();return u||(u=s.Variables.generateUniqueName(n.isFlyout?n.targetWorkspace:n)),_?_.createVariable(u,h,l):n.createVariable(u,h,l)},s.Variables.getAddedVariables=function(n,l){n=n.getAllVariables();var u=[];if(l.length!=n.length)for(var h=0;h<n.length;h++){var _=n[h];-1==l.indexOf(_)&&u.push(_)}return u},s.VERSION="6.20210701.0",s.mainWorkspace=null,s.selected=null,s.draggingConnections=[],s.clipboardXml_=null,s.clipboardSource_=null,s.clipboardTypeCounts_=null,s.cache3dSupported_=null,s.parentContainer=null,s.svgSize=function(n){return s.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new s.utils.Size(n.cachedWidth_,n.cachedHeight_)},s.resizeSvgContents=function(n){n.resizeContents()},s.svgResize=function(n){for(;n.options.parentWorkspace;)n=n.options.parentWorkspace;var l=n.getParentSvg(),u=n.getCachedParentSvgSize(),h=l.parentNode;if(h){var _=h.offsetWidth;h=h.offsetHeight,u.width!=_&&(l.setAttribute("width",_+"px"),n.setCachedParentSvgSize(_,null)),u.height!=h&&(l.setAttribute("height",h+"px"),n.setCachedParentSvgSize(null,h)),n.resize()}},s.onKeyDown=function(n){var l=s.mainWorkspace;l&&!(s.utils.isTargetInput(n)||l.rendered&&!l.isVisible())&&s.ShortcutRegistry.registry.onKeyDown(l,n)},s.deleteBlock=function(n){n.workspace.isFlyout||(s.Events.setGroup(!0),s.hideChaff(),n.dispose(!n.outputConnection,!0),s.Events.setGroup(!1))},s.copy=function(n){(n=n.toCopyData())&&(s.clipboardXml_=n.xml,s.clipboardSource_=n.source,s.clipboardTypeCounts_=n.typeCounts)},s.paste=function(){if(!s.clipboardXml_)return!1;var n=s.clipboardSource_;return n.isFlyout&&(n=n.targetWorkspace),!(!s.clipboardTypeCounts_||!n.isCapacityAvailable(s.clipboardTypeCounts_)||(s.Events.setGroup(!0),n.paste(s.clipboardXml_),s.Events.setGroup(!1),0))},s.duplicate=function(n){var l=s.clipboardXml_,u=s.clipboardSource_;s.copy(n),n.workspace.paste(s.clipboardXml_),s.clipboardXml_=l,s.clipboardSource_=u},s.onContextMenu_=function(n){s.utils.isTargetInput(n)||n.preventDefault()},s.hideChaff=function(n){s.Tooltip.hide(),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation();var l=!!n;s.getMainWorkspace().getComponentManager().getComponents(s.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(u){u.autoHide(l)})},s.getMainWorkspace=function(){return s.mainWorkspace},s.alert=function(n,l){alert(n),l&&l()},s.confirm=function(n,l){l(confirm(n))},s.prompt=function(n,l,u){u(prompt(n,l))},s.jsonInitFactory_=function(n){return function(){this.jsonInit(n)}},s.defineBlocksWithJsonArray=function(n){for(var l=0;l<n.length;l++){var u=n[l];if(u){var h=u.type;null==h||""===h?console.warn("Block definition #"+l+" in JSON array is missing a type attribute. Skipping."):(s.Blocks[h]&&console.warn("Block definition #"+l+' in JSON array overwrites prior definition of "'+h+'".'),s.Blocks[h]={init:s.jsonInitFactory_(u)})}else console.warn("Block definition #"+l+" in JSON array is "+u+". Skipping.")}},s.isNumber=function(n){return/^\s*-?\d+(\.\d+)?\s*$/.test(n)},s.hueToHex=function(n){return s.utils.colour.hsvToHex(n,s.HSV_SATURATION,255*s.HSV_VALUE)},s.checkBlockColourConstants=function(){s.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),s.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),s.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),s.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),s.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),s.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),s.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),s.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),s.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),s.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),s.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),s.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),s.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),s.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),s.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),s.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},s.checkBlockColourConstant_=function(n,l,u){for(var h="Blockly",_=s,b=0;b<l.length;++b)h+="."+l[b],_&&(_=_[l[b]]);_&&_!==u&&(n=(void 0===u?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",h).replace("%2",n),console.warn(n))},s.setParentContainer=function(n){s.parentContainer=n},s.bindEvent_=s.browserEvents.bind,s.unbindEvent_=s.browserEvents.unbind,s.bindEventWithChecks_=s.browserEvents.conditionalBind,s.ALIGN_LEFT=s.constants.ALIGN.LEFT,s.ALIGN_CENTRE=s.constants.ALIGN.CENTRE,s.ALIGN_RIGHT=s.constants.ALIGN.RIGHT,s.INPUT_VALUE=s.connectionTypes.INPUT_VALUE,s.OUTPUT_VALUE=s.connectionTypes.OUTPUT_VALUE,s.NEXT_STATEMENT=s.connectionTypes.NEXT_STATEMENT,s.PREVIOUS_STATEMENT=s.connectionTypes.PREVIOUS_STATEMENT,s.DUMMY_INPUT=s.inputTypes.DUMMY,s.TOOLBOX_AT_TOP=s.utils.toolbox.Position.TOP,s.TOOLBOX_AT_BOTTOM=s.utils.toolbox.Position.BOTTOM,s.TOOLBOX_AT_LEFT=s.utils.toolbox.Position.LEFT,s.TOOLBOX_AT_RIGHT=s.utils.toolbox.Position.RIGHT,s.Events.BubbleOpen=function(n,l,u){s.Events.BubbleOpen.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.isOpen=l,this.bubbleType=u},s.utils.object.inherits(s.Events.BubbleOpen,s.Events.UiBase),s.Events.BubbleOpen.prototype.type=s.Events.BUBBLE_OPEN,s.Events.BubbleOpen.prototype.toJson=function(){var n=s.Events.BubbleOpen.superClass_.toJson.call(this);return n.isOpen=this.isOpen,n.bubbleType=this.bubbleType,n.blockId=this.blockId,n},s.Events.BubbleOpen.prototype.fromJson=function(n){s.Events.BubbleOpen.superClass_.fromJson.call(this,n),this.isOpen=n.isOpen,this.bubbleType=n.bubbleType,this.blockId=n.blockId},s.registry.register(s.registry.Type.EVENT,s.Events.BUBBLE_OPEN,s.Events.BubbleOpen),s.Icon=function(n){this.block_=n,this.iconGroup_=null},s.Icon.prototype.collapseHidden=!0,s.Icon.prototype.SIZE=17,s.Icon.prototype.bubble_=null,s.Icon.prototype.iconXY_=null,s.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&s.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),s.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},s.Icon.prototype.dispose=function(){s.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},s.Icon.prototype.updateEditable=function(){},s.Icon.prototype.isVisible=function(){return!!this.bubble_},s.Icon.prototype.iconClick_=function(n){this.block_.workspace.isDragging()||this.block_.isInFlyout||s.utils.isRightButton(n)||this.setVisible(!this.isVisible())},s.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},s.Icon.prototype.setIconLocation=function(n){this.iconXY_=n,this.isVisible()&&this.bubble_.setAnchorLocation(n)},s.Icon.prototype.computeIconLocation=function(){var n=this.block_.getRelativeToSurfaceXY(),l=s.utils.getRelativeXY(this.iconGroup_);n=new s.utils.Coordinate(n.x+l.x+this.SIZE/2,n.y+l.y+this.SIZE/2),s.utils.Coordinate.equals(this.getIconLocation(),n)||this.setIconLocation(n)},s.Icon.prototype.getIconLocation=function(){return this.iconXY_},s.Icon.prototype.getCorrectedSize=function(){return new s.utils.Size(s.Icon.prototype.SIZE,s.Icon.prototype.SIZE-2)},s.Warning=function(n){s.Warning.superClass_.constructor.call(this,n),this.createIcon(),this.text_=Object.create(null)},s.utils.object.inherits(s.Warning,s.Icon),s.Warning.prototype.collapseHidden=!1,s.Warning.prototype.drawIcon_=function(n){s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},n),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},n),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},n)},s.Warning.prototype.setVisible=function(n){n!=this.isVisible()&&(s.Events.fire(new(s.Events.get(s.Events.BUBBLE_OPEN))(this.block_,n,"warning")),n?this.createBubble_():this.disposeBubble_())},s.Warning.prototype.createBubble_=function(){this.paragraphElement_=s.Bubble.textToDom(this.getText()),this.bubble_=s.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},s.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},s.Warning.prototype.setText=function(n,l){this.text_[l]!=n&&(n?this.text_[l]=n:delete this.text_[l],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},s.Warning.prototype.getText=function(){var l,n=[];for(l in this.text_)n.push(this.text_[l]);return n.join("\n")},s.Warning.prototype.dispose=function(){this.block_.warning=null,s.Icon.prototype.dispose.call(this)},s.Comment=function(n){s.Comment.superClass_.constructor.call(this,n),this.model_=n.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},s.utils.object.inherits(s.Comment,s.Icon),s.Comment.prototype.drawIcon_=function(n){s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},n),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},n),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},n)},s.Comment.prototype.createEditor_=function(){this.foreignObject_=s.utils.dom.createSvgElement(s.utils.Svg.FOREIGNOBJECT,{x:s.Bubble.BORDER_WIDTH,y:s.Bubble.BORDER_WIDTH},null);var n=document.createElementNS(s.utils.dom.HTML_NS,"body");n.setAttribute("xmlns",s.utils.dom.HTML_NS),n.className="blocklyMinimalBody";var l=this.textarea_=document.createElementNS(s.utils.dom.HTML_NS,"textarea");return l.className="blocklyCommentTextarea",l.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),l.value=this.model_.text,this.resizeTextarea_(),n.appendChild(l),this.foreignObject_.appendChild(n),this.onMouseUpWrapper_=s.browserEvents.conditionalBind(l,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=s.browserEvents.conditionalBind(l,"wheel",this,function(u){u.stopPropagation()}),this.onChangeWrapper_=s.browserEvents.conditionalBind(l,"change",this,function(u){this.cachedText_!=this.model_.text&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=s.browserEvents.conditionalBind(l,"input",this,function(u){this.model_.text=l.value}),setTimeout(l.focus.bind(l),0),this.foreignObject_},s.Comment.prototype.updateEditable=function(){s.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},s.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},s.Comment.prototype.resizeTextarea_=function(){var n=this.model_.size,l=2*s.Bubble.BORDER_WIDTH,u=n.width-l;n=n.height-l,this.foreignObject_.setAttribute("width",u),this.foreignObject_.setAttribute("height",n),this.textarea_.style.width=u-4+"px",this.textarea_.style.height=n-4+"px"},s.Comment.prototype.setVisible=function(n){n!=this.isVisible()&&(s.Events.fire(new(s.Events.get(s.Events.BUBBLE_OPEN))(this.block_,n,"comment")),(this.model_.pinned=n)?this.createBubble_():this.disposeBubble_())},s.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||s.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},s.Comment.prototype.createEditableBubble_=function(){this.bubble_=new s.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},s.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=s.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=s.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},s.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(s.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(s.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(s.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(s.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},s.Comment.prototype.startEdit_=function(n){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},s.Comment.prototype.getBubbleSize=function(){return this.model_.size},s.Comment.prototype.setBubbleSize=function(n,l){this.bubble_?this.bubble_.setBubbleSize(n,l):(this.model_.size.width=n,this.model_.size.height=l)},s.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},s.Comment.prototype.dispose=function(){this.block_.comment=null,s.Icon.prototype.dispose.call(this)},s.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),s.IComponent=function(){},s.IDragTarget=function(){},s.DragTarget=function(){},s.DragTarget.prototype.onDragEnter=function(n){},s.DragTarget.prototype.onDragOver=function(n){},s.DragTarget.prototype.onDragExit=function(n){},s.DragTarget.prototype.onDrop=function(n){},s.DragTarget.prototype.shouldPreventMove=function(n){return!1},s.IDeleteArea=function(){},s.DeleteArea=function(){s.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},s.utils.object.inherits(s.DeleteArea,s.DragTarget),s.DeleteArea.prototype.wouldDelete=function(n,l){return n instanceof s.BlockSvg?(n=!n.getParent()&&n.isDeletable(),this.updateWouldDelete_(n&&!l)):this.updateWouldDelete_(n.isDeletable()),this.wouldDelete_},s.DeleteArea.prototype.updateWouldDelete_=function(n){this.wouldDelete_=n},s.IFlyout=function(){},s.Flyout=function(n){s.Flyout.superClass_.constructor.call(this),n.setMetrics=this.setMetrics_.bind(this),this.workspace_=new s.WorkspaceSvg(n),this.workspace_.setMetricsManager(new s.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=s.utils.genUid(),this.RTL=!!n.RTL,this.horizontalLayout=!1,this.toolboxPosition_=n.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},s.utils.object.inherits(s.Flyout,s.DeleteArea),s.Flyout.prototype.autoClose=!0,s.Flyout.prototype.isVisible_=!1,s.Flyout.prototype.containerVisible_=!0,s.Flyout.prototype.CORNER_RADIUS=8,s.Flyout.prototype.MARGIN=s.Flyout.prototype.CORNER_RADIUS,s.Flyout.prototype.GAP_X=3*s.Flyout.prototype.MARGIN,s.Flyout.prototype.GAP_Y=3*s.Flyout.prototype.MARGIN,s.Flyout.prototype.SCROLLBAR_MARGIN=2.5,s.Flyout.prototype.width_=0,s.Flyout.prototype.height_=0,s.Flyout.prototype.dragAngleRange_=70,s.Flyout.prototype.createDom=function(n){return this.svgGroup_=s.utils.dom.createSvgElement(n,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},s.Flyout.prototype.init=function(n){this.targetWorkspace=n,this.workspace_.targetWorkspace=n,this.workspace_.scrollbar=new s.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,s.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,s.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),n.getComponentManager().addComponent({component:this,weight:1,capabilities:[s.ComponentManager.Capability.DELETE_AREA,s.ComponentManager.Capability.DRAG_TARGET]})},s.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),s.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(s.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},s.Flyout.prototype.getWidth=function(){return this.width_},s.Flyout.prototype.getHeight=function(){return this.height_},s.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},s.Flyout.prototype.getWorkspace=function(){return this.workspace_},s.Flyout.prototype.isVisible=function(){return this.isVisible_},s.Flyout.prototype.setVisible=function(n){var l=n!=this.isVisible();this.isVisible_=n,l&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},s.Flyout.prototype.setContainerVisible=function(n){var l=n!=this.containerVisible_;this.containerVisible_=n,l&&this.updateDisplay_()},s.Flyout.prototype.updateDisplay_=function(){var n=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=n?"block":"none",this.workspace_.scrollbar.setContainerVisible(n)},s.Flyout.prototype.positionAt_=function(n,l,u,h){this.svgGroup_.setAttribute("width",n),this.svgGroup_.setAttribute("height",l),this.workspace_.setCachedParentSvgSize(n,l),"svg"==this.svgGroup_.tagName?s.utils.dom.setCssTransform(this.svgGroup_,"translate("+u+"px,"+h+"px)"):this.svgGroup_.setAttribute("transform","translate("+u+","+h+")"),(n=this.workspace_.scrollbar)&&(n.setOrigin(u,h),n.resize(),n.hScroll&&n.hScroll.setPosition(n.hScroll.position.x,n.hScroll.position.y),n.vScroll&&n.vScroll.setPosition(n.vScroll.position.x,n.vScroll.position.y))},s.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var l,n=0;l=this.listeners_[n];n++)s.browserEvents.unbind(l);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},s.Flyout.prototype.show=function(n){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof n&&(n=this.getDynamicCategoryContents_(n)),this.setVisible(!0),n=s.utils.toolbox.convertFlyoutDefToJsonArray(n),n=this.createFlyoutInfo_(n),this.layout_(n.contents,n.gaps),this.listeners_.push(s.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var h,l=this.workspace_.getTopBlocks(!1),u=0;h=l[u];u++)h.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},s.Flyout.prototype.createFlyoutInfo_=function(n){var l=[],u=[];this.permanentlyDisabled_.length=0;for(var b,h=this.horizontalLayout?this.GAP_X:this.GAP_Y,_=0;b=n[_];_++)switch(b.custom&&(b=this.getDynamicCategoryContents_(b.custom),b=s.utils.toolbox.convertFlyoutDefToJsonArray(b),n.splice.apply(n,[_,1].concat(b)),b=n[_]),b.kind.toUpperCase()){case"BLOCK":var M=b,k=this.getBlockXml_(M);b=this.createBlock_(k),M=parseInt(M.gap||k.getAttribute("gap"),10),u.push(isNaN(M)?h:M),l.push({type:"block",block:b});break;case"SEP":this.addSeparatorGap_(b,u,h);break;case"LABEL":b=this.createButton_(b,!0),l.push({type:"button",button:b}),u.push(h);break;case"BUTTON":b=this.createButton_(b,!1),l.push({type:"button",button:b}),u.push(h)}return{contents:l,gaps:u}},s.Flyout.prototype.getDynamicCategoryContents_=function(n){if("function"!=typeof(n=this.workspace_.targetWorkspace.getToolboxCategoryCallback(n)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(n=n(this.workspace_.targetWorkspace),!Array.isArray(n))throw new TypeError("Result of toolbox category callback must be an array.");return n},s.Flyout.prototype.createButton_=function(n,l){if(!s.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new s.FlyoutButton(this.workspace_,this.targetWorkspace,n,l)},s.Flyout.prototype.createBlock_=function(n){return(n=s.Xml.domToBlock(n,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(n),n},s.Flyout.prototype.getBlockXml_=function(n){var l=null,u=n.blockxml;if(u&&"string"!=typeof u?l=u:u&&"string"==typeof u?(l=s.Xml.textToDom(u),n.blockxml=l):n.type&&((l=s.utils.xml.createElement("xml")).setAttribute("type",n.type),l.setAttribute("disabled",n.disabled),n.blockxml=l),!l)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return l},s.Flyout.prototype.addSeparatorGap_=function(n,l,u){n=parseInt(n.gap,10),!isNaN(n)&&0<l.length?l[l.length-1]=n:l.push(u)},s.Flyout.prototype.clearOldBlocks_=function(){for(var u,n=this.workspace_.getTopBlocks(!1),l=0;u=n[l];l++)u.workspace==this.workspace_&&u.dispose(!1,!1);for(l=0;l<this.mats_.length;l++)(n=this.mats_[l])&&(s.Tooltip.unbindMouseEvents(n),s.utils.dom.removeNode(n));for(l=this.mats_.length=0;n=this.buttons_[l];l++)n.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},s.Flyout.prototype.addBlockListeners_=function(n,l,u){this.listeners_.push(s.browserEvents.conditionalBind(n,"mousedown",null,this.blockMouseDown_(l))),this.listeners_.push(s.browserEvents.conditionalBind(u,"mousedown",null,this.blockMouseDown_(l))),this.listeners_.push(s.browserEvents.bind(n,"mouseenter",l,l.addSelect)),this.listeners_.push(s.browserEvents.bind(n,"mouseleave",l,l.removeSelect)),this.listeners_.push(s.browserEvents.bind(u,"mouseenter",l,l.addSelect)),this.listeners_.push(s.browserEvents.bind(u,"mouseleave",l,l.removeSelect))},s.Flyout.prototype.blockMouseDown_=function(n){var l=this;return function(u){var h=l.targetWorkspace.getGesture(u);h&&(h.setStartBlock(n),h.handleFlyoutStart(u,l))}},s.Flyout.prototype.onMouseDown_=function(n){var l=this.targetWorkspace.getGesture(n);l&&l.handleFlyoutStart(n,this)},s.Flyout.prototype.isBlockCreatable_=function(n){return n.isEnabled()},s.Flyout.prototype.createBlock=function(n){var l=null;s.Events.disable();var u=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{l=this.placeNewBlock_(n)}finally{s.Events.enable()}if(s.hideChaff(),n=s.Variables.getAddedVariables(this.targetWorkspace,u),s.Events.isEnabled()){for(s.Events.setGroup(!0),u=0;u<n.length;u++){var h=n[u];s.Events.fire(new(s.Events.get(s.Events.VAR_CREATE))(h))}s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(l))}return this.autoClose?this.hide():this.filterForCapacity_(),l},s.Flyout.prototype.initFlyoutButton_=function(n,l,u){var h=n.createDom();n.moveTo(l,u),n.show(),this.listeners_.push(s.browserEvents.conditionalBind(h,"mousedown",this,this.onMouseDown_)),this.buttons_.push(n)},s.Flyout.prototype.createRect_=function(n,l,u,h,_){return(l=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{"fill-opacity":0,x:l,y:u,height:h.height,width:h.width},null)).tooltip=n,s.Tooltip.bindMouseEvents(l),this.workspace_.getCanvas().insertBefore(l,n.getSvgRoot()),n.flyoutRect_=l,this.mats_[_]=l},s.Flyout.prototype.moveRectToBlock_=function(n,l){var u=l.getHeightWidth();n.setAttribute("width",u.width),n.setAttribute("height",u.height),l=l.getRelativeToSurfaceXY(),n.setAttribute("y",l.y),n.setAttribute("x",this.RTL?l.x-u.width:l.x)},s.Flyout.prototype.filterForCapacity_=function(){for(var u,n=this.workspace_.getTopBlocks(!1),l=0;u=n[l];l++)if(-1==this.permanentlyDisabled_.indexOf(u))for(var h=this.targetWorkspace.isCapacityAvailable(s.utils.getBlockTypeCounts(u));u;)u.setEnabled(h),u=u.getNextBlock()},s.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},s.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},s.Flyout.prototype.placeNewBlock_=function(n){var l=this.targetWorkspace;if(!n.getSvgRoot())throw Error("oldBlock is not rendered.");var u=s.Xml.blockToDom(n,!0);if(l.setResizesEnabled(!1),!(u=s.Xml.domToBlock(u,l)).getSvgRoot())throw Error("block is not rendered.");var h=l.getOriginOffsetInPixels(),_=this.workspace_.getOriginOffsetInPixels();return(n=n.getRelativeToSurfaceXY()).scale(this.workspace_.scale),n=s.utils.Coordinate.sum(_,n),(h=s.utils.Coordinate.difference(n,h)).scale(1/l.scale),u.moveBy(h.x,h.y),u},s.HorizontalFlyout=function(n){s.HorizontalFlyout.superClass_.constructor.call(this,n),this.horizontalLayout=!0},s.utils.object.inherits(s.HorizontalFlyout,s.Flyout),s.HorizontalFlyout.prototype.setMetrics_=function(n){if(this.isVisible()){var l=this.workspace_.getMetricsManager(),u=l.getScrollMetrics(),h=l.getViewMetrics();l=l.getAbsoluteMetrics(),"number"==typeof n.x&&(this.workspace_.scrollX=-(u.left+(u.width-h.width)*n.x)),this.workspace_.translate(this.workspace_.scrollX+l.left,this.workspace_.scrollY+l.top)}},s.HorizontalFlyout.prototype.getX=function(){return 0},s.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager(),l=n.getAbsoluteMetrics(),u=n.getViewMetrics();n=n.getToolboxMetrics();var h=this.toolboxPosition_==s.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?h?n.height:u.height-this.height_:h?0:u.height:h?0:u.height+l.top-this.height_},s.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=n.width,this.setBackgroundPath_(n.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),n=this.getX();var l=this.getY();this.positionAt_(this.width_,this.height_,n,l)}},s.HorizontalFlyout.prototype.setBackgroundPath_=function(n,l){var u=this.toolboxPosition_==s.utils.toolbox.Position.TOP,h=["M 0,"+(u?0:this.CORNER_RADIUS)];u?(h.push("h",n+2*this.CORNER_RADIUS),h.push("v",l),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("h",-n),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),h.push("h",n),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("v",l),h.push("h",-n-2*this.CORNER_RADIUS)),h.push("z"),this.svgBackground_.setAttribute("d",h.join(" "))},s.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},s.HorizontalFlyout.prototype.wheel_=function(n){var l=s.utils.getScrollDeltaPixels(n);if(l=l.x||l.y){var u=this.workspace_.getMetricsManager(),h=u.getScrollMetrics();l=u.getViewMetrics().left-h.left+l,this.workspace_.scrollbar.setX(l),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()}n.preventDefault(),n.stopPropagation()},s.HorizontalFlyout.prototype.layout_=function(n,l){this.workspace_.scale=this.targetWorkspace.scale;var u=this.MARGIN,h=u+this.tabWidth_;this.RTL&&(n=n.reverse());for(var b,_=0;b=n[_];_++)if("block"==b.type){for(var H,M=(b=b.block).getDescendants(!1),k=0;H=M[k];k++)H.isInFlyout=!0;b.render(),M=b.getSvgRoot(),k=b.getHeightWidth(),H=b.outputConnection?this.tabWidth_:0,b.moveBy(H=this.RTL?h+k.width:h-H,u),H=this.createRect_(b,H,u,k,_),h+=k.width+l[_],this.addBlockListeners_(M,b,H)}else"button"==b.type&&(this.initFlyoutButton_(b.button,h,u),h+=b.button.width+l[_])},s.HorizontalFlyout.prototype.isDragTowardWorkspace=function(n){n=Math.atan2(n.y,n.x)/Math.PI*180;var l=this.dragAngleRange_;return n<90+l&&n>90-l||n>-90-l&&n<-90+l},s.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var n=this.svgGroup_.getBoundingClientRect(),l=n.top;return this.toolboxPosition_==s.utils.toolbox.Position.TOP?new s.utils.Rect(-1e9,l+n.height,-1e9,1e9):new s.utils.Rect(l,1e9,-1e9,1e9)},s.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var h,n=0,l=this.workspace_.getTopBlocks(!1),u=0;h=l[u];u++)n=Math.max(n,h.getHeightWidth().height);if(n+=1.5*this.MARGIN,n*=this.workspace_.scale,this.height_!=(n+=s.Scrollbar.scrollbarThickness)){for(u=0;h=l[u];u++)h.flyoutRect_&&this.moveRectToBlock_(h.flyoutRect_,h);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=s.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+n),this.height_=n,this.position(),this.targetWorkspace.recordDragTargets()}},s.registry.register(s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,s.registry.DEFAULT,s.HorizontalFlyout),s.VerticalFlyout=function(n){s.VerticalFlyout.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.VerticalFlyout,s.Flyout),s.VerticalFlyout.registryName="verticalFlyout",s.VerticalFlyout.prototype.setMetrics_=function(n){if(this.isVisible()){var l=this.workspace_.getMetricsManager(),u=l.getScrollMetrics(),h=l.getViewMetrics();l=l.getAbsoluteMetrics(),"number"==typeof n.y&&(this.workspace_.scrollY=-(u.top+(u.height-h.height)*n.y)),this.workspace_.translate(this.workspace_.scrollX+l.left,this.workspace_.scrollY+l.top)}},s.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager(),l=n.getAbsoluteMetrics(),u=n.getViewMetrics();return n=n.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==s.utils.toolbox.Position.LEFT?n.width:u.width-this.width_:this.toolboxPosition_==s.utils.toolbox.Position.LEFT?0:u.width:this.toolboxPosition_==s.utils.toolbox.Position.LEFT?0:u.width+l.left-this.width_},s.VerticalFlyout.prototype.getY=function(){return 0},s.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=n.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,n.height-2*this.CORNER_RADIUS),n=this.getX();var l=this.getY();this.positionAt_(this.width_,this.height_,n,l)}},s.VerticalFlyout.prototype.setBackgroundPath_=function(n,l){var u=this.toolboxPosition_==s.utils.toolbox.Position.RIGHT,h=n+this.CORNER_RADIUS;(h=["M "+(u?h:0)+",0"]).push("h",u?-n:n),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("v",Math.max(0,l)),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("h",u?n:-n),h.push("z"),this.svgBackground_.setAttribute("d",h.join(" "))},s.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},s.VerticalFlyout.prototype.wheel_=function(n){var l=s.utils.getScrollDeltaPixels(n);if(l.y){var u=this.workspace_.getMetricsManager(),h=u.getScrollMetrics();l=u.getViewMetrics().top-h.top+l.y,this.workspace_.scrollbar.setY(l),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()}n.preventDefault(),n.stopPropagation()},s.VerticalFlyout.prototype.layout_=function(n,l){this.workspace_.scale=this.targetWorkspace.scale;for(var b,u=this.MARGIN,h=this.RTL?u:u+this.tabWidth_,_=0;b=n[_];_++)if("block"==b.type){for(var H,M=(b=b.block).getDescendants(!1),k=0;H=M[k];k++)H.isInFlyout=!0;b.render(),M=b.getSvgRoot(),k=b.getHeightWidth(),b.moveBy(H=b.outputConnection?h-this.tabWidth_:h,u),H=this.createRect_(b,this.RTL?H-k.width:H,u,k,_),this.addBlockListeners_(M,b,H),u+=k.height+l[_]}else"button"==b.type&&(this.initFlyoutButton_(b.button,h,u),u+=b.button.height+l[_])},s.VerticalFlyout.prototype.isDragTowardWorkspace=function(n){n=Math.atan2(n.y,n.x)/Math.PI*180;var l=this.dragAngleRange_;return n<l&&n>-l||n<-180+l||n>180-l},s.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var n=this.svgGroup_.getBoundingClientRect(),l=n.left;return this.toolboxPosition_==s.utils.toolbox.Position.LEFT?new s.utils.Rect(-1e9,1e9,-1e9,l+n.width):new s.utils.Rect(-1e9,1e9,l,1e9)},s.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var h,n=0,l=this.workspace_.getTopBlocks(!1),u=0;h=l[u];u++){var _=h.getHeightWidth().width;h.outputConnection&&(_-=this.tabWidth_),n=Math.max(n,_)}for(u=0;h=this.buttons_[u];u++)n=Math.max(n,h.width);if(n+=1.5*this.MARGIN+this.tabWidth_,n*=this.workspace_.scale,this.width_!=(n+=s.Scrollbar.scrollbarThickness)){for(u=0;h=l[u];u++){if(this.RTL){_=h.getRelativeToSurfaceXY().x;var b=n/this.workspace_.scale-this.MARGIN;h.outputConnection||(b-=this.tabWidth_),h.moveBy(b-_,0)}h.flyoutRect_&&this.moveRectToBlock_(h.flyoutRect_,h)}if(this.RTL)for(u=0;h=this.buttons_[u];u++)l=h.getPosition().y,h.moveTo(n/this.workspace_.scale-h.width-this.MARGIN-this.tabWidth_,l);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=s.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+n,this.targetWorkspace.scrollY),this.width_=n,this.position(),this.targetWorkspace.recordDragTargets()}},s.registry.register(s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,s.registry.DEFAULT,s.VerticalFlyout),s.FlyoutButton=function(n,l,u,h){this.workspace_=n,this.targetWorkspace_=l,this.text_=u.text,this.position_=new s.utils.Coordinate(0,0),this.isLabel_=h,this.callbackKey_=u.callbackKey||u.callbackkey,this.cssClass_=u["web-class"]||null,this.onMouseUpWrapper_=null,this.info=u},s.FlyoutButton.MARGIN_X=5,s.FlyoutButton.MARGIN_Y=2,s.FlyoutButton.prototype.width=0,s.FlyoutButton.prototype.height=0,s.FlyoutButton.prototype.createDom=function(){var n=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(n+=" "+this.cssClass_),this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:n},this.workspace_.getCanvas()),!this.isLabel_)var l=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);n=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var u=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),h=s.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(h+="\u200f"),u.textContent=h,this.isLabel_&&(this.svgText_=u,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var _=s.utils.style.getComputedStyle(u,"fontSize"),b=s.utils.style.getComputedStyle(u,"fontWeight"),M=s.utils.style.getComputedStyle(u,"fontFamily");return this.width=s.utils.dom.getFastTextWidthWithSizeString(u,_,b,M),h=s.utils.dom.measureFontMetrics(h,_,b,M),this.height=h.height,this.isLabel_||(this.width+=2*s.FlyoutButton.MARGIN_X,this.height+=2*s.FlyoutButton.MARGIN_Y,l.setAttribute("width",this.width),l.setAttribute("height",this.height)),n.setAttribute("width",this.width),n.setAttribute("height",this.height),u.setAttribute("x",this.width/2),u.setAttribute("y",this.height/2-h.height/2+h.baseline),this.updateTransform_(),this.onMouseUpWrapper_=s.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},s.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},s.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},s.FlyoutButton.prototype.moveTo=function(n,l){this.position_.x=n,this.position_.y=l,this.updateTransform_()},s.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},s.FlyoutButton.prototype.getPosition=function(){return this.position_},s.FlyoutButton.prototype.getButtonText=function(){return this.text_},s.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},s.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&s.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&s.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},s.FlyoutButton.prototype.onMouseUp_=function(n){(n=this.targetWorkspace_.getGesture(n))&&n.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},s.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),s.Generator=function(n){this.name_=n,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},s.Generator.prototype.INFINITE_LOOP_TRAP=null,s.Generator.prototype.STATEMENT_PREFIX=null,s.Generator.prototype.STATEMENT_SUFFIX=null,s.Generator.prototype.INDENT="  ",s.Generator.prototype.COMMENT_WRAP=60,s.Generator.prototype.ORDER_OVERRIDES=[],s.Generator.prototype.isInitialized=null,s.Generator.prototype.workspaceToCode=function(n){n||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),n=s.getMainWorkspace());var l=[];this.init(n),n=n.getTopBlocks(!0);for(var h,u=0;h=n[u];u++){var _=this.blockToCode(h);Array.isArray(_)&&(_=_[0]),_&&(h.outputConnection&&(_=this.scrubNakedValue(_),this.STATEMENT_PREFIX&&!h.suppressPrefixSuffix&&(_=this.injectId(this.STATEMENT_PREFIX,h)+_),this.STATEMENT_SUFFIX&&!h.suppressPrefixSuffix&&(_+=this.injectId(this.STATEMENT_SUFFIX,h))),l.push(_))}return l=l.join("\n"),(l=(l=(l=this.finish(l)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},s.Generator.prototype.prefixLines=function(n,l){return l+n.replace(/(?!\n$)\n/g,"\n"+l)},s.Generator.prototype.allNestedComments=function(n){var l=[];n=n.getDescendants(!0);for(var u=0;u<n.length;u++){var h=n[u].getCommentText();h&&l.push(h)}return l.length&&l.push(""),l.join("\n")},s.Generator.prototype.blockToCode=function(n,l){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!n)return"";if(!n.isEnabled())return l?"":this.blockToCode(n.getNextBlock());if(n.isInsertionMarker())return l?"":this.blockToCode(n.getChildren(!1)[0]);var u=this[n.type];if("function"!=typeof u)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+n.type+'".');if(u=u.call(n,n),Array.isArray(u)){if(!n.outputConnection)throw TypeError("Expecting string from statement block: "+n.type);return[this.scrub_(n,u[0],l),u[1]]}if("string"==typeof u)return this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,n)+u),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,n)),this.scrub_(n,u,l);if(null===u)return"";throw SyntaxError("Invalid code generated: "+u)},s.Generator.prototype.valueToCode=function(n,l,u){if(isNaN(u))throw TypeError("Expecting valid order from block: "+n.type);var h=n.getInputTargetBlock(l);if(!h||""===(l=this.blockToCode(h)))return"";if(!Array.isArray(l))throw TypeError("Expecting tuple from value block: "+h.type);if(n=l[0],l=l[1],isNaN(l))throw TypeError("Expecting valid order from value block: "+h.type);if(!n)return"";h=!1;var _=Math.floor(u),b=Math.floor(l);if(_<=b&&(_!=b||0!=_&&99!=_))for(h=!0,_=0;_<this.ORDER_OVERRIDES.length;_++)if(this.ORDER_OVERRIDES[_][0]==u&&this.ORDER_OVERRIDES[_][1]==l){h=!1;break}return h&&(n="("+n+")"),n},s.Generator.prototype.statementToCode=function(n,l){if(n=n.getInputTargetBlock(l),"string"!=typeof(l=this.blockToCode(n)))throw TypeError("Expecting code from statement block: "+(n&&n.type));return l&&(l=this.prefixLines(l,this.INDENT)),l},s.Generator.prototype.addLoopTrap=function(n,l){return this.INFINITE_LOOP_TRAP&&(n=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,l),this.INDENT)+n),this.STATEMENT_SUFFIX&&!l.suppressPrefixSuffix&&(n=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,l),this.INDENT)+n),this.STATEMENT_PREFIX&&!l.suppressPrefixSuffix&&(n+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,l),this.INDENT)),n},s.Generator.prototype.injectId=function(n,l){return l=l.id.replace(/\$/g,"$$$$"),n.replace(/%1/g,"'"+l+"'")},s.Generator.prototype.RESERVED_WORDS_="",s.Generator.prototype.addReservedWords=function(n){this.RESERVED_WORDS_+=n+","},s.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(s.Generator.prototype,"variableDB_",{get:function(){return s.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(n){s.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=n}}),s.Generator.prototype.provideFunction_=function(n,l){if(!this.definitions_[n]){var h,u=this.nameDB_.getDistinctName(n,s.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[n]=u,l=l.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,u);h!=l;)h=l,l=l.replace(/^(( {2})*) {2}/gm,"$1\0");l=l.replace(/\0/g,this.INDENT),this.definitions_[n]=l}return this.functionNames_[n]},s.Generator.prototype.init=function(n){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},s.Generator.prototype.scrub_=function(n,l,u){return l},s.Generator.prototype.finish=function(n){return delete this.definitions_,delete this.functionNames_,n},s.Generator.prototype.scrubNakedValue=function(n){return n},s.IToolboxItem=function(){},s.ISelectableToolboxItem=function(){},s.ICollapsibleToolboxItem=function(){},s.ToolboxItem=function(n,l,u){this.id_=n.toolboxitemid||s.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=u||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=n,this.parentToolbox_=l,this.workspace_=this.parentToolbox_.getWorkspace()},s.ToolboxItem.prototype.init=function(){},s.ToolboxItem.prototype.getDiv=function(){return null},s.ToolboxItem.prototype.getId=function(){return this.id_},s.ToolboxItem.prototype.getParent=function(){return null},s.ToolboxItem.prototype.getLevel=function(){return this.level_},s.ToolboxItem.prototype.isSelectable=function(){return!1},s.ToolboxItem.prototype.isCollapsible=function(){return!1},s.ToolboxItem.prototype.dispose=function(){},s.ToolboxCategory=function(n,l,u){s.ToolboxCategory.superClass_.constructor.call(this,n,l,u),this.name_=s.utils.replaceMessageReferences(n.name),this.colour_=this.getColour_(n),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),s.utils.object.mixin(this.cssConfig_,n.cssconfig||n.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(n)},s.utils.object.inherits(s.ToolboxCategory,s.ToolboxItem),s.ToolboxCategory.registrationName="category",s.ToolboxCategory.nestedPadding=19,s.ToolboxCategory.borderWidth=8,s.ToolboxCategory.defaultBackgroundColour="#57e",s.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},s.ToolboxCategory.prototype.parseContents_=function(n){var l=n.contents;if(n.custom)this.flyoutItems_=n.custom;else if(l){n=0;for(var u;u=l[n];n++)this.flyoutItems_.push(u)}},s.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},s.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),s.utils.aria.setRole(this.htmlDiv_,s.utils.aria.Role.TREEITEM),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.SELECTED,!1),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),s.utils.aria.setRole(this.iconDom_,s.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},s.ToolboxCategory.prototype.createContainer_=function(){var n=document.createElement("div");return s.utils.dom.addClass(n,this.cssConfig_.container),n},s.ToolboxCategory.prototype.createRowContainer_=function(){var n=document.createElement("div");s.utils.dom.addClass(n,this.cssConfig_.row);var l=s.ToolboxCategory.nestedPadding*this.getLevel();return l=l.toString()+"px",this.workspace_.RTL?n.style.paddingRight=l:n.style.paddingLeft=l,n},s.ToolboxCategory.prototype.createRowContentsContainer_=function(){var n=document.createElement("div");return s.utils.dom.addClass(n,this.cssConfig_.rowcontentcontainer),n},s.ToolboxCategory.prototype.createIconDom_=function(){var n=document.createElement("span");return this.parentToolbox_.isHorizontal()||s.utils.dom.addClass(n,this.cssConfig_.icon),n.style.display="inline-block",n},s.ToolboxCategory.prototype.createLabelDom_=function(n){var l=document.createElement("span");return l.setAttribute("id",this.getId()+".label"),l.textContent=n,s.utils.dom.addClass(l,this.cssConfig_.label),l},s.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},s.ToolboxCategory.prototype.addColourBorder_=function(n){n&&(n=s.ToolboxCategory.borderWidth+"px solid "+(n||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=n:this.rowDiv_.style.borderLeft=n)},s.ToolboxCategory.prototype.getColour_=function(n){var l=n.categorystyle||n.categoryStyle;return(n=n.colour)&&l?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):l?this.getColourfromStyle_(l):this.parseColour_(n)},s.ToolboxCategory.prototype.getColourfromStyle_=function(n){var l=this.workspace_.getTheme();if(n&&l){if((l=l.categoryStyles[n])&&l.colour)return this.parseColour_(l.colour);console.warn('Style "'+n+'" must exist and contain a colour value')}return""},s.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},s.ToolboxCategory.prototype.parseColour_=function(n){if(null==(n=s.utils.replaceMessageReferences(n))||""===n)return"";var l=Number(n);return isNaN(l)?(l=s.utils.colour.parse(n))?l:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+n),""):s.hueToHex(l)},s.ToolboxCategory.prototype.openIcon_=function(n){n&&(s.utils.dom.removeClasses(n,this.cssConfig_.closedicon),s.utils.dom.addClass(n,this.cssConfig_.openicon))},s.ToolboxCategory.prototype.closeIcon_=function(n){n&&(s.utils.dom.removeClasses(n,this.cssConfig_.openicon),s.utils.dom.addClass(n,this.cssConfig_.closedicon))},s.ToolboxCategory.prototype.setVisible_=function(n){this.htmlDiv_.style.display=n?"block":"none",this.isHidden_=!n,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},s.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},s.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},s.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},s.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var n=this;n.getParent();)if(!(n=n.getParent()).isExpanded())return!1;return!0},s.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},s.ToolboxCategory.prototype.onClick=function(n){},s.ToolboxCategory.prototype.setSelected=function(n){if(n){var l=this.parseColour_(s.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||l,s.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",s.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.SELECTED,n)},s.ToolboxCategory.prototype.setDisabled=function(n){this.isDisabled_=n,this.getDiv().setAttribute("disabled",n),n?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},s.ToolboxCategory.prototype.getName=function(){return this.name_},s.ToolboxCategory.prototype.getParent=function(){return this.parent_},s.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},s.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},s.ToolboxCategory.prototype.updateFlyoutContents=function(n){this.flyoutItems_=[],"string"==typeof n?this.toolboxItemDef_.custom=n:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=s.utils.toolbox.convertFlyoutDefToJsonArray(n)),this.parseContents_(this.toolboxItemDef_)},s.ToolboxCategory.prototype.dispose=function(){s.utils.dom.removeNode(this.htmlDiv_)},s.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),s.registry.register(s.registry.Type.TOOLBOX_ITEM,s.ToolboxCategory.registrationName,s.ToolboxCategory),s.ToolboxSeparator=function(n,l){s.ToolboxSeparator.superClass_.constructor.call(this,n,l),this.cssConfig_={container:"blocklyTreeSeparator"},s.utils.object.mixin(this.cssConfig_,n.cssconfig||n.cssConfig)},s.utils.object.inherits(s.ToolboxSeparator,s.ToolboxItem),s.ToolboxSeparator.registrationName="sep",s.ToolboxSeparator.prototype.init=function(){this.createDom_()},s.ToolboxSeparator.prototype.createDom_=function(){var n=document.createElement("div");return s.utils.dom.addClass(n,this.cssConfig_.container),this.htmlDiv_=n},s.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},s.ToolboxSeparator.prototype.dispose=function(){s.utils.dom.removeNode(this.htmlDiv_)},s.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),s.registry.register(s.registry.Type.TOOLBOX_ITEM,s.ToolboxSeparator.registrationName,s.ToolboxSeparator),s.CollapsibleToolboxCategory=function(n,l,u){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],s.CollapsibleToolboxCategory.superClass_.constructor.call(this,n,l,u)},s.utils.object.inherits(s.CollapsibleToolboxCategory,s.ToolboxCategory),s.CollapsibleToolboxCategory.registrationName="collapsibleCategory",s.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var n=s.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return n.contents="blocklyToolboxContents",n},s.CollapsibleToolboxCategory.prototype.parseContents_=function(n){var l=n.contents,u=!0;if(n.custom)this.flyoutItems_=n.custom;else if(l){n=0;for(var h;h=l[n];n++)!s.registry.hasItem(s.registry.Type.TOOLBOX_ITEM,h.kind)||h.kind.toLowerCase()==s.ToolboxSeparator.registrationName&&u?(this.flyoutItems_.push(h),u=!0):(this.createToolboxItem_(h),u=!1)}},s.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(n){var l=n.kind;"CATEGORY"==l.toUpperCase()&&s.utils.toolbox.isCategoryCollapsible(n)&&(l=s.CollapsibleToolboxCategory.registrationName),n=new(s.registry.getClass(s.registry.Type.TOOLBOX_ITEM,l))(n,this.parentToolbox_,this),this.toolboxItems_.push(n)},s.CollapsibleToolboxCategory.prototype.init=function(){s.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},s.CollapsibleToolboxCategory.prototype.createDom_=function(){s.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var n=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(n),s.utils.aria.setRole(this.subcategoriesDiv_,s.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},s.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var n=document.createElement("span");return this.parentToolbox_.isHorizontal()||(s.utils.dom.addClass(n,this.cssConfig_.icon),n.style.visibility="visible"),n.style.display="inline-block",n},s.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(n){var l=document.createElement("div");s.utils.dom.addClass(l,this.cssConfig_.contents);for(var u=0;u<n.length;u++){var h=n[u];h.init();var _=h.getDiv();l.appendChild(_),h.getClickTarget&&h.getClickTarget().setAttribute("id",h.getId())}return l},s.CollapsibleToolboxCategory.prototype.setExpanded=function(n){this.expanded_!=n&&((this.expanded_=n)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.EXPANDED,n),this.parentToolbox_.handleToolboxItemResize())},s.CollapsibleToolboxCategory.prototype.setVisible_=function(n){this.htmlDiv_.style.display=n?"block":"none";for(var u,l=0;u=this.getChildToolboxItems()[l];l++)u.setVisible_(n);this.isHidden_=!n,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},s.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},s.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},s.CollapsibleToolboxCategory.prototype.onClick=function(n){this.toggleExpanded()},s.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},s.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},s.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},s.registry.register(s.registry.Type.TOOLBOX_ITEM,s.CollapsibleToolboxCategory.registrationName,s.CollapsibleToolboxCategory),s.Events.ToolboxItemSelect=function(n,l,u){s.Events.ToolboxItemSelect.superClass_.constructor.call(this,u),this.oldItem=n,this.newItem=l},s.utils.object.inherits(s.Events.ToolboxItemSelect,s.Events.UiBase),s.Events.ToolboxItemSelect.prototype.type=s.Events.TOOLBOX_ITEM_SELECT,s.Events.ToolboxItemSelect.prototype.toJson=function(){var n=s.Events.ToolboxItemSelect.superClass_.toJson.call(this);return n.oldItem=this.oldItem,n.newItem=this.newItem,n},s.Events.ToolboxItemSelect.prototype.fromJson=function(n){s.Events.ToolboxItemSelect.superClass_.fromJson.call(this,n),this.oldItem=n.oldItem,this.newItem=n.newItem},s.registry.register(s.registry.Type.EVENT,s.Events.TOOLBOX_ITEM_SELECT,s.Events.ToolboxItemSelect),s.IAutoHideable=function(){},s.IStyleable=function(){},s.IToolbox=function(){},s.Toolbox=function(n){s.Toolbox.superClass_.constructor.call(this),this.workspace_=n,this.id="toolbox",this.toolboxDef_=n.options.languageTree||{contents:[]},this.horizontalLayout_=n.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=n.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=n.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},s.utils.object.inherits(s.Toolbox,s.DeleteArea),s.Toolbox.prototype.onShortcut=function(n){return!1},s.Toolbox.prototype.init=function(){var n=this.workspace_,l=n.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),s.utils.dom.insertAfter(this.flyout_.createDom("svg"),l),this.setVisible(!0),this.flyout_.init(n),this.render(this.toolboxDef_),(n=n.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),n.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[s.ComponentManager.Capability.AUTOHIDEABLE,s.ComponentManager.Capability.DELETE_AREA,s.ComponentManager.Capability.DRAG_TARGET]})},s.Toolbox.prototype.createDom_=function(n){n=n.getParentSvg();var l=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,s.utils.aria.setRole(this.contentsDiv_,s.utils.aria.Role.TREE),l.appendChild(this.contentsDiv_),n.parentNode.insertBefore(l,n),this.attachEvents_(l,this.contentsDiv_),l},s.Toolbox.prototype.createContainer_=function(){var n=document.createElement("div");return n.setAttribute("layout",this.isHorizontal()?"h":"v"),s.utils.dom.addClass(n,"blocklyToolboxDiv"),s.utils.dom.addClass(n,"blocklyNonSelectable"),n.setAttribute("dir",this.RTL?"RTL":"LTR"),n},s.Toolbox.prototype.createContentsContainer_=function(){var n=document.createElement("div");return s.utils.dom.addClass(n,"blocklyToolboxContents"),this.isHorizontal()&&(n.style.flexDirection="row"),n},s.Toolbox.prototype.attachEvents_=function(n,l){n=s.browserEvents.conditionalBind(n,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(n),l=s.browserEvents.conditionalBind(l,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(l)},s.Toolbox.prototype.onClick_=function(n){if(s.utils.isRightButton(n)||n.target==this.HtmlDiv)s.hideChaff(!1);else{var l=n.target.getAttribute("id");l&&(l=this.getToolboxItemById(l)).isSelectable()&&(this.setSelectedItem(l),l.onClick(n)),s.hideChaff(!0)}s.Touch.clearTouchIdentifier()},s.Toolbox.prototype.onKeyDown_=function(n){var l=!1;switch(n.keyCode){case s.utils.KeyCodes.DOWN:l=this.selectNext_();break;case s.utils.KeyCodes.UP:l=this.selectPrevious_();break;case s.utils.KeyCodes.LEFT:l=this.selectParent_();break;case s.utils.KeyCodes.RIGHT:l=this.selectChild_();break;case s.utils.KeyCodes.ENTER:case s.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),l=!0);break;default:l=!1}!l&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(l=this.selectedItem_.onKeyDown(n)),l&&n.preventDefault()},s.Toolbox.prototype.createFlyout_=function(){var n=this.workspace_,l=new s.Options({parentWorkspace:n,rtl:n.RTL,oneBasedIndex:n.options.oneBasedIndex,horizontalLayout:n.horizontalLayout,renderer:n.options.renderer,rendererOverrides:n.options.rendererOverrides,move:{scrollbars:!0}});return l.toolboxPosition=n.options.toolboxPosition,new(s.registry.getClassFromOptions(n.horizontalLayout?s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,n.options,!0))(l)},s.Toolbox.prototype.render=function(n){this.toolboxDef_=n;for(var l=0;l<this.contents_.length;l++){var u=this.contents_[l];u&&u.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(n.contents),this.position(),this.handleToolboxItemResize()},s.Toolbox.prototype.renderContents_=function(n){for(var h,l=document.createDocumentFragment(),u=0;h=n[u];u++)this.createToolboxItem_(h,l);this.contentsDiv_.appendChild(l)},s.Toolbox.prototype.createToolboxItem_=function(n,l){var u=n.kind;"CATEGORY"==u.toUpperCase()&&s.utils.toolbox.isCategoryCollapsible(n)&&(u=s.CollapsibleToolboxCategory.registrationName),(u=s.registry.getClass(s.registry.Type.TOOLBOX_ITEM,u.toLowerCase()))&&(n=new u(n,this),this.addToolboxItem_(n),n.init(),(u=n.getDiv())&&l.appendChild(u),n.getClickTarget&&n.getClickTarget().setAttribute("id",n.getId()))},s.Toolbox.prototype.addToolboxItem_=function(n){if(this.contents_.push(n),this.contentMap_[n.getId()]=n,n.isCollapsible())for(var u,l=0;u=n.getChildToolboxItems()[l];l++)this.addToolboxItem_(u)},s.Toolbox.prototype.getToolboxItems=function(){return this.contents_},s.Toolbox.prototype.addStyle=function(n){s.utils.dom.addClass(this.HtmlDiv,n)},s.Toolbox.prototype.removeStyle=function(n){s.utils.dom.removeClass(this.HtmlDiv,n)},s.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var n=this.HtmlDiv.getBoundingClientRect(),l=n.top,u=l+n.height,h=n.left;return n=h+n.width,this.toolboxPosition==s.utils.toolbox.Position.TOP?new s.utils.Rect(-1e7,u,-1e7,1e7):this.toolboxPosition==s.utils.toolbox.Position.BOTTOM?new s.utils.Rect(l,1e7,-1e7,1e7):this.toolboxPosition==s.utils.toolbox.Position.LEFT?new s.utils.Rect(-1e7,1e7,-1e7,n):new s.utils.Rect(-1e7,1e7,h,1e7)},s.Toolbox.prototype.wouldDelete=function(n,l){return this.updateWouldDelete_(n instanceof s.BlockSvg?!n.getParent()&&n.isDeletable():n.isDeletable()),this.wouldDelete_},s.Toolbox.prototype.onDragEnter=function(n){this.updateCursorDeleteStyle_(!0)},s.Toolbox.prototype.onDragExit=function(n){this.updateCursorDeleteStyle_(!1)},s.Toolbox.prototype.onDrop=function(n){this.updateCursorDeleteStyle_(!1)},s.Toolbox.prototype.updateWouldDelete_=function(n){n!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=n,this.updateCursorDeleteStyle_(!0))},s.Toolbox.prototype.updateCursorDeleteStyle_=function(n){var l=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";n?this.addStyle(l):this.removeStyle(l)},s.Toolbox.prototype.getToolboxItemById=function(n){return this.contentMap_[n]||null},s.Toolbox.prototype.getWidth=function(){return this.width_},s.Toolbox.prototype.getHeight=function(){return this.height_},s.Toolbox.prototype.getFlyout=function(){return this.flyout_},s.Toolbox.prototype.getWorkspace=function(){return this.workspace_},s.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},s.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},s.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},s.Toolbox.prototype.position=function(){var n=this.workspace_.getMetrics(),l=this.HtmlDiv;l&&(this.horizontalLayout_?(l.style.left="0",l.style.height="auto",l.style.width="100%",this.height_=l.offsetHeight,this.width_=n.viewWidth,this.toolboxPosition==s.utils.toolbox.Position.TOP?l.style.top="0":l.style.bottom="0"):(this.toolboxPosition==s.utils.toolbox.Position.RIGHT?l.style.right="0":l.style.left="0",l.style.height="100%",this.width_=l.offsetWidth,this.height_=n.viewHeight),this.flyout_.position())},s.Toolbox.prototype.handleToolboxItemResize=function(){var n=this.workspace_,l=this.HtmlDiv.getBoundingClientRect();n.translate(this.toolboxPosition==s.utils.toolbox.Position.LEFT?n.scrollX+l.width:n.scrollX,this.toolboxPosition==s.utils.toolbox.Position.TOP?n.scrollY+l.height:n.scrollY),s.svgResize(n)},s.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},s.Toolbox.prototype.refreshTheme=function(){for(var n=0;n<this.contents_.length;n++){var l=this.contents_[n];l.refreshTheme&&l.refreshTheme()}},s.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},s.Toolbox.prototype.setVisible=function(n){this.isVisible_!==n&&(this.HtmlDiv.style.display=n?"block":"none",this.isVisible_=n,this.workspace_.recordDragTargets())},s.Toolbox.prototype.autoHide=function(n){!n&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},s.Toolbox.prototype.setSelectedItem=function(n){var l=this.selectedItem_;!n&&!l||n&&!n.isSelectable()||(this.shouldDeselectItem_(l,n)&&null!=l&&this.deselectItem_(l),this.shouldSelectItem_(l,n)&&null!=n&&this.selectItem_(l,n),this.updateFlyout_(l,n),this.fireSelectEvent_(l,n))},s.Toolbox.prototype.shouldDeselectItem_=function(n,l){return null!=n&&(!n.isCollapsible()||n!=l)},s.Toolbox.prototype.shouldSelectItem_=function(n,l){return null!=l&&l!=n},s.Toolbox.prototype.deselectItem_=function(n){this.selectedItem_=null,this.previouslySelectedItem_=n,n.setSelected(!1),s.utils.aria.setState(this.contentsDiv_,s.utils.aria.State.ACTIVEDESCENDANT,"")},s.Toolbox.prototype.selectItem_=function(n,l){this.selectedItem_=l,this.previouslySelectedItem_=n,l.setSelected(!0),s.utils.aria.setState(this.contentsDiv_,s.utils.aria.State.ACTIVEDESCENDANT,l.getId())},s.Toolbox.prototype.selectItemByPosition=function(n){-1<n&&n<this.contents_.length&&(n=this.contents_[n]).isSelectable()&&this.setSelectedItem(n)},s.Toolbox.prototype.updateFlyout_=function(n,l){(n!=l||l.isCollapsible())&&l&&l.getContents().length?(this.flyout_.show(l.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},s.Toolbox.prototype.fireSelectEvent_=function(n,l){var u=n&&n.getName(),h=l&&l.getName();n==l&&(h=null),n=new(s.Events.get(s.Events.TOOLBOX_ITEM_SELECT))(u,h,this.workspace_.id),s.Events.fire(n)},s.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},s.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var n=this.selectedItem_;return n.isExpanded()?this.selectNext_():n.setExpanded(!0),!0},s.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var n=this.contents_.indexOf(this.selectedItem_)+1;if(-1<n&&n<this.contents_.length){for(var l=this.contents_[n];l&&!l.isSelectable();)l=this.contents_[++n];if(l&&l.isSelectable())return this.setSelectedItem(l),!0}return!1},s.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var n=this.contents_.indexOf(this.selectedItem_)-1;if(-1<n&&n<this.contents_.length){for(var l=this.contents_[n];l&&!l.isSelectable();)l=this.contents_[--n];if(l&&l.isSelectable())return this.setSelectedItem(l),!0}return!1},s.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var n=0;n<this.contents_.length;n++)this.contents_[n].dispose();for(n=0;n<this.boundEvents_.length;n++)s.browserEvents.unbind(this.boundEvents_[n]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),s.utils.dom.removeNode(this.HtmlDiv)},s.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),s.registry.register(s.registry.Type.TOOLBOX,s.registry.DEFAULT,s.Toolbox),s.Events.TrashcanOpen=function(n,l){s.Events.TrashcanOpen.superClass_.constructor.call(this,l),this.isOpen=n},s.utils.object.inherits(s.Events.TrashcanOpen,s.Events.UiBase),s.Events.TrashcanOpen.prototype.type=s.Events.TRASHCAN_OPEN,s.Events.TrashcanOpen.prototype.toJson=function(){var n=s.Events.TrashcanOpen.superClass_.toJson.call(this);return n.isOpen=this.isOpen,n},s.Events.TrashcanOpen.prototype.fromJson=function(n){s.Events.TrashcanOpen.superClass_.fromJson.call(this,n),this.isOpen=n.isOpen},s.registry.register(s.registry.Type.EVENT,s.Events.TRASHCAN_OPEN,s.Events.TrashcanOpen),s.IPositionable=function(){},s.uiPosition={},s.uiPosition.verticalPosition={TOP:0,BOTTOM:1},s.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},s.uiPosition.bumpDirection={UP:0,DOWN:1},s.uiPosition.getStartPositionRect=function(n,l,u,h,_,b){var M=b.scrollbar&&b.scrollbar.canScrollVertically();return n.horizontal===s.uiPosition.horizontalPosition.LEFT?(u=_.absoluteMetrics.left+u,M&&b.RTL&&(u+=s.Scrollbar.scrollbarThickness)):(u=_.absoluteMetrics.left+_.viewMetrics.width-l.width-u,M&&!b.RTL&&(u-=s.Scrollbar.scrollbarThickness)),n.vertical===s.uiPosition.verticalPosition.TOP?n=_.absoluteMetrics.top+h:(n=_.absoluteMetrics.top+_.viewMetrics.height-l.height-h,b.scrollbar&&b.scrollbar.canScrollHorizontally()&&(n-=s.Scrollbar.scrollbarThickness)),new s.utils.Rect(n,n+l.height,u,u+l.width)},s.uiPosition.getCornerOppositeToolbox=function(n,l){return{horizontal:l.toolboxMetrics.position===s.utils.toolbox.Position.LEFT||n.horizontalLayout&&!n.RTL?s.uiPosition.horizontalPosition.RIGHT:s.uiPosition.horizontalPosition.LEFT,vertical:l.toolboxMetrics.position===s.utils.toolbox.Position.BOTTOM?s.uiPosition.verticalPosition.TOP:s.uiPosition.verticalPosition.BOTTOM}},s.uiPosition.bumpPositionRect=function(n,l,u,h){for(var H,_=n.left,b=n.right-n.left,M=n.bottom-n.top,k=0;H=h[k];k++)n.intersects(H)&&(n=new s.utils.Rect(n=u===s.uiPosition.bumpDirection.UP?H.top-M-l:H.bottom+l,n+M,_,_+b),k=-1);return n},s.Trashcan=function(n){s.Trashcan.superClass_.constructor.call(this),this.workspace_=n,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(n=new s.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(n.toolboxPosition=this.workspace_.toolboxPosition==s.utils.toolbox.Position.TOP?s.utils.toolbox.Position.BOTTOM:s.utils.toolbox.Position.TOP,this.flyout=new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(n)):(n.toolboxPosition=this.workspace_.toolboxPosition==s.utils.toolbox.Position.RIGHT?s.utils.toolbox.Position.LEFT:s.utils.toolbox.Position.RIGHT,this.flyout=new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(n)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},s.utils.object.inherits(s.Trashcan,s.DeleteArea),s.Trashcan.prototype.WIDTH_=47,s.Trashcan.prototype.BODY_HEIGHT_=44,s.Trashcan.prototype.LID_HEIGHT_=16,s.Trashcan.prototype.MARGIN_VERTICAL_=20,s.Trashcan.prototype.MARGIN_HORIZONTAL_=20,s.Trashcan.prototype.MARGIN_HOTSPOT_=10,s.Trashcan.prototype.SPRITE_LEFT_=0,s.Trashcan.prototype.SPRITE_TOP_=32,s.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,s.Trashcan.ANIMATION_LENGTH_=80,s.Trashcan.ANIMATION_FRAMES_=4,s.Trashcan.OPACITY_MIN_=.4,s.Trashcan.OPACITY_MAX_=.8,s.Trashcan.MAX_LID_ANGLE_=45,s.Trashcan.prototype.isLidOpen=!1,s.Trashcan.prototype.minOpenness_=0,s.Trashcan.prototype.svgGroup_=null,s.Trashcan.prototype.svgLid_=null,s.Trashcan.prototype.lidTask_=0,s.Trashcan.prototype.lidOpen_=0,s.Trashcan.prototype.left_=0,s.Trashcan.prototype.top_=0,s.Trashcan.prototype.initialized_=!1,s.Trashcan.prototype.createDom=function(){this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyTrash"},null);var n=String(Math.random()).substring(2),l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+n},this.svgGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},l);var u=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,x:-this.SPRITE_LEFT_,height:s.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+n+")"},this.svgGroup_);return u.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+n},this.svgGroup_),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},l),this.svgLid_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,x:-this.SPRITE_LEFT_,height:s.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+n+")"},this.svgGroup_),this.svgLid_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),s.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),s.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),s.browserEvents.bind(u,"mouseover",this,this.mouseOver_),s.browserEvents.bind(u,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},s.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(s.utils.dom.insertAfter(this.flyout.createDom(s.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[s.ComponentManager.Capability.AUTOHIDEABLE,s.ComponentManager.Capability.DELETE_AREA,s.ComponentManager.Capability.DRAG_TARGET,s.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},s.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(s.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},s.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},s.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},s.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var n=this.contents_.map(s.Xml.textToDom);this.flyout.show(n),this.fireUiEvent_(!0)}},s.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},s.Trashcan.prototype.autoHide=function(n){!n&&this.flyout&&this.closeFlyout()},s.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},s.Trashcan.prototype.position=function(n,l){if(this.initialized_){var u=s.uiPosition.getCornerOppositeToolbox(this.workspace_,n);n=s.uiPosition.getStartPositionRect(u,new s.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,n,this.workspace_),l=s.uiPosition.bumpPositionRect(n,this.MARGIN_VERTICAL_,u.vertical===s.uiPosition.verticalPosition.TOP?s.uiPosition.bumpDirection.DOWN:s.uiPosition.bumpDirection.UP,l),this.top_=l.top,this.left_=l.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},s.Trashcan.prototype.getBoundingRectangle=function(){return new s.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},s.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var n=this.svgGroup_.getBoundingClientRect(),l=n.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new s.utils.Rect(l,l+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,n=n.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,n+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},s.Trashcan.prototype.onDragOver=function(n){this.setLidOpen(this.wouldDelete_)},s.Trashcan.prototype.onDragExit=function(n){this.setLidOpen(!1)},s.Trashcan.prototype.onDrop=function(n){setTimeout(this.setLidOpen.bind(this,!1),100)},s.Trashcan.prototype.setLidOpen=function(n){this.isLidOpen!=n&&(clearTimeout(this.lidTask_),this.isLidOpen=n,this.animateLid_())},s.Trashcan.prototype.animateLid_=function(){var n=s.Trashcan.ANIMATION_FRAMES_,l=1/(n+1);this.lidOpen_+=this.isLidOpen?l:-l,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*s.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(l=s.Trashcan.OPACITY_MIN_)+this.lidOpen_*(s.Trashcan.OPACITY_MAX_-l),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),s.Trashcan.ANIMATION_LENGTH_/n))},s.Trashcan.prototype.setLidAngle_=function(n){var l=this.workspace_.toolboxPosition==s.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(l?-n:n)+","+(l?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},s.Trashcan.prototype.setMinOpenness_=function(n){this.minOpenness_=n,this.isLidOpen||this.setLidAngle_(n*s.Trashcan.MAX_LID_ANGLE_)},s.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},s.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},s.Trashcan.prototype.fireUiEvent_=function(n){n=new(s.Events.get(s.Events.TRASHCAN_OPEN))(n,this.workspace_.id),s.Events.fire(n)},s.Trashcan.prototype.blockMouseDownWhenOpenable_=function(n){!this.contentsIsOpen()&&this.hasContents_()&&n.stopPropagation()},s.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},s.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},s.Trashcan.prototype.onDelete_=function(n){if(!(0>=this.workspace_.options.maxTrashcanContents)&&n.type==s.Events.BLOCK_DELETE&&n.oldXml.tagName&&"shadow"!=n.oldXml.tagName.toLowerCase()&&(n=this.cleanBlockXML_(n.oldXml),-1==this.contents_.indexOf(n))){for(this.contents_.unshift(n);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},s.Trashcan.prototype.cleanBlockXML_=function(n){for(var l=n=n.cloneNode(!0);l;){l.removeAttribute&&(l.removeAttribute("x"),l.removeAttribute("y"),l.removeAttribute("id"),l.removeAttribute("disabled"),"comment"==l.nodeName&&(l.removeAttribute("h"),l.removeAttribute("w"),l.removeAttribute("pinned")));var u=l.firstChild||l.nextSibling;if(!u)for(u=l.parentNode;u;){if(u.nextSibling){u=u.nextSibling;break}u=u.parentNode}l=u}return s.Xml.domToText(n)},s.VariablesDynamic={},s.VariablesDynamic.onCreateVariableButtonClick_String=function(n){s.Variables.createVariableButtonHandler(n.getTargetWorkspace(),void 0,"String")},s.VariablesDynamic.onCreateVariableButtonClick_Number=function(n){s.Variables.createVariableButtonHandler(n.getTargetWorkspace(),void 0,"Number")},s.VariablesDynamic.onCreateVariableButtonClick_Colour=function(n){s.Variables.createVariableButtonHandler(n.getTargetWorkspace(),void 0,"Colour")},s.VariablesDynamic.flyoutCategory=function(n){var l=[],u=document.createElement("button");return u.setAttribute("text",s.Msg.NEW_STRING_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),l.push(u),(u=document.createElement("button")).setAttribute("text",s.Msg.NEW_NUMBER_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),l.push(u),(u=document.createElement("button")).setAttribute("text",s.Msg.NEW_COLOUR_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),l.push(u),n.registerButtonCallback("CREATE_VARIABLE_STRING",s.VariablesDynamic.onCreateVariableButtonClick_String),n.registerButtonCallback("CREATE_VARIABLE_NUMBER",s.VariablesDynamic.onCreateVariableButtonClick_Number),n.registerButtonCallback("CREATE_VARIABLE_COLOUR",s.VariablesDynamic.onCreateVariableButtonClick_Colour),n=s.VariablesDynamic.flyoutCategoryBlocks(n),l.concat(n)},s.VariablesDynamic.flyoutCategoryBlocks=function(n){var l=[];if(0<(n=n.getAllVariables()).length){if(s.Blocks.variables_set_dynamic){var u=n[n.length-1],h=s.utils.xml.createElement("block");h.setAttribute("type","variables_set_dynamic"),h.setAttribute("gap",24),h.appendChild(s.Variables.generateVariableFieldDom(u)),l.push(h)}if(s.Blocks.variables_get_dynamic){n.sort(s.VariableModel.compareByName),u=0;for(var _;_=n[u];u++)(h=s.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),h.setAttribute("gap",8),h.appendChild(s.Variables.generateVariableFieldDom(_)),l.push(h)}}return l},s.ZoomControls=function(n){this.workspace_=n,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},s.ZoomControls.prototype.WIDTH_=32,s.ZoomControls.prototype.HEIGHT_=32,s.ZoomControls.prototype.SMALL_SPACING_=2,s.ZoomControls.prototype.LARGE_SPACING_=11,s.ZoomControls.prototype.MARGIN_VERTICAL_=20,s.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,s.ZoomControls.prototype.svgGroup_=null,s.ZoomControls.prototype.left_=0,s.ZoomControls.prototype.top_=0,s.ZoomControls.prototype.initialized_=!1,s.ZoomControls.prototype.createDom=function(){this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null);var n=String(Math.random()).substring(2);return this.createZoomOutSvg_(n),this.createZoomInSvg_(n),this.workspace_.isMovable()&&this.createZoomResetSvg_(n),this.svgGroup_},s.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[s.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},s.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&s.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&s.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&s.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&s.browserEvents.unbind(this.onZoomOutWrapper_)},s.ZoomControls.prototype.getBoundingRectangle=function(){var n=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(n+=this.LARGE_SPACING_+this.HEIGHT_),new s.utils.Rect(this.top_,this.top_+n,this.left_,this.left_+this.WIDTH_)},s.ZoomControls.prototype.position=function(n,l){if(this.initialized_){var u=s.uiPosition.getCornerOppositeToolbox(this.workspace_,n),h=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(h+=this.LARGE_SPACING_+this.HEIGHT_),n=s.uiPosition.getStartPositionRect(u,new s.utils.Size(this.WIDTH_,h),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,n,this.workspace_),l=s.uiPosition.bumpPositionRect(n,this.MARGIN_VERTICAL_,(u=u.vertical)===s.uiPosition.verticalPosition.TOP?s.uiPosition.bumpDirection.DOWN:s.uiPosition.bumpDirection.UP,l),u===s.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(u=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(u+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(u=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(u+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=l.top,this.left_=l.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},s.ZoomControls.prototype.createZoomOutSvg_=function(n){this.zoomOutGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+n},this.zoomOutGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:32,height:32},l),s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,height:s.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+n+")"},this.zoomOutGroup_).setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),this.onZoomOutWrapper_=s.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},s.ZoomControls.prototype.createZoomInSvg_=function(n){this.zoomInGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+n},this.zoomInGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:32,height:32},l),s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,height:s.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+n+")"},this.zoomInGroup_).setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),this.onZoomInWrapper_=s.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},s.ZoomControls.prototype.zoom_=function(n,l){this.workspace_.markFocused(),this.workspace_.zoomCenter(n),this.fireZoomEvent_(),s.Touch.clearTouchIdentifier(),l.stopPropagation(),l.preventDefault()},s.ZoomControls.prototype.createZoomResetSvg_=function(n){this.zoomResetGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+n},this.zoomResetGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:32,height:32},l),s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,height:s.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+n+")"},this.zoomResetGroup_).setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),this.onZoomResetWrapper_=s.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},s.ZoomControls.prototype.resetZoom_=function(n){this.workspace_.markFocused();var l=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(l),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),s.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},s.ZoomControls.prototype.fireZoomEvent_=function(){var n=new(s.Events.get(s.Events.CLICK))(null,this.workspace_.id,"zoom_controls");s.Events.fire(n)},s.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),s.ShortcutItems={},s.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},s.ShortcutItems.registerEscape=function(){var n={name:s.ShortcutItems.names.ESCAPE,preconditionFn:function(l){return!l.options.readOnly},callback:function(){return s.hideChaff(),!0}};s.ShortcutRegistry.registry.register(n),s.ShortcutRegistry.registry.addKeyMapping(s.utils.KeyCodes.ESC,n.name)},s.ShortcutItems.registerDelete=function(){var n={name:s.ShortcutItems.names.DELETE,preconditionFn:function(l){return!l.options.readOnly&&s.selected&&s.selected.isDeletable()},callback:function(l,u){return u.preventDefault(),!s.Gesture.inProgress()&&(s.deleteBlock(s.selected),!0)}};s.ShortcutRegistry.registry.register(n),s.ShortcutRegistry.registry.addKeyMapping(s.utils.KeyCodes.DELETE,n.name),s.ShortcutRegistry.registry.addKeyMapping(s.utils.KeyCodes.BACKSPACE,n.name)},s.ShortcutItems.registerCopy=function(){var n={name:s.ShortcutItems.names.COPY,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()&&s.selected&&s.selected.isDeletable()&&s.selected.isMovable()},callback:function(u,h){return h.preventDefault(),s.hideChaff(),s.copy(s.selected),!0}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.C,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.C,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.C,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerCut=function(){var n={name:s.ShortcutItems.names.CUT,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()&&s.selected&&s.selected.isDeletable()&&s.selected.isMovable()&&!s.selected.workspace.isFlyout},callback:function(){return s.copy(s.selected),s.deleteBlock(s.selected),!0}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.X,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.X,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.X,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerPaste=function(){var n={name:s.ShortcutItems.names.PASTE,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()},callback:function(){return s.paste()}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.V,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.V,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.V,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerUndo=function(){var n={name:s.ShortcutItems.names.UNDO,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()},callback:function(u){return s.hideChaff(),u.undo(!1),!0}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerRedo=function(){var n={name:s.ShortcutItems.names.REDO,preconditionFn:function(u){return!s.Gesture.inProgress()&&!u.options.readOnly},callback:function(u){return s.hideChaff(),u.undo(!0),!0}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.SHIFT,s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.SHIFT,s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.SHIFT,s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Y,[s.utils.KeyCodes.CTRL]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerDefaultShortcuts=function(){s.ShortcutItems.registerEscape(),s.ShortcutItems.registerDelete(),s.ShortcutItems.registerCopy(),s.ShortcutItems.registerCut(),s.ShortcutItems.registerPaste(),s.ShortcutItems.registerUndo(),s.ShortcutItems.registerRedo()},s.ShortcutItems.registerDefaultShortcuts(),s.ContextMenuItems={},s.ContextMenuItems.registerUndo=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.UNDO},preconditionFn:function(n){return 0<n.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(n){n.workspace.undo(!1)},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},s.ContextMenuItems.registerRedo=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.REDO},preconditionFn:function(n){return 0<n.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(n){n.workspace.undo(!0)},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},s.ContextMenuItems.registerCleanup=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.CLEAN_UP},preconditionFn:function(n){return n.workspace.isMovable()?1<n.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(n){n.workspace.cleanUp()},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},s.ContextMenuItems.toggleOption_=function(n,l){for(var u=0,h=0;h<l.length;h++)for(var _=l[h];_;)setTimeout(_.setCollapsed.bind(_,n),u),_=_.getNextBlock(),u+=10},s.ContextMenuItems.registerCollapse=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.COLLAPSE_ALL},preconditionFn:function(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(var l=0;l<n.length;l++)for(var u=n[l];u;){if(!u.isCollapsed())return"enabled";u=u.getNextBlock()}return"disabled"}return"hidden"},callback:function(n){s.ContextMenuItems.toggleOption_(!0,n.workspace.getTopBlocks(!0))},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},s.ContextMenuItems.registerExpand=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.EXPAND_ALL},preconditionFn:function(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(var l=0;l<n.length;l++)for(var u=n[l];u;){if(u.isCollapsed())return"enabled";u=u.getNextBlock()}return"disabled"}return"hidden"},callback:function(n){s.ContextMenuItems.toggleOption_(!1,n.workspace.getTopBlocks(!0))},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},s.ContextMenuItems.addDeletableBlocks_=function(n,l){if(n.isDeletable())Array.prototype.push.apply(l,n.getDescendants(!1));else{n=n.getChildren(!1);for(var u=0;u<n.length;u++)s.ContextMenuItems.addDeletableBlocks_(n[u],l)}},s.ContextMenuItems.getDeletableBlocks_=function(n){var l=[];n=n.getTopBlocks(!0);for(var u=0;u<n.length;u++)s.ContextMenuItems.addDeletableBlocks_(n[u],l);return l},s.ContextMenuItems.deleteNext_=function(n,l){s.Events.setGroup(l);var u=n.shift();u&&(u.workspace?(u.dispose(!1,!0),setTimeout(s.ContextMenuItems.deleteNext_,10,n,l)):s.ContextMenuItems.deleteNext_(n,l)),s.Events.setGroup(!1)},s.ContextMenuItems.registerDeleteAll=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){if(n.workspace)return 1==(n=s.ContextMenuItems.getDeletableBlocks_(n.workspace).length)?s.Msg.DELETE_BLOCK:s.Msg.DELETE_X_BLOCKS.replace("%1",String(n))},preconditionFn:function(n){if(n.workspace)return 0<s.ContextMenuItems.getDeletableBlocks_(n.workspace).length?"enabled":"disabled"},callback:function(n){if(n.workspace){n.workspace.cancelCurrentGesture();var l=s.ContextMenuItems.getDeletableBlocks_(n.workspace),u=s.utils.genUid();2>l.length?s.ContextMenuItems.deleteNext_(l,u):s.confirm(s.Msg.DELETE_ALL_BLOCKS.replace("%1",l.length),function(h){h&&s.ContextMenuItems.deleteNext_(l,u)})}},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},s.ContextMenuItems.registerWorkspaceOptions_=function(){s.ContextMenuItems.registerUndo(),s.ContextMenuItems.registerRedo(),s.ContextMenuItems.registerCleanup(),s.ContextMenuItems.registerCollapse(),s.ContextMenuItems.registerExpand(),s.ContextMenuItems.registerDeleteAll()},s.ContextMenuItems.registerDuplicate=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.DUPLICATE_BLOCK},preconditionFn:function(n){return!(n=n.block).isInFlyout&&n.isDeletable()&&n.isMovable()?n.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(n){n.block&&s.duplicate(n.block)},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},s.ContextMenuItems.registerComment=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.getCommentIcon()?s.Msg.REMOVE_COMMENT:s.Msg.ADD_COMMENT},preconditionFn:function(n){return n=n.block,s.utils.userAgent.IE||n.isInFlyout||!n.workspace.options.comments||n.isCollapsed()||!n.isEditable()?"hidden":"enabled"},callback:function(n){(n=n.block).getCommentIcon()?n.setCommentText(null):n.setCommentText("")},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},s.ContextMenuItems.registerInline=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.getInputsInline()?s.Msg.EXTERNAL_INPUTS:s.Msg.INLINE_INPUTS},preconditionFn:function(n){if(!(n=n.block).isInFlyout&&n.isMovable()&&!n.isCollapsed())for(var l=1;l<n.inputList.length;l++)if(n.inputList[l-1].type!=s.inputTypes.STATEMENT&&n.inputList[l].type!=s.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(n){n.block.setInputsInline(!n.block.getInputsInline())},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},s.ContextMenuItems.registerCollapseExpandBlock=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.isCollapsed()?s.Msg.EXPAND_BLOCK:s.Msg.COLLAPSE_BLOCK},preconditionFn:function(n){return!(n=n.block).isInFlyout&&n.isMovable()&&n.workspace.options.collapse?"enabled":"hidden"},callback:function(n){n.block.setCollapsed(!n.block.isCollapsed())},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},s.ContextMenuItems.registerDisable=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.isEnabled()?s.Msg.DISABLE_BLOCK:s.Msg.ENABLE_BLOCK},preconditionFn:function(n){return!(n=n.block).isInFlyout&&n.workspace.options.disable&&n.isEditable()?n.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(n){n=n.block;var l=s.Events.getGroup();l||s.Events.setGroup(!0),n.setEnabled(!n.isEnabled()),l||s.Events.setGroup(!1)},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},s.ContextMenuItems.registerDelete=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){var l=n.block;return n=l.getDescendants(!1).length,(l=l.getNextBlock())&&(n-=l.getDescendants(!1).length),1==n?s.Msg.DELETE_BLOCK:s.Msg.DELETE_X_BLOCKS.replace("%1",String(n))},preconditionFn:function(n){return!n.block.isInFlyout&&n.block.isDeletable()?"enabled":"hidden"},callback:function(n){s.Events.setGroup(!0),n.block&&s.deleteBlock(n.block),s.Events.setGroup(!1)},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},s.ContextMenuItems.registerHelp=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.HELP},preconditionFn:function(n){return("function"==typeof(n=n.block).helpUrl?n.helpUrl():n.helpUrl)?"enabled":"hidden"},callback:function(n){n.block.showHelp()},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},s.ContextMenuItems.registerBlockOptions_=function(){s.ContextMenuItems.registerDuplicate(),s.ContextMenuItems.registerComment(),s.ContextMenuItems.registerInline(),s.ContextMenuItems.registerCollapseExpandBlock(),s.ContextMenuItems.registerDisable(),s.ContextMenuItems.registerDelete(),s.ContextMenuItems.registerHelp()},s.ContextMenuItems.registerDefaultOptions=function(){s.ContextMenuItems.registerWorkspaceOptions_(),s.ContextMenuItems.registerBlockOptions_()},s.ContextMenuItems.registerDefaultOptions(),s.Mutator=function(n){s.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=n},s.utils.object.inherits(s.Mutator,s.Icon),s.Mutator.prototype.workspace_=null,s.Mutator.prototype.workspaceWidth_=0,s.Mutator.prototype.workspaceHeight_=0,s.Mutator.prototype.setBlock=function(n){this.block_=n},s.Mutator.prototype.getWorkspace=function(){return this.workspace_},s.Mutator.prototype.drawIcon_=function(n){s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},n),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},n),s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},n)},s.Mutator.prototype.iconClick_=function(n){this.block_.isEditable()&&s.Icon.prototype.iconClick_.call(this,n)},s.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{x:s.Bubble.BORDER_WIDTH,y:s.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var u,n=s.utils.xml.createElement("xml"),l=0;u=this.quarkNames_[l];l++){var h=s.utils.xml.createElement("block");h.setAttribute("type",u),n.appendChild(h)}else n=null;return(l=new s.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?s.utils.toolbox.Position.RIGHT:s.utils.toolbox.Position.LEFT,(u=!!n)&&(l.languageTree=s.utils.toolbox.convertToolboxDefToJson(n)),this.workspace_=new s.WorkspaceSvg(l),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(s.Events.disableOrphans),n=u?this.workspace_.addFlyout(s.utils.Svg.G):null,l=this.workspace_.createDom("blocklyMutatorBackground"),n&&l.insertBefore(n,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(l),this.svgDialog_},s.Mutator.prototype.updateEditable=function(){s.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&s.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&s.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},s.Mutator.prototype.resizeBubble_=function(){var n=2*s.Bubble.BORDER_WIDTH,l=this.workspace_.getCanvas().getBBox(),u=l.width+l.x,h=l.height+3*n,_=this.workspace_.getFlyout();if(_){var b=_.getWorkspace().getMetricsManager().getScrollMetrics();h=Math.max(h,b.height+20),u+=_.getWidth()}this.block_.RTL&&(u=-l.x),u+=3*n,(Math.abs(this.workspaceWidth_-u)>n||Math.abs(this.workspaceHeight_-h)>n)&&(this.workspaceWidth_=u,this.workspaceHeight_=h,this.bubble_.setBubbleSize(u+n,h+n),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(n="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",n)),this.workspace_.resize()},s.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},s.Mutator.prototype.setVisible=function(n){if(n!=this.isVisible())if(s.Events.fire(new(s.Events.get(s.Events.BUBBLE_OPEN))(this.block_,n,"mutator")),n){this.bubble_=new s.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var l=this.workspace_.options.languageTree;n=this.workspace_.getFlyout(),l&&(n.init(this.workspace_),n.show(l)),this.rootBlock_=this.block_.decompose(this.workspace_),l=this.rootBlock_.getDescendants(!1);for(var h,u=0;h=l[u];u++)h.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),n?(l=2*n.CORNER_RADIUS,n=this.rootBlock_.RTL?n.getWidth()+l:l):n=l=16,this.block_.RTL&&(n=-n),this.rootBlock_.moveBy(n,l),this.block_.saveConnections){var _=this,b=this.block_;b.saveConnections(this.rootBlock_),this.sourceListener_=function(){b.saveConnections(_.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},s.Mutator.prototype.workspaceChanged_=function(n){if(!(n.isUiEvent||n.type==s.Events.CHANGE&&"disabled"==n.element)){if(!this.workspace_.isDragging()){n=this.workspace_.getTopBlocks(!1);for(var u,l=0;u=n[l];l++){var h=u.getRelativeToSurfaceXY();if(20>h.y&&u.moveBy(0,20-h.y),u.RTL){var _=-20,b=this.workspace_.getFlyout();b&&(_-=b.getWidth()),h.x>_&&u.moveBy(_-h.x,0)}else 20>h.x&&u.moveBy(20-h.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(s.Events.setGroup(!0),n=(n=(u=this.block_).mutationToDom())&&s.Xml.domToText(n),l=u.rendered,u.rendered=!1,u.compose(this.rootBlock_),u.rendered=l,u.initSvg(),u.rendered&&u.render(),n!=(l=(l=u.mutationToDom())&&s.Xml.domToText(l))){s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(u,"mutation",null,n,l));var M=s.Events.getGroup();setTimeout(function(){s.Events.setGroup(M),u.bumpNeighbours(),s.Events.setGroup(!1)},s.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),s.Events.setGroup(!1)}}},s.Mutator.prototype.dispose=function(){this.block_.mutator=null,s.Icon.prototype.dispose.call(this)},s.Mutator.prototype.updateBlockStyle=function(){var n=this.workspace_;if(n&&n.getAllBlocks(!1)){for(var h,l=n.getAllBlocks(!1),u=0;h=l[u];u++)h.setStyle(h.getStyleName());if(u=n.getFlyout())for(n=u.workspace_.getAllBlocks(!1),u=0;h=n[u];u++)h.setStyle(h.getStyleName())}},s.Mutator.reconnect=function(n,l,u){if(!n||!n.getSourceBlock().workspace)return!1;u=l.getInput(u).connection;var h=n.targetBlock();return!(h&&h!=l||u.targetConnection==n||(u.isConnected()&&u.disconnect(),u.connect(n),0))},s.Mutator.findParentWs=function(n){var l=null;if(n&&n.options){var u=n.options.parentWorkspace;n.isFlyout?u&&u.options&&(l=u.options.parentWorkspace):u&&(l=u)}return l},s.FieldTextInput=function(n,l,u){this.spellcheck_=!0,s.FieldTextInput.superClass_.constructor.call(this,n,l,u),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},s.utils.object.inherits(s.FieldTextInput,s.Field),s.FieldTextInput.prototype.DEFAULT_VALUE="",s.FieldTextInput.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.text);return new s.FieldTextInput(l,void 0,n)},s.FieldTextInput.prototype.SERIALIZABLE=!0,s.FieldTextInput.BORDERRADIUS=4,s.FieldTextInput.prototype.CURSOR="text",s.FieldTextInput.prototype.configure_=function(n){s.FieldTextInput.superClass_.configure_.call(this,n),"boolean"==typeof n.spellcheck&&(this.spellcheck_=n.spellcheck)},s.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var h,n=0,l=0,u=0;h=this.sourceBlock_.inputList[u];u++){for(var _=0;h.fieldRow[_];_++)n++;h.connection&&l++}this.fullBlockClickTarget_=1>=n&&this.sourceBlock_.outputConnection&&!l}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},s.FieldTextInput.prototype.doClassValidation_=function(n){return null==n?null:String(n)},s.FieldTextInput.prototype.doValueInvalid_=function(n){this.isBeingEdited_&&(this.isTextValid_=!1,n=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,n,this.value_)))},s.FieldTextInput.prototype.doValueUpdate_=function(n){this.isTextValid_=!0,this.value_=n,this.isBeingEdited_||(this.isDirty_=!0)},s.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},s.FieldTextInput.prototype.render_=function(){if(s.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var n=this.htmlInput_;this.isTextValid_?(s.utils.dom.removeClass(n,"blocklyInvalidInput"),s.utils.aria.setState(n,s.utils.aria.State.INVALID,!1)):(s.utils.dom.addClass(n,"blocklyInvalidInput"),s.utils.aria.setState(n,s.utils.aria.State.INVALID,!0))}},s.FieldTextInput.prototype.setSpellcheck=function(n){n!=this.spellcheck_&&(this.spellcheck_=n,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},s.FieldTextInput.prototype.showEditor_=function(n,l){this.workspace_=this.sourceBlock_.workspace,!(n=l||!1)&&(s.utils.userAgent.MOBILE||s.utils.userAgent.ANDROID||s.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(n)},s.FieldTextInput.prototype.showPromptEditor_=function(){s.prompt(s.Msg.CHANGE_VALUE_TITLE,this.getText(),function(n){this.setValue(this.getValueFromEditorText_(n))}.bind(this))},s.FieldTextInput.prototype.showInlineEditor_=function(n){s.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,n||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},s.FieldTextInput.prototype.widgetCreate_=function(){var n=s.WidgetDiv.DIV;s.utils.dom.addClass(this.getClickTarget_(),"editing");var l=document.createElement("input");l.className="blocklyHtmlInput",l.setAttribute("spellcheck",this.spellcheck_);var u=this.workspace_.getScale(),h=this.getConstants().FIELD_TEXT_FONTSIZE*u+"pt";if(n.style.fontSize=h,l.style.fontSize=h,h=s.FieldTextInput.BORDERRADIUS*u+"px",this.fullBlockClickTarget_){h=((h=this.getScaledBBox()).bottom-h.top)/2+"px";var _=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;l.style.border=1*u+"px solid "+_,n.style.borderRadius=h,n.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(n.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*u+"px")}return l.style.borderRadius=h,n.appendChild(l),l.value=l.defaultValue=this.getEditorText_(this.value_),l.untypedDefaultValue_=this.value_,l.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(l),l},s.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var n=s.WidgetDiv.DIV.style;n.width="auto",n.height="auto",n.fontSize="",n.transition="",n.boxShadow="",this.htmlInput_=null,s.utils.dom.removeClass(this.getClickTarget_(),"editing")},s.FieldTextInput.prototype.bindInputEvents_=function(n){this.onKeyDownWrapper_=s.browserEvents.conditionalBind(n,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=s.browserEvents.conditionalBind(n,"input",this,this.onHtmlInputChange_)},s.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(s.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(s.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},s.FieldTextInput.prototype.onHtmlInputKeyDown_=function(n){n.keyCode==s.utils.KeyCodes.ENTER?(s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()):n.keyCode==s.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()):n.keyCode==s.utils.KeyCodes.TAB&&(s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!n.shiftKey),n.preventDefault())},s.FieldTextInput.prototype.onHtmlInputChange_=function(n){(n=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=n,s.Events.setGroup(!0),n=this.getValueFromEditorText_(n),this.setValue(n),this.forceRerender(),this.resizeEditor_(),s.Events.setGroup(!1))},s.FieldTextInput.prototype.setEditorValue_=function(n){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(n)),this.setValue(n)},s.FieldTextInput.prototype.resizeEditor_=function(){var n=s.WidgetDiv.DIV,l=this.getScaledBBox();n.style.width=l.right-l.left+"px",n.style.height=l.bottom-l.top+"px",l=new s.utils.Coordinate(this.sourceBlock_.RTL?l.right-n.offsetWidth:l.left,l.top),n.style.left=l.x+"px",n.style.top=l.y+"px"},s.FieldTextInput.prototype.isTabNavigable=function(){return!0},s.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},s.FieldTextInput.prototype.getEditorText_=function(n){return String(n)},s.FieldTextInput.prototype.getValueFromEditorText_=function(n){return n},s.fieldRegistry.register("field_input",s.FieldTextInput),s.FieldAngle=function(n,l,u){this.clockwise_=s.FieldAngle.CLOCKWISE,this.offset_=s.FieldAngle.OFFSET,this.wrap_=s.FieldAngle.WRAP,this.round_=s.FieldAngle.ROUND,s.FieldAngle.superClass_.constructor.call(this,n,l,u),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},s.utils.object.inherits(s.FieldAngle,s.FieldTextInput),s.FieldAngle.prototype.DEFAULT_VALUE=0,s.FieldAngle.fromJson=function(n){return new s.FieldAngle(n.angle,void 0,n)},s.FieldAngle.prototype.SERIALIZABLE=!0,s.FieldAngle.ROUND=15,s.FieldAngle.HALF=50,s.FieldAngle.CLOCKWISE=!1,s.FieldAngle.OFFSET=0,s.FieldAngle.WRAP=360,s.FieldAngle.RADIUS=s.FieldAngle.HALF-1,s.FieldAngle.prototype.configure_=function(n){switch(s.FieldAngle.superClass_.configure_.call(this,n),n.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var l=n.clockwise;"boolean"==typeof l&&(this.clockwise_=l),null!=(l=n.offset)&&(l=Number(l),isNaN(l)||(this.offset_=l)),null!=(l=n.wrap)&&(l=Number(l),isNaN(l)||(this.wrap_=l)),null!=(n=n.round)&&(n=Number(n),isNaN(n)||(this.round_=n))},s.FieldAngle.prototype.initView=function(){s.FieldAngle.superClass_.initView.call(this),this.symbol_=s.utils.dom.createSvgElement(s.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},s.FieldAngle.prototype.render_=function(){s.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},s.FieldAngle.prototype.showEditor_=function(n){s.FieldAngle.superClass_.showEditor_.call(this,n,s.utils.userAgent.MOBILE||s.utils.userAgent.ANDROID||s.utils.userAgent.IPAD),this.dropdownCreate_(),s.DropDownDiv.getContentDiv().appendChild(this.editor_),s.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),s.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},s.FieldAngle.prototype.dropdownCreate_=function(){var n=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",height:2*s.FieldAngle.HALF+"px",width:2*s.FieldAngle.HALF+"px",style:"touch-action: none"},null),l=s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{cx:s.FieldAngle.HALF,cy:s.FieldAngle.HALF,r:s.FieldAngle.RADIUS,class:"blocklyAngleCircle"},n);this.gauge_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyAngleGauge"},n),this.line_=s.utils.dom.createSvgElement(s.utils.Svg.LINE,{x1:s.FieldAngle.HALF,y1:s.FieldAngle.HALF,class:"blocklyAngleLine"},n);for(var u=0;360>u;u+=15)s.utils.dom.createSvgElement(s.utils.Svg.LINE,{x1:s.FieldAngle.HALF+s.FieldAngle.RADIUS,y1:s.FieldAngle.HALF,x2:s.FieldAngle.HALF+s.FieldAngle.RADIUS-(u%45==0?10:5),y2:s.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+u+","+s.FieldAngle.HALF+","+s.FieldAngle.HALF+")"},n);this.clickWrapper_=s.browserEvents.conditionalBind(n,"click",this,this.hide_),this.clickSurfaceWrapper_=s.browserEvents.conditionalBind(l,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=s.browserEvents.conditionalBind(l,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=n},s.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(s.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(s.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(s.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},s.FieldAngle.prototype.hide_=function(){s.DropDownDiv.hideIfOwner(this),s.WidgetDiv.hide()},s.FieldAngle.prototype.onMouseMove_=function(n){var l=this.gauge_.ownerSVGElement.getBoundingClientRect(),u=n.clientX-l.left-s.FieldAngle.HALF;n=n.clientY-l.top-s.FieldAngle.HALF,l=Math.atan(-n/u),isNaN(l)||(l=s.utils.math.toDegrees(l),0>u?l+=180:0<n&&(l+=360),this.displayMouseOrKeyboardValue_(l=this.clockwise_?this.offset_+360-l:360-(this.offset_-l)))},s.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(n){this.round_&&(n=Math.round(n/this.round_)*this.round_),(n=this.wrapValue_(n))!=this.value_&&this.setEditorValue_(n)},s.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var n=Number(this.getText())+this.offset_,l=s.utils.math.toRadians(n%360);n=["M ",s.FieldAngle.HALF,",",s.FieldAngle.HALF];var u=s.FieldAngle.HALF,h=s.FieldAngle.HALF;if(!isNaN(l)){var _=Number(this.clockwise_),b=s.utils.math.toRadians(this.offset_),M=Math.cos(b)*s.FieldAngle.RADIUS,k=Math.sin(b)*-s.FieldAngle.RADIUS;_&&(l=2*b-l),u+=Math.cos(l)*s.FieldAngle.RADIUS,h-=Math.sin(l)*s.FieldAngle.RADIUS,l=Math.abs(Math.floor((l-b)/Math.PI)%2),_&&(l=1-l),n.push(" l ",M,",",k," A ",s.FieldAngle.RADIUS,",",s.FieldAngle.RADIUS," 0 ",l," ",_," ",u,",",h," z")}this.gauge_.setAttribute("d",n.join("")),this.line_.setAttribute("x2",u),this.line_.setAttribute("y2",h)}},s.FieldAngle.prototype.onHtmlInputKeyDown_=function(n){var l;if(s.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,n),n.keyCode===s.utils.KeyCodes.LEFT?l=this.sourceBlock_.RTL?1:-1:n.keyCode===s.utils.KeyCodes.RIGHT?l=this.sourceBlock_.RTL?-1:1:n.keyCode===s.utils.KeyCodes.DOWN?l=-1:n.keyCode===s.utils.KeyCodes.UP&&(l=1),l){var u=this.getValue();this.displayMouseOrKeyboardValue_(u+l*this.round_),n.preventDefault(),n.stopPropagation()}},s.FieldAngle.prototype.doClassValidation_=function(n){return n=Number(n),isNaN(n)||!isFinite(n)?null:this.wrapValue_(n)},s.FieldAngle.prototype.wrapValue_=function(n){return 0>(n%=360)&&(n+=360),n>this.wrap_&&(n-=360),n},s.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),s.fieldRegistry.register("field_angle",s.FieldAngle),s.FieldCheckbox=function(n,l,u){this.checkChar_=null,s.FieldCheckbox.superClass_.constructor.call(this,n,l,u)},s.utils.object.inherits(s.FieldCheckbox,s.Field),s.FieldCheckbox.prototype.DEFAULT_VALUE=!1,s.FieldCheckbox.fromJson=function(n){return new s.FieldCheckbox(n.checked,void 0,n)},s.FieldCheckbox.CHECK_CHAR="\u2713",s.FieldCheckbox.prototype.SERIALIZABLE=!0,s.FieldCheckbox.prototype.CURSOR="default",s.FieldCheckbox.prototype.configure_=function(n){s.FieldCheckbox.superClass_.configure_.call(this,n),n.checkCharacter&&(this.checkChar_=n.checkCharacter)},s.FieldCheckbox.prototype.initView=function(){s.FieldCheckbox.superClass_.initView.call(this),s.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},s.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},s.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||s.FieldCheckbox.CHECK_CHAR},s.FieldCheckbox.prototype.setCheckCharacter=function(n){this.checkChar_=n,this.forceRerender()},s.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},s.FieldCheckbox.prototype.doClassValidation_=function(n){return!0===n||"TRUE"===n?"TRUE":!1===n||"FALSE"===n?"FALSE":null},s.FieldCheckbox.prototype.doValueUpdate_=function(n){this.value_=this.convertValueToBool_(n),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},s.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},s.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},s.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},s.FieldCheckbox.prototype.convertValueToBool_=function(n){return"string"==typeof n?"TRUE"==n:!!n},s.fieldRegistry.register("field_checkbox",s.FieldCheckbox),s.FieldColour=function(n,l,u){s.FieldColour.superClass_.constructor.call(this,n,l,u),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},s.utils.object.inherits(s.FieldColour,s.Field),s.FieldColour.fromJson=function(n){return new s.FieldColour(n.colour,void 0,n)},s.FieldColour.prototype.SERIALIZABLE=!0,s.FieldColour.prototype.CURSOR="default",s.FieldColour.prototype.isDirty_=!1,s.FieldColour.prototype.colours_=null,s.FieldColour.prototype.titles_=null,s.FieldColour.prototype.columns_=0,s.FieldColour.prototype.configure_=function(n){s.FieldColour.superClass_.configure_.call(this,n),n.colourOptions&&(this.colours_=n.colourOptions,this.titles_=n.colourTitles),n.columns&&(this.columns_=n.columns)},s.FieldColour.prototype.initView=function(){this.size_=new s.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},s.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},s.FieldColour.prototype.doClassValidation_=function(n){return"string"!=typeof n?null:s.utils.colour.parse(n)},s.FieldColour.prototype.doValueUpdate_=function(n){this.value_=n,this.borderRect_?this.borderRect_.style.fill=n:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",n),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},s.FieldColour.prototype.getText=function(){var n=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(n)&&(n="#"+n[1]+n[3]+n[5]),n},s.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),s.FieldColour.prototype.DEFAULT_VALUE=s.FieldColour.COLOURS[0],s.FieldColour.TITLES=[],s.FieldColour.COLUMNS=7,s.FieldColour.prototype.setColours=function(n,l){return this.colours_=n,l&&(this.titles_=l),this},s.FieldColour.prototype.setColumns=function(n){return this.columns_=n,this},s.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),s.DropDownDiv.getContentDiv().appendChild(this.picker_),s.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},s.FieldColour.prototype.onClick_=function(n){null!==(n=(n=n.target)&&n.label)&&(this.setValue(n),s.DropDownDiv.hideIfOwner(this))},s.FieldColour.prototype.onKeyDown_=function(n){var l=!1;n.keyCode===s.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),l=!0):n.keyCode===s.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),l=!0):n.keyCode===s.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),l=!0):n.keyCode===s.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),l=!0):n.keyCode===s.utils.KeyCodes.ENTER&&((l=this.getHighlighted_())&&null!==(l=l&&l.label)&&this.setValue(l),s.DropDownDiv.hideWithoutAnimation(),l=!0),l&&n.stopPropagation()},s.FieldColour.prototype.moveHighlightBy_=function(n,l){var u=this.colours_||s.FieldColour.COLOURS,h=this.columns_||s.FieldColour.COLUMNS,_=this.highlightedIndex_%h,b=Math.floor(this.highlightedIndex_/h);_+=n,b+=l,0>n?0>_&&0<b?(_=h-1,b--):0>_&&(_=0):0<n?_>h-1&&b<Math.floor(u.length/h)-1?(_=0,b++):_>h-1&&_--:0>l?0>b&&(b=0):0<l&&b>Math.floor(u.length/h)-1&&(b=Math.floor(u.length/h)-1),this.setHighlightedCell_(this.picker_.childNodes[b].childNodes[_],b*h+_)},s.FieldColour.prototype.onMouseMove_=function(n){var l=(n=n.target)&&Number(n.getAttribute("data-index"));null!==l&&l!==this.highlightedIndex_&&this.setHighlightedCell_(n,l)},s.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},s.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var n=this.getHighlighted_();n&&s.utils.dom.removeClass(n,"blocklyColourHighlighted")},s.FieldColour.prototype.getHighlighted_=function(){var n=this.columns_||s.FieldColour.COLUMNS,l=this.picker_.childNodes[Math.floor(this.highlightedIndex_/n)];return l?l.childNodes[this.highlightedIndex_%n]:null},s.FieldColour.prototype.setHighlightedCell_=function(n,l){var u=this.getHighlighted_();u&&s.utils.dom.removeClass(u,"blocklyColourHighlighted"),s.utils.dom.addClass(n,"blocklyColourHighlighted"),this.highlightedIndex_=l,s.utils.aria.setState(this.picker_,s.utils.aria.State.ACTIVEDESCENDANT,n.getAttribute("id"))},s.FieldColour.prototype.dropdownCreate_=function(){var n=this.columns_||s.FieldColour.COLUMNS,l=this.colours_||s.FieldColour.COLOURS,u=this.titles_||s.FieldColour.TITLES,h=this.getValue(),_=document.createElement("table");_.className="blocklyColourTable",_.tabIndex=0,_.dir="ltr",s.utils.aria.setRole(_,s.utils.aria.Role.GRID),s.utils.aria.setState(_,s.utils.aria.State.EXPANDED,!0),s.utils.aria.setState(_,s.utils.aria.State.ROWCOUNT,Math.floor(l.length/n)),s.utils.aria.setState(_,s.utils.aria.State.COLCOUNT,n);for(var b,M=0;M<l.length;M++){M%n==0&&(b=document.createElement("tr"),s.utils.aria.setRole(b,s.utils.aria.Role.ROW),_.appendChild(b));var k=document.createElement("td");b.appendChild(k),k.label=l[M],k.title=u[M]||l[M],k.id=s.utils.IdGenerator.getNextUniqueId(),k.setAttribute("data-index",M),s.utils.aria.setRole(k,s.utils.aria.Role.GRIDCELL),s.utils.aria.setState(k,s.utils.aria.State.LABEL,l[M]),s.utils.aria.setState(k,s.utils.aria.State.SELECTED,l[M]==h),k.style.backgroundColor=l[M],l[M]==h&&(k.className="blocklyColourSelected",this.highlightedIndex_=M)}this.onClickWrapper_=s.browserEvents.conditionalBind(_,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=s.browserEvents.conditionalBind(_,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=s.browserEvents.conditionalBind(_,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=s.browserEvents.conditionalBind(_,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=s.browserEvents.conditionalBind(_,"keydown",this,this.onKeyDown_),this.picker_=_},s.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(s.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(s.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(s.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(s.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(s.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},s.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),s.fieldRegistry.register("field_colour",s.FieldColour),s.FieldDropdown=function(n,l,u){"function"!=typeof n&&s.FieldDropdown.validateOptions_(n),this.menuGenerator_=n,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],s.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],l,u),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},s.utils.object.inherits(s.FieldDropdown,s.Field),s.FieldDropdown.fromJson=function(n){return new s.FieldDropdown(n.options,void 0,n)},s.FieldDropdown.prototype.fromXml=function(n){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(n.textContent)},s.FieldDropdown.prototype.SERIALIZABLE=!0,s.FieldDropdown.CHECKMARK_OVERHANG=25,s.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,s.FieldDropdown.IMAGE_Y_OFFSET=5,s.FieldDropdown.IMAGE_Y_PADDING=2*s.FieldDropdown.IMAGE_Y_OFFSET,s.FieldDropdown.ARROW_CHAR=s.utils.userAgent.ANDROID?"\u25bc":"\u25be",s.FieldDropdown.prototype.CURSOR="default",s.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&s.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},s.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},s.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=s.utils.dom.createSvgElement(s.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?s.FieldDropdown.ARROW_CHAR+" ":" "+s.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},s.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},s.FieldDropdown.prototype.showEditor_=function(n){if(this.dropdownCreate_(),this.menu_.openingCoords=n&&"number"==typeof n.clientX?new s.utils.Coordinate(n.clientX,n.clientY):null,this.menu_.render(s.DropDownDiv.getContentDiv()),n=this.menu_.getElement(),s.utils.dom.addClass(n,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var l=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;s.DropDownDiv.setColour(n,l)}s.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},s.FieldDropdown.prototype.dropdownCreate_=function(){var n=new s.Menu;n.setRole(s.utils.aria.Role.LISTBOX),this.menu_=n;var l=this.getOptions(!1);this.selectedMenuItem_=null;for(var u=0;u<l.length;u++){var h=l[u][0],_=l[u][1];if("object"==typeof h){var b=new Image(h.width,h.height);b.src=h.src,b.alt=h.alt||"",h=b}(h=new s.MenuItem(h,_)).setRole(s.utils.aria.Role.OPTION),h.setRightToLeft(this.sourceBlock_.RTL),h.setCheckable(!0),n.addChild(h),h.setChecked(_==this.value_),_==this.value_&&(this.selectedMenuItem_=h),h.onAction(this.handleMenuActionEvent_,this)}},s.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},s.FieldDropdown.prototype.handleMenuActionEvent_=function(n){s.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,n)},s.FieldDropdown.prototype.onItemSelected_=function(n,l){this.setValue(l.getValue())},s.FieldDropdown.prototype.trimOptions_=function(){var n=this.menuGenerator_;if(Array.isArray(n)){for(var l=!1,u=0;u<n.length;u++){var h=n[u][0];"string"==typeof h?n[u][0]=s.utils.replaceMessageReferences(h):(null!=h.alt&&(n[u][0].alt=s.utils.replaceMessageReferences(h.alt)),l=!0)}if(!(l||2>n.length)){for(l=[],u=0;u<n.length;u++)l.push(n[u][0]);u=s.utils.string.shortestStringLength(l),h=s.utils.string.commonWordPrefix(l,u);var _=s.utils.string.commonWordSuffix(l,u);!h&&!_||u<=h+_||(h&&(this.prefixField=l[0].substring(0,h-1)),_&&(this.suffixField=l[0].substr(1-_)),this.menuGenerator_=s.FieldDropdown.applyTrim_(n,h,_))}}},s.FieldDropdown.applyTrim_=function(n,l,u){for(var h=[],_=0;_<n.length;_++){var b=n[_][0],M=n[_][1];b=b.substring(l,b.length-u),h[_]=[b,M]}return h},s.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},s.FieldDropdown.prototype.getOptions=function(n){return this.isOptionListDynamic()?(this.generatedOptions_&&n||(this.generatedOptions_=this.menuGenerator_.call(this),s.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},s.FieldDropdown.prototype.doClassValidation_=function(n){for(var _,l=!1,u=this.getOptions(!0),h=0;_=u[h];h++)if(_[1]==n){l=!0;break}return l?n:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+n),null)},s.FieldDropdown.prototype.doValueUpdate_=function(n){s.FieldDropdown.superClass_.doValueUpdate_.call(this,n),n=this.getOptions(!0);for(var u,l=0;u=n[l];l++)u[1]==this.value_&&(this.selectedOption_=u)},s.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},s.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var n=this.selectedOption_&&this.selectedOption_[0];n&&"object"==typeof n?this.renderSelectedImage_(n):this.renderSelectedText_(),this.positionBorderRect_()},s.FieldDropdown.prototype.renderSelectedImage_=function(n){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",n.src),this.imageElement_.setAttribute("height",n.height),this.imageElement_.setAttribute("width",n.width);var l=Number(n.height);n=Number(n.width);var u=!!this.borderRect_,h=Math.max(u?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,l+s.FieldDropdown.IMAGE_Y_PADDING);u=u?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var _=this.svgArrow_?this.positionSVGArrow_(n+u,h/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):s.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=n+_+2*u,this.size_.height=h;var b=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",u+_):(b=n+_,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",u)),this.imageElement_.setAttribute("y",h/2-l/2),this.positionTextElement_(b+u,n+_)},s.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),s.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var n=!!this.borderRect_,l=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),u=s.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var h=0;this.svgArrow_&&(h=this.positionSVGArrow_(u+n,l/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=u+h+2*n,this.size_.height=l,this.positionTextElement_(n,u)},s.FieldDropdown.prototype.positionSVGArrow_=function(n,l){if(!this.svgArrow_)return 0;var u=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,h=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,_=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?u:n+h)+","+l+")"),_+h},s.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var n=this.selectedOption_[0];return"object"==typeof n?n.alt:n},s.FieldDropdown.validateOptions_=function(n){if(!Array.isArray(n))throw TypeError("FieldDropdown options must be an array.");if(!n.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var l=!1,u=0;u<n.length;++u){var h=n[u];Array.isArray(h)?"string"!=typeof h[1]?(l=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option id must be a string. Found "+h[1]+" in: ",h)):h[0]&&"string"!=typeof h[0]&&"string"!=typeof h[0].src&&(l=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option must have a string label or image description. Found"+h[0]+" in: ",h)):(l=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option must be an array. Found: ",h))}if(l)throw TypeError("Found invalid FieldDropdown options.")},s.fieldRegistry.register("field_dropdown",s.FieldDropdown),s.FieldLabelSerializable=function(n,l,u){s.FieldLabelSerializable.superClass_.constructor.call(this,n,l,u)},s.utils.object.inherits(s.FieldLabelSerializable,s.FieldLabel),s.FieldLabelSerializable.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.text);return new s.FieldLabelSerializable(l,void 0,n)},s.FieldLabelSerializable.prototype.EDITABLE=!1,s.FieldLabelSerializable.prototype.SERIALIZABLE=!0,s.fieldRegistry.register("field_label_serializable",s.FieldLabelSerializable),s.FieldImage=function(n,l,u,h,_,b,M){if(!n)throw Error("Src value of an image field is required");if(n=s.utils.replaceMessageReferences(n),u=Number(s.utils.replaceMessageReferences(u)),l=Number(s.utils.replaceMessageReferences(l)),isNaN(u)||isNaN(l))throw Error("Height and width values of an image field must cast to numbers.");if(0>=u||0>=l)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",s.FieldImage.superClass_.constructor.call(this,n,null,M),M||(this.flipRtl_=!!b,this.altText_=s.utils.replaceMessageReferences(h)||""),this.size_=new s.utils.Size(l,u+s.FieldImage.Y_PADDING),this.imageHeight_=u,this.clickHandler_=null,"function"==typeof _&&(this.clickHandler_=_),this.imageElement_=null},s.utils.object.inherits(s.FieldImage,s.Field),s.FieldImage.prototype.DEFAULT_VALUE="",s.FieldImage.fromJson=function(n){return new s.FieldImage(n.src,n.width,n.height,void 0,void 0,void 0,n)},s.FieldImage.Y_PADDING=1,s.FieldImage.prototype.EDITABLE=!1,s.FieldImage.prototype.isDirty_=!1,s.FieldImage.prototype.configure_=function(n){s.FieldImage.superClass_.configure_.call(this,n),this.flipRtl_=!!n.flipRtl,this.altText_=s.utils.replaceMessageReferences(n.alt)||""},s.FieldImage.prototype.initView=function(){this.imageElement_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},s.FieldImage.prototype.updateSize_=function(){},s.FieldImage.prototype.doClassValidation_=function(n){return"string"!=typeof n?null:n},s.FieldImage.prototype.doValueUpdate_=function(n){this.value_=n,this.imageElement_&&this.imageElement_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},s.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},s.FieldImage.prototype.setAlt=function(n){n!=this.altText_&&(this.altText_=n||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},s.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},s.FieldImage.prototype.setOnClickHandler=function(n){this.clickHandler_=n},s.FieldImage.prototype.getText_=function(){return this.altText_},s.fieldRegistry.register("field_image",s.FieldImage),s.FieldMultilineInput=function(n,l,u){s.FieldMultilineInput.superClass_.constructor.call(this,n,l,u),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},s.utils.object.inherits(s.FieldMultilineInput,s.FieldTextInput),s.FieldMultilineInput.prototype.configure_=function(n){s.FieldMultilineInput.superClass_.configure_.call(this,n),n.maxLines&&this.setMaxLines(n.maxLines)},s.FieldMultilineInput.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.text);return new s.FieldMultilineInput(l,void 0,n)},s.FieldMultilineInput.prototype.toXml=function(n){return n.textContent=this.getValue().replace(/\n/g,"&#10;"),n},s.FieldMultilineInput.prototype.fromXml=function(n){this.setValue(n.textContent.replace(/&#10;/g,"\n"))},s.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},s.FieldMultilineInput.prototype.getDisplayText_=function(){var n=this.getText();if(!n)return s.Field.NBSP;var l=n.split("\n");n="";for(var u=this.isOverflowedY_?this.maxLines_:l.length,h=0;h<u;h++){var _=l[h];_.length>this.maxDisplayLength?_=_.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&h===u-1&&(_=_.substring(0,_.length-3)+"..."),n+=_=_.replace(/\s/g,s.Field.NBSP),h!==u-1&&(n+="\n")}return this.sourceBlock_.RTL&&(n+="\u200f"),n},s.FieldMultilineInput.prototype.doValueUpdate_=function(n){s.FieldMultilineInput.superClass_.doValueUpdate_.call(this,n),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},s.FieldMultilineInput.prototype.render_=function(){for(var n;n=this.textGroup_.firstChild;)this.textGroup_.removeChild(n);n=this.getDisplayText_().split("\n");for(var l=0,u=0;u<n.length;u++){var h=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:l+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(n[u])),l+=h}this.isBeingEdited_&&(n=this.htmlInput_,this.isOverflowedY_?s.utils.dom.addClass(n,"blocklyHtmlTextAreaInputOverflowedY"):s.utils.dom.removeClass(n,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),n=this.htmlInput_,this.isTextValid_?(s.utils.dom.removeClass(n,"blocklyInvalidInput"),s.utils.aria.setState(n,s.utils.aria.State.INVALID,!1)):(s.utils.dom.addClass(n,"blocklyInvalidInput"),s.utils.aria.setState(n,s.utils.aria.State.INVALID,!0)))},s.FieldMultilineInput.prototype.updateSize_=function(){for(var n=this.textGroup_.childNodes,l=0,u=0,h=0;h<n.length;h++){var _=s.utils.dom.getTextWidth(n[h]);_>l&&(l=_),u+=this.getConstants().FIELD_TEXT_HEIGHT+(0<h?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){n=this.value_.split("\n"),_=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var b=this.getConstants().FIELD_TEXT_FONTSIZE,M=this.getConstants().FIELD_TEXT_FONTWEIGHT,k=this.getConstants().FIELD_TEXT_FONTFAMILY;for(h=0;h<n.length;h++){n[h].length>this.maxDisplayLength&&(n[h]=n[h].substring(0,this.maxDisplayLength)),_.textContent=n[h];var H=s.utils.dom.getFastTextWidth(_,b,M,k);H>l&&(l=H)}l+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(u+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,l+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",l),this.borderRect_.setAttribute("height",u)),this.size_.width=l,this.size_.height=u,this.positionBorderRect_()},s.FieldMultilineInput.prototype.showEditor_=function(n,l){s.FieldMultilineInput.superClass_.showEditor_.call(this,n,l),this.forceRerender()},s.FieldMultilineInput.prototype.widgetCreate_=function(){var n=s.WidgetDiv.DIV,l=this.workspace_.getScale(),u=document.createElement("textarea");u.className="blocklyHtmlInput blocklyHtmlTextAreaInput",u.setAttribute("spellcheck",this.spellcheck_);var h=this.getConstants().FIELD_TEXT_FONTSIZE*l+"pt";n.style.fontSize=h,u.style.fontSize=h,u.style.borderRadius=s.FieldTextInput.BORDERRADIUS*l+"px",h=this.getConstants().FIELD_BORDER_RECT_X_PADDING*l;var _=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*l/2;return u.style.padding=_+"px "+h+"px "+_+"px "+h+"px",h=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,u.style.lineHeight=h*l+"px",n.appendChild(u),u.value=u.defaultValue=this.getEditorText_(this.value_),u.untypedDefaultValue_=this.value_,u.oldValue_=null,s.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(u),u},s.FieldMultilineInput.prototype.setMaxLines=function(n){"number"==typeof n&&0<n&&n!==this.maxLines_&&(this.maxLines_=n,this.forceRerender())},s.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},s.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(n){n.keyCode!==s.utils.KeyCodes.ENTER&&s.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,n)},s.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),s.fieldRegistry.register("field_multilinetext",s.FieldMultilineInput),s.FieldNumber=function(n,l,u,h,_,b){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,s.FieldNumber.superClass_.constructor.call(this,n,_,b),b||this.setConstraints(l,u,h)},s.utils.object.inherits(s.FieldNumber,s.FieldTextInput),s.FieldNumber.prototype.DEFAULT_VALUE=0,s.FieldNumber.fromJson=function(n){return new s.FieldNumber(n.value,void 0,void 0,void 0,void 0,n)},s.FieldNumber.prototype.SERIALIZABLE=!0,s.FieldNumber.prototype.configure_=function(n){s.FieldNumber.superClass_.configure_.call(this,n),this.setMinInternal_(n.min),this.setMaxInternal_(n.max),this.setPrecisionInternal_(n.precision)},s.FieldNumber.prototype.setConstraints=function(n,l,u){this.setMinInternal_(n),this.setMaxInternal_(l),this.setPrecisionInternal_(u),this.setValue(this.getValue())},s.FieldNumber.prototype.setMin=function(n){this.setMinInternal_(n),this.setValue(this.getValue())},s.FieldNumber.prototype.setMinInternal_=function(n){null==n?this.min_=-1/0:(n=Number(n),isNaN(n)||(this.min_=n))},s.FieldNumber.prototype.getMin=function(){return this.min_},s.FieldNumber.prototype.setMax=function(n){this.setMaxInternal_(n),this.setValue(this.getValue())},s.FieldNumber.prototype.setMaxInternal_=function(n){null==n?this.max_=1/0:(n=Number(n),isNaN(n)||(this.max_=n))},s.FieldNumber.prototype.getMax=function(){return this.max_},s.FieldNumber.prototype.setPrecision=function(n){this.setPrecisionInternal_(n),this.setValue(this.getValue())},s.FieldNumber.prototype.setPrecisionInternal_=function(n){this.precision_=Number(n)||0;var l=String(this.precision_);-1!=l.indexOf("e")&&(l=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var u=l.indexOf(".");this.decimalPlaces_=-1==u?n?0:null:l.length-u-1},s.FieldNumber.prototype.getPrecision=function(){return this.precision_},s.FieldNumber.prototype.doClassValidation_=function(n){return null===n||(n=(n=(n=(n=String(n)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),n=Number(n||0),isNaN(n))?null:(n=Math.min(Math.max(n,this.min_),this.max_),this.precision_&&isFinite(n)&&(n=Math.round(n/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(n=Number(n.toFixed(this.decimalPlaces_))),n)},s.FieldNumber.prototype.widgetCreate_=function(){var n=s.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&s.utils.aria.setState(n,s.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&s.utils.aria.setState(n,s.utils.aria.State.VALUEMAX,this.max_),n},s.fieldRegistry.register("field_number",s.FieldNumber),s.FieldVariable=function(n,l,u,h,_){this.menuGenerator_=s.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof n?n:"",this.size_=new s.utils.Size(0,0),_&&this.configure_(_),l&&this.setValidator(l),_||this.setTypes_(u,h)},s.utils.object.inherits(s.FieldVariable,s.FieldDropdown),s.FieldVariable.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.variable);return new s.FieldVariable(l,void 0,void 0,void 0,n)},s.FieldVariable.prototype.SERIALIZABLE=!0,s.FieldVariable.prototype.configure_=function(n){s.FieldVariable.superClass_.configure_.call(this,n),this.setTypes_(n.variableTypes,n.defaultType)},s.FieldVariable.prototype.initModel=function(){if(!this.variable_){var n=s.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(n.getId())}},s.FieldVariable.prototype.shouldAddBorderRect_=function(){return s.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},s.FieldVariable.prototype.fromXml=function(n){var l=n.getAttribute("id"),u=n.textContent,h=n.getAttribute("variabletype")||n.getAttribute("variableType")||"";if(l=s.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,l,u,h),null!=h&&h!==l.type)throw Error("Serialized variable type with id '"+l.getId()+"' had type "+l.type+", and does not match variable field that references it: "+s.Xml.domToText(n)+".");this.setValue(l.getId())},s.FieldVariable.prototype.toXml=function(n){return this.initModel(),n.id=this.variable_.getId(),n.textContent=this.variable_.name,this.variable_.type&&n.setAttribute("variabletype",this.variable_.type),n},s.FieldVariable.prototype.setSourceBlock=function(n){if(n.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");s.FieldVariable.superClass_.setSourceBlock.call(this,n)},s.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},s.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},s.FieldVariable.prototype.getVariable=function(){return this.variable_},s.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},s.FieldVariable.prototype.doClassValidation_=function(n){if(null===n)return null;var l=s.Variables.getVariable(this.sourceBlock_.workspace,n);return l?this.typeIsAllowed_(l=l.type)?n:(console.warn("Variable type doesn't match this field!  Type was "+l),null):(console.warn("Variable id doesn't point to a real variable! ID was "+n),null)},s.FieldVariable.prototype.doValueUpdate_=function(n){this.variable_=s.Variables.getVariable(this.sourceBlock_.workspace,n),s.FieldVariable.superClass_.doValueUpdate_.call(this,n)},s.FieldVariable.prototype.typeIsAllowed_=function(n){var l=this.getVariableTypes_();if(!l)return!0;for(var u=0;u<l.length;u++)if(n==l[u])return!0;return!1},s.FieldVariable.prototype.getVariableTypes_=function(){var n=this.variableTypes;if(null===n&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(n=n||[""]).length)throw n=this.getText(),Error("'variableTypes' of field variable "+n+" was an empty list");return n},s.FieldVariable.prototype.setTypes_=function(n,l){if(l=l||"",null==n||null==n)n=null;else{if(!Array.isArray(n))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var u=!1,h=0;h<n.length;h++)n[h]==l&&(u=!0);if(!u)throw Error("Invalid default type '"+l+"' in the definition of a FieldVariable")}this.defaultType_=l,this.variableTypes=n},s.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},s.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var n=this.getText(),l=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var u=this.getVariableTypes_(),h=0;h<u.length;h++){var _=this.sourceBlock_.workspace.getVariablesOfType(u[h]);l=l.concat(_)}for(l.sort(s.VariableModel.compareByName),u=[],h=0;h<l.length;h++)u[h]=[l[h].name,l[h].getId()];return u.push([s.Msg.RENAME_VARIABLE,s.RENAME_VARIABLE_ID]),s.Msg.DELETE_VARIABLE&&u.push([s.Msg.DELETE_VARIABLE.replace("%1",n),s.DELETE_VARIABLE_ID]),u},s.FieldVariable.prototype.onItemSelected_=function(n,l){if(n=l.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(n==s.RENAME_VARIABLE_ID)return void s.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(n==s.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(n)},s.FieldVariable.prototype.referencesVariables=function(){return!0},s.fieldRegistry.register("field_variable",s.FieldVariable),s.utils.svgPaths={},s.utils.svgPaths.point=function(n,l){return" "+n+","+l+" "},s.utils.svgPaths.curve=function(n,l){return" "+n+l.join("")},s.utils.svgPaths.moveTo=function(n,l){return" M "+n+","+l+" "},s.utils.svgPaths.moveBy=function(n,l){return" m "+n+","+l+" "},s.utils.svgPaths.lineTo=function(n,l){return" l "+n+","+l+" "},s.utils.svgPaths.line=function(n){return" l"+n.join("")},s.utils.svgPaths.lineOnAxis=function(n,l){return" "+n+" "+l+" "},s.utils.svgPaths.arc=function(n,l,u,h){return n+" "+u+" "+u+" "+l+h},s.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=s.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!s.utils.userAgent.IE&&!s.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},s.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},s.blockRendering.ConstantProvider.prototype.setTheme=function(n){this.blockStyles=Object.create(null);var u,l=n.blockStyles;for(u in l)this.blockStyles[u]=this.validatedBlockStyle_(l[u]);this.setDynamicProperties_(n)},s.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(n){this.setFontConstants_(n),this.setComponentConstants_(n),this.ADD_START_HATS=null!=n.startHats?n.startHats:this.ADD_START_HATS},s.blockRendering.ConstantProvider.prototype.setFontConstants_=function(n){this.FIELD_TEXT_FONTFAMILY=n.fontStyle&&null!=n.fontStyle.family?n.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=n.fontStyle&&null!=n.fontStyle.weight?n.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=n.fontStyle&&null!=n.fontStyle.size?n.fontStyle.size:this.FIELD_TEXT_FONTSIZE,n=s.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=n.height,this.FIELD_TEXT_BASELINE=n.baseline},s.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(n){this.CURSOR_COLOUR=n.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=n.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=n.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(n.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},s.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(n){var l="auto_"+n;return this.blockStyles[l]||(this.blockStyles[l]=this.createBlockStyle_(n)),{style:this.blockStyles[l],name:l}},s.blockRendering.ConstantProvider.prototype.getBlockStyle=function(n){return this.blockStyles[n||""]||(n&&0==n.indexOf("auto_")?this.getBlockStyleForColour(n.substring(5)).style:this.createBlockStyle_("#000000"))},s.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(n){return this.validatedBlockStyle_({colourPrimary:n})},s.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(n){var l={};return n&&s.utils.object.mixin(l,n),n=s.utils.parseBlockColour(l.colourPrimary||"#000"),l.colourPrimary=n.hex,l.colourSecondary=l.colourSecondary?s.utils.parseBlockColour(l.colourSecondary).hex:this.generateSecondaryColour_(l.colourPrimary),l.colourTertiary=l.colourTertiary?s.utils.parseBlockColour(l.colourTertiary).hex:this.generateTertiaryColour_(l.colourPrimary),l.hat=l.hat||"",l},s.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(n){return s.utils.colour.blend("#fff",n,.6)||n},s.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(n){return s.utils.colour.blend("#fff",n,.3)||n},s.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&s.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&s.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&s.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},s.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var n=this.JAGGED_TEETH_HEIGHT,l=this.JAGGED_TEETH_WIDTH;return{height:n,width:l,path:s.utils.svgPaths.line([s.utils.svgPaths.point(l,n/4),s.utils.svgPaths.point(2*-l,n/2),s.utils.svgPaths.point(l,n/4)])}},s.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var n=this.START_HAT_HEIGHT,l=this.START_HAT_WIDTH;return{height:n,width:l,path:s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(30,-n),s.utils.svgPaths.point(70,-n),s.utils.svgPaths.point(l,0)])}},s.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function n(b){var M=-(b=b?-1:1),k=u/2,H=k+2.5,U=k+.5,V=s.utils.svgPaths.point(-l,b*k);return k=s.utils.svgPaths.point(l,b*k),s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(0,b*H),s.utils.svgPaths.point(-l,M*U),V])+s.utils.svgPaths.curve("s",[s.utils.svgPaths.point(l,2.5*M),k])}var l=this.TAB_WIDTH,u=this.TAB_HEIGHT,h=n(!0),_=n(!1);return{type:this.SHAPES.PUZZLE,width:l,height:u,pathDown:_,pathUp:h}},s.blockRendering.ConstantProvider.prototype.makeNotch=function(){function n(M){return s.utils.svgPaths.line([s.utils.svgPaths.point(M*h,u),s.utils.svgPaths.point(3*M,0),s.utils.svgPaths.point(M*h,-u)])}var l=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,h=(l-3)/2,_=n(1),b=n(-1);return{type:this.SHAPES.NOTCH,width:l,height:u,pathLeft:_,pathRight:b}},s.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var n=this.CORNER_RADIUS;return{width:n,height:n,pathTop:s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(-n,n)),pathBottom:s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(n,n))}},s.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var n=this.CORNER_RADIUS,l=s.utils.svgPaths.moveBy(0,n)+s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(n,-n)),u=s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(n,n)),h=s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(-n,-n));return{topLeft:l,topRight:u,bottomRight:s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(-n,n)),bottomLeft:h,rightHeight:n}},s.blockRendering.ConstantProvider.prototype.shapeFor=function(n){switch(n.type){case s.connectionTypes.INPUT_VALUE:case s.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case s.connectionTypes.PREVIOUS_STATEMENT:case s.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},s.blockRendering.ConstantProvider.prototype.createDom=function(n,l,u){this.injectCSS_(l,u),n=s.utils.dom.createSvgElement(s.utils.Svg.DEFS,{},n),l=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},n),s.utils.dom.createSvgElement(s.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},l),u=s.utils.dom.createSvgElement(s.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},u),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},l),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},l),this.embossFilterId=l.id,this.embossFilter_=l,l=s.utils.dom.createSvgElement(s.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},n),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},l),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},l),this.disabledPatternId=l.id,this.disabledPattern_=l,s.blockRendering.Debug&&(n=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),l=s.utils.dom.createSvgElement(s.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),s.utils.dom.createSvgElement(s.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},n),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.debugFilterId=n.id,this.debugFilter_=n)},s.blockRendering.ConstantProvider.prototype.injectCSS_=function(n,l){l=this.getCSS_(l),n="blockly-renderer-style-"+n,this.cssNode_=document.getElementById(n);var u=l.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=u:((l=document.createElement("style")).id=n,n=document.createTextNode(u),l.appendChild(n),document.head.insertBefore(l,document.head.firstChild),this.cssNode_=l)},s.blockRendering.ConstantProvider.prototype.getCSS_=function(n){return[n+" .blocklyText, ",n+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",n+" .blocklyText {","fill: #fff;","}",n+" .blocklyNonEditableText>rect,",n+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",n+" .blocklyNonEditableText>text,",n+" .blocklyEditableText>text {","fill: #000;","}",n+" .blocklyFlyoutLabelText {","fill: #000;","}",n+" .blocklyText.blocklyBubbleText {","fill: #000;","}",n+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",n+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",n+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",n+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",n+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",n+" .blocklyReplaceable .blocklyPathLight,",n+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",n+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},s.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},s.blockRendering.Types.LEFT_CORNER=s.blockRendering.Types.LEFT_SQUARE_CORNER|s.blockRendering.Types.LEFT_ROUND_CORNER,s.blockRendering.Types.RIGHT_CORNER=s.blockRendering.Types.RIGHT_SQUARE_CORNER|s.blockRendering.Types.RIGHT_ROUND_CORNER,s.blockRendering.Types.nextTypeValue_=16777216,s.blockRendering.Types.getType=function(n){return Object.prototype.hasOwnProperty.call(s.blockRendering.Types,n)||(s.blockRendering.Types[n]=s.blockRendering.Types.nextTypeValue_,s.blockRendering.Types.nextTypeValue_<<=1),s.blockRendering.Types[n]},s.blockRendering.Types.isField=function(n){return n.type&s.blockRendering.Types.FIELD},s.blockRendering.Types.isHat=function(n){return n.type&s.blockRendering.Types.HAT},s.blockRendering.Types.isIcon=function(n){return n.type&s.blockRendering.Types.ICON},s.blockRendering.Types.isSpacer=function(n){return n.type&s.blockRendering.Types.SPACER},s.blockRendering.Types.isInRowSpacer=function(n){return n.type&s.blockRendering.Types.IN_ROW_SPACER},s.blockRendering.Types.isInput=function(n){return n.type&s.blockRendering.Types.INPUT},s.blockRendering.Types.isExternalInput=function(n){return n.type&s.blockRendering.Types.EXTERNAL_VALUE_INPUT},s.blockRendering.Types.isInlineInput=function(n){return n.type&s.blockRendering.Types.INLINE_INPUT},s.blockRendering.Types.isStatementInput=function(n){return n.type&s.blockRendering.Types.STATEMENT_INPUT},s.blockRendering.Types.isPreviousConnection=function(n){return n.type&s.blockRendering.Types.PREVIOUS_CONNECTION},s.blockRendering.Types.isNextConnection=function(n){return n.type&s.blockRendering.Types.NEXT_CONNECTION},s.blockRendering.Types.isPreviousOrNextConnection=function(n){return n.type&(s.blockRendering.Types.PREVIOUS_CONNECTION|s.blockRendering.Types.NEXT_CONNECTION)},s.blockRendering.Types.isLeftRoundedCorner=function(n){return n.type&s.blockRendering.Types.LEFT_ROUND_CORNER},s.blockRendering.Types.isRightRoundedCorner=function(n){return n.type&s.blockRendering.Types.RIGHT_ROUND_CORNER},s.blockRendering.Types.isLeftSquareCorner=function(n){return n.type&s.blockRendering.Types.LEFT_SQUARE_CORNER},s.blockRendering.Types.isRightSquareCorner=function(n){return n.type&s.blockRendering.Types.RIGHT_SQUARE_CORNER},s.blockRendering.Types.isCorner=function(n){return n.type&s.blockRendering.Types.CORNER},s.blockRendering.Types.isJaggedEdge=function(n){return n.type&s.blockRendering.Types.JAGGED_EDGE},s.blockRendering.Types.isRow=function(n){return n.type&s.blockRendering.Types.ROW},s.blockRendering.Types.isBetweenRowSpacer=function(n){return n.type&s.blockRendering.Types.BETWEEN_ROW_SPACER},s.blockRendering.Types.isTopRow=function(n){return n.type&s.blockRendering.Types.TOP_ROW},s.blockRendering.Types.isBottomRow=function(n){return n.type&s.blockRendering.Types.BOTTOM_ROW},s.blockRendering.Types.isTopOrBottomRow=function(n){return n.type&(s.blockRendering.Types.TOP_ROW|s.blockRendering.Types.BOTTOM_ROW)},s.blockRendering.Types.isInputRow=function(n){return n.type&s.blockRendering.Types.INPUT_ROW},s.blockRendering.Measurable=function(n){this.height=this.width=0,this.type=s.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=n,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},s.blockRendering.Connection=function(n,l){s.blockRendering.Connection.superClass_.constructor.call(this,n),this.connectionModel=l,this.shape=this.constants_.shapeFor(l),this.isDynamicShape=!!this.shape.isDynamic,this.type|=s.blockRendering.Types.CONNECTION},s.utils.object.inherits(s.blockRendering.Connection,s.blockRendering.Measurable),s.blockRendering.OutputConnection=function(n,l){s.blockRendering.OutputConnection.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},s.utils.object.inherits(s.blockRendering.OutputConnection,s.blockRendering.Connection),s.blockRendering.PreviousConnection=function(n,l){s.blockRendering.PreviousConnection.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},s.utils.object.inherits(s.blockRendering.PreviousConnection,s.blockRendering.Connection),s.blockRendering.NextConnection=function(n,l){s.blockRendering.NextConnection.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},s.utils.object.inherits(s.blockRendering.NextConnection,s.blockRendering.Connection),s.blockRendering.InputConnection=function(n,l){s.blockRendering.InputConnection.superClass_.constructor.call(this,n,l.connection),this.type|=s.blockRendering.Types.INPUT,this.input=l,this.align=l.align,(this.connectedBlock=l.connection&&l.connection.targetBlock()?l.connection.targetBlock():null)?(n=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=n.width,this.connectedBlockHeight=n.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},s.utils.object.inherits(s.blockRendering.InputConnection,s.blockRendering.Connection),s.blockRendering.InlineInput=function(n,l){s.blockRendering.InlineInput.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},s.utils.object.inherits(s.blockRendering.InlineInput,s.blockRendering.InputConnection),s.blockRendering.StatementInput=function(n,l){s.blockRendering.StatementInput.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},s.utils.object.inherits(s.blockRendering.StatementInput,s.blockRendering.InputConnection),s.blockRendering.ExternalValueInput=function(n,l){s.blockRendering.ExternalValueInput.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},s.utils.object.inherits(s.blockRendering.ExternalValueInput,s.blockRendering.InputConnection),s.blockRendering.Icon=function(n,l){s.blockRendering.Icon.superClass_.constructor.call(this,n),this.icon=l,this.isVisible=l.isVisible(),this.type|=s.blockRendering.Types.ICON,n=l.getCorrectedSize(),this.height=n.height,this.width=n.width},s.utils.object.inherits(s.blockRendering.Icon,s.blockRendering.Measurable),s.blockRendering.JaggedEdge=function(n){s.blockRendering.JaggedEdge.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},s.utils.object.inherits(s.blockRendering.JaggedEdge,s.blockRendering.Measurable),s.blockRendering.Field=function(n,l,u){s.blockRendering.Field.superClass_.constructor.call(this,n),this.field=l,this.isEditable=l.EDITABLE,this.flipRtl=l.getFlipRtl(),this.type|=s.blockRendering.Types.FIELD,n=this.field.getSize(),this.height=n.height,this.width=n.width,this.parentInput=u},s.utils.object.inherits(s.blockRendering.Field,s.blockRendering.Measurable),s.blockRendering.Hat=function(n){s.blockRendering.Hat.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},s.utils.object.inherits(s.blockRendering.Hat,s.blockRendering.Measurable),s.blockRendering.SquareCorner=function(n,l){s.blockRendering.SquareCorner.superClass_.constructor.call(this,n),this.type=(l&&"left"!=l?s.blockRendering.Types.RIGHT_SQUARE_CORNER:s.blockRendering.Types.LEFT_SQUARE_CORNER)|s.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},s.utils.object.inherits(s.blockRendering.SquareCorner,s.blockRendering.Measurable),s.blockRendering.RoundCorner=function(n,l){s.blockRendering.RoundCorner.superClass_.constructor.call(this,n),this.type=(l&&"left"!=l?s.blockRendering.Types.RIGHT_ROUND_CORNER:s.blockRendering.Types.LEFT_ROUND_CORNER)|s.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},s.utils.object.inherits(s.blockRendering.RoundCorner,s.blockRendering.Measurable),s.blockRendering.InRowSpacer=function(n,l){s.blockRendering.InRowSpacer.superClass_.constructor.call(this,n),this.type=this.type|s.blockRendering.Types.SPACER|s.blockRendering.Types.IN_ROW_SPACER,this.width=l,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},s.utils.object.inherits(s.blockRendering.InRowSpacer,s.blockRendering.Measurable),s.blockRendering.Row=function(n){this.type=s.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=n,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},s.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},s.blockRendering.Row.prototype.getLastInput=function(){for(var l,n=this.elements.length-1;l=this.elements[n];n--)if(s.blockRendering.Types.isInput(l))return l;return null},s.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},s.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},s.blockRendering.Row.prototype.getFirstSpacer=function(){for(var l,n=0;l=this.elements[n];n++)if(s.blockRendering.Types.isSpacer(l))return l;return null},s.blockRendering.Row.prototype.getLastSpacer=function(){for(var l,n=this.elements.length-1;l=this.elements[n];n--)if(s.blockRendering.Types.isSpacer(l))return l;return null},s.blockRendering.TopRow=function(n){s.blockRendering.TopRow.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},s.utils.object.inherits(s.blockRendering.TopRow,s.blockRendering.Row),s.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(n){var l=(n.hat?"cap"===n.hat:this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection,u=n.getPreviousBlock();return!!n.outputConnection||l||!!u&&u.getNextBlock()==n},s.blockRendering.TopRow.prototype.hasRightSquareCorner=function(n){return!0},s.blockRendering.TopRow.prototype.measure=function(){for(var _,n=0,l=0,u=0,h=0;_=this.elements[h];h++)l+=_.width,s.blockRendering.Types.isSpacer(_)||(s.blockRendering.Types.isHat(_)?u=Math.max(u,_.ascenderHeight):n=Math.max(n,_.height));this.width=Math.max(this.minWidth,l),this.height=Math.max(this.minHeight,n)+u,this.capline=this.ascenderHeight=u,this.widthWithConnectedBlocks=this.width},s.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},s.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},s.blockRendering.BottomRow=function(n){s.blockRendering.BottomRow.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},s.utils.object.inherits(s.blockRendering.BottomRow,s.blockRendering.Row),s.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection||!!n.getNextBlock()},s.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(n){return!0},s.blockRendering.BottomRow.prototype.measure=function(){for(var _,n=0,l=0,u=0,h=0;_=this.elements[h];h++)l+=_.width,s.blockRendering.Types.isSpacer(_)||(s.blockRendering.Types.isNextConnection(_)?u=Math.max(u,_.height):n=Math.max(n,_.height));this.width=Math.max(this.minWidth,l),this.height=Math.max(this.minHeight,n)+u,this.descenderHeight=u,this.widthWithConnectedBlocks=this.width},s.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},s.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},s.blockRendering.SpacerRow=function(n,l,u){s.blockRendering.SpacerRow.superClass_.constructor.call(this,n),this.type=this.type|s.blockRendering.Types.SPACER|s.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=u,this.height=l,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new s.blockRendering.InRowSpacer(this.constants_,u)]},s.utils.object.inherits(s.blockRendering.SpacerRow,s.blockRendering.Row),s.blockRendering.SpacerRow.prototype.measure=function(){},s.blockRendering.InputRow=function(n){s.blockRendering.InputRow.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},s.utils.object.inherits(s.blockRendering.InputRow,s.blockRendering.Row),s.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var u,n=0,l=0;u=this.elements[l];l++)this.width+=u.width,s.blockRendering.Types.isInput(u)&&(s.blockRendering.Types.isStatementInput(u)?n+=u.connectedBlockWidth:s.blockRendering.Types.isExternalInput(u)&&0!=u.connectedBlockWidth&&(n+=u.connectedBlockWidth-u.connectionWidth)),s.blockRendering.Types.isSpacer(u)||(this.height=Math.max(this.height,u.height));this.connectedBlockWidths=n,this.widthWithConnectedBlocks=this.width+n},s.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},s.blockRendering.RenderInfo=function(n,l){this.block_=l,this.renderer_=n,this.constants_=this.renderer_.getConstants(),this.outputConnection=l.outputConnection?new s.blockRendering.OutputConnection(this.constants_,l.outputConnection):null,this.isInline=l.getInputsInline()&&!l.isCollapsed(),this.isCollapsed=l.isCollapsed(),this.isInsertionMarker=l.isInsertionMarker(),this.RTL=l.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new s.blockRendering.TopRow(this.constants_),this.bottomRow=new s.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},s.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},s.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var n=new s.blockRendering.InputRow(this.constants_);this.inputRows.push(n);for(var h,l=this.block_.getIcons(),u=0;h=l[u];u++){var _=new s.blockRendering.Icon(this.constants_,h);this.isCollapsed&&h.collapseHidden?this.hiddenIcons.push(_):n.elements.push(_)}for(h=null,u=0;l=this.block_.inputList[u];u++)if(l.isVisible()){for(this.shouldStartNewRow_(l,h)&&(this.rows.push(n),n=new s.blockRendering.InputRow(this.constants_),this.inputRows.push(n)),h=0;_=l.fieldRow[h];h++)n.elements.push(new s.blockRendering.Field(this.constants_,_,l));this.addInput_(l,n),h=l}this.isCollapsed&&(n.hasJaggedEdge=!0,n.elements.push(new s.blockRendering.JaggedEdge(this.constants_))),(n.elements.length||n.hasDummyInput)&&this.rows.push(n),this.populateBottomRow_(),this.rows.push(this.bottomRow)},s.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var n=!!this.block_.previousConnection,l=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!n,u=this.topRow.hasLeftSquareCorner(this.block_)?s.blockRendering.SquareCorner:s.blockRendering.RoundCorner;this.topRow.elements.push(new u(this.constants_)),l?(n=new s.blockRendering.Hat(this.constants_),this.topRow.elements.push(n),this.topRow.capline=n.ascenderHeight):n&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new s.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==s.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,u=this.topRow.hasRightSquareCorner(this.block_)?s.blockRendering.SquareCorner:s.blockRendering.RoundCorner,this.topRow.elements.push(new u(this.constants_,"right"))},s.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==s.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new s.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new s.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new s.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new s.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new s.blockRendering.RoundCorner(this.constants_,"right"))},s.blockRendering.RenderInfo.prototype.addInput_=function(n,l){this.isInline&&n.type==s.inputTypes.VALUE?(l.elements.push(new s.blockRendering.InlineInput(this.constants_,n)),l.hasInlineInput=!0):n.type==s.inputTypes.STATEMENT?(l.elements.push(new s.blockRendering.StatementInput(this.constants_,n)),l.hasStatement=!0):n.type==s.inputTypes.VALUE?(l.elements.push(new s.blockRendering.ExternalValueInput(this.constants_,n)),l.hasExternalInput=!0):n.type==s.inputTypes.DUMMY&&(l.minHeight=Math.max(l.minHeight,n.getSourceBlock()&&n.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),l.hasDummyInput=!0),null==l.align&&(l.align=n.align)},s.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(n,l){return!(!l||n.type!=s.inputTypes.STATEMENT&&l.type!=s.inputTypes.STATEMENT&&(n.type!=s.inputTypes.VALUE&&n.type!=s.inputTypes.DUMMY||this.isInline))},s.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var l,n=0;l=this.rows[n];n++){var u=l.elements;if(l.elements=[],l.startsWithElemSpacer()&&l.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,u[0]))),u.length){for(var h=0;h<u.length-1;h++){l.elements.push(u[h]);var _=this.getInRowSpacing_(u[h],u[h+1]);l.elements.push(new s.blockRendering.InRowSpacer(this.constants_,_))}l.elements.push(u[u.length-1]),l.endsWithElemSpacer()&&l.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(u[u.length-1],null)))}}},s.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(n,l){if(!n&&l&&s.blockRendering.Types.isStatementInput(l))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(n&&s.blockRendering.Types.isInput(n)&&!l){if(s.blockRendering.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(n))return this.constants_.NO_PADDING}return n&&s.blockRendering.Types.isLeftSquareCorner(n)&&l&&(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))?l.notchOffset:n&&s.blockRendering.Types.isLeftRoundedCorner(n)&&l&&(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))?l.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},s.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var _,n=0,l=0,u=0,h=0;_=this.rows[h];h++){if(_.measure(),l=Math.max(l,_.width),_.hasStatement){var b=_.getLastInput();n=Math.max(n,_.width-b.width)}u=Math.max(u,_.widthWithConnectedBlocks)}for(this.statementEdge=n,this.width=l,h=0;_=this.rows[h];h++)_.hasStatement&&(_.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(l,u),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},s.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var l,n=0;l=this.rows[n];n++)if(l.hasStatement)this.alignStatementRow_(l);else{var u=l.width;0<(u=this.getDesiredRowWidth_(l)-u)&&this.addAlignmentPadding_(l,u),s.blockRendering.Types.isTopOrBottomRow(l)&&(l.widthWithConnectedBlocks=l.width)}},s.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(n){return this.width-this.startX},s.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(n,l){var u=n.getFirstSpacer(),h=n.getLastSpacer();(n.hasExternalInput||n.hasStatement)&&(n.widthWithConnectedBlocks+=l),n.align==s.constants.ALIGN.LEFT?h.width+=l:n.align==s.constants.ALIGN.CENTRE?(u.width+=l/2,h.width+=l/2):n.align==s.constants.ALIGN.RIGHT?u.width+=l:h.width+=l,n.width+=l},s.blockRendering.RenderInfo.prototype.alignStatementRow_=function(n){var l=n.getLastInput(),u=n.width-l.width,h=this.statementEdge;0<(u=h-u)&&this.addAlignmentPadding_(n,u),u=n.width,h=this.getDesiredRowWidth_(n),l.width+=h-u,l.height=Math.max(l.height,n.height),n.width+=h-u,n.widthWithConnectedBlocks=Math.max(n.width,this.statementEdge+n.connectedBlockWidths)},s.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var n=this.rows;this.rows=[];for(var l=0;l<n.length;l++)this.rows.push(n[l]),l!=n.length-1&&this.rows.push(this.makeSpacerRow_(n[l],n[l+1]))},s.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(n,l){var u=this.getSpacerRowHeight_(n,l),h=this.getSpacerRowWidth_(n,l);return u=new s.blockRendering.SpacerRow(this.constants_,u,h),n.hasStatement&&(u.followsStatement=!0),l.hasStatement&&(u.precedesStatement=!0),u},s.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(n,l){return this.width-this.startX},s.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(n,l){return this.constants_.MEDIUM_PADDING},s.blockRendering.RenderInfo.prototype.getElemCenterline_=function(n,l){return s.blockRendering.Types.isSpacer(l)?n.yPos+l.height/2:s.blockRendering.Types.isBottomRow(n)?(n=n.yPos+n.height-n.descenderHeight,s.blockRendering.Types.isNextConnection(l)?n+l.height/2:n-l.height/2):s.blockRendering.Types.isTopRow(n)?s.blockRendering.Types.isHat(l)?n.capline-l.height/2:n.capline+l.height/2:n.yPos+n.height/2},s.blockRendering.RenderInfo.prototype.recordElemPositions_=function(n){for(var h,l=n.xPos,u=0;h=n.elements[u];u++)s.blockRendering.Types.isSpacer(h)&&(h.height=n.height),h.xPos=l,h.centerline=this.getElemCenterline_(n,h),l+=h.width},s.blockRendering.RenderInfo.prototype.finalize_=function(){for(var h,n=0,l=0,u=0;h=this.rows[u];u++)h.yPos=l,h.xPos=this.startX,l+=h.height,n=Math.max(n,h.widthWithConnectedBlocks),this.recordElemPositions_(h);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=n+this.startX,this.height=l,this.startY=this.topRow.capline,this.bottomRow.baseline=l-this.bottomRow.descenderHeight},s.blockRendering.Debug=function(n){this.debugElements_=[],this.svgRoot_=null,this.constants_=n},s.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},s.blockRendering.Debug.prototype.clearElems=function(){for(var l,n=0;l=this.debugElements_[n];n++)s.utils.dom.removeNode(l);this.debugElements_=[]},s.blockRendering.Debug.prototype.drawSpacerRow=function(n,l,u){if(s.blockRendering.Debug.config.rowSpacers){var h=Math.abs(n.height),_=0>n.height;_&&(l-=h),this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:u?-(n.xPos+n.width):n.xPos,y:l,width:n.width,height:h,stroke:_?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawSpacerElem=function(n,l,u){if(s.blockRendering.Debug.config.elemSpacers){l=Math.abs(n.width);var h=0>n.width,_=h?n.xPos-l:n.xPos;u&&(_=-(_+l)),this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:_,y:n.centerline-n.height/2,width:l,height:n.height,stroke:"pink",fill:h?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawRenderedElem=function(n,l){if(s.blockRendering.Debug.config.elems){var u=n.xPos;l&&(u=-(u+n.width)),this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:u,y:l=n.centerline-n.height/2,width:n.width,height:n.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),s.blockRendering.Types.isField(n)&&n.field instanceof s.FieldLabel&&this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:u,y:l+this.constants_.FIELD_TEXT_BASELINE,width:n.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}s.blockRendering.Types.isInput(n)&&s.blockRendering.Debug.config.connections&&this.drawConnection(n.connectionModel)},s.blockRendering.Debug.prototype.drawConnection=function(n){if(s.blockRendering.Debug.config.connections){if(n.type==s.connectionTypes.INPUT_VALUE)var l=4,u="magenta",h="none";else n.type==s.connectionTypes.OUTPUT_VALUE?(l=2,h=u="magenta"):n.type==s.connectionTypes.NEXT_STATEMENT?(l=4,u="goldenrod",h="none"):n.type==s.connectionTypes.PREVIOUS_STATEMENT&&(l=2,h=u="goldenrod");this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:n.offsetInBlock_.x,cy:n.offsetInBlock_.y,r:l,fill:h,stroke:u},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawRenderedRow=function(n,l,u){s.blockRendering.Debug.config.rows&&(this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:u?-(n.xPos+n.width):n.xPos,y:n.yPos,width:n.width,height:n.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),s.blockRendering.Types.isTopOrBottomRow(n)||s.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:u?-(n.xPos+n.widthWithConnectedBlocks):n.xPos,y:n.yPos,width:n.widthWithConnectedBlocks,height:n.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},s.blockRendering.Debug.prototype.drawRowWithElements=function(n,l,u){for(var h=0,_=n.elements.length;h<_;h++){var b=n.elements[h];b?s.blockRendering.Types.isSpacer(b)?this.drawSpacerElem(b,n.height,u):this.drawRenderedElem(b,u):console.warn("A row has an undefined or null element.",n,b)}this.drawRenderedRow(n,l,u)},s.blockRendering.Debug.prototype.drawBoundingBox=function(n){if(s.blockRendering.Debug.config.blockBounds){var l=n.RTL?-n.width:0;this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:l,y:0,width:n.width,height:n.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),s.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blockRenderDebug",x:l=n.RTL?-n.widthWithChildren:0,y:0,width:n.widthWithChildren,height:n.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawDebug=function(n,l){this.clearElems(),this.svgRoot_=n.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var _,u=0,h=0;_=l.rows[h];h++)s.blockRendering.Types.isBetweenRowSpacer(_)?this.drawSpacerRow(_,u,l.RTL):this.drawRowWithElements(_,u,l.RTL),u+=_.height;n.previousConnection&&this.drawConnection(n.previousConnection),n.nextConnection&&this.drawConnection(n.nextConnection),n.outputConnection&&this.drawConnection(n.outputConnection),l.rightSide&&this.drawRenderedElem(l.rightSide,l.RTL),this.drawBoundingBox(l),this.drawRender(n.pathObject.svgPath)},s.blockRendering.Debug.prototype.drawRender=function(n){s.blockRendering.Debug.config.render&&(n.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){n.setAttribute("filter","")},100))},s.blockRendering.Drawer=function(n,l){this.block_=n,this.info_=l,this.topLeft_=n.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=l.getRenderer().getConstants()},s.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),s.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},s.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},s.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var l,n=0;l=this.info_.hiddenIcons[n];n++)l.icon.iconGroup_.setAttribute("display","none")},s.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var n=1;n<this.info_.rows.length-1;n++){var l=this.info_.rows[n];l.hasJaggedEdge?this.drawJaggedEdge_(l):l.hasStatement?this.drawStatementInput_(l):l.hasExternalInput?this.drawValueInput_(l):this.drawRightSideRow_(l)}this.drawBottom_(),this.drawLeft_()},s.blockRendering.Drawer.prototype.drawTop_=function(){var n=this.info_.topRow,l=n.elements;this.positionPreviousConnection_(),this.outlinePath_+=s.utils.svgPaths.moveBy(n.xPos,this.info_.startY);for(var h,u=0;h=l[u];u++)s.blockRendering.Types.isLeftRoundedCorner(h)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:s.blockRendering.Types.isRightRoundedCorner(h)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:s.blockRendering.Types.isPreviousConnection(h)?this.outlinePath_+=h.shape.pathLeft:s.blockRendering.Types.isHat(h)?this.outlinePath_+=this.constants_.START_HAT.path:s.blockRendering.Types.isSpacer(h)&&(this.outlinePath_+=s.utils.svgPaths.lineOnAxis("h",h.width));this.outlinePath_+=s.utils.svgPaths.lineOnAxis("v",n.height)},s.blockRendering.Drawer.prototype.drawJaggedEdge_=function(n){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+s.utils.svgPaths.lineOnAxis("v",n.height-this.constants_.JAGGED_TEETH.height)},s.blockRendering.Drawer.prototype.drawValueInput_=function(n){var l=n.getLastInput();this.positionExternalValueConnection_(n);var u="function"==typeof l.shape.pathDown?l.shape.pathDown(l.height):l.shape.pathDown;this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",l.xPos+l.width)+u+s.utils.svgPaths.lineOnAxis("v",n.height-l.connectionHeight)},s.blockRendering.Drawer.prototype.drawStatementInput_=function(n){var l=n.getLastInput(),u=l.xPos+l.notchOffset+l.shape.width;l=l.shape.pathRight+s.utils.svgPaths.lineOnAxis("h",-(l.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var h=n.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",u)+l+s.utils.svgPaths.lineOnAxis("v",h)+this.constants_.INSIDE_CORNERS.pathBottom+s.utils.svgPaths.lineOnAxis("H",n.xPos+n.width),this.positionStatementInputConnection_(n)},s.blockRendering.Drawer.prototype.drawRightSideRow_=function(n){this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",n.yPos+n.height)},s.blockRendering.Drawer.prototype.drawBottom_=function(){var n=this.info_.bottomRow,l=n.elements;this.positionNextConnection_();for(var b,u=0,h="",_=l.length-1;b=l[_];_--)s.blockRendering.Types.isNextConnection(b)?h+=b.shape.pathRight:s.blockRendering.Types.isLeftSquareCorner(b)?h+=s.utils.svgPaths.lineOnAxis("H",n.xPos):s.blockRendering.Types.isLeftRoundedCorner(b)?h+=this.constants_.OUTSIDE_CORNERS.bottomLeft:s.blockRendering.Types.isRightRoundedCorner(b)?(h+=this.constants_.OUTSIDE_CORNERS.bottomRight,u=this.constants_.OUTSIDE_CORNERS.rightHeight):s.blockRendering.Types.isSpacer(b)&&(h+=s.utils.svgPaths.lineOnAxis("h",-1*b.width));this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",n.baseline-u),this.outlinePath_+=h},s.blockRendering.Drawer.prototype.drawLeft_=function(){var n=this.info_.outputConnection;if(this.positionOutputConnection_(),n){var l=n.connectionOffsetY+n.height;n="function"==typeof n.shape.pathUp?n.shape.pathUp(n.height):n.shape.pathUp,this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",l)+n}this.outlinePath_+="z"},s.blockRendering.Drawer.prototype.drawInternals_=function(){for(var l,n=0;l=this.info_.rows[n];n++)for(var h,u=0;h=l.elements[u];u++)s.blockRendering.Types.isInlineInput(h)?this.drawInlineInput_(h):(s.blockRendering.Types.isIcon(h)||s.blockRendering.Types.isField(h))&&this.layoutField_(h)},s.blockRendering.Drawer.prototype.layoutField_=function(n){if(s.blockRendering.Types.isField(n))var l=n.field.getSvgRoot();else s.blockRendering.Types.isIcon(n)&&(l=n.icon.iconGroup_);var u=n.centerline-n.height/2,h=n.xPos,_="";this.info_.RTL&&(h=-(h+n.width),n.flipRtl&&(h+=n.width,_="scale(-1 1)")),s.blockRendering.Types.isIcon(n)?(l.setAttribute("display","block"),l.setAttribute("transform","translate("+h+","+u+")"),n.icon.computeIconLocation()):l.setAttribute("transform","translate("+h+","+u+")"+_),this.info_.isInsertionMarker&&l.setAttribute("display","none")},s.blockRendering.Drawer.prototype.drawInlineInput_=function(n){var l=n.width,u=n.height,h=n.connectionOffsetY,_=n.connectionHeight+h;this.inlinePath_+=s.utils.svgPaths.moveTo(n.xPos+n.connectionWidth,n.centerline-u/2)+s.utils.svgPaths.lineOnAxis("v",h)+n.shape.pathDown+s.utils.svgPaths.lineOnAxis("v",u-_)+s.utils.svgPaths.lineOnAxis("h",l-n.connectionWidth)+s.utils.svgPaths.lineOnAxis("v",-u)+"z",this.positionInlineInputConnection_(n)},s.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(n){if(n.connectionModel){var u=n.xPos+n.connectionWidth+n.connectionOffsetX;this.info_.RTL&&(u*=-1),n.connectionModel.setOffsetInBlock(u,n.centerline-n.height/2+n.connectionOffsetY)}},s.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(n){var l=n.getLastInput();if(l.connectionModel){var u=n.xPos+n.statementEdge+l.notchOffset;this.info_.RTL&&(u*=-1),l.connectionModel.setOffsetInBlock(u,n.yPos)}},s.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(n){var l=n.getLastInput();if(l.connectionModel){var u=n.xPos+n.width;this.info_.RTL&&(u*=-1),l.connectionModel.setOffsetInBlock(u,n.yPos)}},s.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var n=this.info_.topRow;if(n.connection){var l=n.xPos+n.notchOffset;n.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-l:l,0)}},s.blockRendering.Drawer.prototype.positionNextConnection_=function(){var n=this.info_.bottomRow;if(n.connection){var l=n.connection,u=l.xPos;l.connectionModel.setOffsetInBlock(this.info_.RTL?-u:u,n.baseline)}},s.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var n=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-n:n,this.info_.outputConnection.connectionOffsetY)}},s.Events.MarkerMove=function(n,l,u,h){var _=n?n.workspace.id:void 0;h&&h.getType()==s.ASTNode.types.WORKSPACE&&(_=h.getLocation().id),s.Events.MarkerMove.superClass_.constructor.call(this,_),this.blockId=n?n.id:null,this.oldNode=u,this.newNode=h,this.isCursor=l},s.utils.object.inherits(s.Events.MarkerMove,s.Events.UiBase),s.Events.MarkerMove.prototype.type=s.Events.MARKER_MOVE,s.Events.MarkerMove.prototype.toJson=function(){var n=s.Events.MarkerMove.superClass_.toJson.call(this);return n.isCursor=this.isCursor,n.blockId=this.blockId,n.oldNode=this.oldNode,n.newNode=this.newNode,n},s.Events.MarkerMove.prototype.fromJson=function(n){s.Events.MarkerMove.superClass_.fromJson.call(this,n),this.isCursor=n.isCursor,this.blockId=n.blockId,this.oldNode=n.oldNode,this.newNode=n.newNode},s.registry.register(s.registry.Type.EVENT,s.Events.MARKER_MOVE,s.Events.MarkerMove),s.blockRendering.MarkerSvg=function(n,l,u){this.workspace_=n,this.marker_=u,this.parent_=null,this.constants_=l,this.currentMarkerSvg=null,n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=u.colour||n},s.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",s.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",s.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,s.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},s.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},s.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},s.blockRendering.MarkerSvg.prototype.createDom=function(){var n=this.isCursor()?s.blockRendering.MarkerSvg.CURSOR_CLASS:s.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:n},null),this.createDomInternal_(),this.svgGroup_},s.blockRendering.MarkerSvg.prototype.setParent_=function(n){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),n.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),n.setMarkerSvg(this.getSvgRoot())),this.parent_=n},s.blockRendering.MarkerSvg.prototype.draw=function(n,l){if(l){this.constants_=this.workspace_.getRenderer().getConstants();var u=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||u,this.applyColour_(l),this.showAtLocation_(l),this.fireMarkerEvent_(n,l),void 0!==(n=this.currentMarkerSvg.childNodes[0])&&n.beginElement&&n.beginElement()}else this.hide()},s.blockRendering.MarkerSvg.prototype.showAtLocation_=function(n){var l=n.getLocation().type;n.getType()==s.ASTNode.types.BLOCK?this.showWithBlock_(n):n.getType()==s.ASTNode.types.OUTPUT?this.showWithOutput_(n):l==s.connectionTypes.INPUT_VALUE?this.showWithInput_(n):l==s.connectionTypes.NEXT_STATEMENT?this.showWithNext_(n):n.getType()==s.ASTNode.types.PREVIOUS?this.showWithPrevious_(n):n.getType()==s.ASTNode.types.FIELD?this.showWithField_(n):n.getType()==s.ASTNode.types.WORKSPACE?this.showWithCoordinates_(n):n.getType()==s.ASTNode.types.STACK&&this.showWithStack_(n)},s.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(n){var l=(n=n.getSourceBlock()).width,u=n.height,h=u*s.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,_=this.constants_.CURSOR_BLOCK_PADDING;if(n.previousConnection){var b=this.constants_.shapeFor(n.previousConnection);this.positionPrevious_(l,_,h,b)}else n.outputConnection?(b=this.constants_.shapeFor(n.outputConnection),this.positionOutput_(l,u,b)):this.positionBlock_(l,_,h);this.setParent_(n),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithBlock_=function(n){this.showWithBlockPrevOutput_(n)},s.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(n){this.showWithBlockPrevOutput_(n)},s.blockRendering.MarkerSvg.prototype.showWithOutput_=function(n){this.showWithBlockPrevOutput_(n)},s.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(n){var l=n.getWsCoordinate();n=l.x,this.workspace_.RTL&&(n-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(n,l=l.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithField_=function(n){var l=(n=n.getLocation()).getSize().width,u=n.getSize().height;this.positionRect_(0,0,l,u),this.setParent_(n),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithInput_=function(n){var l=(n=n.getLocation()).getSourceBlock();this.positionInput_(n),this.setParent_(l),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithNext_=function(n){var l=n.getLocation();n=l.getSourceBlock();var u=0;l=l.getOffsetInBlock().y;var h=n.getHeightWidth().width;this.workspace_.RTL&&(u=-h),this.positionLine_(u,l,h),this.setParent_(n),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithStack_=function(n){var l=(n=n.getLocation()).getHeightWidth(),u=l.width+this.constants_.CURSOR_STACK_PADDING,h=-this.constants_.CURSOR_STACK_PADDING/2,b=h;this.workspace_.RTL&&(b=-(u+h)),this.positionRect_(b,-this.constants_.CURSOR_STACK_PADDING/2,u,l=l.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(n),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},s.blockRendering.MarkerSvg.prototype.positionBlock_=function(n,l,u){n=s.utils.svgPaths.moveBy(-l,u)+s.utils.svgPaths.lineOnAxis("V",-l)+s.utils.svgPaths.lineOnAxis("H",n+2*l)+s.utils.svgPaths.lineOnAxis("V",u),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},s.blockRendering.MarkerSvg.prototype.positionInput_=function(n){var l=n.getOffsetInBlock().x,u=n.getOffsetInBlock().y;n=s.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(n).pathDown,this.markerInput_.setAttribute("d",n),this.markerInput_.setAttribute("transform","translate("+l+","+u+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},s.blockRendering.MarkerSvg.prototype.positionLine_=function(n,l,u){this.markerSvgLine_.setAttribute("x",n),this.markerSvgLine_.setAttribute("y",l),this.markerSvgLine_.setAttribute("width",u),this.currentMarkerSvg=this.markerSvgLine_},s.blockRendering.MarkerSvg.prototype.positionOutput_=function(n,l,u){n=s.utils.svgPaths.moveBy(n,0)+s.utils.svgPaths.lineOnAxis("h",-(n-u.width))+s.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+u.pathDown+s.utils.svgPaths.lineOnAxis("V",l)+s.utils.svgPaths.lineOnAxis("H",n),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},s.blockRendering.MarkerSvg.prototype.positionPrevious_=function(n,l,u,h){n=s.utils.svgPaths.moveBy(-l,u)+s.utils.svgPaths.lineOnAxis("V",-l)+s.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+h.pathLeft+s.utils.svgPaths.lineOnAxis("H",n+2*l)+s.utils.svgPaths.lineOnAxis("V",u),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},s.blockRendering.MarkerSvg.prototype.positionRect_=function(n,l,u,h){this.markerSvgRect_.setAttribute("x",n),this.markerSvgRect_.setAttribute("y",l),this.markerSvgRect_.setAttribute("width",u),this.markerSvgRect_.setAttribute("height",h),this.currentMarkerSvg=this.markerSvgRect_},s.blockRendering.MarkerSvg.prototype.flipRtl_=function(n){n.setAttribute("transform","scale(-1 1)")},s.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},s.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(n,l){var u=l.getSourceBlock();n=new(s.Events.get(s.Events.MARKER_MOVE))(u,this.isCursor(),n,l),s.Events.fire(n)},s.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},s.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=s.utils.dom.createSvgElement(s.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var n=this.getBlinkProperties_();s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,n,this.markerSvgLine_),s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,n,this.markerInput_),n.attributeName="stroke",s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,n,this.markerBlock_)}return this.markerSvg_},s.blockRendering.MarkerSvg.prototype.applyColour_=function(n){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",n=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",n),this.markerBlock_.firstChild.setAttribute("values",n))},s.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&s.utils.dom.removeNode(this.svgGroup_)},s.blockRendering.PathObject=function(n,l,u){this.constants=u,this.svgRoot=n,this.svgPath=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=l,this.markerSvg=this.cursorSvg=null},s.blockRendering.PathObject.prototype.setPath=function(n){this.svgPath.setAttribute("d",n)},s.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},s.blockRendering.PathObject.prototype.setCursorSvg=function(n){n?(this.svgRoot.appendChild(n),this.cursorSvg=n):this.cursorSvg=null},s.blockRendering.PathObject.prototype.setMarkerSvg=function(n){n?(this.cursorSvg?this.svgRoot.insertBefore(n,this.cursorSvg):this.svgRoot.appendChild(n),this.markerSvg=n):this.markerSvg=null},s.blockRendering.PathObject.prototype.applyColour=function(n){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(n.isShadow()),this.updateDisabled_(!n.isEnabled()||n.getInheritedDisabled())},s.blockRendering.PathObject.prototype.setStyle=function(n){this.style=n},s.blockRendering.PathObject.prototype.setClass_=function(n,l){l?s.utils.dom.addClass(this.svgRoot,n):s.utils.dom.removeClass(this.svgRoot,n)},s.blockRendering.PathObject.prototype.updateHighlighted=function(n){this.svgPath.setAttribute("filter",n?"url(#"+this.constants.embossFilterId+")":"none")},s.blockRendering.PathObject.prototype.updateShadow_=function(n){n&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},s.blockRendering.PathObject.prototype.updateDisabled_=function(n){this.setClass_("blocklyDisabled",n),n&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},s.blockRendering.PathObject.prototype.updateSelected=function(n){this.setClass_("blocklySelected",n)},s.blockRendering.PathObject.prototype.updateDraggingDelete=function(n){this.setClass_("blocklyDraggingDelete",n)},s.blockRendering.PathObject.prototype.updateInsertionMarker=function(n){this.setClass_("blocklyInsertionMarker",n)},s.blockRendering.PathObject.prototype.updateMovable=function(n){this.setClass_("blocklyDraggable",n)},s.blockRendering.PathObject.prototype.updateReplacementFade=function(n){this.setClass_("blocklyReplaceable",n)},s.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(n,l){},s.blockRendering.Renderer=function(n){this.name=n,this.overrides=this.constants_=null},s.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},s.blockRendering.Renderer.prototype.init=function(n,l){this.constants_=this.makeConstants_(),l&&(this.overrides=l,s.utils.object.mixin(this.constants_,l)),this.constants_.setTheme(n),this.constants_.init()},s.blockRendering.Renderer.prototype.createDom=function(n,l){this.constants_.createDom(n,this.name+"-"+l.name,"."+this.getClassName()+"."+l.getClassName())},s.blockRendering.Renderer.prototype.refreshDom=function(n,l){var u=this.getConstants();u.dispose(),this.constants_=this.makeConstants_(),this.overrides&&s.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=u.randomIdentifier,this.constants_.setTheme(l),this.constants_.init(),this.createDom(n,l)},s.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},s.blockRendering.Renderer.prototype.makeConstants_=function(){return new s.blockRendering.ConstantProvider},s.blockRendering.Renderer.prototype.makeRenderInfo_=function(n){return new s.blockRendering.RenderInfo(this,n)},s.blockRendering.Renderer.prototype.makeDrawer_=function(n,l){return new s.blockRendering.Drawer(n,l)},s.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!s.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new s.blockRendering.Debug(this.getConstants())},s.blockRendering.Renderer.prototype.makeMarkerDrawer=function(n,l){return new s.blockRendering.MarkerSvg(n,this.getConstants(),l)},s.blockRendering.Renderer.prototype.makePathObject=function(n,l){return new s.blockRendering.PathObject(n,l,this.constants_)},s.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},s.blockRendering.Renderer.prototype.shouldHighlightConnection=function(n){return!0},s.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(n,l,u){return!!s.Connection.getConnectionForOrphanedConnection(n,u===s.connectionTypes.OUTPUT_VALUE?l.outputConnection:l.previousConnection)},s.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(n,l,u){return l.type==s.connectionTypes.OUTPUT_VALUE||l.type==s.connectionTypes.PREVIOUS_STATEMENT?!n.isConnected()||this.orphanCanConnectAtEnd(u,n.targetBlock(),l.type)?s.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:s.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:s.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},s.blockRendering.Renderer.prototype.render=function(n){s.blockRendering.useDebugger&&!n.renderingDebugger&&(n.renderingDebugger=this.makeDebugger_());var l=this.makeRenderInfo_(n);l.measure(),this.makeDrawer_(n,l).draw()},s.geras={},s.geras.ConstantProvider=function(){s.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},s.utils.object.inherits(s.geras.ConstantProvider,s.blockRendering.ConstantProvider),s.geras.ConstantProvider.prototype.getCSS_=function(n){return s.geras.ConstantProvider.superClass_.getCSS_.call(this,n).concat([n+" .blocklyInsertionMarker>.blocklyPathLight,",n+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},s.geras.Highlighter=function(n){this.info_=n,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,n=n.getRenderer(),this.constants_=n.getConstants(),this.highlightConstants_=n.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},s.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},s.geras.Highlighter.prototype.drawTopCorner=function(n){this.steps_+=s.utils.svgPaths.moveBy(n.xPos,this.info_.startY);for(var u,l=0;u=n.elements[l];l++)s.blockRendering.Types.isLeftSquareCorner(u)?this.steps_+=this.highlightConstants_.START_POINT:s.blockRendering.Types.isLeftRoundedCorner(u)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):s.blockRendering.Types.isPreviousConnection(u)?this.steps_+=this.notchPaths_.pathLeft:s.blockRendering.Types.isHat(u)?this.steps_+=this.startPaths_.path(this.RTL_):s.blockRendering.Types.isSpacer(u)&&0!=u.width&&(this.steps_+=s.utils.svgPaths.lineOnAxis("H",u.xPos+u.width-this.highlightOffset_));this.steps_+=s.utils.svgPaths.lineOnAxis("H",n.xPos+n.width-this.highlightOffset_)},s.geras.Highlighter.prototype.drawJaggedEdge_=function(n){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+s.utils.svgPaths.lineOnAxis("v",n.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},s.geras.Highlighter.prototype.drawValueInput=function(n){var l=n.getLastInput();if(this.RTL_){var u=n.height-l.connectionHeight;this.steps_+=s.utils.svgPaths.moveTo(l.xPos+l.width-this.highlightOffset_,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+s.utils.svgPaths.lineOnAxis("v",u)}else this.steps_+=s.utils.svgPaths.moveTo(l.xPos+l.width,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},s.geras.Highlighter.prototype.drawStatementInput=function(n){var l=n.getLastInput();if(this.RTL_){var u=n.height-2*this.insideCornerPaths_.height;this.steps_+=s.utils.svgPaths.moveTo(l.xPos,n.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+s.utils.svgPaths.lineOnAxis("v",u)+this.insideCornerPaths_.pathBottom(this.RTL_)+s.utils.svgPaths.lineTo(n.width-l.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=s.utils.svgPaths.moveTo(l.xPos,n.yPos+n.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+s.utils.svgPaths.lineTo(n.width-l.xPos-this.insideCornerPaths_.width,0)},s.geras.Highlighter.prototype.drawRightSideRow=function(n){var l=n.xPos+n.width-this.highlightOffset_;n.followsStatement&&(this.steps_+=s.utils.svgPaths.lineOnAxis("H",l)),this.RTL_&&(this.steps_+=s.utils.svgPaths.lineOnAxis("H",l),n.height>this.highlightOffset_&&(this.steps_+=s.utils.svgPaths.lineOnAxis("V",n.yPos+n.height-this.highlightOffset_)))},s.geras.Highlighter.prototype.drawBottomRow=function(n){if(this.RTL_)this.steps_+=s.utils.svgPaths.lineOnAxis("V",n.baseline-this.highlightOffset_);else{var l=this.info_.bottomRow.elements[0];s.blockRendering.Types.isLeftSquareCorner(l)?this.steps_+=s.utils.svgPaths.moveTo(n.xPos+this.highlightOffset_,n.baseline-this.highlightOffset_):s.blockRendering.Types.isLeftRoundedCorner(l)&&(this.steps_+=s.utils.svgPaths.moveTo(n.xPos,n.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},s.geras.Highlighter.prototype.drawLeft=function(){var n=this.info_.outputConnection;n&&(n=n.connectionOffsetY+n.height,this.RTL_?this.steps_+=s.utils.svgPaths.moveTo(this.info_.startX,n):(this.steps_+=s.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=s.utils.svgPaths.lineOnAxis("V",n)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(s.blockRendering.Types.isLeftRoundedCorner((n=this.info_.topRow).elements[0])?this.steps_+=s.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=s.utils.svgPaths.lineOnAxis("V",n.capline+this.highlightOffset_))},s.geras.Highlighter.prototype.drawInlineInput=function(n){var l=this.highlightOffset_,u=n.xPos+n.connectionWidth,h=n.centerline-n.height/2,_=n.width-n.connectionWidth,b=h+l;this.RTL_?(h=n.connectionOffsetY-l,n=n.height-(n.connectionOffsetY+n.connectionHeight)+l,this.inlineSteps_+=s.utils.svgPaths.moveTo(u-l,b)+s.utils.svgPaths.lineOnAxis("v",h)+this.puzzleTabPaths_.pathDown(this.RTL_)+s.utils.svgPaths.lineOnAxis("v",n)+s.utils.svgPaths.lineOnAxis("h",_)):this.inlineSteps_+=s.utils.svgPaths.moveTo(n.xPos+n.width+l,b)+s.utils.svgPaths.lineOnAxis("v",n.height)+s.utils.svgPaths.lineOnAxis("h",-_)+s.utils.svgPaths.moveTo(u,h+n.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},s.geras.InlineInput=function(n,l){s.geras.InlineInput.superClass_.constructor.call(this,n,l),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},s.utils.object.inherits(s.geras.InlineInput,s.blockRendering.InlineInput),s.geras.StatementInput=function(n,l){s.geras.StatementInput.superClass_.constructor.call(this,n,l),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},s.utils.object.inherits(s.geras.StatementInput,s.blockRendering.StatementInput),s.geras.RenderInfo=function(n,l){s.geras.RenderInfo.superClass_.constructor.call(this,n,l)},s.utils.object.inherits(s.geras.RenderInfo,s.blockRendering.RenderInfo),s.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.geras.RenderInfo.prototype.populateBottomRow_=function(){s.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==s.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},s.geras.RenderInfo.prototype.addInput_=function(n,l){this.isInline&&n.type==s.inputTypes.VALUE?(l.elements.push(new s.geras.InlineInput(this.constants_,n)),l.hasInlineInput=!0):n.type==s.inputTypes.STATEMENT?(l.elements.push(new s.geras.StatementInput(this.constants_,n)),l.hasStatement=!0):n.type==s.inputTypes.VALUE?(l.elements.push(new s.blockRendering.ExternalValueInput(this.constants_,n)),l.hasExternalInput=!0):n.type==s.inputTypes.DUMMY&&(l.minHeight=Math.max(l.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),l.hasDummyInput=!0),this.isInline||null!=l.align||(l.align=n.align)},s.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var u,n=!1,l=0;u=this.rows[l];l++)u.hasExternalInput&&(n=!0);for(l=0;u=this.rows[l];l++){var h=u.elements;if(u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,h[0]))),h.length){for(var _=0;_<h.length-1;_++){u.elements.push(h[_]);var b=this.getInRowSpacing_(h[_],h[_+1]);u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b))}u.elements.push(h[h.length-1]),u.endsWithElemSpacer()&&(b=this.getInRowSpacing_(h[h.length-1],null),n&&u.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b)))}}},s.geras.RenderInfo.prototype.getInRowSpacing_=function(n,l){if(!n)return l&&s.blockRendering.Types.isField(l)&&l.isEditable?this.constants_.MEDIUM_PADDING:l&&s.blockRendering.Types.isInlineInput(l)?this.constants_.MEDIUM_LARGE_PADDING:l&&s.blockRendering.Types.isStatementInput(l)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!s.blockRendering.Types.isInput(n)&&(!l||s.blockRendering.Types.isStatementInput(l)))return s.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:s.blockRendering.Types.isIcon(n)?2*this.constants_.LARGE_PADDING+1:s.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:s.blockRendering.Types.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:s.blockRendering.Types.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:s.blockRendering.Types.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInput(n)&&!l){if(s.blockRendering.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(n))return this.constants_.NO_PADDING}if(!s.blockRendering.Types.isInput(n)&&l&&s.blockRendering.Types.isInput(l)){if(s.blockRendering.Types.isField(n)&&n.isEditable){if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.SMALL_PADDING}else{if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.MEDIUM_LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(l))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(s.blockRendering.Types.isIcon(n)&&l&&!s.blockRendering.Types.isInput(l))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInlineInput(n)&&l&&s.blockRendering.Types.isField(l))return l.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isLeftSquareCorner(n)&&l){if(s.blockRendering.Types.isHat(l))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isPreviousConnection(l))return l.notchOffset;if(s.blockRendering.Types.isNextConnection(l))return l.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(s.blockRendering.Types.isLeftRoundedCorner(n)&&l){if(s.blockRendering.Types.isPreviousConnection(l))return l.notchOffset-this.constants_.CORNER_RADIUS;if(s.blockRendering.Types.isNextConnection(l))return l.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return s.blockRendering.Types.isField(n)&&l&&s.blockRendering.Types.isField(l)&&n.isEditable==l.isEditable||l&&s.blockRendering.Types.isJaggedEdge(l)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.geras.RenderInfo.prototype.getSpacerRowHeight_=function(n,l){return s.blockRendering.Types.isTopRow(n)&&s.blockRendering.Types.isBottomRow(l)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:s.blockRendering.Types.isTopRow(n)||s.blockRendering.Types.isBottomRow(l)?this.constants_.NO_PADDING:n.hasExternalInput&&l.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&l.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&l.hasStatement||!n.hasStatement&&l.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.geras.RenderInfo.prototype.getElemCenterline_=function(n,l){if(s.blockRendering.Types.isSpacer(l))return n.yPos+l.height/2;if(s.blockRendering.Types.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,s.blockRendering.Types.isNextConnection(l)?n+l.height/2:n-l.height/2;if(s.blockRendering.Types.isTopRow(n))return s.blockRendering.Types.isHat(l)?n.capline-l.height/2:n.capline+l.height/2;var u=n.yPos;return s.blockRendering.Types.isField(l)||s.blockRendering.Types.isIcon(l)?(u+=l.height/2,(n.hasInlineInput||n.hasStatement)&&l.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=n.height&&(u+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):u=s.blockRendering.Types.isInlineInput(l)?u+l.height/2:u+n.height/2,u},s.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var h,n=0,l=null,u=this.rows.length-1;h=this.rows[u];u--)h.nextRightEdge=n,s.blockRendering.Types.isInputRow(h)&&(h.hasStatement&&this.alignStatementRow_(h),l&&l.hasStatement&&h.width<l.width?h.nextRightEdge=l.width:n=h.width,l=h);for(u=n=0;h=this.rows[u];u++)h.hasStatement?n=this.getDesiredRowWidth_(h):s.blockRendering.Types.isSpacer(h)?h.width=Math.max(n,h.nextRightEdge):(0<(n=Math.max(n,h.nextRightEdge)-h.width)&&this.addAlignmentPadding_(h,n),n=h.width)}else s.geras.RenderInfo.superClass_.alignRowElements_.call(this)},s.geras.RenderInfo.prototype.getDesiredRowWidth_=function(n){return this.isInline&&n.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:s.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,n)},s.geras.RenderInfo.prototype.finalize_=function(){for(var h,n=0,l=0,u=0;h=this.rows[u];u++){h.yPos=l,h.xPos=this.startX,l+=h.height,n=Math.max(n,h.widthWithConnectedBlocks);var _=l-this.topRow.ascenderHeight;h==this.bottomRow&&_<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=_=this.constants_.MIN_BLOCK_HEIGHT-_,l+=_),this.recordElemPositions_(h)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=l-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=l+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},s.geras.Drawer=function(n,l){s.geras.Drawer.superClass_.constructor.call(this,n,l),this.highlighter_=new s.geras.Highlighter(l)},s.utils.object.inherits(s.geras.Drawer,s.blockRendering.Drawer),s.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var n=this.block_.pathObject;n.setPath(this.outlinePath_+"\n"+this.inlinePath_),n.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&n.flipRTL(),s.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},s.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),s.geras.Drawer.superClass_.drawTop_.call(this)},s.geras.Drawer.prototype.drawJaggedEdge_=function(n){this.highlighter_.drawJaggedEdge_(n),s.geras.Drawer.superClass_.drawJaggedEdge_.call(this,n)},s.geras.Drawer.prototype.drawValueInput_=function(n){this.highlighter_.drawValueInput(n),s.geras.Drawer.superClass_.drawValueInput_.call(this,n)},s.geras.Drawer.prototype.drawStatementInput_=function(n){this.highlighter_.drawStatementInput(n),s.geras.Drawer.superClass_.drawStatementInput_.call(this,n)},s.geras.Drawer.prototype.drawRightSideRow_=function(n){this.highlighter_.drawRightSideRow(n),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+s.utils.svgPaths.lineOnAxis("V",n.yPos+n.height)},s.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),s.geras.Drawer.superClass_.drawBottom_.call(this)},s.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),s.geras.Drawer.superClass_.drawLeft_.call(this)},s.geras.Drawer.prototype.drawInlineInput_=function(n){this.highlighter_.drawInlineInput(n),s.geras.Drawer.superClass_.drawInlineInput_.call(this,n)},s.geras.Drawer.prototype.positionInlineInputConnection_=function(n){if(n.connectionModel){var u=n.xPos+n.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),n.connectionModel.setOffsetInBlock(u,n.centerline-n.height/2+n.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},s.geras.Drawer.prototype.positionStatementInputConnection_=function(n){var l=n.getLastInput();if(l.connectionModel){var u=n.xPos+n.statementEdge+l.notchOffset;l.connectionModel.setOffsetInBlock(u=this.info_.RTL?-1*u:u+this.constants_.DARK_PATH_OFFSET,n.yPos+this.constants_.DARK_PATH_OFFSET)}},s.geras.Drawer.prototype.positionExternalValueConnection_=function(n){var l=n.getLastInput();if(l.connectionModel){var u=n.xPos+n.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),l.connectionModel.setOffsetInBlock(u,n.yPos)}},s.geras.Drawer.prototype.positionNextConnection_=function(){var n=this.info_.bottomRow;if(n.connection){var l=n.connection,u=l.xPos;l.connectionModel.setOffsetInBlock((this.info_.RTL?-u:u)+this.constants_.DARK_PATH_OFFSET/2,n.baseline+this.constants_.DARK_PATH_OFFSET)}},s.geras.HighlightConstantProvider=function(n){this.constantProvider=n,this.OFFSET=.5,this.START_POINT=s.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},s.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},s.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var n=this.constantProvider.CORNER_RADIUS,l=this.OFFSET,u=(1-Math.SQRT1_2)*(n+l)-l,h=s.utils.svgPaths.moveBy(u,u)+s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(-u-l,n-u)),_=s.utils.svgPaths.arc("a","0 0,0",n+l,s.utils.svgPaths.point(n+l,n+l)),b=s.utils.svgPaths.moveBy(u,-u)+s.utils.svgPaths.arc("a","0 0,0",n+l,s.utils.svgPaths.point(n-u,u+l));return{width:n+l,height:n,pathTop:function(M){return M?h:""},pathBottom:function(M){return M?_:b}}},s.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var n=this.constantProvider.CORNER_RADIUS,l=this.OFFSET,u=(1-Math.SQRT1_2)*(n-l)+l,h=s.utils.svgPaths.moveBy(u,u)+s.utils.svgPaths.arc("a","0 0,1",n-l,s.utils.svgPaths.point(n-u,-u+l)),_=s.utils.svgPaths.moveBy(l,n)+s.utils.svgPaths.arc("a","0 0,1",n-l,s.utils.svgPaths.point(n,-n+l)),b=-u,M=s.utils.svgPaths.moveBy(u,b)+s.utils.svgPaths.arc("a","0 0,1",n-l,s.utils.svgPaths.point(-u+l,-b-n));return{height:n,topLeft:function(k){return k?h:_},bottomLeft:function(){return M}}},s.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var n=this.constantProvider.TAB_WIDTH,l=this.constantProvider.TAB_HEIGHT,u=s.utils.svgPaths.moveBy(-2,3.4-l)+s.utils.svgPaths.lineTo(-.45*n,-2.1),h=s.utils.svgPaths.lineOnAxis("v",2.5)+s.utils.svgPaths.moveBy(.97*-n,2.5)+s.utils.svgPaths.curve("q",[s.utils.svgPaths.point(.05*-n,10),s.utils.svgPaths.point(.3*n,9.5)])+s.utils.svgPaths.moveBy(.67*n,-1.9)+s.utils.svgPaths.lineOnAxis("v",2.5),_=s.utils.svgPaths.lineOnAxis("v",-1.5)+s.utils.svgPaths.moveBy(-.92*n,-.5)+s.utils.svgPaths.curve("q",[s.utils.svgPaths.point(-.19*n,-5.5),s.utils.svgPaths.point(0,-11)])+s.utils.svgPaths.moveBy(.92*n,1),b=s.utils.svgPaths.moveBy(-5,l-.7)+s.utils.svgPaths.lineTo(.46*n,-2.1);return{width:n,height:l,pathUp:function(M){return M?u:_},pathDown:function(M){return M?h:b}}},s.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:s.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},s.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:s.utils.svgPaths.lineTo(5.1,2.6)+s.utils.svgPaths.moveBy(-10.2,6.8)+s.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},s.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var n=this.constantProvider.START_HAT.height,l=s.utils.svgPaths.moveBy(25,-8.7)+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(29.7,-6.2),s.utils.svgPaths.point(57.2,-.5),s.utils.svgPaths.point(75,8.7)]),u=s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(17.8,-9.2),s.utils.svgPaths.point(45.3,-14.9),s.utils.svgPaths.point(75,-8.7)])+s.utils.svgPaths.moveTo(100.5,n+.5);return{path:function(h){return h?l:u}}},s.geras.PathObject=function(n,l,u){this.constants=u,this.svgRoot=n,this.svgPathDark=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=l},s.utils.object.inherits(s.geras.PathObject,s.blockRendering.PathObject),s.geras.PathObject.prototype.setPath=function(n){this.svgPath.setAttribute("d",n),this.svgPathDark.setAttribute("d",n)},s.geras.PathObject.prototype.setHighlightPath=function(n){this.svgPathLight.setAttribute("d",n)},s.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},s.geras.PathObject.prototype.applyColour=function(n){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),s.geras.PathObject.superClass_.applyColour.call(this,n),this.svgPath.setAttribute("stroke","none")},s.geras.PathObject.prototype.setStyle=function(n){this.style=n,this.colourDark=s.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},s.geras.PathObject.prototype.updateHighlighted=function(n){n?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},s.geras.PathObject.prototype.updateShadow_=function(n){n&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},s.geras.PathObject.prototype.updateDisabled_=function(n){s.geras.PathObject.superClass_.updateDisabled_.call(this,n),n&&this.svgPath.setAttribute("stroke","none")},s.geras.Renderer=function(n){s.geras.Renderer.superClass_.constructor.call(this,n),this.highlightConstants_=null},s.utils.object.inherits(s.geras.Renderer,s.blockRendering.Renderer),s.geras.Renderer.prototype.init=function(n,l){s.geras.Renderer.superClass_.init.call(this,n,l),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},s.geras.Renderer.prototype.refreshDom=function(n,l){s.geras.Renderer.superClass_.refreshDom.call(this,n,l),this.getHighlightConstants().init()},s.geras.Renderer.prototype.makeConstants_=function(){return new s.geras.ConstantProvider},s.geras.Renderer.prototype.makeRenderInfo_=function(n){return new s.geras.RenderInfo(this,n)},s.geras.Renderer.prototype.makeDrawer_=function(n,l){return new s.geras.Drawer(n,l)},s.geras.Renderer.prototype.makePathObject=function(n,l){return new s.geras.PathObject(n,l,this.getConstants())},s.geras.Renderer.prototype.makeHighlightConstants_=function(){return new s.geras.HighlightConstantProvider(this.getConstants())},s.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},s.blockRendering.register("geras",s.geras.Renderer),s.thrasos={},s.thrasos.RenderInfo=function(n,l){s.thrasos.RenderInfo.superClass_.constructor.call(this,n,l)},s.utils.object.inherits(s.thrasos.RenderInfo,s.blockRendering.RenderInfo),s.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var u,n=!1,l=0;u=this.rows[l];l++)u.hasExternalInput&&(n=!0);for(l=0;u=this.rows[l];l++){var h=u.elements;u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,h[0])));for(var _=0;_<h.length-1;_++){u.elements.push(h[_]);var b=this.getInRowSpacing_(h[_],h[_+1]);u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b))}u.elements.push(h[h.length-1]),u.endsWithElemSpacer()&&(b=this.getInRowSpacing_(h[h.length-1],null),n&&u.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b)))}},s.thrasos.RenderInfo.prototype.getInRowSpacing_=function(n,l){if(!n)return l&&s.blockRendering.Types.isField(l)&&l.isEditable?this.constants_.MEDIUM_PADDING:l&&s.blockRendering.Types.isInlineInput(l)?this.constants_.MEDIUM_LARGE_PADDING:l&&s.blockRendering.Types.isStatementInput(l)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!s.blockRendering.Types.isInput(n)&&!l)return s.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:s.blockRendering.Types.isIcon(n)?2*this.constants_.LARGE_PADDING+1:s.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:s.blockRendering.Types.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:s.blockRendering.Types.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:s.blockRendering.Types.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInput(n)&&!l){if(s.blockRendering.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(n))return this.constants_.NO_PADDING}if(!s.blockRendering.Types.isInput(n)&&l&&s.blockRendering.Types.isInput(l)){if(s.blockRendering.Types.isField(n)&&n.isEditable){if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.SMALL_PADDING}else{if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.MEDIUM_LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(l))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(s.blockRendering.Types.isIcon(n)&&l&&!s.blockRendering.Types.isInput(l))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInlineInput(n)&&l&&s.blockRendering.Types.isField(l))return l.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isLeftSquareCorner(n)&&l){if(s.blockRendering.Types.isHat(l))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))return l.notchOffset}return s.blockRendering.Types.isLeftRoundedCorner(n)&&l?l.notchOffset-this.constants_.CORNER_RADIUS:s.blockRendering.Types.isField(n)&&l&&s.blockRendering.Types.isField(l)&&n.isEditable==l.isEditable||l&&s.blockRendering.Types.isJaggedEdge(l)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(n,l){return s.blockRendering.Types.isTopRow(n)&&s.blockRendering.Types.isBottomRow(l)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:s.blockRendering.Types.isTopRow(n)||s.blockRendering.Types.isBottomRow(l)?this.constants_.NO_PADDING:n.hasExternalInput&&l.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&l.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&l.hasStatement||n.hasDummyInput||l.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.thrasos.RenderInfo.prototype.getElemCenterline_=function(n,l){if(s.blockRendering.Types.isSpacer(l))return n.yPos+l.height/2;if(s.blockRendering.Types.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,s.blockRendering.Types.isNextConnection(l)?n+l.height/2:n-l.height/2;if(s.blockRendering.Types.isTopRow(n))return s.blockRendering.Types.isHat(l)?n.capline-l.height/2:n.capline+l.height/2;var u=n.yPos;return s.blockRendering.Types.isField(l)&&n.hasStatement?u+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+l.height/2):u+n.height/2},s.thrasos.RenderInfo.prototype.finalize_=function(){for(var h,n=0,l=0,u=0;h=this.rows[u];u++){h.yPos=l,h.xPos=this.startX,l+=h.height,n=Math.max(n,h.widthWithConnectedBlocks);var _=l-this.topRow.ascenderHeight;h==this.bottomRow&&_<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=_=this.constants_.MIN_BLOCK_HEIGHT-_,l+=_),this.recordElemPositions_(h)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=l-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX,this.height=l,this.startY=this.topRow.capline},s.thrasos.Renderer=function(n){s.thrasos.Renderer.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.thrasos.Renderer,s.blockRendering.Renderer),s.thrasos.Renderer.prototype.makeRenderInfo_=function(n){return new s.thrasos.RenderInfo(this,n)},s.blockRendering.register("thrasos",s.thrasos.Renderer),s.zelos={},s.zelos.ConstantProvider=function(){s.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},s.utils.object.inherits(s.zelos.ConstantProvider,s.blockRendering.ConstantProvider),s.zelos.ConstantProvider.prototype.setFontConstants_=function(n){s.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,n),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},s.zelos.ConstantProvider.prototype.init=function(){s.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},s.zelos.ConstantProvider.prototype.setDynamicProperties_=function(n){s.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,n),this.SELECTED_GLOW_COLOUR=n.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var l=Number(n.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=l&&!isNaN(l)?l:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=n.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(n=Number(n.getComponentStyle("replacementGlowSize")))&&!isNaN(n)?n:this.REPLACEMENT_GLOW_SIZE},s.zelos.ConstantProvider.prototype.dispose=function(){s.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&s.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&s.utils.dom.removeNode(this.replacementGlowFilter_)},s.zelos.ConstantProvider.prototype.makeStartHat=function(){var n=this.START_HAT_HEIGHT,l=this.START_HAT_WIDTH;return{height:n,width:l,path:s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(25,-n),s.utils.svgPaths.point(71,-n),s.utils.svgPaths.point(l,0)])}},s.zelos.ConstantProvider.prototype.makeHexagonal=function(){function n(u,h,_){var b=u/2;return s.utils.svgPaths.lineTo(-(_=_?-1:1)*(b=b>l?l:b),u=(h?-1:1)*u/2)+s.utils.svgPaths.lineTo(_*b,u)}var l=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(u){return(u/=2)>l?l:u},height:function(u){return u},connectionOffsetY:function(u){return u/2},connectionOffsetX:function(u){return-u},pathDown:function(u){return n(u,!1,!1)},pathUp:function(u){return n(u,!0,!1)},pathRightDown:function(u){return n(u,!1,!0)},pathRightUp:function(u){return n(u,!1,!0)}}},s.zelos.ConstantProvider.prototype.makeRounded=function(){function n(h,_,b){var M=h>u?h-u:0;return s.utils.svgPaths.arc("a","0 0,1",h=(h>u?u:h)/2,s.utils.svgPaths.point((_?-1:1)*h,(_?-1:1)*h))+s.utils.svgPaths.lineOnAxis("v",(b?1:-1)*M)+s.utils.svgPaths.arc("a","0 0,1",h,s.utils.svgPaths.point((_?1:-1)*h,(_?-1:1)*h))}var l=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,u=2*l;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(h){return(h/=2)>l?l:h},height:function(h){return h},connectionOffsetY:function(h){return h/2},connectionOffsetX:function(h){return-h},pathDown:function(h){return n(h,!1,!1)},pathUp:function(h){return n(h,!0,!1)},pathRightDown:function(h){return n(h,!1,!0)},pathRightUp:function(h){return n(h,!1,!0)}}},s.zelos.ConstantProvider.prototype.makeSquared=function(){function n(u,h,_){return u-=2*l,s.utils.svgPaths.arc("a","0 0,1",l,s.utils.svgPaths.point((h?-1:1)*l,(h?-1:1)*l))+s.utils.svgPaths.lineOnAxis("v",(_?1:-1)*u)+s.utils.svgPaths.arc("a","0 0,1",l,s.utils.svgPaths.point((h?1:-1)*l,(h?-1:1)*l))}var l=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(u){return l},height:function(u){return u},connectionOffsetY:function(u){return u/2},connectionOffsetX:function(u){return-u},pathDown:function(u){return n(u,!1,!1)},pathUp:function(u){return n(u,!0,!1)},pathRightDown:function(u){return n(u,!1,!0)},pathRightUp:function(u){return n(u,!1,!0)}}},s.zelos.ConstantProvider.prototype.shapeFor=function(n){var l=n.getCheck();switch(!l&&n.targetConnection&&(l=n.targetConnection.getCheck()),n.type){case s.connectionTypes.INPUT_VALUE:case s.connectionTypes.OUTPUT_VALUE:if(null!=(n=n.getSourceBlock().getOutputShape()))switch(n){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return l&&-1!=l.indexOf("Boolean")?this.HEXAGONAL:(l&&-1!=l.indexOf("Number")||l&&l.indexOf("String"),this.ROUNDED);case s.connectionTypes.PREVIOUS_STATEMENT:case s.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},s.zelos.ConstantProvider.prototype.makeNotch=function(){function n(U){return s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(U*_/2,0),s.utils.svgPaths.point(U*_*3/4,M/2),s.utils.svgPaths.point(U*_,M)])+s.utils.svgPaths.line([s.utils.svgPaths.point(U*_,b)])+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(U*_/4,M/2),s.utils.svgPaths.point(U*_/2,M),s.utils.svgPaths.point(U*_,M)])+s.utils.svgPaths.lineOnAxis("h",U*h)+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(U*_/2,0),s.utils.svgPaths.point(U*_*3/4,-M/2),s.utils.svgPaths.point(U*_,-M)])+s.utils.svgPaths.line([s.utils.svgPaths.point(U*_,-b)])+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(U*_/4,-M/2),s.utils.svgPaths.point(U*_/2,-M),s.utils.svgPaths.point(U*_,-M)])}var l=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,h=l/3,_=h/3,b=u/2,M=b/2,k=n(1),H=n(-1);return{type:this.SHAPES.NOTCH,width:l,height:u,pathLeft:k,pathRight:H}},s.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var n=this.CORNER_RADIUS,l=s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(-n,n)),u=s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(-n,n));return{width:n,height:n,pathTop:l,pathBottom:s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(n,n)),rightWidth:n,rightHeight:n,pathTopRight:u,pathBottomRight:s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(n,n))}},s.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(n){return s.utils.colour.blend("#000",n,.15)||n},s.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(n){return s.utils.colour.blend("#000",n,.25)||n},s.zelos.ConstantProvider.prototype.createDom=function(n,l,u){s.zelos.ConstantProvider.superClass_.createDom.call(this,n,l,u),n=s.utils.dom.createSvgElement(s.utils.Svg.DEFS,{},n),l=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),s.utils.dom.createSvgElement(s.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},l),u=s.utils.dom.createSvgElement(s.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},u),s.utils.dom.createSvgElement(s.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},l),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},l),this.selectedGlowFilterId=l.id,this.selectedGlowFilter_=l,n=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),s.utils.dom.createSvgElement(s.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},n),l=s.utils.dom.createSvgElement(s.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),s.utils.dom.createSvgElement(s.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},n),this.replacementGlowFilterId=n.id,this.replacementGlowFilter_=n},s.zelos.ConstantProvider.prototype.getCSS_=function(n){return[n+" .blocklyText,",n+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",n+" .blocklyText {","fill: #fff;","}",n+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",n+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",n+" .blocklyNonEditableText>text,",n+" .blocklyEditableText>text,",n+" .blocklyNonEditableText>g>text,",n+" .blocklyEditableText>g>text {","fill: #575E75;","}",n+" .blocklyFlyoutLabelText {","fill: #575E75;","}",n+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",n+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",n+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",n+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",n+" .blocklyDropdownText {","fill: #fff !important;","}",n+".blocklyWidgetDiv .goog-menuitem,",n+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",n+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",n+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",n+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",n+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},s.zelos.TopRow=function(n){s.zelos.TopRow.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.zelos.TopRow,s.blockRendering.TopRow),s.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},s.zelos.TopRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection||(n.hat?"cap"===n.hat:this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection},s.zelos.TopRow.prototype.hasRightSquareCorner=function(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection},s.zelos.BottomRow=function(n){s.zelos.BottomRow.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.zelos.BottomRow,s.blockRendering.BottomRow),s.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},s.zelos.BottomRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection},s.zelos.BottomRow.prototype.hasRightSquareCorner=function(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection},s.zelos.RightConnectionShape=function(n){s.zelos.RightConnectionShape.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},s.utils.object.inherits(s.zelos.RightConnectionShape,s.blockRendering.Measurable),s.zelos.RenderInfo=function(n,l){s.zelos.RenderInfo.superClass_.constructor.call(this,n,l),this.topRow=new s.zelos.TopRow(this.constants_),this.bottomRow=new s.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!l.getInputsInline()||l.isCollapsed(),this.hasStatementInput=0<l.statementInputCount,this.rightSide=this.outputConnection?new s.zelos.RightConnectionShape(this.constants_):null},s.utils.object.inherits(s.zelos.RenderInfo,s.blockRendering.RenderInfo),s.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},s.zelos.RenderInfo.prototype.shouldStartNewRow_=function(n,l){return!!l&&(n.type==s.inputTypes.STATEMENT||l.type==s.inputTypes.STATEMENT||(n.type==s.inputTypes.VALUE||n.type==s.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},s.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(n){return n.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):s.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,n)},s.zelos.RenderInfo.prototype.getInRowSpacing_=function(n,l){return n&&l||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!n&&l&&s.blockRendering.Types.isStatementInput(l)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:n&&s.blockRendering.Types.isLeftRoundedCorner(n)&&l&&(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))?l.notchOffset-this.constants_.CORNER_RADIUS:n&&s.blockRendering.Types.isLeftSquareCorner(n)&&l&&s.blockRendering.Types.isHat(l)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},s.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(n,l){if(s.blockRendering.Types.isTopRow(n)&&s.blockRendering.Types.isBottomRow(l))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var u=s.blockRendering.Types.isInputRow(n)&&n.hasStatement,h=s.blockRendering.Types.isInputRow(l)&&l.hasStatement;return h||u?(n=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),h&&u?Math.max(n,this.constants_.DUMMY_INPUT_MIN_HEIGHT):n):s.blockRendering.Types.isTopRow(n)?n.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):s.blockRendering.Types.isBottomRow(l)?this.outputConnection?!l.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},s.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(n,l){var u=this.width-this.startX;return s.blockRendering.Types.isInputRow(n)&&n.hasStatement||s.blockRendering.Types.isInputRow(l)&&l.hasStatement?Math.max(u,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):u},s.zelos.RenderInfo.prototype.getElemCenterline_=function(n,l){if(n.hasStatement&&!s.blockRendering.Types.isSpacer(l)&&!s.blockRendering.Types.isStatementInput(l))return n.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(s.blockRendering.Types.isInlineInput(l)){var u=l.connectedBlock;if(u&&u.outputConnection&&u.nextConnection)return n.yPos+u.height/2}return s.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,n,l)},s.zelos.RenderInfo.prototype.addInput_=function(n,l){n.type==s.inputTypes.DUMMY&&l.hasDummyInput&&l.align==s.constants.ALIGN.LEFT&&n.align==s.constants.ALIGN.RIGHT&&(l.rightAlignedDummyInput=n),s.zelos.RenderInfo.superClass_.addInput_.call(this,n,l)},s.zelos.RenderInfo.prototype.addAlignmentPadding_=function(n,l){if(n.rightAlignedDummyInput){for(var u,_,h=0;(_=n.elements[h])&&(s.blockRendering.Types.isSpacer(_)&&(u=_),!s.blockRendering.Types.isField(_)||_.parentInput!=n.rightAlignedDummyInput);h++);if(u)return u.width+=l,void(n.width+=l)}s.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,n,l)},s.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var n=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,l=n,u=2;u<this.rows.length-1;u+=2){var h=this.rows[u-1],_=this.rows[u],b=this.rows[u+1];if(h=2==u?!!this.topRow.hasPreviousConnection:!!h.followsStatement,b=u+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,s.blockRendering.Types.isInputRow(_)&&_.hasStatement)_.measure(),l=_.width-_.getLastInput().width+n;else if(h&&(2==u||b)&&s.blockRendering.Types.isInputRow(_)&&!_.hasStatement){b=_.xPos,h=null;for(var k,M=0;k=_.elements[M];M++)s.blockRendering.Types.isSpacer(k)&&(h=k),!(h&&(s.blockRendering.Types.isField(k)||s.blockRendering.Types.isInput(k))&&b<l)||s.blockRendering.Types.isField(k)&&(k.field instanceof s.FieldLabel||k.field instanceof s.FieldImage)||(h.width+=l-b),b+=k.width}}},s.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var u,n=0,l=0;u=this.rows[l];l++)u.yPos=n,n+=u.height;this.height=n,n=this.outputConnection.shape.height(l=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),l=this.outputConnection.shape.width(l),this.outputConnection.height=n,this.outputConnection.width=l,this.outputConnection.startX=l,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(n),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(l),u=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(u=l,this.rightSide.height=n,this.rightSide.width=u,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+u),this.startX=l,this.width+=l+u,this.widthWithChildren+=l+u}},s.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var u,n=0,l=0;u=this.rows[l];l++)if(s.blockRendering.Types.isInputRow(u)){n=u.elements[u.elements.length-2];var h=this.getNegativeSpacing_(u.elements[1]),_=this.getNegativeSpacing_(n),b=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(n=h+_)<b&&(h=(n=this.width-b)/2,_=n/2),u.elements.unshift(new s.blockRendering.InRowSpacer(this.constants_,-h)),u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,-_))}if(n)for(this.width-=n,this.widthWithChildren-=n,this.rightSide.xPos-=n,l=0;u=this.rows[l];l++)s.blockRendering.Types.isTopOrBottomRow(u)&&(u.elements[1].width-=n,u.elements[1].widthWithConnectedBlocks-=n),u.width-=n,u.widthWithConnectedBlocks-=n}},s.zelos.RenderInfo.prototype.getNegativeSpacing_=function(n){if(!n)return 0;var l=this.outputConnection.width,u=this.outputConnection.shape.type,h=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return u===h.SHAPES.ROUND?l-(u=this.height/2>(u=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?u:this.height/2)*(1-Math.sin(Math.acos((u-this.constants_.SMALL_PADDING)/u))):0;if(s.blockRendering.Types.isInlineInput(n)){var _=n.connectedBlock;return n=_?_.pathObject.outputShapeType:n.shape.type,_&&_.outputConnection&&(_.statementInputCount||_.nextConnection)||u==h.SHAPES.HEXAGONAL&&u!=n?0:l-this.constants_.SHAPE_IN_SHAPE_PADDING[u][n]}return s.blockRendering.Types.isField(n)?u==h.SHAPES.ROUND&&n.field instanceof s.FieldTextInput?l-2.75*h.GRID_UNIT:l-this.constants_.SHAPE_IN_SHAPE_PADDING[u][0]:s.blockRendering.Types.isIcon(n)?this.constants_.SMALL_PADDING:0},s.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var n=2;n<this.rows.length-1;n+=2){var l=this.rows[n-1],u=this.rows[n],h=this.rows[n+1],_=2==n,b=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!h.precedesStatement;if(_?this.topRow.hasPreviousConnection:l.followsStatement){var M=3==u.elements.length&&(u.elements[1].field instanceof s.FieldLabel||u.elements[1].field instanceof s.FieldImage);if(!_&&M)l.height-=this.constants_.SMALL_PADDING,h.height-=this.constants_.SMALL_PADDING,u.height-=this.constants_.MEDIUM_PADDING;else if(_||b){if(b){for(_=!1,b=0;M=u.elements[b];b++)if(s.blockRendering.Types.isInlineInput(M)&&M.connectedBlock&&!M.connectedBlock.isShadow()&&40<=M.connectedBlock.getHeightWidth().height){_=!0;break}_&&(l.height-=this.constants_.SMALL_PADDING,h.height-=this.constants_.SMALL_PADDING)}}else l.height+=this.constants_.SMALL_PADDING}}},s.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),s.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},s.zelos.Drawer=function(n,l){s.zelos.Drawer.superClass_.constructor.call(this,n,l)},s.utils.object.inherits(s.zelos.Drawer,s.blockRendering.Drawer),s.zelos.Drawer.prototype.draw=function(){var n=this.block_.pathObject;n.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),n.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&n.flipRTL(),s.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(n.outputShapeType=this.info_.outputConnection.shape.type),n.endDrawing()},s.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):s.zelos.Drawer.superClass_.drawOutline_.call(this)},s.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():s.zelos.Drawer.superClass_.drawLeft_.call(this)},s.zelos.Drawer.prototype.drawRightSideRow_=function(n){if(!(0>=n.height))if(n.precedesStatement||n.followsStatement){var l=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(n.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(l=n.height-(n.precedesStatement?l:0))?s.utils.svgPaths.lineOnAxis("V",n.yPos+l):"")+(n.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",n.yPos+n.height)},s.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},s.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},s.zelos.Drawer.prototype.drawFlatTop_=function(){var n=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=s.utils.svgPaths.moveBy(n.xPos,this.info_.startY),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("h",n.width)},s.zelos.Drawer.prototype.drawFlatBottom_=function(){var n=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",n.baseline),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("h",-n.width)},s.zelos.Drawer.prototype.drawInlineInput_=function(n){this.positionInlineInputConnection_(n);var l=n.input.name;if(!n.connectedBlock&&!this.info_.isInsertionMarker){var u=n.width-2*n.connectionWidth;n=s.utils.svgPaths.moveTo(n.xPos+n.connectionWidth,n.centerline-n.height/2)+s.utils.svgPaths.lineOnAxis("h",u)+n.shape.pathRightDown(n.height)+s.utils.svgPaths.lineOnAxis("h",-u)+n.shape.pathUp(n.height)+"z",this.block_.pathObject.setOutlinePath(l,n)}},s.zelos.Drawer.prototype.drawStatementInput_=function(n){var l=n.getLastInput(),u=l.xPos+l.notchOffset+l.shape.width,h=l.shape.pathRight+s.utils.svgPaths.lineOnAxis("h",-(l.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,_=n.height-2*this.constants_.INSIDE_CORNERS.height;l=this.constants_.INSIDE_CORNERS.pathBottom+s.utils.svgPaths.lineOnAxis("h",l.notchOffset-this.constants_.INSIDE_CORNERS.width)+(l.connectedBottomNextConnection?"":l.shape.pathLeft),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",u)+h+s.utils.svgPaths.lineOnAxis("v",_)+l+s.utils.svgPaths.lineOnAxis("H",n.xPos+n.width),this.positionStatementInputConnection_(n)},s.zelos.MarkerSvg=function(n,l,u){s.zelos.MarkerSvg.superClass_.constructor.call(this,n,l,u)},s.utils.object.inherits(s.zelos.MarkerSvg,s.blockRendering.MarkerSvg),s.zelos.MarkerSvg.prototype.showWithInputOutput_=function(n){var l=n.getSourceBlock();n=n.getLocation().getOffsetInBlock(),this.positionCircle_(n.x,n.y),this.setParent_(l),this.showCurrent_()},s.zelos.MarkerSvg.prototype.showWithOutput_=function(n){this.showWithInputOutput_(n)},s.zelos.MarkerSvg.prototype.showWithInput_=function(n){this.showWithInputOutput_(n)},s.zelos.MarkerSvg.prototype.showWithBlock_=function(n){var l=(n=n.getLocation()).getHeightWidth();this.positionRect_(0,0,l.width,l.height),this.setParent_(n),this.showCurrent_()},s.zelos.MarkerSvg.prototype.positionCircle_=function(n,l){this.markerCircle_.setAttribute("cx",n),this.markerCircle_.setAttribute("cy",l),this.currentMarkerSvg=this.markerCircle_},s.zelos.MarkerSvg.prototype.hide=function(){s.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},s.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(s.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var n=this.getBlinkProperties_();s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,n,this.markerCircle_)}return this.markerSvg_},s.zelos.MarkerSvg.prototype.applyColour_=function(n){s.zelos.MarkerSvg.superClass_.applyColour_.call(this,n),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},s.zelos.PathObject=function(n,l,u){s.zelos.PathObject.superClass_.constructor.call(this,n,l,u),this.constants=u,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},s.utils.object.inherits(s.zelos.PathObject,s.blockRendering.PathObject),s.zelos.PathObject.prototype.setPath=function(n){s.zelos.PathObject.superClass_.setPath.call(this,n),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",n)},s.zelos.PathObject.prototype.applyColour=function(n){for(var l in s.zelos.PathObject.superClass_.applyColour.call(this,n),n.isShadow()&&n.getParent()&&this.svgPath.setAttribute("stroke",n.getParent().style.colourTertiary),this.outlines_)this.outlines_[l].setAttribute("fill",this.style.colourTertiary)},s.zelos.PathObject.prototype.flipRTL=function(){for(var n in s.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[n].setAttribute("transform","scale(-1 1)")},s.zelos.PathObject.prototype.updateSelected=function(n){this.setClass_("blocklySelected",n),n?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},s.zelos.PathObject.prototype.updateReplacementFade=function(n){this.setClass_("blocklyReplaceable",n),n?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},s.zelos.PathObject.prototype.updateShapeForInputHighlight=function(n,l){n=n.getParentInput().name,(n=this.getOutlinePath_(n))&&(l?n.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):n.removeAttribute("filter"))},s.zelos.PathObject.prototype.beginDrawing=function(){for(var n in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[n]=1},s.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var n in this.remainingOutlines_)this.removeOutlinePath_(n);this.remainingOutlines_=null},s.zelos.PathObject.prototype.setOutlinePath=function(n,l){(n=this.getOutlinePath_(n)).setAttribute("d",l),n.setAttribute("fill",this.style.colourTertiary)},s.zelos.PathObject.prototype.getOutlinePath_=function(n){return this.outlines_[n]||(this.outlines_[n]=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[n],this.outlines_[n]},s.zelos.PathObject.prototype.removeOutlinePath_=function(n){this.outlines_[n].parentNode.removeChild(this.outlines_[n]),delete this.outlines_[n]},s.zelos.Renderer=function(n){s.zelos.Renderer.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.zelos.Renderer,s.blockRendering.Renderer),s.zelos.Renderer.prototype.makeConstants_=function(){return new s.zelos.ConstantProvider},s.zelos.Renderer.prototype.makeRenderInfo_=function(n){return new s.zelos.RenderInfo(this,n)},s.zelos.Renderer.prototype.makeDrawer_=function(n,l){return new s.zelos.Drawer(n,l)},s.zelos.Renderer.prototype.makeMarkerDrawer=function(n,l){return new s.zelos.MarkerSvg(n,this.getConstants(),l)},s.zelos.Renderer.prototype.makePathObject=function(n,l){return new s.zelos.PathObject(n,l,this.getConstants())},s.zelos.Renderer.prototype.shouldHighlightConnection=function(n){return n.type!=s.connectionTypes.INPUT_VALUE&&n.type!==s.connectionTypes.OUTPUT_VALUE},s.zelos.Renderer.prototype.getConnectionPreviewMethod=function(n,l,u){return l.type==s.connectionTypes.OUTPUT_VALUE?n.isConnected()?s.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:s.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:s.zelos.Renderer.superClass_.getConnectionPreviewMethod(n,l,u)},s.blockRendering.register("zelos",s.zelos.Renderer),s.Themes.Dark=s.Theme.defineTheme("dark",{base:s.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),s.Themes.Deuteranopia={},s.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},s.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},s.Themes.Deuteranopia=new s.Theme("deuteranopia",s.Themes.Deuteranopia.defaultBlockStyles,s.Themes.Deuteranopia.categoryStyles),s.Themes.HighContrast={},s.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},s.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},s.Themes.HighContrast=new s.Theme("highcontrast",s.Themes.HighContrast.defaultBlockStyles,s.Themes.HighContrast.categoryStyles),s.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),s.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),s.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),s.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),s.Themes.Tritanopia={},s.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},s.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},s.Themes.Tritanopia=new s.Theme("tritanopia",s.Themes.Tritanopia.defaultBlockStyles,s.Themes.Tritanopia.categoryStyles),s.requires={},s}.apply(I,[]))&&(T.exports=S)},20813:function(T,I,m){var S,s;S=[m(73517)],void 0!==(s=function(n){"use strict";return n.Blocks={},n.Blocks}.apply(I,S))&&(T.exports=s)},73517:function(T,I,m){var S,s;S=[m(96761)],void 0!==(s=function(n){"use strict";return n.Blocks.colour={},n.Constants={},n.Constants.Colour={},n.Constants.Colour.HUE=20,n.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),n.Constants.Lists={},n.Constants.Lists.HUE=260,n.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),n.Blocks.lists_create_with={init:function(){this.setHelpUrl(n.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new n.Mutator(["lists_create_with_item"])),this.setTooltip(n.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("items",this.itemCount_),l},domToMutation:function(l){this.itemCount_=parseInt(l.getAttribute("items"),10),this.updateShape_()},decompose:function(l){var u=l.newBlock("lists_create_with_container");u.initSvg();for(var h=u.getInput("STACK").connection,_=0;_<this.itemCount_;_++){var b=l.newBlock("lists_create_with_item");b.initSvg(),h.connect(b.previousConnection),h=b.nextConnection}return u},compose:function(l){var u=l.getInputTargetBlock("STACK");for(l=[];u&&!u.isInsertionMarker();)l.push(u.valueConnection_),u=u.nextConnection&&u.nextConnection.targetBlock();for(u=0;u<this.itemCount_;u++){var h=this.getInput("ADD"+u).connection.targetConnection;h&&-1==l.indexOf(h)&&h.disconnect()}for(this.itemCount_=l.length,this.updateShape_(),u=0;u<this.itemCount_;u++)n.Mutator.reconnect(l[u],this,"ADD"+u)},saveConnections:function(l){l=l.getInputTargetBlock("STACK");for(var u=0;l;){var h=this.getInput("ADD"+u);l.valueConnection_=h&&h.connection.targetConnection,u++,l=l.nextConnection&&l.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(n.Msg.LISTS_CREATE_EMPTY_TITLE);for(var l=0;l<this.itemCount_;l++)if(!this.getInput("ADD"+l)){var u=this.appendValueInput("ADD"+l).setAlign(n.ALIGN_RIGHT);0==l&&u.appendField(n.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+l);)this.removeInput("ADD"+l),l++}},n.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},n.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(n.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},n.Blocks.lists_indexOf={init:function(){var l=[[n.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[n.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(n.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new n.FieldDropdown(l),"END"),this.setInputsInline(!0);var u=this;this.setTooltip(function(){return n.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",u.workspace.options.oneBasedIndex?"0":"-1")})}},n.Blocks.lists_getIndex={init:function(){var l=[[n.Msg.LISTS_GET_INDEX_GET,"GET"],[n.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[n.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[n.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[n.Msg.LISTS_GET_INDEX_LAST,"LAST"],[n.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(n.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),l=new n.FieldDropdown(l,function(h){h="REMOVE"==h,this.getSourceBlock().updateStatement_(h)}),this.appendValueInput("VALUE").setCheck("Array").appendField(n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(l,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),n.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(n.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var u=this;this.setTooltip(function(){var h=u.getFieldValue("MODE"),_=u.getFieldValue("WHERE"),b="";switch(h+" "+_){case"GET FROM_START":case"GET FROM_END":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==_||"FROM_END"==_)&&(b+="  "+("FROM_START"==_?n.Msg.LISTS_INDEX_FROM_START_TOOLTIP:n.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",u.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");l.setAttribute("statement",!this.outputConnection);var u=this.getInput("AT").type==n.INPUT_VALUE;return l.setAttribute("at",u),l},domToMutation:function(l){var u="true"==l.getAttribute("statement");this.updateStatement_(u),l="false"!=l.getAttribute("at"),this.updateAt_(l)},updateStatement_:function(l){l!=!this.outputConnection&&(this.unplug(!0,!0),l?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(l){this.removeInput("AT"),this.removeInput("ORDINAL",!0),l?(this.appendValueInput("AT").setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var u=new n.FieldDropdown(this.WHERE_OPTIONS,function(h){var _="FROM_START"==h||"FROM_END"==h;if(_!=l){var b=this.getSourceBlock();return b.updateAt_(_),b.setFieldValue(h,"WHERE"),null}});this.getInput("AT").appendField(u,"WHERE"),n.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},n.Blocks.lists_setIndex={init:function(){var l=[[n.Msg.LISTS_SET_INDEX_SET,"SET"],[n.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[n.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[n.Msg.LISTS_GET_INDEX_LAST,"LAST"],[n.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(n.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new n.FieldDropdown(l),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(n.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(n.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var u=this;this.setTooltip(function(){var h=u.getFieldValue("MODE"),_=u.getFieldValue("WHERE"),b="";switch(h+" "+_){case"SET FROM_START":case"SET FROM_END":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==_||"FROM_END"==_)&&(b+="  "+n.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",u.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var l=n.utils.xml.createElement("mutation"),u=this.getInput("AT").type==n.INPUT_VALUE;return l.setAttribute("at",u),l},domToMutation:function(l){l="false"!=l.getAttribute("at"),this.updateAt_(l)},updateAt_:function(l){this.removeInput("AT"),this.removeInput("ORDINAL",!0),l?(this.appendValueInput("AT").setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var u=new n.FieldDropdown(this.WHERE_OPTIONS,function(h){var _="FROM_START"==h||"FROM_END"==h;if(_!=l){var b=this.getSourceBlock();return b.updateAt_(_),b.setFieldValue(h,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(u,"WHERE")}},n.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[n.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[n.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(n.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),n.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(n.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(n.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var l=n.utils.xml.createElement("mutation"),u=this.getInput("AT1").type==n.INPUT_VALUE;return l.setAttribute("at1",u),u=this.getInput("AT2").type==n.INPUT_VALUE,l.setAttribute("at2",u),l},domToMutation:function(l){var u="true"==l.getAttribute("at1");l="true"==l.getAttribute("at2"),this.updateAt_(1,u),this.updateAt_(2,l)},updateAt_:function(l,u){this.removeInput("AT"+l),this.removeInput("ORDINAL"+l,!0),u?(this.appendValueInput("AT"+l).setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+l).appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+l);var h=new n.FieldDropdown(this["WHERE_OPTIONS_"+l],function(_){var b="FROM_START"==_||"FROM_END"==_;if(b!=u){var M=this.getSourceBlock();return M.updateAt_(l,b),M.setFieldValue(_,"WHERE"+l),null}});this.getInput("AT"+l).appendField(h,"WHERE"+l),1==l&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),n.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},n.Blocks.lists_sort={init:function(){this.jsonInit({message0:n.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[n.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[n.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[n.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[n.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[n.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:n.Msg.LISTS_SORT_TOOLTIP,helpUrl:n.Msg.LISTS_SORT_HELPURL})}},n.Blocks.lists_split={init:function(){var l=this,u=new n.FieldDropdown([[n.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[n.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(h){l.updateType_(h)});this.setHelpUrl(n.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(u,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(n.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var h=l.getFieldValue("MODE");if("SPLIT"==h)return n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==h)return n.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+h)})},updateType_:function(l){if(this.getFieldValue("MODE")!=l){var u=this.getInput("INPUT").connection;u.setShadowDom(null);var h=u.targetBlock();h&&(u.disconnect(),h.isShadow()?h.dispose():this.bumpNeighbours())}"SPLIT"==l?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("mode",this.getFieldValue("MODE")),l},domToMutation:function(l){this.updateType_(l.getAttribute("mode"))}},n.Blocks.logic={},n.Constants.Logic={},n.Constants.Logic.HUE=210,n.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),n.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),n.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},n.Extensions.register("logic_op_tooltip",n.Extensions.buildTooltipForDropdown("OP",n.Constants.Logic.TOOLTIPS_BY_OP)),n.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var l=n.utils.xml.createElement("mutation");return this.elseifCount_&&l.setAttribute("elseif",this.elseifCount_),this.elseCount_&&l.setAttribute("else",1),l},domToMutation:function(l){this.elseifCount_=parseInt(l.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(l.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(l){var u=l.newBlock("controls_if_if");u.initSvg();for(var h=u.nextConnection,_=1;_<=this.elseifCount_;_++){var b=l.newBlock("controls_if_elseif");b.initSvg(),h.connect(b.previousConnection),h=b.nextConnection}return this.elseCount_&&((l=l.newBlock("controls_if_else")).initSvg(),h.connect(l.previousConnection)),u},compose:function(l){l=l.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var u=[null],h=[null],_=null;l&&!l.isInsertionMarker();){switch(l.type){case"controls_if_elseif":this.elseifCount_++,u.push(l.valueConnection_),h.push(l.statementConnection_);break;case"controls_if_else":this.elseCount_++,_=l.statementConnection_;break;default:throw TypeError("Unknown block type: "+l.type)}l=l.nextConnection&&l.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(u,h,_)},saveConnections:function(l){l=l.nextConnection.targetBlock();for(var u=1;l;){switch(l.type){case"controls_if_elseif":var h=this.getInput("IF"+u),_=this.getInput("DO"+u);l.valueConnection_=h&&h.connection.targetConnection,l.statementConnection_=_&&_.connection.targetConnection,u++;break;case"controls_if_else":_=this.getInput("ELSE"),l.statementConnection_=_&&_.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+l.type)}l=l.nextConnection&&l.nextConnection.targetBlock()}},rebuildShape_:function(){var l=[null],u=[null],h=null;this.getInput("ELSE")&&(h=this.getInput("ELSE").connection.targetConnection);for(var _=1;this.getInput("IF"+_);){var b=this.getInput("IF"+_),M=this.getInput("DO"+_);l.push(b.connection.targetConnection),u.push(M.connection.targetConnection),_++}this.updateShape_(),this.reconnectChildBlocks_(l,u,h)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var l=1;this.getInput("IF"+l);)this.removeInput("IF"+l),this.removeInput("DO"+l),l++;for(l=1;l<=this.elseifCount_;l++)this.appendValueInput("IF"+l).setCheck("Boolean").appendField(n.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+l).appendField(n.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(n.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(l,u,h){for(var _=1;_<=this.elseifCount_;_++)n.Mutator.reconnect(l[_],this,"IF"+_),n.Mutator.reconnect(u[_],this,"DO"+_);n.Mutator.reconnect(h,this,"ELSE")}},n.Extensions.registerMutator("controls_if_mutator",n.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),n.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?n.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?n.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?n.Msg.CONTROLS_IF_TOOLTIP_4:"":n.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},n.Extensions.register("controls_if_tooltip",n.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),n.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(l){this.prevBlocks_||(this.prevBlocks_=[null,null]);var u=this.getInputTargetBlock("A"),h=this.getInputTargetBlock("B");u&&h&&!this.workspace.connectionChecker.doTypeChecks(u.outputConnection,h.outputConnection)&&(n.Events.setGroup(l.group),(l=this.prevBlocks_[0])!==u&&(u.unplug(),!l||l.isDisposed()||l.isShadow()||this.getInput("A").connection.connect(l.outputConnection)),(u=this.prevBlocks_[1])!==h&&(h.unplug(),!u||u.isDisposed()||u.isShadow()||this.getInput("B").connection.connect(u.outputConnection)),this.bumpNeighbours(),n.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},n.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(n.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},n.Extensions.register("logic_compare",n.Constants.Logic.LOGIC_COMPARE_EXTENSION),n.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(l){var u=this.getInputTargetBlock("THEN"),h=this.getInputTargetBlock("ELSE"),_=this.outputConnection.targetConnection;if((u||h)&&_)for(var b=0;2>b;b++){var M=1==b?u:h;M&&!M.workspace.connectionChecker.doTypeChecks(M.outputConnection,_)&&(n.Events.setGroup(l.group),_===this.prevParentConnection_?(this.unplug(),_.getSourceBlock().bumpNeighbours()):(M.unplug(),M.bumpNeighbours()),n.Events.setGroup(!1))}this.prevParentConnection_=_}},n.Extensions.registerMixin("logic_ternary",n.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),n.Blocks.loops={},n.Constants.Loops={},n.Constants.Loops.HUE=120,n.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),n.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},n.Extensions.register("controls_whileUntil_tooltip",n.Extensions.buildTooltipForDropdown("MODE",n.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),n.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},n.Extensions.register("controls_flow_tooltip",n.Extensions.buildTooltipForDropdown("FLOW",n.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),n.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(l){if(!this.isInFlyout){var u=this.getField("VAR").getVariable(),h=u.name;if(!this.isCollapsed()&&null!=h){var _={enabled:!0};_.text=n.Msg.VARIABLES_SET_CREATE_GET.replace("%1",h),u=n.Variables.generateVariableFieldDom(u),(h=n.utils.xml.createElement("block")).setAttribute("type","variables_get"),h.appendChild(u),_.callback=n.ContextMenu.callbackFactory(this,h),l.push(_)}}}},n.Extensions.registerMixin("contextMenu_newGetVariableBlock",n.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),n.Extensions.register("controls_for_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),n.Extensions.register("controls_forEach_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(l){do{if(-1!=n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(l.type))return l;l=l.getSurroundParent()}while(l);return null},onchange:function(l){if(this.workspace.isDragging&&!this.workspace.isDragging()&&l.type==n.Events.BLOCK_MOVE){var u=n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(u?null:n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var h=n.Events.getGroup();n.Events.setGroup(l.group),this.setEnabled(u),n.Events.setGroup(h)}}}},n.Extensions.registerMixin("controls_flow_in_loop_check",n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),n.Blocks.math={},n.Constants.Math={},n.Constants.Math.HUE=230,n.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),n.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},n.Extensions.register("math_op_tooltip",n.Extensions.buildTooltipForDropdown("OP",n.Constants.Math.TOOLTIPS_BY_OP)),n.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var l=n.utils.xml.createElement("mutation"),u="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return l.setAttribute("divisor_input",u),l},domToMutation:function(l){l="true"==l.getAttribute("divisor_input"),this.updateShape_(l)},updateShape_:function(l){var u=this.getInput("DIVISOR");l?u||this.appendValueInput("DIVISOR").setCheck("Number"):u&&this.removeInput("DIVISOR")}},n.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(l){l="DIVISIBLE_BY"==l,this.getSourceBlock().updateShape_(l)})},n.Extensions.registerMutator("math_is_divisibleby_mutator",n.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,n.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),n.Extensions.register("math_change_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),n.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(l){this.outputConnection.setCheck("MODE"==l?"Array":"Number")},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("op",this.getFieldValue("OP")),l},domToMutation:function(l){this.updateType_(l.getAttribute("op"))}},n.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(l){this.updateType_(l)}.bind(this))},n.Extensions.registerMutator("math_modes_of_list_mutator",n.Constants.Math.LIST_MODES_MUTATOR_MIXIN,n.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),n.Blocks.procedures={},n.Blocks.procedures_defnoreturn={init:function(){var l=n.Procedures.findLegalName("",this);(l=new n.FieldTextInput(l,n.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(n.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(l,"NAME").appendField("","PARAMS"),this.setMutator(new n.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&n.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(n.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(n.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(l){this.hasStatements_!==l&&(l?(this.appendStatementInput("STACK").appendField(n.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=l)},updateParams_:function(){var l="";this.arguments_.length&&(l=n.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),n.Events.disable();try{this.setFieldValue(l,"PARAMS")}finally{n.Events.enable()}},mutationToDom:function(l){var u=n.utils.xml.createElement("mutation");l&&u.setAttribute("name",this.getFieldValue("NAME"));for(var h=0;h<this.argumentVarModels_.length;h++){var _=n.utils.xml.createElement("arg"),b=this.argumentVarModels_[h];_.setAttribute("name",b.name),_.setAttribute("varid",b.getId()),l&&this.paramIds_&&_.setAttribute("paramId",this.paramIds_[h]),u.appendChild(_)}return this.hasStatements_||u.setAttribute("statements","false"),u},domToMutation:function(l){this.arguments_=[],this.argumentVarModels_=[];for(var h,u=0;h=l.childNodes[u];u++)if("arg"==h.nodeName.toLowerCase()){var _=h.getAttribute("name");h=h.getAttribute("varid")||h.getAttribute("varId"),this.arguments_.push(_),null!=(h=n.Variables.getOrCreateVariablePackage(this.workspace,h,_,""))?this.argumentVarModels_.push(h):console.log("Failed to create a variable with name "+_+", ignoring.")}this.updateParams_(),n.Procedures.mutateCallers(this),this.setStatements_("false"!==l.getAttribute("statements"))},decompose:function(l){var u=n.utils.xml.createElement("block");u.setAttribute("type","procedures_mutatorcontainer");var h=n.utils.xml.createElement("statement");h.setAttribute("name","STACK"),u.appendChild(h);for(var _=0;_<this.arguments_.length;_++){var b=n.utils.xml.createElement("block");b.setAttribute("type","procedures_mutatorarg");var M=n.utils.xml.createElement("field");M.setAttribute("name","NAME");var k=n.utils.xml.createTextNode(this.arguments_[_]);M.appendChild(k),b.appendChild(M),M=n.utils.xml.createElement("next"),b.appendChild(M),h.appendChild(b),h=M}return l=n.Xml.domToBlock(u,l),"procedures_defreturn"==this.type?l.setFieldValue(this.hasStatements_,"STATEMENTS"):l.removeInput("STATEMENT_INPUT"),n.Procedures.mutateCallers(this),l},compose:function(l){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var u=l.getInputTargetBlock("STACK");u&&!u.isInsertionMarker();){var h=u.getFieldValue("NAME");this.arguments_.push(h),h=this.workspace.getVariable(h,""),this.argumentVarModels_.push(h),this.paramIds_.push(u.id),u=u.nextConnection&&u.nextConnection.targetBlock()}this.updateParams_(),n.Procedures.mutateCallers(this),null!==(l=l.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(l="TRUE"==l)&&(l?(this.setStatements_(!0),n.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(l=this.getInput("STACK").connection,(this.statementConnection_=l.targetConnection)&&((l=l.targetBlock()).unplug(),l.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(l,u){var h=this.workspace.getVariableById(l);if(""==h.type){h=h.name,u=this.workspace.getVariableById(u);for(var _=!1,b=0;b<this.argumentVarModels_.length;b++)this.argumentVarModels_[b].getId()==l&&(this.arguments_[b]=u.name,this.argumentVarModels_[b]=u,_=!0);_&&(this.displayRenamedVar_(h,u.name),n.Procedures.mutateCallers(this))}},updateVarName:function(l){for(var u=l.name,h=!1,_=0;_<this.argumentVarModels_.length;_++)if(this.argumentVarModels_[_].getId()==l.getId()){var b=this.arguments_[_];this.arguments_[_]=u,h=!0}h&&(this.displayRenamedVar_(b,u),n.Procedures.mutateCallers(this))},displayRenamedVar_:function(l,u){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var b,h=this.mutator.workspace_.getAllBlocks(!1),_=0;b=h[_];_++)"procedures_mutatorarg"==b.type&&n.Names.equals(l,b.getFieldValue("NAME"))&&b.setFieldValue(u,"NAME")},customContextMenu:function(l){if(!this.isInFlyout){var u={enabled:!0},h=this.getFieldValue("NAME");u.text=n.Msg.PROCEDURES_CREATE_DO.replace("%1",h);var _=n.utils.xml.createElement("mutation");for(_.setAttribute("name",h),h=0;h<this.arguments_.length;h++){var b=n.utils.xml.createElement("arg");b.setAttribute("name",this.arguments_[h]),_.appendChild(b)}if((h=n.utils.xml.createElement("block")).setAttribute("type",this.callType_),h.appendChild(_),u.callback=n.ContextMenu.callbackFactory(this,h),l.push(u),!this.isCollapsed())for(h=0;h<this.argumentVarModels_.length;h++)(u={enabled:!0}).text=n.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(_=this.argumentVarModels_[h]).name),_=n.Variables.generateVariableFieldDom(_),(b=n.utils.xml.createElement("block")).setAttribute("type","variables_get"),b.appendChild(_),u.callback=n.ContextMenu.callbackFactory(this,b),l.push(u)}},callType_:"procedures_callnoreturn"},n.Blocks.procedures_defreturn={init:function(){var l=n.Procedures.findLegalName("",this);(l=new n.FieldTextInput(l,n.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(n.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(l,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(n.ALIGN_RIGHT).appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new n.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&n.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(n.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(n.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:n.Blocks.procedures_defnoreturn.setStatements_,updateParams_:n.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:n.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:n.Blocks.procedures_defnoreturn.domToMutation,decompose:n.Blocks.procedures_defnoreturn.decompose,compose:n.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:n.Blocks.procedures_defnoreturn.getVars,getVarModels:n.Blocks.procedures_defnoreturn.getVarModels,renameVarById:n.Blocks.procedures_defnoreturn.renameVarById,updateVarName:n.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:n.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:n.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},n.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(n.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new n.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},n.Blocks.procedures_mutatorarg={init:function(){var l=new n.FieldTextInput(n.Procedures.DEFAULT_ARG,this.validator_);l.oldShowEditorFn_=l.showEditor_,l.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(n.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(l,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,l.onFinishEditing_=this.deleteIntermediateVars_,l.createdVariables_=[],l.onFinishEditing_("x")},validator_:function(l){var u=this.getSourceBlock(),h=n.Mutator.findParentWs(u.workspace);if(!(l=l.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var _=(u.workspace.targetWorkspace||u.workspace).getAllBlocks(!1),b=l.toLowerCase(),M=0;M<_.length;M++)if(_[M].id!=this.getSourceBlock().id){var k=_[M].getFieldValue("NAME");if(k&&k.toLowerCase()==b)return null}return u.isInFlyout||((u=h.getVariable(l,""))&&u.name!=l&&h.renameVariableById(u.getId(),l),u||(u=h.createVariable(l,""))&&this.createdVariables_&&this.createdVariables_.push(u)),l},deleteIntermediateVars_:function(l){var u=n.Mutator.findParentWs(this.getSourceBlock().workspace);if(u)for(var h=0;h<this.createdVariables_.length;h++){var _=this.createdVariables_[h];_.name!=l&&u.deleteVariableById(_.getId())}}},n.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(n.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(l,u){n.Names.equals(l,this.getProcedureCall())&&(this.setFieldValue(u,"NAME"),this.setTooltip((this.outputConnection?n.Msg.PROCEDURES_CALLRETURN_TOOLTIP:n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",u)))},setProcedureParameters_:function(l,u){var h=n.Procedures.getDefinition(this.getProcedureCall(),this.workspace),_=h&&h.mutator&&h.mutator.isVisible();if(_||(this.quarkConnections_={},this.quarkIds_=null),u)if(l.join("\n")==this.arguments_.join("\n"))this.quarkIds_=u;else{if(u.length!=l.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),h=this.rendered,this.rendered=!1;for(var b=0;b<this.arguments_.length;b++){var M=this.getInput("ARG"+b);M&&(this.quarkConnections_[this.quarkIds_[b]]=M=M.connection.targetConnection,_&&M&&-1==u.indexOf(this.quarkIds_[b])&&(M.disconnect(),M.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(l),this.argumentVarModels_=[],b=0;b<this.arguments_.length;b++)l=n.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[b],""),this.argumentVarModels_.push(l);if(this.updateShape_(),this.quarkIds_=u)for(b=0;b<this.arguments_.length;b++)(u=this.quarkIds_[b])in this.quarkConnections_&&(n.Mutator.reconnect(M=this.quarkConnections_[u],this,"ARG"+b)||delete this.quarkConnections_[u]);(this.rendered=h)&&this.render()}},updateShape_:function(){for(var l=0;l<this.arguments_.length;l++){var u=this.getField("ARGNAME"+l);if(u){n.Events.disable();try{u.setValue(this.arguments_[l])}finally{n.Events.enable()}}else u=new n.FieldLabel(this.arguments_[l]),this.appendValueInput("ARG"+l).setAlign(n.ALIGN_RIGHT).appendField(u,"ARGNAME"+l).init()}for(;this.getInput("ARG"+l);)this.removeInput("ARG"+l),l++;(l=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(l.appendField(n.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),l.init()):this.getField("WITH")&&l.removeField("WITH"))},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");l.setAttribute("name",this.getProcedureCall());for(var u=0;u<this.arguments_.length;u++){var h=n.utils.xml.createElement("arg");h.setAttribute("name",this.arguments_[u]),l.appendChild(h)}return l},domToMutation:function(l){var u=l.getAttribute("name");this.renameProcedure(this.getProcedureCall(),u),u=[];for(var b,h=[],_=0;b=l.childNodes[_];_++)"arg"==b.nodeName.toLowerCase()&&(u.push(b.getAttribute("name")),h.push(b.getAttribute("paramId")));this.setProcedureParameters_(u,h)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(l){if(this.workspace&&!this.workspace.isFlyout&&l.recordUndo)if(l.type==n.Events.BLOCK_CREATE&&-1!=l.ids.indexOf(this.id)){var u=this.getProcedureCall();if(!(u=n.Procedures.getDefinition(u,this.workspace))||u.type==this.defType_&&JSON.stringify(u.getVars())==JSON.stringify(this.arguments_)||(u=null),!u){n.Events.setGroup(l.group),l=n.utils.xml.createElement("xml"),(u=n.utils.xml.createElement("block")).setAttribute("type",this.defType_);var h=this.getRelativeToSurfaceXY(),_=h.y+2*n.SNAP_RADIUS;u.setAttribute("x",h.x+n.SNAP_RADIUS*(this.RTL?-1:1)),u.setAttribute("y",_),h=this.mutationToDom(),u.appendChild(h),(h=n.utils.xml.createElement("field")).setAttribute("name","NAME"),(_=this.getProcedureCall())||(_=n.Procedures.findLegalName("",this),this.renameProcedure("",_)),h.appendChild(n.utils.xml.createTextNode(_)),u.appendChild(h),l.appendChild(u),n.Xml.domToWorkspace(l,this.workspace),n.Events.setGroup(!1)}}else l.type==n.Events.BLOCK_DELETE?(u=this.getProcedureCall(),(u=n.Procedures.getDefinition(u,this.workspace))||(n.Events.setGroup(l.group),this.dispose(!0),n.Events.setGroup(!1))):l.type==n.Events.CHANGE&&"disabled"==l.element&&(u=this.getProcedureCall(),(u=n.Procedures.getDefinition(u,this.workspace))&&u.id==l.blockId&&((u=n.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),n.Events.setGroup(l.group),l.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),n.Events.setGroup(u)))},customContextMenu:function(l){if(this.workspace.isMovable()){var u={enabled:!0};u.text=n.Msg.PROCEDURES_HIGHLIGHT_DEF;var h=this.getProcedureCall(),_=this.workspace;u.callback=function(){var b=n.Procedures.getDefinition(h,_);b&&(_.centerOnBlock(b.id),b.select())},l.push(u)}},defType_:"procedures_defnoreturn"},n.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(n.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:n.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:n.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:n.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:n.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:n.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:n.Blocks.procedures_callnoreturn.domToMutation,getVars:n.Blocks.procedures_callnoreturn.getVars,getVarModels:n.Blocks.procedures_callnoreturn.getVarModels,onchange:n.Blocks.procedures_callnoreturn.onchange,customContextMenu:n.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},n.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(n.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(n.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("value",Number(this.hasReturnValue_)),l},domToMutation:function(l){this.hasReturnValue_=1==l.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(l){if(this.workspace.isDragging&&!this.workspace.isDragging()){l=!1;var u=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(u.type)){l=!0;break}u=u.getSurroundParent()}while(u);l?("procedures_defnoreturn"==u.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=u.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(n.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},n.Blocks.texts={},n.Constants.Text={},n.Constants.Text.HUE=160,n.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),n.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[n.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[n.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[n.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[n.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[n.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[n.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(n.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),n.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(n.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(n.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var l=n.utils.xml.createElement("mutation"),u=this.getInput("AT1").type==n.INPUT_VALUE;return l.setAttribute("at1",u),u=this.getInput("AT2").type==n.INPUT_VALUE,l.setAttribute("at2",u),l},domToMutation:function(l){var u="true"==l.getAttribute("at1");l="true"==l.getAttribute("at2"),this.updateAt_(1,u),this.updateAt_(2,l)},updateAt_:function(l,u){this.removeInput("AT"+l),this.removeInput("ORDINAL"+l,!0),u?(this.appendValueInput("AT"+l).setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+l).appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+l),2==l&&n.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(n.Msg.TEXT_GET_SUBSTRING_TAIL));var h=new n.FieldDropdown(this["WHERE_OPTIONS_"+l],function(_){var b="FROM_START"==_||"FROM_END"==_;if(b!=u){var M=this.getSourceBlock();return M.updateAt_(l,b),M.setFieldValue(_,"WHERE"+l),null}});this.getInput("AT"+l).appendField(h,"WHERE"+l),1==l&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},n.Blocks.text_changeCase={init:function(){var l=[[n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(n.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new n.FieldDropdown(l),"CASE"),this.setOutput(!0,"String"),this.setTooltip(n.Msg.TEXT_CHANGECASE_TOOLTIP)}},n.Blocks.text_trim={init:function(){var l=[[n.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[n.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[n.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(n.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new n.FieldDropdown(l),"MODE"),this.setOutput(!0,"String"),this.setTooltip(n.Msg.TEXT_TRIM_TOOLTIP)}},n.Blocks.text_print={init:function(){this.jsonInit({message0:n.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:n.Msg.TEXT_PRINT_TOOLTIP,helpUrl:n.Msg.TEXT_PRINT_HELPURL})}},n.Blocks.text_prompt_ext={init:function(){var l=[[n.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[n.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(n.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var u=this;l=new n.FieldDropdown(l,function(h){u.updateType_(h)}),this.appendValueInput("TEXT").appendField(l,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==u.getFieldValue("TYPE")?n.Msg.TEXT_PROMPT_TOOLTIP_TEXT:n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(l){this.outputConnection.setCheck("NUMBER"==l?"Number":"String")},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("type",this.getFieldValue("TYPE")),l},domToMutation:function(l){this.updateType_(l.getAttribute("type"))}},n.Blocks.text_prompt={init:function(){this.mixin(n.Constants.Text.QUOTE_IMAGE_MIXIN);var l=[[n.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[n.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],u=this;this.setHelpUrl(n.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),l=new n.FieldDropdown(l,function(h){u.updateType_(h)}),this.appendDummyInput().appendField(l,"TYPE").appendField(this.newQuote_(!0)).appendField(new n.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==u.getFieldValue("TYPE")?n.Msg.TEXT_PROMPT_TOOLTIP_TEXT:n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:n.Blocks.text_prompt_ext.updateType_,mutationToDom:n.Blocks.text_prompt_ext.mutationToDom,domToMutation:n.Blocks.text_prompt_ext.domToMutation},n.Blocks.text_count={init:function(){this.jsonInit({message0:n.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:n.Msg.TEXT_COUNT_TOOLTIP,helpUrl:n.Msg.TEXT_COUNT_HELPURL})}},n.Blocks.text_replace={init:function(){this.jsonInit({message0:n.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:n.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:n.Msg.TEXT_REPLACE_HELPURL})}},n.Blocks.text_reverse={init:function(){this.jsonInit({message0:n.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:n.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:n.Msg.TEXT_REVERSE_HELPURL})}},n.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(l){for(var h,u=0;h=this.inputList[u];u++)for(var b,_=0;b=h.fieldRow[_];_++)if(l==b.name)return h.insertFieldAt(_,this.newQuote_(!0)),void h.insertFieldAt(_+2,this.newQuote_(!1));console.warn('field named "'+l+'" not found in '+this.toDevString())},newQuote_:function(l){return new n.FieldImage((l=this.RTL?!l:l)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,l?"\u201c":"\u201d")}},n.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(n.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},n.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("items",this.itemCount_),l},domToMutation:function(l){this.itemCount_=parseInt(l.getAttribute("items"),10),this.updateShape_()},decompose:function(l){var u=l.newBlock("text_create_join_container");u.initSvg();for(var h=u.getInput("STACK").connection,_=0;_<this.itemCount_;_++){var b=l.newBlock("text_create_join_item");b.initSvg(),h.connect(b.previousConnection),h=b.nextConnection}return u},compose:function(l){var u=l.getInputTargetBlock("STACK");for(l=[];u&&!u.isInsertionMarker();)l.push(u.valueConnection_),u=u.nextConnection&&u.nextConnection.targetBlock();for(u=0;u<this.itemCount_;u++){var h=this.getInput("ADD"+u).connection.targetConnection;h&&-1==l.indexOf(h)&&h.disconnect()}for(this.itemCount_=l.length,this.updateShape_(),u=0;u<this.itemCount_;u++)n.Mutator.reconnect(l[u],this,"ADD"+u)},saveConnections:function(l){l=l.getInputTargetBlock("STACK");for(var u=0;l;){var h=this.getInput("ADD"+u);l.valueConnection_=h&&h.connection.targetConnection,u++,l=l.nextConnection&&l.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var l=0;l<this.itemCount_;l++)if(!this.getInput("ADD"+l)){var u=this.appendValueInput("ADD"+l).setAlign(n.ALIGN_RIGHT);0==l&&u.appendField(n.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+l);)this.removeInput("ADD"+l),l++}},n.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(n.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new n.Mutator(["text_create_join_item"]))},n.Extensions.register("text_append_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),n.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var l=this;this.setTooltip(function(){return n.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",l.workspace.options.oneBasedIndex?"0":"-1")})},n.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("at",!!this.isAt_),l},domToMutation:function(l){l="false"!=l.getAttribute("at"),this.updateAt_(l)},updateAt_:function(l){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),l&&(this.appendValueInput("AT").setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)),n.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(n.Msg.TEXT_CHARAT_TAIL)),this.isAt_=l}},n.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(u){(u="FROM_START"==u||"FROM_END"==u)!=this.isAt_&&this.getSourceBlock().updateAt_(u)}),this.updateAt_(!0);var l=this;this.setTooltip(function(){var u=l.getFieldValue("WHERE"),h=n.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==u||"FROM_END"==u)&&(u="FROM_START"==u?n.Msg.LISTS_INDEX_FROM_START_TOOLTIP:n.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(h+="  "+u.replace("%1",l.workspace.options.oneBasedIndex?"#1":"#0")),h})},n.Extensions.register("text_indexOf_tooltip",n.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),n.Extensions.register("text_quotes",n.Constants.Text.TEXT_QUOTES_EXTENSION),n.Extensions.registerMutator("text_join_mutator",n.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,n.Constants.Text.TEXT_JOIN_EXTENSION),n.Extensions.registerMutator("text_charAt_mutator",n.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,n.Constants.Text.TEXT_CHARAT_EXTENSION),n.Blocks.variables={},n.Constants.Variables={},n.Constants.Variables.HUE=330,n.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),n.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(l){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(u={text:n.Msg.RENAME_VARIABLE,enabled:!0,callback:n.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},b=this.getField("VAR").getText(),_={text:n.Msg.DELETE_VARIABLE.replace("%1",b),enabled:!0,callback:n.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},l.unshift(u),l.unshift(_));else{if("variables_get"==this.type)var u="variables_set",h=n.Msg.VARIABLES_GET_CREATE_SET;else u="variables_get",h=n.Msg.VARIABLES_SET_CREATE_GET;var _={enabled:0<this.workspace.remainingCapacity()},b=this.getField("VAR").getText();_.text=h.replace("%1",b),(h=n.utils.xml.createElement("field")).setAttribute("name","VAR"),h.appendChild(n.utils.xml.createTextNode(b)),(b=n.utils.xml.createElement("block")).setAttribute("type",u),b.appendChild(h),_.callback=n.ContextMenu.callbackFactory(this,b),l.push(_)}}},n.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();n.Variables.renameVariable(u,h)}},n.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();u.deleteVariableById(h.getId()),u.refreshToolboxSelection()}},n.Extensions.registerMixin("contextMenu_variableSetterGetter",n.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),n.Constants.VariablesDynamic={},n.Constants.VariablesDynamic.HUE=310,n.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),n.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(l){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(u={text:n.Msg.RENAME_VARIABLE,enabled:!0,callback:n.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},M=this.getField("VAR").getText(),b={text:n.Msg.DELETE_VARIABLE.replace("%1",M),enabled:!0,callback:n.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},l.unshift(u),l.unshift(b));else{var u=this.getFieldValue("VAR"),h=this.workspace.getVariableById(u).type;if("variables_get_dynamic"==this.type){u="variables_set_dynamic";var _=n.Msg.VARIABLES_GET_CREATE_SET}else u="variables_get_dynamic",_=n.Msg.VARIABLES_SET_CREATE_GET;var b={enabled:0<this.workspace.remainingCapacity()},M=this.getField("VAR").getText();b.text=_.replace("%1",M),(_=n.utils.xml.createElement("field")).setAttribute("name","VAR"),_.setAttribute("variabletype",h),_.appendChild(n.utils.xml.createTextNode(M)),(M=n.utils.xml.createElement("block")).setAttribute("type",u),M.appendChild(_),b.callback=n.ContextMenu.callbackFactory(this,M),l.push(b)}},onchange:function(l){l=this.getFieldValue("VAR"),l=n.Variables.getVariable(this.workspace,l),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(l.type):this.getInput("VALUE").connection.setCheck(l.type)}},n.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();n.Variables.renameVariable(u,h)}},n.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();u.deleteVariableById(h.getId()),u.refreshToolboxSelection()}},n.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",n.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),n.Blocks}.apply(I,S))&&(T.exports=s)},55490:function(T,I,m){var S,s;S=[m(82215),m(79841),m(20813),m(75610)],void 0!==(s=function(n,l,u,h){"use strict";return n.setLocale(l),n.Blocks=n.Blocks||{},Object.keys(u).forEach(function(_){n.Blocks[_]=u[_]}),n.JavaScript=h,n}.apply(I,S))&&(T.exports=s)},82215:function(T,I,m){var S,s;S=[m(76588)],void 0!==(s=function(n){"use strict";return n.setLocale=function(l){n.Msg=n.Msg||{},Object.keys(l).forEach(function(u){n.Msg[u]=l[u]})},n}.apply(I,S))&&(T.exports=s)},5389:function(T,I,m){var S,s;S=[m(55490)],void 0!==(s=function(n){"use strict";return n}.apply(I,S))&&(T.exports=s)},75610:function(T,I,m){var S,s;S=[m(82215),m(52657)],void 0!==(s=function(n,l){"use strict";return n.JavaScript=l,l}.apply(I,S))&&(T.exports=s)},52657:function(T,I,m){var S,s;S=[m(96761)],void 0!==(s=function(n){"use strict";return n.JavaScript=new n.Generator("JavaScript"),n.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(n.utils.global).join(",")),n.JavaScript.ORDER_ATOMIC=0,n.JavaScript.ORDER_NEW=1.1,n.JavaScript.ORDER_MEMBER=1.2,n.JavaScript.ORDER_FUNCTION_CALL=2,n.JavaScript.ORDER_INCREMENT=3,n.JavaScript.ORDER_DECREMENT=3,n.JavaScript.ORDER_BITWISE_NOT=4.1,n.JavaScript.ORDER_UNARY_PLUS=4.2,n.JavaScript.ORDER_UNARY_NEGATION=4.3,n.JavaScript.ORDER_LOGICAL_NOT=4.4,n.JavaScript.ORDER_TYPEOF=4.5,n.JavaScript.ORDER_VOID=4.6,n.JavaScript.ORDER_DELETE=4.7,n.JavaScript.ORDER_AWAIT=4.8,n.JavaScript.ORDER_EXPONENTIATION=5,n.JavaScript.ORDER_MULTIPLICATION=5.1,n.JavaScript.ORDER_DIVISION=5.2,n.JavaScript.ORDER_MODULUS=5.3,n.JavaScript.ORDER_SUBTRACTION=6.1,n.JavaScript.ORDER_ADDITION=6.2,n.JavaScript.ORDER_BITWISE_SHIFT=7,n.JavaScript.ORDER_RELATIONAL=8,n.JavaScript.ORDER_IN=8,n.JavaScript.ORDER_INSTANCEOF=8,n.JavaScript.ORDER_EQUALITY=9,n.JavaScript.ORDER_BITWISE_AND=10,n.JavaScript.ORDER_BITWISE_XOR=11,n.JavaScript.ORDER_BITWISE_OR=12,n.JavaScript.ORDER_LOGICAL_AND=13,n.JavaScript.ORDER_LOGICAL_OR=14,n.JavaScript.ORDER_CONDITIONAL=15,n.JavaScript.ORDER_ASSIGNMENT=16,n.JavaScript.ORDER_YIELD=17,n.JavaScript.ORDER_COMMA=18,n.JavaScript.ORDER_NONE=99,n.JavaScript.ORDER_OVERRIDES=[[n.JavaScript.ORDER_FUNCTION_CALL,n.JavaScript.ORDER_MEMBER],[n.JavaScript.ORDER_FUNCTION_CALL,n.JavaScript.ORDER_FUNCTION_CALL],[n.JavaScript.ORDER_MEMBER,n.JavaScript.ORDER_MEMBER],[n.JavaScript.ORDER_MEMBER,n.JavaScript.ORDER_FUNCTION_CALL],[n.JavaScript.ORDER_LOGICAL_NOT,n.JavaScript.ORDER_LOGICAL_NOT],[n.JavaScript.ORDER_MULTIPLICATION,n.JavaScript.ORDER_MULTIPLICATION],[n.JavaScript.ORDER_ADDITION,n.JavaScript.ORDER_ADDITION],[n.JavaScript.ORDER_LOGICAL_AND,n.JavaScript.ORDER_LOGICAL_AND],[n.JavaScript.ORDER_LOGICAL_OR,n.JavaScript.ORDER_LOGICAL_OR]],n.JavaScript.isInitialized=!1,n.JavaScript.init=function(l){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new n.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(l.getVariableMap()),this.nameDB_.populateVariables(l),this.nameDB_.populateProcedures(l);for(var u=[],h=n.Variables.allDeveloperVariables(l),_=0;_<h.length;_++)u.push(this.nameDB_.getName(h[_],n.Names.DEVELOPER_VARIABLE_TYPE));for(l=n.Variables.allUsedVarModels(l),_=0;_<l.length;_++)u.push(this.nameDB_.getName(l[_].getId(),n.VARIABLE_CATEGORY_NAME));u.length&&(this.definitions_.variables="var "+u.join(", ")+";"),this.isInitialized=!0},n.JavaScript.finish=function(l){var u=n.utils.object.values(this.definitions_);return l=Object.getPrototypeOf(this).finish.call(this,l),this.isInitialized=!1,this.nameDB_.reset(),u.join("\n\n")+"\n\n\n"+l},n.JavaScript.scrubNakedValue=function(l){return l+";\n"},n.JavaScript.quote_=function(l){return"'"+(l=l.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},n.JavaScript.multiline_quote_=function(l){return l.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},n.JavaScript.scrub_=function(l,u,h){var _="";if(!l.outputConnection||!l.outputConnection.targetConnection){var b=l.getCommentText();b&&(b=n.utils.string.wrap(b,this.COMMENT_WRAP-3),_+=this.prefixLines(b+"\n","// "));for(var M=0;M<l.inputList.length;M++)l.inputList[M].type==n.inputTypes.VALUE&&(b=l.inputList[M].connection.targetBlock())&&(b=this.allNestedComments(b))&&(_+=this.prefixLines(b,"// "))}return l=l.nextConnection&&l.nextConnection.targetBlock(),_+u+(h?"":this.blockToCode(l))},n.JavaScript.getAdjusted=function(l,u,h,_,b){h=h||0,b=b||this.ORDER_NONE,l.workspace.options.oneBasedIndex&&h--;var M=l.workspace.options.oneBasedIndex?"1":"0";if(l=0<h?this.valueToCode(l,u,this.ORDER_ADDITION)||M:0>h?this.valueToCode(l,u,this.ORDER_SUBTRACTION)||M:_?this.valueToCode(l,u,this.ORDER_UNARY_NEGATION)||M:this.valueToCode(l,u,b)||M,n.isNumber(l))l=Number(l)+h,_&&(l=-l);else{if(0<h){l=l+" + "+h;var k=this.ORDER_ADDITION}else 0>h&&(l=l+" - "+-h,k=this.ORDER_SUBTRACTION);_&&(l=h?"-("+l+")":"-"+l,k=this.ORDER_UNARY_NEGATION),k=Math.floor(k),b=Math.floor(b),k&&b>=k&&(l="("+l+")")}return l},n.JavaScript.colour={},n.JavaScript.colour_picker=function(l){return[n.JavaScript.quote_(l.getFieldValue("COLOUR")),n.JavaScript.ORDER_ATOMIC]},n.JavaScript.colour_random=function(l){return[n.JavaScript.provideFunction_("colourRandom",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.colour_rgb=function(l){var u=n.JavaScript.valueToCode(l,"RED",n.JavaScript.ORDER_NONE)||0,h=n.JavaScript.valueToCode(l,"GREEN",n.JavaScript.ORDER_NONE)||0;return l=n.JavaScript.valueToCode(l,"BLUE",n.JavaScript.ORDER_NONE)||0,[n.JavaScript.provideFunction_("colourRgb",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+u+", "+h+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.colour_blend=function(l){var u=n.JavaScript.valueToCode(l,"COLOUR1",n.JavaScript.ORDER_NONE)||"'#000000'",h=n.JavaScript.valueToCode(l,"COLOUR2",n.JavaScript.ORDER_NONE)||"'#000000'";return l=n.JavaScript.valueToCode(l,"RATIO",n.JavaScript.ORDER_NONE)||.5,[n.JavaScript.provideFunction_("colourBlend",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+u+", "+h+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists={},n.JavaScript.lists_create_empty=function(l){return["[]",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.lists_create_with=function(l){for(var u=Array(l.itemCount_),h=0;h<l.itemCount_;h++)u[h]=n.JavaScript.valueToCode(l,"ADD"+h,n.JavaScript.ORDER_NONE)||"null";return["["+u.join(", ")+"]",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.lists_repeat=function(l){return[n.JavaScript.provideFunction_("listsRepeat",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(n.JavaScript.valueToCode(l,"ITEM",n.JavaScript.ORDER_NONE)||"null")+", "+(l=n.JavaScript.valueToCode(l,"NUM",n.JavaScript.ORDER_NONE)||"0")+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_length=function(l){return[(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"[]")+".length",n.JavaScript.ORDER_MEMBER]},n.JavaScript.lists_isEmpty=function(l){return["!"+(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"[]")+".length",n.JavaScript.ORDER_LOGICAL_NOT]},n.JavaScript.lists_indexOf=function(l){var u="FIRST"==l.getFieldValue("END")?"indexOf":"lastIndexOf",h=n.JavaScript.valueToCode(l,"FIND",n.JavaScript.ORDER_NONE)||"''";return u=(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"[]")+"."+u+"("+h+")",l.workspace.options.oneBasedIndex?[u+" + 1",n.JavaScript.ORDER_ADDITION]:[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_getIndex=function(l){var u=l.getFieldValue("MODE")||"GET",h=l.getFieldValue("WHERE")||"FROM_START",_=n.JavaScript.valueToCode(l,"VALUE","RANDOM"==h?n.JavaScript.ORDER_NONE:n.JavaScript.ORDER_MEMBER)||"[]";switch(h){case"FIRST":if("GET"==u)return[_+"[0]",n.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==u)return[_+".shift()",n.JavaScript.ORDER_MEMBER];if("REMOVE"==u)return _+".shift();\n";break;case"LAST":if("GET"==u)return[_+".slice(-1)[0]",n.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==u)return[_+".pop()",n.JavaScript.ORDER_MEMBER];if("REMOVE"==u)return _+".pop();\n";break;case"FROM_START":if(l=n.JavaScript.getAdjusted(l,"AT"),"GET"==u)return[_+"["+l+"]",n.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==u)return[_+".splice("+l+", 1)[0]",n.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==u)return _+".splice("+l+", 1);\n";break;case"FROM_END":if(l=n.JavaScript.getAdjusted(l,"AT",1,!0),"GET"==u)return[_+".slice("+l+")[0]",n.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==u)return[_+".splice("+l+", 1)[0]",n.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==u)return _+".splice("+l+", 1);";break;case"RANDOM":if(_=n.JavaScript.provideFunction_("listsGetRandomItem",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+_+", "+("GET"!=u)+")","GET"==u||"GET_REMOVE"==u)return[_,n.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==u)return _+";\n"}throw Error("Unhandled combination (lists_getIndex).")},n.JavaScript.lists_setIndex=function(l){function u(){if(h.match(/^\w+$/))return"";var k=n.JavaScript.nameDB_.getDistinctName("tmpList",n.VARIABLE_CATEGORY_NAME),H="var "+k+" = "+h+";\n";return h=k,H}var h=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_MEMBER)||"[]",_=l.getFieldValue("MODE")||"GET",b=l.getFieldValue("WHERE")||"FROM_START",M=n.JavaScript.valueToCode(l,"TO",n.JavaScript.ORDER_ASSIGNMENT)||"null";switch(b){case"FIRST":if("SET"==_)return h+"[0] = "+M+";\n";if("INSERT"==_)return h+".unshift("+M+");\n";break;case"LAST":if("SET"==_)return(l=u())+(h+"[")+h+".length - 1] = "+M+";\n";if("INSERT"==_)return h+".push("+M+");\n";break;case"FROM_START":if(b=n.JavaScript.getAdjusted(l,"AT"),"SET"==_)return h+"["+b+"] = "+M+";\n";if("INSERT"==_)return h+".splice("+b+", 0, "+M+");\n";break;case"FROM_END":if(b=n.JavaScript.getAdjusted(l,"AT",1,!1,n.JavaScript.ORDER_SUBTRACTION),l=u(),"SET"==_)return l+(h+"[")+h+".length - "+b+"] = "+M+";\n";if("INSERT"==_)return l+(h+".splice(")+h+".length - "+b+", 0, "+M+");\n";break;case"RANDOM":if(l=u(),l+="var "+(b=n.JavaScript.nameDB_.getDistinctName("tmpX",n.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+h+".length);\n","SET"==_)return l+(h+"[")+b+"] = "+M+";\n";if("INSERT"==_)return l+(h+".splice(")+b+", 0, "+M+");\n"}throw Error("Unhandled combination (lists_setIndex).")},n.JavaScript.lists.getIndex_=function(l,u,h){return"FIRST"==u?"0":"FROM_END"==u?l+".length - 1 - "+h:"LAST"==u?l+".length - 1":h},n.JavaScript.lists_getSublist=function(l){var u=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_MEMBER)||"[]",h=l.getFieldValue("WHERE1"),_=l.getFieldValue("WHERE2");if("FIRST"==h&&"LAST"==_)u+=".slice(0)";else if(u.match(/^\w+$/)||"FROM_END"!=h&&"FROM_START"==_){switch(h){case"FROM_START":var b=n.JavaScript.getAdjusted(l,"AT1");break;case"FROM_END":b=u+".length - "+(b=n.JavaScript.getAdjusted(l,"AT1",1,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":b="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(_){case"FROM_START":l=n.JavaScript.getAdjusted(l,"AT2",1);break;case"FROM_END":l=u+".length - "+(l=n.JavaScript.getAdjusted(l,"AT2",0,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"LAST":l=u+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}u=u+".slice("+b+", "+l+")"}else{b=n.JavaScript.getAdjusted(l,"AT1"),l=n.JavaScript.getAdjusted(l,"AT2");var M=n.JavaScript.lists.getIndex_,k={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};u=n.JavaScript.provideFunction_("subsequence"+k[h]+k[_],["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==h||"FROM_START"==h?", at1":"")+("FROM_END"==_||"FROM_START"==_?", at2":"")+") {","  var start = "+M("sequence",h,"at1")+";","  var end = "+M("sequence",_,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+u+("FROM_END"==h||"FROM_START"==h?", "+b:"")+("FROM_END"==_||"FROM_START"==_?", "+l:"")+")"}return[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_sort=function(l){var u=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_FUNCTION_CALL)||"[]",h="1"===l.getFieldValue("DIRECTION")?1:-1;return l=l.getFieldValue("TYPE"),[u+".slice().sort("+n.JavaScript.provideFunction_("listsGetSortCompare",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+l+'", '+h+"))",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_split=function(l){var u=n.JavaScript.valueToCode(l,"INPUT",n.JavaScript.ORDER_MEMBER),h=n.JavaScript.valueToCode(l,"DELIM",n.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(l=l.getFieldValue("MODE")))u||(u="''"),l="split";else{if("JOIN"!=l)throw Error("Unknown mode: "+l);u||(u="[]"),l="join"}return[u+"."+l+"("+h+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_reverse=function(l){return[(n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.logic={},n.JavaScript.controls_if=function(l){var u=0,h="";n.JavaScript.STATEMENT_PREFIX&&(h+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,l));do{var _=n.JavaScript.valueToCode(l,"IF"+u,n.JavaScript.ORDER_NONE)||"false",b=n.JavaScript.statementToCode(l,"DO"+u);n.JavaScript.STATEMENT_SUFFIX&&(b=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l),n.JavaScript.INDENT)+b),h+=(0<u?" else ":"")+"if ("+_+") {\n"+b+"}",++u}while(l.getInput("IF"+u));return(l.getInput("ELSE")||n.JavaScript.STATEMENT_SUFFIX)&&(b=n.JavaScript.statementToCode(l,"ELSE"),n.JavaScript.STATEMENT_SUFFIX&&(b=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l),n.JavaScript.INDENT)+b),h+=" else {\n"+b+"}"),h+"\n"},n.JavaScript.controls_ifelse=n.JavaScript.controls_if,n.JavaScript.logic_compare=function(l){var u={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[l.getFieldValue("OP")],h="=="==u||"!="==u?n.JavaScript.ORDER_EQUALITY:n.JavaScript.ORDER_RELATIONAL;return[(n.JavaScript.valueToCode(l,"A",h)||"0")+" "+u+" "+(l=n.JavaScript.valueToCode(l,"B",h)||"0"),h]},n.JavaScript.logic_operation=function(l){var u="AND"==l.getFieldValue("OP")?"&&":"||",h="&&"==u?n.JavaScript.ORDER_LOGICAL_AND:n.JavaScript.ORDER_LOGICAL_OR,_=n.JavaScript.valueToCode(l,"A",h);if(l=n.JavaScript.valueToCode(l,"B",h),_||l){var b="&&"==u?"true":"false";_||(_=b),l||(l=b)}else l=_="false";return[_+" "+u+" "+l,h]},n.JavaScript.logic_negate=function(l){var u=n.JavaScript.ORDER_LOGICAL_NOT;return["!"+(n.JavaScript.valueToCode(l,"BOOL",u)||"true"),u]},n.JavaScript.logic_boolean=function(l){return["TRUE"==l.getFieldValue("BOOL")?"true":"false",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.logic_null=function(l){return["null",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.logic_ternary=function(l){return[(n.JavaScript.valueToCode(l,"IF",n.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(n.JavaScript.valueToCode(l,"THEN",n.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(l=n.JavaScript.valueToCode(l,"ELSE",n.JavaScript.ORDER_CONDITIONAL)||"null"),n.JavaScript.ORDER_CONDITIONAL]},n.JavaScript.loops={},n.JavaScript.controls_repeat_ext=function(l){var u=l.getField("TIMES")?String(Number(l.getFieldValue("TIMES"))):n.JavaScript.valueToCode(l,"TIMES",n.JavaScript.ORDER_ASSIGNMENT)||"0",h=n.JavaScript.statementToCode(l,"DO");h=n.JavaScript.addLoopTrap(h,l),l="";var _=n.JavaScript.nameDB_.getDistinctName("count",n.VARIABLE_CATEGORY_NAME),b=u;return u.match(/^\w+$/)||n.isNumber(u)||(l+="var "+(b=n.JavaScript.nameDB_.getDistinctName("repeat_end",n.VARIABLE_CATEGORY_NAME))+" = "+u+";\n"),l+"for (var "+_+" = 0; "+_+" < "+b+"; "+_+"++) {\n"+h+"}\n"},n.JavaScript.controls_repeat=n.JavaScript.controls_repeat_ext,n.JavaScript.controls_whileUntil=function(l){var u="UNTIL"==l.getFieldValue("MODE"),h=n.JavaScript.valueToCode(l,"BOOL",u?n.JavaScript.ORDER_LOGICAL_NOT:n.JavaScript.ORDER_NONE)||"false",_=n.JavaScript.statementToCode(l,"DO");return u&&(h="!"+h),"while ("+h+") {\n"+(_=n.JavaScript.addLoopTrap(_,l))+"}\n"},n.JavaScript.controls_for=function(l){var u=n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME),h=n.JavaScript.valueToCode(l,"FROM",n.JavaScript.ORDER_ASSIGNMENT)||"0",_=n.JavaScript.valueToCode(l,"TO",n.JavaScript.ORDER_ASSIGNMENT)||"0",b=n.JavaScript.valueToCode(l,"BY",n.JavaScript.ORDER_ASSIGNMENT)||"1",M=n.JavaScript.statementToCode(l,"DO");if(M=n.JavaScript.addLoopTrap(M,l),n.isNumber(h)&&n.isNumber(_)&&n.isNumber(b)){var k=Number(h)<=Number(_);l="for ("+u+" = "+h+"; "+u+(k?" <= ":" >= ")+_+"; "+u,l=(1==(u=Math.abs(Number(b)))?l+(k?"++":"--"):l+(k?" += ":" -= ")+u)+") {\n"+M+"}\n"}else l="",k=h,h.match(/^\w+$/)||n.isNumber(h)||(l+="var "+(k=n.JavaScript.nameDB_.getDistinctName(u+"_start",n.VARIABLE_CATEGORY_NAME))+" = "+h+";\n"),h=_,_.match(/^\w+$/)||n.isNumber(_)||(l+="var "+(h=n.JavaScript.nameDB_.getDistinctName(u+"_end",n.VARIABLE_CATEGORY_NAME))+" = "+_+";\n"),l+="var "+(_=n.JavaScript.nameDB_.getDistinctName(u+"_inc",n.VARIABLE_CATEGORY_NAME))+" = ",l=(l=n.isNumber(b)?l+(Math.abs(b)+";\n"):l+"Math.abs("+b+");\n")+"if ("+k+" > "+h+") {\n"+(n.JavaScript.INDENT+_)+" = -"+_+";\n",l+="}\n",l+="for ("+u+" = "+k+"; "+_+" >= 0 ? "+u+" <= "+h+" : "+u+" >= "+h+"; "+u+" += "+_+") {\n"+M+"}\n";return l},n.JavaScript.controls_forEach=function(l){var u=n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME),h=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_ASSIGNMENT)||"[]",_=n.JavaScript.statementToCode(l,"DO");_=n.JavaScript.addLoopTrap(_,l),l="";var b=h;return h.match(/^\w+$/)||(l+="var "+(b=n.JavaScript.nameDB_.getDistinctName(u+"_list",n.VARIABLE_CATEGORY_NAME))+" = "+h+";\n"),l+"for (var "+(h=n.JavaScript.nameDB_.getDistinctName(u+"_index",n.VARIABLE_CATEGORY_NAME))+" in "+b+") {\n"+(_=n.JavaScript.INDENT+u+" = "+b+"["+h+"];\n"+_)+"}\n"},n.JavaScript.controls_flow_statements=function(l){var u="";if(n.JavaScript.STATEMENT_PREFIX&&(u+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,l)),n.JavaScript.STATEMENT_SUFFIX&&(u+=n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l)),n.JavaScript.STATEMENT_PREFIX){var h=n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(l);h&&!h.suppressPrefixSuffix&&(u+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,h))}switch(l.getFieldValue("FLOW")){case"BREAK":return u+"break;\n";case"CONTINUE":return u+"continue;\n"}throw Error("Unknown flow statement.")},n.JavaScript.math={},n.JavaScript.math_number=function(l){return[l=Number(l.getFieldValue("NUM")),0<=l?n.JavaScript.ORDER_ATOMIC:n.JavaScript.ORDER_UNARY_NEGATION]},n.JavaScript.math_arithmetic=function(l){var u={ADD:[" + ",n.JavaScript.ORDER_ADDITION],MINUS:[" - ",n.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",n.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",n.JavaScript.ORDER_DIVISION],POWER:[null,n.JavaScript.ORDER_NONE]}[l.getFieldValue("OP")],h=u[0],_=n.JavaScript.valueToCode(l,"A",u=u[1])||"0";return l=n.JavaScript.valueToCode(l,"B",u)||"0",h?[_+h+l,u]:["Math.pow("+_+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_single=function(l){var u=l.getFieldValue("OP");if("NEG"==u)return"-"==(l=n.JavaScript.valueToCode(l,"NUM",n.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(l=" "+l),["-"+l,n.JavaScript.ORDER_UNARY_NEGATION];switch(l="SIN"==u||"COS"==u||"TAN"==u?n.JavaScript.valueToCode(l,"NUM",n.JavaScript.ORDER_DIVISION)||"0":n.JavaScript.valueToCode(l,"NUM",n.JavaScript.ORDER_NONE)||"0",u){case"ABS":var h="Math.abs("+l+")";break;case"ROOT":h="Math.sqrt("+l+")";break;case"LN":h="Math.log("+l+")";break;case"EXP":h="Math.exp("+l+")";break;case"POW10":h="Math.pow(10,"+l+")";break;case"ROUND":h="Math.round("+l+")";break;case"ROUNDUP":h="Math.ceil("+l+")";break;case"ROUNDDOWN":h="Math.floor("+l+")";break;case"SIN":h="Math.sin("+l+" / 180 * Math.PI)";break;case"COS":h="Math.cos("+l+" / 180 * Math.PI)";break;case"TAN":h="Math.tan("+l+" / 180 * Math.PI)"}if(h)return[h,n.JavaScript.ORDER_FUNCTION_CALL];switch(u){case"LOG10":h="Math.log("+l+") / Math.log(10)";break;case"ASIN":h="Math.asin("+l+") / Math.PI * 180";break;case"ACOS":h="Math.acos("+l+") / Math.PI * 180";break;case"ATAN":h="Math.atan("+l+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+u)}return[h,n.JavaScript.ORDER_DIVISION]},n.JavaScript.math_constant=function(l){return{PI:["Math.PI",n.JavaScript.ORDER_MEMBER],E:["Math.E",n.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",n.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",n.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",n.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",n.JavaScript.ORDER_ATOMIC]}[l.getFieldValue("CONSTANT")]},n.JavaScript.math_number_property=function(l){var u=n.JavaScript.valueToCode(l,"NUMBER_TO_CHECK",n.JavaScript.ORDER_MODULUS)||"0",h=l.getFieldValue("PROPERTY");if("PRIME"==h)return[n.JavaScript.provideFunction_("mathIsPrime",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+u+")",n.JavaScript.ORDER_FUNCTION_CALL];switch(h){case"EVEN":var _=u+" % 2 == 0";break;case"ODD":_=u+" % 2 == 1";break;case"WHOLE":_=u+" % 1 == 0";break;case"POSITIVE":_=u+" > 0";break;case"NEGATIVE":_=u+" < 0";break;case"DIVISIBLE_BY":_=u+" % "+(l=n.JavaScript.valueToCode(l,"DIVISOR",n.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[_,n.JavaScript.ORDER_EQUALITY]},n.JavaScript.math_change=function(l){var u=n.JavaScript.valueToCode(l,"DELTA",n.JavaScript.ORDER_ADDITION)||"0";return(l=n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME))+" = (typeof "+l+" == 'number' ? "+l+" : 0) + "+u+";\n"},n.JavaScript.math_round=n.JavaScript.math_single,n.JavaScript.math_trig=n.JavaScript.math_single,n.JavaScript.math_on_list=function(l){var u=l.getFieldValue("OP");switch(u){case"SUM":l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_MEMBER)||"[]",l+=".reduce(function(x, y) {return x + y;})";break;case"MIN":l="Math.min.apply(null, "+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":l="Math.max.apply(null, "+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":l=(u=n.JavaScript.provideFunction_("mathMean",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":l=(u=n.JavaScript.provideFunction_("mathMedian",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":l=(u=n.JavaScript.provideFunction_("mathModes",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":l=(u=n.JavaScript.provideFunction_("mathStandardDeviation",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":l=(u=n.JavaScript.provideFunction_("mathRandomList",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+u)}return[l,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_modulo=function(l){return[(n.JavaScript.valueToCode(l,"DIVIDEND",n.JavaScript.ORDER_MODULUS)||"0")+" % "+(l=n.JavaScript.valueToCode(l,"DIVISOR",n.JavaScript.ORDER_MODULUS)||"0"),n.JavaScript.ORDER_MODULUS]},n.JavaScript.math_constrain=function(l){return["Math.min(Math.max("+(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_NONE)||"0")+", "+(n.JavaScript.valueToCode(l,"LOW",n.JavaScript.ORDER_NONE)||"0")+"), "+(l=n.JavaScript.valueToCode(l,"HIGH",n.JavaScript.ORDER_NONE)||"Infinity")+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_random_int=function(l){var u=n.JavaScript.valueToCode(l,"FROM",n.JavaScript.ORDER_NONE)||"0";return l=n.JavaScript.valueToCode(l,"TO",n.JavaScript.ORDER_NONE)||"0",[n.JavaScript.provideFunction_("mathRandomInt",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+u+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_random_float=function(l){return["Math.random()",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_atan2=function(l){var u=n.JavaScript.valueToCode(l,"X",n.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(n.JavaScript.valueToCode(l,"Y",n.JavaScript.ORDER_NONE)||"0")+", "+u+") / Math.PI * 180",n.JavaScript.ORDER_DIVISION]},n.JavaScript.procedures={},n.JavaScript.procedures_defreturn=function(l){var u=n.JavaScript.nameDB_.getName(l.getFieldValue("NAME"),n.PROCEDURE_CATEGORY_NAME),h="";n.JavaScript.STATEMENT_PREFIX&&(h+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,l)),n.JavaScript.STATEMENT_SUFFIX&&(h+=n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l)),h&&(h=n.JavaScript.prefixLines(h,n.JavaScript.INDENT));var _="";n.JavaScript.INFINITE_LOOP_TRAP&&(_=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.INFINITE_LOOP_TRAP,l),n.JavaScript.INDENT));var b=n.JavaScript.statementToCode(l,"STACK"),M=n.JavaScript.valueToCode(l,"RETURN",n.JavaScript.ORDER_NONE)||"",k="";b&&M&&(k=h),M&&(M=n.JavaScript.INDENT+"return "+M+";\n");for(var H=[],U=l.getVars(),V=0;V<U.length;V++)H[V]=n.JavaScript.nameDB_.getName(U[V],n.VARIABLE_CATEGORY_NAME);return h="function "+u+"("+H.join(", ")+") {\n"+h+_+b+k+M+"}",h=n.JavaScript.scrub_(l,h),n.JavaScript.definitions_["%"+u]=h,null},n.JavaScript.procedures_defnoreturn=n.JavaScript.procedures_defreturn,n.JavaScript.procedures_callreturn=function(l){for(var u=n.JavaScript.nameDB_.getName(l.getFieldValue("NAME"),n.PROCEDURE_CATEGORY_NAME),h=[],_=l.getVars(),b=0;b<_.length;b++)h[b]=n.JavaScript.valueToCode(l,"ARG"+b,n.JavaScript.ORDER_NONE)||"null";return[u+"("+h.join(", ")+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.procedures_callnoreturn=function(l){return n.JavaScript.procedures_callreturn(l)[0]+";\n"},n.JavaScript.procedures_ifreturn=function(l){var u="if ("+(n.JavaScript.valueToCode(l,"CONDITION",n.JavaScript.ORDER_NONE)||"false")+") {\n";return n.JavaScript.STATEMENT_SUFFIX&&(u+=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l),n.JavaScript.INDENT)),l.hasReturnValue_?(l=n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_NONE)||"null",u+=n.JavaScript.INDENT+"return "+l+";\n"):u+=n.JavaScript.INDENT+"return;\n",u+"}\n"},n.JavaScript.texts={},n.JavaScript.text=function(l){return[n.JavaScript.quote_(l.getFieldValue("TEXT")),n.JavaScript.ORDER_ATOMIC]},n.JavaScript.text_multiline=function(l){var u=-1!=(l=n.JavaScript.multiline_quote_(l.getFieldValue("TEXT"))).indexOf("+")?n.JavaScript.ORDER_ADDITION:n.JavaScript.ORDER_ATOMIC;return[l,u]},n.JavaScript.text.forceString_=function(l){return n.JavaScript.text.forceString_.strRegExp.test(l)?[l,n.JavaScript.ORDER_ATOMIC]:["String("+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,n.JavaScript.text_join=function(l){switch(l.itemCount_){case 0:return["''",n.JavaScript.ORDER_ATOMIC];case 1:return l=n.JavaScript.valueToCode(l,"ADD0",n.JavaScript.ORDER_NONE)||"''",n.JavaScript.text.forceString_(l);case 2:var u=n.JavaScript.valueToCode(l,"ADD0",n.JavaScript.ORDER_NONE)||"''";return l=n.JavaScript.valueToCode(l,"ADD1",n.JavaScript.ORDER_NONE)||"''",[l=n.JavaScript.text.forceString_(u)[0]+" + "+n.JavaScript.text.forceString_(l)[0],n.JavaScript.ORDER_ADDITION];default:u=Array(l.itemCount_);for(var h=0;h<l.itemCount_;h++)u[h]=n.JavaScript.valueToCode(l,"ADD"+h,n.JavaScript.ORDER_NONE)||"''";return[l="["+u.join(",")+"].join('')",n.JavaScript.ORDER_FUNCTION_CALL]}},n.JavaScript.text_append=function(l){var u=n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME);return l=n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''",u+" += "+n.JavaScript.text.forceString_(l)[0]+";\n"},n.JavaScript.text_length=function(l){return[(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"''")+".length",n.JavaScript.ORDER_MEMBER]},n.JavaScript.text_isEmpty=function(l){return["!"+(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"''")+".length",n.JavaScript.ORDER_LOGICAL_NOT]},n.JavaScript.text_indexOf=function(l){var u="FIRST"==l.getFieldValue("END")?"indexOf":"lastIndexOf",h=n.JavaScript.valueToCode(l,"FIND",n.JavaScript.ORDER_NONE)||"''";return u=(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"''")+"."+u+"("+h+")",l.workspace.options.oneBasedIndex?[u+" + 1",n.JavaScript.ORDER_ADDITION]:[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_charAt=function(l){var u=l.getFieldValue("WHERE")||"FROM_START",h=n.JavaScript.valueToCode(l,"VALUE","RANDOM"==u?n.JavaScript.ORDER_NONE:n.JavaScript.ORDER_MEMBER)||"''";switch(u){case"FIRST":return[h+".charAt(0)",n.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[h+".slice(-1)",n.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[h+".charAt("+(l=n.JavaScript.getAdjusted(l,"AT"))+")",n.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[h+".slice("+(l=n.JavaScript.getAdjusted(l,"AT",1,!0))+").charAt(0)",n.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[n.JavaScript.provideFunction_("textRandomLetter",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+h+")",n.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},n.JavaScript.text.getIndex_=function(l,u,h){return"FIRST"==u?"0":"FROM_END"==u?l+".length - 1 - "+h:"LAST"==u?l+".length - 1":h},n.JavaScript.text_getSubstring=function(l){var u=l.getFieldValue("WHERE1"),h=l.getFieldValue("WHERE2"),_="FROM_END"!=u&&"LAST"!=u&&"FROM_END"!=h&&"LAST"!=h,b=n.JavaScript.valueToCode(l,"STRING",_?n.JavaScript.ORDER_MEMBER:n.JavaScript.ORDER_NONE)||"''";if("FIRST"==u&&"LAST"==h)return[b,n.JavaScript.ORDER_NONE];if(b.match(/^'?\w+'?$/)||_){switch(u){case"FROM_START":_=n.JavaScript.getAdjusted(l,"AT1");break;case"FROM_END":_=b+".length - "+(_=n.JavaScript.getAdjusted(l,"AT1",1,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":_="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(h){case"FROM_START":l=n.JavaScript.getAdjusted(l,"AT2",1);break;case"FROM_END":l=b+".length - "+(l=n.JavaScript.getAdjusted(l,"AT2",0,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"LAST":l=b+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}u=b+".slice("+_+", "+l+")"}else{_=n.JavaScript.getAdjusted(l,"AT1"),l=n.JavaScript.getAdjusted(l,"AT2");var M=n.JavaScript.text.getIndex_,k={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};u=n.JavaScript.provideFunction_("subsequence"+k[u]+k[h],["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==u||"FROM_START"==u?", at1":"")+("FROM_END"==h||"FROM_START"==h?", at2":"")+") {","  var start = "+M("sequence",u,"at1")+";","  var end = "+M("sequence",h,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+b+("FROM_END"==u||"FROM_START"==u?", "+_:"")+("FROM_END"==h||"FROM_START"==h?", "+l:"")+")"}return[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_changeCase=function(l){var u={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[l.getFieldValue("CASE")];return l=n.JavaScript.valueToCode(l,"TEXT",u?n.JavaScript.ORDER_MEMBER:n.JavaScript.ORDER_NONE)||"''",[u?l+u:n.JavaScript.provideFunction_("textToTitleCase",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_trim=function(l){var u={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[l.getFieldValue("MODE")];return[(n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_MEMBER)||"''")+u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_print=function(l){return"window.alert("+(n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''")+");\n"},n.JavaScript.text_prompt_ext=function(l){var u="window.prompt("+(l.getField("TEXT")?n.JavaScript.quote_(l.getFieldValue("TEXT")):n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==l.getFieldValue("TYPE")&&(u="Number("+u+")"),[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_prompt=n.JavaScript.text_prompt_ext,n.JavaScript.text_count=function(l){var u=n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''";return l=n.JavaScript.valueToCode(l,"SUB",n.JavaScript.ORDER_NONE)||"''",[n.JavaScript.provideFunction_("textCount",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+u+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_replace=function(l){var u=n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''",h=n.JavaScript.valueToCode(l,"FROM",n.JavaScript.ORDER_NONE)||"''";return l=n.JavaScript.valueToCode(l,"TO",n.JavaScript.ORDER_NONE)||"''",[n.JavaScript.provideFunction_("textReplace",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+u+", "+h+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_reverse=function(l){return[(n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.variables={},n.JavaScript.variables_get=function(l){return[n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME),n.JavaScript.ORDER_ATOMIC]},n.JavaScript.variables_set=function(l){var u=n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_ASSIGNMENT)||"0";return n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME)+" = "+u+";\n"},n.JavaScript.variablesDynamic={},n.JavaScript.variables_get_dynamic=n.JavaScript.variables_get,n.JavaScript.variables_set_dynamic=n.JavaScript.variables_set,n.JavaScript}.apply(I,S))&&(T.exports=s)},79841:function(T,I,m){var S,s;S=[m(82215)],void 0!==(s=function(n){return(n={Msg:{}}).Msg.ADD_COMMENT="Add Comment",n.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",n.Msg.CHANGE_VALUE_TITLE="Change value:",n.Msg.CLEAN_UP="Clean up Blocks",n.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",n.Msg.COLLAPSE_ALL="Collapse Blocks",n.Msg.COLLAPSE_BLOCK="Collapse Block",n.Msg.COLOUR_BLEND_COLOUR1="colour 1",n.Msg.COLOUR_BLEND_COLOUR2="colour 2",n.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",n.Msg.COLOUR_BLEND_RATIO="ratio",n.Msg.COLOUR_BLEND_TITLE="blend",n.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",n.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",n.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",n.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",n.Msg.COLOUR_RANDOM_TITLE="random colour",n.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",n.Msg.COLOUR_RGB_BLUE="blue",n.Msg.COLOUR_RGB_GREEN="green",n.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",n.Msg.COLOUR_RGB_RED="red",n.Msg.COLOUR_RGB_TITLE="colour with",n.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",n.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",n.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",n.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",n.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",n.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",n.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",n.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",n.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",n.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",n.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",n.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",n.Msg.CONTROLS_IF_MSG_ELSE="else",n.Msg.CONTROLS_IF_MSG_ELSEIF="else if",n.Msg.CONTROLS_IF_MSG_IF="if",n.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",n.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",n.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",n.Msg.CONTROLS_REPEAT_INPUT_DO="do",n.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",n.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",n.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",n.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",n.Msg.DELETE_BLOCK="Delete Block",n.Msg.DELETE_VARIABLE="Delete the '%1' variable",n.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",n.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",n.Msg.DISABLE_BLOCK="Disable Block",n.Msg.DUPLICATE_BLOCK="Duplicate",n.Msg.DUPLICATE_COMMENT="Duplicate Comment",n.Msg.ENABLE_BLOCK="Enable Block",n.Msg.EXPAND_ALL="Expand Blocks",n.Msg.EXPAND_BLOCK="Expand Block",n.Msg.EXTERNAL_INPUTS="External Inputs",n.Msg.HELP="Help",n.Msg.INLINE_INPUTS="Inline Inputs",n.Msg.IOS_CANCEL="Cancel",n.Msg.IOS_ERROR="Error",n.Msg.IOS_OK="OK",n.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",n.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",n.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",n.Msg.IOS_PROCEDURES_INPUTS="INPUTS",n.Msg.IOS_VARIABLES_ADD_BUTTON="Add",n.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",n.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",n.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",n.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",n.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",n.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",n.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",n.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",n.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",n.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",n.Msg.LISTS_GET_INDEX_FIRST="first",n.Msg.LISTS_GET_INDEX_FROM_END="# from end",n.Msg.LISTS_GET_INDEX_FROM_START="#",n.Msg.LISTS_GET_INDEX_GET="get",n.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",n.Msg.LISTS_GET_INDEX_LAST="last",n.Msg.LISTS_GET_INDEX_RANDOM="random",n.Msg.LISTS_GET_INDEX_REMOVE="remove",n.Msg.LISTS_GET_INDEX_TAIL="",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",n.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",n.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",n.Msg.LISTS_GET_SUBLIST_END_LAST="to last",n.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",n.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",n.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",n.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",n.Msg.LISTS_GET_SUBLIST_TAIL="",n.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",n.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",n.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",n.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",n.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",n.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",n.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",n.Msg.LISTS_INLIST="in list",n.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",n.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",n.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",n.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",n.Msg.LISTS_LENGTH_TITLE="length of %1",n.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",n.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",n.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",n.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",n.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",n.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",n.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",n.Msg.LISTS_SET_INDEX_INPUT_TO="as",n.Msg.LISTS_SET_INDEX_INSERT="insert at",n.Msg.LISTS_SET_INDEX_SET="set",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",n.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",n.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",n.Msg.LISTS_SORT_ORDER_DESCENDING="descending",n.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",n.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",n.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",n.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",n.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",n.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",n.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",n.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",n.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",n.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",n.Msg.LOGIC_BOOLEAN_FALSE="false",n.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",n.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",n.Msg.LOGIC_BOOLEAN_TRUE="true",n.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",n.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",n.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",n.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",n.Msg.LOGIC_NEGATE_TITLE="not %1",n.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",n.Msg.LOGIC_NULL="null",n.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",n.Msg.LOGIC_NULL_TOOLTIP="Returns null.",n.Msg.LOGIC_OPERATION_AND="and",n.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",n.Msg.LOGIC_OPERATION_OR="or",n.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",n.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",n.Msg.LOGIC_TERNARY_CONDITION="test",n.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",n.Msg.LOGIC_TERNARY_IF_FALSE="if false",n.Msg.LOGIC_TERNARY_IF_TRUE="if true",n.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",n.Msg.MATH_ADDITION_SYMBOL="+",n.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",n.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",n.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",n.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",n.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",n.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",n.Msg.MATH_CHANGE_TITLE="change %1 by %2",n.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",n.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",n.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",n.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",n.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",n.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",n.Msg.MATH_DIVISION_SYMBOL="\xf7",n.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",n.Msg.MATH_IS_EVEN="is even",n.Msg.MATH_IS_NEGATIVE="is negative",n.Msg.MATH_IS_ODD="is odd",n.Msg.MATH_IS_POSITIVE="is positive",n.Msg.MATH_IS_PRIME="is prime",n.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",n.Msg.MATH_IS_WHOLE="is whole",n.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",n.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",n.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",n.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",n.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",n.Msg.MATH_NUMBER_TOOLTIP="A number.",n.Msg.MATH_ONLIST_HELPURL="",n.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",n.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",n.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",n.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",n.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",n.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",n.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",n.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",n.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",n.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",n.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",n.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",n.Msg.MATH_POWER_SYMBOL="^",n.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",n.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",n.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",n.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",n.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",n.Msg.MATH_ROUND_OPERATOR_ROUND="round",n.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",n.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",n.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",n.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",n.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",n.Msg.MATH_SINGLE_OP_ROOT="square root",n.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",n.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",n.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",n.Msg.MATH_SUBTRACTION_SYMBOL="-",n.Msg.MATH_TRIG_ACOS="acos",n.Msg.MATH_TRIG_ASIN="asin",n.Msg.MATH_TRIG_ATAN="atan",n.Msg.MATH_TRIG_COS="cos",n.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",n.Msg.MATH_TRIG_SIN="sin",n.Msg.MATH_TRIG_TAN="tan",n.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",n.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",n.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",n.Msg.NEW_NUMBER_VARIABLE="Create number variable...",n.Msg.NEW_STRING_VARIABLE="Create string variable...",n.Msg.NEW_VARIABLE="Create variable...",n.Msg.NEW_VARIABLE_TITLE="New variable name:",n.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",n.Msg.ORDINAL_NUMBER_SUFFIX="",n.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",n.Msg.PROCEDURES_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",n.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",n.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CREATE_DO="Create '%1'",n.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",n.Msg.PROCEDURES_DEFNORETURN_DO="",n.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",n.Msg.PROCEDURES_DEFNORETURN_TITLE="to",n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",n.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFRETURN_RETURN="return",n.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",n.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",n.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",n.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",n.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",n.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",n.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",n.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",n.Msg.REDO="Redo",n.Msg.REMOVE_COMMENT="Remove Comment",n.Msg.RENAME_VARIABLE="Rename variable...",n.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",n.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_APPEND_TITLE="to %1 append text %2",n.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",n.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",n.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",n.Msg.TEXT_CHARAT_FIRST="get first letter",n.Msg.TEXT_CHARAT_FROM_END="get letter # from end",n.Msg.TEXT_CHARAT_FROM_START="get letter #",n.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",n.Msg.TEXT_CHARAT_LAST="get last letter",n.Msg.TEXT_CHARAT_RANDOM="get random letter",n.Msg.TEXT_CHARAT_TAIL="",n.Msg.TEXT_CHARAT_TITLE="in text %1 %2",n.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",n.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",n.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",n.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",n.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",n.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",n.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",n.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",n.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",n.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",n.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",n.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",n.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",n.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",n.Msg.TEXT_GET_SUBSTRING_TAIL="",n.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",n.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",n.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",n.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",n.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",n.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",n.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",n.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",n.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",n.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",n.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",n.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",n.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_LENGTH_TITLE="length of %1",n.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",n.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",n.Msg.TEXT_PRINT_TITLE="print %1",n.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",n.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",n.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",n.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",n.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",n.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",n.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",n.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",n.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",n.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",n.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",n.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",n.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",n.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",n.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",n.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",n.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",n.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",n.Msg.TODAY="Today",n.Msg.UNDO="Undo",n.Msg.UNNAMED_KEY="unnamed",n.Msg.VARIABLES_DEFAULT_NAME="item",n.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",n.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",n.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",n.Msg.VARIABLES_SET="set %1 to %2",n.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",n.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",n.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",n.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",n.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",n.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",n.Msg.CONTROLS_FOREACH_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_FOR_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=n.Msg.CONTROLS_IF_MSG_ELSEIF,n.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=n.Msg.CONTROLS_IF_MSG_ELSE,n.Msg.CONTROLS_IF_IF_TITLE_IF=n.Msg.CONTROLS_IF_MSG_IF,n.Msg.CONTROLS_IF_MSG_THEN=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.LISTS_CREATE_WITH_ITEM_TITLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.LISTS_GET_INDEX_HELPURL=n.Msg.LISTS_INDEX_OF_HELPURL,n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.MATH_CHANGE_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.PROCEDURES_DEFRETURN_COMMENT=n.Msg.PROCEDURES_DEFNORETURN_COMMENT,n.Msg.PROCEDURES_DEFRETURN_DO=n.Msg.PROCEDURES_DEFNORETURN_DO,n.Msg.PROCEDURES_DEFRETURN_PROCEDURE=n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,n.Msg.PROCEDURES_DEFRETURN_TITLE=n.Msg.PROCEDURES_DEFNORETURN_TITLE,n.Msg.TEXT_APPEND_VARIABLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.MATH_HUE="230",n.Msg.LOOPS_HUE="120",n.Msg.LISTS_HUE="260",n.Msg.LOGIC_HUE="210",n.Msg.VARIABLES_HUE="330",n.Msg.TEXTS_HUE="160",n.Msg.PROCEDURES_HUE="290",n.Msg.COLOUR_HUE="20",n.Msg.VARIABLES_DYNAMIC_HUE="310",n.Msg}.apply(I,S))&&(T.exports=s)},97953:(T,I,m)=>{"use strict";function y(r){return"function"==typeof r}function S(r){const e=r(o=>{Error.call(o),o.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const s=S(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((o,a)=>`${a+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function n(r,t){if(r){const e=r.indexOf(t);0<=e&&r.splice(e,1)}}class l{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const c of e)c.remove(this);else e.remove(this);const{initialTeardown:o}=this;if(y(o))try{o()}catch(c){t=c instanceof s?c.errors:[c]}const{_teardowns:a}=this;if(a){this._teardowns=null;for(const c of a)try{_(c)}catch(d){t=null!=t?t:[],d instanceof s?t=[...t,...d.errors]:t.push(d)}}if(t)throw new s(t)}}add(t){var e;if(t&&t!==this)if(this.closed)_(t);else{if(t instanceof l){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&n(e,t)}remove(t){const{_teardowns:e}=this;e&&n(e,t),t instanceof l&&t._removeParent(this)}}l.EMPTY=(()=>{const r=new l;return r.closed=!0,r})();const u=l.EMPTY;function h(r){return r instanceof l||r&&"closed"in r&&y(r.remove)&&y(r.add)&&y(r.unsubscribe)}function _(r){y(r)?r():r.unsubscribe()}const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},M={setTimeout(...r){const{delegate:t}=M;return((null==t?void 0:t.setTimeout)||setTimeout)(...r)},clearTimeout(r){const{delegate:t}=M;return((null==t?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function k(r){M.setTimeout(()=>{const{onUnhandledError:t}=b;if(!t)throw r;t(r)})}function H(){}const U=X("C",void 0,void 0);function X(r,t,e){return{kind:r,value:t,error:e}}let j=null;function oe(r){if(b.useDeprecatedSynchronousErrorHandling){const t=!j;if(t&&(j={errorThrown:!1,error:null}),r(),t){const{errorThrown:e,error:o}=j;if(j=null,e)throw o}}else r()}class se extends l{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,h(t)&&t.add(this)):this.destination=P}static create(t,e,o){return new Q(t,e,o)}next(t){this.isStopped?Y(X("N",t,void 0),this):this._next(t)}error(t){this.isStopped?Y(X("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Y(U,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Q extends se{constructor(t,e,o){let a;if(super(),y(t))a=t;else if(t){let c;({next:a,error:e,complete:o}=t),this&&b.useDeprecatedNextContext?(c=Object.create(t),c.unsubscribe=()=>this.unsubscribe()):c=t,a=null==a?void 0:a.bind(c),e=null==e?void 0:e.bind(c),o=null==o?void 0:o.bind(c)}this.destination={next:a?ce(a):H,error:ce(null!=e?e:$),complete:o?ce(o):H}}}function ce(r,t){return(...e)=>{try{r(...e)}catch(o){b.useDeprecatedSynchronousErrorHandling?function(r){b.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=r)}(o):k(o)}}}function $(r){throw r}function Y(r,t){const{onStoppedNotification:e}=b;e&&M.setTimeout(()=>e(r,t))}const P={closed:!0,next:H,error:$,complete:H},ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(r){return r}let ie=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){const o=new r;return o.source=this,o.operator=e,o}subscribe(e,o,a){const c=function(r){return r&&r instanceof se||function(r){return r&&y(r.next)&&y(r.error)&&y(r.complete)}(r)&&h(r)}(e)?e:new Q(e,o,a);return oe(()=>{const{operator:d,source:p}=this;c.add(d?d.call(c,p):p?this._subscribe(c):this._trySubscribe(c))}),c}_trySubscribe(e){try{return this._subscribe(e)}catch(o){e.error(o)}}forEach(e,o){return new(o=be(o))((a,c)=>{let d;d=this.subscribe(p=>{try{e(p)}catch(f){c(f),null==d||d.unsubscribe()}},c,a)})}_subscribe(e){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(e)}[ae](){return this}pipe(...e){return function(r){return 0===r.length?W:1===r.length?r[0]:function(e){return r.reduce((o,a)=>a(o),e)}}(e)(this)}toPromise(e){return new(e=be(e))((o,a)=>{let c;this.subscribe(d=>c=d,d=>a(d),()=>o(c))})}}return r.create=t=>new r(t),r})();function be(r){var t;return null!==(t=null!=r?r:b.Promise)&&void 0!==t?t:Promise}const Se=S(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ve=(()=>{class r extends ie{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const o=new me(this,this);return o.operator=e,o}_throwIfClosed(){if(this.closed)throw new Se}next(e){oe(()=>{if(this._throwIfClosed(),!this.isStopped){const o=this.observers.slice();for(const a of o)a.next(e)}})}error(e){oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:o}=this;for(;o.length;)o.shift().error(e)}})}complete(){oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:o,isStopped:a,observers:c}=this;return o||a?u:(c.push(e),new l(()=>n(c,e)))}_checkFinalizedStatuses(e){const{hasError:o,thrownError:a,isStopped:c}=this;o?e.error(a):c&&e.complete()}asObservable(){const e=new ie;return e.source=this,e}}return r.create=(t,e)=>new me(t,e),r})();class me extends ve{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===o||o.call(e,t)}error(t){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===o||o.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,o;return null!==(o=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==o?o:u}}function Ie(r){return y(null==r?void 0:r.lift)}function De(r){return t=>{if(Ie(t))return t.lift(function(e){try{return r(e,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}class xe extends se{constructor(t,e,o,a,c){super(t),this.onFinalize=c,this._next=e?function(d){try{e(d)}catch(p){t.error(p)}}:super._next,this._error=a?function(d){try{a(d)}catch(p){t.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(d){t.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function Re(r,t){return De((e,o)=>{let a=0;e.subscribe(new xe(o,c=>{o.next(r.call(t,c,a++))}))})}function sn(r){return this instanceof sn?(this.v=r,this):new sn(r)}function Cn(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,o=e.apply(r,t||[]),c=[];return a={},d("next"),d("throw"),d("return"),a[Symbol.asyncIterator]=function(){return this},a;function d(x){o[x]&&(a[x]=function(N){return new Promise(function(B,Z){c.push([x,N,B,Z])>1||p(x,N)})})}function p(x,N){try{!function(x){x.value instanceof sn?Promise.resolve(x.value.v).then(v,E):D(c[0][2],x)}(o[x](N))}catch(B){D(c[0][3],B)}}function v(x){p("next",x)}function E(x){p("throw",x)}function D(x,N){x(N),c.shift(),c.length&&p(c[0][0],c[0][1])}}function Ee(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=r[Symbol.asyncIterator];return t?t.call(r):(r=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(c){e[c]=r[c]&&function(d){return new Promise(function(p,f){!function(c,d,p,f){Promise.resolve(f).then(function(v){c({value:v,done:p})},d)}(p,f,(d=r[c](d)).done,d.value)})}}}const qt=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function Je(r){return y(null==r?void 0:r.then)}function qe(r){return y(r[ae])}function Me(r){return Symbol.asyncIterator&&y(null==r?void 0:r[Symbol.asyncIterator])}function Ge(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ce="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Ue(r){return y(null==r?void 0:r[Ce])}function Ze(r){return Cn(this,arguments,function*(){const e=r.getReader();try{for(;;){const{value:o,done:a}=yield sn(e.read());if(a)return yield sn(void 0);yield yield sn(o)}}finally{e.releaseLock()}})}function gi(r){return y(null==r?void 0:r.getReader)}function et(r){if(r instanceof ie)return r;if(null!=r){if(qe(r))return function(r){return new ie(t=>{const e=r[ae]();if(y(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(qt(r))return function(r){return new ie(t=>{for(let e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}(r);if(Je(r))return function(r){return new ie(t=>{r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,k)})}(r);if(Me(r))return nn(r);if(Ue(r))return function(r){return new ie(t=>{for(const e of r)if(t.next(e),t.closed)return;t.complete()})}(r);if(gi(r))return function(r){return nn(Ze(r))}(r)}throw Ge(r)}function nn(r){return new ie(t=>{(function(r,t){var e,o,a,c;return function(r,t,e,o){return new(e||(e=Promise))(function(c,d){function p(E){try{v(o.next(E))}catch(D){d(D)}}function f(E){try{v(o.throw(E))}catch(D){d(D)}}function v(E){E.done?c(E.value):function(c){return c instanceof e?c:new e(function(d){d(c)})}(E.value).then(p,f)}v((o=o.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Ee(r);!(o=yield e.next()).done;)if(t.next(o.value),t.closed)return}catch(d){a={error:d}}finally{try{o&&!o.done&&(c=e.return)&&(yield c.call(e))}finally{if(a)throw a.error}}t.complete()})})(r,t).catch(e=>t.error(e))})}function tr(r,t,e,o=0,a=!1){const c=t.schedule(function(){e(),a?r.add(this.schedule(null,o)):this.unsubscribe()},o);if(r.add(c),!a)return c}function an(r,t,e=1/0){return y(t)?an((o,a)=>Re((c,d)=>t(o,c,a,d))(et(r(o,a))),e):("number"==typeof t&&(e=t),De((o,a)=>function(r,t,e,o,a,c,d,p){const f=[];let v=0,E=0,D=!1;const x=()=>{D&&!f.length&&!v&&t.complete()},N=Z=>v<o?B(Z):f.push(Z),B=Z=>{v++;let z=!1;et(e(Z,E++)).subscribe(new xe(t,de=>{t.next(de)},()=>{z=!0},void 0,()=>{if(z)try{for(v--;f.length&&v<o;){const de=f.shift();B(de)}x()}catch(de){t.error(de)}}))};return r.subscribe(new xe(t,N,()=>{D=!0,x()})),()=>{}}(o,a,r,e)))}function Fo(r=1/0){return an(W,r)}const _o=new ie(r=>r.complete());function bd(r){return r&&y(r.schedule)}function yd(r){return r[r.length-1]}function Fp(r){return y(yd(r))?r.pop():void 0}function wl(r){return bd(yd(r))?r.pop():void 0}function Vp(r,t=0){return De((e,o)=>{e.subscribe(new xe(o,a=>tr(o,r,()=>o.next(a),t),()=>tr(o,r,()=>o.complete(),t),a=>tr(o,r,()=>o.error(a),t)))})}function Hp(r,t=0){return De((e,o)=>{o.add(r.schedule(()=>e.subscribe(o),t))})}function Gp(r,t){if(!r)throw new Error("Iterable cannot be null");return new ie(e=>{tr(e,t,()=>{const o=r[Symbol.asyncIterator]();tr(e,t,()=>{o.next().then(a=>{a.done?e.complete():e.next(a.value)})},0,!0)})})}function Ln(r,t){return t?function(r,t){if(null!=r){if(qe(r))return function(r,t){return et(r).pipe(Hp(t),Vp(t))}(r,t);if(qt(r))return function(r,t){return new ie(e=>{let o=0;return t.schedule(function(){o===r.length?e.complete():(e.next(r[o++]),e.closed||this.schedule())})})}(r,t);if(Je(r))return function(r,t){return et(r).pipe(Hp(t),Vp(t))}(r,t);if(Me(r))return Gp(r,t);if(Ue(r))return function(r,t){return new ie(e=>{let o;return tr(e,t,()=>{o=r[Ce](),tr(e,t,()=>{let a,c;try{({value:a,done:c}=o.next())}catch(d){return void e.error(d)}c?e.complete():e.next(a)},0,!0)}),()=>y(null==o?void 0:o.return)&&o.return()})}(r,t);if(gi(r))return function(r,t){return Gp(Ze(r),t)}(r,t)}throw Ge(r)}(r,t):et(r)}function gr(...r){const t=wl(r),e=function(r,t){return"number"==typeof yd(r)?r.pop():1/0}(r),o=r;return o.length?1===o.length?et(o[0]):Fo(e)(Ln(o,t)):_o}function hn(r){return r<=0?()=>_o:De((t,e)=>{let o=0;t.subscribe(new xe(e,a=>{++o<=r&&(e.next(a),r<=o&&e.complete())}))})}function Ed(r={}){const{connector:t=(()=>new ve),resetOnError:e=!0,resetOnComplete:o=!0,resetOnRefCountZero:a=!0}=r;return c=>{let d=null,p=null,f=null,v=0,E=!1,D=!1;const x=()=>{null==p||p.unsubscribe(),p=null},N=()=>{x(),d=f=null,E=D=!1},B=()=>{const Z=d;N(),null==Z||Z.unsubscribe()};return De((Z,z)=>{v++,!D&&!E&&x();const de=f=null!=f?f:t();z.add(()=>{v--,0===v&&!D&&!E&&(p=Cd(B,a))}),de.subscribe(z),d||(d=new Q({next:he=>de.next(he),error:he=>{D=!0,x(),p=Cd(N,e,he),de.error(he)},complete:()=>{E=!0,x(),p=Cd(N,o),de.complete()}}),Ln(Z).subscribe(d))})(c)}}function Cd(r,t,...e){return!0===t?(r(),null):!1===t?null:t(...e).pipe(hn(1)).subscribe(()=>r())}function Gi(r){for(let t in r)if(r[t]===Gi)return t;throw Error("Could not find renamed property on target object.")}function Td(r,t){for(const e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function li(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(li).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Sc(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const jp=Gi({__forward_ref__:Gi});function $t(r){return r.__forward_ref__=$t,r.toString=function(){return li(this())},r}function Tt(r){return wd(r)?r():r}function wd(r){return"function"==typeof r&&r.hasOwnProperty(jp)&&r.__forward_ref__===$t}class Xs extends Error{constructor(t,e){super(function(r,t){return`${r?`NG0${r}: `:""}${t}`}(t,e)),this.code=t}}function jt(r){return"string"==typeof r?r:null==r?"":String(r)}function ar(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():jt(r)}function Mc(r,t){const e=t?` in ${t}`:"";throw new Xs("201",`No provider for ${ar(r)} found${e}`)}function Fr(r,t){null==r&&function(r,t,e,o){throw new Error(`ASSERTION ERROR: ${r}`+(null==o?"":` [Expected=> ${e} ${o} ${t} <=Actual]`))}(t,r,null,"!=")}function Ke(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function it(r){return{providers:r.providers||[],imports:r.imports||[]}}function io(r){return zp(r,Rc)||zp(r,Md)}function zp(r,t){return r.hasOwnProperty(t)?r[t]:null}function Xp(r){return r&&(r.hasOwnProperty(Ic)||r.hasOwnProperty(Kp))?r[Ic]:null}const Rc=Gi({\u0275prov:Gi}),Ic=Gi({\u0275inj:Gi}),Md=Gi({ngInjectableDef:Gi}),Kp=Gi({ngInjectorDef:Gi});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let Vo;function Br(r){const t=Vo;return Vo=r,t}function $p(r,t,e){const o=io(r);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:e&bt.Optional?null:void 0!==t?t:void Mc(li(r),"Injector")}function vs(r){return{toString:r}.toString()}var Vr=(()=>((Vr=Vr||{})[Vr.OnPush=0]="OnPush",Vr[Vr.Default=1]="Default",Vr))(),mr=(()=>{return(r=mr||(mr={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",mr;var r})();const Na="undefined"!=typeof globalThis&&globalThis,iv="undefined"!=typeof window&&window,Jp="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ii=Na||"undefined"!=typeof global&&global||iv||Jp,Js={},xi=[],Pa=Gi({\u0275cmp:Gi}),_n=Gi({\u0275dir:Gi}),La=Gi({\u0275pipe:Gi}),xc=Gi({\u0275mod:Gi}),Ho=Gi({\u0275fac:Gi}),Sl=Gi({__NG_ELEMENT_ID__:Gi});let rv=0;function Wt(r){return vs(()=>{const e={},o={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Vr.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||xi,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||mr.Emulated,id:"c",styles:r.styles||xi,_:null,setInput:null,schemas:r.schemas||null,tView:null},a=r.directives,c=r.features,d=r.pipes;return o.id+=rv++,o.inputs=Qs(r.inputs,e),o.outputs=Qs(r.outputs),c&&c.forEach(p=>p(o)),o.directiveDefs=a?()=>("function"==typeof a?a():a).map(Rd):null,o.pipeDefs=d?()=>("function"==typeof d?d():d).map(Qp):null,o})}function Rd(r){return lr(r)||function(r){return r[_n]||null}(r)}function Qp(r){return function(r){return r[La]||null}(r)}const Zp={};function ht(r){return vs(()=>{const t={type:r.type,bootstrap:r.bootstrap||xi,declarations:r.declarations||xi,imports:r.imports||xi,exports:r.exports||xi,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(Zp[r.id]=r.type),t})}function Qs(r,t){if(null==r)return Js;const e={};for(const o in r)if(r.hasOwnProperty(o)){let a=r[o],c=a;Array.isArray(a)&&(c=a[1],a=a[0]),e[a]=o,t&&(t[a]=c)}return e}const Ne=Wt;function _r(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function lr(r){return r[Pa]||null}function Xr(r,t){const e=r[xc]||null;if(!e&&!0===t)throw new Error(`Type ${li(r)} does not have '\u0275mod' property.`);return e}function vo(r){return Array.isArray(r)&&"object"==typeof r[1]}function oo(r){return Array.isArray(r)&&!0===r[1]}function Ad(r){return 0!=(8&r.flags)}function kc(r){return 2==(2&r.flags)}function Ts(r){return 1==(1&r.flags)}function so(r){return null!==r.template}function ef(r){return 0!=(512&r[2])}function ta(r,t){return r.hasOwnProperty(Ho)?r[Ho]:null}class kd{constructor(t,e,o){this.previousValue=t,this.currentValue=e,this.firstChange=o}isFirstChange(){return this.firstChange}}function ln(){return rf}function rf(r){return r.type.prototype.ngOnChanges&&(r.setInput=Uo),sf}function sf(){const r=Bc(this),t=null==r?void 0:r.current;if(t){const e=r.previous;if(e===Js)r.previous=t;else for(let o in t)e[o]=t[o];r.current=null,this.ngOnChanges(t)}}function Uo(r,t,e,o){const a=Bc(r)||function(r,t){return r[af]=t}(r,{previous:Js,current:null}),c=a.current||(a.current={}),d=a.previous,p=this.declaredInputs[e],f=d[p];c[p]=new kd(f&&f.currentValue,t,d===Js),r[o]=t}ln.ngInherit=!0;const af="__ngSimpleChanges__";function Bc(r){return r[af]||null}const lf="http://www.w3.org/2000/svg";let Pd;function vn(r){return!!r.listen}const uf={createRenderer:(r,t)=>void 0!==Pd?Pd:"undefined"!=typeof document?document:void 0};function On(r){for(;Array.isArray(r);)r=r[0];return r}function Vc(r,t){return On(t[r])}function Kr(r,t){return On(t[r.index])}function Hc(r,t){return r.data[t]}function Ha(r,t){return r[t]}function Mr(r,t){const e=t[r];return vo(e)?e:e[0]}function Il(r){return 4==(4&r[2])}function Uc(r){return 128==(128&r[2])}function ws(r,t){return null==t?null:r[t]}function df(r){r[18]=0}function Go(r,t){r[5]+=t;let e=r,o=r[3];for(;null!==o&&(1===t&&1===e[5]||-1===t&&0===e[5]);)o[5]+=t,e=o,o=o[3]}const Vt={lFrame:_f(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Gc(){return Vt.bindingsEnabled}function Ve(){return Vt.lFrame.lView}function Si(){return Vt.lFrame.tView}function jo(r){return Vt.lFrame.contextLView=r,r[8]}function wn(){let r=xl();for(;null!==r&&64===r.type;)r=r.parent;return r}function xl(){return Vt.lFrame.currentTNode}function yo(r,t){const e=Vt.lFrame;e.currentTNode=r,e.isParent=t}function Fd(){return Vt.lFrame.isParent}function jc(){Vt.lFrame.isParent=!1}function Ga(){return Vt.isInCheckNoChangesMode}function Al(r){Vt.isInCheckNoChangesMode=r}function vr(){const r=Vt.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}function Wo(){return Vt.lFrame.bindingIndex}function na(){return Vt.lFrame.bindingIndex++}function zo(r){const t=Vt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function Rv(r,t){const e=Vt.lFrame;e.bindingIndex=e.bindingRootIndex=r,Wc(t)}function Wc(r){Vt.lFrame.currentDirectiveIndex=r}function zc(r){const t=Vt.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}function gf(){return Vt.lFrame.currentQueryIndex}function Hd(r){Vt.lFrame.currentQueryIndex=r}function Iv(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Ss(r,t,e){if(e&bt.SkipSelf){let a=t,c=r;for(;!(a=a.parent,null!==a||e&bt.Host||(a=Iv(c),null===a||(c=c[15],10&a.type))););if(null===a)return!1;t=a,r=c}const o=Vt.lFrame=mf();return o.currentTNode=t,o.lView=r,!0}function Yc(r){const t=mf(),e=r[1];Vt.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function mf(){const r=Vt.lFrame,t=null===r?null:r.child;return null===t?_f(r):t}function _f(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function vf(){const r=Vt.lFrame;return Vt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Ol=vf;function ja(){const r=vf();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function pn(){return Vt.lFrame.selectedIndex}function Yo(r){Vt.lFrame.selectedIndex=r}function fn(){const r=Vt.lFrame;return Hc(r.tView,r.selectedIndex)}function kl(){Vt.lFrame.currentNamespace=lf}function Xo(r,t){for(let e=t.directiveStart,o=t.directiveEnd;e<o;e++){const c=r.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:p,ngAfterViewInit:f,ngAfterViewChecked:v,ngOnDestroy:E}=c;d&&(r.contentHooks||(r.contentHooks=[])).push(-e,d),p&&((r.contentHooks||(r.contentHooks=[])).push(e,p),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(e,p)),f&&(r.viewHooks||(r.viewHooks=[])).push(-e,f),v&&((r.viewHooks||(r.viewHooks=[])).push(e,v),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(e,v)),null!=E&&(r.destroyHooks||(r.destroyHooks=[])).push(e,E)}}function Xc(r,t,e){Ms(r,t,3,e)}function Ds(r,t,e,o){(3&r[2])===e&&Ms(r,t,e,o)}function Ko(r,t){let e=r[2];(3&e)===t&&(e&=2047,e+=1,r[2]=e)}function Ms(r,t,e,o){const c=null!=o?o:-1,d=t.length-1;let p=0;for(let f=void 0!==o?65535&r[18]:0;f<d;f++)if("number"==typeof t[f+1]){if(p=t[f],null!=o&&p>=o)break}else t[f]<0&&(r[18]+=65536),(p<c||-1==c)&&(Av(r,e,t,f),r[18]=(4294901760&r[18])+f+2),f++}function Av(r,t,e,o){const a=e[o]<0,c=e[o+1],p=r[a?-e[o]:e[o]];if(a){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{c.call(p)}finally{}}}else try{c.call(p)}finally{}}class Wa{constructor(t,e,o){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=o}}function Kc(r,t,e){const o=vn(r);let a=0;for(;a<e.length;){const c=e[a];if("number"==typeof c){if(0!==c)break;a++;const d=e[a++],p=e[a++],f=e[a++];o?r.setAttribute(t,p,f,d):t.setAttributeNS(d,p,f)}else{const d=c,p=e[++a];Ll(d)?o&&r.setProperty(t,d,p):o?r.setAttribute(t,d,p):t.setAttribute(d,p),a++}}return a}function $c(r){return 3===r||4===r||6===r}function Ll(r){return 64===r.charCodeAt(0)}function Jc(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let e=-1;for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?e=a:0===e||Nv(r,e,a,null,-1===e||2===e?t[++o]:null)}}return r}function Nv(r,t,e,o,a){let c=0,d=r.length;if(-1===t)d=-1;else for(;c<r.length;){const p=r[c++];if("number"==typeof p){if(p===t){d=-1;break}if(p>t){d=c-1;break}}}for(;c<r.length;){const p=r[c];if("number"==typeof p)break;if(p===e){if(null===o)return void(null!==a&&(r[c+1]=a));if(o===r[c+1])return void(r[c+2]=a)}c++,null!==o&&c++,null!==a&&c++}-1!==d&&(r.splice(d,0,t),c=d+1),r.splice(c++,0,e),null!==o&&r.splice(c++,0,o),null!==a&&r.splice(c++,0,a)}function yf(r){return-1!==r}function za(r){return 32767&r}function Ya(r,t){let e=function(r){return r>>16}(r),o=t;for(;e>0;)o=o[15],e--;return o}let Ni=!0;function Qc(r){const t=Ni;return Ni=r,t}let Fv=0;function Fl(r,t){const e=Xd(r,t);if(-1!==e)return e;const o=t[1];o.firstCreatePass&&(r.injectorIndex=t.length,Yd(o.data,r),Yd(t,null),Yd(o.blueprint,null));const a=qc(r,t),c=r.injectorIndex;if(yf(a)){const d=za(a),p=Ya(a,t),f=p[1].data;for(let v=0;v<8;v++)t[c+v]=p[d+v]|f[d+v]}return t[c+8]=a,c}function Yd(r,t){r.push(0,0,0,0,0,0,0,0,t)}function Xd(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function qc(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let e=0,o=null,a=t;for(;null!==a;){const c=a[1],d=c.type;if(o=2===d?c.declTNode:1===d?a[6]:null,null===o)return-1;if(e++,a=a[15],-1!==o.injectorIndex)return o.injectorIndex|e<<16}return-1}function Bl(r,t,e){!function(r,t,e){let o;"string"==typeof e?o=e.charCodeAt(0)||0:e.hasOwnProperty(Sl)&&(o=e[Sl]),null==o&&(o=e[Sl]=Fv++);const a=255&o;t.data[r+(a>>5)]|=1<<a}(r,t,e)}function eu(r,t,e){if(e&bt.Optional)return r;Mc(t,"NodeInjector")}function Cf(r,t,e,o){if(e&bt.Optional&&void 0===o&&(o=null),0==(e&(bt.Self|bt.Host))){const a=r[9],c=Br(void 0);try{return a?a.get(t,o,e&bt.Optional):$p(t,o,e&bt.Optional)}finally{Br(c)}}return eu(o,t,e)}function Tf(r,t,e,o=bt.Default,a){if(null!==r){const c=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(Sl)?r[Sl]:void 0;return"number"==typeof t?t>=0?255&t:Sf:t}(e);if("function"==typeof c){if(!Ss(t,r,o))return o&bt.Host?eu(a,e,o):Cf(t,e,o,a);try{const d=c(o);if(null!=d||o&bt.Optional)return d;Mc(e)}finally{Ol()}}else if("number"==typeof c){let d=null,p=Xd(r,t),f=-1,v=o&bt.Host?t[16][6]:null;for((-1===p||o&bt.SkipSelf)&&(f=-1===p?qc(r,t):t[p+8],-1!==f&&Df(o,!1)?(d=t[1],p=za(f),t=Ya(f,t)):p=-1);-1!==p;){const E=t[1];if($d(c,p,E.data)){const D=Vl(p,t,e,d,o,v);if(D!==wf)return D}f=t[p+8],-1!==f&&Df(o,t[1].data[p+8]===v)&&$d(c,p,t)?(d=E,p=za(f),t=Ya(f,t)):p=-1}}}return Cf(t,e,o,a)}const wf={};function Sf(){return new ra(wn(),Ve())}function Vl(r,t,e,o,a,c){const d=t[1],p=d.data[r+8],E=Hl(p,d,e,null==o?kc(p)&&Ni:o!=d&&0!=(3&p.type),a&bt.Host&&c===p);return null!==E?$r(t,d,E,p):wf}function Hl(r,t,e,o,a){const c=r.providerIndexes,d=t.data,p=1048575&c,f=r.directiveStart,E=c>>20,x=a?p+E:r.directiveEnd;for(let N=o?p:p+E;N<x;N++){const B=d[N];if(N<f&&e===B||N>=f&&B.type===e)return N}if(a){const N=d[f];if(N&&so(N)&&N.type===e)return f}return null}function $r(r,t,e,o){let a=r[e];const c=t.data;if(function(r){return r instanceof Wa}(a)){const d=a;d.resolving&&function(r,t){throw new Xs("200",`Circular dependency in DI detected for ${r}`)}(ar(c[e]));const p=Qc(d.canSeeViewProviders);d.resolving=!0;const f=d.injectImpl?Br(d.injectImpl):null;Ss(r,o,bt.Default);try{a=r[e]=d.factory(void 0,c,r,o),t.firstCreatePass&&e>=o.directiveStart&&function(r,t,e){const{ngOnChanges:o,ngOnInit:a,ngDoCheck:c}=t.type.prototype;if(o){const d=rf(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(r,d),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,d)}a&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-r,a),c&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r,c),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,c))}(e,c[e],t)}finally{null!==f&&Br(f),Qc(p),d.resolving=!1,Ol()}}return a}function $d(r,t,e){return!!(e[t+(r>>5)]&1<<r)}function Df(r,t){return!(r&bt.Self||r&bt.Host&&t)}class ra{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,o){return Tf(this._tNode,this._lView,t,o,e)}}function ci(r){return vs(()=>{const t=r.prototype.constructor,e=t[Ho]||tu(t),o=Object.prototype;let a=Object.getPrototypeOf(r.prototype).constructor;for(;a&&a!==o;){const c=a[Ho]||tu(a);if(c&&c!==e)return c;a=Object.getPrototypeOf(a)}return c=>new c})}function tu(r){return wd(r)?()=>{const t=tu(Tt(r));return t&&t()}:ta(r)}function Fn(r){return function(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const e=r.attrs;if(e){const o=e.length;let a=0;for(;a<o;){const c=e[a];if($c(c))break;if(0===c)a+=2;else if("number"==typeof c)for(a++;a<o&&"string"==typeof e[a];)a++;else{if(c===t)return e[a+1];a+=2}}}return null}(wn(),r)}const $o="__parameters__";function oa(r,t,e){return vs(()=>{const o=function(r){return function(...e){if(r){const o=r(...e);for(const a in o)this[a]=o[a]}}}(t);function a(...c){if(this instanceof a)return o.apply(this,c),this;const d=new a(...c);return p.annotation=d,p;function p(f,v,E){const D=f.hasOwnProperty($o)?f[$o]:Object.defineProperty(f,$o,{value:[]})[$o];for(;D.length<=E;)D.push(null);return(D[E]=D[E]||[]).push(d),f}}return e&&(a.prototype=Object.create(e.prototype)),a.prototype.ngMetadataName=r,a.annotationCls=a,a})}class Ae{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Ke({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Wv=new Ae("AnalyzeForEntryComponents");function Jr(r,t){void 0===t&&(t=r);for(let e=0;e<r.length;e++){let o=r[e];Array.isArray(o)?(t===r&&(t=r.slice(0,e)),Jr(o,t)):t!==r&&t.push(o)}return t}function lo(r,t){r.forEach(e=>Array.isArray(e)?lo(e,t):t(e))}function Ka(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function xs(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function Jo(r,t){const e=[];for(let o=0;o<r;o++)e.push(t);return e}function Rr(r,t,e){let o=$a(r,t);return o>=0?r[1|o]=e:(o=~o,function(r,t,e,o){let a=r.length;if(a==t)r.push(e,o);else if(1===a)r.push(o,r[0]),r[0]=e;else{for(a--,r.push(r[a-1],r[a]);a>t;)r[a]=r[a-2],a--;r[t]=e,r[t+1]=o}}(r,o,t,e)),o}function qd(r,t){const e=$a(r,t);if(e>=0)return r[1|e]}function $a(r,t){return function(r,t,e){let o=0,a=r.length>>e;for(;a!==o;){const c=o+(a-o>>1),d=r[c<<e];if(t===d)return c<<e;d>t?a=c:o=c+1}return~(a<<e)}(r,t,1)}const Qa={},iu="__NG_DI_FLAG__",Za="ngTempTokenPath",sa=/\n/gm,nu="__source",ru=Gi({provide:String,useValue:Gi});let qa;function aa(r){const t=qa;return qa=r,t}function sS(r,t=bt.Default){if(void 0===qa)throw new Error("inject() must be called from an injection context");return null===qa?$p(r,void 0,t):qa.get(r,t&bt.Optional?null:void 0,t)}function we(r,t=bt.Default){return(Vo||sS)(Tt(r),t)}const Wl=we;function la(r){const t=[];for(let e=0;e<r.length;e++){const o=Tt(r[e]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let a,c=bt.Default;for(let d=0;d<o.length;d++){const p=o[d],f=Lf(p);"number"==typeof f?-1===f?a=p.token:c|=f:a=p}t.push(we(a,c))}else t.push(we(o))}return t}function zl(r,t){return r[iu]=t,r.prototype[iu]=t,r}function Lf(r){return r[iu]}function ih(r,t,e,o){const a=r[Za];throw t[nu]&&a.unshift(t[nu]),r.message=function(r,t,e,o=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let a=li(t);if(Array.isArray(t))a=t.map(li).join(" -> ");else if("object"==typeof t){let c=[];for(let d in t)if(t.hasOwnProperty(d)){let p=t[d];c.push(d+":"+("string"==typeof p?JSON.stringify(p):li(p)))}a=`{${c.join(", ")}}`}return`${e}${o?"("+o+")":""}[${a}]: ${r.replace(sa,"\n  ")}`}("\n"+r.message,a,e,o),r.ngTokenPath=a,r[Za]=null,r}const el=zl(oa("Inject",r=>({token:r})),-1),cn=zl(oa("Optional"),8),Bn=zl(oa("SkipSelf"),4);let lu;function il(r){var t;return(null==(t=function(){if(void 0===lu&&(lu=null,Ii.trustedTypes))try{lu=Ii.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return lu}())?void 0:t.createHTML(r))||r}class As{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class cb extends As{getTypeName(){return"HTML"}}class ub extends As{getTypeName(){return"Style"}}class db extends As{getTypeName(){return"Script"}}class hb extends As{getTypeName(){return"URL"}}class pb extends As{getTypeName(){return"ResourceURL"}}function Ir(r){return r instanceof As?r.changingThisBreaksApplicationSecurity:r}function Co(r,t){const e=Gf(r);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function Gf(r){return r instanceof As&&r.getTypeName()||null}class _b{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(il(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class vb{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const o=this.inertDocument.createElement("body");e.appendChild(o)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=il(t),e;const o=this.inertDocument.createElement("body");return o.innerHTML=il(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(t){const e=t.attributes;for(let a=e.length-1;0<a;a--){const d=e.item(a).name;("xmlns:ns1"===d||0===d.indexOf("ns1:"))&&t.removeAttribute(d)}let o=t.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const yb=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Eb=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Kl(r){return(r=String(r)).match(yb)||r.match(Eb)?r:"unsafe:"+r}function C(r){const t={};for(const e of r.split(","))t[e]=!0;return t}function w(...r){const t={};for(const e of r)for(const o in e)e.hasOwnProperty(o)&&(t[o]=!0);return t}const R=C("area,br,col,hr,img,wbr"),O=C("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),F=C("rp,rt"),ne=w(R,w(O,C("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),w(F,C("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),w(F,O)),pe=C("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ge=C("srcset"),Oe=w(pe,ge,C("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),C("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),He=C("script,style,template");class We{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,o=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?o=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,o&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let a=this.checkClobberedElement(e,e.nextSibling);if(a){e=a;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ne.hasOwnProperty(e))return this.sanitizedSomething=!0,!He.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const o=t.attributes;for(let a=0;a<o.length;a++){const c=o.item(a),d=c.name,p=d.toLowerCase();if(!Oe.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let f=c.value;pe[p]&&(f=Kl(f)),ge[p]&&(r=f,f=(r=String(r)).split(",").map(t=>Kl(t.trim())).join(", ")),this.buf.push(" ",d,'="',_i(f),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ne.hasOwnProperty(e)&&!R.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(_i(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const at=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Be=/([^\#-~ |!])/g;function _i(r){return r.replace(/&/g,"&amp;").replace(at,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Be,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ni;function gn(r,t){let e=null;try{ni=ni||function(r){const t=new vb(r);return function(){try{return!!(new window.DOMParser).parseFromString(il(""),"text/html")}catch(r){return!1}}()?new _b(t):t}(r);let o=t?String(t):"";e=ni.getInertBodyElement(o);let a=5,c=o;do{if(0===a)throw new Error("Failed to sanitize html because the input is unstable");a--,o=c,c=e.innerHTML,e=ni.getInertBodyElement(o)}while(o!==c);return il((new We).sanitizeChildren(Ki(e)||e))}finally{if(e){const o=Ki(e)||e;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function Ki(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Pt=(()=>((Pt=Pt||{})[Pt.NONE=0]="NONE",Pt[Pt.HTML=1]="HTML",Pt[Pt.STYLE=2]="STYLE",Pt[Pt.SCRIPT=3]="SCRIPT",Pt[Pt.URL=4]="URL",Pt[Pt.RESOURCE_URL=5]="RESOURCE_URL",Pt))();function Dn(r){const t=function(){const r=Ve();return r&&r[12]}();return t?t.sanitize(Pt.URL,r)||"":Co(r,"URL")?Ir(r):Kl(jt(r))}const uS="__ngContext__";function Ar(r,t){r[uS]=t}function Tb(r){const t=function(r){return r[uS]||null}(r);return t?Array.isArray(t)?t:t.lView:null}function Yf(r){return r.ngOriginalError}function iP(r,...t){r.error(...t)}class ks{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),o=this._findContext(t),a=(r=t)&&r.ngErrorLogger||iP;var r;a(this._console,"ERROR",t),e&&a(this._console,"ORIGINAL ERROR",e),o&&a(this._console,"ERROR CONTEXT",o)}_findContext(t){return t?t.ngDebugContext||this._findContext(Yf(t)):null}_findOriginalError(t){let e=t&&Yf(t);for(;e&&Yf(e);)e=Yf(e);return e||null}}const bS=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ii))();function Ns(r){return r instanceof Function?r():r}var co=(()=>((co=co||{})[co.Important=1]="Important",co[co.DashCase=2]="DashCase",co))();function Db(r,t){return undefined(r,t)}function uh(r){const t=r[3];return oo(t)?t[3]:t}function Mb(r){return wS(r[13])}function Rb(r){return wS(r[4])}function wS(r){for(;null!==r&&!oo(r);)r=r[4];return r}function hu(r,t,e,o,a){if(null!=o){let c,d=!1;oo(o)?c=o:vo(o)&&(d=!0,o=o[0]);const p=On(o);0===r&&null!==e?null==a?xS(t,e,p):Jl(t,e,p,a||null,!0):1===r&&null!==e?Jl(t,e,p,a||null,!0):2===r?function(r,t,e){const o=Kf(r,t);o&&function(r,t,e,o){vn(r)?r.removeChild(t,e,o):t.removeChild(e)}(r,o,t,e)}(t,p,d):3===r&&t.destroyNode(p),null!=c&&function(r,t,e,o,a){const c=e[7];c!==On(e)&&hu(t,r,o,c,a);for(let p=10;p<e.length;p++){const f=e[p];dh(f[1],f,r,t,o,c)}}(t,r,c,e,a)}}function xb(r,t,e){return vn(r)?r.createElement(t,e):null===e?r.createElement(t):r.createElementNS(e,t)}function DS(r,t){const e=r[9],o=e.indexOf(t),a=t[3];1024&t[2]&&(t[2]&=-1025,Go(a,-1)),e.splice(o,1)}function Ab(r,t){if(r.length<=10)return;const e=10+t,o=r[e];if(o){const a=o[17];null!==a&&a!==r&&DS(a,o),t>0&&(r[e-1][4]=o[4]);const c=xs(r,10+t);!function(r,t){dh(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(o[1],o);const d=c[19];null!==d&&d.detachView(c[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function MS(r,t){if(!(256&t[2])){const e=t[11];vn(e)&&e.destroyNode&&dh(r,t,e,3,null,null),function(r){let t=r[13];if(!t)return Ob(r[1],r);for(;t;){let e=null;if(vo(t))e=t[13];else{const o=t[10];o&&(e=o)}if(!e){for(;t&&!t[4]&&t!==r;)vo(t)&&Ob(t[1],t),t=t[3];null===t&&(t=r),vo(t)&&Ob(t[1],t),e=t&&t[4]}t=e}}(t)}}function Ob(r,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(r,t){let e;if(null!=r&&null!=(e=r.destroyHooks))for(let o=0;o<e.length;o+=2){const a=t[e[o]];if(!(a instanceof Wa)){const c=e[o+1];if(Array.isArray(c))for(let d=0;d<c.length;d+=2){const p=a[c[d]],f=c[d+1];try{f.call(p)}finally{}}else try{c.call(a)}finally{}}}}(r,t),function(r,t){const e=r.cleanup,o=t[7];let a=-1;if(null!==e)for(let c=0;c<e.length-1;c+=2)if("string"==typeof e[c]){const d=e[c+1],p="function"==typeof d?d(t):On(t[d]),f=o[a=e[c+2]],v=e[c+3];"boolean"==typeof v?p.removeEventListener(e[c],f,v):v>=0?o[a=v]():o[a=-v].unsubscribe(),c+=2}else{const d=o[a=e[c+1]];e[c].call(d)}if(null!==o){for(let c=a+1;c<o.length;c++)o[c]();t[7]=null}}(r,t),1===t[1].type&&vn(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&oo(t[3])){e!==t[3]&&DS(e,t);const o=t[19];null!==o&&o.detachView(r)}}}function RS(r,t,e){return function(r,t,e){let o=t;for(;null!==o&&40&o.type;)o=(t=o).parent;if(null===o)return e[0];if(2&o.flags){const a=r.data[o.directiveStart].encapsulation;if(a===mr.None||a===mr.Emulated)return null}return Kr(o,e)}(r,t.parent,e)}function Jl(r,t,e,o,a){vn(r)?r.insertBefore(t,e,o,a):t.insertBefore(e,o,a)}function xS(r,t,e){vn(r)?r.appendChild(t,e):t.appendChild(e)}function AS(r,t,e,o,a){null!==o?Jl(r,t,e,o,a):xS(r,t,e)}function Kf(r,t){return vn(r)?r.parentNode(t):t.parentNode}function OS(r,t,e){return NS(r,t,e)}let NS=function(r,t,e){return 40&r.type?Kr(r,e):null};function $f(r,t,e,o){const a=RS(r,o,t),c=t[11],p=OS(o.parent||t[6],o,t);if(null!=a)if(Array.isArray(e))for(let f=0;f<e.length;f++)AS(c,a,e[f],p,!1);else AS(c,a,e,p,!1)}function Jf(r,t){if(null!==t){const e=t.type;if(3&e)return Kr(t,r);if(4&e)return Nb(-1,r[t.index]);if(8&e){const o=t.child;if(null!==o)return Jf(r,o);{const a=r[t.index];return oo(a)?Nb(-1,a):On(a)}}if(32&e)return Db(t,r)()||On(r[t.index]);{const o=LS(r,t);return null!==o?Array.isArray(o)?o[0]:Jf(uh(r[16]),o):Jf(r,t.next)}}return null}function LS(r,t){return null!==t?r[16][6].projection[t.projection]:null}function Nb(r,t){const e=10+r+1;if(e<t.length){const o=t[e],a=o[1].firstChild;if(null!==a)return Jf(o,a)}return t[7]}function Pb(r,t,e,o,a,c,d){for(;null!=e;){const p=o[e.index],f=e.type;if(d&&0===t&&(p&&Ar(On(p),o),e.flags|=4),64!=(64&e.flags))if(8&f)Pb(r,t,e.child,o,a,c,!1),hu(t,r,a,p,c);else if(32&f){const v=Db(e,o);let E;for(;E=v();)hu(t,r,a,E,c);hu(t,r,a,p,c)}else 16&f?BS(r,t,o,e,a,c):hu(t,r,a,p,c);e=d?e.projectionNext:e.next}}function dh(r,t,e,o,a,c){Pb(e,o,r.firstChild,t,a,c,!1)}function BS(r,t,e,o,a,c){const d=e[16],f=d[6].projection[o.projection];if(Array.isArray(f))for(let v=0;v<f.length;v++)hu(t,r,a,f[v],c);else Pb(r,t,f,d[3],a,c,!0)}function VS(r,t,e){vn(r)?r.setAttribute(t,"style",e):t.style.cssText=e}function Lb(r,t,e){vn(r)?""===e?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e):t.className=e}function HS(r,t,e){let o=r.length;for(;;){const a=r.indexOf(t,e);if(-1===a)return a;if(0===a||r.charCodeAt(a-1)<=32){const c=t.length;if(a+c===o||r.charCodeAt(a+c)<=32)return a}e=a+1}}const US="ng-template";function RP(r,t,e){let o=0;for(;o<r.length;){let a=r[o++];if(e&&"class"===a){if(a=r[o],-1!==HS(a.toLowerCase(),t,0))return!0}else if(1===a){for(;o<r.length&&"string"==typeof(a=r[o++]);)if(a.toLowerCase()===t)return!0;return!1}}return!1}function GS(r){return 4===r.type&&r.value!==US}function IP(r,t,e){return t===(4!==r.type||e?r.value:US)}function xP(r,t,e){let o=4;const a=r.attrs||[],c=function(r){for(let t=0;t<r.length;t++)if($c(r[t]))return t;return r.length}(a);let d=!1;for(let p=0;p<t.length;p++){const f=t[p];if("number"!=typeof f){if(!d)if(4&o){if(o=2|1&o,""!==f&&!IP(r,f,e)||""===f&&1===t.length){if(Qo(o))return!1;d=!0}}else{const v=8&o?f:t[++p];if(8&o&&null!==r.attrs){if(!RP(r.attrs,v,e)){if(Qo(o))return!1;d=!0}continue}const D=AP(8&o?"class":f,a,GS(r),e);if(-1===D){if(Qo(o))return!1;d=!0;continue}if(""!==v){let x;x=D>c?"":a[D+1].toLowerCase();const N=8&o?x:null;if(N&&-1!==HS(N,v,0)||2&o&&v!==x){if(Qo(o))return!1;d=!0}}}}else{if(!d&&!Qo(o)&&!Qo(f))return!1;if(d&&Qo(f))continue;d=!1,o=f|1&o}}return Qo(o)||d}function Qo(r){return 0==(1&r)}function AP(r,t,e,o){if(null===t)return-1;let a=0;if(o||!e){let c=!1;for(;a<t.length;){const d=t[a];if(d===r)return a;if(3===d||6===d)c=!0;else{if(1===d||2===d){let p=t[++a];for(;"string"==typeof p;)p=t[++a];continue}if(4===d)break;if(0===d){a+=4;continue}}a+=c?1:2}return-1}return function(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){const o=r[e];if("number"==typeof o)return-1;if(o===t)return e;e++}return-1}(t,r)}function jS(r,t,e=!1){for(let o=0;o<t.length;o++)if(xP(r,t[o],e))return!0;return!1}function PP(r,t){e:for(let e=0;e<t.length;e++){const o=t[e];if(r.length===o.length){for(let a=0;a<r.length;a++)if(r[a]!==o[a])continue e;return!0}}return!1}function WS(r,t){return r?":not("+t.trim()+")":t}function LP(r){let t=r[0],e=1,o=2,a="",c=!1;for(;e<r.length;){let d=r[e];if("string"==typeof d)if(2&o){const p=r[++e];a+="["+d+(p.length>0?'="'+p+'"':"")+"]"}else 8&o?a+="."+d:4&o&&(a+=" "+d);else""!==a&&!Qo(d)&&(t+=WS(c,a),a=""),o=d,c=c||!Qo(o);e++}return""!==a&&(t+=WS(c,a)),t}const ti={};function zt(r){zS(Si(),Ve(),pn()+r,Ga())}function zS(r,t,e,o){if(!o)if(3==(3&t[2])){const c=r.preOrderCheckHooks;null!==c&&Xc(t,c,e)}else{const c=r.preOrderHooks;null!==c&&Ds(t,c,0,e)}Yo(e)}function Qf(r,t){return r<<17|t<<2}function Zo(r){return r>>17&32767}function Fb(r){return 2|r}function ua(r){return(131068&r)>>2}function Bb(r,t){return-131069&r|t<<2}function Vb(r){return 1|r}function t0(r,t){const e=r.contentQueries;if(null!==e)for(let o=0;o<e.length;o+=2){const a=e[o],c=e[o+1];if(-1!==c){const d=r.data[c];Hd(a),d.contentQueries(2,t[c],c)}}}function hh(r,t,e,o,a,c,d,p,f,v){const E=t.blueprint.slice();return E[0]=a,E[2]=140|o,df(E),E[3]=E[15]=r,E[8]=e,E[10]=d||r&&r[10],E[11]=p||r&&r[11],E[12]=f||r&&r[12]||null,E[9]=v||r&&r[9]||null,E[6]=c,E[16]=2==t.type?r[16]:E,E}function pu(r,t,e,o,a){let c=r.data[t];if(null===c)c=function(r,t,e,o,a){const c=xl(),d=Fd(),f=r.data[t]=function(r,t,e,o,a,c){return{type:e,index:o,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:a,attrs:c,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?c:c&&c.parent,e,t,o,a);return null===r.firstChild&&(r.firstChild=f),null!==c&&(d?null==c.child&&null!==f.parent&&(c.child=f):null===c.next&&(c.next=f)),f}(r,t,e,o,a),Vt.lFrame.inI18n&&(c.flags|=64);else if(64&c.type){c.type=e,c.value=o,c.attrs=a;const d=function(){const r=Vt.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();c.injectorIndex=null===d?-1:d.injectorIndex}return yo(c,!0),c}function fu(r,t,e,o){if(0===e)return-1;const a=t.length;for(let c=0;c<e;c++)t.push(o),r.blueprint.push(o),r.data.push(null);return a}function ph(r,t,e){Yc(t);try{const o=r.viewQuery;null!==o&&ty(1,o,e);const a=r.template;null!==a&&n0(r,t,a,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&t0(r,t),r.staticViewQueries&&ty(2,r.viewQuery,e);const c=r.components;null!==c&&function(r,t){for(let e=0;e<t.length;e++)gL(r,t[e])}(t,c)}catch(o){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),o}finally{t[2]&=-5,ja()}}function gu(r,t,e,o){const a=t[2];if(256==(256&a))return;Yc(t);const c=Ga();try{df(t),function(r){Vt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==e&&n0(r,t,e,2,o);const d=3==(3&a);if(!c)if(d){const v=r.preOrderCheckHooks;null!==v&&Xc(t,v,null)}else{const v=r.preOrderHooks;null!==v&&Ds(t,v,0,null),Ko(t,0)}if(function(r){for(let t=Mb(r);null!==t;t=Rb(t)){if(!t[2])continue;const e=t[9];for(let o=0;o<e.length;o++){const a=e[o],c=a[3];0==(1024&a[2])&&Go(c,1),a[2]|=1024}}}(t),function(r){for(let t=Mb(r);null!==t;t=Rb(t))for(let e=10;e<t.length;e++){const o=t[e],a=o[1];Uc(o)&&gu(a,o,a.template,o[8])}}(t),null!==r.contentQueries&&t0(r,t),!c)if(d){const v=r.contentCheckHooks;null!==v&&Xc(t,v)}else{const v=r.contentHooks;null!==v&&Ds(t,v,1),Ko(t,1)}!function(r,t){const e=r.hostBindingOpCodes;if(null!==e)try{for(let o=0;o<e.length;o++){const a=e[o];if(a<0)Yo(~a);else{const c=a,d=e[++o],p=e[++o];Rv(d,c),p(2,t[c])}}}finally{Yo(-1)}}(r,t);const p=r.components;null!==p&&function(r,t){for(let e=0;e<t.length;e++)fL(r,t[e])}(t,p);const f=r.viewQuery;if(null!==f&&ty(2,f,o),!c)if(d){const v=r.viewCheckHooks;null!==v&&Xc(t,v)}else{const v=r.viewHooks;null!==v&&Ds(t,v,2),Ko(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),c||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Go(t[3],-1))}finally{ja()}}function $P(r,t,e,o){const a=t[10],c=!Ga(),d=Il(t);try{c&&!d&&a.begin&&a.begin(),d&&ph(r,t,o),gu(r,t,e,o)}finally{c&&!d&&a.end&&a.end()}}function n0(r,t,e,o,a){const c=pn(),d=2&o;try{Yo(-1),d&&t.length>20&&zS(r,t,20,Ga()),e(o,a)}finally{Yo(c)}}function Xb(r,t,e){!Gc()||(function(r,t,e,o){const a=e.directiveStart,c=e.directiveEnd;r.firstCreatePass||Fl(e,t),Ar(o,t);const d=e.initialInputs;for(let p=a;p<c;p++){const f=r.data[p],v=so(f);v&&cL(t,e,f);const E=$r(t,r,p,e);Ar(E,t),null!==d&&uL(0,p-a,E,f,0,d),v&&(Mr(e.index,t)[8]=E)}}(r,t,e,Kr(e,t)),128==(128&e.flags)&&function(r,t,e){const o=e.directiveStart,a=e.directiveEnd,d=e.index,p=Vt.lFrame.currentDirectiveIndex;try{Yo(d);for(let f=o;f<a;f++){const v=r.data[f],E=t[f];Wc(f),(null!==v.hostBindings||0!==v.hostVars||null!==v.hostAttrs)&&h0(v,E)}}finally{Yo(-1),Wc(p)}}(r,t,e))}function Kb(r,t,e=Kr){const o=t.localNames;if(null!==o){let a=t.index+1;for(let c=0;c<o.length;c+=2){const d=o[c+1],p=-1===d?e(t,r):r[d];r[a++]=p}}}function o0(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=eg(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function eg(r,t,e,o,a,c,d,p,f,v){const E=20+o,D=E+a,x=function(r,t){const e=[];for(let o=0;o<t;o++)e.push(o<r?null:ti);return e}(E,D),N="function"==typeof v?v():v;return x[1]={type:r,blueprint:x,template:e,queries:null,viewQuery:p,declTNode:t,data:x.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:D,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof c?c():c,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:f,consts:N,incompleteFirstPass:!1}}function l0(r,t,e,o){const a=v0(t);null===e?a.push(o):(a.push(e),r.firstCreatePass&&b0(r).push(o,a.length-1))}function c0(r,t,e){for(let o in r)if(r.hasOwnProperty(o)){const a=r[o];(e=null===e?{}:e).hasOwnProperty(o)?e[o].push(t,a):e[o]=[t,a]}return e}function uo(r,t,e,o,a,c,d,p){const f=Kr(t,e);let E,v=t.inputs;!p&&null!=v&&(E=v[o])?(C0(r,e,E,o,a),kc(t)&&function(r,t){const e=Mr(t,r);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(o=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(o),a=null!=d?d(a,t.value||"",o):a,vn(c)?c.setProperty(f,o,a):Ll(o)||(f.setProperty?f.setProperty(o,a):f[o]=a))}function $b(r,t,e,o){let a=!1;if(Gc()){const c=function(r,t,e){const o=r.directiveRegistry;let a=null;if(o)for(let c=0;c<o.length;c++){const d=o[c];jS(e,d.selectors,!1)&&(a||(a=[]),Bl(Fl(e,t),r,d.type),so(d)?(p0(r,e),a.unshift(d)):a.push(d))}return a}(r,t,e),d=null===o?null:{"":-1};if(null!==c){a=!0,f0(e,r.data.length,c.length);for(let E=0;E<c.length;E++){const D=c[E];D.providersResolver&&D.providersResolver(D)}let p=!1,f=!1,v=fu(r,t,c.length,null);for(let E=0;E<c.length;E++){const D=c[E];e.mergedAttrs=Jc(e.mergedAttrs,D.hostAttrs),g0(r,e,t,v,D),lL(v,D,d),null!==D.contentQueries&&(e.flags|=8),(null!==D.hostBindings||null!==D.hostAttrs||0!==D.hostVars)&&(e.flags|=128);const x=D.type.prototype;!p&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e.index),p=!0),!f&&(x.ngOnChanges||x.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e.index),f=!0),v++}!function(r,t){const o=t.directiveEnd,a=r.data,c=t.attrs,d=[];let p=null,f=null;for(let v=t.directiveStart;v<o;v++){const E=a[v],D=E.inputs,x=null===c||GS(t)?null:dL(D,c);d.push(x),p=c0(D,v,p),f=c0(E.outputs,v,f)}null!==p&&(p.hasOwnProperty("class")&&(t.flags|=16),p.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=d,t.inputs=p,t.outputs=f}(r,e)}d&&function(r,t,e){if(t){const o=r.localNames=[];for(let a=0;a<t.length;a+=2){const c=e[t[a+1]];if(null==c)throw new Xs("301",`Export of name '${t[a+1]}' not found!`);o.push(t[a],c)}}}(e,o,d)}return e.mergedAttrs=Jc(e.mergedAttrs,e.attrs),a}function d0(r,t,e,o,a,c){const d=c.hostBindings;if(d){let p=r.hostBindingOpCodes;null===p&&(p=r.hostBindingOpCodes=[]);const f=~t.index;(function(r){let t=r.length;for(;t>0;){const e=r[--t];if("number"==typeof e&&e<0)return e}return 0})(p)!=f&&p.push(f),p.push(o,a,d)}}function h0(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function p0(r,t){t.flags|=2,(r.components||(r.components=[])).push(t.index)}function lL(r,t,e){if(e){if(t.exportAs)for(let o=0;o<t.exportAs.length;o++)e[t.exportAs[o]]=r;so(t)&&(e[""]=r)}}function f0(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}function g0(r,t,e,o,a){r.data[o]=a;const c=a.factory||(a.factory=ta(a.type)),d=new Wa(c,so(a),null);r.blueprint[o]=d,e[o]=d,d0(r,t,0,o,fu(r,e,a.hostVars,ti),a)}function cL(r,t,e){const o=Kr(t,r),a=o0(e),c=r[10],d=tg(r,hh(r,a,null,e.onPush?64:16,o,t,c,c.createRenderer(o,e),null,null));r[t.index]=d}function Ps(r,t,e,o,a,c){const d=Kr(r,t);!function(r,t,e,o,a,c,d){if(null==c)vn(r)?r.removeAttribute(t,a,e):t.removeAttribute(a);else{const p=null==d?jt(c):d(c,o||"",a);vn(r)?r.setAttribute(t,a,p,e):e?t.setAttributeNS(e,a,p):t.setAttribute(a,p)}}(t[11],d,c,r.value,e,o,a)}function uL(r,t,e,o,a,c){const d=c[t];if(null!==d){const p=o.setInput;for(let f=0;f<d.length;){const v=d[f++],E=d[f++],D=d[f++];null!==p?o.setInput(e,D,v,E):e[E]=D}}}function dL(r,t){let e=null,o=0;for(;o<t.length;){const a=t[o];if(0!==a)if(5!==a){if("number"==typeof a)break;r.hasOwnProperty(a)&&(null===e&&(e=[]),e.push(a,r[a],t[o+1])),o+=2}else o+=2;else o+=4}return e}function m0(r,t,e,o){return new Array(r,!0,!1,t,null,0,o,e,null,null)}function fL(r,t){const e=Mr(t,r);if(Uc(e)){const o=e[1];80&e[2]?gu(o,e,o.template,e[8]):e[5]>0&&Qb(e)}}function Qb(r){for(let o=Mb(r);null!==o;o=Rb(o))for(let a=10;a<o.length;a++){const c=o[a];if(1024&c[2]){const d=c[1];gu(d,c,d.template,c[8])}else c[5]>0&&Qb(c)}const e=r[1].components;if(null!==e)for(let o=0;o<e.length;o++){const a=Mr(e[o],r);Uc(a)&&a[5]>0&&Qb(a)}}function gL(r,t){const e=Mr(t,r),o=e[1];(function(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])})(o,e),ph(o,e,e[8])}function tg(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function Zb(r){for(;r;){r[2]|=64;const t=uh(r);if(ef(r)&&!t)return r;r=t}return null}function ey(r,t,e){const o=t[10];o.begin&&o.begin();try{gu(r,t,r.template,e)}catch(a){throw E0(t,a),a}finally{o.end&&o.end()}}function _0(r){!function(r){for(let t=0;t<r.components.length;t++){const e=r.components[t],o=Tb(e),a=o[1];$P(a,o,a.template,e)}}(r[8])}function ty(r,t,e){Hd(0),t(r,e)}const yL=(()=>Promise.resolve(null))();function v0(r){return r[7]||(r[7]=[])}function b0(r){return r.cleanup||(r.cleanup=[])}function y0(r,t,e){return(null===r||so(r))&&(e=function(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(e[t.index])),e[11]}function E0(r,t){const e=r[9],o=e?e.get(ks,null):null;o&&o.handleError(t)}function C0(r,t,e,o,a){for(let c=0;c<e.length;){const d=e[c++],p=e[c++],f=t[d],v=r.data[d];null!==v.setInput?v.setInput(f,a,o,p):f[p]=a}}function ha(r,t,e){const o=Vc(t,r);!function(r,t,e){vn(r)?r.setValue(t,e):t.textContent=e}(r[11],o,e)}function ig(r,t,e){let o=e?r.styles:null,a=e?r.classes:null,c=0;if(null!==t)for(let d=0;d<t.length;d++){const p=t[d];"number"==typeof p?c=p:1==c?a=Sc(a,p):2==c&&(o=Sc(o,p+": "+t[++d]+";"))}e?r.styles=o:r.stylesWithoutHost=o,e?r.classes=a:r.classesWithoutHost=a}const fh=new Ae("INJECTOR",-1);class T0{get(t,e=Qa){if(e===Qa){const o=new Error(`NullInjectorError: No provider for ${li(t)}!`);throw o.name="NullInjectorError",o}return e}}const gh=new Ae("Set Injector scope."),mh={},TL={};let iy;function w0(){return void 0===iy&&(iy=new T0),iy}function S0(r,t=null,e=null,o){return new SL(r,e,t||w0(),o)}class SL{constructor(t,e,o,a=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const c=[];e&&lo(e,p=>this.processProvider(p,t,e)),lo([t],p=>this.processInjectorType(p,[],c)),this.records.set(fh,mu(void 0,this));const d=this.records.get(gh);this.scope=null!=d?d.value:null,this.source=a||("object"==typeof t?null:li(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Qa,o=bt.Default){this.assertNotDestroyed();const a=aa(this),c=Br(void 0);try{if(!(o&bt.SkipSelf)){let p=this.records.get(t);if(void 0===p){const f=("function"==typeof(r=t)||"object"==typeof r&&r instanceof Ae)&&io(t);p=f&&this.injectableDefInScope(f)?mu(ny(t),mh):null,this.records.set(t,p)}if(null!=p)return this.hydrate(t,p)}return(o&bt.Self?w0():this.parent).get(t,e=o&bt.Optional&&e===Qa?null:e)}catch(d){if("NullInjectorError"===d.name){if((d[Za]=d[Za]||[]).unshift(li(t)),a)throw d;return ih(d,t,"R3InjectorError",this.source)}throw d}finally{Br(c),aa(a)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((o,a)=>t.push(li(a))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,o){if(!(t=Tt(t)))return!1;let a=Xp(t);const c=null==a&&t.ngModule||void 0,d=void 0===c?t:c,p=-1!==o.indexOf(d);if(void 0!==c&&(a=Xp(c)),null==a)return!1;if(null!=a.imports&&!p){let E;o.push(d);try{lo(a.imports,D=>{this.processInjectorType(D,e,o)&&(void 0===E&&(E=[]),E.push(D))})}finally{}if(void 0!==E)for(let D=0;D<E.length;D++){const{ngModule:x,providers:N}=E[D];lo(N,B=>this.processProvider(B,x,N||xi))}}this.injectorDefTypes.add(d);const f=ta(d)||(()=>new d);this.records.set(d,mu(f,mh));const v=a.providers;if(null!=v&&!p){const E=t;lo(v,D=>this.processProvider(D,E,v))}return void 0!==c&&void 0!==t.providers}processProvider(t,e,o){let a=_u(t=Tt(t))?t:Tt(t&&t.provide);const c=(r=t,M0(r)?mu(void 0,r.useValue):mu(D0(r),mh));var r;if(_u(t)||!0!==t.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=mu(void 0,mh,!0),d.factory=()=>la(d.multi),this.records.set(a,d)),a=t,d.multi.push(t)}this.records.set(a,c)}hydrate(t,e){return e.value===mh&&(e.value=TL,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(r=e.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(e.value),e.value;var r}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Tt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ny(r){const t=io(r),e=null!==t?t.factory:ta(r);if(null!==e)return e;if(r instanceof Ae)throw new Error(`Token ${li(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const t=r.length;if(t>0){const o=Jo(t,"?");throw new Error(`Can't resolve all parameters for ${li(r)}: (${o.join(", ")}).`)}const e=function(r){const t=r&&(r[Rc]||r[Md]);if(t){const e=function(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(r);return null!==e?()=>e.factory(r):()=>new r}(r);throw new Error("unreachable")}function D0(r,t,e){let o;if(_u(r)){const a=Tt(r);return ta(a)||ny(a)}if(M0(r))o=()=>Tt(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))o=()=>r.useFactory(...la(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))o=()=>we(Tt(r.useExisting));else{const a=Tt(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return ta(a)||ny(a);o=()=>new a(...la(r.deps))}return o}function mu(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function M0(r){return null!==r&&"object"==typeof r&&ru in r}function _u(r){return"function"==typeof r}const R0=function(r,t,e){return function(r,t=null,e=null,o){const a=S0(r,t,e,o);return a._resolveInjectorDefTypes(),a}({name:e},t,r,e)};let Pi=(()=>{class r{static create(e,o){return Array.isArray(e)?R0(e,o,""):R0(e.providers,e.parent,e.name||"")}}return r.THROW_IF_NOT_FOUND=Qa,r.NULL=new T0,r.\u0275prov=Ke({token:r,providedIn:"any",factory:()=>we(fh)}),r.__NG_ELEMENT_ID__=-1,r})();function YL(r,t){Xo(Tb(r)[1],wn())}function $e(r){let t=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),e=!0;const o=[r];for(;t;){let a;if(so(r))a=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");a=t.\u0275dir}if(a){if(e){o.push(a);const d=r;d.inputs=cy(r.inputs),d.declaredInputs=cy(r.declaredInputs),d.outputs=cy(r.outputs);const p=a.hostBindings;p&&JL(r,p);const f=a.viewQuery,v=a.contentQueries;if(f&&KL(r,f),v&&$L(r,v),Td(r.inputs,a.inputs),Td(r.declaredInputs,a.declaredInputs),Td(r.outputs,a.outputs),so(a)&&a.data.animation){const E=r.data;E.animation=(E.animation||[]).concat(a.data.animation)}}const c=a.features;if(c)for(let d=0;d<c.length;d++){const p=c[d];p&&p.ngInherit&&p(r),p===$e&&(e=!1)}}t=Object.getPrototypeOf(t)}!function(r){let t=0,e=null;for(let o=r.length-1;o>=0;o--){const a=r[o];a.hostVars=t+=a.hostVars,a.hostAttrs=Jc(a.hostAttrs,e=Jc(e,a.hostAttrs))}}(o)}function cy(r){return r===Js?{}:r===xi?[]:r}function KL(r,t){const e=r.viewQuery;r.viewQuery=e?(o,a)=>{t(o,a),e(o,a)}:t}function $L(r,t){const e=r.contentQueries;r.contentQueries=e?(o,a,c)=>{t(o,a,c),e(o,a,c)}:t}function JL(r,t){const e=r.hostBindings;r.hostBindings=e?(o,a)=>{t(o,a),e(o,a)}:t}let ng=null;function vu(){if(!ng){const r=Ii.Symbol;if(r&&r.iterator)ng=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const o=t[e];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(ng=o)}}}return ng}function vh(r){return!!uy(r)&&(Array.isArray(r)||!(r instanceof Map)&&vu()in r)}function uy(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Or(r,t,e){return!Object.is(r[t],e)&&(r[t]=e,!0)}function Ql(r,t,e,o){const a=Or(r,t,e);return Or(r,t+1,o)||a}function Gt(r,t,e,o){const a=Ve();return Or(a,na(),t)&&(Si(),Ps(fn(),a,r,t,e,o)),Gt}function Cu(r,t,e,o,a,c,d,p){const v=function(r,t,e,o,a){const c=Ql(r,t,e,o);return Or(r,t+2,a)||c}(r,Wo(),e,a,d);return zo(3),v?t+jt(e)+o+jt(a)+c+jt(d)+p:ti}function zn(r,t,e,o,a,c,d,p){const f=Ve(),v=Si(),E=r+20,D=v.firstCreatePass?function(r,t,e,o,a,c,d,p,f){const v=t.consts,E=pu(t,r,4,d||null,ws(v,p));$b(t,e,E,ws(v,f)),Xo(t,E);const D=E.tViews=eg(2,E,o,a,c,t.directiveRegistry,t.pipeRegistry,null,t.schemas,v);return null!==t.queries&&(t.queries.template(t,E),D.queries=t.queries.embeddedTView(E)),E}(E,v,f,t,e,o,a,c,d):v.data[E];yo(D,!1);const x=f[11].createComment("");$f(v,f,x,D),Ar(x,f),tg(f,f[E]=m0(x,f,x,D)),Ts(D)&&Xb(v,f,D),null!=d&&Kb(f,D,p)}function Do(r){return Ha(Vt.lFrame.contextLView,20+r)}function K(r,t=bt.Default){const e=Ve();return null===e?we(r,t):Tf(wn(),e,Tt(r),t)}function Iu(){throw new Error("invalid")}function ri(r,t,e){const o=Ve();return Or(o,na(),t)&&uo(Si(),fn(),o,r,t,o[11],e,!1),ri}function gy(r,t,e,o,a){const d=a?"class":"style";C0(r,e,t.inputs[d],d,o)}function ze(r,t,e,o){const a=Ve(),c=Si(),d=20+r,p=a[11],f=a[d]=xb(p,t,Vt.lFrame.currentNamespace),v=c.firstCreatePass?function(r,t,e,o,a,c,d){const p=t.consts,v=pu(t,r,2,a,ws(p,c));return $b(t,e,v,ws(p,d)),null!==v.attrs&&ig(v,v.attrs,!1),null!==v.mergedAttrs&&ig(v,v.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,v),v}(d,c,a,0,t,e,o):c.data[d];yo(v,!0);const E=v.mergedAttrs;null!==E&&Kc(p,f,E);const D=v.classes;null!==D&&Lb(p,f,D);const x=v.styles;null!==x&&VS(p,f,x),64!=(64&v.flags)&&$f(c,a,f,v),0===Vt.lFrame.elementDepthCount&&Ar(f,a),Vt.lFrame.elementDepthCount++,Ts(v)&&(Xb(c,a,v),function(r,t,e){if(Ad(t)){const a=t.directiveEnd;for(let c=t.directiveStart;c<a;c++){const d=r.data[c];d.contentQueries&&d.contentQueries(1,e[c],c)}}}(c,v,a)),null!==o&&Kb(a,v)}function Ye(){let r=wn();Fd()?jc():(r=r.parent,yo(r,!1));const t=r;Vt.lFrame.elementDepthCount--;const e=Si();e.firstCreatePass&&(Xo(e,r),Ad(r)&&e.queries.elementEnd(r)),null!=t.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(t)&&gy(e,t,Ve(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(t)&&gy(e,t,Ve(),t.stylesWithoutHost,!1)}function Di(r,t,e,o){ze(r,t,e,o),Ye()}function xu(){return Ve()}function yh(r){return!!r&&"function"==typeof r.then}function hD(r){return!!r&&"function"==typeof r.subscribe}const lg=hD;function Yt(r,t,e,o){const a=Ve(),c=Si(),d=wn();return pD(c,a,a[11],d,r,t,!!e,o),Yt}function cg(r,t){const e=wn(),o=Ve(),a=Si();return pD(a,o,y0(zc(a.data),e,o),e,r,t,!1),cg}function pD(r,t,e,o,a,c,d,p){const f=Ts(o),E=r.firstCreatePass&&b0(r),D=t[8],x=v0(t);let N=!0;if(3&o.type||p){const z=Kr(o,t),de=p?p(z):z,he=x.length,Le=p?je=>p(On(je[o.index])):o.index;if(vn(e)){let je=null;if(!p&&f&&(je=function(r,t,e,o){const a=r.cleanup;if(null!=a)for(let c=0;c<a.length-1;c+=2){const d=a[c];if(d===e&&a[c+1]===o){const p=t[7],f=a[c+2];return p.length>f?p[f]:null}"string"==typeof d&&(c+=2)}return null}(r,t,a,o.index)),null!==je)(je.__ngLastListenerFn__||je).__ngNextListenerFn__=c,je.__ngLastListenerFn__=c,N=!1;else{c=my(o,t,D,c,!1);const Et=e.listen(de,a,c);x.push(c,Et),E&&E.push(a,Le,he,he+1)}}else c=my(o,t,D,c,!0),de.addEventListener(a,c,d),x.push(c),E&&E.push(a,Le,he,d)}else c=my(o,t,D,c,!1);const B=o.outputs;let Z;if(N&&null!==B&&(Z=B[a])){const z=Z.length;if(z)for(let de=0;de<z;de+=2){const si=t[Z[de]][Z[de+1]].subscribe(c),mi=x.length;x.push(c,si),E&&E.push(a,o.index,mi,-(mi+1))}}}function fD(r,t,e,o){try{return!1!==e(o)}catch(a){return E0(r,a),!1}}function my(r,t,e,o,a){return function c(d){if(d===Function)return o;const p=2&r.flags?Mr(r.index,t):t;0==(32&t[2])&&Zb(p);let f=fD(t,0,o,d),v=c.__ngNextListenerFn__;for(;v;)f=fD(t,0,v,d)&&f,v=v.__ngNextListenerFn__;return a&&!1===f&&(d.preventDefault(),d.returnValue=!1),f}}function Yn(r=1){return function(r){return(Vt.lFrame.contextLView=function(r,t){for(;r>0;)t=t[15],r--;return t}(r,Vt.lFrame.contextLView))[8]}(r)}function IF(r,t){let e=null;const o=function(r){const t=r.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(r);for(let a=0;a<t.length;a++){const c=t[a];if("*"!==c){if(null===o?jS(r,c,!0):PP(o,c))return a}else e=a}return e}function yn(r){const t=Ve()[16][6];if(!t.projection){const o=t.projection=Jo(r?r.length:1,null),a=o.slice();let c=t.child;for(;null!==c;){const d=r?IF(c,r):0;null!==d&&(a[d]?a[d].projectionNext=c:o[d]=c,a[d]=c),c=c.next}}}function Li(r,t=0,e){const o=Ve(),a=Si(),c=pu(a,20+r,16,null,e||null);null===c.projection&&(c.projection=t),jc(),64!=(64&c.flags)&&function(r,t,e){BS(t[11],0,t,e,RS(r,e,t),OS(e.parent||t[6],e,t))}(a,o,c)}function wD(r,t,e,o,a){const c=r[e+1],d=null===t;let p=o?Zo(c):ua(c),f=!1;for(;0!==p&&(!1===f||d);){const E=r[p+1];OF(r[p],t)&&(f=!0,r[p+1]=o?Vb(E):Fb(E)),p=o?Zo(E):ua(E)}f&&(r[e+1]=o?Fb(c):Vb(c))}function OF(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&$a(r,t)>=0}function ho(r,t,e){return es(r,t,e,!1),ho}function Ti(r,t){return es(r,t,null,!0),Ti}function es(r,t,e,o){const a=Ve(),c=Si(),d=zo(2);c.firstUpdatePass&&function(r,t,e,o){const a=r.data;if(null===a[e+1]){const c=a[pn()],d=function(r,t){return t>=r.expandoStartIndex}(r,e);(function(r,t){return 0!=(r.flags&(t?16:32))})(c,o)&&null===t&&!d&&(t=!1),t=function(r,t,e,o){const a=zc(r);let c=o?t.residualClasses:t.residualStyles;if(null===a)0===(o?t.classBindings:t.styleBindings)&&(e=Eh(e=vy(null,r,t,e,o),t.attrs,o),c=null);else{const d=t.directiveStylingLast;if(-1===d||r[d]!==a)if(e=vy(a,r,t,e,o),null===c){let f=function(r,t,e){const o=e?t.classBindings:t.styleBindings;if(0!==ua(o))return r[Zo(o)]}(r,t,o);void 0!==f&&Array.isArray(f)&&(f=vy(null,r,t,f[1],o),f=Eh(f,t.attrs,o),function(r,t,e,o){r[Zo(e?t.classBindings:t.styleBindings)]=o}(r,t,o,f))}else c=function(r,t,e){let o;const a=t.directiveEnd;for(let c=1+t.directiveStylingLast;c<a;c++)o=Eh(o,r[c].hostAttrs,e);return Eh(o,t.attrs,e)}(r,t,o)}return void 0!==c&&(o?t.residualClasses=c:t.residualStyles=c),e}(a,c,t,o),function(r,t,e,o,a,c){let d=c?t.classBindings:t.styleBindings,p=Zo(d),f=ua(d);r[o]=e;let E,v=!1;if(Array.isArray(e)){const D=e;E=D[1],(null===E||$a(D,E)>0)&&(v=!0)}else E=e;if(a)if(0!==f){const x=Zo(r[p+1]);r[o+1]=Qf(x,p),0!==x&&(r[x+1]=Bb(r[x+1],o)),r[p+1]=function(r,t){return 131071&r|t<<17}(r[p+1],o)}else r[o+1]=Qf(p,0),0!==p&&(r[p+1]=Bb(r[p+1],o)),p=o;else r[o+1]=Qf(f,0),0===p?p=o:r[f+1]=Bb(r[f+1],o),f=o;v&&(r[o+1]=Fb(r[o+1])),wD(r,E,o,!0),wD(r,E,o,!1),function(r,t,e,o,a){const c=a?r.residualClasses:r.residualStyles;null!=c&&"string"==typeof t&&$a(c,t)>=0&&(e[o+1]=Vb(e[o+1]))}(t,E,r,o,c),d=Qf(p,f),c?t.classBindings=d:t.styleBindings=d}(a,c,t,e,d,o)}}(c,r,d,o),t!==ti&&Or(a,d,t)&&function(r,t,e,o,a,c,d,p){if(!(3&t.type))return;const f=r.data,v=f[p+1];ug(function(r){return 1==(1&r)}(v)?PD(f,t,e,a,ua(v),d):void 0)||(ug(c)||function(r){return 2==(2&r)}(v)&&(c=PD(f,null,e,a,p,d)),function(r,t,e,o,a){const c=vn(r);if(t)a?c?r.addClass(e,o):e.classList.add(o):c?r.removeClass(e,o):e.classList.remove(o);else{let d=-1===o.indexOf("-")?void 0:co.DashCase;if(null==a)c?r.removeStyle(e,o,d):e.style.removeProperty(o);else{const p="string"==typeof a&&a.endsWith("!important");p&&(a=a.slice(0,-10),d|=co.Important),c?r.setStyle(e,o,a,d):e.style.setProperty(o,a,p?"important":"")}}}(o,d,Vc(pn(),e),a,c))}(c,c.data[pn()],a,a[11],r,a[d+1]=function(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=li(Ir(r)))),r}(t,e),o,d)}function vy(r,t,e,o,a){let c=null;const d=e.directiveEnd;let p=e.directiveStylingLast;for(-1===p?p=e.directiveStart:p++;p<d&&(c=t[p],o=Eh(o,c.hostAttrs,a),c!==r);)p++;return null!==r&&(e.directiveStylingLast=p),o}function Eh(r,t,e){const o=e?1:2;let a=-1;if(null!==t)for(let c=0;c<t.length;c++){const d=t[c];"number"==typeof d?a=d:a===o&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Rr(r,d,!!e||t[++c]))}return void 0===r?null:r}function PD(r,t,e,o,a,c){const d=null===t;let p;for(;a>0;){const f=r[a],v=Array.isArray(f),E=v?f[1]:f,D=null===E;let x=e[a+1];x===ti&&(x=D?xi:void 0);let N=D?qd(x,o):E===o?x:void 0;if(v&&!ug(N)&&(N=qd(f,o)),ug(N)&&(p=N,d))return p;const B=r[a+1];a=d?Zo(B):ua(B)}if(null!==t){let f=c?t.residualClasses:t.residualStyles;null!=f&&(p=qd(f,o))}return p}function ug(r){return void 0!==r}function bi(r,t=""){const e=Ve(),o=Si(),a=r+20,c=o.firstCreatePass?pu(o,a,1,t,null):o.data[a],d=e[a]=function(r,t){return vn(r)?r.createText(t):r.createTextNode(t)}(e[11],t);$f(o,e,d,c),yo(c,!1)}function fa(r,t,e){const o=Ve(),a=function(r,t,e,o){return Or(r,na(),e)?t+jt(e)+o:ti}(o,r,t,e);return a!==ti&&ha(o,pn(),a),fa}function yy(r,t,e,o,a){const c=Ve(),d=function(r,t,e,o,a,c){const p=Ql(r,Wo(),e,a);return zo(2),p?t+jt(e)+o+jt(a)+c:ti}(c,r,t,e,o,a);return d!==ti&&ha(c,pn(),d),yy}function Ey(r,t,e,o,a,c,d){const p=Ve(),f=Cu(p,r,t,e,o,a,c,d);return f!==ti&&ha(p,pn(),f),Ey}function ga(r,t,e){const o=Ve();return Or(o,na(),t)&&uo(Si(),fn(),o,r,t,o[11],e,!0),ga}function dg(r,t,e){const o=Ve();if(Or(o,na(),t)){const c=Si(),d=fn();uo(c,d,o,r,t,y0(zc(c.data),d,o),e,!0)}return dg}const Zl=void 0;var pB=["en",[["a","p"],["AM","PM"],Zl],[["AM","PM"],Zl,Zl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zl,"{1} 'at' {0}",Zl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const e=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===o?1:5}];let Ou={};function qD(r){return r in Ou||(Ou[r]=Ii.ng&&Ii.ng.common&&Ii.ng.common.locales&&Ii.ng.common.locales[r]),Ou[r]}var ct=(()=>((ct=ct||{})[ct.LocaleId=0]="LocaleId",ct[ct.DayPeriodsFormat=1]="DayPeriodsFormat",ct[ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",ct[ct.DaysFormat=3]="DaysFormat",ct[ct.DaysStandalone=4]="DaysStandalone",ct[ct.MonthsFormat=5]="MonthsFormat",ct[ct.MonthsStandalone=6]="MonthsStandalone",ct[ct.Eras=7]="Eras",ct[ct.FirstDayOfWeek=8]="FirstDayOfWeek",ct[ct.WeekendRange=9]="WeekendRange",ct[ct.DateFormat=10]="DateFormat",ct[ct.TimeFormat=11]="TimeFormat",ct[ct.DateTimeFormat=12]="DateTimeFormat",ct[ct.NumberSymbols=13]="NumberSymbols",ct[ct.NumberFormats=14]="NumberFormats",ct[ct.CurrencyCode=15]="CurrencyCode",ct[ct.CurrencySymbol=16]="CurrencySymbol",ct[ct.CurrencyName=17]="CurrencyName",ct[ct.Currencies=18]="Currencies",ct[ct.Directionality=19]="Directionality",ct[ct.PluralCase=20]="PluralCase",ct[ct.ExtraData=21]="ExtraData",ct))();const hg="en-US";let eM=hg;function wy(r,t,e,o,a){if(r=Tt(r),Array.isArray(r))for(let c=0;c<r.length;c++)wy(r[c],t,e,o,a);else{const c=Si(),d=Ve();let p=_u(r)?r:Tt(r.provide),f=D0(r);const v=wn(),E=1048575&v.providerIndexes,D=v.directiveStart,x=v.providerIndexes>>20;if(_u(r)||!r.multi){const N=new Wa(f,a,K),B=Dy(p,t,a?E:E+x,D);-1===B?(Bl(Fl(v,d),c,p),Sy(c,r,t.length),t.push(p),v.directiveStart++,v.directiveEnd++,a&&(v.providerIndexes+=1048576),e.push(N),d.push(N)):(e[B]=N,d[B]=N)}else{const N=Dy(p,t,E+x,D),B=Dy(p,t,E,E+x),Z=N>=0&&e[N],z=B>=0&&e[B];if(a&&!z||!a&&!Z){Bl(Fl(v,d),c,p);const de=function(r,t,e,o,a){const c=new Wa(r,e,K);return c.multi=[],c.index=t,c.componentProviders=0,wM(c,a,o&&!e),c}(a?dV:uV,e.length,a,o,f);!a&&z&&(e[B].providerFactory=de),Sy(c,r,t.length,0),t.push(p),v.directiveStart++,v.directiveEnd++,a&&(v.providerIndexes+=1048576),e.push(de),d.push(de)}else Sy(c,r,N>-1?N:B,wM(e[a?B:N],f,!a&&o));!a&&o&&z&&e[B].componentProviders++}}}function Sy(r,t,e,o){const a=_u(t);if(a||function(r){return!!r.useClass}(t)){const d=(t.useClass||t).prototype.ngOnDestroy;if(d){const p=r.destroyHooks||(r.destroyHooks=[]);if(!a&&t.multi){const f=p.indexOf(e);-1===f?p.push(e,[o,d]):p[f+1].push(o,d)}else p.push(e,d)}}}function wM(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function Dy(r,t,e,o){for(let a=e;a<o;a++)if(t[a]===r)return a;return-1}function uV(r,t,e,o){return My(this.multi,[])}function dV(r,t,e,o){const a=this.multi;let c;if(this.providerFactory){const d=this.providerFactory.componentProviders,p=$r(e,e[1],this.providerFactory.index,o);c=p.slice(0,d),My(a,c);for(let f=d;f<p.length;f++)c.push(p[f])}else c=[],My(a,c);return c}function My(r,t){for(let e=0;e<r.length;e++)t.push((0,r[e])());return t}function _t(r,t=[]){return e=>{e.providersResolver=(o,a)=>function(r,t,e){const o=Si();if(o.firstCreatePass){const a=so(r);wy(e,o.data,o.blueprint,a,!0),wy(t,o.data,o.blueprint,a,!1)}}(o,a?a(r):r,t)}}class SM{}const MM="ngComponent";class fV{resolveComponentFactory(t){throw function(r){const t=Error(`No component factory found for ${li(r)}. Did you add it to @NgModule.entryComponents?`);return t[MM]=r,t}(t)}}let ma=(()=>{class r{}return r.NULL=new fV,r})();function _g(...r){}function Nu(r,t){return new vt(Kr(r,t))}const _V=function(){return Nu(wn(),Ve())};let vt=(()=>{class r{constructor(e){this.nativeElement=e}}return r.__NG_ELEMENT_ID__=_V,r})();function RM(r){return r instanceof vt?r.nativeElement:r}class ql{}let _a=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>bV(),r})();const bV=function(){const r=Ve(),e=Mr(wn().index,r);return function(r){return r[11]}(vo(e)?e:r)};let Iy=(()=>{class r{}return r.\u0275prov=Ke({token:r,providedIn:"root",factory:()=>null}),r})();class ol{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const IM=new ol("13.0.0"),Pu={};function vg(r,t,e,o,a=!1){for(;null!==e;){const c=t[e.index];if(null!==c&&o.push(On(c)),oo(c))for(let p=10;p<c.length;p++){const f=c[p],v=f[1].firstChild;null!==v&&vg(f[1],f,v,o)}const d=e.type;if(8&d)vg(r,t,e.child,o);else if(32&d){const p=Db(e,t);let f;for(;f=p();)o.push(f)}else if(16&d){const p=LS(t,e);if(Array.isArray(p))o.push(...p);else{const f=uh(t[16]);vg(f[1],f,p,o,!0)}}e=a?e.projectionNext:e.next}return o}class Dh{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return vg(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(oo(t)){const e=t[8],o=e?e.indexOf(this):-1;o>-1&&(Ab(t,o),xs(e,o))}this._attachedToViewContainer=!1}MS(this._lView[1],this._lView)}onDestroy(t){l0(this._lView[1],this._lView,null,t)}markForCheck(){Zb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ey(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,t,e){Al(!0);try{ey(r,t,e)}finally{Al(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,dh(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class CV extends Dh{constructor(t){super(t),this._view=t}detectChanges(){_0(this._view)}checkNoChanges(){!function(r){Al(!0);try{_0(r)}finally{Al(!1)}}(this._view)}get context(){return null}}class xM extends ma{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=lr(t);return new xy(e,this.ngModule)}}function AM(r){const t=[];for(let e in r)r.hasOwnProperty(e)&&t.push({propName:r[e],templateName:e});return t}const wV=new Ae("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>bS});class xy extends SM{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(LP).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return AM(this.componentDef.inputs)}get outputs(){return AM(this.componentDef.outputs)}create(t,e,o,a){const c=(a=a||this.ngModule)?function(r,t){return{get:(e,o,a)=>{const c=r.get(e,Pu,a);return c!==Pu||o===Pu?c:t.get(e,o,a)}}}(t,a.injector):t,d=c.get(ql,uf),p=c.get(Iy,null),f=d.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",E=o?function(r,t,e){if(vn(r))return r.selectRootElement(t,e===mr.ShadowDom);let o="string"==typeof t?r.querySelector(t):t;return o.textContent="",o}(f,o,this.componentDef.encapsulation):xb(d.createRenderer(null,this.componentDef),v,function(r){const t=r.toLowerCase();return"svg"===t?lf:"math"===t?"http://www.w3.org/1998/MathML/":null}(v)),D=this.componentDef.onPush?576:528,x=function(r,t){return{components:[],scheduler:r||bS,clean:yL,playerHandler:t||null,flags:0}}(),N=eg(0,null,null,1,0,null,null,null,null,null),B=hh(null,N,x,D,null,null,d,f,p,c);let Z,z;Yc(B);try{const de=function(r,t,e,o,a,c){const d=e[1];e[20]=r;const f=pu(d,20,2,"#host",null),v=f.mergedAttrs=t.hostAttrs;null!==v&&(ig(f,v,!0),null!==r&&(Kc(a,r,v),null!==f.classes&&Lb(a,r,f.classes),null!==f.styles&&VS(a,r,f.styles)));const E=o.createRenderer(r,t),D=hh(e,o0(t),null,t.onPush?64:16,e[20],f,o,E,c||null,null);return d.firstCreatePass&&(Bl(Fl(f,e),d,t.type),p0(d,f),f0(f,e.length,1)),tg(e,D),e[20]=D}(E,this.componentDef,B,d,f);if(E)if(o)Kc(f,E,["ng-version",IM.full]);else{const{attrs:he,classes:Le}=function(r){const t=[],e=[];let o=1,a=2;for(;o<r.length;){let c=r[o];if("string"==typeof c)2===a?""!==c&&t.push(c,r[++o]):8===a&&e.push(c);else{if(!Qo(a))break;a=c}o++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);he&&Kc(f,E,he),Le&&Le.length>0&&Lb(f,E,Le.join(" "))}if(z=Hc(N,20),void 0!==e){const he=z.projection=[];for(let Le=0;Le<this.ngContentSelectors.length;Le++){const je=e[Le];he.push(null!=je?Array.from(je):null)}}Z=function(r,t,e,o,a){const c=e[1],d=function(r,t,e){const o=wn();r.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),g0(r,o,t,fu(r,t,1,null),e));const a=$r(t,r,o.directiveStart,o);Ar(a,t);const c=Kr(o,t);return c&&Ar(c,t),a}(c,e,t);if(o.components.push(d),r[8]=d,a&&a.forEach(f=>f(d,t)),t.contentQueries){const f=wn();t.contentQueries(1,d,f.directiveStart)}const p=wn();return!c.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Yo(p.index),d0(e[1],p,0,p.directiveStart,p.directiveEnd,t),h0(t,d)),d}(de,this.componentDef,B,x,[YL]),ph(N,B,null)}finally{ja()}return new MV(this.componentType,Z,Nu(z,B),B,z)}}class MV extends class{}{constructor(t,e,o,a,c){super(),this.location=o,this._rootLView=a,this._tNode=c,this.instance=e,this.hostView=this.changeDetectorRef=new CV(a),this.componentType=t}get injector(){return new ra(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class Vs{}class OM{}const Lu=new Map;class NM extends Vs{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new xM(this);const o=Xr(t);this._bootstrapComponents=Ns(o.bootstrap),this._r3Injector=S0(t,e,[{provide:Vs,useValue:this},{provide:ma,useValue:this.componentFactoryResolver}],li(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Pi.THROW_IF_NOT_FOUND,o=bt.Default){return t===Pi||t===Vs||t===fh?this:this._r3Injector.get(t,e,o)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Oy extends OM{constructor(t){super(),this.moduleType=t,null!==Xr(t)&&function(r){const t=new Set;!function e(o){const a=Xr(o,!0),c=a.id;null!==c&&(function(r,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${r} - ${li(t)} vs ${li(t.name)}`)}(c,Lu.get(c),o),Lu.set(c,o));const d=Ns(a.imports);for(const p of d)t.has(p)||(t.add(p),e(p))}(r)}(t)}create(t){return new NM(this.moduleType,t)}}function PM(r,t,e,o,a,c){const d=t+e;return Or(r,d,a)?function(r,t,e){return r[t]=e}(r,d+1,c?o.call(c,a):o(a)):function(r,t){const e=r[t];return e===ti?void 0:e}(r,d+1)}function Fu(r,t){const e=Si();let o;const a=r+20;e.firstCreatePass?(o=function(r,t){if(t)for(let e=t.length-1;e>=0;e--){const o=t[e];if(r===o.name)return o}throw new Xs("302",`The pipe '${r}' could not be found!`)}(t,e.pipeRegistry),e.data[a]=o,o.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(a,o.onDestroy)):o=e.data[a];const c=o.factory||(o.factory=ta(o.type)),d=Br(K);try{const p=Qc(!1),f=c();return Qc(p),function(r,t,e,o){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),t[e]=o}(e,Ve(),a,f),f}finally{Br(d)}}function Bu(r,t,e){const o=r+20,a=Ve(),c=Ha(a,o);return function(r,t){return r[1].data[t].pure}(a,o)?PM(a,vr(),t,c.transform,e,c):c.transform(e)}function ky(r){return t=>{setTimeout(r,void 0,t)}}const At=class extends ve{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,o){var f,v,E;let a=t,c=e||(()=>null),d=o;if(t&&"object"==typeof t){const D=t;a=null==(f=D.next)?void 0:f.bind(D),c=null==(v=D.error)?void 0:v.bind(D),d=null==(E=D.complete)?void 0:E.bind(D)}this.__isAsync&&(c=ky(c),a&&(a=ky(a)),d&&(d=ky(d)));const p=super.subscribe({next:a,error:c,complete:d});return t instanceof l&&t.add(p),p}};function zV(){return this._results[vu()]()}class sl{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=vu(),o=sl.prototype;o[e]||(o[e]=zV)}get changes(){return this._changes||(this._changes=new At)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const o=this;o.dirty=!1;const a=Jr(t);(this._changesDetected=!function(r,t,e){if(r.length!==t.length)return!1;for(let o=0;o<r.length;o++){let a=r[o],c=t[o];if(e&&(a=e(a),c=e(c)),c!==a)return!1}return!0}(o._results,a,e))&&(o._results=a,o.length=a.length,o.last=a[this.length-1],o.first=a[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const XV=function(){return bg(wn(),Ve())};let Xn=(()=>{class r{}return r.__NG_ELEMENT_ID__=XV,r})();const KV=Xn,$V=class extends KV{constructor(t,e,o){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=o}createEmbeddedView(t){const e=this._declarationTContainer.tViews,o=hh(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[19];return null!==c&&(o[19]=c.createEmbeddedView(e)),ph(e,o,t),new Dh(o)}};function bg(r,t){return 4&r.type?new $V(t,r,Nu(r,t)):null}const ZV=function(){return GM(wn(),Ve())};let Un=(()=>{class r{}return r.__NG_ELEMENT_ID__=ZV,r})();const e2=Un,HM=class extends e2{constructor(t,e,o){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=o}get element(){return Nu(this._hostTNode,this._hostLView)}get injector(){return new ra(this._hostTNode,this._hostLView)}get parentInjector(){const t=qc(this._hostTNode,this._hostLView);if(yf(t)){const e=Ya(t,this._hostLView),o=za(t);return new ra(e[1].data[o+8],e)}return new ra(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=UM(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,o){const a=t.createEmbeddedView(e||{});return this.insert(a,o),a}createComponent(t,e,o,a,c){const d=t&&!("function"==typeof t);let p;if(d)p=e;else{const D=e||{};p=D.index,o=D.injector,a=D.projectableNodes,c=D.ngModuleRef}const f=d?t:new xy(lr(t)),v=o||this.parentInjector;if(!c&&null==f.ngModule&&v){const D=v.get(Vs,null);D&&(c=D)}const E=f.create(v,a,void 0,c);return this.insert(E.hostView,p),E}insert(t,e){const o=t._lView,a=o[1];if(oo(o[3])){const E=this.indexOf(t);if(-1!==E)this.detach(E);else{const D=o[3],x=new HM(D,D[6],D[3]);x.detach(x.indexOf(t))}}const c=this._adjustIndex(e),d=this._lContainer;!function(r,t,e,o){const a=10+o,c=e.length;o>0&&(e[a-1][4]=t),o<c-10?(t[4]=e[a],Ka(e,10+o,t)):(e.push(t),t[4]=null),t[3]=e;const d=t[17];null!==d&&e!==d&&function(r,t){const e=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===e?r[9]=[t]:e.push(t)}(d,t);const p=t[19];null!==p&&p.insertView(r),t[2]|=128}(a,o,d,c);const p=Nb(c,d),f=o[11],v=Kf(f,d[7]);return null!==v&&function(r,t,e,o,a,c){o[0]=a,o[6]=t,dh(r,o,e,1,a,c)}(a,d[6],f,o,v,p),t.attachToViewContainerRef(),Ka(Ny(d),c,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=UM(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),o=Ab(this._lContainer,e);o&&(xs(Ny(this._lContainer),e),MS(o[1],o))}detach(t){const e=this._adjustIndex(t,-1),o=Ab(this._lContainer,e);return o&&null!=xs(Ny(this._lContainer),e)?new Dh(o):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function UM(r){return r[8]}function Ny(r){return r[8]||(r[8]=[])}function GM(r,t){let e;const o=t[r.index];if(oo(o))e=o;else{let a;if(8&r.type)a=On(o);else{const c=t[11];a=c.createComment("");const d=Kr(r,t);Jl(c,Kf(c,d),a,function(r,t){return vn(r)?r.nextSibling(t):t.nextSibling}(c,d),!1)}t[r.index]=e=m0(o,t,a,r),tg(t,e)}return new HM(e,r,t)}class Py{constructor(t){this.queryList=t,this.matches=null}clone(){return new Py(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ly{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const o=null!==t.contentQueries?t.contentQueries[0]:e.length,a=[];for(let c=0;c<o;c++){const d=e.getByIndex(c);a.push(this.queries[d.indexInDeclarationView].clone())}return new Ly(a)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==XM(t,e).matches&&this.queries[e].setDirty()}}class jM{constructor(t,e,o=null){this.predicate=t,this.flags=e,this.read=o}}class Fy{constructor(t=[]){this.queries=t}elementStart(t,e){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let o=0;o<this.length;o++){const a=null!==e?e.length:0,c=this.getByIndex(o).embeddedTView(t,a);c&&(c.indexInDeclarationView=o,null!==e?e.push(c):e=[c])}return null!==e?new Fy(e):null}template(t,e){for(let o=0;o<this.queries.length;o++)this.queries[o].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class By{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new By(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let o=t.parent;for(;null!==o&&8&o.type&&o.index!==e;)o=o.parent;return e===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const o=this.metadata.predicate;if(Array.isArray(o))for(let a=0;a<o.length;a++){const c=o[a];this.matchTNodeWithReadOption(t,e,r2(e,c)),this.matchTNodeWithReadOption(t,e,Hl(e,t,c,!1,!1))}else o===Xn?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Hl(e,t,o,!1,!1))}matchTNodeWithReadOption(t,e,o){if(null!==o){const a=this.metadata.read;if(null!==a)if(a===vt||a===Un||a===Xn&&4&e.type)this.addMatch(e.index,-2);else{const c=Hl(e,t,a,!1,!1);null!==c&&this.addMatch(e.index,c)}else this.addMatch(e.index,o)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function r2(r,t){const e=r.localNames;if(null!==e)for(let o=0;o<e.length;o+=2)if(e[o]===t)return e[o+1];return null}function s2(r,t,e,o){return-1===e?function(r,t){return 11&r.type?Nu(r,t):4&r.type?bg(r,t):null}(t,r):-2===e?function(r,t,e){return e===vt?Nu(t,r):e===Xn?bg(t,r):e===Un?GM(t,r):void 0}(r,t,o):$r(r,r[1],e,t)}function WM(r,t,e,o){const a=t[19].queries[o];if(null===a.matches){const c=r.data,d=e.matches,p=[];for(let f=0;f<d.length;f+=2){const v=d[f];p.push(v<0?null:s2(t,c[v],d[f+1],e.metadata.read))}a.matches=p}return a.matches}function Vy(r,t,e,o){const a=r.queries.getByIndex(e),c=a.matches;if(null!==c){const d=WM(r,t,a,e);for(let p=0;p<c.length;p+=2){const f=c[p];if(f>0)o.push(d[p/2]);else{const v=c[p+1],E=t[-f];for(let D=10;D<E.length;D++){const x=E[D];x[17]===x[3]&&Vy(x[1],x,v,o)}if(null!==E[9]){const D=E[9];for(let x=0;x<D.length;x++){const N=D[x];Vy(N[1],N,v,o)}}}}}return o}function Rt(r){const t=Ve(),e=Si(),o=gf();Hd(o+1);const a=XM(e,o);if(r.dirty&&Il(t)===(2==(2&a.metadata.flags))){if(null===a.matches)r.reset([]);else{const c=a.crossesNgTemplate?Vy(e,t,o,[]):WM(e,t,a,o);r.reset(c,RM),r.notifyOnChanges()}return!0}return!1}function Mn(r,t,e){const o=Si();o.firstCreatePass&&(YM(o,new jM(r,t,e),-1),2==(2&t)&&(o.staticViewQueries=!0)),zM(o,Ve(),t)}function Fi(r,t,e,o){const a=Si();if(a.firstCreatePass){const c=wn();YM(a,new jM(t,e,o),c.index),function(r,t){const e=r.contentQueries||(r.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(r.queries.length-1,t)}(a,r),2==(2&e)&&(a.staticContentQueries=!0)}zM(a,Ve(),e)}function It(){return r=Ve(),t=gf(),r[19].queries[t].queryList;var r,t}function zM(r,t,e){const o=new sl(4==(4&e));l0(r,t,o,o.destroy),null===t[19]&&(t[19]=new Ly),t[19].queries.push(new Py(o))}function YM(r,t,e){null===r.queries&&(r.queries=new Fy),r.queries.track(new By(t,e))}function XM(r,t){return r.queries.getByIndex(t)}const Ah=new Ae("Application Initializer");let Hu=(()=>{class r{constructor(e){this.appInits=e,this.resolve=_g,this.reject=_g,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,a)=>{this.resolve=o,this.reject=a})}runInitializers(){if(this.initialized)return;const e=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let a=0;a<this.appInits.length;a++){const c=this.appInits[a]();if(yh(c))e.push(c);else if(lg(c)){const d=new Promise((p,f)=>{c.subscribe({complete:p,error:f})});e.push(d)}}Promise.all(e).then(()=>{o()}).catch(a=>{this.reject(a)}),0===e.length&&o(),this.initialized=!0}}return r.\u0275fac=function(e){return new(e||r)(we(Ah,8))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const Oh=new Ae("AppId"),F2={provide:Oh,useFactory:function(){return`${zy()}${zy()}${zy()}`},deps:[]};function zy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const dR=new Ae("Platform Initializer"),kh=new Ae("Platform ID"),hR=new Ae("appBootstrapListener");let Cg=(()=>{class r{log(e){console.log(e)}warn(e){console.warn(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const va=new Ae("LocaleId"),pR=new Ae("DefaultCurrencyCode");class V2{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Yy=function(r){return new Oy(r)},H2=Yy,U2=function(r){return Promise.resolve(Yy(r))},gR=function(r){const t=Yy(r),o=Ns(Xr(r).declarations).reduce((a,c)=>{const d=lr(c);return d&&a.push(new xy(d)),a},[]);return new V2(t,o)},G2=gR,j2=function(r){return Promise.resolve(gR(r))};let Tg=(()=>{class r{constructor(){this.compileModuleSync=H2,this.compileModuleAsync=U2,this.compileModuleAndAllComponentsSync=G2,this.compileModuleAndAllComponentsAsync=j2}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const Y2=(()=>Promise.resolve(0))();function Xy(r){"undefined"==typeof Zone?Y2.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Jt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new At(!1),this.onMicrotaskEmpty=new At(!1),this.onStable=new At(!1),this.onError=new At(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!o&&e,a.shouldCoalesceRunChangeDetection=o,a.lastRequestAnimationFrameId=-1,a.nativeRequestAnimationFrame=function(){let r=Ii.requestAnimationFrame,t=Ii.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&t){const e=r[Zone.__symbol__("OriginalDelegate")];e&&(r=e);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(r){const t=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Ii,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,$y(r),r.isCheckStableRunning=!0,Ky(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),$y(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,o,a,c,d,p)=>{try{return mR(r),e.invokeTask(a,c,d,p)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===c.type||r.shouldCoalesceRunChangeDetection)&&t(),_R(r)}},onInvoke:(e,o,a,c,d,p,f)=>{try{return mR(r),e.invoke(a,c,d,p,f)}finally{r.shouldCoalesceRunChangeDetection&&t(),_R(r)}},onHasTask:(e,o,a,c)=>{e.hasTask(a,c),o===a&&("microTask"==c.change?(r._hasPendingMicrotasks=c.microTask,$y(r),Ky(r)):"macroTask"==c.change&&(r.hasPendingMacrotasks=c.macroTask))},onHandleError:(e,o,a,c)=>(e.handleError(a,c),r.runOutsideAngular(()=>r.onError.emit(c)),!1)})}(a)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Jt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Jt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,o){return this._inner.run(t,e,o)}runTask(t,e,o,a){const c=this._inner,d=c.scheduleEventTask("NgZoneEvent: "+a,t,K2,_g,_g);try{return c.runTask(d,e,o)}finally{c.cancelTask(d)}}runGuarded(t,e,o){return this._inner.runGuarded(t,e,o)}runOutsideAngular(t){return this._outer.run(t)}}const K2={};function Ky(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function $y(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function mR(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function _R(r){r._nesting--,Ky(r)}class Q2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new At,this.onMicrotaskEmpty=new At,this.onStable=new At,this.onError=new At}run(t,e,o){return t.apply(e,o)}runGuarded(t,e,o){return t.apply(e,o)}runOutsideAngular(t){return t()}runTask(t,e,o,a){return t.apply(e,o)}}let Jy=(()=>{class r{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Jt.assertNotInAngularZone(),Xy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xy(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(e)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,o,a){let c=-1;o&&o>0&&(c=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==c),e(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:e,timeoutId:c,updateCb:a})}whenStable(e,o,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,o,a),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,o,a){return[]}}return r.\u0275fac=function(e){return new(e||r)(we(Jt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),vR=(()=>{class r{constructor(){this._applications=new Map,Qy.addToWindow(this)}registerApplication(e,o){this._applications.set(e,o)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,o=!0){return Qy.findTestabilityInTree(this,e,o)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();class Z2{addToWindow(t){}findTestabilityInTree(t,e,o){return null}}let Qy=new Z2,bR=!0,yR=!1;function Zy(){return yR=!0,bR}let is;const ER=new Ae("AllowMultipleToken");class qy{constructor(t,e){this.name=t,this.token=e}}function CR(r,t,e=[]){const o=`Platform: ${t}`,a=new Ae(o);return(c=[])=>{let d=TR();if(!d||d.injector.get(ER,!1))if(r)r(e.concat(c).concat({provide:a,useValue:!0}));else{const p=e.concat(c).concat({provide:a,useValue:!0},{provide:gh,useValue:"platform"});!function(r){if(is&&!is.destroyed&&!is.injector.get(ER,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");is=r.get(wR);const t=r.get(dR,null);t&&t.forEach(e=>e())}(Pi.create({providers:p,name:o}))}return function(r){const t=TR();if(!t)throw new Error("No platform exists!");if(!t.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(a)}}function TR(){return is&&!is.destroyed?is:null}let wR=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,o){const p=function(r,t){let e;return e="noop"===r?new Q2:("zone.js"===r?void 0:r)||new Jt({enableLongStackTrace:Zy(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),f=[{provide:Jt,useValue:p}];return p.run(()=>{const v=Pi.create({providers:f,parent:this.injector,name:e.moduleType.name}),E=e.create(v),D=E.injector.get(ks,null);if(!D)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return p.runOutsideAngular(()=>{const x=p.onError.subscribe({next:N=>{D.handleError(N)}});E.onDestroy(()=>{eE(this._modules,E),x.unsubscribe()})}),function(r,t,e){try{const o=e();return yh(o)?o.catch(a=>{throw t.runOutsideAngular(()=>r.handleError(a)),a}):o}catch(o){throw t.runOutsideAngular(()=>r.handleError(o)),o}}(D,p,()=>{const x=E.injector.get(Hu);return x.runInitializers(),x.donePromise.then(()=>(function(r){Fr(r,"Expected localeId to be defined"),"string"==typeof r&&(eM=r.toLowerCase().replace(/_/g,"-"))}(E.injector.get(va,hg)||hg),this._moduleDoBootstrap(E),E))})})}bootstrapModule(e,o=[]){const a=SR({},o);return function(r,t,e){const o=new Oy(e);return Promise.resolve(o)}(0,0,e).then(c=>this.bootstrapModuleFactory(c,a))}_moduleDoBootstrap(e){const o=e.injector.get(ec);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(a=>o.bootstrap(a));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${li(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(o)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(e){return new(e||r)(we(Pi))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();function SR(r,t){return Array.isArray(t)?t.reduce(SR,r):Qe(Qe({},r),t)}let ec=(()=>{class r{constructor(e,o,a,c,d){this._zone=e,this._injector=o,this._exceptionHandler=a,this._componentFactoryResolver=c,this._initStatus=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new ie(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),f=new ie(v=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Jt.assertNotInAngularZone(),Xy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const D=this._zone.onUnstable.subscribe(()=>{Jt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{E.unsubscribe(),D.unsubscribe()}});this.isStable=gr(p,f.pipe(Ed()))}bootstrap(e,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let a;a=e instanceof SM?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(a.componentType);const c=function(r){return r.isBoundToModule}(a)?void 0:this._injector.get(Vs),p=a.create(Pi.NULL,[],o||a.selector,c),f=p.location.nativeElement,v=p.injector.get(Jy,null),E=v&&p.injector.get(vR);return v&&E&&E.registerApplication(f,v),p.onDestroy(()=>{this.detachView(p.hostView),eE(this.components,p),E&&E.unregisterApplication(f)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const o=e;this._views.push(o),o.attachToAppRef(this)}detachView(e){const o=e;eE(this._views,o),o.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(hR,[]).concat(this._bootstrapListeners).forEach(a=>a(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(e){return new(e||r)(we(Jt),we(Pi),we(ks),we(ma),we(Hu))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();function eE(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const pH=function(r){return function(r,t,e){if(kc(r)&&!e){const o=Mr(r.index,t);return new Dh(o,o)}return 47&r.type?new Dh(t[16],t):null}(wn(),Ve(),16==(16&r))};let Rn=(()=>{class r{}return r.__NG_ELEMENT_ID__=pH,r})();class OR{constructor(){}supports(t){return vh(t)}create(t){return new DH(t)}}const SH=(r,t)=>t;class DH{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||SH}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,o=this._removalsHead,a=0,c=null;for(;e||o;){const d=!o||e&&e.currentIndex<NR(o,a,c)?e:o,p=NR(d,a,c),f=d.currentIndex;if(d===o)a--,o=o._nextRemoved;else if(e=e._next,null==d.previousIndex)a++;else{c||(c=[]);const v=p-a,E=f-a;if(v!=E){for(let x=0;x<v;x++){const N=x<c.length?c[x]:c[x]=0,B=N+x;E<=B&&B<v&&(c[x]=N+1)}c[d.previousIndex]=E-v}}p!==f&&t(d,p,f)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!vh(t))throw new Error(`Error trying to diff '${li(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let a,c,d,e=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let p=0;p<this.length;p++)c=t[p],d=this._trackByFn(p,c),null!==e&&Object.is(e.trackById,d)?(o&&(e=this._verifyReinsertion(e,c,d,p)),Object.is(e.item,c)||this._addIdentityChange(e,c)):(e=this._mismatch(e,c,d,p),o=!0),e=e._next}else a=0,function(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{const e=r[vu()]();let o;for(;!(o=e.next()).done;)t(o.value)}}(t,p=>{d=this._trackByFn(a,p),null!==e&&Object.is(e.trackById,d)?(o&&(e=this._verifyReinsertion(e,p,d,a)),Object.is(e.item,p)||this._addIdentityChange(e,p)):(e=this._mismatch(e,p,d,a),o=!0),e=e._next,a++}),this.length=a;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,o,a){let c;return null===t?c=this._itTail:(c=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,c,a)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,a))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,c,a)):t=this._addAfter(new MH(e,o),c,a),t}_verifyReinsertion(t,e,o,a){let c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==c?t=this._reinsertAfter(c,t._prev,a):t.currentIndex!=a&&(t.currentIndex=a,this._addToMoves(t,a)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const a=t._prevRemoved,c=t._nextRemoved;return null===a?this._removalsHead=c:a._nextRemoved=c,null===c?this._removalsTail=a:c._prevRemoved=a,this._insertAfter(t,e,o),this._addToMoves(t,o),t}_moveAfter(t,e,o){return this._unlink(t),this._insertAfter(t,e,o),this._addToMoves(t,o),t}_addAfter(t,e,o){return this._insertAfter(t,e,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,o){const a=null===e?this._itHead:e._next;return t._next=a,t._prev=e,null===a?this._itTail=t:a._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new kR),this._linkedRecords.put(t),t.currentIndex=o,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,o=t._next;return null===e?this._itHead=o:e._next=o,null===o?this._itTail=e:o._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kR),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class MH{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RH{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===e||e<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}remove(t){const e=t._prevDup,o=t._nextDup;return null===e?this._head=o:e._nextDup=o,null===o?this._tail=e:o._prevDup=e,null===this._head}}class kR{constructor(){this.map=new Map}put(t){const e=t.trackById;let o=this.map.get(e);o||(o=new RH,this.map.set(e,o)),o.add(t)}get(t,e){const a=this.map.get(t);return a?a.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NR(r,t,e){const o=r.previousIndex;if(null===o)return o;let a=0;return e&&o<e.length&&(a=e[o]),o+t+a}class PR{constructor(){}supports(t){return t instanceof Map||uy(t)}create(){return new IH}}class IH{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||uy(t)))throw new Error(`Error trying to diff '${li(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(o,a)=>{if(e&&e.key===a)this._maybeAddToChanges(e,o),this._appendAfter=e,e=e._next;else{const c=this._getOrCreateRecordForKey(a,o);e=this._insertBeforeOrAppend(e,c)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let o=e;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const o=t._prev;return e._next=t,e._prev=o,t._prev=e,o&&(o._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const a=this._records.get(t);this._maybeAddToChanges(a,e);const c=a._prev,d=a._next;return c&&(c._next=d),d&&(d._prev=c),a._next=null,a._prev=null,a}const o=new xH(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(o=>e(t[o],o))}}class xH{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LR(){return new po([new OR])}let po=(()=>{class r{constructor(e){this.factories=e}static create(e,o){if(null!=o){const a=o.factories.slice();e=e.concat(a)}return new r(e)}static extend(e){return{provide:r,useFactory:o=>r.create(e,o||LR()),deps:[[r,new Bn,new cn]]}}find(e){const o=this.factories.find(a=>a.supports(e));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'`)}}return r.\u0275prov=Ke({token:r,providedIn:"root",factory:LR}),r})();function FR(){return new Uu([new PR])}let Uu=(()=>{class r{constructor(e){this.factories=e}static create(e,o){if(o){const a=o.factories.slice();e=e.concat(a)}return new r(e)}static extend(e){return{provide:r,useFactory:o=>r.create(e,o||FR()),deps:[[r,new Bn,new cn]]}}find(e){const o=this.factories.find(a=>a.supports(e));if(o)return o;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return r.\u0275prov=Ke({token:r,providedIn:"root",factory:FR}),r})();const OH=[new PR],NH=new po([new OR]),PH=new Uu(OH),LH=CR(null,"core",[{provide:kh,useValue:"unknown"},{provide:wR,deps:[Pi]},{provide:vR,deps:[]},{provide:Cg,deps:[]}]),UH=[{provide:ec,useClass:ec,deps:[Jt,Pi,ks,ma,Hu]},{provide:wV,deps:[Jt],useFactory:function(r){let t=[];return r.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Hu,useClass:Hu,deps:[[new cn,Ah]]},{provide:Tg,useClass:Tg,deps:[]},F2,{provide:po,useFactory:function(){return NH},deps:[]},{provide:Uu,useFactory:function(){return PH},deps:[]},{provide:va,useFactory:function(r){return r||"undefined"!=typeof $localize&&$localize.locale||hg},deps:[[new el(va),new cn,new Bn]]},{provide:pR,useValue:"USD"}];let jH=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(we(ec))},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:UH}),r})(),Fg=null;function Hs(){return Fg}const Lt=new Ae("DocumentToken");let oc=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:function(){return we(EI)},providedIn:"platform"}),r})();const FG=new Ae("Location Initialized");let EI=(()=>{class r extends oc{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hs().getBaseHref(this._doc)}onPopState(e){const o=Hs().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=Hs().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,a){CI()?this._history.pushState(e,o,a):this.location.hash=a}replaceState(e,o,a){CI()?this._history.replaceState(e,o,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(we(Lt))},r.\u0275prov=Ke({token:r,factory:function(){return new EI(we(Lt))},providedIn:"platform"}),r})();function CI(){return!!window.history.pushState}function RE(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function TI(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function ya(r){return r&&"?"!==r[0]?"?"+r:r}let Xu=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:function(){return function(r){const t=we(Lt).location;return new wI(we(oc),t&&t.origin||"")}()},providedIn:"root"}),r})();const IE=new Ae("appBaseHref");let wI=(()=>{class r extends Xu{constructor(e,o){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==o&&(o=this._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return RE(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+ya(this._platformLocation.search),a=this._platformLocation.hash;return a&&e?`${o}${a}`:o}pushState(e,o,a,c){const d=this.prepareExternalUrl(a+ya(c));this._platformLocation.pushState(e,o,d)}replaceState(e,o,a,c){const d=this.prepareExternalUrl(a+ya(c));this._platformLocation.replaceState(e,o,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,a;null==(a=(o=this._platformLocation).historyGo)||a.call(o,e)}}return r.\u0275fac=function(e){return new(e||r)(we(oc),we(IE,8))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),HG=(()=>{class r extends Xu{constructor(e,o){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(e){const o=RE(this._baseHref,e);return o.length>0?"#"+o:o}pushState(e,o,a,c){let d=this.prepareExternalUrl(a+ya(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,o,d)}replaceState(e,o,a,c){let d=this.prepareExternalUrl(a+ya(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,o,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,a;null==(a=(o=this._platformLocation).historyGo)||a.call(o,e)}}return r.\u0275fac=function(e){return new(e||r)(we(oc),we(IE,8))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),zh=(()=>{class r{constructor(e,o){this._subject=new At,this._urlChangeListeners=[],this._platformStrategy=e;const a=this._platformStrategy.getBaseHref();this._platformLocation=o,this._baseHref=TI(SI(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+ya(o))}normalize(e){return r.stripTrailingSlash(function(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,SI(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,o="",a=null){this._platformStrategy.pushState(a,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ya(o)),a)}replaceState(e,o="",a=null){this._platformStrategy.replaceState(a,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ya(o)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var o,a;null==(a=(o=this._platformStrategy).historyGo)||a.call(o,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}))}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(a=>a(e,o))}subscribe(e,o,a){return this._subject.subscribe({next:e,error:o,complete:a})}}return r.normalizeQueryParams=ya,r.joinWithSlash=RE,r.stripTrailingSlash=TI,r.\u0275fac=function(e){return new(e||r)(we(Xu),we(oc))},r.\u0275prov=Ke({token:r,factory:function(){return new zh(we(Xu),we(oc))},providedIn:"root"}),r})();function SI(r){return r.replace(/\/index.html$/,"")}var Kn=(()=>((Kn=Kn||{})[Kn.Zero=0]="Zero",Kn[Kn.One=1]="One",Kn[Kn.Two=2]="Two",Kn[Kn.Few=3]="Few",Kn[Kn.Many=4]="Many",Kn[Kn.Other=5]="Other",Kn))();const $G=function(r){return function(r){const t=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let e=qD(t);if(e)return e;const o=t.split("-")[0];if(e=qD(o),e)return e;if("en"===o)return pB;throw new Error(`Missing locale data for the locale "${r}".`)}(r)[ct.PluralCase]};class Xg{}let S3=(()=>{class r extends Xg{constructor(e){super(),this.locale=e}getPluralCategory(e,o){switch($G(o||this.locale)(e)){case Kn.Zero:return"zero";case Kn.One:return"one";case Kn.Two:return"two";case Kn.Few:return"few";case Kn.Many:return"many";default:return"other"}}}return r.\u0275fac=function(e){return new(e||r)(we(va))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();function NI(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const o=e.indexOf("="),[a,c]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(a.trim()===t)return decodeURIComponent(c)}return null}let PI=(()=>{class r{constructor(e,o,a,c){this._iterableDiffers=e,this._keyValueDiffers=o,this._ngEl=a,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(vh(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachChangedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachRemovedItem(o=>{o.previousValue&&this._toggleClass(o.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(o=>{if("string"!=typeof o.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${li(o.item)}`);this._toggleClass(o.item,!0)}),e.forEachRemovedItem(o=>this._toggleClass(o.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!0)):Object.keys(e).forEach(o=>this._toggleClass(o,!!e[o])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!1)):Object.keys(e).forEach(o=>this._toggleClass(o,!1)))}_toggleClass(e,o){(e=e.trim())&&e.split(/\s+/g).forEach(a=>{o?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return r.\u0275fac=function(e){return new(e||r)(K(po),K(Uu),K(vt),K(_a))},r.\u0275dir=Ne({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),r})();class M3{constructor(t,e,o,a){this.$implicit=t,this.ngForOf=e,this.index=o,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let LI=(()=>{class r{constructor(e,o,a){this._viewContainer=e,this._template=o,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(o){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const o=[];e.forEachOperation((a,c,d)=>{if(null==a.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new M3(null,this._ngForOf,-1,-1),null===d?void 0:d),f=new FI(a,p);o.push(f)}else if(null==d)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const p=this._viewContainer.get(c);this._viewContainer.move(p,d);const f=new FI(a,p);o.push(f)}});for(let a=0;a<o.length;a++)this._perViewChange(o[a].view,o[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const d=this._viewContainer.get(a);d.context.index=a,d.context.count=c,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(e,o){e.context.$implicit=o.item}static ngTemplateContextGuard(e,o){return!0}}return r.\u0275fac=function(e){return new(e||r)(K(Un),K(Xn),K(po))},r.\u0275dir=Ne({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();class FI{constructor(t,e){this.record=t,this.view=e}}let sc=(()=>{class r{constructor(e,o){this._viewContainer=e,this._context=new I3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){BI("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){BI("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,o){return!0}}return r.\u0275fac=function(e){return new(e||r)(K(Un),K(Xn))},r.\u0275dir=Ne({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class I3{constructor(){this.$implicit=null,this.ngIf=null}}function BI(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${li(t)}'.`)}class BE{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Kg=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const o=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||o,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),o}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let o=0;o<this._defaultViews.length;o++)this._defaultViews[o].enforceState(e)}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ne({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),r})(),VI=(()=>{class r{constructor(e,o,a){this.ngSwitch=a,a._addCase(),this._view=new BE(e,o)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(e){return new(e||r)(K(Un),K(Xn),K(Kg,9))},r.\u0275dir=Ne({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),r})();class k3{createSubscription(t,e){return t.subscribe({next:e,error:o=>{throw o}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class N3{createSubscription(t,e){return t.then(e,o=>{throw o})}dispose(t){}onDestroy(t){}}const P3=new N3,L3=new k3;let GI=(()=>{class r{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,o=>this._updateLatestValue(e,o))}_selectStrategy(e){if(yh(e))return P3;if(hD(e))return L3;throw function(r,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${li(r)}'`)}(r,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,o){e===this._obj&&(this._latestValue=o,this._ref.markForCheck())}}return r.\u0275fac=function(e){return new(e||r)(K(Rn,16))},r.\u0275pipe=_r({name:"async",type:r,pure:!1}),r})(),jI=(()=>{class r{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=WI}transform(e,o=WI){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const a=this.differ.diff(e),c=o!==this.compareFn;return a&&(this.keyValues=[],a.forEachItem(d=>{this.keyValues.push(function(r,t){return{key:r,value:t}}(d.key,d.currentValue))})),(a||c)&&(this.keyValues.sort(o),this.compareFn=o),this.keyValues}}return r.\u0275fac=function(e){return new(e||r)(K(Uu,16))},r.\u0275pipe=_r({name:"keyvalue",type:r,pure:!1}),r})();function WI(r,t){const e=r.key,o=t.key;if(e===o)return 0;if(void 0===e)return 1;if(void 0===o)return-1;if(null===e)return 1;if(null===o)return-1;if("string"==typeof e&&"string"==typeof o)return e<o?-1:1;if("number"==typeof e&&"number"==typeof o)return e-o;if("boolean"==typeof e&&"boolean"==typeof o)return e<o?-1:1;const a=String(e),c=String(o);return a==c?0:a<c?-1:1}let rr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[{provide:Xg,useClass:S3}]}),r})();const zI="browser";let ij=(()=>{class r{}return r.\u0275prov=Ke({token:r,providedIn:"root",factory:()=>new nj(we(Lt),window)}),r})();class nj{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(r,t){const e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const o=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let a=o.currentNode;for(;a;){const c=a.shadowRoot;if(c){const d=c.getElementById(t)||c.querySelector(`[name="${t}"]`);if(d)return d}a=o.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),o=e.left+this.window.pageXOffset,a=e.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(o-c[0],a-c[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=YI(this.window.history)||YI(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function YI(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class XI{}class UE extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var r;r=new UE,Fg||(Fg=r)}onAndCancel(t,e,o){return t.addEventListener(e,o,!1),()=>{t.removeEventListener(e,o,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Kh=Kh||document.querySelector("base"),Kh?Kh.getAttribute("href"):null);return null==e?null:function(r){$g=$g||document.createElement("a"),$g.setAttribute("href",r);const t=$g.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Kh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return NI(document.cookie,t)}}let $g,Kh=null;const KI=new Ae("TRANSITION_ID"),cj=[{provide:Ah,useFactory:function(r,t,e){return()=>{e.get(Hu).donePromise.then(()=>{const o=Hs(),a=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let c=0;c<a.length;c++)o.remove(a[c])})}},deps:[KI,Lt,Pi],multi:!0}];class GE{static init(){var r;r=new GE,Qy=r}addToWindow(t){Ii.getAngularTestability=(o,a=!0)=>{const c=t.findTestabilityInTree(o,a);if(null==c)throw new Error("Could not find testability for element.");return c},Ii.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ii.getAllAngularRootElements=()=>t.getAllRootElements(),Ii.frameworkStabilizers||(Ii.frameworkStabilizers=[]),Ii.frameworkStabilizers.push(o=>{const a=Ii.getAllAngularTestabilities();let c=a.length,d=!1;const p=function(f){d=d||f,c--,0==c&&o(d)};a.forEach(function(f){f.whenStable(p)})})}findTestabilityInTree(t,e,o){if(null==e)return null;const a=t.getTestability(e);return null!=a?a:o?Hs().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let uj=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const $h=new Ae("EventManagerPlugins");let Qg=(()=>{class r{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(a=>a.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,a){return this._findPluginFor(o).addEventListener(e,o,a)}addGlobalEventListener(e,o,a){return this._findPluginFor(o).addGlobalEventListener(e,o,a)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const a=this._plugins;for(let c=0;c<a.length;c++){const d=a[c];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(we($h),we(Jt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();class jE{constructor(t){this._doc=t}addGlobalEventListener(t,e,o){const a=Hs().getGlobalEventTarget(this._doc,t);if(!a)throw new Error(`Unsupported event target ${a} for event ${e}`);return this.addEventListener(a,e,o)}}let JI=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),o.add(a))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),Jh=(()=>{class r extends JI{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,a){e.forEach(c=>{const d=this._doc.createElement("style");d.textContent=c,a.push(o.appendChild(d))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(QI),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,a)=>{this._addStylesToHost(e,a,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(QI))}}return r.\u0275fac=function(e){return new(e||r)(we(Lt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();function QI(r){Hs().remove(r)}const WE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},zE=/%COMP%/g;function Zg(r,t,e){for(let o=0;o<t.length;o++){let a=t[o];Array.isArray(a)?Zg(r,a,e):(a=a.replace(zE,r),e.push(a))}return e}function ex(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let qg=(()=>{class r{constructor(e,o,a){this.eventManager=e,this.sharedStylesHost=o,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new YE(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case mr.Emulated:{let a=this.rendererByCompId.get(o.id);return a||(a=new Sj(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,a)),a.applyToHost(e),a}case 1:case mr.ShadowDom:return new Dj(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const a=Zg(o.id,o.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(we(Qg),we(Jh),we(Oh))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();class YE{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(WE[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,o){t&&t.insertBefore(e,o)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error(`The selector "${t}" did not match any elements`);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,a){if(a){e=a+":"+e;const c=WE[a];c?t.setAttributeNS(c,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){const a=WE[o];a?t.removeAttributeNS(a,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,a){a&(co.DashCase|co.Important)?t.style.setProperty(e,o,a&co.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&co.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t[e]=o}setValue(t,e){t.nodeValue=e}listen(t,e,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ex(o)):this.eventManager.addEventListener(t,e,ex(o))}}class Sj extends YE{constructor(t,e,o,a){super(t),this.component=o;const c=Zg(a+"-"+o.id,o.styles,[]);e.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(zE,a+"-"+o.id),this.hostAttr="_nghost-%COMP%".replace(zE,a+"-"+o.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}}class Dj extends YE{constructor(t,e,o,a){super(t),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Zg(a.id,a.styles,[]);for(let d=0;d<c.length;d++){const p=document.createElement("style");p.textContent=c[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Mj=(()=>{class r extends jE{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,a){return e.addEventListener(o,a,!1),()=>this.removeEventListener(e,o,a)}removeEventListener(e,o,a){return e.removeEventListener(o,a)}}return r.\u0275fac=function(e){return new(e||r)(we(Lt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const nx=["alt","control","meta","shift"],Nj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rx={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pj={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let Lj=(()=>{class r extends jE{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,o,a){const c=r.parseEventName(o),d=r.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hs().onAndCancel(e,c.domEventName,d))}static parseEventName(e){const o=e.toLowerCase().split("."),a=o.shift();if(0===o.length||"keydown"!==a&&"keyup"!==a)return null;const c=r._normalizeKey(o.pop());let d="";if(nx.forEach(f=>{const v=o.indexOf(f);v>-1&&(o.splice(v,1),d+=f+".")}),d+=c,0!=o.length||0===c.length)return null;const p={};return p.domEventName=a,p.fullKey=d,p}static getEventFullKey(e){let o="",a=function(r){let t=r.key;if(null==t){if(t=r.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===r.location&&rx.hasOwnProperty(t)&&(t=rx[t]))}return Nj[t]||t}(e);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),nx.forEach(c=>{c!=a&&Pj[c](e)&&(o+=c+".")}),o+=a,o}static eventCallback(e,o,a){return c=>{r.getEventFullKey(c)===e&&a.runGuarded(()=>o(c))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(we(Lt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),Qh=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:function(e){let o=null;return o=e?new(e||r):we(KE),o},providedIn:"root"}),r})(),KE=(()=>{class r extends Qh{constructor(e){super(),this._doc=e}sanitize(e,o){if(null==o)return null;switch(e){case Pt.NONE:return o;case Pt.HTML:return Co(o,"HTML")?Ir(o):gn(this._doc,String(o)).toString();case Pt.STYLE:return Co(o,"Style")?Ir(o):o;case Pt.SCRIPT:if(Co(o,"Script"))return Ir(o);throw new Error("unsafe value used in a script context");case Pt.URL:return Gf(o),Co(o,"URL")?Ir(o):Kl(String(o));case Pt.RESOURCE_URL:if(Co(o,"ResourceURL"))return Ir(o);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function(r){return new cb(r)}(e)}bypassSecurityTrustStyle(e){return function(r){return new ub(r)}(e)}bypassSecurityTrustScript(e){return function(r){return new db(r)}(e)}bypassSecurityTrustUrl(e){return function(r){return new hb(r)}(e)}bypassSecurityTrustResourceUrl(e){return function(r){return new pb(r)}(e)}}return r.\u0275fac=function(e){return new(e||r)(we(Lt))},r.\u0275prov=Ke({token:r,factory:function(e){let o=null;return o=e?new e:function(r){return new KE(r.get(Lt))}(we(Pi)),o},providedIn:"root"}),r})();const Wj=CR(LH,"browser",[{provide:kh,useValue:zI},{provide:dR,useValue:function(){UE.makeCurrent(),GE.init()},multi:!0},{provide:Lt,useFactory:function(){return r=document,Pd=r,document;var r},deps:[]}]),zj=[[],{provide:gh,useValue:"root"},{provide:ks,useFactory:function(){return new ks},deps:[]},{provide:$h,useClass:Mj,multi:!0,deps:[Lt,Jt,kh]},{provide:$h,useClass:Lj,multi:!0,deps:[Lt]},[],{provide:qg,useClass:qg,deps:[Qg,Jh,Oh]},{provide:ql,useExisting:qg},{provide:JI,useExisting:Jh},{provide:Jh,useClass:Jh,deps:[Lt]},{provide:Jy,useClass:Jy,deps:[Jt]},{provide:Qg,useClass:Qg,deps:[$h,Jt]},{provide:XI,useClass:uj,deps:[]},[]];let ox=(()=>{class r{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:r,providers:[{provide:Oh,useValue:e.appId},{provide:KI,useExisting:Oh},cj]}}}return r.\u0275fac=function(e){return new(e||r)(we(r,12))},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:zj,imports:[rr,jH]}),r})();"undefined"!=typeof window&&window;const{isArray:qj}=Array,{getPrototypeOf:eW,prototype:tW,keys:iW}=Object;function ax(r){if(1===r.length){const t=r[0];if(qj(t))return{args:t,keys:null};if(function(r){return r&&"object"==typeof r&&eW(r)===tW}(t)){const e=iW(t);return{args:e.map(o=>t[o]),keys:e}}}return{args:r,keys:null}}const{isArray:rW}=Array;function JE(r){return Re(t=>function(r,t){return rW(t)?r(...t):r(t)}(r,t))}function lx(r,t){return r.reduce((e,o,a)=>(e[o]=t[a],e),{})}function cx(...r){const t=Fp(r),{args:e,keys:o}=ax(r),a=new ie(c=>{const{length:d}=e;if(!d)return void c.complete();const p=new Array(d);let f=d,v=d;for(let E=0;E<d;E++){let D=!1;et(e[E]).subscribe(new xe(c,x=>{D||(D=!0,v--),p[E]=x},()=>f--,void 0,()=>{(!f||!D)&&(v||c.next(o?lx(o,p):p),c.complete())}))}});return t?a.pipe(JE(t)):a}let ux=(()=>{class r{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(K(_a),K(vt))},r.\u0275dir=Ne({type:r}),r})(),ac=(()=>{class r extends ux{}return r.\u0275fac=function(){let t;return function(o){return(t||(t=ci(r)))(o||r)}}(),r.\u0275dir=Ne({type:r,features:[$e]}),r})();const pr=new Ae("NgValueAccessor"),aW={provide:pr,useExisting:$t(()=>em),multi:!0},cW=new Ae("CompositionEventMode");let em=(()=>{class r extends ux{constructor(e,o,a){super(e,o),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=Hs()?Hs().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(K(_a),K(vt),K(cW,8))},r.\u0275dir=Ne({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&Yt("input",function(c){return o._handleInput(c.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(c){return o._compositionEnd(c.target.value)})},features:[_t([aW]),$e]}),r})();const or=new Ae("NgValidators"),dl=new Ae("NgAsyncValidators");function Cx(r){return null!=r}function Tx(r){const t=yh(r)?Ln(r):r;return lg(t),t}function wx(r){let t={};return r.forEach(e=>{t=null!=e?Qe(Qe({},t),e):t}),0===Object.keys(t).length?null:t}function Sx(r,t){return t.map(e=>e(r))}function Dx(r){return r.map(t=>function(r){return!r.validate}(t)?t:e=>t.validate(e))}function QE(r){return null!=r?function(r){if(!r)return null;const t=r.filter(Cx);return 0==t.length?null:function(e){return wx(Sx(e,t))}}(Dx(r)):null}function ZE(r){return null!=r?function(r){if(!r)return null;const t=r.filter(Cx);return 0==t.length?null:function(e){return cx(Sx(e,t).map(Tx)).pipe(Re(wx))}}(Dx(r)):null}function Ix(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function qE(r){return r?Array.isArray(r)?r:[r]:[]}function tm(r,t){return Array.isArray(r)?r.includes(t):r===t}function Ox(r,t){const e=qE(t);return qE(r).forEach(a=>{tm(e,a)||e.push(a)}),e}function kx(r,t){return qE(t).filter(e=>!tm(r,e))}class Nx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=QE(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ZE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Yr extends Nx{get formDirective(){return null}get path(){return null}}class Ta extends Nx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Lx=(()=>{class r extends class{constructor(t){this._cd=t}is(t){var e,o,a;return"submitted"===t?!!(null==(e=this._cd)?void 0:e.submitted):!!(null==(a=null==(o=this._cd)?void 0:o.control)?void 0:a[t])}}{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(K(Ta,2))},r.\u0275dir=Ne({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&Ti("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[$e]}),r})();function Zh(r,t){(function(r,t){const e=function(r){return r._rawValidators}(r);null!==t.validator?r.setValidators(Ix(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const o=function(r){return r._rawAsyncValidators}(r);null!==t.asyncValidator?r.setAsyncValidators(Ix(o,t.asyncValidator)):"function"==typeof o&&r.setAsyncValidators([o]);const a=()=>r.updateValueAndValidity();om(t._rawValidators,a),om(t._rawAsyncValidators,a)})(r,t),t.valueAccessor.writeValue(r.value),function(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Fx(r,t)})}(r,t),function(r,t){const e=(o,a)=>{t.valueAccessor.writeValue(o),a&&t.viewToModelUpdate(o)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&Fx(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function(r,t){if(t.valueAccessor.setDisabledState){const e=o=>{t.valueAccessor.setDisabledState(o)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function om(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Fx(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function am(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const qh="VALID",lm="INVALID",Ku="PENDING",ep="DISABLED";function oC(r){return(aC(r)?r.validators:r)||null}function Hx(r){return Array.isArray(r)?QE(r):r||null}function sC(r,t){return(aC(t)?t.asyncValidators:r)||null}function Ux(r){return Array.isArray(r)?ZE(r):r||null}function aC(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class lC{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Hx(this._rawValidators),this._composedAsyncValidatorFn=Ux(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===qh}get invalid(){return this.status===lm}get pending(){return this.status==Ku}get disabled(){return this.status===ep}get enabled(){return this.status!==ep}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Hx(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Ux(t)}addValidators(t){this.setValidators(Ox(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ox(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(kx(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(kx(t,this._rawAsyncValidators))}hasValidator(t){return tm(this._rawValidators,t)}hasAsyncValidator(t){return tm(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ku,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ep,this.errors=null,this._forEachChild(o=>{o.disable(er(Qe({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(er(Qe({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=qh,this._forEachChild(o=>{o.enable(er(Qe({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(er(Qe({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qh||this.status===Ku)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ep:qh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ku,this._hasOwnPendingAsyncValidator=!0;const e=Tx(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(r,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let o=r;return t.forEach(a=>{o=o instanceof cC?o.controls.hasOwnProperty(a)?o.controls[a]:null:o instanceof wW&&o.at(a)||null}),o}(this,t)}getError(t,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new At,this.statusChanges=new At}_calculateStatus(){return this._allControlsDisabled()?ep:this.errors?lm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ku)?Ku:this._anyControlsHaveStatus(lm)?lm:qh}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){aC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cm extends lC{constructor(t=null,e,o){super(oC(e),sC(o,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){am(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){am(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class cC extends lC{constructor(t,e,o){super(oC(e),sC(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,a)=>{o.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e instanceof cm?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>!!o._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const o=this.controls[e];if(this.contains(e)&&t(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,o)=>((e.enabled||this.disabled)&&(t[o]=e.value),t))}_reduceChildren(t,e){let o=t;return this._forEachChild((a,c)=>{o=e(o,a,c)}),o}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,o)=>{if(void 0===t[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class wW extends lC{constructor(t,e,o){super(oC(e),sC(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,o={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((o,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((o,a)=>{this.at(a)&&this.at(a).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((o,a)=>{o.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof cm?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,o)=>!!o._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,o)=>{t(e,o)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,o)=>{if(void 0===t[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const MW={provide:Ta,useExisting:$t(()=>uC)},Wx=(()=>Promise.resolve(null))();let uC=(()=>{class r extends Ta{constructor(e,o,a,c){super(),this.control=new cm,this._registered=!1,this.update=new At,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=function(r,t){if(!t)return null;let e,o,a;return Array.isArray(t),t.forEach(c=>{c.constructor===em?e=c:function(r){return Object.getPrototypeOf(r.constructor)===ac}(c)?o=c:a=c}),a||o||e||null}(0,c)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(r,t){return[...t.path,r]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Wx.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const o=e.isDisabled.currentValue,a=""===o||o&&"false"!==o;Wx.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return r.\u0275fac=function(e){return new(e||r)(K(Yr,9),K(or,10),K(dl,10),K(pr,10))},r.\u0275dir=Ne({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_t([MW]),$e,ln]}),r})(),Yx=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})(),ZW=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[Yx]]}),r})(),qW=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[ZW]}),r})();function Dt(...r){return Ln(r,wl(r))}class Zr extends ve{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:o}=this;if(t)throw e;return this._throwIfClosed(),o}next(t){super.next(this._value=t)}}function uA(...r){const t=wl(r),e=Fp(r),{args:o,keys:a}=ax(r);if(0===o.length)return Ln([],t);const c=new ie(function(r,t,e=W){return o=>{dA(t,()=>{const{length:a}=r,c=new Array(a);let d=a,p=a;for(let f=0;f<a;f++)dA(t,()=>{const v=Ln(r[f],t);let E=!1;v.subscribe(new xe(o,D=>{c[f]=D,E||(E=!0,p--),p||o.next(e(c.slice()))},()=>{--d||o.complete()}))},o)},o)}}(o,t,a?d=>lx(a,d):W));return e?c.pipe(JE(e)):c}function dA(r,t,e){r?tr(e,r,t):t()}const ip=S(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function np(...r){return Fo(1)(Ln(r,wl(r)))}function pm(r){return new ie(t=>{et(r()).subscribe(t)})}function hA(){return De((r,t)=>{let e=null;r._refCount++;const o=new xe(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(e=null);const a=r._connection,c=e;e=null,a&&(!c||a===c)&&a.unsubscribe(),t.unsubscribe()});r.subscribe(o),o.closed||(e=r.connect())})}class iz extends ie{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Ie(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new l;const e=this.getSubject();t.add(this.source.subscribe(new xe(e,void 0,()=>{this._teardown(),e.complete()},o=>{this._teardown(),e.error(o)},()=>this._teardown()))),t.closed&&(this._connection=null,t=l.EMPTY)}return t}refCount(){return hA()(this)}}function cs(r,t){return De((e,o)=>{let a=null,c=0,d=!1;const p=()=>d&&!a&&o.complete();e.subscribe(new xe(o,f=>{null==a||a.unsubscribe();let v=0;const E=c++;et(r(f,E)).subscribe(a=new xe(o,D=>o.next(t?t(f,D,E,v++):D),()=>{a=null,p()}))},()=>{d=!0,p()}))})}function us(...r){const t=wl(r);return De((e,o)=>{(t?np(r,e,t):np(r,e)).subscribe(o)})}function nz(r,t,e,o,a){return(c,d)=>{let p=e,f=t,v=0;c.subscribe(new xe(d,E=>{const D=v++;f=p?r(f,E,D):(p=!0,E),o&&d.next(f)},a&&(()=>{p&&d.next(f),d.complete()})))}}function pA(r,t){return De(nz(r,t,arguments.length>=2,!0))}function rn(r,t){return De((e,o)=>{let a=0;e.subscribe(new xe(o,c=>r.call(t,c,a++)&&o.next(c)))})}function wa(r){return De((t,e)=>{let c,o=null,a=!1;o=t.subscribe(new xe(e,void 0,void 0,d=>{c=et(r(d,wa(r)(t))),o?(o.unsubscribe(),o=null,c.subscribe(e)):a=!0})),a&&(o.unsubscribe(),o=null,c.subscribe(e))})}function $u(r,t){return y(t)?an(r,t,1):an(r,1)}function mC(r){return r<=0?()=>_o:De((t,e)=>{let o=[];t.subscribe(new xe(e,a=>{o.push(a),r<o.length&&o.shift()},()=>{for(const a of o)e.next(a);e.complete()},void 0,()=>{o=null}))})}function fA(r=rz){return De((t,e)=>{let o=!1;t.subscribe(new xe(e,a=>{o=!0,e.next(a)},()=>o?e.complete():e.error(r())))})}function rz(){return new ip}function gA(r){return De((t,e)=>{let o=!1;t.subscribe(new xe(e,a=>{o=!0,e.next(a)},()=>{o||e.next(r),e.complete()}))})}function Ju(r,t){const e=arguments.length>=2;return o=>o.pipe(r?rn((a,c)=>r(a,c,o)):W,hn(1),e?gA(t):fA(()=>new ip))}function sr(r,t,e){const o=y(r)||t||e?{next:r,error:t,complete:e}:r;return o?De((a,c)=>{var d;null===(d=o.subscribe)||void 0===d||d.call(o);let p=!0;a.subscribe(new xe(c,f=>{var v;null===(v=o.next)||void 0===v||v.call(o,f),c.next(f)},()=>{var f;p=!1,null===(f=o.complete)||void 0===f||f.call(o),c.complete()},f=>{var v;p=!1,null===(v=o.error)||void 0===v||v.call(o,f),c.error(f)},()=>{var f,v;p&&(null===(f=o.unsubscribe)||void 0===f||f.call(o)),null===(v=o.finalize)||void 0===v||v.call(o)}))}):W}function mA(r){return De((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}class Sa{constructor(t,e){this.id=t,this.url=e}}class _C extends Sa{constructor(t,e,o="imperative",a=null){super(t,e),this.navigationTrigger=o,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rp extends Sa{constructor(t,e,o){super(t,e),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _A extends Sa{constructor(t,e,o){super(t,e),this.reason=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sz extends Sa{constructor(t,e,o){super(t,e),this.error=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class az extends Sa{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lz extends Sa{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cz extends Sa{constructor(t,e,o,a,c){super(t,e),this.urlAfterRedirects=o,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class uz extends Sa{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dz extends Sa{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vA{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bA{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hz{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pz{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fz{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gz{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yA{constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const yi="primary";class mz{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Qu(r){return new mz(r)}const EA="ngNavigationCancelingError";function vC(r){const t=Error("NavigationCancelingError: "+r);return t[EA]=!0,t}function vz(r,t,e){const o=e.path.split("/");if(o.length>r.length||"full"===e.pathMatch&&(t.hasChildren()||o.length<r.length))return null;const a={};for(let c=0;c<o.length;c++){const d=o[c],p=r[c];if(d.startsWith(":"))a[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:r.slice(0,o.length),posParams:a}}function Us(r,t){const e=r?Object.keys(r):void 0,o=t?Object.keys(t):void 0;if(!e||!o||e.length!=o.length)return!1;let a;for(let c=0;c<e.length;c++)if(a=e[c],!CA(r[a],t[a]))return!1;return!0}function CA(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const e=[...r].sort(),o=[...t].sort();return e.every((a,c)=>o[c]===a)}return r===t}function TA(r){return Array.prototype.concat.apply([],r)}function wA(r){return r.length>0?r[r.length-1]:null}function yr(r,t){for(const e in r)r.hasOwnProperty(e)&&t(r[e],e)}function Gs(r){return lg(r)?r:yh(r)?Ln(Promise.resolve(r)):Dt(r)}const Ez={exact:function MA(r,t,e){if(!cc(r.segments,t.segments)||!fm(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const o in t.children)if(!r.children[o]||!MA(r.children[o],t.children[o],e))return!1;return!0},subset:RA},SA={exact:function(r,t){return Us(r,t)},subset:function(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>CA(r[e],t[e]))},ignored:()=>!0};function DA(r,t,e){return Ez[e.paths](r.root,t.root,e.matrixParams)&&SA[e.queryParams](r.queryParams,t.queryParams)&&!("exact"===e.fragment&&r.fragment!==t.fragment)}function RA(r,t,e){return IA(r,t,t.segments,e)}function IA(r,t,e,o){if(r.segments.length>e.length){const a=r.segments.slice(0,e.length);return!(!cc(a,e)||t.hasChildren()||!fm(a,e,o))}if(r.segments.length===e.length){if(!cc(r.segments,e)||!fm(r.segments,e,o))return!1;for(const a in t.children)if(!r.children[a]||!RA(r.children[a],t.children[a],o))return!1;return!0}{const a=e.slice(0,r.segments.length),c=e.slice(r.segments.length);return!!(cc(r.segments,a)&&fm(r.segments,a,o)&&r.children[yi])&&IA(r.children[yi],t,c,o)}}function fm(r,t,e){return t.every((o,a)=>SA[e](r[a].parameters,o.parameters))}class lc{constructor(t,e,o){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qu(this.queryParams)),this._queryParamMap}toString(){return Dz.serialize(this)}}class Mi{constructor(t,e){this.segments=t,this.children=e,this.parent=null,yr(e,(o,a)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gm(this)}}class op{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Qu(this.parameters)),this._parameterMap}toString(){return NA(this)}}function cc(r,t){return r.length===t.length&&r.every((e,o)=>e.path===t[o].path)}class xA{}class AA{parse(t){const e=new Pz(t);return new lc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${sp(t.root,!0)}`,o=function(r){const t=Object.keys(r).map(e=>{const o=r[e];return Array.isArray(o)?o.map(a=>`${mm(e)}=${mm(a)}`).join("&"):`${mm(e)}=${mm(o)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);var r;return`${e}${o}${"string"==typeof t.fragment?`#${r=t.fragment,encodeURI(r)}`:""}`}}const Dz=new AA;function gm(r){return r.segments.map(t=>NA(t)).join("/")}function sp(r,t){if(!r.hasChildren())return gm(r);if(t){const e=r.children[yi]?sp(r.children[yi],!1):"",o=[];return yr(r.children,(a,c)=>{c!==yi&&o.push(`${c}:${sp(a,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}{const e=function(r,t){let e=[];return yr(r.children,(o,a)=>{a===yi&&(e=e.concat(t(o,a)))}),yr(r.children,(o,a)=>{a!==yi&&(e=e.concat(t(o,a)))}),e}(r,(o,a)=>a===yi?[sp(r.children[yi],!1)]:[`${a}:${sp(o,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[yi]?`${gm(r)}/${e[0]}`:`${gm(r)}/(${e.join("//")})`}}function OA(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mm(r){return OA(r).replace(/%3B/gi,";")}function bC(r){return OA(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _m(r){return decodeURIComponent(r)}function kA(r){return _m(r.replace(/\+/g,"%20"))}function NA(r){return`${bC(r.path)}${function(r){return Object.keys(r).map(t=>`;${bC(t)}=${bC(r[t])}`).join("")}(r.parameters)}`}const xz=/^[^\/()?;=#]+/;function vm(r){const t=r.match(xz);return t?t[0]:""}const Az=/^[^=?&#]+/,kz=/^[^&#]+/;class Pz{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mi([],{}):new Mi([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[yi]=new Mi(t,e)),o}parseSegment(){const t=vm(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new op(_m(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=vm(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const a=vm(this.remaining);a&&(o=a,this.capture(o))}t[_m(e)]=_m(o)}parseQueryParam(t){const e=function(r){const t=r.match(Az);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const d=function(r){const t=r.match(kz);return t?t[0]:""}(this.remaining);d&&(o=d,this.capture(o))}const a=kA(e),c=kA(o);if(t.hasOwnProperty(a)){let d=t[a];Array.isArray(d)||(d=[d],t[a]=d),d.push(c)}else t[a]=c}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=vm(this.remaining),a=this.remaining[o.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;o.indexOf(":")>-1?(c=o.substr(0,o.indexOf(":")),this.capture(c),this.capture(":")):t&&(c=yi);const d=this.parseChildren();e[c]=1===Object.keys(d).length?d[yi]:new Mi([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class PA{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=yC(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){const e=yC(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=EC(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return EC(t,this._root).map(e=>e.value)}}function yC(r,t){if(r===t.value)return t;for(const e of t.children){const o=yC(r,e);if(o)return o}return null}function EC(r,t){if(r===t.value)return[t];for(const e of t.children){const o=EC(r,e);if(o.length)return o.unshift(t),o}return[]}class Da{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Zu(r){const t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}class LA extends PA{constructor(t,e){super(t),this.snapshot=e,CC(this,t)}toString(){return this.snapshot.toString()}}function FA(r,t){const e=function(r,t){const d=new bm([],{},{},"",{},yi,t,null,r.root,-1,{});return new VA("",new Da(d,[]))}(r,t),o=new Zr([new op("",{})]),a=new Zr({}),c=new Zr({}),d=new Zr({}),p=new Zr(""),f=new uc(o,a,d,p,c,yi,t,e.root);return f.snapshot=e.root,new LA(new Da(f,[]),e)}class uc{constructor(t,e,o,a,c,d,p,f){this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=c,this.outlet=d,this.component=p,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Re(t=>Qu(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Re(t=>Qu(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function BA(r,t="emptyOnly"){const e=r.pathFromRoot;let o=0;if("always"!==t)for(o=e.length-1;o>=1;){const a=e[o],c=e[o-1];if(a.routeConfig&&""===a.routeConfig.path)o--;else{if(c.component)break;o--}}return function(r){return r.reduce((t,e)=>({params:Qe(Qe({},t.params),e.params),data:Qe(Qe({},t.data),e.data),resolve:Qe(Qe({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(o))}class bm{constructor(t,e,o,a,c,d,p,f,v,E,D){this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=c,this.outlet=d,this.component=p,this.routeConfig=f,this._urlSegment=v,this._lastPathIndex=E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class VA extends PA{constructor(t,e){super(e),this.url=t,CC(this,e)}toString(){return HA(this._root)}}function CC(r,t){t.value._routerState=r,t.children.forEach(e=>CC(r,e))}function HA(r){const t=r.children.length>0?` { ${r.children.map(HA).join(", ")} } `:"";return`${r.value}${t}`}function TC(r){if(r.snapshot){const t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,Us(t.queryParams,e.queryParams)||r.queryParams.next(e.queryParams),t.fragment!==e.fragment&&r.fragment.next(e.fragment),Us(t.params,e.params)||r.params.next(e.params),function(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!Us(r[e],t[e]))return!1;return!0}(t.url,e.url)||r.url.next(e.url),Us(t.data,e.data)||r.data.next(e.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function wC(r,t){const e=Us(r.params,t.params)&&function(r,t){return cc(r,t)&&r.every((e,o)=>Us(e.parameters,t[o].parameters))}(r.url,t.url);return e&&!(!r.parent!=!t.parent)&&(!r.parent||wC(r.parent,t.parent))}function ap(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){const o=e.value;o._futureSnapshot=t.value;const a=function(r,t,e){return t.children.map(o=>{for(const a of e.children)if(r.shouldReuseRoute(o.value,a.value.snapshot))return ap(r,o,a);return ap(r,o)})}(r,t,e);return new Da(o,a)}{if(r.shouldAttach(t.value)){const c=r.retrieve(t.value);if(null!==c){const d=c.route;return d.value._futureSnapshot=t.value,d.children=t.children.map(p=>ap(r,p)),d}}const o=function(r){return new uc(new Zr(r.url),new Zr(r.params),new Zr(r.queryParams),new Zr(r.fragment),new Zr(r.data),r.outlet,r.component,r)}(t.value),a=t.children.map(c=>ap(r,c));return new Da(o,a)}}function ym(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function lp(r){return"object"==typeof r&&null!=r&&r.outlets}function SC(r,t,e,o,a){let c={};return o&&yr(o,(d,p)=>{c[p]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),new lc(e.root===r?t:UA(e.root,r,t),c,a)}function UA(r,t,e){const o={};return yr(r.children,(a,c)=>{o[c]=a===t?e:UA(a,t,e)}),new Mi(r.segments,o)}class GA{constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&ym(o[0]))throw new Error("Root segment cannot have matrix parameters");const a=o.find(lp);if(a&&a!==wA(o))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class DC{constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}}function jA(r,t,e){if(r||(r=new Mi([],{})),0===r.segments.length&&r.hasChildren())return Em(r,t,e);const o=function(r,t,e){let o=0,a=t;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<r.segments.length;){if(o>=e.length)return c;const d=r.segments[a],p=e[o];if(lp(p))break;const f=`${p}`,v=o<e.length-1?e[o+1]:null;if(a>0&&void 0===f)break;if(f&&v&&"object"==typeof v&&void 0===v.outlets){if(!zA(f,v,d))return c;o+=2}else{if(!zA(f,{},d))return c;o++}a++}return{match:!0,pathIndex:a,commandIndex:o}}(r,t,e),a=e.slice(o.commandIndex);if(o.match&&o.pathIndex<r.segments.length){const c=new Mi(r.segments.slice(0,o.pathIndex),{});return c.children[yi]=new Mi(r.segments.slice(o.pathIndex),r.children),Em(c,0,a)}return o.match&&0===a.length?new Mi(r.segments,{}):o.match&&!r.hasChildren()?MC(r,t,e):o.match?Em(r,0,a):MC(r,t,e)}function Em(r,t,e){if(0===e.length)return new Mi(r.segments,{});{const o=function(r){return lp(r[0])?r[0].outlets:{[yi]:r}}(e),a={};return yr(o,(c,d)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[d]=jA(r.children[d],t,c))}),yr(r.children,(c,d)=>{void 0===o[d]&&(a[d]=c)}),new Mi(r.segments,a)}}function MC(r,t,e){const o=r.segments.slice(0,t);let a=0;for(;a<e.length;){const c=e[a];if(lp(c)){const f=Xz(c.outlets);return new Mi(o,f)}if(0===a&&ym(e[0])){o.push(new op(r.segments[t].path,WA(e[0]))),a++;continue}const d=lp(c)?c.outlets[yi]:`${c}`,p=a<e.length-1?e[a+1]:null;d&&p&&ym(p)?(o.push(new op(d,WA(p))),a+=2):(o.push(new op(d,{})),a++)}return new Mi(o,{})}function Xz(r){const t={};return yr(r,(e,o)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[o]=MC(new Mi([],{}),0,e))}),t}function WA(r){const t={};return yr(r,(e,o)=>t[o]=`${e}`),t}function zA(r,t,e){return r==e.path&&Us(t,e.parameters)}class $z{constructor(t,e,o,a){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=a}activate(t){const e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),TC(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){const a=Zu(e);t.children.forEach(c=>{const d=c.value.outlet;this.deactivateRoutes(c,a[d],o),delete a[d]}),yr(a,(c,d)=>{this.deactivateRouteAndItsChildren(c,o)})}deactivateRoutes(t,e,o){const a=t.value,c=e?e.value:null;if(a===c)if(a.component){const d=o.getContext(a.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,o);else c&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const o=e.getContext(t.value.outlet),a=o&&t.value.component?o.children:e,c=Zu(t);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],a);if(o&&o.outlet){const d=o.outlet.detach(),p=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:d,route:t,contexts:p})}}deactivateRouteAndOutlet(t,e){const o=e.getContext(t.value.outlet),a=o&&t.value.component?o.children:e,c=Zu(t);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],a);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(t,e,o){const a=Zu(e);t.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],o),this.forwardEvent(new gz(c.value.snapshot))}),t.children.length&&this.forwardEvent(new pz(t.value.snapshot))}activateRoutes(t,e,o){const a=t.value,c=e?e.value:null;if(TC(a),a===c)if(a.component){const d=o.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,o);else if(a.component){const d=o.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const p=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),TC(p.route.value),this.activateChildRoutes(t,null,d.children)}else{const p=function(r){for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(a.snapshot),f=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=a,d.resolver=f,d.outlet&&d.outlet.activateWith(a,f),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,o)}}class RC{constructor(t,e){this.routes=t,this.module=e}}function hl(r){return"function"==typeof r}function dc(r){return r instanceof lc}const cp=Symbol("INITIAL_VALUE");function up(){return cs(r=>uA(r.map(t=>t.pipe(hn(1),us(cp)))).pipe(pA((t,e)=>{let o=!1;return e.reduce((a,c,d)=>a!==cp?a:(c===cp&&(o=!0),o||!1!==c&&d!==e.length-1&&!dc(c)?a:c),t)},cp),rn(t=>t!==cp),Re(t=>dc(t)?t:!0===t),hn(1)))}class n8{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new dp,this.attachRef=null}}class dp{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const o=this.getOrCreateContext(t);o.outlet=e,this.contexts.set(t,o)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new n8,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let IC=(()=>{class r{constructor(e,o,a,c,d){this.parentContexts=e,this.location=o,this.resolver=a,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new At,this.deactivateEvents=new At,this.attachEvents=new At,this.detachEvents=new At,this.name=c||yi,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(o=o||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,f=new r8(e,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,f),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(e){return new(e||r)(K(dp),K(Un),K(ma),Fn("name"),K(Rn))},r.\u0275dir=Ne({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),r})();class r8{constructor(t,e,o){this.route=t,this.childContexts=e,this.parent=o}get(t,e){return t===uc?this.route:t===dp?this.childContexts:this.parent.get(t,e)}}let YA=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=Wt({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,o){1&e&&Di(0,"router-outlet")},directives:[IC],encapsulation:2}),r})();function XA(r,t=""){for(let e=0;e<r.length;e++){const o=r[e];o8(o,s8(t,o))}}function o8(r,t){r.children&&XA(r.children,t)}function s8(r,t){return t?r||t.path?r&&!t.path?`${r}/`:!r&&t.path?t.path:`${r}/${t.path}`:"":r}function xC(r){const t=r.children&&r.children.map(xC),e=t?er(Qe({},r),{children:t}):Qe({},r);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==yi&&(e.component=YA),e}function Ao(r){return r.outlet||yi}function KA(r,t){const e=r.filter(o=>Ao(o)===t);return e.push(...r.filter(o=>Ao(o)!==t)),e}const $A={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Cm(r,t,e){var p;if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||e.length>0)?Qe({},$A):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(t.matcher||vz)(e,r,t);if(!a)return Qe({},$A);const c={};yr(a.posParams,(f,v)=>{c[v]=f.path});const d=a.consumed.length>0?Qe(Qe({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:d,positionalParamSegments:null!=(p=a.posParams)?p:{}}}function Tm(r,t,e,o,a="corrected"){if(e.length>0&&function(r,t,e){return e.some(o=>wm(r,t,o)&&Ao(o)!==yi)}(r,e,o)){const d=new Mi(t,function(r,t,e,o){const a={};a[yi]=o,o._sourceSegment=r,o._segmentIndexShift=t.length;for(const c of e)if(""===c.path&&Ao(c)!==yi){const d=new Mi([],{});d._sourceSegment=r,d._segmentIndexShift=t.length,a[Ao(c)]=d}return a}(r,t,o,new Mi(e,r.children)));return d._sourceSegment=r,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(r,t,e){return e.some(o=>wm(r,t,o))}(r,e,o)){const d=new Mi(r.segments,function(r,t,e,o,a,c){const d={};for(const p of o)if(wm(r,e,p)&&!a[Ao(p)]){const f=new Mi([],{});f._sourceSegment=r,f._segmentIndexShift="legacy"===c?r.segments.length:t.length,d[Ao(p)]=f}return Qe(Qe({},a),d)}(r,t,e,o,r.children,a));return d._sourceSegment=r,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const c=new Mi(r.segments,r.children);return c._sourceSegment=r,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}function wm(r,t,e){return(!(r.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function JA(r,t,e,o){return!!(Ao(r)===o||o!==yi&&wm(t,e,r))&&("**"===r.path||Cm(t,r,e).matched)}function QA(r,t,e){return 0===t.length&&!r.children[e]}class hp{constructor(t){this.segmentGroup=t||null}}class ZA{constructor(t){this.urlTree=t}}function Sm(r){return new ie(t=>t.error(new hp(r)))}function qA(r){return new ie(t=>t.error(new ZA(r)))}function d8(r){return new ie(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class f8{constructor(t,e,o,a,c){this.configLoader=e,this.urlSerializer=o,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=t.get(Vs)}apply(){const t=Tm(this.urlTree.root,[],[],this.config).segmentGroup,e=new Mi(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,yi).pipe(Re(c=>this.createUrlTree(AC(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wa(c=>{if(c instanceof ZA)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof hp?this.noMatchError(c):c}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,yi).pipe(Re(a=>this.createUrlTree(AC(a),t.queryParams,t.fragment))).pipe(wa(a=>{throw a instanceof hp?this.noMatchError(a):a}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,o){const a=t.segments.length>0?new Mi([],{[yi]:t}):t;return new lc(a,e,o)}expandSegmentGroup(t,e,o,a){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(t,e,o).pipe(Re(c=>new Mi([],c))):this.expandSegment(t,o,e,o.segments,a,!0)}expandChildren(t,e,o){const a=[];for(const c of Object.keys(o.children))"primary"===c?a.unshift(c):a.push(c);return Ln(a).pipe($u(c=>{const d=o.children[c],p=KA(e,c);return this.expandSegmentGroup(t,p,d,c).pipe(Re(f=>({segment:f,outlet:c})))}),pA((c,d)=>(c[d.outlet]=d.segment,c),{}),function(r,t){const e=arguments.length>=2;return o=>o.pipe(r?rn((a,c)=>r(a,c,o)):W,mC(1),e?gA(t):fA(()=>new ip))}())}expandSegment(t,e,o,a,c,d){return Ln(o).pipe($u(p=>this.expandSegmentAgainstRoute(t,e,o,p,a,c,d).pipe(wa(v=>{if(v instanceof hp)return Dt(null);throw v}))),Ju(p=>!!p),wa((p,f)=>{if(p instanceof ip||"EmptyError"===p.name){if(QA(e,a,c))return Dt(new Mi([],{}));throw new hp(e)}throw p}))}expandSegmentAgainstRoute(t,e,o,a,c,d,p){return JA(a,e,c,d)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(t,e,a,c,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,o,a,c,d):Sm(e):Sm(e)}expandSegmentAgainstRouteUsingRedirect(t,e,o,a,c,d){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,o,a,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,a,c,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,o,a){const c=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?qA(c):this.lineralizeSegments(o,c).pipe(an(d=>{const p=new Mi(d,{});return this.expandSegment(t,p,e,d,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,a,c,d){const{matched:p,consumedSegments:f,lastChild:v,positionalParamSegments:E}=Cm(e,a,c);if(!p)return Sm(e);const D=this.applyRedirectCommands(f,a.redirectTo,E);return a.redirectTo.startsWith("/")?qA(D):this.lineralizeSegments(a,D).pipe(an(x=>this.expandSegment(t,e,o,x.concat(c.slice(v)),d,!1)))}matchSegmentAgainstRoute(t,e,o,a,c){if("**"===o.path)return o.loadChildren?(o._loadedConfig?Dt(o._loadedConfig):this.configLoader.load(t.injector,o)).pipe(Re(x=>(o._loadedConfig=x,new Mi(a,{})))):Dt(new Mi(a,{}));const{matched:d,consumedSegments:p,lastChild:f}=Cm(e,o,a);if(!d)return Sm(e);const v=a.slice(f);return this.getChildConfig(t,o,a).pipe(an(D=>{const x=D.module,N=D.routes,{segmentGroup:B,slicedSegments:Z}=Tm(e,p,v,N),z=new Mi(B.segments,B.children);if(0===Z.length&&z.hasChildren())return this.expandChildren(x,N,z).pipe(Re(je=>new Mi(p,je)));if(0===N.length&&0===Z.length)return Dt(new Mi(p,{}));const de=Ao(o)===c;return this.expandSegment(x,z,N,Z,de?yi:c,!0).pipe(Re(Le=>new Mi(p.concat(Le.segments),Le.children)))}))}getChildConfig(t,e,o){return e.children?Dt(new RC(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Dt(e._loadedConfig):this.runCanLoadGuards(t.injector,e,o).pipe(an(a=>{return a?this.configLoader.load(t.injector,e).pipe(Re(c=>(e._loadedConfig=c,c))):(r=e,new ie(t=>t.error(vC(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`))));var r})):Dt(new RC([],t))}runCanLoadGuards(t,e,o){const a=e.canLoad;return a&&0!==a.length?Dt(a.map(d=>{const p=t.get(d);let f;if((r=p)&&hl(r.canLoad))f=p.canLoad(e,o);else{if(!hl(p))throw new Error("Invalid CanLoad guard");f=p(e,o)}var r;return Gs(f)})).pipe(up(),sr(d=>{if(!dc(d))return;const p=vC(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),Re(d=>!0===d)):Dt(!0)}lineralizeSegments(t,e){let o=[],a=e.root;for(;;){if(o=o.concat(a.segments),0===a.numberOfChildren)return Dt(o);if(a.numberOfChildren>1||!a.children[yi])return d8(t.redirectTo);a=a.children[yi]}}applyRedirectCommands(t,e,o){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,o)}applyRedirectCreatreUrlTree(t,e,o,a){const c=this.createSegmentGroup(t,e.root,o,a);return new lc(c,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const o={};return yr(t,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const p=a.substring(1);o[c]=e[p]}else o[c]=a}),o}createSegmentGroup(t,e,o,a){const c=this.createSegments(t,e.segments,o,a);let d={};return yr(e.children,(p,f)=>{d[f]=this.createSegmentGroup(t,p,o,a)}),new Mi(c,d)}createSegments(t,e,o,a){return e.map(c=>c.path.startsWith(":")?this.findPosParam(t,c,a):this.findOrReturn(c,o))}findPosParam(t,e,o){const a=o[e.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return a}findOrReturn(t,e){let o=0;for(const a of e){if(a.path===t.path)return e.splice(o),a;o++}return t}}function AC(r){const t={};for(const o of Object.keys(r.children)){const c=AC(r.children[o]);(c.segments.length>0||c.hasChildren())&&(t[o]=c)}return function(r){if(1===r.numberOfChildren&&r.children[yi]){const t=r.children[yi];return new Mi(r.segments.concat(t.segments),t.children)}return r}(new Mi(r.segments,t))}class eO{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Dm{constructor(t,e){this.component=t,this.route=e}}function _8(r,t,e){const o=r._root;return pp(o,t?t._root:null,e,[o.value])}function Mm(r,t,e){const o=function(r){if(!r)return null;for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(o?o.module.injector:e).get(r)}function pp(r,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=Zu(t);return r.children.forEach(d=>{(function(r,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=r.value,d=t?t.value:null,p=e?e.getContext(r.value.outlet):null;if(d&&c.routeConfig===d.routeConfig){const f=function(r,t,e){if("function"==typeof e)return e(r,t);switch(e){case"pathParamsChange":return!cc(r.url,t.url);case"pathParamsOrQueryParamsChange":return!cc(r.url,t.url)||!Us(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wC(r,t)||!Us(r.queryParams,t.queryParams);default:return!wC(r,t)}}(d,c,c.routeConfig.runGuardsAndResolvers);f?a.canActivateChecks.push(new eO(o)):(c.data=d.data,c._resolvedData=d._resolvedData),pp(r,t,c.component?p?p.children:null:e,o,a),f&&p&&p.outlet&&p.outlet.isActivated&&a.canDeactivateChecks.push(new Dm(p.outlet.component,d))}else d&&fp(t,p,a),a.canActivateChecks.push(new eO(o)),pp(r,null,c.component?p?p.children:null:e,o,a)})(d,c[d.value.outlet],e,o.concat([d.value]),a),delete c[d.value.outlet]}),yr(c,(d,p)=>fp(d,e.getContext(p),a)),a}function fp(r,t,e){const o=Zu(r),a=r.value;yr(o,(c,d)=>{fp(c,a.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new Dm(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}class x8{}function tO(r){return new ie(t=>t.error(r))}class O8{constructor(t,e,o,a,c,d){this.rootComponentType=t,this.config=e,this.urlTree=o,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d}recognize(){const t=Tm(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,yi);if(null===e)return null;const o=new bm([],Object.freeze({}),Object.freeze(Qe({},this.urlTree.queryParams)),this.urlTree.fragment,{},yi,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Da(o,e),c=new VA(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(t){const e=t.value,o=BA(e,this.paramsInheritanceStrategy);e.params=Object.freeze(o.params),e.data=Object.freeze(o.data),t.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(t,e,o){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,o)}processChildren(t,e){const o=[];for(const c of Object.keys(e.children)){const d=e.children[c],p=KA(t,c),f=this.processSegmentGroup(p,d,c);if(null===f)return null;o.push(...f)}const a=iO(o);return a.sort((t,e)=>t.value.outlet===yi?-1:e.value.outlet===yi?1:t.value.outlet.localeCompare(e.value.outlet)),a}processSegment(t,e,o,a){for(const c of t){const d=this.processSegmentAgainstRoute(c,e,o,a);if(null!==d)return d}return QA(e,o,a)?[]:null}processSegmentAgainstRoute(t,e,o,a){if(t.redirectTo||!JA(t,e,o,a))return null;let c,d=[],p=[];if("**"===t.path){const N=o.length>0?wA(o).parameters:{};c=new bm(o,N,Object.freeze(Qe({},this.urlTree.queryParams)),this.urlTree.fragment,oO(t),Ao(t),t.component,t,nO(e),rO(e)+o.length,sO(t))}else{const N=Cm(e,t,o);if(!N.matched)return null;d=N.consumedSegments,p=o.slice(N.lastChild),c=new bm(d,N.parameters,Object.freeze(Qe({},this.urlTree.queryParams)),this.urlTree.fragment,oO(t),Ao(t),t.component,t,nO(e),rO(e)+d.length,sO(t))}const f=(r=t).children?r.children:r.loadChildren?r._loadedConfig.routes:[],{segmentGroup:v,slicedSegments:E}=Tm(e,d,p,f.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);var r;if(0===E.length&&v.hasChildren()){const N=this.processChildren(f,v);return null===N?null:[new Da(c,N)]}if(0===f.length&&0===E.length)return[new Da(c,[])];const D=Ao(t)===a,x=this.processSegment(f,v,E,D?yi:a);return null===x?null:[new Da(c,x)]}}function P8(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function iO(r){const t=[],e=new Set;for(const o of r){if(!P8(o)){t.push(o);continue}const a=t.find(c=>o.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...o.children),e.add(a)):t.push(o)}for(const o of e){const a=iO(o.children);t.push(new Da(o.value,a))}return t.filter(o=>!e.has(o))}function nO(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function rO(r){let t=r,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function oO(r){return r.data||{}}function sO(r){return r.resolve||{}}function OC(r){return cs(t=>{const e=r(t);return e?Ln(e).pipe(Re(()=>t)):Dt(t)})}class j8 extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const kC=new Ae("ROUTES");class aO{constructor(t,e,o,a){this.injector=t,this.compiler=e,this.onLoadStartListener=o,this.onLoadEndListener=a}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const a=this.loadModuleFactory(e.loadChildren).pipe(Re(c=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=c.create(t);return new RC(TA(d.injector.get(kC,void 0,bt.Self|bt.Optional)).map(xC),d)}),wa(c=>{throw e._loader$=void 0,c}));return e._loader$=new iz(a,()=>new ve).pipe(hA()),e._loader$}loadModuleFactory(t){return Gs(t()).pipe(an(e=>e instanceof OM?Dt(e):Ln(this.compiler.compileModuleAsync(e))))}}class z8{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Y8(r){throw r}function X8(r,t,e){return t.parse("/")}function lO(r,t){return Dt(null)}const K8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fo=(()=>{class r{constructor(e,o,a,c,d,p,f){this.rootComponentType=e,this.urlSerializer=o,this.rootContexts=a,this.location=c,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ve,this.errorHandler=Y8,this.malformedUriErrorHandler=X8,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:lO,afterPreactivation:lO},this.urlHandlingStrategy=new z8,this.routeReuseStrategy=new j8,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(Vs),this.console=d.get(Cg);const D=d.get(Jt);this.isNgZoneEnabled=D instanceof Jt&&Jt.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=new lc(new Mi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new aO(d,p,x=>this.triggerEvent(new vA(x)),x=>this.triggerEvent(new bA(x))),this.routerState=FA(this.currentUrlTree,this.rootComponentType),this.transitions=new Zr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null==(e=this.location.getState())?void 0:e.\u0275routerPageId}setupNavigations(e){const o=this.events;return e.pipe(rn(a=>0!==a.id),Re(a=>er(Qe({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),cs(a=>{let c=!1,d=!1;return Dt(a).pipe(sr(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?er(Qe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),cs(p=>{const f=this.browserUrlTree.toString(),v=!this.navigated||p.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Rm(p.source)&&(this.browserUrlTree=p.extractedUrl),Dt(p).pipe(cs(D=>{const x=this.transitions.getValue();return o.next(new _C(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?_o:Promise.resolve(D)}),function(r,t,e,o){return cs(a=>function(r,t,e,o,a){return new f8(r,t,e,o,a).apply()}(r,t,e,a.extractedUrl,o).pipe(Re(c=>er(Qe({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),sr(D=>{this.currentNavigation=er(Qe({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function(r,t,e,o,a){return an(c=>function(r,t,e,o,a="emptyOnly",c="legacy"){try{const d=new O8(r,t,e,o,a,c).recognize();return null===d?tO(new x8):Dt(d)}catch(d){return tO(d)}}(r,t,c.urlAfterRedirects,e(c.urlAfterRedirects),o,a).pipe(Re(d=>er(Qe({},c),{targetSnapshot:d}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),sr(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(N,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new az(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);o.next(x)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:N,source:B,restoredState:Z,extras:z}=p,de=new _C(x,this.serializeUrl(N),B,Z);o.next(de);const he=FA(N,this.rootComponentType).snapshot;return Dt(er(Qe({},p),{targetSnapshot:he,urlAfterRedirects:N,extras:er(Qe({},z),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),_o}),OC(p=>{const{targetSnapshot:f,id:v,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:N}}=p;return this.hooks.beforePreactivation(f,{navigationId:v,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!N})}),sr(p=>{const f=new lz(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(f)}),Re(p=>er(Qe({},p),{guards:_8(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(r,t){return an(e=>{const{targetSnapshot:o,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:d}}=e;return 0===d.length&&0===c.length?Dt(er(Qe({},e),{guardsResult:!0})):function(r,t,e,o){return Ln(r).pipe(an(a=>function(r,t,e,o,a){const c=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return c&&0!==c.length?Dt(c.map(p=>{const f=Mm(p,t,a);let v;if(function(r){return r&&hl(r.canDeactivate)}(f))v=Gs(f.canDeactivate(r,t,e,o));else{if(!hl(f))throw new Error("Invalid CanDeactivate guard");v=Gs(f(r,t,e,o))}return v.pipe(Ju())})).pipe(up()):Dt(!0)}(a.component,a.route,e,t,o)),Ju(a=>!0!==a,!0))}(d,o,a,r).pipe(an(p=>p&&function(r){return"boolean"==typeof r}(p)?function(r,t,e,o){return Ln(t).pipe($u(a=>np(function(r,t){return null!==r&&t&&t(new hz(r)),Dt(!0)}(a.route.parent,o),function(r,t){return null!==r&&t&&t(new fz(r)),Dt(!0)}(a.route,o),function(r,t,e){const o=t[t.length-1],c=t.slice(0,t.length-1).reverse().map(d=>function(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(d)).filter(d=>null!==d).map(d=>pm(()=>Dt(d.guards.map(f=>{const v=Mm(f,d.node,e);let E;if(function(r){return r&&hl(r.canActivateChild)}(v))E=Gs(v.canActivateChild(o,r));else{if(!hl(v))throw new Error("Invalid CanActivateChild guard");E=Gs(v(o,r))}return E.pipe(Ju())})).pipe(up())));return Dt(c).pipe(up())}(r,a.path,e),function(r,t,e){const o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||0===o.length)return Dt(!0);const a=o.map(c=>pm(()=>{const d=Mm(c,t,e);let p;if(function(r){return r&&hl(r.canActivate)}(d))p=Gs(d.canActivate(t,r));else{if(!hl(d))throw new Error("Invalid CanActivate guard");p=Gs(d(t,r))}return p.pipe(Ju())}));return Dt(a).pipe(up())}(r,a.route,e))),Ju(a=>!0!==a,!0))}(o,c,r,t):Dt(p)),Re(p=>er(Qe({},e),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),sr(p=>{if(dc(p.guardsResult)){const v=vC(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw v.url=p.guardsResult,v}const f=new cz(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(f)}),rn(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),OC(p=>{if(p.guards.canActivateChecks.length)return Dt(p).pipe(sr(f=>{const v=new uz(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(v)}),cs(f=>{let v=!1;return Dt(f).pipe(function(r,t){return an(e=>{const{targetSnapshot:o,guards:{canActivateChecks:a}}=e;if(!a.length)return Dt(e);let c=0;return Ln(a).pipe($u(d=>function(r,t,e,o){return function(r,t,e,o){const a=Object.keys(r);if(0===a.length)return Dt({});const c={};return Ln(a).pipe(an(d=>function(r,t,e,o){const a=Mm(r,t,o);return Gs(a.resolve?a.resolve(t,e):a(t,e))}(r[d],t,e,o).pipe(sr(p=>{c[d]=p}))),mC(1),an(()=>Object.keys(c).length===a.length?Dt(c):_o))}(r._resolve,r,t,o).pipe(Re(c=>(r._resolvedData=c,r.data=Qe(Qe({},r.data),BA(r,e).resolve),null)))}(d.route,o,r,t)),sr(()=>c++),mC(1),an(d=>c===a.length?Dt(e):_o))})}(this.paramsInheritanceStrategy,this.ngModule.injector),sr({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(f),this.cancelNavigationTransition(f,"At least one route resolver didn't emit any value."))}}))}),sr(f=>{const v=new dz(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(v)}))}),OC(p=>{const{targetSnapshot:f,id:v,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:N}}=p;return this.hooks.afterPreactivation(f,{navigationId:v,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!N})}),Re(p=>{const f=function(r,t,e){const o=ap(r,t._root,e?e._root:void 0);return new LA(o,t)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return er(Qe({},p),{targetRouterState:f})}),sr(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((r,t,e)=>Re(o=>(new $z(t,o.targetRouterState,o.currentRouterState,e).activate(r),o)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),sr({next(){c=!0},complete(){c=!0}}),mA(()=>{var p;c||d||this.cancelNavigationTransition(a,`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`),(null==(p=this.currentNavigation)?void 0:p.id)===a.id&&(this.currentNavigation=null)}),wa(p=>{if(d=!0,function(r){return r&&r[EA]}(p)){const f=dc(p.url);f||(this.navigated=!0,this.restoreHistory(a,!0));const v=new _A(a.id,this.serializeUrl(a.extractedUrl),p.message);o.next(v),f?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),D={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Rm(a.source)};this.scheduleNavigation(E,"imperative",null,D,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const f=new sz(a.id,this.serializeUrl(a.extractedUrl),p);o.next(f);try{a.resolve(this.errorHandler(p))}catch(v){a.reject(v)}}return _o}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Qe(Qe({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const o="popstate"===e.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{var p;const a={replaceUrl:!0},c=(null==(p=e.state)?void 0:p.navigationId)?e.state:null;if(c){const f=Qe({},c);delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(a.state=f)}const d=this.parseUrl(e.url);this.scheduleNavigation(d,o,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){XA(e),this.config=e.map(xC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,o={}){const{relativeTo:a,queryParams:c,fragment:d,queryParamsHandling:p,preserveFragment:f}=o,v=a||this.routerState.root,E=f?this.currentUrlTree.fragment:d;let D=null;switch(p){case"merge":D=Qe(Qe({},this.currentUrlTree.queryParams),c);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=c||null}return null!==D&&(D=this.removeEmptyProps(D)),function(r,t,e,o,a){if(0===e.length)return SC(t.root,t.root,t,o,a);const c=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new GA(!0,0,r);let t=0,e=!1;const o=r.reduce((a,c,d)=>{if("object"==typeof c&&null!=c){if(c.outlets){const p={};return yr(c.outlets,(f,v)=>{p[v]="string"==typeof f?f.split("/"):f}),[...a,{outlets:p}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===d?(c.split("/").forEach((p,f)=>{0==f&&"."===p||(0==f&&""===p?e=!0:".."===p?t++:""!=p&&a.push(p))}),a):[...a,c]},[]);return new GA(e,t,o)}(e);if(c.toRoot())return SC(t.root,new Mi([],{}),t,o,a);const d=function(r,t,e){if(r.isAbsolute)return new DC(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const c=e.snapshot._urlSegment;return new DC(c,c===t.root,0)}const o=ym(r.commands[0])?0:1;return function(r,t,e){let o=r,a=t,c=e;for(;c>a;){if(c-=a,o=o.parent,!o)throw new Error("Invalid number of '../'");a=o.segments.length}return new DC(o,!1,a-c)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+o,r.numberOfDoubleDots)}(c,t,r),p=d.processChildren?Em(d.segmentGroup,d.index,c.commands):jA(d.segmentGroup,d.index,c.commands);return SC(d.segmentGroup,p,t,o,a)}(v,this.currentUrlTree,e,D,null!=E?E:null)}navigateByUrl(e,o={skipLocationChange:!1}){const a=dc(e)?e:this.parseUrl(e),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,o)}navigate(e,o={skipLocationChange:!1}){return function(r){for(let t=0;t<r.length;t++){const e=r[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let o;try{o=this.urlSerializer.parse(e)}catch(a){o=this.malformedUriErrorHandler(a,this.urlSerializer,e)}return o}isActive(e,o){let a;if(a=!0===o?Qe({},K8):!1===o?Qe({},$8):o,dc(e))return DA(this.currentUrlTree,e,a);const c=this.parseUrl(e);return DA(this.currentUrlTree,c,a)}removeEmptyProps(e){return Object.keys(e).reduce((o,a)=>{const c=e[a];return null!=c&&(o[a]=c),o},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new rp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,o,a,c,d){var de,he,Le;if(this.disposed)return Promise.resolve(!1);const p=this.transitions.value,f=Rm(o)&&p&&!Rm(p.source),v=p.rawUrl.toString()===e.toString(),E=p.id===(null==(de=this.currentNavigation)?void 0:de.id);if(f&&v&&E)return Promise.resolve(!0);let x,N,B;d?(x=d.resolve,N=d.reject,B=d.promise):B=new Promise((je,Et)=>{x=je,N=Et});const Z=++this.navigationId;let z;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),z=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!=(he=this.browserPageId)?he:0:(null!=(Le=this.browserPageId)?Le:0)+1):z=0,this.setTransition({id:Z,targetPageId:z,source:o,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:c,resolve:x,reject:N,promise:B,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),B.catch(je=>Promise.reject(je))}setBrowserUrl(e,o){const a=this.urlSerializer.serialize(e),c=Qe(Qe({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(a)||o.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(e,o=!1){var a,c;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(a=this.currentNavigation)?void 0:a.finalUrl)||0===d?this.currentUrlTree===(null==(c=this.currentNavigation)?void 0:c.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,o){const a=new _A(e.id,this.serializeUrl(e.extractedUrl),o);this.triggerEvent(a),e.resolve(!1)}generateNgRouterState(e,o){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}}return r.\u0275fac=function(e){Iu()},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();function Rm(r){return"imperative"!==r}let gp=(()=>{class r{constructor(e,o,a){this.router=e,this.route=o,this.locationStrategy=a,this.commands=null,this.href=null,this.onChanges=new ve,this.subscription=e.events.subscribe(c=>{c instanceof rp&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,o,a,c,d){if(0!==e||o||a||c||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:qu(this.skipLocationChange),replaceUrl:qu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:qu(this.preserveFragment)})}}return r.\u0275fac=function(e){return new(e||r)(K(fo),K(uc),K(Xu))},r.\u0275dir=Ne({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,o){1&e&&Yt("click",function(c){return o.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&e&&Gt("target",o.target)("href",o.href,Dn)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ln]}),r})();function qu(r){return""===r||!!r}class cO{}class uO{preload(t,e){return Dt(null)}}let dO=(()=>{class r{constructor(e,o,a,c){this.router=e,this.injector=a,this.preloadingStrategy=c,this.loader=new aO(a,o,f=>e.triggerEvent(new vA(f)),f=>e.triggerEvent(new bA(f)))}setUpPreloading(){this.subscription=this.router.events.pipe(rn(e=>e instanceof rp),$u(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Vs);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){const a=[];for(const c of o)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const d=c._loadedConfig;a.push(this.processRoutes(d.module,d.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(e,c)):c.children&&a.push(this.processRoutes(e,c.children));return Ln(a).pipe(Fo(),Re(c=>{}))}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>(o._loadedConfig?Dt(o._loadedConfig):this.loader.load(e.injector,o)).pipe(an(c=>(o._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return r.\u0275fac=function(e){return new(e||r)(we(fo),we(Tg),we(Pi),we(cO))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),PC=(()=>{class r{constructor(e,o,a={}){this.router=e,this.viewportScroller=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof _C?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof rp&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof yA&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.router.triggerEvent(new yA(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(e){Iu()},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const hc=new Ae("ROUTER_CONFIGURATION"),hO=new Ae("ROUTER_FORROOT_GUARD"),e5=[zh,{provide:xA,useClass:AA},{provide:fo,useFactory:function(r,t,e,o,a,c,d={},p,f){const v=new fo(null,r,t,e,o,a,TA(c));return p&&(v.urlHandlingStrategy=p),f&&(v.routeReuseStrategy=f),function(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(t.canceledNavigationResolution=r.canceledNavigationResolution)}(d,v),d.enableTracing&&v.events.subscribe(E=>{var D,x;null==(D=console.group)||D.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null==(x=console.groupEnd)||x.call(console)}),v},deps:[xA,dp,zh,Pi,Tg,kC,hc,[class{},new cn],[class{},new cn]]},dp,{provide:uc,useFactory:function(r){return r.routerState.root},deps:[fo]},dO,uO,class{preload(t,e){return e().pipe(wa(()=>Dt(null)))}},{provide:hc,useValue:{enableTracing:!1}}];function t5(){return new qy("Router",fo)}let pO=(()=>{class r{constructor(e,o){}static forRoot(e,o){return{ngModule:r,providers:[e5,fO(e),{provide:hO,useFactory:o5,deps:[[fo,new cn,new Bn]]},{provide:hc,useValue:o||{}},{provide:Xu,useFactory:r5,deps:[oc,[new el(IE),new cn],hc]},{provide:PC,useFactory:n5,deps:[fo,ij,hc]},{provide:cO,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:uO},{provide:qy,multi:!0,useFactory:t5},[LC,{provide:Ah,multi:!0,useFactory:c5,deps:[LC]},{provide:gO,useFactory:u5,deps:[LC]},{provide:hR,multi:!0,useExisting:gO}]]}}static forChild(e){return{ngModule:r,providers:[fO(e)]}}}return r.\u0275fac=function(e){return new(e||r)(we(hO,8),we(fo,8))},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})();function n5(r,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new PC(r,t,e)}function r5(r,t,e={}){return e.useHash?new HG(r,t):new wI(r,t)}function o5(r){return"guarded"}function fO(r){return[{provide:Wv,multi:!0,useValue:r},{provide:kC,multi:!0,useValue:r}]}let LC=(()=>{class r{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ve}appInitializer(){return this.injector.get(FG,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let o=null;const a=new Promise(p=>o=p),c=this.injector.get(fo),d=this.injector.get(hc);return"disabled"===d.initialNavigation?(c.setUpLocationChangeListener(),o(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?Dt(null):(this.initNavigation=!0,o(!0),this.resultOfPreactivationDone),c.initialNavigation()):o(!0),a})}bootstrapListener(e){const o=this.injector.get(hc),a=this.injector.get(dO),c=this.injector.get(PC),d=this.injector.get(fo),p=this.injector.get(ec);e===p.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&d.initialNavigation(),a.setUpPreloading(),c.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(e){return new(e||r)(we(Pi))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();function c5(r){return r.appInitializer.bind(r)}function u5(r){return r.bootstrapListener.bind(r)}const gO=new Ae("Router Initializer");function mO(r,t,e,o,a,c,d){try{var p=r[c](d),f=p.value}catch(v){return void e(v)}p.done?t(f):Promise.resolve(f).then(o,a)}function FC(r){return function(){var t=this,e=arguments;return new Promise(function(o,a){var c=r.apply(t,e);function d(f){mO(c,o,a,d,p,"next",f)}function p(f){mO(c,o,a,d,p,"throw",f)}d(void 0)})}}var Ai=m(5389),Er=m(75610),on=m(78011),ed=m(84575),h5=m(80184);class ds{constructor(t){this.table=t}reloadData(t,e){return this.table.dataLoader.load(t,void 0,void 0,void 0,e)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}setOption(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}module(t){return this.table.module(t)}}class Oi extends ds{constructor(t,e){super(t),this._handler=null}initialize(){}registerTableOption(t,e){this.table.optionsList.register(t,e)}registerColumnOption(t,e){this.table.columnManager.optionsList.register(t,e)}registerTableFunction(t,e){void 0===this.table[t]?this.table[t]=e:console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,e,o){return this.table.componentFunctionBinder.bind(t,e,o)}registerDataHandler(t,e){this.table.rowManager.registerDataPipelineHandler(t,e),this._handler=t}registerDisplayHandler(t,e){this.table.rowManager.registerDisplayPipelineHandler(t,e),this._handler=t}refreshData(t,e){e||(e=this._handler),e&&this.table.rowManager.refreshActiveData(e,!1,t)}}class En{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(t,e,o=[]){var a={}.__proto__,c=[].__proto__;for(var d in e||(e=Object.assign(Array.isArray(t)?[]:{},t)),t){let f,v,p=t[d];null!=p&&"object"==typeof p&&(p.__proto__===a||p.__proto__===c)&&(f=o.findIndex(E=>E.subject===p),f>-1?e[d]=o[f].copy:(v=Object.assign(Array.isArray(p)?[]:{},p),o.unshift({subject:p,copy:v}),e[d]=this.deepClone(p,v,o)))}return e}}var f5={};let g5=(()=>{class r extends Oi{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var o=!1,a={};this.allowedTypes.forEach(c=>{var p,d="accessor"+(c.charAt(0).toUpperCase()+c.slice(1));e.definition[d]&&(p=this.lookupAccessor(e.definition[d]))&&(o=!0,a[d]={accessor:p,params:e.definition[d+"Params"]||{}})}),o&&(e.modules.accessor=a)}lookupAccessor(e){var o=!1;switch(typeof e){case"string":r.accessors[e]?o=r.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":o=e}return o}transformRow(e,o){var a="accessor"+(o.charAt(0).toUpperCase()+o.slice(1)),c=e.getComponent(),d=En.deepClone(e.data||{});return this.table.columnManager.traverse(function(p){var f,v,E,D;p.modules.accessor&&(v=p.modules.accessor[a]||p.modules.accessor.accessor||!1)&&"undefined"!=(f=p.getFieldValue(d))&&(D=p.getComponent(),E="function"==typeof v.params?v.params(f,d,o,D,c):v.params,p.setFieldValue(d,v.accessor(f,d,o,E,D,c)))}),d}}return r.moduleName="accessor",r.accessors=f5,r})();var m5={method:"GET"};function BC(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((a,c)=>{e=e.concat(BC(a,t?t+"["+c+"]":c))});else if("object"==typeof r)for(var o in r)e=e.concat(BC(r[o],t?t+"["+o+"]":o));else e.push({key:t,value:r});return e}function _5(r){var t=BC(r),e=[];return t.forEach(function(o){e.push(encodeURIComponent(o.key)+"="+encodeURIComponent(o.value))}),e.join("&")}function v5(r,t,e){return r&&e&&Object.keys(e).length&&(!t.method||"get"==t.method.toLowerCase())&&(t.method="get",r+=(r.includes("?")?"&":"?")+_5(e)),r}function b5(r,t,e){var o;return new Promise((a,c)=>{if(r=this.urlGenerator.call(this.table,r,t,e),"GET"!=t.method.toUpperCase())if(o="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var d in o.headers)t.headers||(t.headers={}),void 0===t.headers[d]&&(t.headers[d]=o.headers[d]);t.body=o.body.call(this,r,t,e)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);r?(void 0===t.headers&&(t.headers={}),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),void 0===t.headers["X-Requested-With"]&&(t.headers["X-Requested-With"]="XMLHttpRequest"),void 0===t.mode&&(t.mode="cors"),"cors"==t.mode?(void 0===t.headers.Origin&&(t.headers.Origin=window.location.origin),void 0===t.credentials&&(t.credentials="same-origin")):void 0===t.credentials&&(t.credentials="include"),fetch(r,t).then(p=>{p.ok?p.json().then(f=>{a(f)}).catch(f=>{c(f),console.warn("Ajax Load Error - Invalid JSON returned",f)}):(console.error("Ajax Load Error - Connection Error: "+p.status,p.statusText),c(p))}).catch(p=>{console.error("Ajax Load Error - Connection Error: ",p),c(p)})):(console.warn("Ajax Load Error - No URL Set"),a([]))})}function VC(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((a,c)=>{e=e.concat(VC(a,t?t+"["+c+"]":c))});else if("object"==typeof r)for(var o in r)e=e.concat(VC(r[o],t?t+"["+o+"]":o));else e.push({key:t,value:r});return e}var y5={json:{headers:{"Content-Type":"application/json"},body:function(r,t,e){return JSON.stringify(e)}},form:{headers:{},body:function(r,t,e){var o=VC(e),a=new FormData;return o.forEach(function(c){a.append(c.key,c.value)}),a}}};let E5=(()=>{class r extends Oi{constructor(e){super(e),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=r.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||r.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||r.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(e,o,a,c){return!((e||!this.url)&&"string"!=typeof e)}requestData(e,o,a,c,d){return this.requestDataCheck(e)?(e&&this.setUrl(e),o&&this.setParams(o,!0),a&&this.setConfig(a),this.sendRequest()):d}setParams(e,o){if(o){this.params=this.params||{};for(let a in e)this.params[a]=e[a]}else this.params=e}getParams(){return this.params||{}}setConfig(e){if(this._loadDefaultConfig(),"string"==typeof e)this.config.method=e;else for(let o in e)this.config[o]=e[o]}_loadDefaultConfig(e){if(!this.config||e){this.config={};for(let o in r.defaultConfig)this.config[o]=r.defaultConfig[o]}}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e){var o=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(o,this.config,this.params).then(a=>(this.table.options.ajaxResponse&&(a=this.table.options.ajaxResponse.call(this.table,this.url,this.params,a)),a)):Promise.reject()}}return r.moduleName="ajax",r.defaultConfig=m5,r.defaultURLGenerator=v5,r.defaultLoaderPromise=b5,r.contentTypeFormatters=y5,r})();var C5={replace:function(r){return this.table.setData(r)},update:function(r){return this.table.updateOrAddData(r)},insert:function(r){return this.table.addData(r)}},T5={table:function(r){var t=[],e=!0,o=this.table.columnManager.columns,a=[],c=[];return(r=r.split("\n")).forEach(function(d){t.push(d.split("\t"))}),!(!t.length||1===t.length&&t[0].length<2)&&(t[0].forEach(function(d){var p=o.find(function(f){return d&&f.definition.title&&d.trim()&&f.definition.title.trim()===d.trim()});p?a.push(p):e=!1}),e||(e=!0,a=[],t[0].forEach(function(d){var p=o.find(function(f){return d&&f.field&&d.trim()&&f.field.trim()===d.trim()});p?a.push(p):e=!1}),e||(a=this.table.columnManager.columnsByIndex)),e&&t.shift(),t.forEach(function(d){var p={};d.forEach(function(f,v){a[v]&&(p[a[v].field]=f)}),c.push(p)}),c)}};let w5=(()=>{class r extends Oi{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",e=>{var o,a;if(!this.blocked){if(e.preventDefault(),this.customSelection)o=this.customSelection,this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o));else{var c=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");o=(a=this.table.modules.export.genereateHTMLTable(c))?this.generatePlainContent(c):"",this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o),a=this.table.options.clipboardCopyFormatter("html",a))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",o),a&&e.clipboardData.setData("text/html",a)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",o),a&&e.originalEvent.clipboardData.setData("text/html",a)),this.dispatchExternal("clipboardCopied",o,a),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var o=[];return e.forEach(a=>{var c=[];a.columns.forEach(d=>{var p="";if(d)if("group"===a.type&&(d.value=d.component.getKey()),null===d.value)p="";else switch(typeof d.value){case"object":p=JSON.stringify(d.value);break;case"undefined":p="";break;default:p=d.value}c.push(p)}),o.push(c.join("\t"))}),o.join("\n")}copy(e,o){var a,c;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((e=document.createRange()).selectNodeContents(this.table.element),(a=window.getSelection()).toString()&&o&&(this.customSelection=a.toString()),a.removeAllRanges(),a.addRange(e)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((c=document.body.createTextRange()).moveToElementText(this.table.element),c.select()),document.execCommand("copy"),a&&a.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=r.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=r.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e}}paste(e){var o,a,c;this.checkPaseOrigin(e)&&(o=this.getPasteData(e),(a=this.pasteParser.call(this,o))?(e.preventDefault(),this.table.modExists("mutator")&&(a=this.mutateData(a)),c=this.pasteAction.call(this,a),this.dispatchExternal("clipboardPasted",o,a,c)):this.dispatchExternal("clipboardPasteError",o))}mutateData(e){var o=[];return Array.isArray(e)?e.forEach(a=>{o.push(this.table.modules.mutator.transformRow(a,"clipboard"))}):o=e,o}checkPaseOrigin(e){var o=!0;return("DIV"!=e.target.tagName||this.table.modules.edit.currentCell)&&(o=!1),o}getPasteData(e){var o;return window.clipboardData&&window.clipboardData.getData?o=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?o=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(o=e.originalEvent.clipboardData.getData("text/plain")),o}}return r.moduleName="clipboard",r.pasteActions=C5,r.pasteParsers=T5,r})();class S5{constructor(t){return this._row=t,new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._row.table.componentFunctionBinder.handle("row",e._row,o)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}_getSelf(){return this._row}}class _O{constructor(t){return this._cell=t,new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._cell.table.componentFunctionBinder.handle("cell",e._cell,o)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class Im extends ds{constructor(t,e){super(t.table),this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var t=this.element,e=this.column.getField();t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),e&&t.setAttribute("tabulator-field",e),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(d=>{t.classList.add(d)}),"hover"===this.table.options.tooltipGenerationMode&&t.addEventListener("mouseenter",d=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(typeof(t=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,e){this.setValueProcessData(t,e)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,e){var o=!1;return this.value!=t&&(o=!0,e&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),o&&this.dispatch("cell-value-changed",this),o}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new _O(this)),this.component}}class vO{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._column.table.componentFunctionBinder.handle("column",e._column,o)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var t=[];return this._column.cells.forEach(function(e){t.push(e.getComponent())}),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(e){t.push(e.getComponent())}),t}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(t,e){var o=this._column.table.columnManager.findColumn(t);o?this._column.table.columnManager.moveColumn(this._column,o,e):console.warn("Move Error - No matching column found:",o)}getNextColumn(){var t=this._column.nextColumn();return!!t&&t.getComponent()}getPrevColumn(){var t=this._column.prevColumn();return!!t&&t.getComponent()}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var e;return e=!0===t?this._column.reinitializeWidth(!0):this._column.setWidth(t),this._column.table.columnManager.renderer.rerenderColumns(!0),e}}var D5={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let mp=(()=>{class r extends ds{constructor(e,o){super(o.table),this.definition=e,this.parent=o,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((a,c)=>{var d=new r(a,this);this.attachColumn(d)}),this.checkColumnVisibility()):o.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let o in e)void 0===this.definition[o]&&(this.definition[o]=e[o]);this.definition=this.table.columnManager.optionsList.generate(r.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{-1===r.defaultOptionList.indexOf(e)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var e=this.definition,o=void 0===e.headerTooltip?e.tooltip:e.headerTooltip;o?!0===o?e.field?this.langBind("columns|"+e.field,a=>{this.element.setAttribute("title",a||e.title)}):this.element.setAttribute("title",e.title):("function"==typeof o&&!1===(o=o(this.getComponent()))&&(o=""),this.element.setAttribute("title",o)):this.element.setAttribute("title","")}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===e.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",o=>{this.setTooltip()})}_bindEvents(){var o,a,c,e=this.definition;"function"==typeof e.headerClick&&this.element.addEventListener("click",d=>{e.headerClick(d,this.getComponent())}),"function"==typeof e.headerDblClick&&this.element.addEventListener("dblclick",d=>{e.headerDblClick(d,this.getComponent())}),"function"==typeof e.headerContext&&this.element.addEventListener("contextmenu",d=>{e.headerContext(d,this.getComponent())}),"function"==typeof e.headerTap&&(c=!1,this.element.addEventListener("touchstart",d=>{c=!0},{passive:!0}),this.element.addEventListener("touchend",d=>{c&&e.headerTap(d,this.getComponent()),c=!1})),"function"==typeof e.headerDblTap&&(o=null,this.element.addEventListener("touchend",d=>{o?(clearTimeout(o),o=null,e.headerDblTap(d,this.getComponent())):o=setTimeout(()=>{clearTimeout(o),o=null},300)})),"function"==typeof e.headerTapHold&&(a=null,this.element.addEventListener("touchstart",d=>{clearTimeout(a),a=setTimeout(function(){clearTimeout(a),a=null,c=!1,e.headerTapHold(d,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",d=>{clearTimeout(a),a=null}))}_buildColumnHeader(){var e=this.definition;this.dispatch("column-layout",this),void 0!==e.visible&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass&&e.cssClass.split(" ").forEach(c=>{this.element.classList.add(c)}),e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var a=document.createElement("div");return a.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),a.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),a}_buildColumnHeaderTitle(){var e=this.definition,o=document.createElement("div");if(o.classList.add("tabulator-col-title"),e.editableTitle){var a=document.createElement("input");a.classList.add("tabulator-title-editor"),a.addEventListener("click",c=>{c.stopPropagation(),a.focus()}),a.addEventListener("change",()=>{e.title=a.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),o.appendChild(a),e.field?this.langBind("columns|"+e.field,c=>{a.value=c||e.title||"&nbsp;"}):a.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,c=>{this._formatColumnHeaderTitle(o,c||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(o,e.title||"&nbsp;");return o}_formatColumnHeaderTitle(e,o){var a=this.chain("column-format",[this,o,e],null,()=>o);switch(typeof a){case"object":a instanceof Node?e.appendChild(a):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",a));break;case"undefined":case"null":e.innerHTML="";break;default:e.innerHTML=a}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(o=>{this.element.classList.add(o)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var d,o=e,a=this.fieldStructure,c=a.length;for(let p=0;p<c&&(d=o=o[a[p]],o);p++);return d}_setFlatData(e,o){this.field&&(e[this.field]=o)}_setNestedData(e,o){var a=e,c=this.fieldStructure,d=c.length;for(let p=0;p<d;p++)if(p==d-1)a[c[p]]=o;else{if(!a[c[p]]){if(void 0===o)break;a[c[p]]={}}a=a[c[p]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,o){var a=this.parent.isGroup?this.parent.getGroupElement().clientHeight:o||this.parent.getHeadersElement().clientHeight;this.element.style.height=a+"px",this.isGroup&&(this.groupElement.style.minHeight=a-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==e&&(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(c){c.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var o=[];return this.isGroup&&e&&(this.columns.forEach(function(a){o.push(a.getDefinition(!0))}),this.definition.columns=o),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(o){o.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,o){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(a){a.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,o),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(e,o){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(a){a.hide()}),this.dispatch("column-hide",this),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(o){o.visible&&(e+=o.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var o=this.columns.indexOf(e);o>-1&&this.columns.splice(o,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(o){o.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var e=[];this.cells.forEach(function(o){o.row.heightInitialized&&(null!==o.row.getElement().offsetParent?(e.push(o.row),o.row.clearCellHeight()):o.row.heightInitialized=!1)}),e.forEach(function(o){o.calcHeight()}),e.forEach(function(o){o.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(o){o.visible&&(e+=o.getWidth())}):e=this.width,e}getHeight(){return this.element.offsetHeight}setMinWidth(e){this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(o){o.setMinWidth()})}setMaxWidth(e){this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(o){o.setMaxWidth()})}delete(){return new Promise((e,o)=>{this.isGroup&&this.columns.forEach(function(c){c.delete()}),this.dispatch("column-delete",this);var a=this.cells.length;for(let c=0;c<a;c++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(e){var o=new Im(this,e);return this.cells.push(o),o}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._nextVisibleColumn(e+1)}_nextVisibleColumn(e){var o=this.table.columnManager.getColumnByIndex(e);return!o||o.visible?o:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._prevVisibleColumn(e-1)}_prevVisibleColumn(e){var o=this.table.columnManager.getColumnByIndex(e);return!o||o.visible?o:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,void 0!==this.definition.width&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(o=>{o.clearWidth()}));var e=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(o=>{var a=o.getWidth();a>e&&(e=a)}),e&&this.setWidthActual(e+1))}}updateDefinition(e){var o;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(o=Object.assign({},this.getDefinition()),o=Object.assign(o,e),this.table.columnManager.addColumn(o,!1,this).then(a=>(o.field==this.field&&(this.field=!1),this.delete().then(()=>a.getComponent()))))}deleteCell(e){var o=this.cells.indexOf(e);o>-1&&this.cells.splice(o,1)}getComponent(){return this.component||(this.component=new vO(this)),this.component}}return r.defaultOptionList=D5,r})();class HC{constructor(t){return this._row=t,new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._row.table.componentFunctionBinder.handle("row",e._row,o)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(t){return this._row.table.rowManager.getRowPosition(this._row,t)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(t,e){this._row.moveToRow(t,e)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t&&t.getComponent()}getPrevRow(){var t=this._row.prevRow();return t&&t.getComponent()}}class qr extends ds{constructor(t,e,o="row"){super(e.table),this.parent=e,this.data={},this.type=o,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var e=0,o=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(a){var c=a.getHeight();c>e&&(e=c)}),this.height=t?Math.max(e,o):this.manualHeight?this.height:Math.max(e,o),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(t){t.clearHeight()})}normalizeHeight(t){t&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var a,e=this.element&&En.elVisible(this.element),o={};return new Promise((c,d)=>{for(var p in"string"==typeof t&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(o=Object.assign(o,this.data),o=Object.assign(o,t)),a=this.chain("row-data-changing",[this,o,t],null,t))this.data[p]=a[p];for(var p in this.dispatch("row-data-save-after",this),t)this.table.columnManager.getColumnsByFieldRoot(p).forEach(E=>{let D=this.getCell(E.getField());if(D){let x=E.getFieldValue(a);D.getValue()!=x&&(D.setValueProcessData(x),e&&D.cellRendered())}});e?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,e,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),c()})}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){return t=this.table.columnManager.findColumn(t),this.initialized||this.generateCells(),this.cells.find(function(o){return o.column===t})}getCellIndex(t){return this.cells.findIndex(function(e){return e===t})}findCell(t){return this.cells.find(e=>e.element===t)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(t,e){var o=this.table.rowManager.findRow(t);o?(this.table.rowManager.moveRowActual(this,o,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let e=0;e<t;e++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new HC(this)),this.component}}var M5={avg:function(r,t,e){var o=0,a=void 0!==e.precision?e.precision:2;return r.length&&(o=r.reduce(function(c,d){return Number(c)+Number(d)}),o/=r.length,o=!1!==a?o.toFixed(a):o),parseFloat(o).toString()},max:function(r,t,e){var o=null,a=void 0!==e.precision&&e.precision;return r.forEach(function(c){((c=Number(c))>o||null===o)&&(o=c)}),null!==o?!1!==a?o.toFixed(a):o:""},min:function(r,t,e){var o=null,a=void 0!==e.precision&&e.precision;return r.forEach(function(c){((c=Number(c))<o||null===o)&&(o=c)}),null!==o?!1!==a?o.toFixed(a):o:""},sum:function(r,t,e){var o=0,a=void 0!==e.precision&&e.precision;return r.length&&r.forEach(function(c){c=Number(c),o+=isNaN(c)?0:Number(c)}),!1!==a?o.toFixed(a):o},concat:function(r,t,e){var o=0;return r.length&&(o=r.reduce(function(a,c){return String(a)+String(c)})),o},count:function(r,t,e){var o=0;return r.length&&r.forEach(function(a){a&&o++}),o}};let R5=(()=>{class r extends Oi{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new mp({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var o=e.definition,a={topCalcParams:o.topCalcParams||{},botCalcParams:o.bottomCalcParams||{}};if(o.topCalc){switch(typeof o.topCalc){case"string":r.calculations[o.topCalc]?a.topCalc=r.calculations[o.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.topCalc);break;case"function":a.topCalc=o.topCalc}a.topCalc&&(e.modules.columnCalcs=a,this.topCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(o.bottomCalc){switch(typeof o.bottomCalc){case"string":r.calculations[o.bottomCalc]?a.botCalc=r.calculations[o.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.bottomCalc);break;case"function":a.botCalc=o.bottomCalc}a.botCalc&&(e.modules.columnCalcs=a,this.botCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-e+"px")}recalc(e){var o;if(this.topInitialized||this.botInitialized){if(this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),o=this.generateRow("top",this.rowsToData(e)),this.topRow=o;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(o.getElement()),o.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),o=this.generateRow("bottom",this.rowsToData(e)),this.botRow=o;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(o.getElement()),o.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(o=>{this.recalcGroup(o)})}recalcGroup(e){var o,a;e&&e.calcs&&(e.calcs.bottom&&(o=this.rowsToData(e.rows),a=this.generateRowData("bottom",o),e.calcs.bottom.updateData(a),e.calcs.bottom.reinitialize()),e.calcs.top&&(o=this.rowsToData(e.rows),a=this.generateRowData("top",o),e.calcs.top.updateData(a),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var o=[];return e.forEach(a=>{if(o.push(a.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&a.modules.dataTree.open){var c=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(a));o=o.concat(c)}}),o}generateRow(e,o){var c,a=this.generateRowData(e,o);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),c=new qr(a,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),c.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),c.component=!1,c.getComponent=()=>(c.component||(c.component=new S5(this)),c.component),c.generateCells=()=>{var d=[];this.table.columnManager.columnsByIndex.forEach(p=>{this.genColumn.setField(p.getField()),this.genColumn.hozAlign=p.hozAlign,this.genColumn.modules.format=p.definition[e+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(p.definition[e+"CalcFormatter"]),params:p.definition[e+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=p.definition.cssClass;var f=new Im(this.genColumn,c);f.getElement(),f.column=p,f.setWidth(),p.cells.push(f),d.push(f),p.visible||f.hide()}),c.cells=d},c}generateRowData(e,o){var p,f,a={},d="top"==e?"topCalc":"botCalc";return("top"==e?this.topCalcs:this.botCalcs).forEach(function(v){var E=[];v.modules.columnCalcs&&v.modules.columnCalcs[d]&&(o.forEach(function(D){E.push(v.getFieldValue(D))}),p="function"==typeof v.modules.columnCalcs[f=d+"Params"]?v.modules.columnCalcs[f](E,o):v.modules.columnCalcs[f],v.setFieldValue(a,v.modules.columnCalcs[d](E,o,p)))}),a}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(a=>{e[a.getKey()]=this.getGroupResults(a)}):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var o=e._getSelf(),a=e.getSubGroups(),c={};return a.forEach(p=>{c[p.getKey()]=this.getGroupResults(p)}),{top:o.calcs.top?o.calcs.top.getData():{},bottom:o.calcs.bottom?o.calcs.bottom.getData():{},groups:c}}}return r.moduleName="columnCalcs",r.calculations=M5,r})(),I5=(()=>{class r extends Oi{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,o=this.table.columnManager.getFirstVisibileColumn(),a=this.table.options;switch(this.field=a.dataTreeChildField,this.indent=a.dataTreeChildIndent,this.elementField=a.dataTreeElementColumn||!!o&&o.field,a.dataTreeBranchElement&&(!0===a.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof a.dataTreeBranchElement?((e=document.createElement("div")).innerHTML=a.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=a.dataTreeBranchElement),a.dataTreeCollapseElement?"string"==typeof a.dataTreeCollapseElement?((e=document.createElement("div")).innerHTML=a.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=a.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),a.dataTreeExpandElement?"string"==typeof a.dataTreeExpandElement?((e=document.createElement("div")).innerHTML=a.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=a.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof a.dataTreeStartExpanded){case"boolean":this.startOpen=function(c,d){return a.dataTreeStartExpanded};break;case"function":this.startOpen=a.dataTreeStartExpanded;break;default:this.startOpen=function(c,d){return a.dataTreeStartExpanded[d]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(o=>{e=e.concat(this.getTreeChildren(o,!1,!0))}),e}rowDataChanged(e,o,a){this.redrawNeeded(a)&&(this.initializeRow(e),o&&(this.layoutRow(e),this.refreshData(!0)))}initializeRow(e){var o=e.getData()[this.field],a=Array.isArray(o),c=a||!a&&"object"==typeof o&&null!==o;!c&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!c&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:!!c&&(e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0)),controlEl:!(!e.modules.dataTree||!c)&&e.modules.dataTree.controlEl,branchEl:!(!e.modules.dataTree||!c)&&e.modules.dataTree.branchEl,parent:!!e.modules.dataTree&&e.modules.dataTree.parent,children:c}}reinitializeRowChildren(e){this.getTreeChildren(e,!1,!0).forEach(function(a){a.reinitialize(!0)})}layoutRow(e){var a=(this.elementField?e.getCell(this.elementField):e.getCells()[0]).getElement(),c=e.modules.dataTree;c.branchEl&&(c.branchEl.parentNode&&c.branchEl.parentNode.removeChild(c.branchEl),c.branchEl=!1),c.controlEl&&(c.controlEl.parentNode&&c.controlEl.parentNode.removeChild(c.controlEl),c.controlEl=!1),this.generateControlElement(e,a),e.getElement().classList.add("tabulator-tree-level-"+c.index),c.index&&(this.branchEl?(c.branchEl=this.branchEl.cloneNode(!0),a.insertBefore(c.branchEl,a.firstChild),this.table.rtl?c.branchEl.style.marginRight=(c.branchEl.offsetWidth+c.branchEl.style.marginLeft)*(c.index-1)+c.index*this.indent+"px":c.branchEl.style.marginLeft=(c.branchEl.offsetWidth+c.branchEl.style.marginRight)*(c.index-1)+c.index*this.indent+"px"):this.table.rtl?a.style.paddingRight=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-right"))+c.index*this.indent+"px":a.style.paddingLeft=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-left"))+c.index*this.indent+"px")}generateControlElement(e,o){var a=e.modules.dataTree,c=(o=o||e.getCells()[0].getElement(),a.controlEl);!1!==a.children&&(a.open?(a.controlEl=this.collapseEl.cloneNode(!0),a.controlEl.addEventListener("click",d=>{d.stopPropagation(),this.collapseRow(e)})):(a.controlEl=this.expandEl.cloneNode(!0),a.controlEl.addEventListener("click",d=>{d.stopPropagation(),this.expandRow(e)})),a.controlEl.addEventListener("mousedown",d=>{d.stopPropagation()}),c&&c.parentNode===o?c.parentNode.replaceChild(a.controlEl,c):o.insertBefore(a.controlEl,o.firstChild))}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){var o=[];return e.forEach((a,c)=>{var d;o.push(a),a instanceof qr&&(a.create(),!(d=a.modules.dataTree.children).index&&!1!==d.children&&this.getChildren(a).forEach(f=>{f.create(),o.push(f)}))}),o}getChildren(e,o){var a=e.modules.dataTree,c=[],d=[];return!1!==a.children&&(a.open||o)&&(Array.isArray(a.children)||(a.children=this.generateChildren(e)),c=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(a.children):a.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(c),c.forEach(p=>{d.push(p),this.getChildren(p).forEach(v=>{d.push(v)})})),d}generateChildren(e){var o=[],a=e.getData()[this.field];return Array.isArray(a)||(a=[a]),a.forEach(c=>{var d=new qr(c||{},this.table.rowManager);d.create(),d.modules.dataTree.index=e.modules.dataTree.index+1,d.modules.dataTree.parent=e,d.modules.dataTree.children&&(d.modules.dataTree.open=this.startOpen(d.getComponent(),d.modules.dataTree.index)),o.push(d)}),o}expandRow(e,o){var a=e.modules.dataTree;!1!==a.children&&(a.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var o=e.modules.dataTree;!1!==o.children&&(o.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var o=e.modules.dataTree;!1!==o.children&&(o.open?this.collapseRow(e):this.expandRow(e))}getTreeParent(e){return!!e.modules.dataTree.parent&&e.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(e){var o=e.modules.dataTree,a=[];return o.children&&(Array.isArray(o.children)||(o.children=this.generateChildren(e)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(o.children):o.children).forEach(d=>{d instanceof qr&&a.push(d)})),a}rowDelete(e){var a,o=e.modules.dataTree.parent;o&&(!1!==(a=this.findChildIndex(e,o))&&o.data[this.field].splice(a,1),o.data[this.field].length||delete o.data[this.field],this.initializeRow(o),this.layoutRow(o)),this.refreshData(!0)}addTreeChildRow(e,o,a,c){var d=!1;"string"==typeof o&&(o=JSON.parse(o)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),void 0!==c&&!1!==(d=this.findChildIndex(c,e))&&e.data[this.field].splice(a?d:d+1,0,o),!1===d&&(a?e.data[this.field].unshift(o):e.data[this.field].push(o)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,o){var a=!1;return"object"==typeof e?e instanceof qr?a=e.data:e instanceof RowComponent?a=e._getSelf().data:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&o.modules.dataTree&&(a=o.modules.dataTree.children.find(c=>c instanceof qr&&c.element===e))&&(a=a.data):a=null!=e&&o.data[this.field].find(c=>c.data[this.table.options.index]==e),a&&(Array.isArray(o.data[this.field])&&(a=o.data[this.field].indexOf(a)),-1==a&&(a=!1)),a}getTreeChildren(e,o,a){var c=e.modules.dataTree,d=[];return c.children&&(Array.isArray(c.children)||(c.children=this.generateChildren(e)),c.children.forEach(p=>{p instanceof qr&&(d.push(o?p.getComponent():p),a&&(d=d.concat(this.getTreeChildren(p,o,a))))})),d}checkForRestyle(e){e.row.cells.indexOf(e)||this.layoutRow(e.row)}getChildField(){return this.field}redrawNeeded(e){return!!this.field&&void 0!==e[this.field]||!!this.elementField&&void 0!==e[this.elementField]}}return r.moduleName="dataTree",r})();var P5={csv:function(r,t,e){var o=t&&t.delimiter?t.delimiter:",",a=[],c=[];r.forEach(d=>{var p=[];switch(d.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":d.columns.forEach((f,v)=>{f&&1===f.depth&&(c[v]=null==f.value?"":'"'+String(f.value).split('"').join('""')+'"')});break;case"row":d.columns.forEach(f=>{if(f){switch(typeof f.value){case"object":f.value=JSON.stringify(f.value);break;case"undefined":case"null":f.value=""}p.push('"'+String(f.value).split('"').join('""')+'"')}}),a.push(p.join(o))}}),c.length&&a.unshift(c.join(o)),a=a.join("\n"),t.bom&&(a="\ufeff"+a),e(a,"text/csv")},json:function(r,t,e){var o=[];r.forEach(a=>{var c={};switch(a.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":a.columns.forEach(d=>{d&&(c[d.component.getField()]=d.value)}),o.push(c)}}),e(o=JSON.stringify(o,null,"\t"),"application/json")},pdf:function(r,t,e){var o=[],a=[],c={},d=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},p=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},f=t.jsPDF||{},v=t&&t.title?t.title:"";function E(x,N){var B=[];return x.columns.forEach(Z=>{var z;if(Z){switch(typeof Z.value){case"object":Z.value=JSON.stringify(Z.value);break;case"undefined":case"null":Z.value=""}z={content:Z.value,colSpan:Z.width,rowSpan:Z.height},N&&(z.styles=N),B.push(z)}else B.push("")}),B}f.orientation||(f.orientation=t.orientation||"landscape"),f.unit||(f.unit="pt"),r.forEach(x=>{switch(x.type){case"header":o.push(E(x));break;case"group":a.push(E(x,d));break;case"calc":a.push(E(x,p));break;case"row":a.push(E(x))}});var D=new jspdf.jsPDF(f);t&&t.autoTable&&(c="function"==typeof t.autoTable?t.autoTable(D)||{}:t.autoTable),v&&(c.didDrawPage=function(x){D.text(v,40,30)}),c.head=o,c.body=a,D.autoTable(c),t&&t.documentProcessing&&t.documentProcessing(D),e(D.output("arraybuffer"),"application/pdf")},xlsx:function(r,t,e){var a=t.sheetName||"Sheet1",c=XLSX.utils.book_new(),d=new ds(this);function f(){var D=[],x=[],N={},B={s:{c:0,r:0},e:{c:r[0]?r[0].columns.reduce((Z,z)=>Z+(z&&z.width?z.width:1),0):0,r:r.length}};return r.forEach((Z,z)=>{var de=[];Z.columns.forEach(function(he,Le){he?(de.push(he.value instanceof Date||"object"!=typeof he.value?he.value:JSON.stringify(he.value)),(he.width>1||he.height>-1)&&x.push({s:{r:z,c:Le},e:{r:z+he.height-1,c:Le+he.width-1}})):de.push("")}),D.push(de)}),XLSX.utils.sheet_add_aoa(N,D),N["!ref"]=XLSX.utils.encode_range(B),x.length&&(N["!merges"]=x),N}if(c.SheetNames=[],c.Sheets={},t.sheetOnly)e(f());else{if(t.sheets)for(var v in t.sheets)!0===t.sheets[v]?(c.SheetNames.push(v),c.Sheets[v]=f()):(c.SheetNames.push(v),d.commsSend(t.sheets[v],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(D){c.Sheets[v]=D}}));else c.SheetNames.push(a),c.Sheets[a]=f();t.documentProcessing&&(c=t.documentProcessing(c)),e(function(D){for(var x=new ArrayBuffer(D.length),N=new Uint8Array(x),B=0;B!=D.length;++B)N[B]=255&D.charCodeAt(B);return x}(XLSX.write(c,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(r,t,e){this.modExists("export",!0)&&e(this.modules.export.genereateHTMLTable(r),"text/html")}};let L5=(()=>{class r extends Oi{constructor(e){super(e),this.registerTableOption("downloadReady",function(o,a){return a}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(e,o,a,c){this.download(e,o,a,c,!0)}download(e,o,a,c,d){var p=!1;if("function"==typeof e?p=e:r.downloaders[e]?p=r.downloaders[e]:console.warn("Download Error - No such download type found: ",e),p){var v=this.generateExportList(c);p.call(this.table,v,a||{},function(E,D){d?!0===d?this.triggerDownload(E,D,e,o,!0):d(E):this.triggerDownload(E,D,e,o)}.bind(this))}}generateExportList(e){var o=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),a=this.table.options.groupHeaderDownload;return a&&!Array.isArray(a)&&(a=[a]),o.forEach(c=>{var d;"group"===c.type&&(d=c.columns[0],a&&a[c.indent]&&(d.value=a[c.indent](d.value,c.component._group.getRowCount(),c.component._group.getData(),c.component)))}),o}triggerDownload(e,o,a,c,d){var p=document.createElement("a"),f=new Blob([e],{type:o});c=c||"Tabulator."+("function"==typeof a?"txt":a),(f=this.table.options.downloadReady(e,f))&&(d?window.open(window.URL.createObjectURL(f)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(f,c):(p.setAttribute("href",window.URL.createObjectURL(f)),p.setAttribute("download",c),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p)),this.dispatchExternal("downloadComplete"))}commsReceived(e,o,a){"intercept"===o&&this.download(a.type,"",a.options,a.active,a.intercept)}}return r.moduleName="download",r.downloaders=P5,r})();function xm(r,t){var e=t.mask,o=void 0!==t.maskLetterChar?t.maskLetterChar:"A",a=void 0!==t.maskNumberChar?t.maskNumberChar:"9",c=void 0!==t.maskWildcardChar?t.maskWildcardChar:"*";function d(p){var f=e[p];void 0!==f&&f!==c&&f!==o&&f!==a&&(r.value=r.value+""+f,d(p+1))}r.addEventListener("keydown",p=>{var f=r.value.length,v=p.key;if(p.keyCode>46){if(f>=e.length)return p.preventDefault(),p.stopPropagation(),!1;switch(e[f]){case o:if(v.toUpperCase()==v.toLowerCase())return p.preventDefault(),p.stopPropagation(),!1;break;case a:if(isNaN(v))return p.preventDefault(),p.stopPropagation(),!1;break;case c:break;default:if(v!==e[f])return p.preventDefault(),p.stopPropagation(),!1}}}),r.addEventListener("keyup",p=>{p.keyCode>46&&t.maskAutoFill&&d(r.value.length)}),r.placeholder||(r.placeholder=e),t.maskAutoFill&&d(r.value.length)}var Y5={input:function(r,t,e,o,a){var c=r.getValue(),d=document.createElement("input");if(d.setAttribute("type",a.search?"search":"text"),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let f in a.elementAttributes)"+"==f.charAt(0)?(f=f.slice(1),d.setAttribute(f,d.getAttribute(f)+a.elementAttributes["+"+f])):d.setAttribute(f,a.elementAttributes[f]);function p(f){null==c&&""!==d.value||d.value!==c?e(d.value)&&(c=d.value):o()}return d.value=void 0!==c?c:"",t(function(){d.focus({preventScroll:!0}),d.style.height="100%"}),d.addEventListener("change",p),d.addEventListener("blur",p),d.addEventListener("keydown",function(f){switch(f.keyCode){case 13:p();break;case 27:o();break;case 35:case 36:f.stopPropagation()}}),a.mask&&xm(d,a),d},textarea:function(r,t,e,o,a){var c=r.getValue(),d=a.verticalNavigation||"hybrid",p=String(null!=c?c:""),v=(p.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),E=0;if(v.style.display="block",v.style.padding="2px",v.style.height="100%",v.style.width="100%",v.style.boxSizing="border-box",v.style.whiteSpace="pre-wrap",v.style.resize="none",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let x in a.elementAttributes)"+"==x.charAt(0)?(x=x.slice(1),v.setAttribute(x,v.getAttribute(x)+a.elementAttributes["+"+x])):v.setAttribute(x,a.elementAttributes[x]);function D(x){null==c&&""!==v.value||v.value!==c?(e(v.value)&&(c=v.value),setTimeout(function(){r.getRow().normalizeHeight()},300)):o()}return v.value=p,t(function(){v.focus({preventScroll:!0}),v.style.height="100%",v.style.height=v.scrollHeight+"px",r.getRow().normalizeHeight()}),v.addEventListener("change",D),v.addEventListener("blur",D),v.addEventListener("keyup",function(){v.style.height="";var x=v.scrollHeight;v.style.height=x+"px",x!=E&&(E=x,r.getRow().normalizeHeight())}),v.addEventListener("keydown",function(x){switch(x.keyCode){case 27:o();break;case 38:("editor"==d||"hybrid"==d&&v.selectionStart)&&(x.stopImmediatePropagation(),x.stopPropagation());break;case 40:("editor"==d||"hybrid"==d&&v.selectionStart!==v.value.length)&&(x.stopImmediatePropagation(),x.stopPropagation());break;case 35:case 36:x.stopPropagation()}}),a.mask&&xm(v,a),v},number:function(r,t,e,o,a){var c=r.getValue(),d=a.verticalNavigation||"editor",p=document.createElement("input");if(p.setAttribute("type","number"),void 0!==a.max&&p.setAttribute("max",a.max),void 0!==a.min&&p.setAttribute("min",a.min),void 0!==a.step&&p.setAttribute("step",a.step),p.style.padding="4px",p.style.width="100%",p.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let E in a.elementAttributes)"+"==E.charAt(0)?(E=E.slice(1),p.setAttribute(E,p.getAttribute(E)+a.elementAttributes["+"+E])):p.setAttribute(E,a.elementAttributes[E]);p.value=c;var f=function(E){v()};function v(){var E=p.value;!isNaN(E)&&""!==E&&(E=Number(E)),E!==c?e(E)&&(c=E):o()}return t(function(){p.removeEventListener("blur",f),p.focus({preventScroll:!0}),p.style.height="100%",p.addEventListener("blur",f)}),p.addEventListener("keydown",function(E){switch(E.keyCode){case 13:v();break;case 27:o();break;case 38:case 40:"editor"==d&&(E.stopImmediatePropagation(),E.stopPropagation());break;case 35:case 36:E.stopPropagation()}}),a.mask&&xm(p,a),p},range:function(r,t,e,o,a){var c=r.getValue(),d=document.createElement("input");if(d.setAttribute("type","range"),void 0!==a.max&&d.setAttribute("max",a.max),void 0!==a.min&&d.setAttribute("min",a.min),void 0!==a.step&&d.setAttribute("step",a.step),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let f in a.elementAttributes)"+"==f.charAt(0)?(f=f.slice(1),d.setAttribute(f,d.getAttribute(f)+a.elementAttributes["+"+f])):d.setAttribute(f,a.elementAttributes[f]);function p(){var f=d.value;!isNaN(f)&&""!==f&&(f=Number(f)),f!=c?e(f)&&(c=f):o()}return d.value=c,t(function(){d.focus({preventScroll:!0}),d.style.height="100%"}),d.addEventListener("blur",function(f){p()}),d.addEventListener("keydown",function(f){switch(f.keyCode){case 13:p();break;case 27:o()}}),d},select:function(r,t,e,o,a){var c=this,d=r.getElement(),p=r.getValue(),f=a.verticalNavigation||"editor",v=void 0!==p||null===p?Array.isArray(p)?p:[p]:void 0!==a.defaultValue?a.defaultValue:[],E=document.createElement("input"),D=document.createElement("div"),x=a.multiselect,N=[],B={},Z=[],z=[],de=!0,he=!1,Le="",je=null;function Et(Fe){var Ci,ft={},zi=c.table.getData();return(Ci=Fe?c.table.columnManager.getColumnByField(Fe):r.getColumn()._getSelf())?zi.forEach(function(vd){var fr=Ci.getFieldValue(vd);null!=fr&&""!==fr&&(ft[fr]=!0)}):console.warn("unable to find matching column to create select lookup list:",Fe),Object.keys(ft)}function Qi(Fe,ft){!x&&B&&B.element&&B.element.classList.remove("active"),B&&B.element&&B.element.classList.remove("focused"),B=Fe,Fe.element&&(Fe.element.classList.add("focused"),ft&&Fe.element.classList.add("active")),Fe&&Fe.element&&Fe.element.scrollIntoView&&Fe.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function dn(Fe){-1==z.indexOf(Fe)&&(z.push(Fe),Qi(Fe,!0)),dt()}function Ji(Fe){var ft=z[Fe];Fe>-1&&(z.splice(Fe,1),ft.element&&ft.element.classList.remove("active"))}function Zt(Fe){Fe||(Fe=B);var ft=z.indexOf(Fe);ft>-1?Ji(ft):(!0!==x&&z.length>=x&&Ji(0),dn(Fe)),dt()}function Tr(Fe){rt(),Fe||(Fe=B),Fe&&(E.value=Fe.label,e(Fe.value)),v=[Fe.value]}function Zn(Fe){Fe||rt();var ft=[];z.forEach(zi=>{ft.push(zi.value)}),v=ft,e(ft)}function dt(){var Fe=[];z.forEach(ft=>{Fe.push(ft.label)}),E.value=Fe.join(", "),!1===c.currentCell&&Zn(!0)}function Xe(){rt(),o()}function rt(){D.parentNode&&D.parentNode.removeChild(D),c.table.rowManager.element.removeEventListener("scroll",Xe)}if((Array.isArray(a)||!Array.isArray(a)&&"object"==typeof a&&!a.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),a={values:a}),E.setAttribute("type","text"),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",E.style.cursor="default",E.readOnly=0!=this.currentCell,a.elementAttributes&&"object"==typeof a.elementAttributes)for(let Fe in a.elementAttributes)"+"==Fe.charAt(0)?(Fe=Fe.slice(1),E.setAttribute(Fe,E.getAttribute(Fe)+a.elementAttributes["+"+Fe])):E.setAttribute(Fe,a.elementAttributes[Fe]);return E.value=void 0!==p||null===p?p:"",E.addEventListener("search",function(Fe){E.value||(function(){var Fe=z.length;for(let ft=0;ft<Fe;ft++)Ji(0)}(),Zn())}),E.addEventListener("keydown",function(Fe){var ft;switch(Fe.keyCode){case 38:ft=N.indexOf(B),("editor"==f||"hybrid"==f&&ft)&&(Fe.stopImmediatePropagation(),Fe.stopPropagation(),Fe.preventDefault(),ft>0&&Qi(N[ft-1],!x));break;case 40:ft=N.indexOf(B),("editor"==f||"hybrid"==f&&ft<N.length-1)&&(Fe.stopImmediatePropagation(),Fe.stopPropagation(),Fe.preventDefault(),ft<N.length-1&&Qi(-1==ft?N[0]:N[ft+1],!x));break;case 37:case 39:Fe.stopImmediatePropagation(),Fe.stopPropagation(),Fe.preventDefault();break;case 13:x?Zt():Tr();break;case 27:Xe();break;case 9:break;default:!1===c.currentCell&&Fe.preventDefault(),Fe.keyCode>=38&&Fe.keyCode<=90&&function(Fe){clearTimeout(je);var ft=String.fromCharCode(event.keyCode).toLowerCase();Le+=ft.toLowerCase();var zi=N.find(Ci=>void 0!==Ci.label&&Ci.label.toLowerCase().startsWith(Le));zi&&Qi(zi,!x),je=setTimeout(()=>{Le=""},800)}()}}),E.addEventListener("blur",function(Fe){de&&(x?Zn():Xe())}),E.addEventListener("focus",function(Fe){he||function(){if(z=[],!D.parentNode){!function(Fe,ft){var zi=[],Ci=[];function vd(Yi){return ft.indexOf((Yi={label:Yi.label,value:Yi.value,itemParams:Yi.itemParams,elementAttributes:Yi.elementAttributes,element:!1}).value)>-1&&dn(Yi),zi.push(Yi),Ci.push(Yi),Yi}if("function"==typeof Fe&&(Fe=Fe(r)),Array.isArray(Fe))Fe.forEach(function(Yi){var jn;"object"==typeof Yi?Yi.options?(Ci.push(jn={label:Yi.label,group:!0,itemParams:Yi.itemParams,elementAttributes:Yi.elementAttributes,element:!1}),Yi.options.forEach(function(Pp){vd(Pp)})):vd(Yi):(ft.indexOf((jn={label:Yi,value:Yi,element:!1}).value)>-1&&dn(jn),zi.push(jn),Ci.push(jn))});else for(var fr in Fe){var Ys={label:Fe[fr],value:fr,element:!1};ft.indexOf(Ys.value)>-1&&dn(Ys),zi.push(Ys),Ci.push(Ys)}a.sortValuesList&&(zi.sort((Yi,jn)=>Yi.label<jn.label?-1:Yi.label>jn.label?1:0),Ci.sort((Yi,jn)=>Yi.label<jn.label?-1:Yi.label>jn.label?1:0),"asc"!==a.sortValuesList&&(zi.reverse(),Ci.reverse())),N=zi,Z=Ci,function(){for(;D.firstChild;)D.removeChild(D.firstChild);Z.forEach(function(Fe){var ft=Fe.element;if(!ft){if(ft=document.createElement("div"),Fe.label=a.listItemFormatter?a.listItemFormatter(Fe.value,Fe.label,r,ft,Fe.itemParams):Fe.label,Fe.group?(ft.classList.add("tabulator-edit-select-list-group"),ft.tabIndex=0,ft.innerHTML=""===Fe.label?"&nbsp;":Fe.label):(ft.classList.add("tabulator-edit-select-list-item"),ft.tabIndex=0,ft.innerHTML=""===Fe.label?"&nbsp;":Fe.label,ft.addEventListener("click",function(){he=!0,setTimeout(()=>{he=!1},10),x?(Zt(Fe),E.focus()):Tr(Fe)}),z.indexOf(Fe)>-1&&ft.classList.add("active")),Fe.elementAttributes&&"object"==typeof Fe.elementAttributes)for(let zi in Fe.elementAttributes)"+"==zi.charAt(0)?(zi=zi.slice(1),ft.setAttribute(zi,E.getAttribute(zi)+Fe.elementAttributes["+"+zi])):ft.setAttribute(zi,Fe.elementAttributes[zi]);ft.addEventListener("mousedown",function(){de=!1,setTimeout(function(){de=!0},10)}),Fe.element=ft}D.appendChild(ft)})}()}(!0===a.values?Et():"string"==typeof a.values?Et(a.values):a.values||[],v);var Fe=En.elOffset(d);D.style.minWidth=d.offsetWidth+"px",D.style.top=Fe.top+d.offsetHeight+"px",D.style.left=Fe.left+"px",D.addEventListener("mousedown",function(ft){de=!1,setTimeout(function(){de=!0},10)}),document.body.appendChild(D)}}()}),(D=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){E.style.height="100%",E.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Xe)},10),E},autocomplete:function(r,t,e,o,a){var c=this,d=r.getElement(),p=r.getValue(),f=a.verticalNavigation||"editor",v=void 0!==p||null===p?p:void 0!==a.defaultValue?a.defaultValue:"",E=document.createElement("input"),D=document.createElement("div"),x=[],N=!1,B=!0,Z=!1;if(E.setAttribute("type","search"),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let dt in a.elementAttributes)"+"==dt.charAt(0)?(dt=dt.slice(1),E.setAttribute(dt,E.getAttribute(dt)+a.elementAttributes["+"+dt])):E.setAttribute(dt,a.elementAttributes[dt]);function z(){!0===a.values?Z=de():"string"==typeof a.values&&(Z=de(a.values))}function de(dt){var tt,Bt={},Xe=c.table.getData();return(tt=dt?c.table.columnManager.getColumnByField(dt):r.getColumn()._getSelf())?(Xe.forEach(function(rt){var wt=tt.getFieldValue(rt);null!=wt&&""!==wt&&(Bt[wt]=!0)}),Bt=a.sortValuesList?"asc"==a.sortValuesList?Object.keys(Bt).sort():Object.keys(Bt).sort().reverse():Object.keys(Bt)):console.warn("unable to find matching column to create autocomplete lookup list:",dt),Bt}function he(dt,Bt){var tt,rt,Xe=[];tt=Z||a.values||[],a.searchFunc?(Xe=a.searchFunc(dt,tt))instanceof Promise?(Le(void 0!==a.searchingPlaceholder?a.searchingPlaceholder:"Searching..."),Xe.then(wt=>{si(je(wt),Bt)}).catch(wt=>{console.err("error in autocomplete search promise:",wt)})):si(je(Xe),Bt):(rt=je(tt),""===dt?a.showListOnEmpty&&(Xe=rt):rt.forEach(function(wt){(null!==wt.value||void 0!==wt.value)&&(String(wt.value).toLowerCase().indexOf(String(dt).toLowerCase())>-1||String(wt.title).toLowerCase().indexOf(String(dt).toLowerCase())>-1)&&Xe.push(wt)}),si(Xe,Bt))}function Le(dt){var Bt=document.createElement("div");Et(),!1!==dt&&(Bt.classList.add("tabulator-edit-select-list-notice"),Bt.tabIndex=0,dt instanceof Node?Bt.appendChild(dt):Bt.innerHTML=dt,D.appendChild(Bt))}function je(dt){var Bt=[];if(Array.isArray(dt))dt.forEach(function(rt){var wt={};"object"==typeof rt?(wt.title=a.listItemFormatter?a.listItemFormatter(rt.value,rt.label):rt.label,wt.value=rt.value):(wt.title=a.listItemFormatter?a.listItemFormatter(rt,rt):rt,wt.value=rt),Bt.push(wt)});else for(var Xe in dt){var tt={title:a.listItemFormatter?a.listItemFormatter(Xe,dt[Xe]):dt[Xe],value:Xe};Bt.push(tt)}return Bt}function Et(){for(;D.firstChild;)D.removeChild(D.firstChild)}function si(dt,Bt){dt.length?function(dt,Bt){var Xe=!1;Et(),(x=dt).forEach(function(tt){var rt=tt.element;rt||((rt=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),rt.tabIndex=0,rt.innerHTML=tt.title,rt.addEventListener("click",function(wt){Ji(tt),Qi()}),rt.addEventListener("mousedown",function(wt){B=!1,setTimeout(function(){B=!0},10)}),tt.element=rt,Bt&&tt.value==p&&(E.value=tt.title,tt.element.classList.add("active"),Xe=!0),tt===N&&(tt.element.classList.add("active"),Xe=!0)),D.appendChild(rt)}),Xe||Ji(!1)}(dt,Bt):a.emptyPlaceholder&&Le(a.emptyPlaceholder)}function Qi(){Zt(),N?p!==N.value?(p=N.value,E.value=N.title,e(N.value)):o():a.freetext||a.allowEmpty&&""===E.value?(p=E.value,e(E.value)):o()}function Ji(dt,Bt){N&&N.element&&N.element.classList.remove("active"),N=dt,dt&&dt.element&&dt.element.classList.add("active"),dt&&dt.element&&dt.element.scrollIntoView&&dt.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Zt(){D.parentNode&&D.parentNode.removeChild(D),c.table.rowManager.element.removeEventListener("scroll",Tr)}function Tr(){Zt(),o()}return D.classList.add("tabulator-edit-select-list"),D.addEventListener("mousedown",function(dt){B=!1,setTimeout(function(){B=!0},10)}),E.addEventListener("keydown",function(dt){var Bt;switch(dt.keyCode){case 38:Bt=x.indexOf(N),("editor"==f||"hybrid"==f&&Bt)&&(dt.stopImmediatePropagation(),dt.stopPropagation(),dt.preventDefault(),Ji(Bt>0&&x[Bt-1]));break;case 40:Bt=x.indexOf(N),("editor"==f||"hybrid"==f&&Bt<x.length-1)&&(dt.stopImmediatePropagation(),dt.stopPropagation(),dt.preventDefault(),Bt<x.length-1&&Ji(-1==Bt?x[0]:x[Bt+1]));break;case 37:case 39:dt.stopImmediatePropagation(),dt.stopPropagation();break;case 13:Qi();break;case 27:Tr();break;case 36:case 35:dt.stopImmediatePropagation()}}),E.addEventListener("keyup",function(dt){switch(dt.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:he(E.value)}}),E.addEventListener("search",function(dt){he(E.value)}),E.addEventListener("blur",function(dt){B&&Qi()}),E.addEventListener("focus",function(dt){var Bt=v;z(),function(){if(!D.parentNode){for(;D.firstChild;)D.removeChild(D.firstChild);var dt=En.elOffset(d);D.style.minWidth=d.offsetWidth+"px",D.style.top=dt.top+d.offsetHeight+"px",D.style.left=dt.left+"px",document.body.appendChild(D)}}(),E.value=Bt,he(Bt,!0)}),t(function(){E.style.height="100%",E.focus({preventScroll:!0})}),a.mask&&xm(E,a),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Tr)},10),z(),E.value=v,he(v,!0),E},star:function(r,t,e,o,a){var c=this,d=r.getElement(),p=r.getValue(),f=d.getElementsByTagName("svg").length||5,v=d.getElementsByTagName("svg")[0]?d.getElementsByTagName("svg")[0].getAttribute("width"):14,E=[],D=document.createElement("div"),x=document.createElementNS("http://www.w3.org/2000/svg","svg");function N(de){E.forEach(function(he,Le){Le<de?("ie"==c.table.browser?he.setAttribute("class","tabulator-star-active"):he.classList.replace("tabulator-star-inactive","tabulator-star-active"),he.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==c.table.browser?he.setAttribute("class","tabulator-star-inactive"):he.classList.replace("tabulator-star-active","tabulator-star-inactive"),he.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function B(de){var he=document.createElement("span"),Le=x.cloneNode(!0);E.push(Le),he.addEventListener("mouseenter",function(je){je.stopPropagation(),je.stopImmediatePropagation(),N(de)}),he.addEventListener("mousemove",function(je){je.stopPropagation(),je.stopImmediatePropagation()}),he.addEventListener("click",function(je){je.stopPropagation(),je.stopImmediatePropagation(),e(de),d.blur()}),he.appendChild(Le),D.appendChild(he)}function Z(de){p=de,N(de)}if(d.style.whiteSpace="nowrap",d.style.overflow="hidden",d.style.textOverflow="ellipsis",D.style.verticalAlign="middle",D.style.display="inline-block",D.style.padding="4px",x.setAttribute("width",v),x.setAttribute("height",v),x.setAttribute("viewBox","0 0 512 512"),x.setAttribute("xml:space","preserve"),x.style.padding="0 1px",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let de in a.elementAttributes)"+"==de.charAt(0)?(de=de.slice(1),D.setAttribute(de,D.getAttribute(de)+a.elementAttributes["+"+de])):D.setAttribute(de,a.elementAttributes[de]);for(var z=1;z<=f;z++)B(z);return N(p=Math.min(parseInt(p),f)),D.addEventListener("mousemove",function(de){N(0)}),D.addEventListener("click",function(de){e(0)}),d.addEventListener("blur",function(de){o()}),d.addEventListener("keydown",function(de){switch(de.keyCode){case 39:Z(p+1);break;case 37:Z(p-1);break;case 13:e(p);break;case 27:o()}}),D},progress:function(r,t,e,o,a){var Z,z,x,N,c=r.getElement(),d=void 0===a.max?(null==(Z=c.getElementsByTagName("div")[0])?void 0:Z.getAttribute("max"))||100:a.max,p=void 0===a.min?(null==(z=c.getElementsByTagName("div")[0])?void 0:z.getAttribute("min"))||0:a.min,f=(d-p)/100,v=r.getValue()||0,E=document.createElement("div"),D=document.createElement("div");function B(){var de=window.getComputedStyle(c,null),he=f*Math.round(D.offsetWidth/((c.clientWidth-parseInt(de.getPropertyValue("padding-left"))-parseInt(de.getPropertyValue("padding-right")))/100))+p;e(he),c.setAttribute("aria-valuenow",he),c.setAttribute("aria-label",v)}if(E.style.position="absolute",E.style.right="0",E.style.top="0",E.style.bottom="0",E.style.width="5px",E.classList.add("tabulator-progress-handle"),D.style.display="inline-block",D.style.position="relative",D.style.height="100%",D.style.backgroundColor="#488CE9",D.style.maxWidth="100%",D.style.minWidth="0%",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let de in a.elementAttributes)"+"==de.charAt(0)?(de=de.slice(1),D.setAttribute(de,D.getAttribute(de)+a.elementAttributes["+"+de])):D.setAttribute(de,a.elementAttributes[de]);return c.style.padding="4px 4px",v=Math.min(parseFloat(v),d),v=Math.max(parseFloat(v),p),v=Math.round((v-p)/f),D.style.width=v+"%",c.setAttribute("aria-valuemin",p),c.setAttribute("aria-valuemax",d),D.appendChild(E),E.addEventListener("mousedown",function(de){x=de.screenX,N=D.offsetWidth}),E.addEventListener("mouseover",function(){E.style.cursor="ew-resize"}),c.addEventListener("mousemove",function(de){x&&(D.style.width=N+de.screenX-x+"px")}),c.addEventListener("mouseup",function(de){x&&(de.stopPropagation(),de.stopImmediatePropagation(),x=!1,N=!1,B())}),c.addEventListener("keydown",function(de){switch(de.keyCode){case 39:de.preventDefault(),D.style.width=D.clientWidth+c.clientWidth/100+"px";break;case 37:de.preventDefault(),D.style.width=D.clientWidth-c.clientWidth/100+"px";break;case 9:case 13:B();break;case 27:o()}}),c.addEventListener("blur",function(){o()}),D},tickCross:function(r,t,e,o,a){var c=r.getValue(),d=document.createElement("input"),p=a.tristate,f=void 0===a.indeterminateValue?null:a.indeterminateValue,v=!1;if(d.setAttribute("type","checkbox"),d.style.marginTop="5px",d.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let D in a.elementAttributes)"+"==D.charAt(0)?(D=D.slice(1),d.setAttribute(D,d.getAttribute(D)+a.elementAttributes["+"+D])):d.setAttribute(D,a.elementAttributes[D]);function E(D){return p?D?v?f:d.checked:d.checked&&!v?(d.checked=!1,d.indeterminate=!0,v=!0,f):(v=!1,d.checked):d.checked}return d.value=c,p&&(void 0===c||c===f||""===c)&&(v=!0,d.indeterminate=!0),"firefox"!=this.table.browser&&t(function(){d.focus({preventScroll:!0})}),d.checked=!0===c||"true"===c||"True"===c||1===c,t(function(){d.focus()}),d.addEventListener("change",function(D){e(E())}),d.addEventListener("blur",function(D){e(E(!0))}),d.addEventListener("keydown",function(D){13==D.keyCode&&e(E()),27==D.keyCode&&o()}),d}};let X5=(()=>{class r extends Oi{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=r.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(e){var o=this.currentCell,a=this.options("tabEndNewRow");o&&(this.navigateNext(e)||a&&(o.getElement().firstChild.blur(),(a=this.table.addRow(!0===a?{}:"function"==typeof a?a(o.row.getComponent()):Object.assign({},a))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(e){e||(e=this.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(o=>{this.modules.edit.clearEdited(o._getSelf())})}navigatePrev(e){var a,c,o=this.currentCell;if(o){if(e&&e.preventDefault(),a=this.navigateLeft())return!0;if((c=this.table.rowManager.prevDisplayRow(o.row,!0))&&(a=this.findNextEditableCell(c,c.cells.length)))return a.getComponent().edit(),!0}return!1}navigateNext(e){var a,c,o=this.currentCell;if(o){if(e&&e.preventDefault(),a=this.navigateRight())return!0;if((c=this.table.rowManager.nextDisplayRow(o.row,!0))&&(a=this.findNextEditableCell(c,-1)))return a.getComponent().edit(),!0}return!1}navigateLeft(e){var a,c,o=this.currentCell;return!(!o||(e&&e.preventDefault(),a=o.getIndex(),c=this.findPrevEditableCell(o.row,a),!c)||(c.getComponent().edit(),0))}navigateRight(e){var a,c,o=this.currentCell;return!(!o||(e&&e.preventDefault(),a=o.getIndex(),c=this.findNextEditableCell(o.row,a),!c)||(c.getComponent().edit(),0))}navigateUp(e){var a,c,o=this.currentCell;return!(!o||(e&&e.preventDefault(),a=o.getIndex(),c=this.table.rowManager.prevDisplayRow(o.row,!0),!c)||(c.cells[a].getComponent().edit(),0))}navigateDown(e){var a,c,o=this.currentCell;return!(!o||(e&&e.preventDefault(),a=o.getIndex(),c=this.table.rowManager.nextDisplayRow(o.row,!0),!c)||(c.cells[a].getComponent().edit(),0))}findNextEditableCell(e,o){var a=!1;if(o<e.cells.length-1)for(var c=o+1;c<e.cells.length;c++){let d=e.cells[c];if(d.column.modules.edit&&En.elVisible(d.getElement())){let p=!0;if("function"==typeof d.column.modules.edit.check&&(p=d.column.modules.edit.check(d.getComponent())),p){a=d;break}}}return a}findPrevEditableCell(e,o){var a=!1;if(o>0)for(var c=o-1;c>=0;c--){let d=e.cells[c],p=!0;if(d.column.modules.edit&&En.elVisible(d.getElement())&&("function"==typeof d.column.modules.edit.check&&(p=d.column.modules.edit.check(d.getComponent())),p)){a=d;break}}return a}initializeColumnCheck(e){void 0!==e.definition.editor&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}initializeColumn(e){var o={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{}};switch(typeof e.definition.editor){case"string":this.editors[e.definition.editor]?o.editor=this.editors[e.definition.editor]:console.warn("Editor Error - No such editor found: ",e.definition.editor);break;case"function":o.editor=e.definition.editor;break;case"boolean":!0===e.definition.editor&&("function"!=typeof e.definition.formatter?o.editor=this.editors[e.definition.formatter]?this.editors[e.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",e.definition.formatter))}o.editor&&(e.modules.edit=o)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(e){var a,o=this.currentCell;if(this.invalidEdit=!1,o){for(this.currentCell=!1,a=o.getElement(),e?o.validate&&o.validate():a.classList.remove("tabulator-validation-fail"),a.classList.remove("tabulator-editing");a.firstChild;)a.removeChild(a.firstChild);o.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,o=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),("textarea"==e.column.definition.editor||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,o),this.dispatchExternal("cellEditCancelled",o)}}bindEditor(e){if(e.column.modules.edit){var o=this,a=e.getElement(!0);a.setAttribute("tabindex",0),a.addEventListener("click",function(c){a.classList.contains("tabulator-editing")||a.focus({preventScroll:!0})}),a.addEventListener("mousedown",function(c){2===c.button?c.preventDefault():o.mouseClick=!0}),a.addEventListener("focus",function(c){o.recursionBlock||o.edit(e,c,!1)})}}focusCellNoEvent(e,o){this.recursionBlock=!0,o&&"ie"===this.table.browser||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,o){this.focusCellNoEvent(e),this.edit(e,!1,o)}focusScrollAdjust(e){if("virtual"==this.table.rowManager.getRenderMode()){var o=this.table.rowManager.element.scrollTop,a=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,c=e.row.getElement();c.offsetTop<o?this.table.rowManager.element.scrollTop-=o-c.offsetTop:c.offsetTop+c.offsetHeight>a&&(this.table.rowManager.element.scrollTop+=c.offsetTop+c.offsetHeight-a);var p=this.table.rowManager.element.scrollLeft,f=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,v=e.getElement();this.table.modExists("frozenColumns")&&(p+=parseInt(this.table.modules.frozenColumns.leftMargin),f-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(p-=parseInt(this.table.columnManager.renderer.vDomPadLeft),f-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),v.offsetLeft<p?this.table.rowManager.element.scrollLeft-=p-v.offsetLeft:v.offsetLeft+v.offsetWidth>f&&(this.table.rowManager.element.scrollLeft+=v.offsetLeft+v.offsetWidth-f)}}edit(e,o,a){var v,E,D,c=this,d=!0,p=function(){},f=e.getElement();if(!this.currentCell){if(e.column.modules.edit.blocked)return this.mouseClick=!1,f.blur(),!1;switch(o&&o.stopPropagation(),typeof e.column.modules.edit.check){case"function":d=e.column.modules.edit.check(e.getComponent());break;case"boolean":d=e.column.modules.edit.check}if(d||a){if(c.cancelEdit(),c.currentCell=e,this.focusScrollAdjust(e),E=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,o,E)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,E),this.dispatchExternal("cellEditing",E),D="function"==typeof e.column.modules.edit.params?e.column.modules.edit.params(E):e.column.modules.edit.params,!1===(v=e.column.modules.edit.editor.call(c,E,function(de){p=de},function(de){if(c.currentCell===e){var he=!0;return e.column.modules.validate&&c.table.modExists("validate")&&"manual"!=c.table.options.validationMode&&(he=c.table.modules.validate.validate(e.column.modules.validate,e,de)),!0===he||"highlight"===c.table.options.validationMode?(c.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,-1==c.editedCells.indexOf(e)&&c.editedCells.push(e),e.setValue(de,!0),c.table.options.dataTree&&c.table.modExists("dataTree")&&c.table.modules.dataTree.checkForRestyle(e),!0===he||(f.classList.add("tabulator-validation-fail"),c.table.externalEvents.dispatch("validationFailed",e.getComponent(),de,he),!1)):(c.invalidEdit=!0,f.classList.add("tabulator-validation-fail"),c.focusCellNoEvent(e,!0),p(),c.table.externalEvents.dispatch("validationFailed",e.getComponent(),de,he),!1)}},function(){c.currentCell===e&&(c.cancelEdit(),c.table.options.dataTree&&c.table.modExists("dataTree")&&c.table.modules.dataTree.checkForRestyle(e))},D)))return f.blur(),!1;if(!(v instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",v),f.blur(),!1;for(f.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-row-editing");f.firstChild;)f.removeChild(f.firstChild);f.appendChild(v),p();for(var Z=f.children,z=0;z<Z.length;z++)Z[z].addEventListener("click",function(de){de.stopPropagation()});return!0}return this.mouseClick=!1,f.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var e=[];return this.editedCells.forEach(o=>{e.push(o.getComponent())}),e}clearEdited(e){var o;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,e.modules.validate&&(e.modules.validate.invalid=!1)),(o=this.editedCells.indexOf(e))>-1&&this.editedCells.splice(o,1)}}return r.moduleName="edit",r.editors=Y5,r})();class bO{constructor(t,e,o,a){this.type=t,this.columns=e,this.component=o||!1,this.indent=a||0}}class UC{constructor(t,e,o,a,c){this.value=t,this.component=e||!1,this.width=o,this.height=a,this.depth=c}}let K5=(()=>{class r extends Oi{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,o,a,c){this.cloneTableStyle=o,this.config=e||{},this.colVisProp=c;var d=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],p=this.bodyToExportRows(this.rowLookup(a));return d.concat(p)}genereateTable(e,o,a,c){var d=this.generateExportList(e,o,a,c);return this.genereateTableElement(d)}rowLookup(e){var o=[];if("function"==typeof e)e.call(this.table).forEach(a=>{(a=this.table.rowManager.findRow(a))&&o.push(a)});else switch(e){case!0:case"visible":o=this.table.rowManager.getVisibleRows(!0);break;case"all":o=this.table.rowManager.rows;break;case"selected":o=this.table.modules.selectRow.selectedRows;break;default:o=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],o)}generateColumnGroupHeaders(){var e=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(a=>{var c=this.processColumnGroup(a);c&&e.push(c)}),e}processColumnGroup(e){var o=e.columns,a=0,d={title:e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,column:e,depth:1};if(o.length){if(d.subGroups=[],d.width=0,o.forEach(p=>{var f=this.processColumnGroup(p);f&&(d.width+=f.width,d.subGroups.push(f),f.depth>a&&(a=f.depth))}),d.depth+=a,!d.width)return!1}else{if(!this.columnVisCheck(e))return!1;d.width=1}return d}columnVisCheck(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])}headersToExportRows(e){var o=[],a=0,c=[];function d(p,f){var v=a-f;if(void 0===o[f]&&(o[f]=[]),p.height=p.subGroups?1:v-p.depth+1,o[f].push(p),p.height>1)for(let E=1;E<p.height;E++)void 0===o[f+E]&&(o[f+E]=[]),o[f+E].push(!1);if(p.width>1)for(let E=1;E<p.width;E++)o[f].push(!1);p.subGroups&&p.subGroups.forEach(function(E){d(E,f+1)})}return e.forEach(function(p){p.depth>a&&(a=p.depth)}),e.forEach(function(p){d(p,0)}),o.forEach(p=>{var f=[];p.forEach(v=>{f.push(v?new UC(v.title,v.column.getComponent(),v.width,v.height,v.depth):null)}),c.push(new bO("header",f))}),c}bodyToExportRows(e){var o=[],a=[];return this.table.columnManager.columnsByIndex.forEach(c=>{this.columnVisCheck(c)&&o.push(c.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),(e=e.filter(c=>{switch(c.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&c.modules.dataTree.parent)}return!0})).forEach((c,d)=>{var p=c.getData(this.colVisProp),f=[],v=0;switch(c.type){case"group":v=c.level,f.push(new UC(c.key,c.getComponent(),o.length,1));break;case"calc":case"row":o.forEach(E=>{f.push(new UC(E._column.getFieldValue(p),E,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(v=c.modules.dataTree.index)}a.push(new bO(c.type,f,c.getComponent(),v))}),a}genereateTableElement(e){var o=document.createElement("table"),a=document.createElement("thead"),c=document.createElement("tbody"),d=this.lookupTableStyles(),p=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],f={};return f.rowFormatter=null!==p?p:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(f.treeElementField=this.table.modules.dataTree.elementField),f.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],f.groupHeader&&!Array.isArray(f.groupHeader)&&(f.groupHeader=[f.groupHeader]),o.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),a,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((v,E)=>{switch(v.type){case"header":a.appendChild(this.genereateHeaderElement(v,f,d));break;case"group":c.appendChild(this.genereateGroupElement(v,f,d));break;case"calc":c.appendChild(this.genereateCalcElement(v,f,d));break;case"row":let D=this.genereateRowElement(v,f,d);this.mapElementStyles(E%2&&d.evenRow?d.evenRow:d.oddRow,D,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),c.appendChild(D)}}),a.innerHTML&&o.appendChild(a),o.appendChild(c),this.mapElementStyles(this.table.element,o,["border-top","border-left","border-right","border-bottom"]),o}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}genereateHeaderElement(e,o,a){var c=document.createElement("tr");return e.columns.forEach(d=>{if(d){var p=document.createElement("th"),f=d.component._column.definition.cssClass?d.component._column.definition.cssClass.split(" "):[];p.colSpan=d.width,p.rowSpan=d.height,p.innerHTML=d.value,this.cloneTableStyle&&(p.style.boxSizing="border-box"),f.forEach(function(v){p.classList.add(v)}),this.mapElementStyles(d.component.getElement(),p,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(d.component._column.contentElement,p,["padding-top","padding-left","padding-right","padding-bottom"]),d.component._column.visible?this.mapElementStyles(d.component.getElement(),p,["width"]):d.component._column.definition.width&&(p.style.width=d.component._column.definition.width+"px"),d.component._column.parent&&this.mapElementStyles(d.component._column.parent.groupElement,p,["border-top"]),c.appendChild(p)}}),c}genereateGroupElement(e,o,a){var c=document.createElement("tr"),d=document.createElement("td"),p=e.columns[0];return c.classList.add("tabulator-print-table-row"),p.value=o.groupHeader&&o.groupHeader[e.indent]?o.groupHeader[e.indent](p.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):!1===o.groupHeader?p.value:e.component._group.generator(p.value,e.component._group.getRowCount(),e.component._group.getData(),e.component),d.colSpan=p.width,d.innerHTML=p.value,c.classList.add("tabulator-print-table-group"),c.classList.add("tabulator-group-level-"+e.indent),p.component.isVisible()&&c.classList.add("tabulator-group-visible"),this.mapElementStyles(a.firstGroup,c,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(a.firstGroup,d,["padding-top","padding-left","padding-right","padding-bottom"]),c.appendChild(d),c}genereateCalcElement(e,o,a){var c=this.genereateRowElement(e,o,a);return c.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(a.calcRow,c,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),c}genereateRowElement(e,o,a){var c=document.createElement("tr");return c.classList.add("tabulator-print-table-row"),e.columns.forEach(d=>{if(d){var p=document.createElement("td"),f=d.component._column,v=d.value,E={modules:{},getValue:function(){return v},getField:function(){return f.definition.field},getElement:function(){return p},getColumn:function(){return f.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getComponent:function(){return E},column:f};if((f.definition.cssClass?f.definition.cssClass.split(" "):[]).forEach(function(x){p.classList.add(x)}),this.table.modExists("format")&&!1!==this.config.formatCells)v=this.table.modules.format.formatExportValue(E,this.colVisProp);else switch(typeof v){case"object":v=JSON.stringify(v);break;case"undefined":case"null":v="";break;default:v=v}v instanceof Node?p.appendChild(v):p.innerHTML=v,a.firstCell&&(this.mapElementStyles(a.firstCell,p,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),f.definition.align&&(p.style.textAlign=f.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(o.treeElementField&&o.treeElementField==f.field||!o.treeElementField&&0==i)&&(e.component._row.modules.dataTree.controlEl&&p.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),p.firstChild),e.component._row.modules.dataTree.branchEl&&p.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),p.firstChild)),c.appendChild(p),E.modules.format&&E.modules.format.renderedCallback&&E.modules.format.renderedCallback(),o.rowFormatter&&!1!==this.config.formatCells&&o.rowFormatter(e.component)}}),c}genereateHTMLTable(e){var o=document.createElement("div");return o.appendChild(this.genereateTableElement(e)),o.innerHTML}getHtml(e,o,a,c){var d=this.generateExportList(a||this.table.options.htmlOutputConfig,o,e,c||"htmlOutput");return this.genereateHTMLTable(d)}mapElementStyles(e,o,a){if(this.cloneTableStyle&&e&&o){var c={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var d=window.getComputedStyle(e);a.forEach(function(p){o.style[c[p]]=d.getPropertyValue(p)})}}}}return r.moduleName="export",r})();var $5={"=":function(r,t,e,o){return t==r},"<":function(r,t,e,o){return t<r},"<=":function(r,t,e,o){return t<=r},">":function(r,t,e,o){return t>r},">=":function(r,t,e,o){return t>=r},"!=":function(r,t,e,o){return t!=r},regex:function(r,t,e,o){return"string"==typeof r&&(r=new RegExp(r)),r.test(t)},like:function(r,t,e,o){return null==r?t===r:null!=t&&String(t).toLowerCase().indexOf(r.toLowerCase())>-1},keywords:function(r,t,e,o){var a=r.toLowerCase().split(void 0===o.separator?" ":o.separator),c=String(null==t?"":t).toLowerCase(),d=[];return a.forEach(p=>{c.includes(p)&&d.push(!0)}),o.matchAll?d.length===a.length:!!d.length},starts:function(r,t,e,o){return null==r?t===r:null!=t&&String(t).toLowerCase().startsWith(r.toLowerCase())},ends:function(r,t,e,o){return null==r?t===r:null!=t&&String(t).toLowerCase().endsWith(r.toLowerCase())},in:function(r,t,e,o){return Array.isArray(r)?!r.length||r.indexOf(t)>-1:(console.warn("Filter Error - filter value is not an array:",r),!1)}};let J5=(()=>{class r extends Oi{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var o=this.table.columnManager.findColumn(e.field);if(!o)return console.warn("Column Filter Error - No matching column found:",e.field),!1;this.setHeaderFilterValue(o,e.value)}),this.tableInitialized=!0}remoteFilterParams(e,o,a,c){return c.filter=this.getFilters(!0,!0),c}userSetFilter(e,o,a,c){this.setFilter(e,o,a,c),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,o,a,c){this.addFilter(e,o,a,c),this.refreshFilter()}userSetHeaderFilterFocus(e){var o=this.table.columnManager.findColumn(e);if(!o)return console.warn("Column Filter Focus Error - No matching column found:",e),!1;this.setHeaderFilterFocus(o)}userGetHeaderFilterValue(e){var o=this.table.columnManager.findColumn(e);if(o)return this.getHeaderFilterValue(o);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,o){var a=this.table.columnManager.findColumn(e);if(!a)return console.warn("Column Filter Error - No matching column found:",e),!1;this.setHeaderFilterValue(a,o)}userRemoveFilter(e,o,a){this.removeFilter(e,o,a),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,o,a){return this.search("rows",e,o,a)}searchData(e,o,a){return this.search("data",e,o,a)}initializeColumnHeaderFilter(e){var o=e.definition;o.headerFilter&&(void 0!==o.headerFilterPlaceholder&&o.field&&this.module("localize").setHeaderFilterColumnPlaceholder(o.field,o.headerFilterPlaceholder),this.initializeColumn(e))}initializeColumn(e,o){var a=this,c=e.getField();e.modules.filter={success:function(p){var D,f="input"==e.modules.filter.tagType&&"text"==e.modules.filter.attrType||"textarea"==e.modules.filter.tagType?"partial":"match",v="",E="";if(void 0===e.modules.filter.prevSuccess||e.modules.filter.prevSuccess!==p){if(e.modules.filter.prevSuccess=p,e.modules.filter.emptyFunc(p))delete a.headerFilters[c];else{switch(e.modules.filter.value=p,typeof e.definition.headerFilterFunc){case"string":r.filters[e.definition.headerFilterFunc]?(v=e.definition.headerFilterFunc,D=function(x){var N=e.definition.headerFilterFuncParams||{},B=e.getFieldValue(x);return N="function"==typeof N?N(p,B,x):N,r.filters[e.definition.headerFilterFunc](p,B,x,N)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":v=D=function(x){var N=e.definition.headerFilterFuncParams||{},B=e.getFieldValue(x);return N="function"==typeof N?N(p,B,x):N,e.definition.headerFilterFunc(p,B,x,N)}}D||("partial"===f?(D=function(x){var N=e.getFieldValue(x);return null!=N&&String(N).toLowerCase().indexOf(String(p).toLowerCase())>-1},v="like"):(D=function(x){return e.getFieldValue(x)==p},v="=")),a.headerFilters[c]={value:p,func:D,type:v,params:{}}}E=JSON.stringify(a.headerFilters),a.prevHeaderFilterChangeCheck!==E&&(a.prevHeaderFilterChangeCheck=E,a.trackChanges(),a.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,o,a){var f,v,E,D,x,N,B,c=this,d=e.modules.filter.success,p=e.getField();if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),p){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(z){return!z&&"0"!==z&&0!==z},(f=document.createElement("div")).classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":c.table.modules.edit.editors[e.definition.headerFilter]?(v=c.table.modules.edit.editors[e.definition.headerFilter],("tick"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(z){return!0!==z&&!1!==z})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":v=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?v=e.modules.edit.editor:e.definition.formatter&&c.table.modules.edit.editors[e.definition.formatter]?(v=c.table.modules.edit.editors[e.definition.formatter],("tick"===e.definition.formatter||"tickCross"===e.definition.formatter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(z){return!0!==z&&!1!==z})):v=c.table.modules.edit.editors.input}if(v){if(D={getValue:function(){return void 0!==o?o:""},getField:function(){return e.definition.field},getElement:function(){return f},getColumn:function(){return e.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},B="function"==typeof(B=e.definition.headerFilterParams||{})?B.call(c.table):B,!(E=v.call(this.table.modules.edit,D,function(){},d,function(){},B)))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor returned a value of false");if(!(E instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor should return an instance of Node, the editor returned:",E);p?c.langBind("headerFilters|columns|"+e.definition.field,function(z){E.setAttribute("placeholder",void 0!==z&&z?z:c.langText("headerFilters|default"))}):c.langBind("headerFilters|default",function(z){E.setAttribute("placeholder",z)}),E.addEventListener("click",function(z){z.stopPropagation(),E.focus()}),E.addEventListener("focus",z=>{var de=this.table.columnManager.element.scrollLeft;de!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(de),this.table.columnManager.scrollHorizontal(de))}),x=!1,N=function(z){x&&clearTimeout(x),x=setTimeout(function(){d(E.value)},c.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=E,e.modules.filter.attrType=E.hasAttribute("type")?E.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=E.tagName.toLowerCase(),!1!==e.definition.headerFilterLiveFilter&&("autocomplete"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter||("autocomplete"===e.definition.editor||"tickCross"===e.definition.editor)&&!0===e.definition.headerFilter||(E.addEventListener("keyup",N),E.addEventListener("search",N),"number"==e.modules.filter.attrType&&E.addEventListener("change",function(z){d(E.value)}),"text"==e.modules.filter.attrType&&"ie"!==this.table.browser&&E.setAttribute("type","search")),("input"==e.modules.filter.tagType||"select"==e.modules.filter.tagType||"textarea"==e.modules.filter.tagType)&&E.addEventListener("mousedown",function(z){z.stopPropagation()})),f.appendChild(E),e.contentElement.appendChild(f),a||c.headerFilterColumns.push(e)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,o){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,o,!0),e.modules.filter.success(o)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,o,a,c){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:o,value:a,params:c}]),this.addFilter(e)}addFilter(e,o,a,c){Array.isArray(e)||(e=[{field:e,type:o,value:a,params:c}]),e.forEach(d=>{(d=this.findFilter(d))&&(this.filterList.push(d),this.changed=!0)})}findFilter(e){var o;if(Array.isArray(e))return this.findSubFilters(e);var a=!1;return"function"==typeof e.field?a=function(c){return e.field(c,e.type||{})}:r.filters[e.type]?a=(o=this.table.columnManager.getColumnByField(e.field))?function(c){return r.filters[e.type](e.value,o.getFieldValue(c),c,e.params||{})}:function(c){return r.filters[e.type](e.value,c[e.field],c,e.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=a,!!e.func&&e}findSubFilters(e){var o=[];return e.forEach(a=>{(a=this.findFilter(a))&&o.push(a)}),!!o.length&&o}getFilters(e,o){var a=[];return e&&(a=this.getHeaderFilters()),o&&a.forEach(function(c){"function"==typeof c.type&&(c.type="function")}),a.concat(this.filtersToArray(this.filterList,o))}filtersToArray(e,o){var a=[];return e.forEach(c=>{var d;Array.isArray(c)?a.push(this.filtersToArray(c,o)):(d={field:c.field,type:c.type,value:c.value},o&&"function"==typeof d.type&&(d.type="function"),a.push(d))}),a}getHeaderFilters(){var e=[];for(var o in this.headerFilters)e.push({field:o,type:this.headerFilters[o].type,value:this.headerFilters[o].value});return e}removeFilter(e,o,a){Array.isArray(e)||(e=[{field:e,type:o,value:a}]),e.forEach(c=>{var d;(d=this.filterList.findIndex("object"==typeof c.field?p=>c===p:p=>c.field===p.field&&c.type===p.type&&c.value===p.value))>-1?this.filterList.splice(d,1):console.warn("Filter Error - No matching filter type found, ignoring: ",c.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{void 0!==e.modules.filter.value&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,o,a,c){var d=[],p=[];return Array.isArray(o)||(o=[{field:o,type:a,value:c}]),o.forEach(f=>{(f=this.findFilter(f))&&p.push(f)}),this.table.rowManager.rows.forEach(f=>{var v=!0;p.forEach(E=>{this.filterRecurse(E,f.getData())||(v=!1)}),v&&d.push("data"===e?f.getData("data"):f.getComponent())}),d}filter(e,o){var a=[],c=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(d=>{this.filterRow(d)&&a.push(d)}):a=e.slice(0),this.subscribedExternal("dataFiltered")&&(a.forEach(d=>{c.push(d.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),c)),a}filterRow(e,o){var a=!0,c=e.getData();for(var d in this.filterList.forEach(p=>{this.filterRecurse(p,c)||(a=!1)}),this.headerFilters)this.headerFilters[d].func(c)||(a=!1);return a}filterRecurse(e,o){var a=!1;return Array.isArray(e)?e.forEach(c=>{this.filterRecurse(c,o)&&(a=!0)}):a=e.func(o),a}}return r.moduleName="filter",r.filters=$5,r})();var v4={plaintext:function(r,t,e){return this.emptyToSpace(this.sanitizeHTML(r.getValue()))},html:function(r,t,e){return r.getValue()},textarea:function(r,t,e){return r.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(r.getValue()))},money:function(r,t,e){var c,d,p,f,o=parseFloat(r.getValue()),a="",v=t.decimal||".",E=t.thousand||",",D=t.negativeSign||"-",x=t.symbol||"",N=!!t.symbolAfter,B=void 0!==t.precision?t.precision:2;if(isNaN(o))return this.emptyToSpace(this.sanitizeHTML(r.getValue()));for(o<0&&(o=Math.abs(o),a=D),c=!1!==B?o.toFixed(B):o,d=(c=String(c).split("."))[0],p=c.length>1?v+c[1]:"",f=/(\d+)(\d{3})/;f.test(d);)d=d.replace(f,"$1"+E+"$2");return N?a+d+p+x:a+x+d+p},link:function(r,t,e){var o=r.getValue(),a=t.urlPrefix||"",c=t.download,d=o,p=document.createElement("a");if(t.labelField&&(d=r.getData()[t.labelField]),t.label)switch(typeof t.label){case"string":d=t.label;break;case"function":d=t.label(r)}if(d){if(t.urlField&&(o=r.getData()[t.urlField]),t.url)switch(typeof t.url){case"string":o=t.url;break;case"function":o=t.url(r)}return p.setAttribute("href",a+o),t.target&&p.setAttribute("target",t.target),t.download&&(c="function"==typeof c?c(r):!0===c?"":c,p.setAttribute("download",c)),p.innerHTML=this.emptyToSpace(this.sanitizeHTML(d)),p}return"&nbsp;"},image:function(r,t,e){var o=document.createElement("img"),a=r.getValue();switch(t.urlPrefix&&(a=t.urlPrefix+r.getValue()),t.urlSuffix&&(a+=t.urlSuffix),o.setAttribute("src",a),typeof t.height){case"number":o.style.height=t.height+"px";break;case"string":o.style.height=t.height}switch(typeof t.width){case"number":o.style.width=t.width+"px";break;case"string":o.style.width=t.width}return o.addEventListener("load",function(){r.getRow().normalizeHeight()}),o},tickCross:function(r,t,e){var o=r.getValue(),a=r.getElement(),c=t.allowEmpty,p=void 0!==t.tickElement?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',f=void 0!==t.crossElement?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return t.allowTruthy&&o||!0===o||"true"===o||"True"===o||1===o||"1"===o?(a.setAttribute("aria-checked",!0),p||""):!c||"null"!==o&&""!==o&&null!=o?(a.setAttribute("aria-checked",!1),f||""):(a.setAttribute("aria-checked","mixed"),"")},datetime:function(r,t,e){var o=window.DateTime||luxon.DateTime,a=t.inputFormat||"yyyy-MM-dd HH:mm:ss",c=t.outputFormat||"dd/MM/yyyy HH:mm:ss",d=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",p=r.getValue();if(void 0!==o){var f=(window.DateTime||luxon.DateTime).fromFormat(p,a);return f.isValid?(t.timezone&&(f=f.shiftTimezone(t.timezone)),f.toFormat(c)):!0===d?p:"function"==typeof d?d(p):d}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(r,t,e){var o=window.DateTime||luxon.DateTime,a=t.inputFormat||"yyyy-MM-dd HH:mm:ss",c=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",d=void 0!==t.suffix&&t.suffix,p=void 0!==t.unit?t.unit:"days",f=void 0!==t.humanize&&t.humanize,v=void 0!==t.date?t.date:o.now(),E=r.getValue();if(void 0!==o){var D=o.fromFormat(E,a);if(!D.isValid)return!0===c?E:"function"==typeof c?c(E):c;if(!f)return parseInt(D.diff(v,p)[p])+(d?" "+d:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(r,t,e){var o=r.getValue();return void 0===t[o]?(console.warn("Missing display value for "+o),o):t[o]},star:function(r,t,e){var o=r.getValue(),a=r.getElement(),c=t&&t.stars?t.stars:5,d=document.createElement("span"),p=document.createElementNS("http://www.w3.org/2000/svg","svg");d.style.verticalAlign="middle",p.setAttribute("width","14"),p.setAttribute("height","14"),p.setAttribute("viewBox","0 0 512 512"),p.setAttribute("xml:space","preserve"),p.style.padding="0 1px",o=o&&!isNaN(o)?parseInt(o):0,o=Math.max(0,Math.min(o,c));for(var E=1;E<=c;E++){var D=p.cloneNode(!0);D.innerHTML=E<=o?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',d.appendChild(D)}return a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",a.setAttribute("aria-label",o),d},traffic:function(r,t,e){var E,o=this.sanitizeHTML(r.getValue())||0,a=document.createElement("span"),c=t&&t.max?t.max:100,d=t&&t.min?t.min:0,p=t&&void 0!==t.color?t.color:["red","orange","green"],f="#666666";if(!isNaN(o)&&void 0!==r.getValue()){switch(a.classList.add("tabulator-traffic-light"),E=parseFloat(o)<=c?parseFloat(o):c,E=parseFloat(E)>=d?parseFloat(E):d,E=Math.round((E-d)/((c-d)/100)),typeof p){case"string":f=p;break;case"function":f=p(o);break;case"object":if(Array.isArray(p)){var x=Math.floor(E/(100/p.length));x=Math.min(x,p.length-1),f=p[x=Math.max(x,0)];break}}return a.style.backgroundColor=f,a}},progress:function(r,t,e){var v,E,D,x,o=this.sanitizeHTML(r.getValue())||0,a=r.getElement(),c=t&&t.max?t.max:100,d=t&&t.min?t.min:0,p=t&&t.legendAlign?t.legendAlign:"center";switch(v=parseFloat(o)<=c?parseFloat(o):c,v=parseFloat(v)>=d?parseFloat(v):d,v=Math.round((v-d)/((c-d)/100)),typeof t.color){case"string":E=t.color;break;case"function":E=t.color(o);break;case"object":if(Array.isArray(t.color)){var N=100/t.color.length,B=Math.floor(v/N);B=Math.min(B,t.color.length-1),B=Math.max(B,0),E=t.color[B];break}default:E="#2DC214"}switch(typeof t.legend){case"string":D=t.legend;break;case"function":D=t.legend(o);break;case"boolean":D=o;break;default:D=!1}switch(typeof t.legendColor){case"string":x=t.legendColor;break;case"function":x=t.legendColor(o);break;case"object":Array.isArray(t.legendColor)&&(N=100/t.legendColor.length,B=Math.floor(v/N),B=Math.min(B,t.legendColor.length-1),B=Math.max(B,0),x=t.legendColor[B]);break;default:x="#000"}a.style.minWidth="30px",a.style.position="relative",a.setAttribute("aria-label",v);var Z=document.createElement("div");Z.style.display="inline-block",Z.style.position="absolute",Z.style.width=v+"%",Z.style.backgroundColor=E,Z.style.height="100%",Z.setAttribute("data-max",c),Z.setAttribute("data-min",d);var z=document.createElement("div");if(z.style.position="relative",z.style.width="100%",z.style.height="100%",D){var de=document.createElement("div");de.style.position="absolute",de.style.top=0,de.style.left=0,de.style.textAlign=p,de.style.width="100%",de.style.color=x,de.innerHTML=D}return e(function(){if(!(r instanceof _O)){var he=document.createElement("div");he.style.position="absolute",he.style.top="4px",he.style.bottom="4px",he.style.left="4px",he.style.right="4px",a.appendChild(he),a=he}a.appendChild(z),z.appendChild(Z),D&&z.appendChild(de)}),""},color:function(r,t,e){return r.getElement().style.backgroundColor=this.sanitizeHTML(r.getValue()),""},buttonTick:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(r,t,e){return this.table.rowManager.activeRows.indexOf(r.getRow()._getSelf())+1},handle:function(r,t,e){return r.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(r,t,e){var o=document.createElement("div"),a=r.getRow()._row.modules.responsiveLayout;function c(d){var p=a.element;a.open=d,p&&(a.open?(o.classList.add("open"),p.style.display=""):(o.classList.remove("open"),p.style.display="none"))}return o.classList.add("tabulator-responsive-collapse-toggle"),o.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",r.getElement().classList.add("tabulator-row-handle"),o.addEventListener("click",function(d){d.stopImmediatePropagation(),c(!a.open)}),c(a.open),o},rowSelection:function(r,t,e){var o=document.createElement("input");if(o.type="checkbox",this.table.modExists("selectRow",!0))if(o.addEventListener("click",c=>{c.stopPropagation()}),"function"==typeof r.getRow){var a=r.getRow();a instanceof HC?(o.addEventListener("change",c=>{a.toggleSelect()}),o.checked=a.isSelected&&a.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(a,o)):o=""}else o.addEventListener("change",c=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(o);return o}};let b4=(()=>{class r extends Oi{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupFormatter(e,""),void 0!==e.definition.formatterPrint&&(e.modules.format.print=this.lookupFormatter(e,"Print")),void 0!==e.definition.formatterClipboard&&(e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")),void 0!==e.definition.formatterHtmlOutput&&(e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput"))}lookupFormatter(e,o){var a={params:e.definition["formatter"+o+"Params"]||{}},c=e.definition["formatter"+o];switch(typeof c){case"string":r.formatters[c]?a.formatter=r.formatters[c]:(console.warn("Formatter Error - No such formatter found: ",c),a.formatter=r.formatters.plaintext);break;case"function":a.formatter=c;break;default:a.formatter=r.formatters.plaintext}return a}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,o,a){var c,d,p,f;return e.definition.titleFormatter?(c=this.getFormatter(e.definition.titleFormatter),p=v=>{e.titleFormatterRendered=v},f={getValue:function(){return o},getElement:function(){return a}},d="function"==typeof(d=e.definition.titleFormatterParams||{})?d():d,c.call(this,f,d,p)):o}formatValue(e){var o=e.getComponent(),a="function"==typeof e.column.modules.format.params?e.column.modules.format.params(o):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,o,a,function(d){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=d,e.modules.format.rendered=!1})}formatExportValue(e,o){var c,a=e.column.modules.format[o];if(a){let d=function(p){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=p,e.modules.format.rendered=!1};return c="function"==typeof a.params?a.params(component):a.params,a.formatter.call(this,e.getComponent(),c,d)}return this.formatValue(e)}sanitizeHTML(e){if(e){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(a){return o[a]})}return e}emptyToSpace(e){return null==e||""===e?"&nbsp;":e}getFormatter(e){switch(typeof e){case"string":r.formatters[e]?e=r.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),e=r.formatters.plaintext);break;case"function":e=e;break;default:e=r.formatters.plaintext}return e}}return r.moduleName="format",r.formatters=v4,r})(),y4=(()=>{class r extends Oi{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(e){this.layoutElement(e.element,e.column)}initializeColumn(e){var o={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(o.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=o):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}scrollHorizontal(){var e;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),e=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),e.forEach(o=>{"row"===o.type&&this.layoutRow(o)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(o=>{o.calcs.top&&this.layoutRow(o.calcs.top),o.calcs.bottom&&this.layoutRow(o.calcs.bottom),o.groupList&&o.groupList.length&&this.layoutGroupCalcs(o.groupList&&o.groupList)})}layoutColumnPosition(e){var o=[];this.leftColumns.forEach((a,c)=>{if(a.modules.frozen.margin=this._calcSpace(this.leftColumns,c)+this.table.columnManager.scrollLeft+"px",a.modules.frozen.edge=c==this.leftColumns.length-1,a.parent.isGroup){var d=this.getColGroupParentElement(a);o.includes(d)||(this.layoutElement(d,a),o.push(d)),a.modules.frozen.edge&&d.classList.add("tabulator-frozen-"+a.modules.frozen.position)}else this.layoutElement(a.getElement(),a);e&&a.cells.forEach(p=>{this.layoutElement(p.getElement(!0),a)})}),this.rightColumns.forEach((a,c)=>{a.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,c+1)+"px",a.modules.frozen.edge=c==this.rightColumns.length-1,this.layoutElement(a.parent.isGroup?this.getColGroupParentElement(a):a.getElement(),a),e&&a.cells.forEach(d=>{this.layoutElement(d.getElement(!0),a)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&this.layoutRow(e)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(e){e.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(a=>{var c=e.getCell(a);c&&this.layoutElement(c.getElement(!0),a)}),this.rightColumns.forEach(a=>{var c=e.getCell(a);c&&this.layoutElement(c.getElement(!0),a)})}layoutElement(e,o){o.modules.frozen&&(e.style.position="absolute",e.style.left=o.modules.frozen.margin,e.classList.add("tabulator-frozen"),o.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+o.modules.frozen.position))}_calcSpace(e,o){var a=0;for(let c=0;c<o;c++)e[c].visible&&(a+=e[c].getWidth());return a}}return r.moduleName="frozenColumns",r})(),E4=(()=>{class r extends Oi{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(e){return this.rows.indexOf(e)>-1}isFrozen(){return!!this.rows.length}getRows(e){var o=e.slice(0);return this.rows.forEach(function(a){var c=o.indexOf(a);c>-1&&o.splice(c,1)}),o}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(e),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(e){this.rows.indexOf(e),e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var o=this.rows.indexOf(e);if(o>-1){var a=e.getElement();a.parentNode&&a.parentNode.removeChild(a),this.rows.splice(o,1)}}styleRows(e){this.rows.forEach((o,a)=>{this.table.rowManager.styleRow(o,a)})}}return r.moduleName="frozenRows",r})();class C4{constructor(t){return this._group=t,this.type="GroupComponent",new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._group.table.componentFunctionBinder.handle("row",e._group,o)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class td{constructor(t,e,o,a,c,d,p){this.groupManager=t,this.parent=e,this.key=a,this.level=o,this.field=c,this.hasSubGroups=o<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=p,this.rows=[],this.groups=[],this.groupList=[],this.generator=d,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=p?p.visible:void 0!==t.startOpen[o]?t.startOpen[o]:t.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(t){t.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach(e=>{this._createGroup(e,t)})}addBindings(){var t,e,o;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(o=!1,this.element.addEventListener("touchstart",c=>{o=!0},{passive:!0}),this.element.addEventListener("touchend",c=>{o&&this.groupManager.table.options.groupTap(c,this.getComponent()),o=!1})),this.groupManager.table.options.groupDblTap&&(t=null,this.element.addEventListener("touchend",c=>{t?(clearTimeout(t),t=null,this.groupManager.table.options.groupDblTap(c,this.getComponent())):t=setTimeout(()=>{clearTimeout(t),t=null},300)})),this.groupManager.table.options.groupTapHold&&(e=null,this.element.addEventListener("touchstart",c=>{clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),e=null,o=!1,this.groupManager.table.options.groupTapHold(c,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",c=>{clearTimeout(e),e=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",c=>{c.stopPropagation(),c.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(t,e){var o=e+"_"+t,a=new td(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[o]);this.groups[o]=a,this.groupList.push(a)}_addRowToGroup(t){var e=this.level+1;if(this.hasSubGroups){var o=this.groupManager.groupIDLookups[e].func(t.getData()),a=e+"_"+o;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[a]&&this.groups[a].addRow(t):(this.groups[a]||this._createGroup(o,e),this.groups[a].addRow(t))}}_addRow(t){this.rows.push(t),t.modules.group=this}insertRow(t,e,o){var a=this.conformRowData({});t.updateData(a);var c=this.rows.indexOf(e);c>-1?this.rows.splice(o?c+1:c,0,t):o?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(t){this.arrowElement.style.marginLeft=t,this.groupList.forEach(function(e){e.scrollHeader(t)})}getRowIndex(t){}conformRowData(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t}removeRow(t){var e=this.rows.indexOf(t),o=t.getElement();e>-1&&this.rows.splice(e,1),this.groupManager.table.options.groupValues||this.rows.length?(o.parentNode&&o.parentNode.removeChild(o),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(t){var o,e=t.level+"_"+t.key;this.groups[e]&&(delete this.groups[e],(o=this.groupList.indexOf(t))>-1&&this.groupList.splice(o,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(t){var e=[];return e.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(o){e=e.concat(o.getHeadersAndRows(t))}):(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!t&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top))),!t&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom)))),e}getData(t,e){var o=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(a=>{o.push(a.getData(e||"data"))}),o}getRowCount(){var t=0;return this.groupList.length?this.groupList.forEach(e=>{t+=e.getRowCount()}):t=this.rows.length,t}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(t=>{t.getHeadersAndRows().forEach(o=>{o.detachElement()})}):this.rows.forEach(t=>{var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var t=this.getElement();this.groupList.length?this.groupList.forEach(e=>{e.getHeadersAndRows().forEach(a=>{var c=a.getElement();t.parentNode.insertBefore(c,t.nextSibling),a.initialize(),t=c})}):this.rows.forEach(e=>{var o=e.getElement();t.parentNode.insertBefore(o,t.nextSibling),e.initialize(),t=o}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var t=[];"function"==typeof this.visible&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))}getRowGroup(t){var e=!1;return this.groupList.length?this.groupList.forEach(function(o){var a=o.getRowGroup(t);a&&(e=a)}):this.rows.find(function(o){return o===t})&&(e=this),e}getSubGroups(t){var e=[];return this.groupList.forEach(function(o){e.push(t?o.getComponent():o)}),e}getRows(t){var e=[];return this.rows.forEach(function(o){e.push(t?o.getComponent():o)}),e}generateGroupHeaderContents(){var t=[];for(this.rows.forEach(function(e){t.push(e.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(t=[]){return t.unshift(this.key),this.parent&&this.parent.getPath(t),t}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(t){(!this.initialized||t)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,En.elVisible(this.element)&&this.initialize(!0)}setHeight(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new C4(this)),this.component}}let T4=(()=>{class r extends Oi{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,o=this.table.options.groupStartOpen,a=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(a)&&e.length>a.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(d,p)=>{this.headerGenerator[0]=(f,v,E)=>(void 0===f?"":f)+"<span>("+v+" "+(1===v?d:p.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(e)||e?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(d=>{d.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),d.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(e)||(e=[e]),e.forEach((d,p)=>{var f,v;f="function"==typeof d?d:(v=this.table.columnManager.getColumnByField(d))?function(E){return v.getFieldValue(E)}:function(E){return E[d]},this.groupIDLookups.push({field:"function"!=typeof d&&d,func:f,values:!!this.allowedValues&&this.allowedValues[p]})}),o&&(Array.isArray(o)||(o=[o]),o.forEach(d=>{}),this.startOpen=o),a&&(this.headerGenerator=Array.isArray(a)?a:[a])}}rowSample(e,o){var a=this.getGroups(!1)[0];return o.push(a.getRows(!1)[0]),o}virtualRenderFill(){var e=this.table.rowManager.tableElement,o=this.table.rowManager.getVisibleRows();o=o.filter(a=>"group"!==a.type),e.style.minWidth=o.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(e,o,a){this.assignRowToGroup(e);var c=e.modules.group.rows;return c.length>1&&(!o||o&&-1==c.indexOf(o)?a?c[0]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,o=c[0],!a):c[c.length-1]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,o=c[c.length-1],!a):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,o,!a)),o}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return!!e.modules.group&&e.modules.group.getComponent()}rowMoving(e,o,a){!a&&o instanceof td&&(o=this.table.rowManager.prevDisplayRow(e)||o);var c=o instanceof td?o:o.modules.group,d=e instanceof td?e:e.modules.group;c===d?this.table.rowManager.moveRowInArray(c.rows,e,o,a):(d&&d.removeRow(e),c.insertRow(e,o,a))}rowDeleting(e){e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.updateGroupRows(!0)}cellUpdated(e){this.reassignRowToGroup(e.row)}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var o=[];return this.groupList.forEach(function(a){o.push(e?a.getComponent():a)}),o}getChildGroups(e){var o=[];return e||(e=this),e.groupList.forEach(a=>{a.groupList.length?o=o.concat(this.getChildGroups(a)):o.push(a)}),o}wipe(){this.groupList.forEach(function(e){e.wipe()})}pullGroupListData(e){var o=[];return e.forEach(a=>{var c={level:0,rowCount:0,headerContent:""},d=[];a.hasSubGroups?(d=this.pullGroupListData(a.groupList),c.level=a.level,c.rowCount=d.length-a.groupList.length,c.headerContent=a.generator(a.key,c.rowCount,a.rows,a),o.push(c),o=o.concat(d)):(c.level=a.level,c.headerContent=a.generator(a.key,a.rows.length,a.rows,a),c.rowCount=a.getRows().length,o.push(c),a.getRows().forEach(p=>{o.push(p.getData("data"))}))}),o}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var o=!1;return this.groupList.forEach(a=>{var c=a.getRowGroup(e);c&&(o=c)}),o}countGroups(){return this.groupList.length}generateGroups(e){var o=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(a=>{this.createGroup(a,0,o)}),e.forEach(a=>{this.assignRowToExistingGroup(a,o)})):e.forEach(a=>{this.assignRowToGroup(a,o)})}createGroup(e,o,a){var d,c=o+"_"+e;d=new td(this,!1,o,e,this.groupIDLookups[0].field,this.headerGenerator[0],(a=a||[])[c]),this.groups[c]=d,this.groupList.push(d)}assignRowToExistingGroup(e,o){var c="0_"+this.groupIDLookups[0].func(e.getData());this.groups[c]&&this.groups[c].addRow(e)}assignRowToGroup(e,o){var a=this.groupIDLookups[0].func(e.getData()),c=!this.groups["0_"+a];return c&&this.createGroup(a,0,o),this.groups["0_"+a].addRow(e),!c}reassignRowToGroup(e){if("row"===e.type){var o=e.modules.group,a=o.getPath(),c=this.getExpectedPath(e);a.length==c.length&&a.every((p,f)=>p===c[f])||(o.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var o=[],a=e.getData();return this.groupIDLookups.forEach(c=>{o.push(c.func(a))}),o}updateGroupRows(e){var o=[];return this.groupList.forEach(a=>{o=o.concat(a.getHeadersAndRows())}),e&&this.refreshData(!0,this.displayHandler),o}scrollHeaders(e){"virtual"===this.table.options.renderHorizontal&&(e-=this.table.columnManager.renderer.vDomPadLeft),e+="px",this.groupList.forEach(o=>{o.scrollHeader(e)})}removeGroup(e){var a,o=e.level+"_"+e.key;this.groups[o]&&(delete this.groups[o],(a=this.groupList.indexOf(e))>-1&&this.groupList.splice(a,1))}}return r.moduleName="groupRows",r})();var w4={cellEdit:function(r){r.component.setValueProcessData(r.data.oldValue),r.component.cellRendered()},rowAdd:function(r){r.component.deleteActual()},rowDelete:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posFrom],!r.data.after),this.table.rowManager.redraw()}},S4={cellEdit:function(r){r.component.setValueProcessData(r.data.newValue),r.component.cellRendered()},rowAdd:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowDelete:function(r){r.component.deleteActual()},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posTo],r.data.after),this.table.rowManager.redraw()}};let D4=(()=>{class r extends Oi{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,o,a){this.action("rowMove",e,{posFrom:this.table.rowManager.getRowPosition(e),posTo:this.table.rowManager.getRowPosition(o),to:o,after:a})}rowAdded(e,o,a,c){this.action("rowAdd",e,{data:o,pos:a,index:c})}rowDeleted(e){var o,a;this.table.options.groupBy?(o=(a=e.getComponent().getGroup().rows).indexOf(e))&&(o=a[o-1]):(o=e.table.rowManager.getRowIndex(e))&&(o=e.table.rowManager.rows[o-1]),this.action("rowDelete",e,{data:e.getData(),pos:!o,index:o})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,o,a){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:o,data:a}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var o=this.history.findIndex(function(a){return a.component===e});o>-1&&(this.history.splice(o,1),o<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return r.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return r.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(e,o){this.history.forEach(function(a){if(a.component instanceof qr)a.component===e&&(a.component=o);else if(a.component instanceof Im&&a.component.row===e){var c=a.component.column.getField();c&&(a.component=o.getCell(c))}})}}return r.moduleName="history",r.undoers=w4,r.redoers=S4,r})(),M4=(()=>{class r extends Oi{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var e=this.table.originalElement,o=this.table.options,c=e.getElementsByTagName("th"),d=e.getElementsByTagName("tbody")[0],p=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),d=d?d.getElementsByTagName("tr"):[],this._extractOptions(e,o),c.length?this._extractHeaders(c,d):this._generateBlankHeaders(c,d);for(var f=0;f<d.length;f++){var E=d[f].getElementsByTagName("td"),D={};this.hasIndex||(D[o.index]=f);for(var x=0;x<E.length;x++)void 0!==this.fieldIndex[x]&&(D[this.fieldIndex[x]]=E[x].innerHTML);p.push(D)}o.data=p,this.dispatchExternal("htmlImported")}_extractOptions(e,o,a){var c=e.attributes,d=a?Object.assign([],a):Object.keys(o),p={};for(var f in d.forEach(D=>{p[D.toLowerCase()]=D}),c){var E,v=c[f];v&&"object"==typeof v&&v.name&&0===v.name.indexOf("tabulator-")&&(E=v.name.replace("tabulator-",""),void 0!==p[E]&&(o[p[E]]=this._attribValue(v.value)))}}_attribValue(e){return"true"===e||"false"!==e&&e}_findCol(e){return this.table.options.columns.find(a=>a.title===e)||!1}_extractHeaders(e,o){for(var a=0;a<e.length;a++){var f,c=e[a],d=!1,p=this._findCol(c.textContent);p?d=!0:p={title:c.textContent.trim()},p.field||(p.field=c.textContent.trim().toLowerCase().replace(" ","_")),(f=c.getAttribute("width"))&&!p.width&&(p.width=f),this._extractOptions(c,p,mp.prototype.defaultOptionList),this.fieldIndex[a]=p.field,p.field==this.table.options.index&&(this.hasIndex=!0),d||this.table.options.columns.push(p)}}_generateBlankHeaders(e,o){for(var a=0;a<e.length;a++){var c=e[a],d={title:"",field:"col"+a};this.fieldIndex[a]=d.field;var p=c.getAttribute("width");p&&(d.width=p),this.table.options.columns.push(d)}}}return r.moduleName="htmlTableImport",r})(),R4=(()=>{class r extends Oi{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(e,o){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){e.preventDefault();try{if(document.selection)(a=document.body.createTextRange()).moveToElementText(this.element),a.select();else if(window.getSelection){var a;(a=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(a)}}catch(c){}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,o){o?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var o=this.eventMap[e];this.touchSubscribers[o+"-touchstart"]||(this.touchSubscribers[o+"-touchstart"]=this.handleTouch.bind(this,o,"start"),this.touchSubscribers[o+"-touchend"]=this.handleTouch.bind(this,o,"end"),this.subscribe(o+"-touchstart",this.touchSubscribers[o+"-touchstart"]),this.subscribe(o+"-touchend",this.touchSubscribers[o+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var o=!0,a=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let c in this.eventMap)this.eventMap[c]===a&&this.subscribers[c]&&(o=!1);o&&(this.unsubscribe(a+"-touchstart",this.touchSubscribers[a+"-touchstart"]),this.unsubscribe(a+"-touchend",this.touchSubscribers[a+"-touchend"]),delete this.touchSubscribers[a+"-touchstart"],delete this.touchSubscribers[a+"-touchend"])}}initializeColumn(e){var o=e.definition;for(let a in this.eventMap)o[a]&&(this.subscriptionChanged(a,!0),this.columnSubscribers[a]||(this.columnSubscribers[a]=[]),this.columnSubscribers[a].push(e))}handle(e,o,a){this.dispatchEvent(e,o,a)}handleTouch(e,o,a,c){var d=this.touchWatchers[e];switch("column"===e&&(e="header"),o){case"start":d.tap=!0,clearTimeout(d.tapHold),d.tapHold=setTimeout(()=>{clearTimeout(d.tapHold),d.tapHold=null,d.tap=null,clearTimeout(d.tapDbl),d.tapDbl=null,this.dispatchEvent(e+"TapHold",a,c)},1e3);break;case"end":d.tap&&(d.tap=null,this.dispatchEvent(e+"Tap",a,c)),d.tapDbl?(clearTimeout(d.tapDbl),d.tapDbl=null,this.dispatchEvent(e+"DblTap",a,c)):d.tapDbl=setTimeout(()=>{clearTimeout(d.tapDbl),d.tapDbl=null},300),clearTimeout(d.tapHold),d.tapHold=null}}dispatchEvent(e,o,a){var d,c=a.getComponent();this.columnSubscribers[e]&&(a instanceof Im?d=a.column.definition[e]:a instanceof mp&&(d=a.definition[e]),d&&d(o,c)),this.dispatchExternal(e,o,c)}}return r.moduleName="interaction",r})();var I4={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},x4={keyBlock:function(r){r.stopPropagation(),r.preventDefault()},scrollPageUp:function(r){var t=this.table.rowManager,e=t.scrollTop-t.element.clientHeight;r.preventDefault(),t.displayRowsCount&&(e>=0?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(r){var t=this.table.rowManager,e=t.scrollTop+t.element.clientHeight,o=t.element.scrollHeight;r.preventDefault(),t.displayRowsCount&&(e<=o?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(r){this.dispatch("keybinding-nav-prev",r)},navNext:function(r){this.dispatch("keybinding-nav-next",r)},navLeft:function(r){this.dispatch("keybinding-nav-left",r)},navRight:function(r){this.dispatch("keybinding-nav-right",r)},navUp:function(r){this.dispatch("keybinding-nav-up",r)},navDown:function(r){this.dispatch("keybinding-nav-down",r)},undo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.undo()))},redo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(r){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let A4=(()=>{class r extends Oi{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,o={};if(this.watchKeys={},this.pressedKeys=[],!1!==e){for(let a in r.bindings)o[a]=r.bindings[a];if(Object.keys(e).length)for(let a in e)o[a]=e[a];this.mapBindings(o),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let o in e)r.actions[o]?e[o]&&("object"!=typeof e[o]&&(e[o]=[e[o]]),e[o].forEach(a=>{this.mapBinding(o,a)})):console.warn("Key Binding Error - no such action:",o)}mapBinding(e,o){var a={action:r.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1};o.toString().toLowerCase().split(" ").join("").split("+").forEach(d=>{switch(d){case"ctrl":a.ctrl=!0;break;case"shift":a.shift=!0;break;case"meta":a.meta=!0;break;default:d=parseInt(d),a.keys.push(d),this.watchKeys[d]||(this.watchKeys[d]=[]),this.watchKeys[d].push(a)}})}bindEvents(){var e=this;this.keyupBinding=function(o){var a=o.keyCode,c=e.watchKeys[a];c&&(e.pressedKeys.push(a),c.forEach(function(d){e.checkBinding(o,d)}))},this.keydownBinding=function(o){var a=o.keyCode;if(e.watchKeys[a]){var d=e.pressedKeys.indexOf(a);d>-1&&e.pressedKeys.splice(d,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,o){var a=!0;return e.ctrlKey==o.ctrl&&e.shiftKey==o.shift&&e.metaKey==o.meta&&(o.keys.forEach(c=>{-1==this.pressedKeys.indexOf(c)&&(a=!1)}),a&&o.action.call(this,e),!0)}}return r.moduleName="keybindings",r.bindings=I4,r.actions=x4,r})(),O4=(()=>{class r extends Oi{constructor(e){super(e),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(e){(e.column.definition.contextMenu||e.column.definition.clickMenu)&&this.initializeCell(e)}initializeColumn(e){var o=e.definition;(o.headerContextMenu||o.headerClickMenu||o.headerMenu)&&this.initializeColumnHeader(e)}initializeColumnHeader(e){var o;e.definition.headerContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.definition.headerContextMenu)),this.tapHold(e,e.definition.headerContextMenu)),e.definition.headerMenu&&((o=document.createElement("span")).classList.add("tabulator-header-menu-button"),o.innerHTML="&vellip;",o.addEventListener("click",a=>{a.stopPropagation(),a.preventDefault(),this.LoadMenuEvent(e,e.definition.headerMenu,a)}),e.titleElement.insertBefore(o,e.titleElement.firstChild))}LoadMenuEvent(e,o,a){o="function"==typeof o?o.call(this.table,e.getComponent(),a):o,this.loadMenu(a,e,o)}tapHold(e,o){var a=e.getElement(),c=null,d=!1;a.addEventListener("touchstart",p=>{clearTimeout(c),d=!1,c=setTimeout(()=>{clearTimeout(c),c=null,d=!0,this.LoadMenuEvent(e,o,p)},1e3)},{passive:!0}),a.addEventListener("touchend",p=>{clearTimeout(c),c=null,d&&p.preventDefault()})}initializeCell(e){e.column.definition.contextMenu&&(e.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.column.definition.contextMenu)),this.tapHold(e,e.column.definition.contextMenu)),e.column.definition.clickMenu&&e.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,e,e.column.definition.clickMenu))}initializeRow(e){this.table.options.rowContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.rowContextMenu)),this.tapHold(e,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.rowClickMenu))}initializeGroup(e){this.table.options.groupContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.groupContextMenu)),this.tapHold(e,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.groupClickMenu))}loadMenu(e,o,a,c){var d=!(e instanceof MouseEvent),p=document.createElement("div");if(p.classList.add("tabulator-menu"),d||e.preventDefault(),a&&a.length){if(!c){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}a.forEach(f=>{var v=document.createElement("div"),E=f.label,D=f.disabled;f.separator?v.classList.add("tabulator-menu-separator"):(v.classList.add("tabulator-menu-item"),"function"==typeof E&&(E=E.call(this.table,o.getComponent())),E instanceof Node?v.appendChild(E):v.innerHTML=E,"function"==typeof D&&(D=D.call(this.table,o.getComponent())),D?(v.classList.add("tabulator-menu-item-disabled"),v.addEventListener("click",x=>{x.stopPropagation()})):f.menu&&f.menu.length?v.addEventListener("click",x=>{x.stopPropagation(),this.hideOldSubMenus(p),this.loadMenu(x,o,f.menu,v)}):f.action&&v.addEventListener("click",x=>{f.action(x,o.getComponent())}),f.menu&&f.menu.length&&v.classList.add("tabulator-menu-item-submenu")),p.appendChild(v)}),p.addEventListener("click",f=>{this.hideMenu()}),this.menuElements.push(p),this.positionMenu(p,c,d,e)}}hideOldSubMenus(e){var o=this.menuElements.indexOf(e);if(o>-1)for(let c=this.menuElements.length-1;c>o;c--){var a=this.menuElements[c];a.parentNode&&a.parentNode.removeChild(a),this.menuElements.pop()}}positionMenu(e,o,a,c){var p,f,v,d=Math.max(document.body.offsetHeight,window.innerHeight);o?(p=(v=En.elOffset(o)).left+o.offsetWidth,f=v.top-1):(p=a?c.touches[0].pageX:c.pageX,f=a?c.touches[0].pageY:c.pageY,this.positionReversedX=!1),e.style.top=f+"px",e.style.left=p+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(e),f+e.offsetHeight>=d&&(e.style.top="",e.style.bottom=o?d-v.top-o.offsetHeight-1+"px":d-f+"px"),(p+e.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(e.style.left="",e.style.right=o?document.documentElement.offsetWidth-v.left+"px":document.documentElement.offsetWidth-p+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(e){27==e.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return r.moduleName="menu",r})(),k4=(()=>{class r extends Oi{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){var c,o=this,a={};e.modules.frozen||(c=e.getElement(),a.mousemove=function(d){e.parent===o.moving.parent&&((o.touchMove?d.touches[0].pageX:d.pageX)-En.elOffset(c).left+o.table.columnManager.element.scrollLeft>e.getWidth()/2?(o.toCol!==e||!o.toColAfter)&&(c.parentNode.insertBefore(o.placeholderElement,c.nextSibling),o.moveColumn(e,!0)):(o.toCol!==e||o.toColAfter)&&(c.parentNode.insertBefore(o.placeholderElement,c),o.moveColumn(e,!1)))}.bind(o),c.addEventListener("mousedown",function(d){o.touchMove=!1,1===d.which&&(o.checkTimeout=setTimeout(function(){o.startMove(d,e)},o.checkPeriod))}),c.addEventListener("mouseup",function(d){1===d.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),o.bindTouchEvents(e)),e.modules.moveColumn=a}bindTouchEvents(e){var c,d,p,f,v,E,o=e.getElement(),a=!1;o.addEventListener("touchstart",D=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,c=e.nextColumn(),p=c?c.getWidth()/2:0,d=e.prevColumn(),f=d?d.getWidth()/2:0,v=0,E=0,a=!1,this.startMove(D,e)},this.checkPeriod)},{passive:!0}),o.addEventListener("touchmove",D=>{var x,N;this.moving&&(this.moveHover(D),a||(a=D.touches[0].pageX),(x=D.touches[0].pageX-a)>0?c&&x-v>p&&(N=c)!==e&&(a=D.touches[0].pageX,N.getElement().parentNode.insertBefore(this.placeholderElement,N.getElement().nextSibling),this.moveColumn(N,!0)):d&&-x-E>f&&(N=d)!==e&&(a=D.touches[0].pageX,N.getElement().parentNode.insertBefore(this.placeholderElement,N.getElement()),this.moveColumn(N,!1)),N&&(c=N.nextColumn(),v=p,p=c?c.getWidth()/2:0,d=N.prevColumn(),E=f,f=d?d.getWidth()/2:0))},{passive:!0}),o.addEventListener("touchend",D=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(D)})}startMove(e,o){var a=o.getElement(),c=this.table.columnManager.getElement(),d=this.table.columnManager.getHeadersElement();this.moving=o,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-En.elOffset(a).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=o.getWidth()+"px",this.placeholderElement.style.height=o.getHeight()+"px",a.parentNode.insertBefore(this.placeholderElement,a),a.parentNode.removeChild(a),this.hoverElement=a.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=c.clientHeight-d.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,o){var a=this.moving.getCells();this.toCol=e,this.toColAfter=o,o?e.getCells().forEach(function(c,d){var p=c.getElement(!0);p.parentNode&&a[d]&&p.parentNode.insertBefore(a[d].getElement(),p.nextSibling)}):e.getCells().forEach(function(c,d){var p=c.getElement(!0);p.parentNode&&a[d]&&p.parentNode.insertBefore(a[d].getElement(),p)})}endMove(e){(1===e.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var d,o=this.table.columnManager.getElement(),a=o.scrollLeft,c=(this.touchMove?e.touches[0].pageX:e.pageX)-En.elOffset(o).left+a;this.hoverElement.style.left=c-this.startX+"px",c-a<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{d=Math.max(0,a-5),this.table.rowManager.getElement().scrollLeft=d,this.autoScrollTimeout=!1},1))),a+o.clientWidth-c<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{d=Math.min(o.clientWidth,a+5),this.table.rowManager.getElement().scrollLeft=d,this.autoScrollTimeout=!1},1)))}}return r.moduleName="moveColumn",r})();class Am extends Oi{constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(t){var e=this,o={};o.mouseup=function(a){e.tableRowDrop(a,row)}.bind(e),o.mousemove=function(a){if(a.pageY-En.elOffset(t.element).top+e.table.rowManager.element.scrollTop>t.getHeight()/2)e.toRow===t&&e.toRowAfter||((c=t.getElement()).parentNode.insertBefore(e.placeholderElement,c.nextSibling),e.moveRow(t,!0));else if(e.toRow!==t||e.toRowAfter){var c;(c=t.getElement()).previousSibling&&(c.parentNode.insertBefore(e.placeholderElement,c),e.moveRow(t,!1))}}.bind(e),t.modules.moveRow=o}initializeRow(t){var a,e=this,o={};o.mouseup=function(c){e.tableRowDrop(c,t)}.bind(e),o.mousemove=function(c){var d=t.getElement();c.pageY-En.elOffset(d).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?(e.toRow!==t||!e.toRowAfter)&&(d.parentNode.insertBefore(e.placeholderElement,d.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(d.parentNode.insertBefore(e.placeholderElement,d),e.moveRow(t,!1))}.bind(e),this.hasHandle||((a=t.getElement()).addEventListener("mousedown",function(c){1===c.which&&(e.checkTimeout=setTimeout(function(){e.startMove(c,t)},e.checkPeriod))}),a.addEventListener("mouseup",function(c){1===c.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t,t.getElement())),t.modules.moveRow=o}initializeColumn(t){t.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(t){if(t.column.definition.rowHandle&&!1!==this.table.options.movableRows){var e=this,o=t.getElement(!0);o.addEventListener("mousedown",function(a){1===a.which&&(e.checkTimeout=setTimeout(function(){e.startMove(a,t.row)},e.checkPeriod))}),o.addEventListener("mouseup",function(a){1===a.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t.row,o)}}bindTouchEvents(t,e){var a,c,d,p,f,v,o=!1;e.addEventListener("touchstart",E=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,a=t.nextRow(),d=a?a.getHeight()/2:0,c=t.prevRow(),p=c?c.getHeight()/2:0,f=0,v=0,o=!1,this.startMove(E,t)},this.checkPeriod)},{passive:!0}),e.addEventListener("touchmove",E=>{var D,x;this.moving&&(E.preventDefault(),this.moveHover(E),o||(o=E.touches[0].pageY),(D=E.touches[0].pageY-o)>0?a&&D-f>d&&(x=a)!==t&&(o=E.touches[0].pageY,x.getElement().parentNode.insertBefore(this.placeholderElement,x.getElement().nextSibling),this.moveRow(x,!0)):c&&-D-v>p&&(x=c)!==t&&(o=E.touches[0].pageY,x.getElement().parentNode.insertBefore(this.placeholderElement,x.getElement()),this.moveRow(x,!1)),x&&(a=x.nextRow(),f=d,d=a?a.getHeight()/2:0,c=x.prevRow(),v=p,p=c?c.getHeight()/2:0))}),e.addEventListener("touchend",E=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(E),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})}startMove(t,e){var o=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o)),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)}setStartPosition(t,e){var c,d,o=this.touchMove?t.touches[0].pageX:t.pageX,a=this.touchMove?t.touches[0].pageY:t.pageY;c=e.getElement(),this.connection?(d=c.getBoundingClientRect(),this.startX=d.left-o+window.pageXOffset,this.startY=d.top-a+window.pageYOffset):this.startY=a-c.getBoundingClientRect().top}endMove(t){(!t||1===t.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(t,e){this.toRow=t,this.toRowAfter=e}moveHover(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)}moveHoverTable(t){var e=this.table.rowManager.getElement(),o=e.scrollTop,a=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+o;this.hoverElement.style.top=a-this.startY+"px"}moveHoverConnections(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"}elementRowDrop(t,e,o){this.dispatchExternal("movableRowsElementDrop",t,e,!!o&&o.getComponent())}connectToTables(t){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",e),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:t})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(o=>{"string"==typeof o?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(o))):this.connectionElements.push(o)}),this.connectionElements.forEach(o=>{var a=c=>{this.elementRowDrop(c,o,this.moving)};o.addEventListener("mouseup",a),o.tabulatorElementDropEvent=a,o.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",t),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(e=>{e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent})}connect(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&o.modules.moveRow&&o.modules.moveRow.mouseup&&o.getElement().addEventListener("mouseup",o.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",e,t),!0)}disconnect(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",t)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(t,e,o){var a=!1;if(o){switch(typeof this.table.options.movableRowsSender){case"string":a=this.senders[this.table.options.movableRowsSender];break;case"function":a=this.table.options.movableRowsSender}a?a.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()}tableRowDrop(t,e){var o=!1,a=!1;switch(t.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":o=this.receivers[this.table.options.movableRowsReceiver];break;case"function":o=this.table.options.movableRowsReceiver}o?a=o.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(a?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:e,success:a})}commsReceived(t,e,o){switch(e){case"connect":return this.connect(t,o.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,o.row,o.success)}}}Am.prototype.receivers={insert:function(r,t,e){return this.table.addRow(r.getData(),void 0,t),!0},add:function(r,t,e){return this.table.addRow(r.getData()),!0},update:function(r,t,e){return!!t&&(t.update(r.getData()),!0)},replace:function(r,t,e){return!!t&&(this.table.addRow(r.getData(),void 0,t),t.delete(),!0)}},Am.prototype.senders={delete:function(r,t,e){r.delete()}},Am.moduleName="moveRow";var N4={};let P4=(()=>{class r extends Oi{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,o,a){return this.transformRow(o,"data",a)}initializeColumn(e){var o=!1,a={};this.allowedTypes.forEach(c=>{var p,d="mutator"+(c.charAt(0).toUpperCase()+c.slice(1));e.definition[d]&&(p=this.lookupMutator(e.definition[d]))&&(o=!0,a[d]={mutator:p,params:e.definition[d+"Params"]||{}})}),o&&(e.modules.mutate=a)}lookupMutator(e){var o=!1;switch(typeof e){case"string":r.mutators[e]?o=r.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":o=e}return o}transformRow(e,o,a){var d,c="mutator"+(o.charAt(0).toUpperCase()+o.slice(1));return this.enabled&&this.table.columnManager.traverse(p=>{var f,v,E;p.modules.mutate&&(f=p.modules.mutate[c]||p.modules.mutate.mutator||!1)&&(d=p.getFieldValue(void 0!==a?a:e),("data"==o||void 0!==d)&&(E=p.getComponent(),v="function"==typeof f.params?f.params(d,e,o,E):f.params,p.setFieldValue(e,f.mutator(d,e,o,v,E))))}),e}transformCell(e,o){if(e.column.modules.mutate){var a=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,c={};if(a)return c=Object.assign(c,e.row.getData()),e.column.setFieldValue(c,o),a.mutator(o,c,"edit",a.params,e.getComponent())}return o}enable(){this.enabled=!0}disable(){this.enabled=!1}}return r.moduleName="mutator",r.mutators=N4,r})(),L4=(()=>{class r extends Oi{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,o){var d,a=this.table.rowManager,c=a.getDisplayRows();return o?c.length?d=c[0]:a.activeRows.length&&(d=a.activeRows[a.activeRows.length-1],o=!1):c.length&&(d=c[c.length-1],o=!(c.length<this.size)),{index:d,top:o}}calculatePageSizes(){var e,o;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((e=document.createElement("div")).classList.add("tabulator-row"),e.style.visibility="hidden",(o=document.createElement("div")).classList.add("tabulator-cell"),o.innerHTML="Page Row Test",e.appendChild(o),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,o,a,c){return this.initialLoad||(this.progressiveLoad&&!a||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),c.page=this.page,this.size&&(c.size=this.size),c}userSetPageToRow(e){return this.table.options.pagination&&(e=this.rowManager.findRow(e))?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return!!this.table.options.pagination&&(this.setPageSize(e),this.setPage(1))}scrollVertical(e,o){var a;!o&&!this.table.dataLoader.loading&&(a=this.table.rowManager.getElement()).scrollHeight-a.clientHeight-e<(this.table.options.progressiveLoadScrollMargin||2*a.clientHeight)&&this.nextPage()}restOnRenderBefore(e,o){return o||"local"===this.mode&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(e=document.createElement("button")).classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=e=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&e.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){e=[];for(let o=1;o<5;o++)e.push(this.size*o);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(o=>{var a=document.createElement("option");a.value=o,!0===o?this.langBind("pagination|all",function(c){a.innerHTML=c}):a.innerHTML=o,this.pageSizeSelect.appendChild(a)}),this.pageSizeSelect.value=this.size}}initializePaginator(e){var o;e||(this.langBind("pagination|first",a=>{this.firstBut.innerHTML=a}),this.langBind("pagination|first_title",a=>{this.firstBut.setAttribute("aria-label",a),this.firstBut.setAttribute("title",a)}),this.langBind("pagination|prev",a=>{this.prevBut.innerHTML=a}),this.langBind("pagination|prev_title",a=>{this.prevBut.setAttribute("aria-label",a),this.prevBut.setAttribute("title",a)}),this.langBind("pagination|next",a=>{this.nextBut.innerHTML=a}),this.langBind("pagination|next_title",a=>{this.nextBut.setAttribute("aria-label",a),this.nextBut.setAttribute("title",a)}),this.langBind("pagination|last",a=>{this.lastBut.innerHTML=a}),this.langBind("pagination|last_title",a=>{this.lastBut.setAttribute("aria-label",a),this.lastBut.setAttribute("title",a)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(o=document.createElement("label"),this.langBind("pagination|page_size",a=>{this.pageSizeSelect.setAttribute("aria-label",a),this.pageSizeSelect.setAttribute("title",a),o.innerHTML=a}),this.element.appendChild(o),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",a=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!e&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}setMaxRows(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||("local"==this.mode||e)&&(this.page=1)}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(e=parseInt(e))>0&&e<=this.max||"local"!==this.mode?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var a=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(e);if(a>-1){var c=!0===this.size?1:Math.ceil((a+1)/this.size);return this.setPage(c)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let e=Math.floor((this.count-1)/2),o=Math.ceil((this.count-1)/2),a=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),c=this.page<=o?Math.min(this.count,this.max):Math.min(this.page+o,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let d=a;d<=c;d++)d>0&&d<=this.max&&this.pagesElement.appendChild(this._generatePageButton(d));this.footerRedraw()}_generatePageButton(e){var o=document.createElement("button");return o.classList.add("tabulator-page"),e==this.page&&o.classList.add("active"),o.setAttribute("type","button"),o.setAttribute("role","button"),this.langBind("pagination|page_title",a=>{o.setAttribute("aria-label",a+" "+e),o.setAttribute("title",a+" "+e)}),o.setAttribute("data-page",e),o.textContent=e,o.addEventListener("click",a=>{this.setPage(e)}),o}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var o,a,c;if("local"==this.mode){o=[],this.setMaxRows(e.length),!0===this.size?(a=0,c=e.length):c=(a=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let d=a;d<c;d++)e[d]&&o.push(e[d]);return o}return this._setPageButtons(),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){if(void 0===e.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),e.data){if(this.max=parseInt(e.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(e.data,!1,1==this.page):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return r.moduleName="page",r})();var F4={local:function(r,t){var e=localStorage.getItem(r+"-"+t);return!!e&&JSON.parse(e)},cookie:function(r,t){var c,d,e=document.cookie,o=r+"-"+t,a=e.indexOf(o+"=");return a>-1&&((c=(e=e.substr(a)).indexOf(";"))>-1&&(e=e.substr(0,c)),d=e.replace(o+"=","")),!!d&&JSON.parse(d)}},B4={local:function(r,t,e){localStorage.setItem(r+"-"+t,JSON.stringify(e))},cookie:function(r,t,e){var o=new Date;o.setDate(o.getDate()+1e4),document.cookie=r+"-"+t+"="+JSON.stringify(e)+"; expires="+o.toUTCString()}};let V4=(()=>{class r extends Oi{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(o){return!1}}initialize(){if(this.table.options.persistence){var a,e=this.table.options.persistenceMode,o=this.table.options.persistenceID;this.mode=!0!==e?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:r.readers[this.table.options.persistenceReaderFunc]?this.readFunc=r.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):r.readers[this.mode]?this.readFunc=r.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:r.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=r.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):r.writers[this.mode]?this.writeFunc=r.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(o||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(a=this.retreiveData("page"))&&(void 0!==a.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=a.paginationSize),void 0!==a.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=a.paginationInitialPage)),this.config.group&&(a=this.retreiveData("group"))&&(void 0!==a.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=a.groupBy),void 0!==a.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=a.groupStartOpen),void 0!==a.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=a.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var o,a;this.config.sort&&(o=this.load("sort"))&&(this.table.initialSort=o),this.config.filter&&(a=this.load("filter"))&&(this.table.initialFilter=a)}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e)),!0}initializeColumn(e){var o;this.config.columns&&(this.defWatcherBlock=!0,o=e.getDefinition(),(!0===this.config.columns?Object.keys(o):this.config.columns).forEach(c=>{var d=Object.getOwnPropertyDescriptor(o,c),p=o[c];d&&Object.defineProperty(o,c,{set:function(f){p=f,this.defWatcherBlock||this.save("columns"),d.set&&d.set(f)},get:function(){return d.get&&d.get(),p}})}),this.defWatcherBlock=!1)}load(e,o){var a=this.retreiveData(e);return o&&(a=a?this.mergeDefinition(o,a):o),a}retreiveData(e){return!!this.readFunc&&this.readFunc(this.id,e)}mergeDefinition(e,o){var a=[];return(o=o||[]).forEach((c,d)=>{var f,p=this._findColumn(e,c);p&&(!0===this.config.columns||null==this.config.columns?(f=Object.keys(p)).push("width"):f=this.config.columns,f.forEach(v=>{"columns"!==v&&void 0!==c[v]&&(p[v]=c[v])}),p.columns&&(p.columns=this.mergeDefinition(p.columns,c.columns)),a.push(p))}),e.forEach((c,d)=>{this._findColumn(o,c)||(a.length>d?a.splice(d,0,c):a.push(c))}),a}_findColumn(e,o){var a=o.columns?"group":o.field?"field":"object";return e.find(function(c){switch(a){case"group":return c.title===o.title&&c.columns.length===o.columns.length;case"field":return c.field===o.field;case"object":return c===o}})}save(e){var o={};switch(e){case"columns":o=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":o=this.table.modules.filter.getFilters();break;case"sort":o=this.validateSorters(this.table.modules.sort.getSort());break;case"group":o=this.getGroupConfig();break;case"page":o=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,e,o)}validateSorters(e){return e.forEach(function(o){o.column=o.field,delete o.field}),e}getGroupConfig(){var e={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var o=[],a=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(c=>{var f,d={},p=c.getDefinition();c.isGroup?(d.title=p.title,d.columns=this.parseColumns(c.getColumns())):(d.field=c.getField(),!0===this.config.columns||null==this.config.columns?(f=Object.keys(p)).push("width"):f=this.config.columns,f.forEach(v=>{switch(v){case"width":d.width=c.getWidth();break;case"visible":d.visible=c.visible;break;default:"function"!=typeof p[v]&&-1===a.indexOf(v)&&(d[v]=p[v])}})),o.push(d)}),o}}return r.moduleName="persistence",r.readers=F4,r.writers=B4,r})(),H4=(()=>{class r extends Oi{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,o,a){var E,D,c=window.scrollX,d=window.scrollY,p=document.createElement("div"),f=document.createElement("div"),v=this.table.modules.export.genereateTable(void 0!==a?a:this.table.options.printConfig,void 0!==o?o:this.table.options.printStyled,e||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(p.classList.add("tabulator-print-header"),"string"==typeof(E="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?p.innerHTML=E:p.appendChild(E),this.element.appendChild(p)),this.element.appendChild(v),this.table.options.printFooter&&(f.classList.add("tabulator-print-footer"),"string"==typeof(D="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?f.innerHTML=D:f.appendChild(D),this.element.appendChild(f)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,v),window.print(),this.cleanup(),window.scrollTo(c,d),this.manualBlock=!1}}return r.moduleName="print",r})(),U4=(()=>{class r extends Oi{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var a,o=this;this.currentVersion++,a=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var c=Array.from(arguments);return!o.blocked&&a===o.currentVersion&&c.forEach(d=>{o.table.rowManager.addRowActual(d,!1)}),o.origFuncs.push.apply(e,arguments)}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var c=Array.from(arguments);return!o.blocked&&a===o.currentVersion&&c.forEach(d=>{o.table.rowManager.addRowActual(d,!0)}),o.origFuncs.unshift.apply(e,arguments)}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var c;return!o.blocked&&a===o.currentVersion&&o.data.length&&(c=o.table.rowManager.getRowFromDataObject(o.data[0]))&&c.deleteActual(),o.origFuncs.shift.call(e)}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var c;return!o.blocked&&a===o.currentVersion&&o.data.length&&(c=o.table.rowManager.getRowFromDataObject(o.data[o.data.length-1]))&&c.deleteActual(),o.origFuncs.pop.call(e)}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var v,c=Array.from(arguments),d=c[0]<0?e.length+c[0]:c[0],p=c[1],f=!!c[2]&&c.slice(2);if(!o.blocked&&a===o.currentVersion){if(f&&((v=!!e[d]&&o.table.rowManager.getRowFromDataObject(e[d]))?f.forEach(D=>{o.table.rowManager.addRowActual(D,!0,v,!0)}):(f=f.slice().reverse()).forEach(D=>{o.table.rowManager.addRowActual(D,!0,!1,!0)})),0!==p){var E=e.slice(d,void 0===c[1]?c[1]:d+p);E.forEach((D,x)=>{var N=o.table.rowManager.getRowFromDataObject(D);N&&N.deleteActual(x!==E.length-1)})}(f||0!==p)&&o.table.rowManager.reRenderInPosition()}return o.origFuncs.splice.apply(e,arguments)}})}unwatchData(){if(!1!==this.data)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var o=e.getData();for(var a in this.blocked=!0,o)this.watchKey(e,o,a);this.table.options.dataTree&&this.watchTreeChildren(e),this.blocked=!1}watchTreeChildren(e){var o=e.getData()[this.table.options.dataTreeChildField],a={};function c(){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}o&&(a.push=o.push,Object.defineProperty(o,"push",{enumerable:!1,configurable:!0,value:()=>{var d=a.push.apply(o,arguments);return c(),d}}),a.unshift=o.unshift,Object.defineProperty(o,"unshift",{enumerable:!1,configurable:!0,value:()=>{var d=a.unshift.apply(o,arguments);return c(),d}}),a.shift=o.shift,Object.defineProperty(o,"shift",{enumerable:!1,configurable:!0,value:()=>{var d=a.shift.call(o);return c(),d}}),a.pop=o.pop,Object.defineProperty(o,"pop",{enumerable:!1,configurable:!0,value:()=>{var d=a.pop.call(o);return c(),d}}),a.splice=o.splice,Object.defineProperty(o,"splice",{enumerable:!1,configurable:!0,value:()=>{var d=a.splice.apply(o,arguments);return c(),d}}))}watchKey(e,o,a){var c=Object.getOwnPropertyDescriptor(o,a),d=o[a],p=this.currentVersion;Object.defineProperty(o,a,{set:f=>{if(d=f,!this.blocked&&p===this.currentVersion){var v={};v[a]=f,e.updateData(v)}c.set&&c.set(f)},get:()=>(c.get&&c.get(),d)})}unwatchRow(e){var o=e.getData();for(var a in o)Object.defineProperty(o,a,{value:o[a]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return r.moduleName="reactiveData",r})(),G4=(()=>{class r extends Oi{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(e){"row"===e.row.type&&this.initializeColumn("cell",e.column,e.element)}layoutColumnHeader(e){this.initializeColumn("header",e,e.element)}initializeColumn(e,o,a){var c=this,p=o.definition.resizable;if("header"===e&&(o.modules.resize={variableHeight:"textarea"==o.definition.formatter||o.definition.variableHeight}),!0===p||p==e){var f=document.createElement("div");f.className="tabulator-col-resize-handle";var v=document.createElement("div");v.className="tabulator-col-resize-handle prev",f.addEventListener("click",function(x){x.stopPropagation()});var E=function(x){var N=o.getLastColumn();N&&c._checkResizability(N)&&(c.startColumn=o,c._mouseDown(x,N,f))};f.addEventListener("mousedown",E),f.addEventListener("touchstart",E,{passive:!0}),f.addEventListener("dblclick",function(x){var N=o.getLastColumn();N&&c._checkResizability(N)&&(x.stopPropagation(),N.reinitializeWidth(!0))}),v.addEventListener("click",function(x){x.stopPropagation()});var D=function(x){var N,B,Z;(N=o.getFirstColumn())&&(Z=(B=c.table.columnManager.findColumnIndex(N))>0&&c.table.columnManager.getColumnByIndex(B-1))&&c._checkResizability(Z)&&(c.startColumn=o,c._mouseDown(x,Z,v))};v.addEventListener("mousedown",D),v.addEventListener("touchstart",D,{passive:!0}),v.addEventListener("dblclick",function(x){var N,B,Z;(N=o.getFirstColumn())&&(Z=(B=c.table.columnManager.findColumnIndex(N))>0&&c.table.columnManager.getColumnByIndex(B-1))&&c._checkResizability(Z)&&(x.stopPropagation(),Z.reinitializeWidth(!0))}),a.appendChild(f),a.appendChild(v)}}_checkResizability(e){return e.definition.resizable}_mouseDown(e,o,a){var c=this;function d(f){o.setWidth(c.table.rtl?c.startWidth-((void 0===f.screenX?f.touches[0].screenX:f.screenX)-c.startX):c.startWidth+((void 0===f.screenX?f.touches[0].screenX:f.screenX)-c.startX)),c.table.columnManager.renderer.rerenderColumns(!0),!c.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights()}function p(f){c.startColumn.modules.edit&&(c.startColumn.modules.edit.blocked=!1),c.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights(),document.body.removeEventListener("mouseup",p),document.body.removeEventListener("mousemove",d),a.removeEventListener("touchmove",d),a.removeEventListener("touchend",p),c.table.element.classList.remove("tabulator-block-select"),c.dispatch("column-resized",o),c.table.externalEvents.dispatch("columnResized",o.getComponent())}c.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),c.startColumn.modules.edit&&(c.startColumn.modules.edit.blocked=!0),c.startX=void 0===e.screenX?e.touches[0].screenX:e.screenX,c.startWidth=o.getWidth(),document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",p),a.addEventListener("touchmove",d,{passive:!0}),a.addEventListener("touchend",p)}}return r.moduleName="resizeColumns",r})(),j4=(()=>{class r extends Oi{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var o=this,a=e.getElement(),c=document.createElement("div");c.className="tabulator-row-resize-handle";var d=document.createElement("div");d.className="tabulator-row-resize-handle prev",c.addEventListener("click",function(v){v.stopPropagation()});var p=function(v){o.startRow=e,o._mouseDown(v,e,c)};c.addEventListener("mousedown",p),c.addEventListener("touchstart",p,{passive:!0}),d.addEventListener("click",function(v){v.stopPropagation()});var f=function(v){var E=o.table.rowManager.prevDisplayRow(e);E&&(o.startRow=E,o._mouseDown(v,E,d))};d.addEventListener("mousedown",f),d.addEventListener("touchstart",f,{passive:!0}),a.appendChild(c),a.appendChild(d)}_mouseDown(e,o,a){var c=this;function d(f){o.setHeight(c.startHeight+((void 0===f.screenY?f.touches[0].screenY:f.screenY)-c.startY))}function p(f){document.body.removeEventListener("mouseup",d),document.body.removeEventListener("mousemove",d),a.removeEventListener("touchmove",d),a.removeEventListener("touchend",p),c.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",o.getComponent())}c.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),c.startY=void 0===e.screenY?e.touches[0].screenY:e.screenY,c.startHeight=o.getHeight(),document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",p),a.addEventListener("touchmove",d,{passive:!0}),a.addEventListener("touchend",p)}}return r.moduleName="resizeRows",r})(),W4=(()=>{class r extends Oi{constructor(e){super(e),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var o,e=this.table;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===e.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(a=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var c=Math.floor(a[0].contentRect.height),d=Math.floor(a[0].contentRect.width);(this.tableHeight!=c||this.tableWidth!=d)&&(this.tableHeight=c,this.tableWidth=d,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),e.redraw())}}),this.observer.observe(e.element),o=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(o.getPropertyValue("max-height")||o.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(a=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var c=Math.floor(a[0].contentRect.height),d=Math.floor(a[0].contentRect.width);(this.containerHeight!=c||this.containerWidth!=d)&&(this.containerHeight=c,this.containerWidth=d,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),e.columnManager.renderer.rerenderColumns(!0),e.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell)&&(e.columnManager.renderer.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return r.moduleName="resizeTable",r})(),z4=(()=>{class r extends Oi{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(o,a){o.modules.responsive&&o.modules.responsive.order&&o.modules.responsive.visible&&(o.modules.responsive.index=a,e.push(o),!o.visible&&"collapse"===self.mode&&self.hiddenColumns.push(o))}),e=(e=e.reverse()).sort(function(o,a){return a.modules.responsive.order-o.modules.responsive.order||a.modules.responsive.index-o.modules.responsive.index}),this.columns=e,"collapse"===this.mode&&this.generateCollapsedContent();for(let o of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==o.definition.formatter){this.collapseHandleColumn=o;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var o=e.getDefinition();e.modules.responsive={order:void 0===o.responsive?1:o.responsive,visible:!1!==o.visible}}initializeRow(e){var o;"calc"!==e.type&&((o=document.createElement("div")).classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:o,open:this.collapseStartOpen},this.collapseStartOpen||(o.style.display="none"))}layoutRow(e){var o=e.getElement();e.modules.responsiveLayout&&(o.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,o){!o&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initialize())}hideColumn(e){var o=this.hiddenColumns.length;e.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!o&&this.collapseHandleColumn.show())}showColumn(e){var o;e.show(!1,!0),e.setWidth(e.getWidth()),"collapse"===this.mode&&((o=this.hiddenColumns.indexOf(e))>-1&&this.hiddenColumns.splice(o,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=this,o=!0;o;){let a="fitColumns"==e.table.modules.layout.getMode()?e.table.columnManager.getFlexBaseWidth():e.table.columnManager.getWidth(),c=(e.table.options.headerVisible?e.table.columnManager.element.clientWidth:e.table.element.clientWidth)-a;if(c<0){let d=e.columns[e.index];d?(e.hideColumn(d),e.index++):o=!1}else{let d=e.columns[e.index-1];d&&c>0&&c>=d.getWidth()?(e.showColumn(d),e.index--):o=!1}e.table.rowManager.activeRowsCount||e.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this;this.table.rowManager.getDisplayRows().forEach(function(a){e.generateCollapsedRowContent(a)})}generateCollapsedRowContent(e){var o,a;if(e.modules.responsiveLayout){for(o=e.modules.responsiveLayout.element;o.firstChild;)o.removeChild(o.firstChild);(a=this.collapseFormatter(this.generateCollapsedRowData(e)))&&o.appendChild(a)}}generateCollapsedRowData(e){var d,o=this,a=e.getData(),c=[];return this.hiddenColumns.forEach(function(p){var f=p.getFieldValue(a);p.definition.title&&p.field&&(p.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters?(d={value:!1,data:{},getValue:function(){return f},getData:function(){return a},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return p.getComponent()}},c.push({field:p.field,title:p.definition.title,value:p.modules.format.formatter.call(o.table.modules.format,d,p.modules.format.params,function(E){E()})})):c.push({field:p.field,title:p.definition.title,value:f}))}),c}formatCollapsedData(e){var o=document.createElement("table");return e.forEach(function(a){var f,c=document.createElement("tr"),d=document.createElement("td"),p=document.createElement("td"),v=document.createElement("strong");d.appendChild(v),this.langBind("columns|"+a.field,function(E){v.innerText=E||a.title}),a.value instanceof Node?((f=document.createElement("div")).appendChild(a.value),p.appendChild(f)):p.innerHTML=a.value,c.appendChild(d),c.appendChild(p),o.appendChild(c)},this),Object.keys(e).length?o:""}}return r.moduleName="responsiveLayout",r})();function GC(r,t,e,o,a,c,d){var p=window.DateTime||luxon.DateTime,f=d.format||"dd/MM/yyyy HH:mm:ss",v=d.alignEmptyValues,E=0;if(void 0!==p){if(r=p.fromFormat(r,f),t=p.fromFormat(t,f),r.isValid){if(t.isValid)return r-t;E=1}else E=t.isValid?-1:0;return("top"===v&&"desc"===c||"bottom"===v&&"asc"===c)&&(E*=-1),E}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var t6={number:function(r,t,e,o,a,c,d){var p=d.alignEmptyValues,f=d.decimalSeparator,v=d.thousandSeparator,E=0;if(r=String(r),t=String(t),v&&(r=r.split(v).join(""),t=t.split(v).join("")),f&&(r=r.split(f).join("."),t=t.split(f).join(".")),r=parseFloat(r),t=parseFloat(t),isNaN(r))E=isNaN(t)?0:-1;else{if(!isNaN(t))return r-t;E=1}return("top"===p&&"desc"===c||"bottom"===p&&"asc"===c)&&(E*=-1),E},string:function(r,t,e,o,a,c,d){var v,p=d.alignEmptyValues,f=0;if(r){if(t){switch(typeof d.locale){case"boolean":d.locale&&(v=this.langLocale());break;case"string":v=d.locale}return String(r).toLowerCase().localeCompare(String(t).toLowerCase(),v)}f=1}else f=t?-1:0;return("top"===p&&"desc"===c||"bottom"===p&&"asc"===c)&&(f*=-1),f},date:function(r,t,e,o,a,c,d){return d.format||(d.format="dd/MM/yyyy"),GC.call(this,r,t,e,o,a,c,d)},time:function(r,t,e,o,a,c,d){return d.format||(d.format="HH:mm"),GC.call(this,r,t,e,o,a,c,d)},datetime:GC,boolean:function(r,t,e,o,a,c,d){return(!0===r||"true"===r||"True"===r||1===r?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},array:function(r,t,e,o,a,c,d){var v=d.type||"length",E=d.alignEmptyValues,D=0;function x(N){switch(v){case"length":return N.length;case"sum":return N.reduce(function(B,Z){return B+Z});case"max":return Math.max.apply(null,N);case"min":return Math.min.apply(null,N);case"avg":return N.reduce(function(B,Z){return B+Z})/N.length}}if(Array.isArray(r)){if(Array.isArray(t))return(r?x(r):0)-(t?x(t):0);E=1}else E=Array.isArray(t)?-1:0;return("top"===E&&"desc"===c||"bottom"===E&&"asc"===c)&&(D*=-1),D},exists:function(r,t,e,o,a,c,d){return(void 0===r?0:1)-(void 0===t?0:1)},alphanum:function(r,t,e,o,a,c,d){var p,f,v,E,x,D=0,N=/(\d+)|(\D+)/g,B=/\d/,Z=d.alignEmptyValues,z=0;if(r||0===r){if(t||0===t){if(isFinite(r)&&isFinite(t))return r-t;if((p=String(r).toLowerCase())===(f=String(t).toLowerCase()))return 0;if(!B.test(p)||!B.test(f))return p>f?1:-1;for(p=p.match(N),f=f.match(N),x=p.length>f.length?f.length:p.length;D<x;)if((v=p[D])!==(E=f[D++]))return isFinite(v)&&isFinite(E)?("0"===v.charAt(0)&&(v="."+v),"0"===E.charAt(0)&&(E="."+E),v-E):v>E?1:-1;return p.length>f.length}z=1}else z=t||0===t?-1:0;return("top"===Z&&"desc"===c||"bottom"===Z&&"asc"===c)&&(z*=-1),z}},r6={integer:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&Math.floor(t)===t},float:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&t%1!=0},numeric:function(r,t,e){return""===t||null==t||!isNaN(t)},string:function(r,t,e){return""===t||null==t||isNaN(t)},max:function(r,t,e){return""===t||null==t||parseFloat(t)<=e},min:function(r,t,e){return""===t||null==t||parseFloat(t)>=e},starts:function(r,t,e){return""===t||null==t||String(t).toLowerCase().startsWith(String(e).toLowerCase())},ends:function(r,t,e){return""===t||null==t||String(t).toLowerCase().endsWith(String(e).toLowerCase())},minLength:function(r,t,e){return""===t||null==t||String(t).length>=e},maxLength:function(r,t,e){return""===t||null==t||String(t).length<=e},in:function(r,t,e){return""===t||null==t||("string"==typeof e&&(e=e.split("|")),""===t||e.indexOf(t)>-1)},regex:function(r,t,e){return""===t||null==t||new RegExp(e).test(t)},unique:function(r,t,e){if(""===t||null==t)return!0;var o=!0,a=r.getData(),c=r.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(d){var p=d.getData();p!==a&&t==c.getFieldValue(p)&&(o=!1)}),o},required:function(r,t,e){return""!==t&&null!=t}},o6=Object.freeze({__proto__:null,AccessorModule:g5,AjaxModule:E5,ClipboardModule:w5,ColumnCalcsModule:R5,DataTreeModule:I5,DownloadModule:L5,EditModule:X5,ExportModule:K5,FilterModule:J5,FormatModule:b4,FrozenColumnsModule:y4,FrozenRowsModule:E4,GroupRowsModule:T4,HistoryModule:D4,HtmlTableImportModule:M4,InteractionModule:R4,KeybindingsModule:A4,MenuModule:O4,MoveColumnsModule:k4,MoveRowsModule:Am,MutatorModule:P4,PageModule:L4,PersistenceModule:V4,PrintModule:H4,ReactiveDataModule:U4,ResizeColumnsModule:G4,ResizeRowsModule:j4,ResizeTableModule:W4,ResponsiveLayoutModule:z4,SelectRowModule:(()=>{class r extends Oi{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(o,a){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(e,o){return"selected"===e?this.selectedRows:o}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==e&&this._rowSelectionChanged()}initializeRow(e){var o=this,a=e.getElement(),c=function(){setTimeout(function(){o.selecting=!1},50),document.body.removeEventListener("mouseup",c)};e.modules.select={selected:!1},o.table.options.selectableCheck.call(this.table,e.getComponent())?(a.classList.add("tabulator-selectable"),a.classList.remove("tabulator-unselectable"),o.table.options.selectable&&"highlight"!=o.table.options.selectable&&("click"===o.table.options.selectableRangeMode?a.addEventListener("click",function(d){if(d.shiftKey){o.table._clearSelection(),o.lastClickedRow=o.lastClickedRow||e;var p=o.table.rowManager.getDisplayRowIndex(o.lastClickedRow),f=o.table.rowManager.getDisplayRowIndex(e),v=p<=f?p:f,E=p>=f?p:f,x=o.table.rowManager.getDisplayRows().slice(0).splice(v,E-v+1);d.ctrlKey||d.metaKey?(x.forEach(function(N){N!==o.lastClickedRow&&(!0===o.table.options.selectable||o.isRowSelected(e)||o.selectedRows.length<o.table.options.selectable)&&o.toggleRow(N)}),o.lastClickedRow=e):(o.deselectRows(void 0,!0),!0!==o.table.options.selectable&&x.length>o.table.options.selectable&&(x=x.slice(0,o.table.options.selectable)),o.selectRows(x)),o.table._clearSelection()}else d.ctrlKey||d.metaKey?(o.toggleRow(e),o.lastClickedRow=e):(o.deselectRows(void 0,!0),o.selectRows(e),o.lastClickedRow=e)}):(a.addEventListener("click",function(d){(!o.table.modExists("edit")||!o.table.modules.edit.getCurrentCell())&&o.table._clearSelection(),o.selecting||o.toggleRow(e)}),a.addEventListener("mousedown",function(d){if(d.shiftKey)return o.table._clearSelection(),o.selecting=!0,o.selectPrev=[],document.body.addEventListener("mouseup",c),document.body.addEventListener("keyup",c),o.toggleRow(e),!1}),a.addEventListener("mouseenter",function(d){o.selecting&&(o.table._clearSelection(),o.toggleRow(e),o.selectPrev[1]==e&&o.toggleRow(o.selectPrev[0]))}),a.addEventListener("mouseout",function(d){o.selecting&&(o.table._clearSelection(),o.selectPrev.unshift(e))})))):(a.classList.add("tabulator-unselectable"),a.classList.remove("tabulator-selectable"))}toggleRow(e){this.table.options.selectableCheck.call(this.table,e.getComponent())&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var o;switch(typeof e){case"undefined":this.table.rowManager.rows.forEach(a=>{this._selectRow(a,!0,!0)}),this._rowSelectionChanged();break;case"string":(o=this.table.rowManager.findRow(e))?this._selectRow(o,!0,!0):this.table.rowManager.getRows(e).forEach(a=>{this._selectRow(a,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(e)?(e.forEach(a=>{this._selectRow(a,!0,!0)}),this._rowSelectionChanged()):this._selectRow(e,!1,!0)}}_selectRow(e,o,a){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!a&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var c=this.table.rowManager.findRow(e);c?-1==this.selectedRows.indexOf(c)&&(c.getElement().classList.add("tabulator-selected"),c.modules.select||(c.modules.select={}),c.modules.select.selected=!0,c.modules.select.checkboxEl&&(c.modules.select.checkboxEl.checked=!0),this.selectedRows.push(c),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(c,!0),o||this.dispatchExternal("rowSelected",c.getComponent()),this._rowSelectionChanged(o)):o||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return-1!==this.selectedRows.indexOf(e)}deselectRows(e,o){var c,a=this;if(void 0===e){c=a.selectedRows.length;for(let d=0;d<c;d++)a._deselectRow(a.selectedRows[0],!0);a._rowSelectionChanged(o)}else Array.isArray(e)?(e.forEach(function(d){a._deselectRow(d,!0)}),a._rowSelectionChanged(o)):a._deselectRow(e,o)}_deselectRow(e,o){var d,a=this,c=a.table.rowManager.findRow(e);c?(d=a.selectedRows.findIndex(function(p){return p==c}))>-1&&(c.getElement().classList.remove("tabulator-selected"),c.modules.select||(c.modules.select={}),c.modules.select.selected=!1,c.modules.select.checkboxEl&&(c.modules.select.checkboxEl.checked=!1),a.selectedRows.splice(d,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(c,!1),o||this.dispatchExternal("rowDeselected",c.getComponent()),a._rowSelectionChanged(o)):o||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(o){e.push(o.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(o){e.push(o.getComponent())}),e}_rowSelectionChanged(e){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(e,o){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=o}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,o){var a=this.table.modules.dataTree.getChildren(e,!0);if(o)for(let c of a)this._selectRow(c,!0);else for(let c of a)this._deselectRow(c,!0)}}return r.moduleName="selectRow",r})(),SortModule:(()=>{class r extends Oi{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,o,a,c){var d=this.getSort();return d.forEach(p=>{delete p.column}),c.sort=d,c}userSetSort(e,o){this.setSort(e,o),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var a,c,o=!1;switch(typeof e.definition.sorter){case"string":r.sorters[e.definition.sorter]?o=r.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":o=e.definition.sorter}e.modules.sort={sorter:o,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},!1!==e.definition.headerSort&&((a=e.getElement()).classList.add("tabulator-sortable"),(c=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?c.appendChild(this.table.options.headerSortElement):c.innerHTML=this.table.options.headerSortElement,e.titleHolderElement.appendChild(c),e.modules.sort.element=c,a.addEventListener("click",d=>{var p="",f=[],v=!1;if(e.modules.sort){if(e.modules.sort.tristate)p="none"==e.modules.sort.dir?e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?"asc"==e.modules.sort.dir?"desc":"asc":"none";else switch(e.modules.sort.dir){case"asc":p="desc";break;case"desc":p="asc";break;default:p=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(d.shiftKey||d.ctrlKey)?((v=(f=this.getSort()).findIndex(E=>E.field===e.getField()))>-1?(f[v].dir=p,v!=f.length-1&&(v=f.splice(v,1)[0],"none"!=p&&f.push(v))):"none"!=p&&f.push({column:e,dir:p}),this.setSort(f)):"none"==p?this.clear():this.setSort(e,p),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var o=[];return this.sortList.forEach(function(a){a.column&&o.push({column:a.column.getComponent(),field:a.column.getField(),dir:a.dir})}),o}setSort(e,o){var a=this,c=[];Array.isArray(e)||(e=[{column:e,dir:o}]),e.forEach(function(d){var p;(p=a.table.columnManager.findColumn(d.column))?(d.column=p,c.push(d),a.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",d.column)}),a.sortList=c,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var d,o=this.table.rowManager.activeRows[0],a="string";if(o&&(o=o.getData(),e.getField()))switch(d=e.getFieldValue(o),typeof d){case"undefined":a="string";break;case"boolean":a="boolean";break;default:isNaN(d)||""===d?d.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(a="alphanum"):a="number"}return r.sorters[a]}sort(e){var o=this,a=this.table.options.sortOrderReverse?o.sortList.slice().reverse():o.sortList,c=[],d=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",o.getSort()),o.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(a.forEach(function(p,f){var v=p.column.modules.sort;p.column&&v&&(v.sorter||(v.sorter=o.findSorter(p.column)),p.params="function"==typeof v.params?v.params(p.column.getComponent(),p.dir):v.params,c.push(p)),o.setColumnHeader(p.column,p.dir)}),c.length&&o._sortItems(e,c)):a.forEach(function(p,f){o.setColumnHeader(p.column,p.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(p=>{d.push(p.getComponent())}),this.dispatchExternal("dataSorted",o.getSort(),d)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(e){e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(e,o){e.modules.sort.dir=o,e.getElement().setAttribute("aria-sort",o)}_sortItems(e,o){var a=o.length-1;e.sort((c,d)=>{for(var p,f=a;f>=0;f--){let v=o[f];if(0!==(p=this._sortRow(c,d,v.column,v.dir,v.params)))break}return p})}_sortRow(e,o,a,c,d){var p,f,v="asc"==c?e:o,E="asc"==c?o:e;return e=void 0!==(e=a.getFieldValue(v.getData()))?e:"",o=void 0!==(o=a.getFieldValue(E.getData()))?o:"",p=v.getComponent(),f=E.getComponent(),a.modules.sort.sorter.call(this,e,o,p,f,a.getComponent(),c,d)}}return r.moduleName="sort",r.sorters=t6,r})(),ValidateModule:(()=>{class r extends Oi{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(e){return!e.modules.validate||!e.modules.validate.invalid}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var o=[];return e.cells.forEach(function(a){this.cellValidate(a)||o.push(a.getComponent())}),!o.length||o}rowValidate(e){var o=[];return e.cells.forEach(function(a){this.cellValidate(a)||o.push(a.getComponent())}),!o.length||o}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(o=>{this.clearValidation(o._getSelf())})}userValidate(e){var o=[];return this.table.rowManager.rows.forEach(function(a){var c=a.validate();!0!==c&&(o=o.concat(c))}),!o.length||o}initializeColumnCheck(e){void 0!==e.definition.validator&&this.initializeColumn(e)}initializeColumn(e){var c,o=this,a=[];e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(function(d){(c=o._extractValidator(d))&&a.push(c)}):(c=this._extractValidator(e.definition.validator))&&a.push(c),e.modules.validate=!!a.length&&a)}_extractValidator(e){var o,a,c;switch(typeof e){case"string":return(c=e.indexOf(":"))>-1?(o=e.substring(0,c),a=e.substring(c+1)):o=e,this._buildValidator(o,a);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,o){var a="function"==typeof e?e:r.validators[e];return a?{type:"function"==typeof e?"function":e,func:a,params:o}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,o,a){var c=this,d=[],p=this.invalidCells.indexOf(o);return e&&e.forEach(function(f){f.func.call(c,o.getComponent(),a,f.params)||d.push({type:f.type,parameters:f.params})}),d=!d.length||d,o.modules.validate||(o.modules.validate={}),!0===d?(o.modules.validate.invalid=!1,o.getElement().classList.remove("tabulator-validation-fail"),p>-1&&this.invalidCells.splice(p,1)):(o.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&o.getElement().classList.add("tabulator-validation-fail"),-1==p&&this.invalidCells.push(o)),d}getInvalidCells(){var e=[];return this.invalidCells.forEach(o=>{e.push(o.getComponent())}),e}clearValidation(e){var o;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,(o=this.invalidCells.indexOf(e))>-1&&this.invalidCells.splice(o,1))}}return r.moduleName="validate",r.validators=r6,r})()}),s6={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class yO{constructor(t,e){this.table=t,this.msgType=e,this.registeredDefaults={}}register(t,e){this.registeredDefaults[t]=e}generate(t,e={}){var o=Object.assign({},this.registeredDefaults);if(Object.assign(o,t),!1!==e.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var a in e)o.hasOwnProperty(a)||console.warn("Invalid "+this.msgType+" option:",a);for(var a in o)a in e?o[a]=e[a]:Array.isArray(o[a])?o[a]=Object.assign([],o[a]):"object"==typeof o[a]&&null!==o[a]?o[a]=Object.assign({},o[a]):void 0===o[a]&&delete o[a];return o}}class Om extends ds{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,e){}renderRowCells(t){}rerenderRowCells(t,e){}scrollColumns(t,e){}scrollRows(t,e){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,e){var o=t.getElement();e%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,e,o){var a=this.rows().indexOf(t),c=t.getElement(),d=0;return new Promise((p,f)=>{if(a>-1){if(void 0===o&&(o=this.table.options.scrollToRowIfVisible),!o&&En.elVisible(c)&&(d=En.elOffset(c).top-En.elOffset(this.elementVertical).top)>0&&d<this.elementVertical.clientHeight-c.offsetHeight)return!1;switch(void 0===e&&(e=this.table.options.scrollToRowPosition),"nearest"===e&&(e=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),e){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(c.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-c.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-c.offsetTop)+c.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+c.offsetHeight}p()}else console.warn("Scroll Error - Row not visible"),f("Scroll Error - Row not visible")})}}class a6 extends Om{constructor(t){super(t)}renderRowCells(t){t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}reinitializeColumnWidths(t){t.forEach(function(e){e.reinitializeWidth()})}}class l6 extends Om{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var t=this.options("columns"),o=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),o=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),o=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),o=!1),t&&t.find(a=>a.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),o=!1),o}renderColumns(t,e){this.dataChange()}scrollColumns(t,e){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(t,e){var o={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!t||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var a=0;this.table.columnManager.columnsByIndex.forEach(c=>{var d={};if(c.visible){var p=c.getWidth();d.leftPos=a,d.rightPos=a+p,d.width=p,"fitData"===this.options("layout")&&(d.fitDataCheck=!0),a+p>this.vDomScrollPosLeft&&a<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=a),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=p),this.columns.push(c),c.modules.vdomHoz=d,a+=p}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,e||(!t||this.reinitChanged(o))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(t){this.initialized?this.initializeRow(t):t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}rerenderRowCells(t,e){this.reinitializeRow(t,e)}reinitializeColumnWidths(t){for(let e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var c,a,t=!1,e=0,o=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(d=>{!d.definition.width&&d.visible&&(t=!0)}),t&&t&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,a=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(c=a.getElement(),a.generateCells(),this.tableElement.appendChild(c),o=0;o<a.cells.length;o++){let f=a.cells[o];if(c.appendChild(f.getElement()),f.column.reinitializeWidth(),(e+=f.column.getWidth())>this.vDomScrollPosRight)break}for(c.parentNode.removeChild(c),this.fitDataColAvg=Math.floor(e/(o+1));o<this.table.columnManager.columnsByIndex.length;o++)this.table.columnManager.columnsByIndex[o].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var e=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol||(t.cols.forEach((o,a)=>{o!==this.columns[a]&&(e=!1)}),!e)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(e=>{this.reinitializeRow(e,!0)})}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,t>.8*this.elementVertical.clientWidth?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,e,o){for(let a=t;a<e;a++){let c=this.columns[a];c.modules.vdomHoz.leftPos+=o,c.modules.vdomHoz.rightPos+=o}}addColRight(){var t=this.columns[this.rightCol+1];t&&t.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var a=o.getCell(t);o.getElement().appendChild(a.getElement()),a.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var t=this.columns[this.leftCol-1];t&&t.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var c=a.getCell(t);a.getElement().prepend(c.getElement()),c.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.leftCol?this.vDomPadLeft-=t.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(t){var e;(t=this.columns[this.rightCol])&&t.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(e=this.table.rowManager.getVisibleRows(),t.modules.vdomHoz.visible=!1,e.forEach(o=>{if("group"!==o.type){var a=o.getCell(t);o.getElement().removeChild(a.getElement())}}),this.vDomPadRight+=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var t=this.columns[this.leftCol];t&&t.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var a=o.getCell(t);a.parentNode&&o.getElement().removeChild(a.getElement())}}),this.vDomPadLeft+=t.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(t){var e,o;t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),(o=(e=t.getWidth())-t.modules.vdomHoz.width)&&(t.modules.vdomHoz.rightPos+=o,t.modules.vdomHoz.width=e,this.colPositionAdjust(this.rightCol+2,this.columns.length,o)),t.modules.vdomHoz.fitDataCheck=!1)}initializeRow(t){if("group"!==t.type){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let e=this.leftCol;e<=this.rightCol;e++){let o=this.columns[e];if(o&&o.visible){let a=t.getCell(o);t.getElement().appendChild(a.getElement()),a.cellRendered()}}}}reinitializeRow(t,e){if("group"!==t.type&&(e||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var o=t.getElement();o.firstChild;)o.removeChild(o.firstChild);this.initializeRow(t)}}}class c6 extends ds{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new yO(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderHorizontal?{virtual:l6,basic:a6}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(t){var o=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,this.element.style.marginLeft=t>o?-(t-o)+"px":0,this.scrollLeft=t,this.renderer.scrollColumns(t)}generateColumnsFromRowData(t){var a,c,e=[],o=this.table.options.autoColumnsDefinitions;if(t&&t.length){for(var d in a=t[0]){let p={field:d,title:d},f=a[d];switch(typeof f){case"undefined":c="string";break;case"boolean":c="boolean";break;case"object":c=Array.isArray(f)?"array":"string";break;default:c=isNaN(f)||""===f?f.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}p.sorter=c,e.push(p)}if(o)switch(typeof o){case"function":this.table.options.columns=o.call(this.table,e);break;case"object":Array.isArray(o)?e.forEach(p=>{var f=o.find(v=>v.field===p.field);f&&Object.assign(p,f)}):e.forEach(p=>{o[p.field]&&Object.assign(p,o[p.field])}),this.table.options.columns=e}else this.table.options.columns=e;this.setColumns(this.table.options.columns)}}setColumns(t,e){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),t.forEach((o,a)=>{this._addColumn(o)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,e,o){var a=new mp(t,this),c=a.getElement(),d=o&&this.findColumnIndex(o);if(o&&d>-1){var p=o.getTopColumn(),f=this.columns.indexOf(p),v=p.getElement();e?(this.columns.splice(f,0,a),v.parentNode.insertBefore(c,v)):(this.columns.splice(f+1,0,a),v.parentNode.insertBefore(c,v.nextSibling))}else e?(this.columns.unshift(a),this.headersElement.insertBefore(a.getElement(),this.headersElement.firstChild)):(this.columns.push(a),this.headersElement.appendChild(a.getElement()));return a.columnRendered(),a}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})}verticalAlignHeaders(){var t=0;this.columns.forEach(e=>{var o;e.clearVerticalAlign(),(o=e.getHeight())>t&&(t=o)}),this.columns.forEach(e=>{e.verticalAlign(this.table.options.columnHeaderVertAlign,t)}),this.table.rowManager.adjustTableSize()}findColumn(t){return"object"!=typeof t?this.columnsByField[t]||!1:t instanceof mp?t:t instanceof vO?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.columns.find(o=>o.element===t)||!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var e=[];return Object.keys(this.columnsByField).forEach(o=>{o.split(".")[0]===t&&e.push(this.columnsByField[o])}),e}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibileColumn(t){return(t=this.columnsByIndex.findIndex(e=>e.visible))>-1&&this.columnsByIndex[t]}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex(e=>t===e)}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach((e,o)=>{t(e,o)})}getDefinitions(t){var e=[];return this.columnsByIndex.forEach(o=>{(!t||t&&o.visible)&&e.push(o.getDefinition())}),e}getDefinitionTree(){var t=[];return this.columns.forEach(e=>{t.push(e.getDefinition(!0))}),t}getComponents(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach(a=>{e.push(a.getComponent())}),e}getWidth(){var t=0;return this.columnsByIndex.forEach(e=>{e.visible&&(t+=e.getWidth())}),t}moveColumn(t,e,o){this.moveColumnActual(t,e,o),e.element.parentNode.insertBefore(t.element,e.element),o&&e.element.parentNode.insertBefore(e.element,t.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,e,o){this._moveColumnInArray(t.parent.isGroup?t.parent.columns:this.columns,t,e,o),this._moveColumnInArray(this.columnsByIndex,t,e,o,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",t,e,o),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,e,o,a,c){var p,d=t.indexOf(e);d>-1&&(t.splice(d,1),(p=t.indexOf(o))>-1?a&&(p+=1):p=d,t.splice(p,0,e),c&&(this.chain("column-moving-rows",[e,o,a],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(v){if(v.cells.length){var E=v.cells.splice(d,1)[0];v.cells.splice(p,0,E)}}))}scrollToColumn(t,e,o){var a=0,c=0,d=0,p=t.getElement();return new Promise((f,v)=>{if(void 0===e&&(e=this.table.options.scrollToColumnPosition),void 0===o&&(o=this.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":d=-this.element.clientWidth/2;break;case"right":d=p.clientWidth-this.headersElement.clientWidth}if(!o&&(c=p.offsetLeft)>0&&c+p.offsetWidth<this.element.clientWidth)return!1;a=p.offsetLeft+d,a=Math.max(Math.min(a,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(a),this.scrollHorizontal(a),f()}else console.warn("Scroll Error - Column not visible"),v("Scroll Error - Column not visible")})}generateCells(t){var e=[];return this.columnsByIndex.forEach(o=>{e.push(o.generateCell(t))}),e}getFlexBaseWidth(){var t=this.table.element.clientWidth,e=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(o){var a,c,d;o.visible&&(a=o.definition.width||0,c=parseInt(o.minWidth),d="string"==typeof a?a.indexOf("%")>-1?t/100*parseInt(a):parseInt(a):a,e+=d>c?d:c)}),e}addColumn(t,e,o){return new Promise((a,c)=>{var d=this._addColumn(t,e,o);this._reIndexColumns(),this.dispatch("column-add",t,e,o),"fitColumns"!=this.layoutMode()&&d.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),a(d)})}deregisterColumn(t){var o,e=t.getField();e&&delete this.columnsByField[e],(o=this.columnsByIndex.indexOf(t))>-1&&this.columnsByIndex.splice(o,1),(o=this.columns.indexOf(t))>-1&&this.columns.splice(o,1),this.verticalAlignHeaders(),this.redraw()}redraw(t){En.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}}class u6 extends Om{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,e=!0;this.rows().forEach((o,a)=>{this.styleRow(o,a),t.appendChild(o.getElement()),o.initialize(!0),"group"!==o.type&&(e=!1)}),t.style.minWidth=e?this.table.columnManager.getWidth()+"px":""}rerenderRows(t){this.render(),t&&t()}scrollToRowNearestTop(t){var e=En.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-e)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-e))}scrollToRow(t){var e=t.getElement();this.elementVertical.scrollTop=En.elOffset(e).top-En.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}}class d6 extends Om{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var e=this.elementVertical.scrollTop,o=!1,a=!1,c=this.table.rowManager.scrollLeft,d=this.rows(),p=this.vDomTop;p<=this.vDomBottom;p++)if(d[p]){var f=e-d[p].getElement().offsetTop;if(!(!1===a||Math.abs(f)<a))break;a=f,o=p}d.forEach(v=>{v.deinitializeHeight()}),t&&t(),this._virtualRenderFill(!1===o?this.rows.length-1:o,!0,a||0),this.scrollColumns(c)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,e){var o=t-this.vDomScrollPosTop,a=t-this.vDomScrollPosBottom,c=2*this.vDomWindowBuffer,d=this.rows();if(this.scrollTop=t,-o>c||a>c){var p=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*d.length)),this.scrollColumns(p)}else e?(o<0&&this._addTopRow(d,-o),a<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(d,-a):this.vDomScrollPosBottom=this.scrollTop)):(a>=0&&this._addBottomRow(d,a),o>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(d,o):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var e=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-e)>Math.abs(this.vDomBottom-e))}scrollToRow(t){var e=this.rows().indexOf(t);e>-1&&this._virtualRenderFill(e,!0)}visibleRows(t){var e=this.elementVertical.scrollTop,o=this.elementVertical.clientHeight+e,a=!1,c=0,d=0,p=this.rows();if(t)c=this.vDomTop,d=this.vDomBottom;else for(var f=this.vDomTop;f<=this.vDomBottom;f++)if(p[f])if(a){if(!(o-p[f].getElement().offsetTop>=0))break;d=f}else if(e-p[f].getElement().offsetTop>=0)c=f;else{if(a=!0,!(o-p[f].getElement().offsetTop>=0))break;d=f}return p.slice(c,d+1)}_virtualRenderFill(t,e,o){var a=this.tableElement,c=this.elementVertical,d=0,p=0,f=0,v=0,E=0,D=this.rows(),x=D.length,N=this.elementVertical.clientHeight;if(o=o||0,t=t||0){for(;a.firstChild;)a.removeChild(a.firstChild);(f=(x-t+1)*this.vDomRowHeight)<N&&(t-=Math.ceil((N-f)/this.vDomRowHeight))<0&&(t=0),t-=d=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t)}else this.clear();if(x&&En.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1;(p<=N+this.vDomWindowBuffer||E<this.vDomWindowMinTotalRows)&&this.vDomBottom<x-1;){var z,B=this.vDomBottom+1,Z=D[B];this.styleRow(Z,B),a.appendChild(Z.getElement()),Z.initialize(),Z.heightInitialized||Z.normalizeHeight(!0),z=Z.getHeight(),E<d?v+=z:p+=z,z>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*z),this.vDomBottom++,E++}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+o:this.scrollTop-v,this.vDomBottomPad=this.vDomBottom==x-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-p-v,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((p+v)/E),this.vDomBottomPad=this.vDomRowHeight*(x-this.vDomBottom-1),this.vDomScrollHeight=v+p+this.vDomBottomPad-N),a.style.paddingTop=this.vDomTopPad+"px",a.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+v+o-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-N:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-N),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&e&&(this.scrollTop+=this.elementVertical.offsetHeight-N),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,c.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,e){for(var o=this.tableElement,a=[],c=0,d=this.vDomTop-1,p=0;this.vDomTop;){let v,E,f=t[d];if(!(f&&p<this.vDomMaxRenderChain))break;if(v=f.getHeight()||this.vDomRowHeight,E=f.initialized,!(e>=v))break;this.styleRow(f,d),o.insertBefore(f.getElement(),o.firstChild),(!f.initialized||!f.heightInitialized)&&a.push(f),f.initialize(),E||(v=f.getElement().offsetHeight,v>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*v)),e-=v,c+=v,this.vDomTop--,d--,p++}for(let f of a)f.clearCellHeight();this._quickNormalizeRowHeight(a),c&&(this.vDomTopPad-=c,this.vDomTopPad<0&&(this.vDomTopPad=d*this.vDomRowHeight),d<1&&(this.vDomTopPad=0),o.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=c)}_removeTopRow(t,e){for(var o=[],a=0,c=0;;){let p,d=t[this.vDomTop];if(!(d&&c<this.vDomMaxRenderChain))break;if(p=d.getHeight()||this.vDomRowHeight,!(e>=p))break;this.vDomTop++,e-=p,a+=p,o.push(d),c++}for(let d of o){let p=d.getElement();p.parentNode&&p.parentNode.removeChild(p)}a&&(this.vDomTopPad+=a,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?a:a+this.vDomWindowBuffer)}_addBottomRow(t,e){for(var o=this.tableElement,a=[],c=0,d=this.vDomBottom+1,p=0;;){let v,E,f=t[d];if(!(f&&p<this.vDomMaxRenderChain))break;if(v=f.getHeight()||this.vDomRowHeight,E=f.initialized,!(e>=v))break;this.styleRow(f,d),o.appendChild(f.getElement()),(!f.initialized||!f.heightInitialized)&&a.push(f),f.initialize(),E||(v=f.getElement().offsetHeight,v>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*v)),e-=v,c+=v,this.vDomBottom++,d++,p++}for(let f of a)f.clearCellHeight();this._quickNormalizeRowHeight(a),c&&(this.vDomBottomPad-=c,(this.vDomBottomPad<0||d==t.length-1)&&(this.vDomBottomPad=0),o.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=c)}_removeBottomRow(t,e){for(var o=[],a=0,c=0;;){let p,d=t[this.vDomBottom];if(!(d&&c<this.vDomMaxRenderChain))break;if(p=d.getHeight()||this.vDomRowHeight,!(e>=p))break;this.vDomBottom--,e-=p,a+=p,o.push(d),c++}for(let d of o){let p=d.getElement();p.parentNode&&p.parentNode.removeChild(p)}a&&(this.vDomBottomPad+=a,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=a)}_quickNormalizeRowHeight(t){for(let e of t)e.calcHeight();for(let e of t)e.setCellHeight()}}class h6 extends ds{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t.setAttribute("role","rowgroup"),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var t=this.element.scrollLeft,e=this.scrollLeft>t,o=this.element.scrollTop,a=this.scrollTop>o;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,e),this.dispatchExternal("scrollHorizontal",t,e)),this.scrollTop!=o&&(this.scrollTop=o,this.renderer.scrollRows(o,a),this.dispatch("scroll-vertical",o,a),this.dispatchExternal("scrollVertical",o,a))})}findRow(t){return"object"!=typeof t?null!=t&&(this.rows.find(o=>o.data[this.table.options.index]==t)||!1):t instanceof qr?t:t instanceof HC?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.rows.find(o=>o.getElement()===t)||!1}getRowFromDataObject(t){return this.rows.find(o=>o.data===t)||!1}getRowFromPosition(t,e){return e?this.activeRows[t]:this.rows[t]}scrollToRow(t,e,o){return this.renderer.scrollToRowPosition(t,e,o)}setData(t,e,o){return new Promise((a,c)=>{e&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition(()=>{this._setDataActual(t)}):(this.table.options.autoColumns&&o&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),a()})}_setDataActual(t,e){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach((o,a)=>{if(o&&"object"==typeof o){var c=new qr(o,this);this.rows.push(c)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",o)}),this.refreshActiveData(!1,!1,e),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof t,"\nData:     ",t)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(t=>{t.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(t,e){var o=this.rows.indexOf(t),a=this.activeRows.indexOf(t);a>-1&&this.activeRows.splice(a,1),o>-1&&this.rows.splice(o,1),this.setActiveRows(this.activeRows),this.displayRowIterator(c=>{var d=c.indexOf(t);d>-1&&c.splice(d,1)}),e||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,e,o,a){var c=this.addRowActual(t,e,o,a);return this.dispatch("row-added",c,t,e,o),c}addRows(t,e,o){var a=[];return new Promise((c,d)=>{e=this.findAddRowPos(e),Array.isArray(t)||(t=[t]),(void 0===o&&e||void 0!==o&&!e)&&t.reverse(),t.forEach((p,f)=>{var v=this.addRow(p,e,o,!0);a.push(v),this.dispatch("row-added",v,t,e,o)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),a.length&&this._clearPlaceholder(),c(a)})}findAddRowPos(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t}addRowActual(t,e,o,a){var f,v,c=t instanceof qr?t:new qr(t||{},this),d=this.findAddRowPos(e),p=-1;return o||(v=this.chain("row-adding-position",[c,d],null,{index:o,top:d}),o=v.index,d=v.top),void 0!==o&&(o=this.findRow(o)),(o=this.chain("row-adding-index",[c,o,d],null,o))&&(p=this.rows.indexOf(o)),o&&p>-1?(f=this.activeRows.indexOf(o),this.displayRowIterator(function(E){var D=E.indexOf(o);D>-1&&E.splice(d?D:D+1,0,c)}),f>-1&&this.activeRows.splice(d?f:f+1,0,c),this.rows.splice(d?p:p+1,0,c)):d?(this.displayRowIterator(function(E){E.unshift(c)}),this.activeRows.unshift(c),this.rows.unshift(c)):(this.displayRowIterator(function(E){E.push(c)}),this.activeRows.push(c),this.rows.push(c)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",c.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),a||this.reRenderInPosition(),c}moveRow(t,e,o){this.dispatch("row-move",t,e,o),this.moveRowActual(t,e,o),this.regenerateRowNumbers(),this.dispatch("row-moved",t,e,o),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,e,o){this.moveRowInArray(this.rows,t,e,o),this.moveRowInArray(this.activeRows,t,e,o),this.displayRowIterator(a=>{this.moveRowInArray(a,t,e,o)}),this.dispatch("row-moving",t,e,o)}moveRowInArray(t,e,o,a){var c,d,f;if(e!==o&&((c=t.indexOf(e))>-1&&(t.splice(c,1),d=t.indexOf(o),t.splice(d>-1?a?d+1:d:c,0,e)),t===this.getDisplayRows())){f=d>c?d:c+1;for(let v=c<d?c:d;v<=f;v++)t[v]&&this.styleRow(t[v],v)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var e=this.getDisplayRows().indexOf(t);return e>-1&&e}nextDisplayRow(t,e){var o=this.getDisplayRowIndex(t),a=!1;return!1!==o&&o<this.displayRowsCount-1&&(a=this.getDisplayRows()[o+1]),!a||a instanceof qr&&"row"==a.type?a:this.nextDisplayRow(a,e)}prevDisplayRow(t,e){var o=this.getDisplayRowIndex(t),a=!1;return o&&(a=this.getDisplayRows()[o-1]),!e||!a||a instanceof qr&&"row"==a.type?a:this.prevDisplayRow(a,e)}findRowIndex(t,e){var o;return!!((t=this.findRow(t))&&(o=e.indexOf(t),o>-1))&&o}getData(t,e){var o=[];return this.getRows(t).forEach(function(c){"row"==c.type&&o.push(c.getData(e||"data"))}),o}getComponents(t){var e=[];return this.getRows(t).forEach(function(a){e.push(a.getComponent())}),e}getDataCount(t){return this.getRows(t).length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,e){void 0!==e?(this.dataPipeline.push({handler:t,priority:e}),this.dataPipeline.sort((o,a)=>o.priority-a.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,e){void 0!==e?(this.displayPipeline.push({handler:t,priority:e}),this.displayPipeline.sort((o,a)=>o.priority-a.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,e,o){var a=this.table,c="",d=0,p=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof t)if((d=this.dataPipeline.findIndex(f=>f.handler===t))>-1)c="dataPipeline",e&&(d==this.dataPipeline.length-1?c="display":d++);else{if(!((d=this.displayPipeline.findIndex(f=>f.handler===t))>-1))return void console.error("Unable to refresh data, invalid handler provided",t);c="displayPipeline",e&&(d==this.displayPipeline.length-1?c="end":d++)}else c=t||"all",d=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===c&&d<this.redrawBlockRestoreConfig.index||p.indexOf(c)<p.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:e,renderInPosition:o,stage:c,index:d});else{switch(this.dispatch("data-refeshing"),t||(this.activeRowsPipeline[0]=this.rows.slice(0)),c){case"all":case"dataPipeline":for(let f=d;f<this.dataPipeline.length;f++){let v=this.dataPipeline[f].handler(this.activeRowsPipeline[f].slice(0));this.activeRowsPipeline[f+1]=v||this.activeRowsPipeline[f].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":d=0,this.resetDisplayRows();case"displayPipeline":for(let f=d;f<this.displayPipeline.length;f++){let v=this.displayPipeline[f].handler((f?this.getDisplayRows(f-1):this.activeRows).slice(0),o);this.setDisplayRows(v||this.getDisplayRows(f-1).slice(0),f)}}En.elVisible(this.element)&&(o?this.reRenderInPosition():(t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),a.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(t=>{var e=t.getCell(this.rowNumColumn);e&&e._generateContents()})}setActiveRows(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(t,e){var o=!0;return e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,o=!0):(this.displayRows.push(t),o=e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),o}getDisplayRows(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t){return this.renderer.visibleRows(!t)}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var e;switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!0);break;default:e=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return e}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(t)}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderVertical?{virtual:d6,basic:u6}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(t,e){var o=t.getElement();e%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(t){t.normalizeHeight()})}adjustTableSize(){var t=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let e=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+e+"px)",this.element.style.height="calc(100% - "+e+"px)",this.element.style.maxHeight="calc(100% - "+e+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-e+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&t!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(t){t.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(t){var e=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(e),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}}class p6 extends ds{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){(!this.element.firstChild||t)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)}redraw(){this.links.forEach(function(t){t.footerRedraw()})}}class f6 extends ds{constructor(t){super(t),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach(e=>{t[e]={handler:null,components:[]}}),this.listeners=t}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),e=Object.values(this.componentMap);for(let o of e)for(let a of t)this.subscriptionChange(o+"-"+a,this.subscriptionChanged.bind(this,o,a))}subscriptionChanged(t,e,o){var a=this.listeners[e].components,c=a.indexOf(t),d=!1;o?-1===c&&(a.push(t),d=!0):this.subscribed(t+"-"+e)||c>-1&&(a.splice(c,1),d=!0),d&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let e=this.listeners[t];e.components.length?e.handler||(e.handler=this.track.bind(this,t),this.el.addEventListener(t,e.handler)):e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}track(t,e){var o=e.composedPath&&e.composedPath()||e.path,a=this.findTargets(o);a=this.bindComponents(t,a),this.triggerEvents(t,e,a)}findTargets(t){var e={};let o=Object.keys(this.componentMap);for(let a of t){let c=a.classList?[...a.classList]:[];if(c.filter(f=>this.abortClasses.includes(f)).length)break;let p=c.filter(f=>o.includes(f));for(let f of p)e[this.componentMap[f]]=a}return e.group&&e.group===e.row&&delete e.row,e}bindComponents(t,e){var o=Object.keys(e).reverse(),a=this.listeners[t],c={};for(let d of o){let p,f=e[d],v=this.previousTargets[d];if(v&&v.target===f)p=v.component;else switch(d){case"row":case"group":(a.components.includes("row")||a.components.includes("cell"))&&(p=this.table.rowManager.getVisibleRows().find(D=>D.getElement()===f));break;case"column":a.components.includes("column")&&(p=this.table.columnManager.findColumn(f));break;case"cell":a.components.includes("cell")&&(p=e.row.findCell(f))}p&&(e[d]=p,c[d]={target:f,component:p})}return this.previousTargets=c,e}triggerEvents(t,e,o){var a=this.listeners[t];for(let c in o)o[c]&&a.components.includes(c)&&this.dispatch(c+"-"+t,e,o[c])}}class g6{constructor(t){this.table=t,this.bindings={}}bind(t,e,o){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][e]?console.warn("Unable to bind component handler, a matching function name is already bound",t,e,hanlder):this.bindings[t][e]=o}handle(t,e,o){if(this.bindings[t]&&this.bindings[t][o])return this.bindings[t][o].bind(null,e);"then"!==o&&"string"==typeof o&&!o.startsWith("_")&&console.error("The "+t+" component does not have a "+o+" function, have you checked that you have the correct Tabulator module installed?")}}class m6 extends ds{constructor(t){super(t),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=t.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=t.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t}createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t}load(t,e,o,a,c){var d=++this.requestOrder;return this.dispatchExternal("dataLoading",t),t&&(0==t.indexOf("{")||0==t.indexOf("["))&&(t=JSON.parse(t)),this.confirm("data-loading",t,e,o,c)?(this.loading=!0,c||this.showLoader(),e=this.chain("data-params",[t,o,c],e||{},{}),e=this.mapParams(e,this.table.options.dataSendParams),this.chain("data-load",[t,e,o,c],Promise.resolve([])).then(v=>{!Array.isArray(v)&&"object"==typeof v&&(v=this.mapParams(v,this.objectInvert(this.table.options.dataReceiveParams)));var E=this.chain("data-loaded",v,null,v);d==this.requestOrder?(this.hideLoader(),!1!==E&&(this.dispatchExternal("dataLoaded",E),this.table.rowManager.setData(E,a,!a))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(v=>{console.error("Data Load Error: ",v),this.dispatchExternal("dataLoadError",v),c||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,a,!a),Promise.resolve())}mapParams(t,e){var o={};for(let a in t)o[e.hasOwnProperty(a)?e[a]:a]=t[a];return o}objectInvert(t){var e={};for(let o in t)e[t[o]]=o;return e}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class _6{constructor(t,e,o){this.table=t,this.events={},this.optionsList=e||{},this.subscriptionNotifiers={},this.dispatch=o?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=o}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var o;if(this.events[t]){if(e){if(!((o=this.events[t].findIndex(a=>a===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(o,1)}else delete this.events[t];this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_notifiySubscriptionChange(t,e){var o=this.subscriptionNotifiers[t];o&&o.forEach(a=>{a(e)})}_dispatch(){var o,t=Array.from(arguments),e=t.shift();return this.events[e]&&this.events[e].forEach((a,c)=>{let d=a.apply(this.table,t);c||(o=d)}),o}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="ExternalEvent:"+t[0],(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}}class v6{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e,o=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,priority:o}),this.events[t].sort((a,c)=>a.priority-c.priority),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var o;if(this.events[t]){if(e){if(!((o=this.events[t].findIndex(a=>a.callback===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(o,1)}this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,e,o,a){var c=o;return Array.isArray(e)||(e=[e]),this.subscribed(t)?(this.events[t].forEach((d,p)=>{c=d.callback.apply(this,e.concat([c]))}),c):"function"==typeof a?a():a}_confirm(t,e){var o=!1;return Array.isArray(e)||(e=[e]),this.subscribed(t)&&this.events[t].forEach((a,c)=>{a.callback.apply(this,e)&&(o=!0)}),o}_notifiySubscriptionChange(t,e){var o=this.subscriptionNotifiers[t];o&&o.forEach(a=>{a(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift();this.events[e]&&this.events[e].forEach(o=>{o.callback.apply(this,t)})}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._confirm(...arguments)}}let km=(()=>{class r{static register(e){r.tables.push(e)}static deregister(e){var o=r.tables.indexOf(e);o>-1&&r.tables.splice(o,1)}static lookupTable(e,o){var c,d,a=[];if("string"==typeof e){if((c=document.querySelectorAll(e)).length)for(var p=0;p<c.length;p++)(d=r.matchElement(c[p]))&&a.push(d)}else"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e instanceof id?(d=r.matchElement(e))&&a.push(d):Array.isArray(e)?e.forEach(function(f){a=a.concat(r.lookupTable(f))}):o||console.warn("Table Connection Error - Invalid Selector",e);return a}static matchElement(e){return r.tables.find(function(o){return e instanceof id?o===e:o.element===e})}}return r.tables=[],r})();function EO(r){r.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var C6={fitData:function(r){this.table.columnManager.renderer.reinitializeColumnWidths(r),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:EO,fitDataTable:EO,fitDataStretch:function(r){var t=0,e=this.table.rowManager.element.clientWidth,o=0,a=!1;r.forEach((c,d)=>{c.widthFixed||c.reinitializeWidth(),(this.table.options.responsiveLayout?c.modules.responsive.visible:c.visible)&&(a=c),c.visible&&(t+=c.getWidth())}),a?(o=e-t+a.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(a.setWidth(0),this.table.modules.responsiveLayout.update()),o>0?a.setWidth(o):a.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(r){var c,v,t=this.table.element.clientWidth,e=0,o=0,a=0,d=[],p=[],f=0,E=0;function D(N){return"string"==typeof N?N.indexOf("%")>-1?t/100*parseInt(N):parseInt(N):N}function x(N,B,Z,z){var de=[],he=0,Le=0,je=0,Et=a,si=0,mi=0,Qi=[];function dn(Zt){return Z*(Zt.column.definition.widthGrow||1)}function Ji(Zt){return D(Zt.width)-Z*(Zt.column.definition.widthShrink||0)}return N.forEach(function(Zt,Tr){var Zn=z?Ji(Zt):dn(Zt);Zt.column.minWidth>=Zn?de.push(Zt):Zt.column.maxWidth&&Zt.column.maxWidth<Zn?(Zt.width=Zt.column.maxWidth,B-=Zt.column.maxWidth,(Et-=z?Zt.column.definition.widthShrink||1:Zt.column.definition.widthGrow||1)&&(Z=Math.floor(B/Et))):(Qi.push(Zt),mi+=z?Zt.column.definition.widthShrink||1:Zt.column.definition.widthGrow||1)}),de.length?(de.forEach(function(Zt){he+=z?Zt.width-Zt.column.minWidth:Zt.column.minWidth,Zt.width=Zt.column.minWidth}),si=(Le=B-he)-(je=mi?Math.floor(Le/mi):Le)*mi,si+=x(Qi,Le,je,z)):(si=mi?B-Math.floor(B/mi)*mi:B,Qi.forEach(function(Zt){Zt.width=z?Ji(Zt):dn(Zt)})),si}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),r.forEach(function(N){var B,Z,z;N.visible&&(B=N.definition.width,Z=parseInt(N.minWidth),B?(z=D(B),e+=z>Z?z:Z,N.definition.widthShrink&&(p.push({column:N,width:z>Z?z:Z}),f+=N.definition.widthShrink)):(d.push({column:N,width:0}),a+=N.definition.widthGrow||1))}),o=t-e,c=Math.floor(o/a),E=x(d,o,c,!1),d.length&&E>0&&(d[d.length-1].width+=+E),d.forEach(function(N){o-=N.width}),(v=Math.abs(E)+o)>0&&f&&(E=x(p,v,Math.floor(v/f),!0)),p.length&&(p[p.length-1].width-=E),d.forEach(function(N){N.column.setWidth(N.width)}),p.forEach(function(N){N.column.setWidth(N.width)})}},w6={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},S6=Object.freeze({__proto__:null,LayoutModule:(()=>{class r extends Oi{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;r.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){r.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return r.moduleName="layout",r.modes=C6,r})(),LocalizeModule:(()=>{class r extends Oi{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=En.deepClone(r.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}setHeaderFilterColumnPlaceholder(e,o){this.langList.default.headerFilters.columns[e]=o,this.lang&&!this.lang.headerFilters.columns[e]&&(this.lang.headerFilters.columns[e]=o)}installLang(e,o){this.langList[e]?this._setLangProp(this.langList[e],o):this.langList[e]=o}_setLangProp(e,o){for(let a in o)e[a]&&"object"==typeof e[a]?this._setLangProp(e[a],o[a]):e[a]=o[a]}setLocale(e){if(!0===(e=e||"default")&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let a=e.split("-")[0];this.langList[a]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,a),e=a):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=En.deepClone(this.langList.default||{}),"default"!=e&&function o(a,c){for(var d in a)"object"==typeof a[d]?(c[d]||(c[d]={}),o(a[d],c[d])):c[d]=a[d]}(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,o){var a=(e=o?e+"|"+o:e).split("|");return this._getLangElement(a,this.locale)||""}_getLangElement(e,o){var a=this.lang;return e.forEach(function(c){var d;a&&(a=void 0!==(d=a[c])&&d)}),a}bind(e,o){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(o),o(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(o=>{o(this.getText(e),this.lang)})}}return r.moduleName="localize",r.langs=w6,r})(),CommsModule:(()=>{class r extends Oi{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var o=[];return km.lookupTable(e).forEach(c=>{this.table!==c&&o.push(c)}),o}send(e,o,a,c){var d=this.getConnections(e);d.forEach(p=>{p.tableComms(this.table.element,o,a,c)}),!d.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,o,a,c){if(this.table.modExists(o))return this.table.modules[o].commsReceived(e,a,c);console.warn("Inter-table Comms Error - no such module:",o)}}return r.moduleName="comms",r})()});class CO{constructor(t,e){this.bindStaticFuctionality(t),this.bindModules(t,S6,!0),e&&this.bindModules(t,e)}bindStaticFuctionality(t){t.moduleBindings={},t.extendModule=function(e,o,a){if(t.moduleBindings[e]){var c=t.moduleBindings[e][o];if(c)if("object"==typeof a)for(let d in a)c[d]=a[d];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",o)}else console.warn("Module Error - module does not exist:",e)},t.registerModule=function(e){Array.isArray(e)||(e=[e]),e.forEach(o=>{t.registerModuleBinding(o)})},t.registerModuleBinding=function(e){t.moduleBindings[e.moduleName]=e},t.findTable=function(e){var o=km.lookupTable(e,!0);return!(Array.isArray(o)&&!o.length)&&o},t.prototype.bindModules=function(){for(var e in this.modules={},t.moduleBindings){let o=t.moduleBindings[e];this.modules[e]=new o(this),o.prototype.moduleCore?this.modulesCore[e]=this.modules[e]:this.modulesRegular[e]=this.modules[e]}}}bindModules(t,e,o){var a=Object.values(e);o&&a.forEach(c=>{c.prototype.moduleCore=!0}),t.registerModule(a)}}let id=(()=>{class r{constructor(e,o){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new g6(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new yO(this,"table constructor"),this.initialized=!1,this.initializeElement(e)&&(this.initialzeCoreSystems(o),setTimeout(()=>{this._create()})),km.register(this)}initializeElement(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement?(this.element=e,!0):"string"==typeof e?(this.element=document.querySelector(e),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initialzeCoreSystems(e){this.columnManager=new c6(this),this.rowManager=new h6(this),this.footerManager=new p6(this),this.dataLoader=new m6(this),this.bindModules(),this.options=this.optionsList.generate(r.defaultOptions,e),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new _6(this,this.options,this.options.debugEventsExternal),this.eventBus=new v6(this.options.debugEventsInternal),this.interactionMonitor=new f6(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==e.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var a,e=this.element,o=this.options;if("TABLE"===e.tagName){this.originalElement=this.element,a=document.createElement("div");var c=e.attributes;for(var d in c)"object"==typeof c[d]&&a.setAttribute(c[d].name,c[d].value);e.parentNode.replaceChild(a,e),this.element=e=a}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);o.height&&(o.height=isNaN(o.height)?o.height:o.height+"px",e.style.height=o.height),!1!==o.minHeight&&(o.minHeight=isNaN(o.minHeight)?o.minHeight:o.minHeight+"px",e.style.minHeight=o.minHeight),!1!==o.maxHeight&&(o.maxHeight=isNaN(o.maxHeight)?o.maxHeight:o.maxHeight+"px",e.style.maxHeight=o.maxHeight)}_initializeTable(){var e=this.element,o=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let d in this.modulesCore)this.modulesCore[d].initialize();if("string"==typeof o.placeholder){var a=document.createElement("div");a.classList.add("tabulator-placeholder");var c=document.createElement("span");c.innerHTML=o.placeholder,a.appendChild(c),o.placeholder=a}e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),o.footerElement&&this.footerManager.activate(),o.autoColumns&&o.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let d in this.modulesRegular)this.modulesRegular[d].initialize();this.columnManager.setColumns(o.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var e=this.element;for(km.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(o){o.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(e){return new Promise((o,a)=>{var c=document.createElement("input");c.type="file",c.accept=e||".json,application/json",c.addEventListener("change",d=>{var v,p=c.files[0],f=new FileReader;f.readAsText(p),f.onload=E=>{try{v=JSON.parse(f.result)}catch(D){return console.warn("File Load Error - File contents is invalid JSON",D),void a(D)}this.setData(v).then(D=>{o(D)}).catch(D=>{o(D)})},f.onerror=E=>{console.warn("File Load Error - Unable to read file"),a()}}),c.click()})}setData(e,o,a){if(this.initialized)return this.dataLoader.load(e,o,a,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,o,a){if(this.initialized)return this.dataLoader.load(e,o,a,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(e){var o=0;if(this.initialized)return new Promise((a,c)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(d=>{var p=this.rowManager.findRow(d[this.options.index]);p&&(o++,p.updateData(d).then(()=>{--o||a()}))}):(console.warn("Update Error - No data provided"),c("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(e,o,a){if(this.initialized)return new Promise((c,d)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,o,a).then(p=>{var f=[];p.forEach(function(v){f.push(v.getComponent())}),c(f)}):(console.warn("Update Error - No data provided"),d("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(e){var o=[],a=0;if(this.initialized)return new Promise((c,d)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(p=>{var f=this.rowManager.findRow(p[this.options.index]);a++,f?f.updateData(p).then(()=>{a--,o.push(f.getComponent()),a||c(o)}):this.rowManager.addRows(p).then(v=>{a--,o.push(v[0].getComponent()),a||c(o)})}):(console.warn("Update Error - No data provided"),d("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(e){var o=this.rowManager.findRow(e);return o?o.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e,o){var a=this.rowManager.getRowFromPosition(e,o);return a?a.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var o=[];Array.isArray(e)||(e=[e]);for(let a of e){let c=this.rowManager.findRow(a,!0);if(!c)return console.error("Delete Error - No matching row found:",a),Promise.reject("Delete Error - No matching row found");o.push(c)}return o.sort((a,c)=>this.rowManager.rows.indexOf(a)>this.rowManager.rows.indexOf(c)?1:-1),o.forEach(a=>{a.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,o,a){if(this.initialized)return"string"==typeof e&&(e=JSON.parse(e)),this.rowManager.addRows(e,o,a).then(c=>c[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(e,o){var a=this.rowManager.findRow(e);return"string"==typeof o&&(o=JSON.parse(o)),a?a.updateData(o).then(()=>a.getComponent()):this.rowManager.addRows(o).then(c=>c[0].getComponent())}updateRow(e,o){var a=this.rowManager.findRow(e);return"string"==typeof o&&(o=JSON.parse(o)),a?a.updateData(o).then(()=>{resolve(a.getComponent())}):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,o,a){var c=this.rowManager.findRow(e);return c?this.rowManager.scrollToRow(c,o,a):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,o,a){var c=this.rowManager.findRow(e);c?c.moveToRow(o,a):console.warn("Move Error - No matching row found:",e)}getRows(e){if(this.initialized)return this.rowManager.getComponents(e);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(e,o){var a=this.rowManager.findRow(e);return a?this.rowManager.getRowPosition(a,o):(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initialized?this.columnManager.setColumns(e):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var o=this.columnManager.findColumn(e);return o?o.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var o=this.columnManager.findColumn(e);if(!o)return console.warn("Column Show Error - No matching column found:",e),!1;o.show()}hideColumn(e){var o=this.columnManager.findColumn(e);if(!o)return console.warn("Column Hide Error - No matching column found:",e),!1;o.hide()}toggleColumn(e){var o=this.columnManager.findColumn(e);if(!o)return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1;o.visible?o.hide():o.show()}addColumn(e,o,a){var c=this.columnManager.findColumn(a);return this.columnManager.addColumn(e,o,c).then(d=>d.getComponent())}deleteColumn(e){var o=this.columnManager.findColumn(e);return o?o.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,o){var a=this.columnManager.findColumn(e);return a?a.updateDefinition(o):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,o,a){var c=this.columnManager.findColumn(e),d=this.columnManager.findColumn(o);c?d?this.columnManager.moveColumn(c,d,a):console.warn("Move Error - No matching column found:",d):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,o,a){return new Promise((c,d)=>{var p=this.columnManager.findColumn(e);return p?this.columnManager.scrollToColumn(p,o,a):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initialized?(this.columnManager.redraw(e),this.rowManager.redraw(e)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(e,o){this.externalEvents.subscribe(e,o)}off(e,o){this.externalEvents.unsubscribe(e,o)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(e,o){return!!this.modules[e]||(o&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var o=this.modules[e];return o||console.error("Tabulator module not installed: "+e),o}}return r.defaultOptions=s6,r})();new CO(id),new CO(class extends id{},o6);let M6=(()=>{class r{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(e){this.hotInstance=new id(e,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",footerElement:'<div>\n        \x3c!-- <a href="javascript:copyClip()">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href="javascript:copyCSV()">CSV</a>\n        --\x3e\n    </div>',placeholder:"please press execute button"}),this.hot.replaceData([]),this.hot.redraw(!0)}AddStringToGrid(e){if(e.startsWith("{")&&e.endsWith("}"))try{var o=JSON.parse(e);return void this.objectsForGrid.push(o)}catch(d){}if(e.startsWith("[")&&e.endsWith("]"))try{for(var a=JSON.parse(e),c=0;c<a.length;c++)this.objectsForGrid.push(a[c]);return}catch(d){}this.stringsForGrid.push(e)}AddDataToGrid(e){this.dataObject.push([e]),this.AddStringToGrid("string"!=typeof e?"object"!=typeof e?e.toString():JSON.stringify(e):e)}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(e,o){return null!=e&&e.hasOwnProperty(o)}AddObjectToFinishGrid(){for(var e=[],o=this.objectsForGrid,a=0;a<o.length;a++)"string"==typeof(c=o[a])?e.push("_"):e.push(...Object.keys(c));var d=new Set(e);e=Array.from(d);var p=[...e],f=[];for(a=0;a<o.length;a++){for(var c=o[a],v={Nr:a+1},E=0;E<e.length;E++){var D=e[E],x=this.goodNameForKey(D);if(c&&this.hasOwnProperty(c,D)){var N=c[D];v[x]="object"==typeof N?JSON.stringify(N):N}else v[x]="string"==typeof c&&0===E?c:""}f.push(v)}e.splice(0,0,"Nr"),p.splice(0,0,"Nr");var B=this.Headers(p);this.hot.setColumns(B),this.hot.replaceData(f)}Headers(e){return e.map(o=>({cellClick:function(a,c){var d=c.getRow().getData().Nr;c.getColumn().getField(),alert(`The row at : ${d} , col: ${d} has value :\n `+c.getValue())},title:o,field:this.goodNameForKey(o),headerFilter:!0,formatter:function(a,c,d){try{var p=a.getValue().toString();if(p.length<2)return p;if(p.startsWith("[")&&p.endsWith("]"))try{var f=JSON.parse(p),v=a.getRow().getData().Nr,D=a.getColumn().getField()+"_"+v;return d(function(){new id("#"+D,{data:f,autoColumns:!0,layout:"fitDataFill",headerSort:!1})}),"<div id='"+D+"'>"+p+"</div>"}catch(x){return p}}catch(x){return p}return a.getValue()}}))}AddStringToFinishGrid(){for(var e=[],o=0;o<this.stringsForGrid.length;o++)e.push({Nr:o+1,Text:this.stringsForGrid[o]});var c=this.Headers(["Nr","Text"]);this.hot.setColumns(c),this.hot.replaceData(e)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(e){var o=e;return o.replace(".","_")}copyClip(){this.hot.copyToClipboard("all")}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class TO{}class wO{}class Ma{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const o=e.indexOf(":");if(o>0){const a=e.slice(0,o),c=a.toLowerCase(),d=e.slice(o+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(d):this.headers.set(c,[d])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let o=t[e];const a=e.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(a,o),this.maybeSetNormalizedName(e,a))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ma?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ma;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ma?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(t.name,e);const a=("a"===t.op?this.headers.get(e):void 0)||[];a.push(...o),this.headers.set(e,a);break;case"d":const c=t.value;if(c){let d=this.headers.get(e);if(!d)return;d=d.filter(p=>-1===c.indexOf(p)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class R6{encodeKey(t){return SO(t)}encodeValue(t){return SO(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const x6=/%(\d[a-f0-9])/gi,A6={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function SO(r){return encodeURIComponent(r).replace(x6,(t,e)=>{var o;return null!=(o=A6[e])?o:t})}function DO(r){return`${r}`}class pl{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new R6,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[d,p]=-1==c?[t.decodeKey(a),""]:[t.decodeKey(a.slice(0,c)),t.decodeValue(a.slice(c+1))],f=e.get(d)||[];f.push(p),e.set(d,f)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const o=t.fromObject[e];this.map.set(e,Array.isArray(o)?o:[o])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(o=>{const a=t[o];Array.isArray(a)?a.forEach(c=>{e.push({param:o,value:c,op:"a"})}):e.push({param:o,value:a,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new pl({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(DO(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let o=this.map.get(t.param)||[];const a=o.indexOf(DO(t.value));-1!==a&&o.splice(a,1),o.length>0?this.map.set(t.param,o):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class O6{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function MO(r){return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer}function RO(r){return"undefined"!=typeof Blob&&r instanceof Blob}function IO(r){return"undefined"!=typeof FormData&&r instanceof FormData}class _p{constructor(t,e,o,a){let c;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==o?o:null,c=a):c=o,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new Ma),this.context||(this.context=new O6),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const p=e.indexOf("?");this.urlWithParams=e+(-1===p?"?":p<e.length-1?"&":"")+d}}else this.params=new pl,this.urlWithParams=e}serializeBody(){return null===this.body?null:MO(this.body)||RO(this.body)||IO(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof pl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||IO(this.body)?null:RO(this.body)?this.body.type||null:MO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var D;const e=t.method||this.method,o=t.url||this.url,a=t.responseType||this.responseType,c=void 0!==t.body?t.body:this.body,d=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,p=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let f=t.headers||this.headers,v=t.params||this.params;const E=null!=(D=t.context)?D:this.context;return void 0!==t.setHeaders&&(f=Object.keys(t.setHeaders).reduce((x,N)=>x.set(N,t.setHeaders[N]),f)),t.setParams&&(v=Object.keys(t.setParams).reduce((x,N)=>x.set(N,t.setParams[N]),v)),new _p(e,o,c,{params:v,headers:f,context:E,reportProgress:p,responseType:a,withCredentials:d})}}var Jn=(()=>((Jn=Jn||{})[Jn.Sent=0]="Sent",Jn[Jn.UploadProgress=1]="UploadProgress",Jn[Jn.ResponseHeader=2]="ResponseHeader",Jn[Jn.DownloadProgress=3]="DownloadProgress",Jn[Jn.Response=4]="Response",Jn[Jn.User=5]="User",Jn))();class jC{constructor(t,e=200,o="OK"){this.headers=t.headers||new Ma,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class WC extends jC{constructor(t={}){super(t),this.type=Jn.ResponseHeader}clone(t={}){return new WC({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Nm extends jC{constructor(t={}){super(t),this.type=Jn.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Nm({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class xO extends jC{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function zC(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let Pm=(()=>{class r{constructor(e){this.handler=e}request(e,o,a={}){let c;if(e instanceof _p)c=e;else{let f,v;f=a.headers instanceof Ma?a.headers:new Ma(a.headers),a.params&&(v=a.params instanceof pl?a.params:new pl({fromObject:a.params})),c=new _p(e,o,void 0!==a.body?a.body:null,{headers:f,context:a.context,params:v,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const d=Dt(c).pipe($u(f=>this.handler.handle(f)));if(e instanceof _p||"events"===a.observe)return d;const p=d.pipe(rn(f=>f instanceof Nm));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return p.pipe(Re(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return p.pipe(Re(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return p.pipe(Re(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return p.pipe(Re(f=>f.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:(new pl).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,a={}){return this.request("PATCH",e,zC(a,o))}post(e,o,a={}){return this.request("POST",e,zC(a,o))}put(e,o,a={}){return this.request("PUT",e,zC(a,o))}}return r.\u0275fac=function(e){return new(e||r)(we(TO))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();class AO{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const OO=new Ae("HTTP_INTERCEPTORS");let P6=(()=>{class r{intercept(e,o){return o.handle(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const L6=/^\)\]\}',?\n/;let kO=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ie(o=>{const a=this.xhrFactory.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((N,B)=>a.setRequestHeader(N,B.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const N=e.detectContentTypeHeader();null!==N&&a.setRequestHeader("Content-Type",N)}if(e.responseType){const N=e.responseType.toLowerCase();a.responseType="json"!==N?N:"text"}const c=e.serializeBody();let d=null;const p=()=>{if(null!==d)return d;const N=1223===a.status?204:a.status,B=a.statusText||"OK",Z=new Ma(a.getAllResponseHeaders()),z=function(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(a)||e.url;return d=new WC({headers:Z,status:N,statusText:B,url:z}),d},f=()=>{let{headers:N,status:B,statusText:Z,url:z}=p(),de=null;204!==B&&(de=void 0===a.response?a.responseText:a.response),0===B&&(B=de?200:0);let he=B>=200&&B<300;if("json"===e.responseType&&"string"==typeof de){const Le=de;de=de.replace(L6,"");try{de=""!==de?JSON.parse(de):null}catch(je){de=Le,he&&(he=!1,de={error:je,text:de})}}he?(o.next(new Nm({body:de,headers:N,status:B,statusText:Z,url:z||void 0})),o.complete()):o.error(new xO({error:de,headers:N,status:B,statusText:Z,url:z||void 0}))},v=N=>{const{url:B}=p(),Z=new xO({error:N,status:a.status||0,statusText:a.statusText||"Unknown Error",url:B||void 0});o.error(Z)};let E=!1;const D=N=>{E||(o.next(p()),E=!0);let B={type:Jn.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(B.total=N.total),"text"===e.responseType&&!!a.responseText&&(B.partialText=a.responseText),o.next(B)},x=N=>{let B={type:Jn.UploadProgress,loaded:N.loaded};N.lengthComputable&&(B.total=N.total),o.next(B)};return a.addEventListener("load",f),a.addEventListener("error",v),a.addEventListener("timeout",v),a.addEventListener("abort",v),e.reportProgress&&(a.addEventListener("progress",D),null!==c&&a.upload&&a.upload.addEventListener("progress",x)),a.send(c),o.next({type:Jn.Sent}),()=>{a.removeEventListener("error",v),a.removeEventListener("abort",v),a.removeEventListener("load",f),a.removeEventListener("timeout",v),e.reportProgress&&(a.removeEventListener("progress",D),null!==c&&a.upload&&a.upload.removeEventListener("progress",x)),a.readyState!==a.DONE&&a.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(we(XI))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const YC=new Ae("XSRF_COOKIE_NAME"),XC=new Ae("XSRF_HEADER_NAME");class NO{}let B6=(()=>{class r{constructor(e,o,a){this.doc=e,this.platform=o,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=NI(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(we(Lt),we(kh),we(YC))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),KC=(()=>{class r{constructor(e,o){this.tokenService=e,this.headerName=o}intercept(e,o){const a=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||a.startsWith("http://")||a.startsWith("https://"))return o.handle(e);const c=this.tokenService.getToken();return null!==c&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,c)})),o.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(we(NO),we(XC))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),V6=(()=>{class r{constructor(e,o){this.backend=e,this.injector=o,this.chain=null}handle(e){if(null===this.chain){const o=this.injector.get(OO,[]);this.chain=o.reduceRight((a,c)=>new AO(a,c),this.backend)}return this.chain.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(we(wO),we(Pi))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),H6=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:KC,useClass:P6}]}}static withOptions(e={}){return{ngModule:r,providers:[e.cookieName?{provide:YC,useValue:e.cookieName}:[],e.headerName?{provide:XC,useValue:e.headerName}:[]]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[KC,{provide:OO,useExisting:KC,multi:!0},{provide:NO,useClass:B6},{provide:YC,useValue:"XSRF-TOKEN"},{provide:XC,useValue:"X-XSRF-TOKEN"}]}),r})(),U6=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[Pm,{provide:TO,useClass:V6},kO,{provide:wO,useExisting:kO}],imports:[[H6.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),r})(),G6=(()=>{class r{constructor(e){this.http=e}getDemoBlocks(){return this.http.get("assets/showUsage/demoBlocks/all.txt",{responseType:"text"}).pipe(Re(e=>JSON.parse(e)))}getSwaggerLinks(){return this.http.get("assets/loadAtStartup/swaggers.json",{responseType:"text"}).pipe(Re(e=>JSON.parse(e)))}getDemoBlock(e){return this.http.get(`assets/showUsage/demoBlocks/${e}.txt`,{responseType:"text"}).pipe(sr(a=>{}),Re(a=>a.toString()))}}return r.\u0275fac=function(e){return new(e||r)(we(Pm))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Oo(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}class e7 extends l{constructor(t,e){super()}schedule(t,e=0){return this}}const Vm={setInterval(...r){const{delegate:t}=Vm;return((null==t?void 0:t.setInterval)||setInterval)(...r)},clearInterval(r){const{delegate:t}=Vm;return((null==t?void 0:t.clearInterval)||clearInterval)(r)},delegate:void 0};class ZC extends e7{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const o=this.id,a=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(a,o,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(a,this.id,e),this}requestAsyncId(t,e,o=0){return Vm.setInterval(t.flush.bind(t,this),o)}recycleAsyncId(t,e,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return e;Vm.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(t,e);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let a,o=!1;try{this.work(t)}catch(c){o=!0,a=c||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:o}=e;this.work=this.state=this.scheduler=null,this.pending=!1,n(o,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const qC={now:()=>(qC.delegate||Date).now(),delegate:void 0};class bp{constructor(t,e=bp.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,o){return new this.schedulerActionCtor(this,t).schedule(o,e)}}bp.now=qC.now;class eT extends bp{constructor(t,e=bp.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let o;this._active=!0;do{if(o=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,o){for(;t=e.shift();)t.unsubscribe();throw o}}}const tT=new eT(ZC),BO=tT;function Hm(r,t=tT){return De((e,o)=>{let a=null,c=null,d=null;const p=()=>{if(a){a.unsubscribe(),a=null;const v=c;c=null,o.next(v)}};function f(){const v=d+r,E=t.now();if(E<v)return a=this.schedule(void 0,v-E),void o.add(a);p()}e.subscribe(new xe(o,v=>{c=v,d=t.now(),a||(a=t.schedule(f,r),o.add(a))},()=>{p(),o.complete()},void 0,()=>{c=a=null}))})}function VO(r){return rn((t,e)=>r<=e)}function HO(r,t=W){return r=null!=r?r:t7,De((e,o)=>{let a,c=!0;e.subscribe(new xe(o,d=>{const p=t(d);(c||!r(a,p))&&(c=!1,a=p,o.next(d))}))})}function t7(r,t){return r===t}function Wi(r){return De((t,e)=>{et(r).subscribe(new xe(e,()=>e.complete(),H)),!e.closed&&t.subscribe(e)})}function xt(r){return null!=r&&"false"!=`${r}`}function Pr(r,t=0){return function(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}function Um(r){return Array.isArray(r)?r:[r]}function Qn(r){return null==r?"":"string"==typeof r?r:`${r}px`}function pc(r){return r instanceof vt?r.nativeElement:r}let iT;try{iT="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(r){iT=!1}let yp,Gm,fc,nT,Cr=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function(r){return r===zI}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!iT)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(e){return new(e||r)(we(kh))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),od=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})();function fl(r){return function(){if(null==yp&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>yp=!0}))}finally{yp=yp||!1}return yp}()?r:!!r.capture}function GO(){if(null==fc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return fc=!1,fc;if("scrollBehavior"in document.documentElement.style)fc=!0;else{const r=Element.prototype.scrollTo;fc=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return fc}function Ep(){if("object"!=typeof document||!document)return 0;if(null==Gm){const r=document.createElement("div"),t=r.style;r.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),o=e.style;o.width="2px",o.height="1px",r.appendChild(e),document.body.appendChild(r),Gm=0,0===r.scrollLeft&&(r.scrollLeft=1,Gm=0===r.scrollLeft?1:2),r.remove()}return Gm}function jO(r){if(function(){if(null==nT){const r="undefined"!=typeof document?document.head:null;nT=!(!r||!r.createShadowRoot&&!r.attachShadow)}return nT}()){const t=r.getRootNode?r.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function rT(){let r="undefined"!=typeof document&&document?document.activeElement:null;for(;r&&r.shadowRoot;){const t=r.shadowRoot.activeElement;if(t===r)break;r=t}return r}function gl(r){return r.composedPath?r.composedPath()[0]:r.target}function oT(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}let WO=(()=>{class r{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Cp=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[WO]}),r})();class sT extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ve,this._typeaheadSubscription=l.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new ve,this.change=new ve,t instanceof sl&&t.changes.subscribe(e=>{if(this._activeItem){const a=e.toArray().indexOf(this._activeItem);a>-1&&a!==this._activeItemIndex&&(this._activeItemIndex=a)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(sr(e=>this._pressedLetters.push(e)),Hm(t),rn(()=>this._pressedLetters.length>0),Re(()=>this._pressedLetters.join(""))).subscribe(e=>{const o=this._getItemsArray();for(let a=1;a<o.length+1;a++){const c=(this._activeItemIndex+a)%o.length,d=o[c];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(c);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,a=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!t[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&a){this.setNextItemActive();break}return;case 38:if(this._vertical&&a){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&a){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&a){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&a){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&a){this.setLastItemActive();break}return;default:return void((a||Oo(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),o="number"==typeof t?t:e.indexOf(t),a=e[o];this._activeItem=null==a?null:a,this._activeItemIndex=o}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let o=1;o<=e.length;o++){const a=(this._activeItemIndex+t*o+e.length)%e.length;if(!this._skipPredicateFn(e[a]))return void this.setActiveItem(a)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const o=this._getItemsArray();if(o[t]){for(;this._skipPredicateFn(o[t]);)if(!o[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof sl?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let aT=(()=>{class r{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(r){return!!(r.offsetWidth||r.offsetHeight||"function"==typeof r.getClientRects&&r.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const o=function(r){try{return r.frameElement}catch(t){return null}}(function(r){return r.ownerDocument&&r.ownerDocument.defaultView||window}(e));if(o&&(-1===$O(o)||!this.isVisible(o)))return!1;let a=e.nodeName.toLowerCase(),c=$O(e);return e.hasAttribute("contenteditable")?-1!==c:!("iframe"===a||"object"===a||this._platform.WEBKIT&&this._platform.IOS&&!function(r){let t=r.nodeName.toLowerCase(),e="input"===t&&r.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===a?!!e.hasAttribute("controls")&&-1!==c:"video"===a?-1!==c&&(null!==c||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,o){return function(r){return!function(r){return function(r){return"input"==r.nodeName.toLowerCase()}(r)&&"hidden"==r.type}(r)&&(function(r){let t=r.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(r)||function(r){return function(r){return"a"==r.nodeName.toLowerCase()}(r)&&r.hasAttribute("href")}(r)||r.hasAttribute("contenteditable")||KO(r))}(e)&&!this.isDisabled(e)&&((null==o?void 0:o.ignoreVisibility)||this.isVisible(e))}}return r.\u0275fac=function(e){return new(e||r)(we(Cr))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function KO(r){if(!r.hasAttribute("tabindex")||void 0===r.tabIndex)return!1;let t=r.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function $O(r){if(!KO(r))return null;const t=parseInt(r.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class y7{constructor(t,e,o,a,c=!1){this._element=t,this._checker=e,this._ngZone=o,this._document=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,c||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let o=0;o<e.length;o++)e[o].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[o]):e[o].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[o]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const o=this._getFirstTabbableElement(e);return null==o||o.focus(t),!!o}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let o=0;o<e.length;o++){const a=e[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[o]):null;if(a)return a}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let o=e.length-1;o>=0;o--){const a=e[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[o]):null;if(a)return a}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(hn(1)).subscribe(t)}}let JO=(()=>{class r{constructor(e,o,a){this._checker=e,this._ngZone=o,this._document=a}create(e,o=!1){return new y7(e,this._checker,this._ngZone,this._document,o)}}return r.\u0275fac=function(e){return new(e||r)(we(aT),we(Jt),we(Lt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function lT(r){return 0===r.offsetX&&0===r.offsetY}function cT(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const E7=new Ae("cdk-input-modality-detector-options"),C7={ignoreKeys:[18,17,224,91,16]},ad=fl({passive:!0,capture:!0});let T7=(()=>{class r{constructor(e,o,a,c){this._platform=e,this._mostRecentTarget=null,this._modality=new Zr(null),this._lastTouchMs=0,this._onKeydown=d=>{var p,f;(null==(f=null==(p=this._options)?void 0:p.ignoreKeys)?void 0:f.some(v=>v===d.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=gl(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(lT(d)?"keyboard":"mouse"),this._mostRecentTarget=gl(d))},this._onTouchstart=d=>{cT(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=gl(d))},this._options=Qe(Qe({},C7),c),this.modalityDetected=this._modality.pipe(VO(1)),this.modalityChanged=this.modalityDetected.pipe(HO()),e.isBrowser&&o.runOutsideAngular(()=>{a.addEventListener("keydown",this._onKeydown,ad),a.addEventListener("mousedown",this._onMousedown,ad),a.addEventListener("touchstart",this._onTouchstart,ad)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ad),document.removeEventListener("mousedown",this._onMousedown,ad),document.removeEventListener("touchstart",this._onTouchstart,ad))}}return r.\u0275fac=function(e){return new(e||r)(we(Cr),we(Jt),we(Lt),we(E7,8))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const S7=new Ae("cdk-focus-monitor-default-options"),jm=fl({passive:!0,capture:!0});let ko=(()=>{class r{constructor(e,o,a,c,d){this._ngZone=e,this._platform=o,this._inputModalityDetector=a,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ve,this._rootNodeFocusAndBlurListener=p=>{const f=gl(p),v="focus"===p.type?this._onFocus:this._onBlur;for(let E=f;E;E=E.parentElement)v.call(this,p,E)},this._document=c,this._detectionMode=(null==d?void 0:d.detectionMode)||0}monitor(e,o=!1){const a=pc(e);if(!this._platform.isBrowser||1!==a.nodeType)return Dt(null);const c=jO(a)||this._getDocument(),d=this._elementInfo.get(a);if(d)return o&&(d.checkChildren=!0),d.subject;const p={checkChildren:o,subject:new ve,rootNode:c};return this._elementInfo.set(a,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(e){const o=pc(e),a=this._elementInfo.get(o);a&&(a.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(a))}focusVia(e,o,a){const c=pc(e);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(([p,f])=>this._originChanged(p,o,f)):(this._setOrigin(o),"function"==typeof c.focus&&c.focus(a))}ngOnDestroy(){this._elementInfo.forEach((e,o)=>this.stopMonitoring(o))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,o){e.classList.toggle("cdk-focused",!!o),e.classList.toggle("cdk-touch-focused","touch"===o),e.classList.toggle("cdk-keyboard-focused","keyboard"===o),e.classList.toggle("cdk-mouse-focused","mouse"===o),e.classList.toggle("cdk-program-focused","program"===o)}_setOrigin(e,o=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&o,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,o){const a=this._elementInfo.get(o),c=gl(e);!a||!a.checkChildren&&o!==c||this._originChanged(o,this._getFocusOrigin(c),a)}_onBlur(e,o){const a=this._elementInfo.get(o);!a||a.checkChildren&&e.relatedTarget instanceof Node&&o.contains(e.relatedTarget)||(this._setClasses(o),this._emitOrigin(a.subject,null))}_emitOrigin(e,o){this._ngZone.run(()=>e.next(o))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const o=e.rootNode,a=this._rootNodeFocusListenerCount.get(o)||0;a||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,jm),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,jm)}),this._rootNodeFocusListenerCount.set(o,a+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Wi(this._stopInputModalityDetector)).subscribe(c=>{this._setOrigin(c,!0)}))}_removeGlobalListeners(e){const o=e.rootNode;if(this._rootNodeFocusListenerCount.has(o)){const a=this._rootNodeFocusListenerCount.get(o);a>1?this._rootNodeFocusListenerCount.set(o,a-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,jm),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,jm),this._rootNodeFocusListenerCount.delete(o))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,o,a){this._setClasses(e,o),this._emitOrigin(a.subject,o),this._lastFocusOrigin=o}_getClosestElementsInfo(e){const o=[];return this._elementInfo.forEach((a,c)=>{(c===e||a.checkChildren&&c.contains(e))&&o.push([c,a])}),o}}return r.\u0275fac=function(e){return new(e||r)(we(Jt),we(Cr),we(T7),we(Lt,8),we(S7,8))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const ZO="cdk-high-contrast-black-on-white",qO="cdk-high-contrast-white-on-black",uT="cdk-high-contrast-active";let ek=(()=>{class r{constructor(e,o){this._platform=e,this._document=o}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const o=this._document.defaultView||window,a=o&&o.getComputedStyle?o.getComputedStyle(e):null,c=(a&&a.backgroundColor||"").replace(/ /g,"");switch(e.remove(),c){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(uT),e.remove(ZO),e.remove(qO),this._hasCheckedHighContrastMode=!0;const o=this.getHighContrastMode();1===o?(e.add(uT),e.add(ZO)):2===o&&(e.add(uT),e.add(qO))}}}return r.\u0275fac=function(e){return new(e||r)(we(Cr),we(Lt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Wm=(()=>{class r{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return r.\u0275fac=function(e){return new(e||r)(we(ek))},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[od,Cp]]}),r})();const D7=new Ae("cdk-dir-doc",{providedIn:"root",factory:function(){return Wl(Lt)}});let hs=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new At,e){const a=e.documentElement?e.documentElement.dir:null,c=(e.body?e.body.dir:null)||a;this.value="ltr"===c||"rtl"===c?c:"ltr"}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(e){return new(e||r)(we(D7,8))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ld=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})();const tk=new ol("13.0.1");class ik{}const Ra="*";function An(r,t){return{type:7,name:r,definitions:t,options:{}}}function Ri(r,t=null){return{type:4,styles:t,timings:r}}function nk(r,t=null){return{type:2,steps:r,options:t}}function ut(r){return{type:6,styles:r,offset:null}}function oi(r,t,e){return{type:0,name:r,styles:t,options:e}}function Ei(r,t,e=null){return{type:1,expr:r,animation:t,options:e}}function sk(r){Promise.resolve(null).then(r)}class cd{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){sk(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class ak{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,o=0,a=0;const c=this.players.length;0==c?sk(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++e==c&&this._onFinish()}),d.onDestroy(()=>{++o==c&&this._onDestroy()}),d.onStart(()=>{++a==c&&this._onStart()})}),this.totalTime=this.players.reduce((d,p)=>Math.max(d,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(o=>{const a=o.totalTime?Math.min(1,e/o.totalTime):1;o.setPosition(a)})}getPosition(){const t=this.players.reduce((e,o)=>null===e||o.totalTime>e.totalTime?o:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}function lk(){return"undefined"!=typeof window&&void 0!==window.document}function hT(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ml(r){switch(r.length){case 0:return new cd;case 1:return r[0];default:return new ak(r)}}function ck(r,t,e,o,a={},c={}){const d=[],p=[];let f=-1,v=null;if(o.forEach(E=>{const D=E.offset,x=D==f,N=x&&v||{};Object.keys(E).forEach(B=>{let Z=B,z=E[B];if("offset"!==B)switch(Z=t.normalizePropertyName(Z,d),z){case"!":z=a[B];break;case Ra:z=c[B];break;default:z=t.normalizeStyleValue(B,Z,z,d)}N[Z]=z}),x||p.push(N),v=N,f=D}),d.length){const E="\n - ";throw new Error(`Unable to animate due to the following errors:${E}${d.join(E)}`)}return p}function pT(r,t,e,o){switch(t){case"start":r.onStart(()=>o(e&&fT(e,"start",r)));break;case"done":r.onDone(()=>o(e&&fT(e,"done",r)));break;case"destroy":r.onDestroy(()=>o(e&&fT(e,"destroy",r)))}}function fT(r,t,e){const o=e.totalTime,c=gT(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,null==o?r.totalTime:o,!!e.disabled),d=r._data;return null!=d&&(c._data=d),c}function gT(r,t,e,o,a="",c=0,d){return{element:r,triggerName:t,fromState:e,toState:o,phaseName:a,totalTime:c,disabled:!!d}}function go(r,t,e){let o;return r instanceof Map?(o=r.get(t),o||r.set(t,o=e)):(o=r[t],o||(o=r[t]=e)),o}function uk(r){const t=r.indexOf(":");return[r.substring(1,t),r.substr(t+1)]}let mT=(r,t)=>!1,_T=(r,t)=>!1,dk=(r,t,e)=>[];const hk=hT();(hk||"undefined"!=typeof Element)&&(mT=lk()?(r,t)=>{for(;t&&t!==document.documentElement;){if(t===r)return!0;t=t.parentNode||t.host}return!1}:(r,t)=>r.contains(t),_T=(()=>{if(hk||Element.prototype.matches)return(r,t)=>r.matches(t);{const r=Element.prototype,t=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector;return t?(e,o)=>t.apply(e,[o]):_T}})(),dk=(r,t,e)=>{let o=[];if(e){const a=r.querySelectorAll(t);for(let c=0;c<a.length;c++)o.push(a[c])}else{const a=r.querySelector(t);a&&o.push(a)}return o});let mc=null,pk=!1;function vT(r){mc||(mc=("undefined"!=typeof document?document.body:null)||{},pk=!!mc.style&&"WebkitAppearance"in mc.style);let t=!0;return mc.style&&!function(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in mc.style,!t&&pk&&(t="Webkit"+r.charAt(0).toUpperCase()+r.substr(1)in mc.style)),t}const bT=_T,yT=mT,ET=dk;function fk(r){const t={};return Object.keys(r).forEach(e=>{const o=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[o]=r[e]}),t}let gk=(()=>{class r{validateStyleProperty(e){return vT(e)}matchesElement(e,o){return bT(e,o)}containsElement(e,o){return yT(e,o)}query(e,o,a){return ET(e,o,a)}computeStyle(e,o,a){return a||""}animate(e,o,a,c,d,p=[],f){return new cd(a,c)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),CT=(()=>{class r{}return r.NOOP=new gk,r})();const TT="ng-enter",zm="ng-leave",Ym="ng-trigger",Xm=".ng-trigger",_k="ng-animating",wT=".ng-animating";function _c(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ST(parseFloat(t[1]),t[2])}function ST(r,t){return"s"===t?1e3*r:r}function Km(r,t,e){return r.hasOwnProperty("duration")?r:function(r,t,e){let a,c=0,d="";if("string"==typeof r){const p=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return t.push(`The provided timing value "${r}" is invalid.`),{duration:0,delay:0,easing:""};a=ST(parseFloat(p[1]),p[2]);const f=p[3];null!=f&&(c=ST(parseFloat(f),p[4]));const v=p[5];v&&(d=v)}else a=r;if(!e){let p=!1,f=t.length;a<0&&(t.push("Duration values below 0 are not allowed for this animation step."),p=!0),c<0&&(t.push("Delay values below 0 are not allowed for this animation step."),p=!0),p&&t.splice(f,0,`The provided timing value "${r}" is invalid.`)}return{duration:a,delay:c,easing:d}}(r,t,e)}function ud(r,t={}){return Object.keys(r).forEach(e=>{t[e]=r[e]}),t}function _l(r,t,e={}){if(t)for(let o in r)e[o]=r[o];else ud(r,e);return e}function bk(r,t,e){return e?t+":"+e+";":""}function yk(r){let t="";for(let e=0;e<r.style.length;e++){const o=r.style.item(e);t+=bk(0,o,r.style.getPropertyValue(o))}for(const e in r.style)r.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=bk(0,L7(e),r.style[e]));r.setAttribute("style",t)}function js(r,t,e){r.style&&(Object.keys(t).forEach(o=>{const a=MT(o);e&&!e.hasOwnProperty(o)&&(e[o]=r.style[a]),r.style[a]=t[o]}),hT()&&yk(r))}function vc(r,t){r.style&&(Object.keys(t).forEach(e=>{const o=MT(e);r.style[o]=""}),hT()&&yk(r))}function Tp(r){return Array.isArray(r)?1==r.length?r[0]:nk(r):r}const DT=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ek(r){let t=[];if("string"==typeof r){let e;for(;e=DT.exec(r);)t.push(e[1]);DT.lastIndex=0}return t}function $m(r,t,e){const o=r.toString(),a=o.replace(DT,(c,d)=>{let p=t[d];return t.hasOwnProperty(d)||(e.push(`Please provide a value for the animation param ${d}`),p=""),p.toString()});return a==o?r:a}function Jm(r){const t=[];let e=r.next();for(;!e.done;)t.push(e.value),e=r.next();return t}const P7=/-+([a-z0-9])/g;function MT(r){return r.replace(P7,(...t)=>t[1].toUpperCase())}function L7(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ck(r,t){return 0===r||0===t}function Tk(r,t,e){const o=Object.keys(e);if(o.length&&t.length){let c=t[0],d=[];if(o.forEach(p=>{c.hasOwnProperty(p)||d.push(p),c[p]=e[p]}),d.length)for(var a=1;a<t.length;a++){let p=t[a];d.forEach(function(f){p[f]=RT(r,f)})}}return t}function mo(r,t,e){switch(t.type){case 7:return r.visitTrigger(t,e);case 0:return r.visitState(t,e);case 1:return r.visitTransition(t,e);case 2:return r.visitSequence(t,e);case 3:return r.visitGroup(t,e);case 4:return r.visitAnimate(t,e);case 5:return r.visitKeyframes(t,e);case 6:return r.visitStyle(t,e);case 8:return r.visitReference(t,e);case 9:return r.visitAnimateChild(t,e);case 10:return r.visitAnimateRef(t,e);case 11:return r.visitQuery(t,e);case 12:return r.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function RT(r,t){return window.getComputedStyle(r)[t]}function F7(r,t){const e=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(o=>function(r,t,e){if(":"==r[0]){const f=function(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,o)=>parseFloat(o)>parseFloat(e);case":decrement":return(e,o)=>parseFloat(o)<parseFloat(e);default:return t.push(`The transition alias value "${r}" is not supported`),"* => *"}}(r,e);if("function"==typeof f)return void t.push(f);r=f}const o=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==o||o.length<4)return e.push(`The provided transition expression "${r}" is not supported`),t;const a=o[1],c=o[2],d=o[3];t.push(wk(a,d));"<"==c[0]&&!("*"==a&&"*"==d)&&t.push(wk(d,a))}(o,e,t)):e.push(r),e}const Zm=new Set(["true","1"]),qm=new Set(["false","0"]);function wk(r,t){const e=Zm.has(r)||qm.has(r),o=Zm.has(t)||qm.has(t);return(a,c)=>{let d="*"==r||r==a,p="*"==t||t==c;return!d&&e&&"boolean"==typeof a&&(d=a?Zm.has(r):qm.has(r)),!p&&o&&"boolean"==typeof c&&(p=c?Zm.has(t):qm.has(t)),d&&p}}const H7=new RegExp("s*:selfs*,?","g");function IT(r,t,e){return new U7(r).build(t,e)}class U7{constructor(t){this._driver=t}build(t,e){const o=new W7(e);return this._resetContextStyleTimingState(o),mo(this,Tp(t),o)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let o=e.queryCount=0,a=e.depCount=0;const c=[],d=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(p=>{if(this._resetContextStyleTimingState(e),0==p.type){const f=p,v=f.name;v.toString().split(/\s*,\s*/).forEach(E=>{f.name=E,c.push(this.visitState(f,e))}),f.name=v}else if(1==p.type){const f=this.visitTransition(p,e);o+=f.queryCount,a+=f.depCount,d.push(f)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:c,transitions:d,queryCount:o,depCount:a,options:null}}visitState(t,e){const o=this.visitStyle(t.styles,e),a=t.options&&t.options.params||null;if(o.containsDynamicStyles){const c=new Set,d=a||{};if(o.styles.forEach(p=>{if(e_(p)){const f=p;Object.keys(f).forEach(v=>{Ek(f[v]).forEach(E=>{d.hasOwnProperty(E)||c.add(E)})})}}),c.size){const p=Jm(c.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${p.join(", ")}`)}}return{type:0,name:t.name,style:o,options:a?{params:a}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const o=mo(this,Tp(t.animation),e);return{type:1,matchers:F7(t.expr,e.errors),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:bc(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(o=>mo(this,o,e)),options:bc(t.options)}}visitGroup(t,e){const o=e.currentTime;let a=0;const c=t.steps.map(d=>{e.currentTime=o;const p=mo(this,d,e);return a=Math.max(a,e.currentTime),p});return e.currentTime=a,{type:3,steps:c,options:bc(t.options)}}visitAnimate(t,e){const o=function(r,t){let e=null;if(r.hasOwnProperty("duration"))e=r;else if("number"==typeof r)return xT(Km(r,t).duration,0,"");const o=r;if(o.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=xT(0,0,"");return c.dynamic=!0,c.strValue=o,c}return e=e||Km(o,t),xT(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=o;let a,c=t.styles?t.styles:ut({});if(5==c.type)a=this.visitKeyframes(c,e);else{let d=t.styles,p=!1;if(!d){p=!0;const v={};o.easing&&(v.easing=o.easing),d=ut(v)}e.currentTime+=o.duration+o.delay;const f=this.visitStyle(d,e);f.isEmptyStep=p,a=f}return e.currentAnimateTimings=null,{type:4,timings:o,style:a,options:null}}visitStyle(t,e){const o=this._makeStyleAst(t,e);return this._validateStyleAst(o,e),o}_makeStyleAst(t,e){const o=[];Array.isArray(t.styles)?t.styles.forEach(d=>{"string"==typeof d?d==Ra?o.push(d):e.errors.push(`The provided style string value ${d} is not allowed.`):o.push(d)}):o.push(t.styles);let a=!1,c=null;return o.forEach(d=>{if(e_(d)){const p=d,f=p.easing;if(f&&(c=f,delete p.easing),!a)for(let v in p)if(p[v].toString().indexOf("{{")>=0){a=!0;break}}}),{type:6,styles:o,easing:c,offset:t.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(t,e){const o=e.currentAnimateTimings;let a=e.currentTime,c=e.currentTime;o&&c>0&&(c-=o.duration+o.delay),t.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(p=>{if(!this._driver.validateStyleProperty(p))return void e.errors.push(`The provided animation property "${p}" is not a supported CSS property for animations`);const f=e.collectedStyles[e.currentQuerySelector],v=f[p];let E=!0;v&&(c!=a&&c>=v.startTime&&a<=v.endTime&&(e.errors.push(`The CSS property "${p}" that exists between the times of "${v.startTime}ms" and "${v.endTime}ms" is also being animated in a parallel animation between the times of "${c}ms" and "${a}ms"`),E=!1),c=v.startTime),E&&(f[p]={startTime:c,endTime:a}),e.options&&function(r,t,e){const o=t.params||{},a=Ek(r);a.length&&a.forEach(c=>{o.hasOwnProperty(c)||e.push(`Unable to resolve the local animation param ${c} in the given list of values`)})}(d[p],e.options,e.errors)})})}visitKeyframes(t,e){const o={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),o;let c=0;const d=[];let p=!1,f=!1,v=0;const E=t.steps.map(de=>{const he=this._makeStyleAst(de,e);let Le=null!=he.offset?he.offset:function(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(e_(e)&&e.hasOwnProperty("offset")){const o=e;t=parseFloat(o.offset),delete o.offset}});else if(e_(r)&&r.hasOwnProperty("offset")){const e=r;t=parseFloat(e.offset),delete e.offset}return t}(he.styles),je=0;return null!=Le&&(c++,je=he.offset=Le),f=f||je<0||je>1,p=p||je<v,v=je,d.push(je),he});f&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),p&&e.errors.push("Please ensure that all keyframe offsets are in order");const D=t.steps.length;let x=0;c>0&&c<D?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==c&&(x=1/(D-1));const N=D-1,B=e.currentTime,Z=e.currentAnimateTimings,z=Z.duration;return E.forEach((de,he)=>{const Le=x>0?he==N?1:x*he:d[he],je=Le*z;e.currentTime=B+Z.delay+je,Z.duration=je,this._validateStyleAst(de,e),de.offset=Le,o.styles.push(de)}),o}visitReference(t,e){return{type:8,animation:mo(this,Tp(t.animation),e),options:bc(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:bc(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:bc(t.options)}}visitQuery(t,e){const o=e.currentQuerySelector,a=t.options||{};e.queryCount++,e.currentQuery=t;const[c,d]=function(r){const t=!!r.split(/\s*,\s*/).find(e=>":self"==e);return t&&(r=r.replace(H7,"")),r=r.replace(/@\*/g,Xm).replace(/@\w+/g,e=>Xm+"-"+e.substr(1)).replace(/:animating/g,wT),[r,t]}(t.selector);e.currentQuerySelector=o.length?o+" "+c:c,go(e.collectedStyles,e.currentQuerySelector,{});const p=mo(this,Tp(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=o,{type:11,selector:c,limit:a.limit||0,optional:!!a.optional,includeSelf:d,animation:p,originalSelector:t.selector,options:bc(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const o="full"===t.timings?{duration:0,delay:0,easing:"full"}:Km(t.timings,e.errors,!0);return{type:12,animation:mo(this,Tp(t.animation),e),timings:o,options:null}}}class W7{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function e_(r){return!Array.isArray(r)&&"object"==typeof r}function bc(r){return r?(r=ud(r)).params&&(r.params=function(r){return r?ud(r):null}(r.params)):r={},r}function xT(r,t,e){return{duration:r,delay:t,easing:e}}function AT(r,t,e,o,a,c,d=null,p=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:o,duration:a,delay:c,totalTime:a+c,easing:d,subTimeline:p}}class t_{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let o=this._map.get(t);o||this._map.set(t,o=[]),o.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const $7=new RegExp(":enter","g"),Q7=new RegExp(":leave","g");function OT(r,t,e,o,a,c={},d={},p,f,v=[]){return(new Z7).buildKeyframes(r,t,e,o,a,c,d,p,f,v)}class Z7{buildKeyframes(t,e,o,a,c,d,p,f,v,E=[]){v=v||new t_;const D=new kT(t,e,v,a,c,E,[]);D.options=f,D.currentTimeline.setStyles([d],null,D.errors,f),mo(this,o,D);const x=D.timelines.filter(N=>N.containsAnimation());if(x.length&&Object.keys(p).length){const N=x[x.length-1];N.allowOnlyTimelineStyles()||N.setStyles([p],null,D.errors,f)}return x.length?x.map(N=>N.buildKeyframes()):[AT(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const o=e.subInstructions.consume(e.element);if(o){const a=e.createSubContext(t.options),c=e.currentTimeline.currentTime,d=this._visitSubInstructions(o,a,a.options);c!=d&&e.transformIntoNewTimeline(d)}e.previousNode=t}visitAnimateRef(t,e){const o=e.createSubContext(t.options);o.transformIntoNewTimeline(),this.visitReference(t.animation,o),e.transformIntoNewTimeline(o.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,o){let c=e.currentTimeline.currentTime;const d=null!=o.duration?_c(o.duration):null,p=null!=o.delay?_c(o.delay):null;return 0!==d&&t.forEach(f=>{const v=e.appendInstructionToTimeline(f,d,p);c=Math.max(c,v.duration+v.delay)}),c}visitReference(t,e){e.updateOptions(t.options,!0),mo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const o=e.subContextCount;let a=e;const c=t.options;if(c&&(c.params||c.delay)&&(a=e.createSubContext(c),a.transformIntoNewTimeline(),null!=c.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=i_);const d=_c(c.delay);a.delayNextStep(d)}t.steps.length&&(t.steps.forEach(d=>mo(this,d,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>o&&a.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const o=[];let a=e.currentTimeline.currentTime;const c=t.options&&t.options.delay?_c(t.options.delay):0;t.steps.forEach(d=>{const p=e.createSubContext(t.options);c&&p.delayNextStep(c),mo(this,d,p),a=Math.max(a,p.currentTimeline.currentTime),o.push(p.currentTimeline)}),o.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(a),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const o=t.strValue;return Km(e.params?$m(o,e.params,e.errors):o,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const o=e.currentAnimateTimings=this._visitTiming(t.timings,e),a=e.currentTimeline;o.delay&&(e.incrementTime(o.delay),a.snapshotCurrentStyles());const c=t.style;5==c.type?this.visitKeyframes(c,e):(e.incrementTime(o.duration),this.visitStyle(c,e),a.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const o=e.currentTimeline,a=e.currentAnimateTimings;!a&&o.getCurrentStyleProperties().length&&o.forwardFrame();const c=a&&a.easing||t.easing;t.isEmptyStep?o.applyEmptyStep(c):o.setStyles(t.styles,c,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const o=e.currentAnimateTimings,a=e.currentTimeline.duration,c=o.duration,p=e.createSubContext().currentTimeline;p.easing=o.easing,t.styles.forEach(f=>{p.forwardTime((f.offset||0)*c),p.setStyles(f.styles,f.easing,e.errors,e.options),p.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(p),e.transformIntoNewTimeline(a+c),e.previousNode=t}visitQuery(t,e){const o=e.currentTimeline.currentTime,a=t.options||{},c=a.delay?_c(a.delay):0;c&&(6===e.previousNode.type||0==o&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=i_);let d=o;const p=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!a.optional,e.errors);e.currentQueryTotal=p.length;let f=null;p.forEach((v,E)=>{e.currentQueryIndex=E;const D=e.createSubContext(t.options,v);c&&D.delayNextStep(c),v===e.element&&(f=D.currentTimeline),mo(this,t.animation,D),D.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,D.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const o=e.parentContext,a=e.currentTimeline,c=t.timings,d=Math.abs(c.duration),p=d*(e.currentQueryTotal-1);let f=d*e.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":f=p-f;break;case"full":f=o.currentStaggerTime}const E=e.currentTimeline;f&&E.delayNextStep(f);const D=E.currentTime;mo(this,t.animation,e),e.previousNode=t,o.currentStaggerTime=a.currentTime-D+(a.startTime-o.currentTimeline.startTime)}}const i_={};class kT{constructor(t,e,o,a,c,d,p,f){this._driver=t,this.element=e,this.subInstructions=o,this._enterClassName=a,this._leaveClassName=c,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=i_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new n_(this._driver,e,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const o=t;let a=this.options;null!=o.duration&&(a.duration=_c(o.duration)),null!=o.delay&&(a.delay=_c(o.delay));const c=o.params;if(c){let d=a.params;d||(d=this.options.params={}),Object.keys(c).forEach(p=>{(!e||!d.hasOwnProperty(p))&&(d[p]=$m(c[p],d,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const o=t.params={};Object.keys(e).forEach(a=>{o[a]=e[a]})}}return t}createSubContext(t=null,e,o){const a=e||this.element,c=new kT(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,o||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(t),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(t){return this.previousNode=i_,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,o){const a={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=o?o:0)+t.delay,easing:""},c=new q7(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,a,t.stretchStartingKeyframe);return this.timelines.push(c),a}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,o,a,c,d){let p=[];if(a&&p.push(this.element),t.length>0){t=(t=t.replace($7,"."+this._enterClassName)).replace(Q7,"."+this._leaveClassName);let v=this._driver.query(this.element,t,1!=o);0!==o&&(v=o<0?v.slice(v.length+o,v.length):v.slice(0,o)),p.push(...v)}return!c&&0==p.length&&d.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),p}}class n_{constructor(t,e,o,a){this._driver=t,this.element=e,this.startTime=o,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n_(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Ra,this._currentKeyframe[e]=Ra}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,o,a){e&&(this._previousKeyframe.easing=e);const c=a&&a.params||{},d=function(r,t){const e={};let o;return r.forEach(a=>{"*"===a?(o=o||Object.keys(t),o.forEach(c=>{e[c]=Ra})):_l(a,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(d).forEach(p=>{const f=$m(d[p],c,o);this._pendingStyles[p]=f,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Ra),this._updateStyle(p,f)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(o=>{this._currentKeyframe[o]=t[o]}),Object.keys(this._localTimelineStyles).forEach(o=>{this._currentKeyframe.hasOwnProperty(o)||(this._currentKeyframe[o]=this._localTimelineStyles[o])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const o=this._styleSummary[e],a=t._styleSummary[e];(!o||a.time>o.time)&&this._updateStyle(e,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,o=1===this._keyframes.size&&0===this.duration;let a=[];this._keyframes.forEach((p,f)=>{const v=_l(p,!0);Object.keys(v).forEach(E=>{const D=v[E];"!"==D?t.add(E):D==Ra&&e.add(E)}),o||(v.offset=f/this.duration),a.push(v)});const c=t.size?Jm(t.values()):[],d=e.size?Jm(e.values()):[];if(o){const p=a[0],f=ud(p);p.offset=0,f.offset=1,a=[p,f]}return AT(this.element,a,c,d,this.duration,this.startTime,this.easing,!1)}}class q7 extends n_{constructor(t,e,o,a,c,d,p=!1){super(t,e,d.delay),this.keyframes=o,this.preStyleProps=a,this.postStyleProps=c,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:o,easing:a}=this.timings;if(this._stretchStartingKeyframe&&e){const c=[],d=o+e,p=e/d,f=_l(t[0],!1);f.offset=0,c.push(f);const v=_l(t[0],!1);v.offset=Mk(p),c.push(v);const E=t.length-1;for(let D=1;D<=E;D++){let x=_l(t[D],!1);x.offset=Mk((e+x.offset*o)/d),c.push(x)}o=d,e=0,a="",t=c}return AT(this.element,t,this.preStyleProps,this.postStyleProps,o,e,a,!0)}}function Mk(r,t=3){const e=Math.pow(10,t-1);return Math.round(r*e)/e}class NT{}class t9 extends NT{normalizePropertyName(t,e){return MT(t)}normalizeStyleValue(t,e,o,a){let c="";const d=o.toString().trim();if(n9[e]&&0!==o&&"0"!==o)if("number"==typeof o)c="px";else{const p=o.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&a.push(`Please provide a CSS unit value for ${t}:${o}`)}return d+c}}const n9=(()=>function(r){const t={};return r.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Rk(r,t,e,o,a,c,d,p,f,v,E,D,x){return{type:0,element:r,triggerName:t,isRemovalTransition:a,fromState:e,fromStyles:c,toState:o,toStyles:d,timelines:p,queriedElements:f,preStyleProps:v,postStyleProps:E,totalTime:D,errors:x}}const PT={};class Ik{constructor(t,e,o){this._triggerName=t,this.ast=e,this._stateStyles=o}match(t,e,o,a){return function(r,t,e,o,a){return r.some(c=>c(t,e,o,a))}(this.ast.matchers,t,e,o,a)}buildStyles(t,e,o){const a=this._stateStyles["*"],c=this._stateStyles[t],d=a?a.buildStyles(e,o):{};return c?c.buildStyles(e,o):d}build(t,e,o,a,c,d,p,f,v,E){const D=[],x=this.ast.options&&this.ast.options.params||PT,B=this.buildStyles(o,p&&p.params||PT,D),Z=f&&f.params||PT,z=this.buildStyles(a,Z,D),de=new Set,he=new Map,Le=new Map,je="void"===a,Et={params:Qe(Qe({},x),Z)},si=E?[]:OT(t,e,this.ast.animation,c,d,B,z,Et,v,D);let mi=0;if(si.forEach(dn=>{mi=Math.max(dn.duration+dn.delay,mi)}),D.length)return Rk(e,this._triggerName,o,a,je,B,z,[],[],he,Le,mi,D);si.forEach(dn=>{const Ji=dn.element,Zt=go(he,Ji,{});dn.preStyleProps.forEach(Zn=>Zt[Zn]=!0);const Tr=go(Le,Ji,{});dn.postStyleProps.forEach(Zn=>Tr[Zn]=!0),Ji!==e&&de.add(Ji)});const Qi=Jm(de.values());return Rk(e,this._triggerName,o,a,je,B,z,si,Qi,he,Le,mi)}}class s9{constructor(t,e,o){this.styles=t,this.defaultParams=e,this.normalizer=o}buildStyles(t,e){const o={},a=ud(this.defaultParams);return Object.keys(t).forEach(c=>{const d=t[c];null!=d&&(a[c]=d)}),this.styles.styles.forEach(c=>{if("string"!=typeof c){const d=c;Object.keys(d).forEach(p=>{let f=d[p];f.length>1&&(f=$m(f,a,e));const v=this.normalizer.normalizePropertyName(p,e);f=this.normalizer.normalizeStyleValue(p,v,f,e),o[v]=f})}}),o}}class l9{constructor(t,e,o){this.name=t,this.ast=e,this._normalizer=o,this.transitionFactories=[],this.states={},e.states.forEach(a=>{this.states[a.name]=new s9(a.style,a.options&&a.options.params||{},o)}),xk(this.states,"true","1"),xk(this.states,"false","0"),e.transitions.forEach(a=>{this.transitionFactories.push(new Ik(t,a,this.states))}),this.fallbackTransition=function(r,t,e){return new Ik(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,p)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,o,a){return this.transitionFactories.find(d=>d.match(t,e,o,a))||null}matchStyles(t,e,o){return this.fallbackTransition.buildStyles(t,e,o)}}function xk(r,t,e){r.hasOwnProperty(t)?r.hasOwnProperty(e)||(r[e]=r[t]):r.hasOwnProperty(e)&&(r[t]=r[e])}const u9=new t_;class d9{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._animations={},this._playersById={},this.players=[]}register(t,e){const o=[],a=IT(this._driver,e,o);if(o.length)throw new Error(`Unable to build the animation due to the following errors: ${o.join("\n")}`);this._animations[t]=a}_buildPlayer(t,e,o){const a=t.element,c=ck(0,this._normalizer,0,t.keyframes,e,o);return this._driver.animate(a,c,t.duration,t.delay,t.easing,[],!0)}create(t,e,o={}){const a=[],c=this._animations[t];let d;const p=new Map;if(c?(d=OT(this._driver,e,c,TT,zm,{},{},o,u9,a),d.forEach(E=>{const D=go(p,E.element,{});E.postStyleProps.forEach(x=>D[x]=null)})):(a.push("The requested animation doesn't exist or has already been destroyed"),d=[]),a.length)throw new Error(`Unable to create the animation due to the following errors: ${a.join("\n")}`);p.forEach((E,D)=>{Object.keys(E).forEach(x=>{E[x]=this._driver.computeStyle(D,x,Ra)})});const v=ml(d.map(E=>{const D=p.get(E.element);return this._buildPlayer(E,{},D)}));return this._playersById[t]=v,v.onDestroy(()=>this.destroy(t)),this.players.push(v),v}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const o=this.players.indexOf(e);o>=0&&this.players.splice(o,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,o,a){const c=gT(e,"","","");return pT(this._getPlayer(t),o,c,a),()=>{}}command(t,e,o,a){if("register"==o)return void this.register(t,a[0]);if("create"==o)return void this.create(t,e,a[0]||{});const c=this._getPlayer(t);switch(o){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(t)}}}const Ak="ng-animate-queued",Ok="ng-animate-disabled",kk=".ng-animate-disabled",g9=[],Nk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},m9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},No="__ng_removed";class LT{constructor(t,e=""){this.namespaceId=e;const o=t&&t.hasOwnProperty("value");if(this.value=null!=(r=o?t.value:t)?r:null,o){const c=ud(t);delete c.value,this.options=c}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const o=this.options.params;Object.keys(e).forEach(a=>{null==o[a]&&(o[a]=e[a])})}}}const wp="void",FT=new LT(wp);class _9{constructor(t,e,o){this.id=t,this.hostElement=e,this._engine=o,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Po(e,this._hostClassName)}listen(t,e,o,a){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${o}" because the animation trigger "${e}" doesn't exist!`);if(null==o||0==o.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=o)&&"done"!=r)throw new Error(`The provided animation trigger event "${o}" for the animation trigger "${e}" is not supported!`);var r;const c=go(this._elementListeners,t,[]),d={name:e,phase:o,callback:a};c.push(d);const p=go(this._engine.statesByElement,t,{});return p.hasOwnProperty(e)||(Po(t,Ym),Po(t,Ym+"-"+e),p[e]=FT),()=>{this._engine.afterFlush(()=>{const f=c.indexOf(d);f>=0&&c.splice(f,1),this._triggers[e]||delete p[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,o,a=!0){const c=this._getTrigger(e),d=new BT(this.id,e,t);let p=this._engine.statesByElement.get(t);p||(Po(t,Ym),Po(t,Ym+"-"+e),this._engine.statesByElement.set(t,p={}));let f=p[e];const v=new LT(o,this.id);if(!(o&&o.hasOwnProperty("value"))&&f&&v.absorbOptions(f.options),p[e]=v,f||(f=FT),v.value!==wp&&f.value===v.value){if(!function(r,t){const e=Object.keys(r),o=Object.keys(t);if(e.length!=o.length)return!1;for(let a=0;a<e.length;a++){const c=e[a];if(!t.hasOwnProperty(c)||r[c]!==t[c])return!1}return!0}(f.params,v.params)){const Z=[],z=c.matchStyles(f.value,f.params,Z),de=c.matchStyles(v.value,v.params,Z);Z.length?this._engine.reportError(Z):this._engine.afterFlush(()=>{vc(t,z),js(t,de)})}return}const x=go(this._engine.playersByElement,t,[]);x.forEach(Z=>{Z.namespaceId==this.id&&Z.triggerName==e&&Z.queued&&Z.destroy()});let N=c.matchTransition(f.value,v.value,t,v.params),B=!1;if(!N){if(!a)return;N=c.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:N,fromState:f,toState:v,player:d,isFallbackTransition:B}),B||(Po(t,Ak),d.onStart(()=>{dd(t,Ak)})),d.onDone(()=>{let Z=this.players.indexOf(d);Z>=0&&this.players.splice(Z,1);const z=this._engine.playersByElement.get(t);if(z){let de=z.indexOf(d);de>=0&&z.splice(de,1)}}),this.players.push(d),x.push(d),d}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,o)=>{delete e[t]}),this._elementListeners.forEach((e,o)=>{this._elementListeners.set(o,e.filter(a=>a.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(o=>o.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const o=this._engine.driver.query(t,Xm,!0);o.forEach(a=>{if(a[No])return;const c=this._engine.fetchNamespacesByElement(a);c.size?c.forEach(d=>d.triggerLeaveAnimation(a,e,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>o.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(t,e,o,a){const c=this._engine.statesByElement.get(t);if(c){const d=[];if(Object.keys(c).forEach(p=>{if(this._triggers[p]){const f=this.trigger(t,p,wp,a);f&&d.push(f)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),o&&ml(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),o=this._engine.statesByElement.get(t);if(e&&o){const a=new Set;e.forEach(c=>{const d=c.name;if(a.has(d))return;a.add(d);const f=this._triggers[d].fallbackTransition,v=o[d]||FT,E=new LT(wp),D=new BT(this.id,d,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:d,transition:f,fromState:v,toState:E,player:D,isFallbackTransition:!0})})}}removeNode(t,e){const o=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let a=!1;if(o.totalAnimations){const c=o.players.length?o.playersByQueriedElement.get(t):[];if(c&&c.length)a=!0;else{let d=t;for(;d=d.parentNode;)if(o.statesByElement.get(d)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(t),a)o.markElementAsRemoved(this.id,t,!1,e);else{const c=t[No];(!c||c===Nk)&&(o.afterFlush(()=>this.clearElementCache(t)),o.destroyInnerAnimations(t),o._onRemovalComplete(t,e))}}insertNode(t,e){Po(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(o=>{const a=o.player;if(a.destroyed)return;const c=o.element,d=this._elementListeners.get(c);d&&d.forEach(p=>{if(p.name==o.triggerName){const f=gT(c,o.triggerName,o.fromState.value,o.toState.value);f._data=t,pT(o.player,p.phase,f,p.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):e.push(o)}),this._queue=[],e.sort((o,a)=>{const c=o.transition.ast.depCount,d=a.transition.ast.depCount;return 0==c||0==d?c-d:this._engine.driver.containsElement(o.element,a.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(o=>o.element===t)||e,e}}class v9{constructor(t,e,o){this.bodyNode=t,this.driver=e,this._normalizer=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,c)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(o=>{o.queued&&t.push(o)})}),t}createNamespace(t,e){const o=new _9(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(o,e):(this.newHostElements.set(e,o),this.collectEnterElement(e)),this._namespaceLookup[t]=o}_balanceNamespaceList(t,e){const o=this._namespaceList.length-1;if(o>=0){let a=!1;for(let c=o;c>=0;c--)if(this.driver.containsElement(this._namespaceList[c].hostElement,e)){this._namespaceList.splice(c+1,0,t),a=!0;break}a||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let o=this._namespaceLookup[t];return o||(o=this.createNamespace(t,e)),o}registerTrigger(t,e,o){let a=this._namespaceLookup[t];a&&a.register(e,o)&&this.totalAnimations++}destroy(t,e){if(!t)return;const o=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(o.hostElement),delete this._namespaceLookup[t];const a=this._namespaceList.indexOf(o);a>=0&&this._namespaceList.splice(a,1)}),this.afterFlushAnimationsDone(()=>o.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,o=this.statesByElement.get(t);if(o){const a=Object.keys(o);for(let c=0;c<a.length;c++){const d=o[a[c]].namespaceId;if(d){const p=this._fetchNamespace(d);p&&e.add(p)}}}return e}trigger(t,e,o,a){if(r_(e)){const c=this._fetchNamespace(t);if(c)return c.trigger(e,o,a),!0}return!1}insertNode(t,e,o,a){if(!r_(e))return;const c=e[No];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(t){const d=this._fetchNamespace(t);d&&d.insertNode(e,o)}a&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Po(t,Ok)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),dd(t,Ok))}removeNode(t,e,o,a){if(r_(e)){const c=t?this._fetchNamespace(t):null;if(c?c.removeNode(e,a):this.markElementAsRemoved(t,e,!1,a),o){const d=this.namespacesByHostElement.get(e);d&&d.id!==t&&d.removeNode(e,a)}}else this._onRemovalComplete(e,a)}markElementAsRemoved(t,e,o,a){this.collectedLeaveElements.push(e),e[No]={namespaceId:t,setForRemoval:a,hasAnimation:o,removedBeforeQueried:!1}}listen(t,e,o,a,c){return r_(e)?this._fetchNamespace(t).listen(e,o,a,c):()=>{}}_buildInstruction(t,e,o,a,c){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,o,a,t.fromState.options,t.toState.options,e,c)}destroyInnerAnimations(t){let e=this.driver.query(t,Xm,!0);e.forEach(o=>this.destroyActiveAnimationsForElement(o)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,wT,!0),e.forEach(o=>this.finishActiveQueriedAnimationOnElement(o)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(o=>{o.queued?o.markedForDestroy=!0:o.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(o=>o.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ml(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[No];if(e&&e.setForRemoval){if(t[No]=Nk,e.namespaceId){this.destroyInnerAnimations(t);const o=this._fetchNamespace(e.namespaceId);o&&o.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,kk)&&this.markElementAsDisabled(t,!1),this.driver.query(t,kk,!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((o,a)=>this._balanceNamespaceList(o,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let o=0;o<this.collectedEnterElements.length;o++)Po(this.collectedEnterElements[o],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const o=[];try{e=this._flushAnimations(o,t)}finally{for(let a=0;a<o.length;a++)o[a]()}}else for(let o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(o=>o()),this._flushFns=[],this._whenQuietFns.length){const o=this._whenQuietFns;this._whenQuietFns=[],e.length?ml(e).onDone(()=>{o.forEach(a=>a())}):o.forEach(a=>a())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const o=new t_,a=[],c=new Map,d=[],p=new Map,f=new Map,v=new Map,E=new Set;this.disabledNodes.forEach(Xe=>{E.add(Xe);const tt=this.driver.query(Xe,".ng-animate-queued",!0);for(let rt=0;rt<tt.length;rt++)E.add(tt[rt])});const D=this.bodyNode,x=Array.from(this.statesByElement.keys()),N=Fk(x,this.collectedEnterElements),B=new Map;let Z=0;N.forEach((Xe,tt)=>{const rt=TT+Z++;B.set(tt,rt),Xe.forEach(wt=>Po(wt,rt))});const z=[],de=new Set,he=new Set;for(let Xe=0;Xe<this.collectedLeaveElements.length;Xe++){const tt=this.collectedLeaveElements[Xe],rt=tt[No];rt&&rt.setForRemoval&&(z.push(tt),de.add(tt),rt.hasAnimation?this.driver.query(tt,".ng-star-inserted",!0).forEach(wt=>de.add(wt)):he.add(tt))}const Le=new Map,je=Fk(x,Array.from(de));je.forEach((Xe,tt)=>{const rt=zm+Z++;Le.set(tt,rt),Xe.forEach(wt=>Po(wt,rt))}),t.push(()=>{N.forEach((Xe,tt)=>{const rt=B.get(tt);Xe.forEach(wt=>dd(wt,rt))}),je.forEach((Xe,tt)=>{const rt=Le.get(tt);Xe.forEach(wt=>dd(wt,rt))}),z.forEach(Xe=>{this.processLeaveNode(Xe)})});const Et=[],si=[];for(let Xe=this._namespaceList.length-1;Xe>=0;Xe--)this._namespaceList[Xe].drainQueuedTransitions(e).forEach(rt=>{const wt=rt.player,qn=rt.element;if(Et.push(wt),this.collectedEnterElements.length){const fr=qn[No];if(fr&&fr.setForMove)return void wt.destroy()}const Fe=!D||!this.driver.containsElement(D,qn),ft=Le.get(qn),zi=B.get(qn),Ci=this._buildInstruction(rt,o,zi,ft,Fe);if(Ci.errors&&Ci.errors.length)si.push(Ci);else{if(Fe)return wt.onStart(()=>vc(qn,Ci.fromStyles)),wt.onDestroy(()=>js(qn,Ci.toStyles)),void a.push(wt);if(rt.isFallbackTransition)return wt.onStart(()=>vc(qn,Ci.fromStyles)),wt.onDestroy(()=>js(qn,Ci.toStyles)),void a.push(wt);Ci.timelines.forEach(fr=>fr.stretchStartingKeyframe=!0),o.append(qn,Ci.timelines),d.push({instruction:Ci,player:wt,element:qn}),Ci.queriedElements.forEach(fr=>go(p,fr,[]).push(wt)),Ci.preStyleProps.forEach((fr,Ys)=>{const Yi=Object.keys(fr);if(Yi.length){let jn=f.get(Ys);jn||f.set(Ys,jn=new Set),Yi.forEach(Pp=>jn.add(Pp))}}),Ci.postStyleProps.forEach((fr,Ys)=>{const Yi=Object.keys(fr);let jn=v.get(Ys);jn||v.set(Ys,jn=new Set),Yi.forEach(Pp=>jn.add(Pp))})}});if(si.length){const Xe=[];si.forEach(tt=>{Xe.push(`@${tt.triggerName} has failed due to:\n`),tt.errors.forEach(rt=>Xe.push(`- ${rt}\n`))}),Et.forEach(tt=>tt.destroy()),this.reportError(Xe)}const mi=new Map,Qi=new Map;d.forEach(Xe=>{const tt=Xe.element;o.has(tt)&&(Qi.set(tt,tt),this._beforeAnimationBuild(Xe.player.namespaceId,Xe.instruction,mi))}),a.forEach(Xe=>{const tt=Xe.element;this._getPreviousPlayers(tt,!1,Xe.namespaceId,Xe.triggerName,null).forEach(wt=>{go(mi,tt,[]).push(wt),wt.destroy()})});const dn=z.filter(Xe=>Vk(Xe,f,v)),Ji=new Map;Lk(Ji,this.driver,he,v,Ra).forEach(Xe=>{Vk(Xe,f,v)&&dn.push(Xe)});const Tr=new Map;N.forEach((Xe,tt)=>{Lk(Tr,this.driver,new Set(Xe),f,"!")}),dn.forEach(Xe=>{const tt=Ji.get(Xe),rt=Tr.get(Xe);Ji.set(Xe,Qe(Qe({},tt),rt))});const Zn=[],dt=[],Bt={};d.forEach(Xe=>{const{element:tt,player:rt,instruction:wt}=Xe;if(o.has(tt)){if(E.has(tt))return rt.onDestroy(()=>js(tt,wt.toStyles)),rt.disabled=!0,rt.overrideTotalTime(wt.totalTime),void a.push(rt);let qn=Bt;if(Qi.size>1){let ft=tt;const zi=[];for(;ft=ft.parentNode;){const Ci=Qi.get(ft);if(Ci){qn=Ci;break}zi.push(ft)}zi.forEach(Ci=>Qi.set(Ci,qn))}const Fe=this._buildAnimation(rt.namespaceId,wt,mi,c,Tr,Ji);if(rt.setRealPlayer(Fe),qn===Bt)Zn.push(rt);else{const ft=this.playersByElement.get(qn);ft&&ft.length&&(rt.parentPlayer=ml(ft)),a.push(rt)}}else vc(tt,wt.fromStyles),rt.onDestroy(()=>js(tt,wt.toStyles)),dt.push(rt),E.has(tt)&&a.push(rt)}),dt.forEach(Xe=>{const tt=c.get(Xe.element);if(tt&&tt.length){const rt=ml(tt);Xe.setRealPlayer(rt)}}),a.forEach(Xe=>{Xe.parentPlayer?Xe.syncPlayerEvents(Xe.parentPlayer):Xe.destroy()});for(let Xe=0;Xe<z.length;Xe++){const tt=z[Xe],rt=tt[No];if(dd(tt,zm),rt&&rt.hasAnimation)continue;let wt=[];if(p.size){let Fe=p.get(tt);Fe&&Fe.length&&wt.push(...Fe);let ft=this.driver.query(tt,wT,!0);for(let zi=0;zi<ft.length;zi++){let Ci=p.get(ft[zi]);Ci&&Ci.length&&wt.push(...Ci)}}const qn=wt.filter(Fe=>!Fe.destroyed);qn.length?C9(this,tt,qn):this.processLeaveNode(tt)}return z.length=0,Zn.forEach(Xe=>{this.players.push(Xe),Xe.onDone(()=>{Xe.destroy();const tt=this.players.indexOf(Xe);this.players.splice(tt,1)}),Xe.play()}),Zn}elementContainsData(t,e){let o=!1;const a=e[No];return a&&a.setForRemoval&&(o=!0),this.playersByElement.has(e)&&(o=!0),this.playersByQueriedElement.has(e)&&(o=!0),this.statesByElement.has(e)&&(o=!0),this._fetchNamespace(t).elementContainsData(e)||o}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,o,a,c){let d=[];if(e){const p=this.playersByQueriedElement.get(t);p&&(d=p)}else{const p=this.playersByElement.get(t);if(p){const f=!c||c==wp;p.forEach(v=>{v.queued||!f&&v.triggerName!=a||d.push(v)})}}return(o||a)&&(d=d.filter(p=>!(o&&o!=p.namespaceId||a&&a!=p.triggerName))),d}_beforeAnimationBuild(t,e,o){const c=e.element,d=e.isRemovalTransition?void 0:t,p=e.isRemovalTransition?void 0:e.triggerName;for(const f of e.timelines){const v=f.element,E=v!==c,D=go(o,v,[]);this._getPreviousPlayers(v,E,d,p,e.toState).forEach(N=>{const B=N.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),N.destroy(),D.push(N)})}vc(c,e.fromStyles)}_buildAnimation(t,e,o,a,c,d){const p=e.triggerName,f=e.element,v=[],E=new Set,D=new Set,x=e.timelines.map(B=>{const Z=B.element;E.add(Z);const z=Z[No];if(z&&z.removedBeforeQueried)return new cd(B.duration,B.delay);const de=Z!==f,he=function(r){const t=[];return Bk(r,t),t}((o.get(Z)||g9).map(mi=>mi.getRealPlayer())).filter(mi=>!!mi.element&&mi.element===Z),Le=c.get(Z),je=d.get(Z),Et=ck(0,this._normalizer,0,B.keyframes,Le,je),si=this._buildPlayer(B,Et,he);if(B.subTimeline&&a&&D.add(Z),de){const mi=new BT(t,p,Z);mi.setRealPlayer(si),v.push(mi)}return si});v.forEach(B=>{go(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function(r,t,e){let o;if(r instanceof Map){if(o=r.get(t),o){if(o.length){const a=o.indexOf(e);o.splice(a,1)}0==o.length&&r.delete(t)}}else if(o=r[t],o){if(o.length){const a=o.indexOf(e);o.splice(a,1)}0==o.length&&delete r[t]}return o}(this.playersByQueriedElement,B.element,B))}),E.forEach(B=>Po(B,_k));const N=ml(x);return N.onDestroy(()=>{E.forEach(B=>dd(B,_k)),js(f,e.toStyles)}),D.forEach(B=>{go(a,B,[]).push(N)}),N}_buildPlayer(t,e,o){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,o):new cd(t.duration,t.delay)}}class BT{constructor(t,e,o){this.namespaceId=t,this.triggerName=e,this.element=o,this._player=new cd,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(o=>pT(t,e,void 0,o))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){go(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function r_(r){return r&&1===r.nodeType}function Pk(r,t){const e=r.style.display;return r.style.display=null!=t?t:"none",e}function Lk(r,t,e,o,a){const c=[];e.forEach(f=>c.push(Pk(f)));const d=[];o.forEach((f,v)=>{const E={};f.forEach(D=>{const x=E[D]=t.computeStyle(v,D,a);(!x||0==x.length)&&(v[No]=m9,d.push(v))}),r.set(v,E)});let p=0;return e.forEach(f=>Pk(f,c[p++])),d}function Fk(r,t){const e=new Map;if(r.forEach(p=>e.set(p,[])),0==t.length)return e;const a=new Set(t),c=new Map;function d(p){if(!p)return 1;let f=c.get(p);if(f)return f;const v=p.parentNode;return f=e.has(v)?v:a.has(v)?1:d(v),c.set(p,f),f}return t.forEach(p=>{const f=d(p);1!==f&&e.get(f).push(p)}),e}const o_="$$classes";function Po(r,t){if(r.classList)r.classList.add(t);else{let e=r[o_];e||(e=r[o_]={}),e[t]=!0}}function dd(r,t){if(r.classList)r.classList.remove(t);else{let e=r[o_];e&&delete e[t]}}function C9(r,t,e){ml(e).onDone(()=>r.processLeaveNode(t))}function Bk(r,t){for(let e=0;e<r.length;e++){const o=r[e];o instanceof ak?Bk(o.players,t):t.push(o)}}function Vk(r,t,e){const o=e.get(r);if(!o)return!1;let a=t.get(r);return a?o.forEach(c=>a.add(c)):t.set(r,o),e.delete(r),!0}class s_{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._triggerCache={},this.onRemovalComplete=(a,c)=>{},this._transitionEngine=new v9(t,e,o),this._timelineEngine=new d9(t,e,o),this._transitionEngine.onRemovalComplete=(a,c)=>this.onRemovalComplete(a,c)}registerTrigger(t,e,o,a,c){const d=t+"-"+a;let p=this._triggerCache[d];if(!p){const f=[],v=IT(this._driver,c,f);if(f.length)throw new Error(`The animation trigger "${a}" has failed to build due to the following errors:\n - ${f.join("\n - ")}`);p=function(r,t,e){return new l9(r,t,e)}(a,v,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(e,a,p)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,o,a){this._transitionEngine.insertNode(t,e,o,a)}onRemove(t,e,o,a){this._transitionEngine.removeNode(t,e,a||!1,o)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,o,a){if("@"==o.charAt(0)){const[c,d]=uk(o);this._timelineEngine.command(c,e,d,a)}else this._transitionEngine.trigger(t,e,o,a)}listen(t,e,o,a,c){if("@"==o.charAt(0)){const[d,p]=uk(o);return this._timelineEngine.listen(d,e,p,c)}return this._transitionEngine.listen(t,e,o,a,c)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Hk(r,t){let e=null,o=null;return Array.isArray(t)&&t.length?(e=VT(t[0]),t.length>1&&(o=VT(t[t.length-1]))):t&&(e=VT(t)),e||o?new S9(r,e,o):null}let S9=(()=>{class r{constructor(e,o,a){this._element=e,this._startStyles=o,this._endStyles=a,this._state=0;let c=r.initialStylesByElement.get(e);c||r.initialStylesByElement.set(e,c={}),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&js(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(js(this._element,this._initialStyles),this._endStyles&&(js(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(vc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(vc(this._element,this._endStyles),this._endStyles=null),js(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function VT(r){let t=null;const e=Object.keys(r);for(let o=0;o<e.length;o++){const a=e[o];D9(a)&&(t=t||{},t[a]=r[a])}return t}function D9(r){return"display"===r||"position"===r}const Uk="animation",Gk="animationend";class I9{constructor(t,e,o,a,c,d,p){this._element=t,this._name=e,this._duration=o,this._delay=a,this._easing=c,this._fillMode=d,this._onDoneFn=p,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=f=>this._handleCallback(f)}apply(){(function(r,t){const e=UT(r,"").trim();let o=0;e.length&&(function(r,t){let e=0;for(let o=0;o<r.length;o++)","===r.charAt(o)&&e++;return e}(e)+1,t=`${e}, ${t}`),a_(r,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),zk(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){jk(this._element,this._name,"paused")}resume(){jk(this._element,this._name,"running")}setPosition(t){const e=Wk(this._element,this._name);this._position=t*this._duration,a_(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),o=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&o>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),zk(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(r,t){const o=UT(r,"").split(","),a=HT(o,t);a>=0&&(o.splice(a,1),a_(r,"",o.join(",")))}(this._element,this._name))}}function jk(r,t,e){a_(r,"PlayState",e,Wk(r,t))}function Wk(r,t){const e=UT(r,"");return e.indexOf(",")>0?HT(e.split(","),t):HT([e],t)}function HT(r,t){for(let e=0;e<r.length;e++)if(r[e].indexOf(t)>=0)return e;return-1}function zk(r,t,e){e?r.removeEventListener(Gk,t):r.addEventListener(Gk,t)}function a_(r,t,e,o){const a=Uk+t;if(null!=o){const c=r.style[a];if(c.length){const d=c.split(",");d[o]=e,e=d.join(",")}}r.style[a]=e}function UT(r,t){return r.style[Uk+t]||""}class Yk{constructor(t,e,o,a,c,d,p,f){this.element=t,this.keyframes=e,this.animationName=o,this._duration=a,this._delay=c,this._finalStyles=p,this._specialStyles=f,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=d||"linear",this.totalTime=a+c,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new I9(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(o=>{"offset"!=o&&(t[o]=e?this._finalStyles[o]:RT(this.element,o))})}this.currentSnapshot=t}}class P9 extends cd{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=fk(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Kk{constructor(){this._count=0}validateStyleProperty(t){return vT(t)}matchesElement(t,e){return bT(t,e)}containsElement(t,e){return yT(t,e)}query(t,e,o){return ET(t,e,o)}computeStyle(t,e,o){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,o){o=o.map(p=>fk(p));let a=`@keyframes ${e} {\n`,c="";o.forEach(p=>{c=" ";const f=parseFloat(p.offset);a+=`${c}${100*f}% {\n`,c+=" ",Object.keys(p).forEach(v=>{const E=p[v];switch(v){case"offset":return;case"easing":return void(E&&(a+=`${c}animation-timing-function: ${E};\n`));default:return void(a+=`${c}${v}: ${E};\n`)}}),a+=`${c}}\n`}),a+="}\n";const d=document.createElement("style");return d.textContent=a,d}animate(t,e,o,a,c,d=[],p){const f=d.filter(z=>z instanceof Yk),v={};Ck(o,a)&&f.forEach(z=>{let de=z.currentSnapshot;Object.keys(de).forEach(he=>v[he]=de[he])});const E=function(r){let t={};return r&&(Array.isArray(r)?r:[r]).forEach(o=>{Object.keys(o).forEach(a=>{"offset"==a||"easing"==a||(t[a]=o[a])})}),t}(e=Tk(t,e,v));if(0==o)return new P9(t,E);const D="gen_css_kf_"+this._count++,x=this.buildKeyframeElement(t,D,e);(function(r){var e;const t=null==(e=r.getRootNode)?void 0:e.call(r);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(t).appendChild(x);const B=Hk(t,e),Z=new Yk(t,e,D,o,a,c,E,B);return Z.onDestroy(()=>{var r;(r=x).parentNode.removeChild(r)}),Z}}class Jk{constructor(t,e,o,a){this.element=t,this.keyframes=e,this.options=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=o.duration,this._delay=o.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,o){return t.animate(e,o)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:RT(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class H9{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Qk().toString()),this._cssKeyframesDriver=new Kk}validateStyleProperty(t){return vT(t)}matchesElement(t,e){return bT(t,e)}containsElement(t,e){return yT(t,e)}query(t,e,o){return ET(t,e,o)}computeStyle(t,e,o){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,o,a,c,d=[],p){if(!p&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,o,a,c,d);const E={duration:o,delay:a,fill:0==a?"both":"forwards"};c&&(E.easing=c);const D={},x=d.filter(B=>B instanceof Jk);Ck(o,a)&&x.forEach(B=>{let Z=B.currentSnapshot;Object.keys(Z).forEach(z=>D[z]=Z[z])});const N=Hk(t,e=Tk(t,e=e.map(B=>_l(B,!1)),D));return new Jk(t,e,E,N)}}function Qk(){return lk()&&Element.prototype.animate||{}}let G9=(()=>{class r extends ik{constructor(e,o){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(o.body,{id:"0",encapsulation:mr.None,styles:[],data:{animation:[]}})}build(e){const o=this._nextAnimationId.toString();this._nextAnimationId++;const a=Array.isArray(e)?nk(e):e;return Zk(this._renderer,null,o,"register",[a]),new j9(o,this._renderer)}}return r.\u0275fac=function(e){return new(e||r)(we(ql),we(Lt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();class j9 extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new W9(this._id,t,e||{},this._renderer)}}class W9{constructor(t,e,o,a){this.id=t,this.element=e,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",o)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Zk(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!=(e=null==(t=this._renderer.engine.players[+this.id])?void 0:t.getPosition())?e:0}}function Zk(r,t,e,o,a){return r.setProperty(t,`@@${e}:${o}`,a)}const qk="@.disabled";let z9=(()=>{class r{constructor(e,o,a){this.delegate=e,this.engine=o,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),o.onRemovalComplete=(c,d)=>{d&&d.parentNode(c)&&d.removeChild(c.parentNode,c)}}createRenderer(e,o){const c=this.delegate.createRenderer(e,o);if(!(e&&o&&o.data&&o.data.animation)){let E=this._rendererCache.get(c);return E||(E=new e1("",c,this.engine),this._rendererCache.set(c,E)),E}const d=o.id,p=o.id+"-"+this._currentId;this._currentId++,this.engine.register(p,e);const f=E=>{Array.isArray(E)?E.forEach(f):this.engine.registerTrigger(d,p,e,E.name,E)};return o.data.animation.forEach(f),new Y9(this,p,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,o,a){e>=0&&e<this._microtaskId?this._zone.run(()=>o(a)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[d,p]=c;d(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([o,a]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(e){return new(e||r)(we(ql),we(s_),we(Jt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();class e1{constructor(t,e,o){this.namespaceId=t,this.delegate=e,this.engine=o,this.destroyNode=this.delegate.destroyNode?a=>e.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,o,a=!0){this.delegate.insertBefore(t,e,o),this.engine.onInsert(this.namespaceId,e,t,a)}removeChild(t,e,o){this.engine.onRemove(this.namespaceId,e,this.delegate,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,a){this.delegate.setAttribute(t,e,o,a)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,a){this.delegate.setStyle(t,e,o,a)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){"@"==e.charAt(0)&&e==qk?this.disableAnimations(t,!!o):this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.delegate.listen(t,e,o)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Y9 extends e1{constructor(t,e,o,a){super(e,o,a),this.factory=t,this.namespaceId=e}setProperty(t,e,o){"@"==e.charAt(0)?"."==e.charAt(1)&&e==qk?this.disableAnimations(t,o=void 0===o||!!o):this.engine.process(this.namespaceId,t,e.substr(1),o):this.delegate.setProperty(t,e,o)}listen(t,e,o){if("@"==e.charAt(0)){const a=function(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let c=e.substr(1),d="";return"@"!=c.charAt(0)&&([c,d]=function(r){const t=r.indexOf(".");return[r.substring(0,t),r.substr(t+1)]}(c)),this.engine.listen(this.namespaceId,a,c,d,p=>{this.factory.scheduleListenerCallback(p._data||-1,o,p)})}return this.delegate.listen(t,e,o)}}let $9=(()=>{class r extends s_{constructor(e,o,a){super(e.body,o,a)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(e){return new(e||r)(we(Lt),we(CT),we(NT))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const eo=new Ae("AnimationModuleType"),t1=[{provide:ik,useClass:G9},{provide:NT,useFactory:function(){return new t9}},{provide:s_,useClass:$9},{provide:ql,useFactory:function(r,t,e){return new z9(r,t,e)},deps:[qg,s_,Jt]}],n1=[{provide:CT,useFactory:function(){return"function"==typeof Qk()?new H9:new Kk}},{provide:eo,useValue:"BrowserAnimations"},...t1],q9=[{provide:CT,useClass:gk},{provide:eo,useValue:"NoopAnimations"},...t1];let eY=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?q9:n1}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:n1,imports:[ox]}),r})();const r1=new ol("13.0.1"),iY=new Ae("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let mt=(()=>{class r{constructor(e,o,a){this._hasDoneGlobalChecks=!1,this._document=a,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=o,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!Zy()||oT())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const o=getComputedStyle(e);o&&"none"!==o.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&r1.full!==tk.full&&console.warn("The Angular Material version ("+r1.full+") does not match the Angular CDK version ("+tk.full+").\nPlease ensure the versions of these two packages exactly match.")}}return r.\u0275fac=function(e){return new(e||r)(we(ek),we(iY,8),we(Lt))},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[ld],ld]}),r})();function yc(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=xt(t)}}}function vl(r,t){return class extends r{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const o=e||this.defaultColor;o!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),o&&this._elementRef.nativeElement.classList.add(`mat-${o}`),this._color=o)}}}function ps(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=xt(t)}}}const rY=new Ae("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return Wl(va)}});class Ws{constructor(){this._localeChanges=new ve,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let o=this.isValid(t),a=this.isValid(e);return o&&a?!this.compareDate(t,e):o==a}return t==e}clampDate(t,e,o){return e&&this.compareDate(t,e)<0?e:o&&this.compareDate(t,o)>0?o:t}}const WT=new Ae("mat-date-formats"),sY=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function zT(r,t){const e=Array(r);for(let o=0;o<r;o++)e[o]=t(o);return e}let aY=(()=>{class r extends Ws{constructor(e,o){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const o=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return zT(12,a=>this._format(o,new Date(2017,a,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return zT(31,o=>this._format(e,new Date(2017,0,o+1)))}getDayOfWeekNames(e){const o=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return zT(7,a=>this._format(o,new Date(2017,0,a+1)))}getYearName(e){const o=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(o,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,o,a){let c=this._createDateWithOverflow(e,o,a);return c.getMonth(),c}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,o){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const a=new Intl.DateTimeFormat(this.locale,er(Qe({},o),{timeZone:"utc"}));return this._format(a,e)}addCalendarYears(e,o){return this.addCalendarMonths(e,12*o)}addCalendarMonths(e,o){let a=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+o,this.getDate(e));return this.getMonth(a)!=((this.getMonth(e)+o)%12+12)%12&&(a=this._createDateWithOverflow(this.getYear(a),this.getMonth(a),0)),a}addCalendarDays(e,o){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+o)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(sY.test(e)){let o=new Date(e);if(this.isValid(o))return o}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,o,a){const c=new Date;return c.setFullYear(e,o,a),c.setHours(0,0,0,0),c}_2digit(e){return("00"+e).slice(-2)}_format(e,o){const a=new Date;return a.setUTCFullYear(o.getFullYear(),o.getMonth(),o.getDate()),a.setUTCHours(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()),e.format(a)}}return r.\u0275fac=function(e){return new(e||r)(we(rY,8),we(Cr))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const lY={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let cY=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[{provide:Ws,useClass:aY}],imports:[[od]]}),r})(),uY=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[{provide:WT,useValue:lY}],imports:[[cY]]}),r})(),c_=(()=>{class r{isErrorState(e,o){return!!(e&&e.invalid&&(e.touched||o&&o.submitted))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),o1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ne({type:r,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),r})();function Sp(r,t,e){r.nativeElement.classList.toggle(t,e)}let u_=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[mt],mt]}),r})();class dY{constructor(t,e,o){this._renderer=t,this.element=e,this.config=o,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const a1={enterDuration:225,exitDuration:150},YT=fl({passive:!0}),l1=["mousedown","touchstart"],c1=["mouseup","mouseleave","touchend","touchcancel"];class u1{constructor(t,e,o,a){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,a.isBrowser&&(this._containerElement=pc(o))}fadeInRipple(t,e,o={}){const a=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=Qe(Qe({},a1),o.animation);o.centered&&(t=a.left+a.width/2,e=a.top+a.height/2);const d=o.radius||function(r,t,e){const o=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),a=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(o*o+a*a)}(t,e,a),p=t-a.left,f=e-a.top,v=c.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=p-d+"px",E.style.top=f-d+"px",E.style.height=2*d+"px",E.style.width=2*d+"px",null!=o.color&&(E.style.backgroundColor=o.color),E.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(E),window.getComputedStyle(E).getPropertyValue("opacity"),E.style.transform="scale(1)";const D=new dY(this,E,o);return D.state=0,this._activeRipples.add(D),o.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const x=D===this._mostRecentTransientRipple;D.state=1,!o.persistent&&(!x||!this._isPointerDown)&&D.fadeOut()},v),D}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const o=t.element,a=Qe(Qe({},a1),t.config.animation);o.style.transitionDuration=`${a.exitDuration}ms`,o.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,o.remove()},a.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=pc(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(l1))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(c1),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=lT(t),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!cT(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,YT)})})}_removeTriggerEvents(){this._triggerElement&&(l1.forEach(t=>{this._triggerElement.removeEventListener(t,this,YT)}),this._pointerUpEventsRegistered&&c1.forEach(t=>{this._triggerElement.removeEventListener(t,this,YT)}))}}const d1=new Ae("mat-ripple-global-options");let fs=(()=>{class r{constructor(e,o,a,c,d){this._elementRef=e,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new u1(this,o,e,a)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Qe(Qe(Qe({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,o=0,a){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,o,Qe(Qe({},this.rippleConfig),a)):this._rippleRenderer.fadeInRipple(0,0,Qe(Qe({},this.rippleConfig),e))}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(Jt),K(Cr),K(d1,8),K(eo,8))},r.\u0275dir=Ne({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,o){2&e&&Ti("mat-ripple-unbounded",o.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),r})(),gs=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[mt,od],mt]}),r})(),XT=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[mt]]}),r})(),d_=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[gs,rr,mt,XT]]}),r})();const h1=["mat-button",""],p1=["*"],EY=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],CY=vl(yc(ps(class{constructor(r){this._elementRef=r}})));let $T,KT=(()=>{class r extends CY{constructor(e,o,a){super(e),this._focusMonitor=o,this._animationMode=a,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const c of EY)this._hasHostAttributes(c)&&this._getHostElement().classList.add(c);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,o){e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(o=>this._getHostElement().hasAttribute(o))}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(ko),K(eo,8))},r.\u0275cmp=Wt({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,o){if(1&e&&Mn(fs,5),2&e){let a;Rt(a=It())&&(o.ripple=a.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,o){2&e&&(Gt("disabled",o.disabled||null),Ti("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-button-disabled",o.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[$e],attrs:h1,ngContentSelectors:p1,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,o){1&e&&(yn(),ze(0,"span",0),Li(1),Ye(),Di(2,"span",1),Di(3,"span",2)),2&e&&(zt(2),Ti("mat-button-ripple-round",o.isRoundButton||o.isIconButton),ri("matRippleDisabled",o._isRippleDisabled())("matRippleCentered",o.isIconButton)("matRippleTrigger",o._getHostElement()))},directives:[fs],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),r})(),TY=(()=>{class r extends KT{constructor(e,o,a){super(o,e,a)}_haltDisabledEvents(e){this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}}return r.\u0275fac=function(e){return new(e||r)(K(ko),K(vt),K(eo,8))},r.\u0275cmp=Wt({type:r,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(e,o){1&e&&Yt("click",function(c){return o._haltDisabledEvents(c)}),2&e&&(Gt("tabindex",o.disabled?-1:o.tabIndex||0)("disabled",o.disabled||null)("aria-disabled",o.disabled.toString()),Ti("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-button-disabled",o.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[$e],attrs:h1,ngContentSelectors:p1,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,o){1&e&&(yn(),ze(0,"span",0),Li(1),Ye(),Di(2,"span",1),Di(3,"span",2)),2&e&&(zt(2),Ti("mat-button-ripple-round",o.isRoundButton||o.isIconButton),ri("matRippleDisabled",o._isRippleDisabled())("matRippleCentered",o.isIconButton)("matRippleTrigger",o._getHostElement()))},directives:[fs],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),r})(),Ec=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[gs,mt],mt]}),r})(),wY=1;const h_={};function f1(r){return r in h_&&(delete h_[r],!0)}const SY={setImmediate(r){const t=wY++;return h_[t]=!0,$T||($T=Promise.resolve()),$T.then(()=>f1(t)&&r()),t},clearImmediate(r){f1(r)}},{setImmediate:DY,clearImmediate:MY}=SY,p_={setImmediate(...r){const{delegate:t}=p_;return((null==t?void 0:t.setImmediate)||DY)(...r)},clearImmediate(r){const{delegate:t}=p_;return((null==t?void 0:t.clearImmediate)||MY)(r)},delegate:void 0},JT=new class extends eT{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let o,a=-1;t=t||e.shift();const c=e.length;do{if(o=t.execute(t.state,t.delay))break}while(++a<c&&(t=e.shift()));if(this._active=!1,o){for(;++a<c&&(t=e.shift());)t.unsubscribe();throw o}}}(class extends ZC{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=p_.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(t,e,o);0===t.actions.length&&(p_.clearImmediate(e),t._scheduled=void 0)}});function QT(r){return Re(()=>r)}function g1(r,t){return t?e=>np(t.pipe(hn(1),De((r,t)=>{r.subscribe(new xe(t,H))})),e.pipe(g1(r))):an((e,o)=>r(e,o).pipe(hn(1),QT(e)))}function m1(r=0,t,e=BO){let o=-1;return null!=t&&(bd(t)?e=t:o=t),new ie(a=>{let c=function(r){return r instanceof Date&&!isNaN(r)}(r)?+r-e.now():r;c<0&&(c=0);let d=0;return e.schedule(function(){a.closed||(a.next(d++),0<=o?this.schedule(void 0,o):a.complete())},c)})}function ZT(r,t=tT){const e=m1(r,t);return g1(()=>e)}class qT{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class ew extends qT{constructor(t,e,o,a){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=a}}class f_ extends qT{constructor(t,e,o){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class OY extends qT{constructor(t){super(),this.element=t instanceof vt?t.nativeElement:t}}class tw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof ew?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof f_?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof OY?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class kY extends tw{constructor(t,e,o,a,c){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=a,this.attachDomPortal=d=>{const p=d.element,f=this._document.createComment("dom-portal");p.parentNode.insertBefore(f,p),this.outletElement.appendChild(p),this._attachedPortal=d,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(p,f)})},this._document=c}attachComponentPortal(t){const o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let a;return t.viewContainerRef?(a=t.viewContainerRef.createComponent(o,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>a.destroy())):(a=o.create(t.injector||this._defaultInjector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(a)),this._attachedPortal=t,a}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context);return o.rootNodes.forEach(a=>this.outletElement.appendChild(a)),o.detectChanges(),this.setDisposeFn(()=>{let a=e.indexOf(o);-1!==a&&e.remove(a)}),this._attachedPortal=t,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let _1=(()=>{class r extends tw{constructor(e,o,a){super(),this._componentFactoryResolver=e,this._viewContainerRef=o,this._isInitialized=!1,this.attached=new At,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");c.setAttachedHost(this),d.parentNode.insertBefore(p,d),this._getRootNode().appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=a}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const o=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,c=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),d=o.createComponent(c,o.length,e.injector||o.injector);return o!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=e,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(e){e.setAttachedHost(this);const o=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return r.\u0275fac=function(e){return new(e||r)(K(ma),K(Un),K(Lt))},r.\u0275dir=Ne({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[$e]}),r})(),bl=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})();const NY=["addListener","removeListener"],PY=["addEventListener","removeEventListener"],LY=["on","off"];function yl(r,t,e,o){if(y(e)&&(o=e,e=void 0),o)return yl(r,t,e).pipe(JE(o));const[a,c]=function(r){return y(r.addEventListener)&&y(r.removeEventListener)}(r)?PY.map(d=>p=>r[d](t,p,e)):function(r){return y(r.addListener)&&y(r.removeListener)}(r)?NY.map(v1(r,t)):function(r){return y(r.on)&&y(r.off)}(r)?LY.map(v1(r,t)):[];if(!a&&qt(r))return an(d=>yl(d,t,e))(et(r));if(!a)throw new TypeError("Invalid event target");return new ie(d=>{const p=(...f)=>d.next(1<f.length?f:f[0]);return a(p),()=>c(p)})}function v1(r,t){return e=>o=>r[e](t,o)}const Dp={schedule(r){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:o}=Dp;o&&(t=o.requestAnimationFrame,e=o.cancelAnimationFrame);const a=t(c=>{e=void 0,r(c)});return new l(()=>null==e?void 0:e(a))},requestAnimationFrame(...r){const{delegate:t}=Dp;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){const{delegate:t}=Dp;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...r)},delegate:void 0};new class extends eT{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let o,a=-1;t=t||e.shift();const c=e.length;do{if(o=t.execute(t.state,t.delay))break}while(++a<c&&(t=e.shift()));if(this._active=!1,o){for(;++a<c&&(t=e.shift());)t.unsubscribe();throw o}}}(class extends ZC{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=Dp.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(t,e,o);0===t.actions.length&&(Dp.cancelAnimationFrame(e),t._scheduled=void 0)}});function b1(r,t=BO){return function(r){return De((t,e)=>{let o=!1,a=null,c=null,d=!1;const p=()=>{if(null==c||c.unsubscribe(),c=null,o){o=!1;const v=a;a=null,e.next(v)}d&&e.complete()},f=()=>{c=null,d&&e.complete()};t.subscribe(new xe(e,v=>{o=!0,a=v,c||et(r()).subscribe(c=new xe(e,p,f))},()=>{d=!0,(!o||!c||c.closed)&&e.complete()}))})}(()=>m1(r,t))}let g_=(()=>{class r{constructor(e,o,a){this._ngZone=e,this._platform=o,this._scrolled=new ve,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ie(o=>{this._globalSubscription||this._addGlobalListener();const a=e>0?this._scrolled.pipe(b1(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Dt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){const a=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe(rn(c=>!c||a.indexOf(c)>-1))}getAncestorScrollContainers(e){const o=[];return this.scrollContainers.forEach((a,c)=>{this._scrollableContainsElement(c,e)&&o.push(c)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let a=pc(o),c=e.getElementRef().nativeElement;do{if(a==c)return!0}while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>yl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(e){return new(e||r)(we(Jt),we(Cr),we(Lt,8))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),m_=(()=>{class r{constructor(e,o,a,c){this.elementRef=e,this.scrollDispatcher=o,this.ngZone=a,this.dir=c,this._destroyed=new ve,this._elementScrolled=new ie(d=>this.ngZone.runOutsideAngular(()=>yl(this.elementRef.nativeElement,"scroll").pipe(Wi(this._destroyed)).subscribe(d)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const o=this.elementRef.nativeElement,a=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=a?e.end:e.start),null==e.right&&(e.right=a?e.start:e.end),null!=e.bottom&&(e.top=o.scrollHeight-o.clientHeight-e.bottom),a&&0!=Ep()?(null!=e.left&&(e.right=o.scrollWidth-o.clientWidth-e.left),2==Ep()?e.left=e.right:1==Ep()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=o.scrollWidth-o.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const o=this.elementRef.nativeElement;GO()?o.scrollTo(e):(null!=e.top&&(o.scrollTop=e.top),null!=e.left&&(o.scrollLeft=e.left))}measureScrollOffset(e){const o="left",a="right",c=this.elementRef.nativeElement;if("top"==e)return c.scrollTop;if("bottom"==e)return c.scrollHeight-c.clientHeight-c.scrollTop;const d=this.dir&&"rtl"==this.dir.value;return"start"==e?e=d?a:o:"end"==e&&(e=d?o:a),d&&2==Ep()?e==o?c.scrollWidth-c.clientWidth-c.scrollLeft:c.scrollLeft:d&&1==Ep()?e==o?c.scrollLeft+c.scrollWidth-c.clientWidth:-c.scrollLeft:e==o?c.scrollLeft:c.scrollWidth-c.clientWidth-c.scrollLeft}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(g_),K(Jt),K(hs,8))},r.\u0275dir=Ne({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),r})(),Mp=(()=>{class r{constructor(e,o,a){this._platform=e,this._change=new ve,this._changeListener=c=>{this._change.next(c)},this._document=a,o.runOutsideAngular(()=>{if(e.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:o,height:a}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+a,right:e.left+o,height:a,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,o=this._getWindow(),a=e.documentElement,c=a.getBoundingClientRect();return{top:-c.top||e.body.scrollTop||o.scrollY||a.scrollTop||0,left:-c.left||e.body.scrollLeft||o.scrollX||a.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(b1(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(e){return new(e||r)(we(Cr),we(Jt),we(Lt,8))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ia=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})(),iw=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[ld,od,Ia],ld,Ia]}),r})();const y1=GO();class YY{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Qn(-this._previousScrollPosition.left),t.style.top=Qn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,o=t.style,a=this._document.body.style,c=o.scrollBehavior||"",d=a.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),y1&&(o.scrollBehavior=a.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),y1&&(o.scrollBehavior=c,a.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}}class XY{constructor(t,e,o,a){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=o,this._config=a,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class E1{enable(){}disable(){}attach(){}}function nw(r,t){return t.some(e=>r.bottom<e.top||r.top>e.bottom||r.right<e.left||r.left>e.right)}function C1(r,t){return t.some(e=>r.top<e.top||r.bottom>e.bottom||r.left<e.left||r.right>e.right)}class KY{constructor(t,e,o,a){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=o,this._config=a,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:a}=this._viewportRuler.getViewportSize();nw(e,[{width:o,height:a,bottom:a,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let $Y=(()=>{class r{constructor(e,o,a,c){this._scrollDispatcher=e,this._viewportRuler=o,this._ngZone=a,this.noop=()=>new E1,this.close=d=>new XY(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new YY(this._viewportRuler,this._document),this.reposition=d=>new KY(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=c}}return r.\u0275fac=function(e){return new(e||r)(we(g_),we(Mp),we(Jt),we(Lt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class __{constructor(t){if(this.scrollStrategy=new E1,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const o of e)void 0!==t[o]&&(this[o]=t[o])}}}class JY{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let T1=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(e){return new(e||r)(we(Lt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),QY=(()=>{class r extends T1{constructor(e){super(e),this._keydownListener=o=>{const a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){a[c]._keydownEvents.next(o);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(e){return new(e||r)(we(Lt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ZY=(()=>{class r extends T1{constructor(e,o){super(e),this._platform=o,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=gl(a)},this._clickListener=a=>{const c=gl(a),d="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let f=p.length-1;f>-1;f--){const v=p[f];if(!(v._outsidePointerEvents.observers.length<1)&&v.hasAttached()){if(v.overlayElement.contains(c)||v.overlayElement.contains(d))break;v._outsidePointerEvents.next(a)}}}}add(e){if(super.add(e),!this._isAttached){const o=this._document.body;o.addEventListener("pointerdown",this._pointerDownListener,!0),o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return r.\u0275fac=function(e){return new(e||r)(we(Lt),we(Cr))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),rw=(()=>{class r{constructor(e,o){this._platform=o,this._document=e}ngOnDestroy(){var e;null==(e=this._containerElement)||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||oT()){const a=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let c=0;c<a.length;c++)a[c].remove()}const o=this._document.createElement("div");o.classList.add(e),oT()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}}return r.\u0275fac=function(e){return new(e||r)(we(Lt),we(Cr))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class qY{constructor(t,e,o,a,c,d,p,f,v){this._portalOutlet=t,this._host=e,this._pane=o,this._config=a,this._ngZone=c,this._keyboardDispatcher=d,this._document=p,this._location=f,this._outsideClickDispatcher=v,this._backdropElement=null,this._backdropClick=new ve,this._attachments=new ve,this._detachments=new ve,this._locationChanges=l.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._keydownEvents=new ve,this._outsidePointerEvents=new ve,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(hn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(e=this._host)||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Qe(Qe({},this._config),t),this._updateElementSize()}setDirection(t){this._config=er(Qe({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Qn(this._config.width),t.height=Qn(this._config.height),t.minWidth=Qn(this._config.minWidth),t.minHeight=Qn(this._config.minHeight),t.maxWidth=Qn(this._config.maxWidth),t.maxHeight=Qn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const o=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",o),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",o)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(o,500))}_toggleClasses(t,e,o){const a=Um(e||[]).filter(c=>!!c);a.length&&(o?t.classList.add(...a):t.classList.remove(...a))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Wi(gr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.remove(),this._backdropElement===t&&(this._backdropElement=null))}}const w1="cdk-overlay-connected-position-bounding-box",eX=/([A-Za-z%]+)$/;class tX{constructor(t,e,o,a,c){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ve,this._resizeSubscription=l.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(w1),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,o=this._viewportRect,a=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,d),f=this._getOverlayPoint(p,e,d),v=this._getOverlayFit(f,e,o,d);if(v.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(v,f,o)?a.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<v.visibleArea)&&(c={overlayFit:v,overlayPoint:f,originPoint:p,position:d,overlayRect:e})}if(a.length){let d=null,p=-1;for(const f of a){const v=f.boundingBoxRect.width*f.boundingBoxRect.height*(f.position.weight||1);v>p&&(p=v,d=f)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Cc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(w1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let o,a;if("center"==e.originX)o=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;o="start"==e.originX?c:d}return a="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:o,y:a}}_getOverlayPoint(t,e,o){let a,c;return a="center"==o.overlayX?-e.width/2:"start"===o.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,c="center"==o.overlayY?-e.height/2:"top"==o.overlayY?0:-e.height,{x:t.x+a,y:t.y+c}}_getOverlayFit(t,e,o,a){const c=D1(e);let{x:d,y:p}=t,f=this._getOffset(a,"x"),v=this._getOffset(a,"y");f&&(d+=f),v&&(p+=v);let x=0-p,N=p+c.height-o.height,B=this._subtractOverflows(c.width,0-d,d+c.width-o.width),Z=this._subtractOverflows(c.height,x,N),z=B*Z;return{visibleArea:z,isCompletelyWithinViewport:c.width*c.height===z,fitsInViewportVertically:Z===c.height,fitsInViewportHorizontally:B==c.width}}_canFitWithFlexibleDimensions(t,e,o){if(this._hasFlexibleDimensions){const a=o.bottom-e.y,c=o.right-e.x,d=S1(this._overlayRef.getConfig().minHeight),p=S1(this._overlayRef.getConfig().minWidth),v=t.fitsInViewportHorizontally||null!=p&&p<=c;return(t.fitsInViewportVertically||null!=d&&d<=a)&&v}return!1}_pushOverlayOnScreen(t,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const a=D1(e),c=this._viewportRect,d=Math.max(t.x+a.width-c.width,0),p=Math.max(t.y+a.height-c.height,0),f=Math.max(c.top-o.top-t.y,0),v=Math.max(c.left-o.left-t.x,0);let E=0,D=0;return E=a.width<=c.width?v||-d:t.x<this._viewportMargin?c.left-o.left-t.x:0,D=a.height<=c.height?f||-p:t.y<this._viewportMargin?c.top-o.top-t.y:0,this._previousPushAmount={x:E,y:D},{x:t.x+E,y:t.y+D}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const o=this._getScrollVisibility(),a=new JY(t,o);this._positionChanges.next(a)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,a=t.overlayY;o="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let c=0;c<e.length;c++)e[c].style.transformOrigin=`${o} ${a}`}_calculateBoundingBoxRect(t,e){const o=this._viewportRect,a=this._isRtl();let c,d,p,E,D,x;if("top"===e.overlayY)d=t.y,c=o.height-d+this._viewportMargin;else if("bottom"===e.overlayY)p=o.height-t.y+2*this._viewportMargin,c=o.height-p+this._viewportMargin;else{const N=Math.min(o.bottom-t.y+o.top,t.y),B=this._lastBoundingBoxSize.height;c=2*N,d=t.y-N,c>B&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.y-B/2)}if("end"===e.overlayX&&!a||"start"===e.overlayX&&a)x=o.width-t.x+this._viewportMargin,E=t.x-this._viewportMargin;else if("start"===e.overlayX&&!a||"end"===e.overlayX&&a)D=t.x,E=o.right-t.x;else{const N=Math.min(o.right-t.x+o.left,t.x),B=this._lastBoundingBoxSize.width;E=2*N,D=t.x-N,E>B&&!this._isInitialRender&&!this._growAfterOpen&&(D=t.x-B/2)}return{top:d,left:D,bottom:p,right:x,width:E,height:c}}_setBoundingBoxStyles(t,e){const o=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const a={};if(this._hasExactPosition())a.top=a.left="0",a.bottom=a.right=a.maxHeight=a.maxWidth="",a.width=a.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;a.height=Qn(o.height),a.top=Qn(o.top),a.bottom=Qn(o.bottom),a.width=Qn(o.width),a.left=Qn(o.left),a.right=Qn(o.right),a.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",a.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",c&&(a.maxHeight=Qn(c)),d&&(a.maxWidth=Qn(d))}this._lastBoundingBoxSize=o,Cc(this._boundingBox.style,a)}_resetBoundingBoxStyles(){Cc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Cc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const o={},a=this._hasExactPosition(),c=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(a){const E=this._viewportRuler.getViewportScrollPosition();Cc(o,this._getExactOverlayY(e,t,E)),Cc(o,this._getExactOverlayX(e,t,E))}else o.position="static";let p="",f=this._getOffset(e,"x"),v=this._getOffset(e,"y");f&&(p+=`translateX(${f}px) `),v&&(p+=`translateY(${v}px)`),o.transform=p.trim(),d.maxHeight&&(a?o.maxHeight=Qn(d.maxHeight):c&&(o.maxHeight="")),d.maxWidth&&(a?o.maxWidth=Qn(d.maxWidth):c&&(o.maxWidth="")),Cc(this._pane.style,o)}_getExactOverlayY(t,e,o){let a={top:"",bottom:""},c=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,o));let d=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return c.y-=d,"bottom"===t.overlayY?a.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":a.top=Qn(c.y),a}_getExactOverlayX(t,e,o){let d,a={left:"",right:""},c=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,o)),d=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===d?a.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":a.left=Qn(c.x),a}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(a=>a.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:C1(t,o),isOriginOutsideView:nw(t,o),isOverlayClipped:C1(e,o),isOverlayOutsideView:nw(e,o)}}_subtractOverflows(t,...e){return e.reduce((o,a)=>o-Math.max(a,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+t-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Um(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof vt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,o=t.height||0;return{top:t.y,bottom:t.y+o,left:t.x,right:t.x+e,height:o,width:e}}}function Cc(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function S1(r){if("number"!=typeof r&&null!=r){const[t,e]=r.split(eX);return e&&"px"!==e?null:parseFloat(t)}return r||null}function D1(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}const M1="cdk-global-overlay-wrapper";class iX{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(M1),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:a,height:c,maxWidth:d,maxHeight:p}=o,f=!("100%"!==a&&"100vw"!==a||d&&"100%"!==d&&"100vw"!==d),v=!("100%"!==c&&"100vh"!==c||p&&"100%"!==p&&"100vh"!==p);t.position=this._cssPosition,t.marginLeft=f?"0":this._leftOffset,t.marginTop=v?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,f?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=v?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove(M1),o.justifyContent=o.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let nX=(()=>{class r{constructor(e,o,a,c){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=c}global(){return new iX}flexibleConnectedTo(e){return new tX(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(e){return new(e||r)(we(Mp),we(Lt),we(Cr),we(rw))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),rX=0,ms=(()=>{class r{constructor(e,o,a,c,d,p,f,v,E,D,x){this.scrollStrategies=e,this._overlayContainer=o,this._componentFactoryResolver=a,this._positionBuilder=c,this._keyboardDispatcher=d,this._injector=p,this._ngZone=f,this._document=v,this._directionality=E,this._location=D,this._outsideClickDispatcher=x}create(e){const o=this._createHostElement(),a=this._createPaneElement(o),c=this._createPortalOutlet(a),d=new __(e);return d.direction=d.direction||this._directionality.value,new qY(c,o,a,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const o=this._document.createElement("div");return o.id="cdk-overlay-"+rX++,o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ec)),new kY(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(e){return new(e||r)(we($Y),we(rw),we(ma),we(nX),we(QY),we(Pi),we(Jt),we(Lt),we(hs),we(zh),we(ZY))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})();const aX={provide:new Ae("cdk-connected-overlay-scroll-strategy"),deps:[ms],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let El=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[ms,aX],imports:[[ld,bl,iw],iw]}),r})();const lX=["mat-menu-item",""];function cX(r,t){1&r&&(kl(),ze(0,"svg",2),Di(1,"polygon",3),Ye())}const R1=["*"];function uX(r,t){if(1&r){const e=xu();ze(0,"div",0),Yt("keydown",function(a){return jo(e),Yn()._handleKeydown(a)})("click",function(){return jo(e),Yn().closed.emit("click")})("@transformMenu.start",function(a){return jo(e),Yn()._onAnimationStart(a)})("@transformMenu.done",function(a){return jo(e),Yn()._onAnimationDone(a)}),ze(1,"div",1),Li(2),Ye(),Ye()}if(2&r){const e=Yn();ri("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),Gt("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const v_={transformMenu:An("transformMenu",[oi("void",ut({opacity:0,transform:"scale(0.8)"})),Ei("void => enter",Ri("120ms cubic-bezier(0, 0, 0.2, 1)",ut({opacity:1,transform:"scale(1)"}))),Ei("* => void",Ri("100ms 25ms linear",ut({opacity:0})))]),fadeInItems:An("fadeInItems",[oi("showing",ut({opacity:1})),Ei("void => *",[ut({opacity:0}),Ri("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},dX=new Ae("MatMenuContent"),ow=new Ae("MAT_MENU_PANEL"),hX=ps(yc(class{}));let b_=(()=>{class r extends hX{constructor(e,o,a,c,d){super(),this._elementRef=e,this._focusMonitor=a,this._parentMenu=c,this._changeDetectorRef=d,this.role="menuitem",this._hovered=new ve,this._focused=new ve,this._highlighted=!1,this._triggersSubmenu=!1,c&&c.addItem&&c.addItem(this)}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var a;const e=this._elementRef.nativeElement.cloneNode(!0),o=e.querySelectorAll("mat-icon, .material-icons");for(let c=0;c<o.length;c++)o[c].remove();return(null==(a=e.textContent)?void 0:a.trim())||""}_setHighlighted(e){var o;this._highlighted=e,null==(o=this._changeDetectorRef)||o.markForCheck()}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(Lt),K(ko),K(ow,8),K(Rn))},r.\u0275cmp=Wt({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,o){1&e&&Yt("click",function(c){return o._checkDisabled(c)})("mouseenter",function(){return o._handleMouseEnter()}),2&e&&(Gt("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled.toString())("disabled",o.disabled||null),Ti("mat-menu-item",!0)("mat-menu-item-highlighted",o._highlighted)("mat-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[$e],attrs:lX,ngContentSelectors:R1,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,o){1&e&&(yn(),Li(0),Di(1,"div",0),zn(2,cX,2,0,"svg",1)),2&e&&(zt(1),ri("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()),zt(1),ri("ngIf",o._triggersSubmenu))},directives:[fs,sc],encapsulation:2,changeDetection:0}),r})();const I1=new Ae("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let fX=0,Rp=(()=>{class r{constructor(e,o,a){this._elementRef=e,this._ngZone=o,this._defaultOptions=a,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new sl,this._tabSubscription=l.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new ve,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new At,this.close=this.closed,this.panelId="mat-menu-panel-"+fX++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=xt(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=xt(e)}set panelClass(e){const o=this._previousPanelClass;o&&o.length&&o.split(" ").forEach(a=>{this._classList[a]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(a=>{this._classList[a]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new sT(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(us(this._directDescendantItems),cs(e=>gr(...e.map(o=>o._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(us(this._directDescendantItems),cs(o=>gr(...o.map(a=>a._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const o=e.keyCode,a=this._keyManager;switch(o){case 27:Oo(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===o||40===o)&&a.setFocusOrigin("keyboard"),a.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(hn(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const o=this._keyManager;if(o.setFocusOrigin(e).setFirstItemActive(),!o.activeItem&&this._directDescendantItems.length){let a=this._directDescendantItems.first._getHostElement().parentElement;for(;a;){if("menu"===a.getAttribute("role")){a.focus();break}a=a.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const o=Math.min(this._baseElevation+e,24),a=`${this._elevationPrefix}${o}`,c=Object.keys(this._classList).find(d=>d.startsWith(this._elevationPrefix));(!c||c===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[a]=!0,this._previousElevation=a)}setPositionClasses(e=this.xPosition,o=this.yPosition){const a=this._classList;a["mat-menu-before"]="before"===e,a["mat-menu-after"]="after"===e,a["mat-menu-above"]="above"===o,a["mat-menu-below"]="below"===o}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(us(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(o=>o._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(Jt),K(I1))},r.\u0275dir=Ne({type:r,contentQueries:function(e,o,a){if(1&e&&(Fi(a,dX,5),Fi(a,b_,5),Fi(a,b_,4)),2&e){let c;Rt(c=It())&&(o.lazyContent=c.first),Rt(c=It())&&(o._allItems=c),Rt(c=It())&&(o.items=c)}},viewQuery:function(e,o){if(1&e&&Mn(Xn,5),2&e){let a;Rt(a=It())&&(o.templateRef=a.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),r})(),x1=(()=>{class r extends Rp{constructor(e,o,a){super(e,o,a),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(Jt),K(I1))},r.\u0275cmp=Wt({type:r,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,o){2&e&&Gt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[_t([{provide:ow,useExisting:r}]),$e],ngContentSelectors:R1,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,o){1&e&&(yn(),zn(0,uX,3,6,"ng-template"))},directives:[PI],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[v_.transformMenu,v_.fadeInItems]},changeDetection:0}),r})();const A1=new Ae("mat-menu-scroll-strategy"),mX={provide:A1,deps:[ms],useFactory:function(r){return()=>r.scrollStrategies.reposition()}},k1=fl({passive:!0});let _X=(()=>{class r{constructor(e,o,a,c,d,p,f,v){this._overlay=e,this._element=o,this._viewContainerRef=a,this._menuItemInstance=p,this._dir=f,this._focusMonitor=v,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=l.EMPTY,this._hoverSubscription=l.EMPTY,this._menuCloseSubscription=l.EMPTY,this._handleTouchStart=E=>{cT(E)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new At,this.onMenuOpen=this.menuOpened,this.menuClosed=new At,this.onMenuClose=this.menuClosed,this._scrollStrategy=c,this._parentMaterialMenu=d instanceof Rp?d:void 0,o.nativeElement.addEventListener("touchstart",this._handleTouchStart,k1),p&&(p._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(o=>{this._destroyMenu(o),("click"===o||"tab"===o)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(o)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,k1),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),o=e.getConfig();this._setPosition(o.positionStrategy),o.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Rp&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,o):this._element.nativeElement.focus(o)}updatePosition(){var e;null==(e=this._overlayRef)||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const o=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,o instanceof Rp?(o._resetAnimation(),o.lazyContent?o._animationDone.pipe(rn(a=>"void"===a.toState),hn(1),Wi(o.lazyContent._attached)).subscribe({next:()=>o.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),o.lazyContent&&o.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,o=this.menu.parentMenu;for(;o;)e++,o=o.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new __({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(o=>{this.menu.setPositionClasses("start"===o.connectionPair.overlayX?"after":"before","top"===o.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[o,a]="before"===this.menu.xPosition?["end","start"]:["start","end"],[c,d]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[p,f]=[c,d],[v,E]=[o,a],D=0;this.triggersSubmenu()?(E=o="before"===this.menu.xPosition?"start":"end",a=v="end"===o?"start":"end",D="bottom"===c?8:-8):this.menu.overlapTrigger||(p="top"===c?"bottom":"top",f="top"===d?"bottom":"top"),e.withPositions([{originX:o,originY:p,overlayX:v,overlayY:c,offsetY:D},{originX:a,originY:p,overlayX:E,overlayY:c,offsetY:D},{originX:o,originY:f,overlayX:v,overlayY:d,offsetY:-D},{originX:a,originY:f,overlayX:E,overlayY:d,offsetY:-D}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),o=this._overlayRef.detachments();return gr(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:Dt(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(rn(d=>d!==this._menuItemInstance),rn(()=>this._menuOpen)):Dt(),o)}_handleMousedown(e){lT(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const o=e.keyCode;(13===o||32===o)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===o&&"ltr"===this.dir||37===o&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(rn(e=>e===this._menuItemInstance&&!e.disabled),ZT(0,JT)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Rp&&this.menu._isAnimating?this.menu._animationDone.pipe(hn(1),ZT(0,JT),Wi(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new f_(this.menu.templateRef,this._viewContainerRef)),this._portal}}return r.\u0275fac=function(e){return new(e||r)(K(ms),K(vt),K(Un),K(A1),K(ow,8),K(b_,10),K(hs,8),K(ko))},r.\u0275dir=Ne({type:r,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(e,o){1&e&&Yt("click",function(c){return o._handleClick(c)})("mousedown",function(c){return o._handleMousedown(c)})("keydown",function(c){return o._handleKeydown(c)}),2&e&&Gt("aria-expanded",o.menuOpen||null)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),r})(),N1=(()=>{class r extends _X{}return r.\u0275fac=function(){let t;return function(o){return(t||(t=ci(r)))(o||r)}}(),r.\u0275dir=Ne({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[$e]}),r})(),vX=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[mX],imports:[[rr,mt,gs,El],Ia,mt]}),r})();function bX(r,t){if(1&r){const e=xu();ze(0,"button",12),Yt("click",function(){const c=jo(e).$implicit;return Yn(2).ShowDemo(c.id)}),bi(1),Ye()}if(2&r){const e=t.$implicit,o=t.index;zt(1),yy("",o+1," ",e.description,"")}}function yX(r,t){if(1&r&&(ze(0,"button",11),bi(1),Ye(),ze(2,"mat-menu",null,3),zn(4,bX,2,2,"ng-template",4),Ye()),2&r){const e=t.$implicit,o=t.index;ri("matMenuTriggerFor",Do(3)),zt(1),Ey("",o+1," ",e.key," (",e.value.length,")"),zt(3),ri("ngForOf",e.value)}}const EX=function(r){return["/","automation","loadexample",r]};function CX(r,t){if(1&r&&(ze(0,"a",13),bi(1),Ye()),2&r){const e=Yn();ri("routerLink",function(r,t,e,o){return PM(Ve(),vr(),r,t,e,o)}(2,EX,e.mustLoadDemoBlock)),zt(1),fa("Direct link ",e.mustLoadDemoBlock,"")}}function TX(r,t){1&r&&(ze(0,"span"),bi(1,"Loading"),Ye())}let P1=(()=>{class r{constructor(e,o,a){this.tabulator=e,this.loadDemo=o,this.ar=a,this.swaggerLoaded=0,this.demoWorkspace=null,this.demos=[],this.demosCategories=new Map,this.mustLoadDemoBlock="",this.directLinkDemo="",this.step=0,this.swaggerData=[],this.showInner="",this.toolboxXML="",this.ar.paramMap.subscribe(c=>{this.mustLoadDemoBlock=c.get("demoblock")})}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid()}RunCode(){var e;this.run=ed.interpreterHelper.createInterpreter(this.demoWorkspace,Er),this.clearOutput(),this.showInner="start program",e=this,this.run.runCode((a,c)=>{try{return new Interpreter(this.run.latestCode,c)}catch(d){e.ShowInnerWorkings(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(d))}},a=>{e.step++,e.showInner+=`\n ${e.step} : ${a}`,this.tabulator.AddDataToGrid(a)},()=>{e.showInner+="\n program executed",this.tabulator.FinishGrid()})}ShowDemo(e){this.mustLoadDemoBlock=e,this.loadDemo.getDemoBlock(e).subscribe(o=>{var a=Ai.Xml.textToDom(o);null!=this.demoWorkspace&&(Ai.Xml.clearWorkspaceAndLoadFromXml(a,this.demoWorkspace),window.alert("please press run code button"))})}registerSwaggerBlocksObjects(e,o){return o.fieldXMLObjects.map(c=>Ai.Xml.textToDom(c))}registerSwaggerBlocksAPIControllers(e,o,a){var d=o.operations.filter(p=>p.controller==a);return o.fieldXMLFunctions.filter(p=>{if(""==p.id)return!0;var f=p.id+"/",v=!1;return d.forEach(E=>{f.startsWith(E.id)&&(v=!0)}),v}).map(p=>Ai.Xml.textToDom(p.gui))}registerSwaggerBlocksAPI(e,o){return o.fieldXMLFunctions.map(c=>Ai.Xml.textToDom(c.gui))}ngOnInit(){this.StartRegister()}LoadSwagger(){var e=window.prompt("Swagger url? ","https://swagger-tax-calc-api.herokuapp.com/api-docs");if(e){if(e.endsWith(".html")||e.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");this.LoadSwaggerFromUrl(e).then(o=>{this.afterTimeout(this,this.toolboxXML),window.alert("done")})}}LoadSwaggerFromUrl(e,o){var a=this;return FC(function*(){var c=new h5.parseData(e),d=yield c.ParseSwagger();d.name=o||e,a.swaggerData.push(d);for(var p=0;p<d.GenerateBlocks.length;p++)(0,d.GenerateBlocks[p])(Ai.Blocks,Er,E=>new Ai.FieldDropdown(E));for(p=0;p<d.GenerateFunctions.length;p++)(0,d.GenerateFunctions[p])(Ai.Blocks,Er,function(x){return new Ai.FieldImage(`assets/httpImages/${x}.png`,90,20,x)});return d})()}StartRegister(){var e=this;return FC(function*(){var o=yield function(r,t){return new Promise((o,a)=>{const c=new Q({next:d=>{o(d),c.unsubscribe()},error:a,complete:()=>{a(new ip)}});r.subscribe(c)})}(e.loadDemo.getSwaggerLinks()),a=new Map;o.forEach(function(){var f=FC(function*(v){a.set(v.id,yield e.LoadSwaggerFromUrl(v.link,v.id))});return function(v){return f.apply(this,arguments)}}());var c=[...Array(10).keys()].map(f=>e.CategorySwaggerHidden(f));e.loadDemo.getDemoBlocks().subscribe(f=>{e.demos=f.sort((E,D)=>E.description.localeCompare(D.description));var v=f.map(E=>E.categories).filter(E=>(null==E?void 0:E.length)>0).flatMap(E=>E.split(";")).filter(E=>(null==E?void 0:E.length)>0);e.demosCategories.set("All",e.demos),v.forEach(E=>{e.demosCategories.set(E,f.filter(D=>{var x;return(null===(x=D.categories)||void 0===x?void 0:x.length)>0}).filter(D=>(";"+D.categories+";").indexOf(";"+E+";")>-1))})});const d=document.getElementById("steps");if(null!=d){e.tabulator.initGrid(d),on.filterBlocks.definitionBlocks(Ai.Blocks,Er),on.waitBlocks.definitionBlocks(Ai.defineBlocksWithJsonArray,Er),on.xhrBlocks.definitionBlocks(Ai.Blocks,Er,function(f){return new Ai.FieldDropdown(f)}),on.propBlocks.definitionBlocks(Ai.Blocks,Er,function(f){return new Ai.FieldLabelSerializable(f)}),on.guiBlocks.definitionBlocks(Ai.Blocks,Er),on.convertersBlocks.definitionBlocks(Ai.Blocks,Er),on.exportFileBlock.definitionBlocks(Ai.Blocks,Er),on.createObjectBlocks.definitionBlocks(Ai.Blocks,Er,Ai.Extensions,f=>new Ai.FieldTextInput(f)),on.currentDateBlock.definitionBlocks(Ai.Blocks,Er,function(f){return new Ai.FieldDropdown(f)}),on.dateFromTextBlock.definitionBlocks(Ai.Blocks,Er),on.waitBlocks.definitionBlocks(Ai.Blocks,Er),on.commentBlock.definitionBlocks(Ai.Blocks,Er,f=>new Ai.FieldLabelSerializable(f)),on.auth0Blocks.definitionBlocks(Ai.Blocks,Er);var p=[on.defaultBlocks.generalBlocks(),`    \n            ${on.filterBlocks.fieldXML()}\n            ${on.xhrBlocks.fieldXML()}\n            \n            ${on.propBlocks.fieldXML()}\n            <category id="catGUI" name="GUI">\n            ${on.guiBlocks.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${on.waitBlocks.fieldXML()}\n        </category>`,`<category id="catConverters"  name="Converters">\n          ${on.convertersBlocks.fieldXML()}\n        </category>`,`<category id="catExporter"  name="Exporter">\n          ${on.exportFileBlock.fieldXML()}\n        </category>`,`<category id="catDates"  name="Dates">\n          ${on.currentDateBlock.fieldXML()}\n          ${on.dateFromTextBlock.fieldXML()}\n          ${on.waitBlocks.fieldXML()}\n        </category>`,`${on.commentBlock.fieldXML()}`,`${on.createObjectBlocks.fieldXML()}`,`${on.auth0Blocks.fieldXML()}`,`<category name="Swagger" id="catSwagger" expanded='true' >          \n          ${c}\n        </category> `];e.initialize(p)}else window.alert("gridElement is null")})()}SaveBlocks(){ed.saveBlocksUrl.saveState(Ai.Xml,this.demoWorkspace)}ShowInnerWorkings(){if(null!=this.demoWorkspace){var e=Ai.Xml.workspaceToDom(this.demoWorkspace,!0),o=Ai.Xml.domToPrettyText(e);this.showInner=`\n            ${this.run.latestCode}\n            ========\n            ${o}\n            ========\n           \n            `}else window.alert("demoWorkspace is null")}Download(){var e=window.prompt("Name?","blocks.txt");null!=e&&ed.saveLoad.DownloadBlocks(Ai.Xml,this.demoWorkspace,e)}changeListener(e){this.readThis(e.target)}readThis(e){var o=e.files[0],a=new FileReader,c=this;a.onloadend=function(d){ed.saveLoad.LoadFile(Ai.Xml,c.demoWorkspace,a.result),c.run.resetInterpreter()},a.readAsText(o)}CategorySwaggerHidden(e){return`<category name='swagger_hidden_${e}' hidden='true' >${e}</category>`}initialize(e){const o=document.getElementById("blocklyDiv");if(null!=o){var a=e.map(d=>`<sep></sep>${d}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">\n    ${a}\n    </xml>`,this.demoWorkspace=Ai.inject(o,{readOnly:!1,media:"media/",trashcan:!0,move:{scrollbars:!0,drag:!0,wheel:!0},toolbox:this.toolboxXML});var c=this;window.setTimeout(c.afterTimeout,2e3,this,this.toolboxXML),this.run=ed.interpreterHelper.createInterpreter(this.demoWorkspace,Er),c=this,this.demoWorkspace.addChangeListener(function(d){d.isUiEvent||(c.run.resetInterpreter(),c.run.generateCodeAndLoadIntoInterpreter(),c.ShowInnerWorkings())})}else window.alert("blocklyDiv is null")}restoreBlocks(){ed.saveBlocksUrl.restoreState(Ai.Xml,this.demoWorkspace)}afterTimeout(e,o){var a,c;null!=(null==e?void 0:e.mustLoadDemoBlock)&&e.ShowDemo(null==e?void 0:e.mustLoadDemoBlock),null!=(null==e?void 0:e.swaggerData)&&(o=o.replace("Swagger",`Swagger(${e.swaggerData.length})`),e.swaggerData.forEach(f=>{var v=f.findCategSwaggerFromPaths().map(D=>`<category name='${D}' custom='func_${f.name}_${D}'></category>`).join("\n"),E=(null==e?void 0:e.CategorySwaggerHidden(null==e?void 0:e.swaggerLoaded))||"";o=o.replace(E,`<category name='${f.name}'>\n      <category name='API' id='func_${f.name}'>\n      ${v}\n      </category>\n      ${f.categSwagger()}\n      </category>\n    `),e.swaggerLoaded++}),null===(a=null==e?void 0:e.demoWorkspace)||void 0===a||a.updateToolbox(o),null===(c=null==e?void 0:e.swaggerData)||void 0===c||c.forEach(f=>{if(null!=(null==e?void 0:e.demoWorkspace)){var E="objects_"+f.nameCategSwagger(),D="api_"+f.nameCategSwagger();e.demoWorkspace.registerToolboxCategoryCallback(E,x=>e.registerSwaggerBlocksObjects(x,f)),e.demoWorkspace.registerToolboxCategoryCallback(D,x=>e.registerSwaggerBlocksAPI(x,f)),f.findCategSwaggerFromPaths().forEach(x=>{var N;null===(N=null==e?void 0:e.demoWorkspace)||void 0===N||N.registerToolboxCategoryCallback(`func_${f.name}_${x}`,B=>e.registerSwaggerBlocksAPIControllers(B,f,x))})}}),e.restoreBlocks())}}return r.\u0275fac=function(e){return new(e||r)(K(M6),K(G6),K(uc))},r.\u0275cmp=Wt({type:r,selectors:[["app-display-blockly"]],decls:28,vars:8,consts:[["mat-raised-button","","color","primary",3,"click"],["type","file",3,"change"],["mat-raised-button","","color","primary",3,"matMenuTriggerFor"],["menu","matMenu"],["ngFor","",3,"ngForOf"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],[2,"width","100%"],["id","blocklyDiv",2,"display","inline-block","height","750px","width","58%"],["id","output","disabled","disabled",2,"display","inline-block","height","750px","width","38%",3,"ngModel","ngModelChange"],["id","steps",2,"display","inline-block","width","96%"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"]],template:function(e,o){if(1&e&&(ze(0,"button",0),Yt("click",function(){return o.LoadSwagger()}),bi(1,"Load Swagger"),Ye(),ze(2,"button",0),Yt("click",function(){return o.ShowInnerWorkings()}),bi(3,"Show blocks"),Ye(),bi(4," \xa0 "),ze(5,"button",0),Yt("click",function(){return o.SaveBlocks()}),bi(6,"Persist in browser"),Ye(),bi(7," \xa0 "),ze(8,"button",0),Yt("click",function(){return o.RunCode()}),bi(9,"Run Code"),Ye(),bi(10," \xa0 "),ze(11,"button",0),Yt("click",function(){return o.Download()}),bi(12,"Download blocks"),Ye(),bi(13," \xa0 "),ze(14,"input",1),Yt("change",function(c){return o.changeListener(c)}),Ye(),ze(15,"button",2),bi(16),Ye(),ze(17,"mat-menu",null,3),zn(19,yX,5,5,"ng-template",4),Fu(20,"keyvalue"),Ye(),zn(21,CX,2,4,"a",5),zn(22,TX,2,0,"span",6),ze(23,"div",7),Di(24,"div",8),ze(25,"textarea",9),Yt("ngModelChange",function(c){return o.showInner=c}),bi(26,"    "),Ye(),Ye(),Di(27,"div",10)),2&e){const a=Do(18);zt(15),ri("matMenuTriggerFor",a),zt(1),fa("Demos (",o.demos.length,")"),zt(3),ri("ngForOf",Bu(20,6,o.demosCategories)),zt(2),ri("ngIf",null==o.mustLoadDemoBlock?null:o.mustLoadDemoBlock.length),zt(1),ri("ngIf",null==o.demoWorkspace),zt(3),ri("ngModel",o.showInner)}},directives:[KT,N1,x1,LI,sc,em,Lx,uC,b_,TY,gp],pipes:[jI],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:normal;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),r})();const wX=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:P1},{path:"automation/loadexample/:demoblock",component:P1}];let SX=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[pO.forRoot(wX)],pO]}),r})();const L1=new Set;let pd,DX=(()=>{class r{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):RX}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function(r){if(!L1.has(r))try{pd||(pd=document.createElement("style"),pd.setAttribute("type","text/css"),document.head.appendChild(pd)),pd.sheet&&(pd.sheet.insertRule(`@media ${r} {body{ }}`,0),L1.add(r))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return r.\u0275fac=function(e){return new(e||r)(we(Cr))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function RX(r){return{matches:"all"===r||""===r,media:r,addListener:()=>{},removeListener:()=>{}}}let IX=(()=>{class r{constructor(e,o){this._mediaMatcher=e,this._zone=o,this._queries=new Map,this._destroySubject=new ve}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return F1(Um(e)).some(a=>this._registerQuery(a).mql.matches)}observe(e){let c=uA(F1(Um(e)).map(d=>this._registerQuery(d).observable));return c=np(c.pipe(hn(1)),c.pipe(VO(1),Hm(0))),c.pipe(Re(d=>{const p={matches:!1,breakpoints:{}};return d.forEach(({matches:f,query:v})=>{p.matches=p.matches||f,p.breakpoints[v]=f}),p}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const o=this._mediaMatcher.matchMedia(e),c={observable:new ie(d=>{const p=f=>this._zone.run(()=>d.next(f));return o.addListener(p),()=>{o.removeListener(p)}}).pipe(us(o),Re(({matches:d})=>({query:e,matches:d})),Wi(this._destroySubject)),mql:o};return this._queries.set(e,c),c}}return r.\u0275fac=function(e){return new(e||r)(we(DX),we(Jt))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function F1(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class AX extends ve{constructor(t=1/0,e=1/0,o=qC){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:o,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:d}=this;e||(o.push(t),!a&&o.push(c.now()+d)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:o,_buffer:a}=this,c=a.slice();for(let d=0;d<c.length&&!t.closed;d+=o?1:2)t.next(c[d]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:o,_infiniteTimeWindow:a}=this,c=(a?1:2)*t;if(t<1/0&&c<o.length&&o.splice(0,o.length-c),!a){const d=e.now();let p=0;for(let f=1;f<o.length&&o[f]<=d;f+=2)p=f;p&&o.splice(0,p+1)}}}const y_=["*"];function kX(r,t){if(1&r){const e=xu();ze(0,"div",2),Yt("click",function(){return jo(e),Yn()._onBackdropClicked()}),Ye()}2&r&&Ti("mat-drawer-shown",Yn()._isShowingBackdrop())}function NX(r,t){1&r&&(ze(0,"mat-drawer-content"),Li(1,2),Ye())}const PX=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],LX=["mat-drawer","mat-drawer-content","*"];function FX(r,t){if(1&r){const e=xu();ze(0,"div",2),Yt("click",function(){return jo(e),Yn()._onBackdropClicked()}),Ye()}2&r&&Ti("mat-drawer-shown",Yn()._isShowingBackdrop())}function BX(r,t){1&r&&(ze(0,"mat-sidenav-content",3),Li(1,2),Ye())}const VX=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],HX=["mat-sidenav","mat-sidenav-content","*"],B1={transformDrawer:An("transform",[oi("open, open-instant",ut({transform:"none",visibility:"visible"})),oi("void",ut({"box-shadow":"none",visibility:"hidden"})),Ei("void => open-instant",Ri("0ms")),Ei("void <=> open, open-instant => void",Ri("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},GX=new Ae("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),sw=new Ae("MAT_DRAWER_CONTAINER");let E_=(()=>{class r extends m_{constructor(e,o,a,c,d){super(a,c,d),this._changeDetectorRef=e,this._container=o}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return r.\u0275fac=function(e){return new(e||r)(K(Rn),K($t(()=>H1)),K(vt),K(g_),K(Jt))},r.\u0275cmp=Wt({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,o){2&e&&ho("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},features:[$e],ngContentSelectors:y_,decls:1,vars:0,template:function(e,o){1&e&&(yn(),Li(0))},encapsulation:2,changeDetection:0}),r})(),V1=(()=>{class r{constructor(e,o,a,c,d,p,f,v){this._elementRef=e,this._focusTrapFactory=o,this._focusMonitor=a,this._platform=c,this._ngZone=d,this._interactivityChecker=p,this._doc=f,this._container=v,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ve,this._animationEnd=new ve,this._animationState="void",this.openedChange=new At(!0),this._openedStream=this.openedChange.pipe(rn(E=>E),Re(()=>{})),this.openedStart=this._animationStarted.pipe(rn(E=>E.fromState!==E.toState&&0===E.toState.indexOf("open")),QT(void 0)),this._closedStream=this.openedChange.pipe(rn(E=>!E),Re(()=>{})),this.closedStart=this._animationStarted.pipe(rn(E=>E.fromState!==E.toState&&"void"===E.toState),QT(void 0)),this._destroyed=new ve,this.onPositionChanged=new At,this._modeChanged=new ve,this.openedChange.subscribe(E=>{E?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{yl(this._elementRef.nativeElement,"keydown").pipe(rn(E=>27===E.keyCode&&!this.disableClose&&!Oo(E)),Wi(this._destroyed)).subscribe(E=>this._ngZone.run(()=>{this.close(),E.stopPropagation(),E.preventDefault()}))}),this._animationEnd.pipe(HO((E,D)=>E.fromState===D.fromState&&E.toState===D.toState)).subscribe(E=>{const{fromState:D,toState:x}=E;(0===x.indexOf("open")&&"void"===D||"void"===x&&0===D.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!=this._position&&(this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=xt(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"===this.mode?"dialog":"first-tabbable":e}set autoFocus(e){("true"===e||"false"===e)&&(e=xt(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(xt(e))}_forceFocus(e,o){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{e.addEventListener("blur",()=>e.removeAttribute("tabindex")),e.addEventListener("mousedown",()=>e.removeAttribute("tabindex"))})),e.focus(o)}_focusByCssSelector(e,o){let a=this._elementRef.nativeElement.querySelector(e);a&&this._forceFocus(a,o)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(o=>{!o&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var o;const e=null==(o=this._doc)?void 0:o.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,o){e&&o&&(this._openedVia=o);const a=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),a}_setOpen(e,o,a){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",o&&this._restoreFocus(a)),this._updateFocusTrapState(),new Promise(c=>{this.openedChange.pipe(hn(1)).subscribe(d=>c(d?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(JO),K(ko),K(Cr),K(Jt),K(aT),K(Lt,8),K(sw,8))},r.\u0275cmp=Wt({type:r,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,o){1&e&&cg("@transform.start",function(c){return o._animationStarted.next(c)})("@transform.done",function(c){return o._animationEnd.next(c)}),2&e&&(Gt("align",null),dg("@transform",o._animationState),Ti("mat-drawer-end","end"===o.position)("mat-drawer-over","over"===o.mode)("mat-drawer-push","push"===o.mode)("mat-drawer-side","side"===o.mode)("mat-drawer-opened",o.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:y_,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,o){1&e&&(yn(),ze(0,"div",0),Li(1),Ye())},directives:[m_],encapsulation:2,data:{animation:[B1.transformDrawer]},changeDetection:0}),r})(),H1=(()=>{class r{constructor(e,o,a,c,d,p=!1,f){this._dir=e,this._element=o,this._ngZone=a,this._changeDetectorRef=c,this._animationMode=f,this._drawers=new sl,this.backdropClick=new At,this._destroyed=new ve,this._doCheckSubject=new ve,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ve,e&&e.change.pipe(Wi(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),d.change().pipe(Wi(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=p}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=xt(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:xt(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(us(this._allDrawers),Wi(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(o=>!o._container||o._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(us(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Hm(10),Wi(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,o=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const a=this._left._getWidth();e+=a,o-=a}if(this._right&&this._right.opened)if("side"==this._right.mode)o+=this._right._getWidth();else if("push"==this._right.mode){const a=this._right._getWidth();o+=a,e-=a}e=e||null,o=o||null,(e!==this._contentMargins.left||o!==this._contentMargins.right)&&(this._contentMargins={left:e,right:o},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(rn(o=>o.fromState!==o.toState),Wi(this._drawers.changes)).subscribe(o=>{"open-instant"!==o.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(Wi(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(Wi(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(hn(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(Wi(gr(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const o=this._element.nativeElement.classList,a="mat-drawer-container-has-open";e?o.add(a):o.remove(a)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return r.\u0275fac=function(e){return new(e||r)(K(hs,8),K(vt),K(Jt),K(Rn),K(Mp),K(GX),K(eo,8))},r.\u0275cmp=Wt({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(e,o,a){if(1&e&&(Fi(a,E_,5),Fi(a,V1,5)),2&e){let c;Rt(c=It())&&(o._content=c.first),Rt(c=It())&&(o._allDrawers=c)}},viewQuery:function(e,o){if(1&e&&Mn(E_,5),2&e){let a;Rt(a=It())&&(o._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,o){2&e&&Ti("mat-drawer-container-explicit-backdrop",o._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[_t([{provide:sw,useExisting:r}])],ngContentSelectors:LX,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,o){1&e&&(yn(PX),zn(0,kX,1,2,"div",0),Li(1),Li(2,1),zn(3,NX,2,0,"mat-drawer-content",1)),2&e&&(ri("ngIf",o.hasBackdrop),zt(3),ri("ngIf",!o._content))},directives:[sc,E_],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),r})(),aw=(()=>{class r extends E_{constructor(e,o,a,c,d){super(e,o,a,c,d)}}return r.\u0275fac=function(e){return new(e||r)(K(Rn),K($t(()=>G1)),K(vt),K(g_),K(Jt))},r.\u0275cmp=Wt({type:r,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,o){2&e&&ho("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},features:[$e],ngContentSelectors:y_,decls:1,vars:0,template:function(e,o){1&e&&(yn(),Li(0))},encapsulation:2,changeDetection:0}),r})(),U1=(()=>{class r extends V1{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=xt(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=Pr(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=Pr(e)}}return r.\u0275fac=function(){let t;return function(o){return(t||(t=ci(r)))(o||r)}}(),r.\u0275cmp=Wt({type:r,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,o){2&e&&(Gt("align",null),ho("top",o.fixedInViewport?o.fixedTopGap:null,"px")("bottom",o.fixedInViewport?o.fixedBottomGap:null,"px"),Ti("mat-drawer-end","end"===o.position)("mat-drawer-over","over"===o.mode)("mat-drawer-push","push"===o.mode)("mat-drawer-side","side"===o.mode)("mat-drawer-opened",o.opened)("mat-sidenav-fixed",o.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[$e],ngContentSelectors:y_,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,o){1&e&&(yn(),ze(0,"div",0),Li(1),Ye())},directives:[m_],encapsulation:2,data:{animation:[B1.transformDrawer]},changeDetection:0}),r})(),G1=(()=>{class r extends H1{}return r.\u0275fac=function(){let t;return function(o){return(t||(t=ci(r)))(o||r)}}(),r.\u0275cmp=Wt({type:r,selectors:[["mat-sidenav-container"]],contentQueries:function(e,o,a){if(1&e&&(Fi(a,aw,5),Fi(a,U1,5)),2&e){let c;Rt(c=It())&&(o._content=c.first),Rt(c=It())&&(o._allDrawers=c)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,o){2&e&&Ti("mat-drawer-container-explicit-backdrop",o._backdropOverride)},exportAs:["matSidenavContainer"],features:[_t([{provide:sw,useExisting:r}]),$e],ngContentSelectors:HX,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(e,o){1&e&&(yn(VX),zn(0,FX,1,2,"div",0),Li(1),Li(2,1),zn(3,BX,2,0,"mat-sidenav-content",1)),2&e&&(ri("ngIf",o.hasBackdrop),zt(3),ri("ngIf",!o._content))},directives:[sc,aw,m_],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),r})(),j1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[rr,mt,od,Ia],Ia,mt]}),r})();const WX=["*",[["mat-toolbar-row"]]],zX=["*","mat-toolbar-row"],YX=vl(class{constructor(r){this._elementRef=r}});let XX=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ne({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),r})(),KX=(()=>{class r extends YX{constructor(e,o,a){super(e),this._platform=o,this._document=a}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(Cr),K(Lt))},r.\u0275cmp=Wt({type:r,selectors:[["mat-toolbar"]],contentQueries:function(e,o,a){if(1&e&&Fi(a,XX,5),2&e){let c;Rt(c=It())&&(o._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,o){2&e&&Ti("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",0===o._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[$e],ngContentSelectors:zX,decls:2,vars:0,template:function(e,o){1&e&&(yn(WX),Li(0),Li(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),r})(),W1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[mt],mt]}),r})(),JX=(()=>{class r{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=xt(e)}get inset(){return this._inset}set inset(e){this._inset=xt(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=Wt({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,o){2&e&&(Gt("aria-orientation",o.vertical?"vertical":"horizontal"),Ti("mat-divider-vertical",o.vertical)("mat-divider-horizontal",!o.vertical)("mat-divider-inset",o.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,o){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),r})(),X1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[mt],mt]}),r})();const K1=["*"],ZX=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],qX=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],rK=yc(ps(class{})),oK=ps(class{}),sK=new Ae("MatList"),$1=new Ae("MatNavList");let aK=(()=>{class r extends rK{constructor(){super(...arguments),this._stateChanges=new ve}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return r.\u0275fac=function(){let t;return function(o){return(t||(t=ci(r)))(o||r)}}(),r.\u0275cmp=Wt({type:r,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[_t([{provide:$1,useExisting:r}]),$e,ln],ngContentSelectors:K1,decls:1,vars:0,template:function(e,o){1&e&&(yn(),Li(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),r})(),J1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ne({type:r,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),r})(),Q1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ne({type:r,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),r})(),lK=(()=>{class r extends oK{constructor(e,o,a,c){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new ve,this._disabled=!1,this._isInteractiveList=!!(a||c&&"action-list"===c._getListType()),this._list=a||c;const d=this._getHostElement();"button"===d.nodeName.toLowerCase()&&!d.hasAttribute("type")&&d.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Wi(this._destroyed)).subscribe(()=>{o.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=xt(e)}ngAfterContentInit(){!function(r,t,e="mat"){r.changes.pipe(us(r)).subscribe(({length:o})=>{Sp(t,`${e}-2-line`,!1),Sp(t,`${e}-3-line`,!1),Sp(t,`${e}-multi-line`,!1),2===o||3===o?Sp(t,`${e}-${o}-line`,!0):o>3&&Sp(t,`${e}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(Rn),K($1,8),K(sK,8))},r.\u0275cmp=Wt({type:r,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,o,a){if(1&e&&(Fi(a,J1,5),Fi(a,Q1,5),Fi(a,o1,5)),2&e){let c;Rt(c=It())&&(o._avatar=c.first),Rt(c=It())&&(o._icon=c.first),Rt(c=It())&&(o._lines=c)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,o){2&e&&Ti("mat-list-item-disabled",o.disabled)("mat-list-item-avatar",o._avatar||o._icon)("mat-list-item-with-avatar",o._avatar||o._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[$e],ngContentSelectors:qX,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,o){1&e&&(yn(ZX),ze(0,"div",0),Di(1,"div",1),Li(2),ze(3,"div",2),Li(4,1),Ye(),Li(5,2),Ye()),2&e&&(zt(1),ri("matRippleTrigger",o._getHostElement())("matRippleDisabled",o._isRippleDisabled()))},directives:[fs],encapsulation:2,changeDetection:0}),r})(),q1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[u_,gs,mt,XT,rr],u_,mt,XT,X1]}),r})();const gK=["*"];let w_;function xp(r){var t;return(null==(t=function(){if(void 0===w_&&(w_=null,"undefined"!=typeof window)){const r=window;void 0!==r.trustedTypes&&(w_=r.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return w_}())?void 0:t.createHTML(r))||r}function eN(r){return Error(`Unable to find icon with the name "${r}"`)}function tN(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function iN(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}class Tc{constructor(t,e,o){this.url=t,this.svgText=e,this.options=o}}let S_=(()=>{class r{constructor(e,o,a,c){this._httpClient=e,this._sanitizer=o,this._errorHandler=c,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=a}addSvgIcon(e,o,a){return this.addSvgIconInNamespace("",e,o,a)}addSvgIconLiteral(e,o,a){return this.addSvgIconLiteralInNamespace("",e,o,a)}addSvgIconInNamespace(e,o,a,c){return this._addSvgIconConfig(e,o,new Tc(a,null,c))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,o,a,c){const d=this._sanitizer.sanitize(Pt.HTML,a);if(!d)throw iN(a);const p=xp(d);return this._addSvgIconConfig(e,o,new Tc("",p,c))}addSvgIconSet(e,o){return this.addSvgIconSetInNamespace("",e,o)}addSvgIconSetLiteral(e,o){return this.addSvgIconSetLiteralInNamespace("",e,o)}addSvgIconSetInNamespace(e,o,a){return this._addSvgIconSetConfig(e,new Tc(o,null,a))}addSvgIconSetLiteralInNamespace(e,o,a){const c=this._sanitizer.sanitize(Pt.HTML,o);if(!c)throw iN(o);const d=xp(c);return this._addSvgIconSetConfig(e,new Tc("",d,a))}registerFontClassAlias(e,o=e){return this._fontCssClassesByAlias.set(e,o),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const o=this._sanitizer.sanitize(Pt.RESOURCE_URL,e);if(!o)throw tN(e);const a=this._cachedIconsByUrl.get(o);return a?Dt(D_(a)):this._loadSvgIconFromConfig(new Tc(e,null)).pipe(sr(c=>this._cachedIconsByUrl.set(o,c)),Re(c=>D_(c)))}getNamedSvgIcon(e,o=""){const a=nN(o,e);let c=this._svgIconConfigs.get(a);if(c)return this._getSvgFromConfig(c);if(c=this._getIconConfigFromResolvers(o,e),c)return this._svgIconConfigs.set(a,c),this._getSvgFromConfig(c);const d=this._iconSetConfigs.get(o);return d?this._getSvgFromIconSetConfigs(e,d):function(r,t){const e=y(r)?r:()=>r,o=a=>a.error(e());return new ie(o)}(eN(a))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Dt(D_(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Re(o=>D_(o)))}_getSvgFromIconSetConfigs(e,o){const a=this._extractIconWithNameFromAnySet(e,o);return a?Dt(a):cx(o.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(wa(p=>{const v=`Loading icon set URL: ${this._sanitizer.sanitize(Pt.RESOURCE_URL,d.url)} failed: ${p.message}`;return this._errorHandler.handleError(new Error(v)),Dt(null)})))).pipe(Re(()=>{const d=this._extractIconWithNameFromAnySet(e,o);if(!d)throw eN(e);return d}))}_extractIconWithNameFromAnySet(e,o){for(let a=o.length-1;a>=0;a--){const c=o[a];if(c.svgText&&c.svgText.toString().indexOf(e)>-1){const d=this._svgElementFromConfig(c),p=this._extractSvgIconFromSet(d,e,c.options);if(p)return p}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(sr(o=>e.svgText=o),Re(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Dt(null):this._fetchIcon(e).pipe(sr(o=>e.svgText=o))}_extractSvgIconFromSet(e,o,a){const c=e.querySelector(`[id="${o}"]`);if(!c)return null;const d=c.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,a);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),a);const p=this._svgElementFromString(xp("<svg></svg>"));return p.appendChild(d),this._setSvgAttributes(p,a)}_svgElementFromString(e){const o=this._document.createElement("DIV");o.innerHTML=e;const a=o.querySelector("svg");if(!a)throw Error("<svg> tag not found");return a}_toSvgElement(e){const o=this._svgElementFromString(xp("<svg></svg>")),a=e.attributes;for(let c=0;c<a.length;c++){const{name:d,value:p}=a[c];"id"!==d&&o.setAttribute(d,p)}for(let c=0;c<e.childNodes.length;c++)e.childNodes[c].nodeType===this._document.ELEMENT_NODE&&o.appendChild(e.childNodes[c].cloneNode(!0));return o}_setSvgAttributes(e,o){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),o&&o.viewBox&&e.setAttribute("viewBox",o.viewBox),e}_fetchIcon(e){var v;const{url:o,options:a}=e,c=null!=(v=null==a?void 0:a.withCredentials)&&v;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==o)throw Error(`Cannot fetch icon from URL "${o}".`);const d=this._sanitizer.sanitize(Pt.RESOURCE_URL,o);if(!d)throw tN(o);const p=this._inProgressUrlFetches.get(d);if(p)return p;const f=this._httpClient.get(d,{responseType:"text",withCredentials:c}).pipe(Re(E=>xp(E)),mA(()=>this._inProgressUrlFetches.delete(d)),Ed());return this._inProgressUrlFetches.set(d,f),f}_addSvgIconConfig(e,o,a){return this._svgIconConfigs.set(nN(e,o),a),this}_addSvgIconSetConfig(e,o){const a=this._iconSetConfigs.get(e);return a?a.push(o):this._iconSetConfigs.set(e,[o]),this}_svgElementFromConfig(e){if(!e.svgElement){const o=this._svgElementFromString(e.svgText);this._setSvgAttributes(o,e.options),e.svgElement=o}return e.svgElement}_getIconConfigFromResolvers(e,o){for(let a=0;a<this._resolvers.length;a++){const c=this._resolvers[a](o,e);if(c)return bK(c)?new Tc(c.url,null,c.options):new Tc(c,null)}}}return r.\u0275fac=function(e){return new(e||r)(we(Pm,8),we(Qh),we(Lt,8),we(ks))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function D_(r){return r.cloneNode(!0)}function nN(r,t){return r+":"+t}function bK(r){return!(!r.url||!r.options)}const yK=vl(class{constructor(r){this._elementRef=r}}),EK=new Ae("mat-icon-location",{providedIn:"root",factory:function(){const r=Wl(Lt),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),rN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],TK=rN.map(r=>`[${r}]`).join(", "),wK=/^url\(['"]?#(.*?)['"]?\)$/;let SK=(()=>{class r extends yK{constructor(e,o,a,c,d){super(e),this._iconRegistry=o,this._location=c,this._errorHandler=d,this._inline=!1,this._currentIconFetch=l.EMPTY,a||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=xt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const o=this._cleanupFontValue(e);o!==this._fontSet&&(this._fontSet=o,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const o=this._cleanupFontValue(e);o!==this._fontIcon&&(this._fontIcon=o,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const o=e.split(":");switch(o.length){case 1:return["",o[0]];case 2:return o;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const o=this._location.getPathname();o!==this._previousPath&&(this._previousPath=o,this._prependPathToReferences(o))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const o=e.querySelectorAll("style");for(let c=0;c<o.length;c++)o[c].textContent+=" ";const a=this._location.getPathname();this._previousPath=a,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(a),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let o=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();o--;){const a=e.childNodes[o];(1!==a.nodeType||"svg"===a.nodeName.toLowerCase())&&a.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,o=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();o!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),o&&e.classList.add(o),this._previousFontSetClass=o),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const o=this._elementsWithExternalReferences;o&&o.forEach((a,c)=>{a.forEach(d=>{c.setAttribute(d.name,`url('${e}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(e){const o=e.querySelectorAll(TK),a=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let c=0;c<o.length;c++)rN.forEach(d=>{const p=o[c],f=p.getAttribute(d),v=f?f.match(wK):null;if(v){let E=a.get(p);E||(E=[],a.set(p,E)),E.push({name:d,value:v[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[o,a]=this._splitIconName(e);o&&(this._svgNamespace=o),a&&(this._svgName=a),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(a,o).pipe(hn(1)).subscribe(c=>this._setSvgElement(c),c=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${o}:${a}! ${c.message}`))})}}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(S_),Fn("aria-hidden"),K(EK),K(ks))},r.\u0275cmp=Wt({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,o){2&e&&(Gt("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet),Ti("mat-icon-inline",o.inline)("mat-icon-no-color","primary"!==o.color&&"accent"!==o.color&&"warn"!==o.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[$e],ngContentSelectors:gK,decls:1,vars:0,template:function(e,o){1&e&&(yn(),Li(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),r})(),lw=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[mt],mt]}),r})();function DK(r,t){if(1&r){const e=xu();ze(0,"button",13),Yt("click",function(){return jo(e),Yn(),Do(2).toggle()}),ze(1,"mat-icon",14),bi(2,"menu"),Ye(),Ye()}}let MK=(()=>{class r{constructor(e){this.breakpointObserver=e,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)").pipe(Re(o=>o.matches),function(r,t,e){let c,d=!1;return c=1/0,Ed({connector:()=>new AX(c,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}())}}return r.\u0275fac=function(e){return new(e||r)(K(IX))},r.\u0275cmp=Wt({type:r,selectors:[["app-primary-navig"]],decls:48,vars:14,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[1,"example-spacer"],["mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["examples","matMenu"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(e,o){if(1&e&&(ze(0,"mat-sidenav-container",0),ze(1,"mat-sidenav",1,2),Fu(3,"async"),Fu(4,"async"),Fu(5,"async"),ze(6,"mat-toolbar"),ze(7,"a",3),bi(8,"Menu"),Ye(),Ye(),ze(9,"mat-nav-list"),ze(10,"a",4),ze(11,"mat-icon"),bi(12," source "),Ye(),bi(13," Github"),Ye(),Di(14,"mat-divider"),ze(15,"a",5),ze(16,"mat-icon"),bi(17," https "),Ye(),bi(18," Demo online"),Ye(),Ye(),Ye(),ze(19,"mat-sidenav-content"),ze(20,"mat-toolbar",6),zn(21,DK,3,0,"button",7),Fu(22,"async"),ze(23,"span"),bi(24,"Automation per Blockly "),Ye(),Di(25,"span",8),ze(26,"button",9),ze(27,"mat-icon"),bi(28," file_download "),Ye(),Ye(),ze(29,"mat-menu",null,10),ze(31,"a",11),bi(32," Download "),Ye(),Ye(),ze(33,"button",9),ze(34,"mat-icon"),bi(35," source "),Ye(),Ye(),ze(36,"mat-menu",null,12),ze(38,"a",4),ze(39,"mat-icon"),bi(40," source "),Ye(),bi(41," Github"),Ye(),Di(42,"mat-divider"),ze(43,"a",5),ze(44,"mat-icon"),bi(45," https "),Ye(),bi(46," Demo online"),Ye(),Ye(),Ye(),Di(47,"router-outlet"),Ye(),Ye()),2&e){const a=Do(30),c=Do(37);zt(1),ri("mode",Bu(4,8,o.isHandset$)?"over":"side")("opened",!1===Bu(5,10,o.isHandset$)),Gt("role",Bu(3,6,o.isHandset$)?"dialog":"navigation"),zt(20),ri("ngIf",Bu(22,12,o.isHandset$)),zt(5),ri("matMenuTriggerFor",a),zt(7),ri("matMenuTriggerFor",c)}},directives:[G1,U1,KX,lK,gp,aK,SK,JX,aw,sc,KT,N1,x1,IC],pipes:[GI],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),r})(),RK=(()=>{class r{constructor(){this.title="AutoBlocklyApp"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=Wt({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){1&e&&Di(0,"app-primary-navig")},directives:[MK],styles:[""]}),r})(),cw=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[rr,mt,Cp],mt]}),r})();const FK={provide:new Ae("mat-autocomplete-scroll-strategy"),deps:[ms],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let UK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[FK],imports:[[El,d_,mt,rr],Ia,d_,mt]}),r})(),GK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[Wm,mt],mt]}),r})(),jK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[El,mt,bl],mt]}),r})(),JK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[mt,gs],mt]}),r})(),QK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[mt],mt]}),r})(),pN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})(),c$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[gs,mt,Cp,pN],mt,pN]}),r})();const _N=new Ae("mat-chips-default-options");let C$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[c_,{provide:_N,useValue:{separatorKeyCodes:[13]}}],imports:[[mt]]}),r})(),T$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[ld]]}),r})(),dw=(()=>{class r{constructor(){this.changes=new ve,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const N$={provide:dw,deps:[[new cn,new Bn,dw]],useFactory:function(r){return r||new dw}};let P$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[N$,c_],imports:[[mt,rr,bl,Ec,T$,lw,gs],mt]}),r})(),bN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[od]]}),r})(),F$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[c_],imports:[[bN,cw,mt],bN,cw]}),r})(),H$=(()=>{class r{constructor(){this.changes=new ve,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,o){return`${e} \u2013 ${o}`}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const J$={provide:new Ae("mat-datepicker-scroll-strategy"),deps:[ms],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let tJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[H$,J$],imports:[[rr,Ec,El,Wm,bl,mt],Ia]}),r})();function iJ(r,t){}class hw{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const nJ={dialogContainer:An("dialogContainer",[oi("void, exit",ut({opacity:0,transform:"scale(0.7)"})),oi("enter",ut({transform:"none"})),Ei("* => enter",Ri("150ms cubic-bezier(0, 0, 0.2, 1)",ut({transform:"none",opacity:1}))),Ei("* => void, * => exit",Ri("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",ut({opacity:0})))])};let rJ=(()=>{class r extends tw{constructor(e,o,a,c,d,p,f,v){super(),this._elementRef=e,this._focusTrapFactory=o,this._changeDetectorRef=a,this._config=d,this._interactivityChecker=p,this._ngZone=f,this._focusMonitor=v,this._animationStateChanged=new At,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=E=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(E)),this._ariaLabelledBy=d.ariaLabelledBy||null,this._document=c}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,o){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{e.addEventListener("blur",()=>e.removeAttribute("tabindex")),e.addEventListener("mousedown",()=>e.removeAttribute("tabindex"))})),e.focus(o)}_focusByCssSelector(e,o){let a=this._elementRef.nativeElement.querySelector(e);a&&this._forceFocus(a,o)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(o=>{o||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const o=rT(),a=this._elementRef.nativeElement;(!o||o===this._document.body||o===a||a.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=rT())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,o=rT();return e===o||e.contains(o)}}return r.\u0275fac=function(e){return new(e||r)(K(vt),K(JO),K(Rn),K(Lt,8),K(hw),K(aT),K(Jt),K(ko))},r.\u0275dir=Ne({type:r,viewQuery:function(e,o){if(1&e&&Mn(_1,7),2&e){let a;Rt(a=It())&&(o._portalOutlet=a.first)}},features:[$e]}),r})(),oJ=(()=>{class r extends rJ{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:o}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:o})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:o}))}_onAnimationStart({toState:e,totalTime:o}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:o}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:o})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return r.\u0275fac=function(){let t;return function(o){return(t||(t=ci(r)))(o||r)}}(),r.\u0275cmp=Wt({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,o){1&e&&cg("@dialogContainer.start",function(c){return o._onAnimationStart(c)})("@dialogContainer.done",function(c){return o._onAnimationDone(c)}),2&e&&(ga("id",o._id),Gt("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledBy)("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),dg("@dialogContainer",o._state))},features:[$e],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,o){1&e&&zn(0,iJ,0,0,"ng-template",0)},directives:[_1],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[nJ.dialogContainer]}}),r})(),sJ=0;class aJ{constructor(t,e,o="mat-dialog-"+sJ++){this._overlayRef=t,this._containerInstance=e,this.id=o,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new ve,this._afterClosed=new ve,this._beforeClosed=new ve,this._state=0,e._id=o,e._animationStateChanged.pipe(rn(a=>"opened"===a.state),hn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(rn(a=>"closed"===a.state),hn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(rn(a=>27===a.keyCode&&!this.disableClose&&!Oo(a))).subscribe(a=>{a.preventDefault(),TN(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():TN(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(rn(e=>"closing"===e.state),hn(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function TN(r,t,e){return void 0!==r._containerInstance&&(r._containerInstance._closeInteractionType=t),r.close(e)}const lJ=new Ae("MatDialogData"),cJ=new Ae("mat-dialog-default-options"),wN=new Ae("mat-dialog-scroll-strategy"),dJ={provide:wN,deps:[ms],useFactory:function(r){return()=>r.scrollStrategies.block()}};let hJ=(()=>{class r{constructor(e,o,a,c,d,p,f,v,E,D){this._overlay=e,this._injector=o,this._defaultOptions=a,this._parentDialog=c,this._overlayContainer=d,this._dialogRefConstructor=f,this._dialogContainerType=v,this._dialogDataToken=E,this._animationMode=D,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ve,this._afterOpenedAtThisLevel=new ve,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=pm(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(us(void 0))),this._scrollStrategy=p}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,o){if(o=function(r,t){return Qe(Qe({},t),r)}(o,this._defaultOptions||new hw),o.id&&this.getDialogById(o.id),this._dialogAnimatingOpen)return this._lastDialogRef;const a=this._createOverlay(o),c=this._attachDialogContainer(a,o);if("NoopAnimations"!==this._animationMode){const p=c._animationStateChanged.subscribe(f=>{"opening"===f.state&&(this._dialogAnimatingOpen=!0),"opened"===f.state&&(this._dialogAnimatingOpen=!1,p.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new l),this._animationStateSubscriptions.add(p)}const d=this._attachDialogContent(e,c,a,o);return this._lastDialogRef=d,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.afterClosed().subscribe(()=>this._removeOpenDialog(d)),this.afterOpened.next(d),c._initializeWithAttachedContent(),d}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(o=>o.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(e){const o=this._getOverlayConfig(e);return this._overlay.create(o)}_getOverlayConfig(e){const o=new __({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(o.backdropClass=e.backdropClass),o}_attachDialogContainer(e,o){const c=Pi.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:hw,useValue:o}]}),d=new ew(this._dialogContainerType,o.viewContainerRef,c,o.componentFactoryResolver);return e.attach(d).instance}_attachDialogContent(e,o,a,c){const d=new this._dialogRefConstructor(a,o,c.id);if(e instanceof Xn)o.attachTemplatePortal(new f_(e,null,{$implicit:c.data,dialogRef:d}));else{const p=this._createInjector(c,d,o),f=o.attachComponentPortal(new ew(e,c.viewContainerRef,p));d.componentInstance=f.instance}return d.updateSize(c.width,c.height).updatePosition(c.position),d}_createInjector(e,o,a){const c=e&&e.viewContainerRef&&e.viewContainerRef.injector,d=[{provide:this._dialogContainerType,useValue:a},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:o}];return e.direction&&(!c||!c.get(hs,null,bt.Optional))&&d.push({provide:hs,useValue:{value:e.direction,change:Dt()}}),Pi.create({parent:c||this._injector,providers:d})}_removeOpenDialog(e){const o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,c)=>{a?c.setAttribute("aria-hidden",a):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const o=e.parentElement.children;for(let a=o.length-1;a>-1;a--){let c=o[a];c!==e&&"SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName&&!c.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(c,c.getAttribute("aria-hidden")),c.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let o=e.length;for(;o--;)e[o].close()}}return r.\u0275fac=function(e){Iu()},r.\u0275dir=Ne({type:r}),r})(),pJ=(()=>{class r extends hJ{constructor(e,o,a,c,d,p,f,v){super(e,o,c,p,f,d,aJ,oJ,lJ,v)}}return r.\u0275fac=function(e){return new(e||r)(we(ms),we(Pi),we(zh,8),we(cJ,8),we(wN),we(r,12),we(rw),we(eo,8))},r.\u0275prov=Ke({token:r,factory:r.\u0275fac}),r})(),gJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[pJ,dJ],imports:[[El,bl,mt],mt]}),r})(),mJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})(),_J=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[rr,mt,mJ,bl]]}),r})(),yJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[u_,mt],u_,mt]}),r})();const SJ={provide:new Ae("mat-select-scroll-strategy"),deps:[ms],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let RN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[SJ],imports:[[rr,El,d_,mt],Ia,cw,d_,mt]}),r})();const IJ={provide:new Ae("mat-tooltip-scroll-strategy"),deps:[ms],useFactory:function(r){return()=>r.scrollStrategies.reposition({scrollThrottle:20})}};let IN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[IJ],imports:[[Wm,rr,El,mt],mt,Ia]}),r})(),pw=(()=>{class r{constructor(){this.changes=new ve,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,o,a)=>{if(0==a||0==o)return`0 of ${a}`;const c=e*o;return`${c+1} \u2013 ${c<(a=Math.max(a,0))?Math.min(c+o,a):c+o} of ${a}`}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const PJ={provide:pw,deps:[[new cn,new Bn,pw]],useFactory:function(r){return r||new pw}};let LJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[PJ],imports:[[rr,Ec,RN,IN,mt]]}),r})(),BJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[rr,mt],mt]}),r})();function VJ(r,t){if(1&r&&(kl(),Di(0,"circle",3)),2&r){const e=Yn();ho("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),Gt("r",e._getCircleRadius())}}function HJ(r,t){if(1&r&&(kl(),Di(0,"circle",3)),2&r){const e=Yn();ho("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),Gt("r",e._getCircleRadius())}}const GJ=vl(class{constructor(r){this._elementRef=r}},"primary"),jJ=new Ae("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class Cl extends GJ{constructor(t,e,o,a,c){super(t),this._document=o,this._diameter=100,this._value=0,this.mode="determinate";const d=Cl._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),d.has(o.head)||d.set(o.head,new Set([100])),this._noopAnimations="NoopAnimations"===a&&!!c&&!c._forceAnimations,c&&(c.diameter&&(this.diameter=c.diameter),c.strokeWidth&&(this.strokeWidth=c.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=Pr(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Pr(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Pr(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=jO(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,o=Cl._diameters;let a=o.get(t);if(!a||!a.has(e)){const c=this._document.createElement("style");c.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),c.textContent=this._getAnimationText(),t.appendChild(c),a||(a=new Set,o.set(t,a)),a.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Cl._diameters=new WeakMap,Cl.\u0275fac=function(t){return new(t||Cl)(K(vt),K(Cr),K(Lt,8),K(eo,8),K(jJ))},Cl.\u0275cmp=Wt({type:Cl,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(Gt("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),ho("width",e.diameter,"px")("height",e.diameter,"px"),Ti("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[$e],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(kl(),ze(0,"svg",0),zn(1,VJ,1,9,"circle",1),zn(2,HJ,1,7,"circle",2),Ye()),2&t&&(ho("width",e.diameter,"px")("height",e.diameter,"px"),ri("ngSwitch","indeterminate"===e.mode),Gt("viewBox",e._getViewBox()),zt(1),ri("ngSwitchCase",!0),zt(1),ri("ngSwitchCase",!1))},directives:[Kg,VI],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let YJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[mt,rr],mt]}),r})(),oQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[gs,mt],mt]}),r})(),NN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[rr,mt],mt]}),r})(),PN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})(),IQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[PN,gs,mt,Cp],PN,mt]}),r})(),OQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[El,bl,rr,Ec,mt],mt]}),r})(),mw=(()=>{class r{constructor(){this.changes=new ve}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Ke({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const PQ={provide:mw,deps:[[new cn,new Bn,mw]],useFactory:function(r){return r||new mw}};let LQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({providers:[PQ],imports:[[rr,mt]]}),r})(),JQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[iw]]}),r})(),pZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[JQ,mt],mt]}),r})(),bZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[rr,mt,bl,gs,Cp,Wm],mt]}),r})(),wZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({}),r})(),OZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r}),r.\u0275inj=it({imports:[[wZ,mt],mt]}),r})(),kZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ht({type:r,bootstrap:[RK]}),r.\u0275inj=it({providers:[],imports:[[ox,SX,qW,eY,NN,Ec,U6,UK,GK,jK,Ec,JK,QK,c$,C$,P$,tJ,gJ,X1,_J,yJ,lw,F$,q1,vX,uY,LJ,BJ,YJ,oQ,gs,RN,j1,NN,IQ,OQ,LQ,pZ,bZ,W1,IN,OZ,W1,Ec,j1,lw,q1]]}),r})();(function(){if(yR)throw new Error("Cannot enable prod mode after platform setup.");bR=!1})(),Wj().bootstrapModule(kZ).catch(r=>console.error(r))},84575:(T,I,m)=>{T.exports={interpreterHelper:m(19203),saveBlocksUrl:m(83435),saveLoad:m(82008)}},19203:(T,I,m)=>{I.createInterpreter=function(y,S){return{latestCode:"",workspace:y,BlocklyJavaScript:S,step:0,highlightPause:!1,myInterpreter:null,runner:null,generateCodeAndLoadIntoInterpreter:function(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(y),this.resetStepUi(!0)},resetStepUi:function(s){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1},resetInterpreter:function(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)},highlightBlock:function(s){this.workspace.highlightBlock(s),highlightPause=!0},runCode:function(s,n,l){this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var u=this;setTimeout(function(){this.highlightPause=!1,u.myInterpreter=s(u.latestCode,(h,_)=>u.initApiJS(h,_,u,n,l)),u.runner=function(){u.myInterpreter&&(u.myInterpreter.run()?setTimeout(u.runner,10):(l?l():console.log("\n\n<< Program complete >>"),u.resetInterpreter(),u.resetStepUi(!1)))},u.runner&&u.runner()},100)},initInterpreterWaitForSeconds:function(s,n){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var l=s.createAsyncFunction(function(u,h){setTimeout(h,1e3*u)});s.setProperty(n,"waitForSeconds",l)},doGet:function(s,n,l){console.log(s,n);let u=new XMLHttpRequest;if(u.open("GET",s,!0),l&&l.length>0)for(var h=0;h<l.length;h++){var _=l[h];u.setRequestHeader(_.name,_.value)}u.onreadystatechange=function(){if(4==u.readyState){if(u.status>=200&&u.status<300){var b=JSON.stringify({origHref:s,objectToSend:"",status:u.status,statusOK:!0,text:u.responseText});return n(b)}return b=JSON.stringify({origHref:s,objectToSend:"",status:u.status,statusOK:!1,text:u.responseText}),n(b)}},u.send(null)},exportToFile:function(s,n,l){var h,u=m(48086);return h=l?this.b64toBlob(n):new Blob([n],{type:"text/plain;charset=utf-8"}),u.saveAs(h,s),s},b64toBlob:function(s,n="",l=512){const u=atob(s),h=[];for(let b=0;b<u.length;b+=l){const M=u.slice(b,b+l),k=new Array(M.length);for(let U=0;U<M.length;U++)k[U]=M.charCodeAt(U);const H=new Uint8Array(k);h.push(H)}return new Blob(h,{type:n})},displayDateCurrentAsHuman:function(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},displayDateCurrentAsIso:function(){return(new Date).toISOString()},displayDateCurrentAsUnix:function(){return Date.now()},displayDateFormatted:function(s){switch(s){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:console.log("Date time format not suported")}},doPut:(s,n,l)=>{let u=n,h=new XMLHttpRequest;h.open("PUT",s,!0),h.setRequestHeader("Content-Type","application/json;charset=UTF-8"),h.onreadystatechange=function(){if(4==h.readyState){if(h.status>=200&&h.status<300){var _=JSON.stringify({origHref:s,objectToSend:n,status:h.status,statusOK:!0,text:h.responseText});return l(_)}return _=JSON.stringify({origHref:s,objectToSend:n,status:h.status,statusOK:!1,text:h.responseText}),l(_)}},h.send(u)},doDelete:(s,n)=>{var l=new XMLHttpRequest;l.open("DELETE",s,!0),l.onreadystatechange=function(){if(4==l.readyState){if(l.status>=200&&l.status<300){var u=JSON.stringify({origHref:s,objectToSend:"",status:l.status,statusOK:!0,text:l.responseText});return n(u)}return u=JSON.stringify({origHref:s,objectToSend:"",status:l.status,statusOK:!1,text:l.responseText}),n(u)}},l.send(null)},doPost:function(s,n,l){let u=n,h=new XMLHttpRequest;h.open("POST",s,!0),h.setRequestHeader("Content-Type","application/json;charset=UTF-8"),h.onreadystatechange=function(){if(4==h.readyState){if(h.status>=200&&h.status<300){var _=JSON.stringify({origHref:s,objectToSend:n,status:h.status,statusOK:!0,text:h.responseText});return l(_)}return _=JSON.stringify({origHref:s,objectToSend:n,status:h.status,statusOK:!1,text:h.responseText}),l(_)}},h.send(u)},initApiJS:function(s,n,l,u,h){s.setProperty(n,"errHandler",s.createNativeFunction(_=M=>{u?u("\n error --\n"+M+"\n error --"):console.log(M)}));var b=s.nativeToPseudo({"(localSite)":[]});s.setProperty(n,"headersForDomain",b),s.setProperty(n,"alert",s.createNativeFunction(_=function(M){M=M?M.toString():"",u?u(M):console.log(M)})),s.setProperty(n,"waitTime",s.createAsyncFunction(_=(M,k)=>{console.log(`waiting seconds ${M}`),setTimeout(k,1e3*M)})),s.setProperty(n,"displayDateFormatted",s.createNativeFunction(_=M=>l.displayDateFormatted(M))),s.setProperty(n,"exportToFile",s.createNativeFunction(_=(M,k,H)=>l.exportToFile(M,k,H))),s.setProperty(n,"convertToCSV",s.createNativeFunction(_=M=>{let k="object"!=typeof M?JSON.parse(M):{};return k=[Object.keys(k[0])].concat(k),k.map(U=>Object.values(U).toString()).join("\n")})),s.setProperty(n,"open",s.createNativeFunction(_=function(M){window.open(M)}));var _=function(M){return M=M?M.toString():"",s.createPrimitive(prompt(M))};s.setProperty(n,"prompt",s.createNativeFunction(_)),l.BlocklyJavaScript.addReservedWords("waitForSeconds"),_=s.createAsyncFunction(function(M,k){setTimeout(k,1e3*M)}),s.setProperty(n,"waitForSeconds",_),_=(M,k)=>{var H=s.pseudoToNative(b),U="(localSite)";(M.startsWith("http://")||M.startsWith("https://"))&&(U=new URL(M).hostname);var V=[];return U in H&&(V=H[U]),l.doGet(M,k,V)},s.setProperty(n,"getXhr",s.createAsyncFunction(_)),_=(M,k,H)=>{try{s.pseudoToNative(b);(M.startsWith("http://")||M.startsWith("https://"))&&new URL(M).hostname,l.doPost(M,k,H)}catch(X){alert("is an error"+X)}},s.setProperty(n,"postXhr",s.createAsyncFunction(_)),_=(M,k)=>{try{s.pseudoToNative(b);(M.startsWith("http://")||M.startsWith("https://"))&&new URL(M).hostname,l.doDelete(M,k)}catch(J){alert("is an error"+J)}},s.setProperty(n,"deleteXhr",s.createAsyncFunction(_)),_=(M,k,H)=>{try{var U=s.pseudoToNative(b),V="(localSite)";(M.startsWith("http://")||M.startsWith("https://"))&&(V=new URL(M).hostname);var J=[];V in U&&(J=U[V]),l.doPut(M,k,H,J,!1)}catch(j){alert("is an error"+j)}},s.setProperty(n,"putXhr",s.createAsyncFunction(_)),_=function(M){return M=M?M.toString():"",s.createPrimitive(l.highlightBlock(M))},s.setProperty(n,"highlightBlock",s.createNativeFunction(_))}}}},83435:(T,I)=>{I.saveState=function(S,s){var l=S.workspaceToDom(s,!0),u=S.domToPrettyText(l);window.localStorage.setItem("BlocklyState",u)},I.restoreState=function(S,s){var l=window.localStorage.getItem("BlocklyState");if(l){var u=S.textToDom(l);S.clearWorkspaceAndLoadFromXml(u,s)}return""}},82008:(T,I,m)=>{var y=m(48086);I.DownloadBlocks=function(S,s,n){var l=S.workspaceToDom(s,!0),u=S.domToPrettyText(l),h=new Blob([u],{type:"text/plain;charset=utf-16"});y.saveAs(h,n)},I.LoadFile=function(S,s,n){s.clear();var l=S.textToDom(n);S.domToWorkspace(l,s)}},85135:(T,I)=>{I.definitionBlocks=function(m,y){m.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.auth0webapidata=function(n){var b='{"client_id":'+y.valueToCode(n,"client_id",0);return b+=',"client_secret":'+y.valueToCode(n,"client_secret",0),b+=',"audience":'+y.valueToCode(n,"audience",0),b+=',"grant_type":'+y.valueToCode(n,"grant_type",0),[b+="}",99]}},I.fieldXML=function(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}},69570:(T,I)=>{I.definitionBlocks=function(m,y,S){m.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(S(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.comment=function(n){return"/*\n"+(y.valueToCode(n,"TEXT",0)||"''")+"\n*/;\n"}},I.fieldXML=function(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n'}},14147:(T,I)=>{I.definitionBlocks=function(m,y){m.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},y.converttojson=function(l){return["JSON.parse("+y.valueToCode(l,"ValueToConvert",0)+")",99]},m.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},y.converttostring=function(l){return["JSON.stringify("+y.valueToCode(l,"ValueToConvert",0)+")",99]},m.convertcsv={init:function(){this.appendDummyInput().appendField("Convert CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.convertcsv=function(l){return["convertToCSV("+y.valueToCode(l,"ArrayToConvert",y.ORDER_ATOMIC)+")",99]}},I.fieldXML=function(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}},52446:(T,I)=>{I.definitionBlocks=function(m,y,S,s){y.object_from_json=function(P){return[`JSON.parse(${y.valueToCode(P,"JSON",0)})`,99]},y.object_to_json=function(P){return[`JSON.stringify(${y.valueToCode(P,"object",0)})`,99]},y.object_get=function(P){const ae=P.getFieldValue("field_name");return[`${y.valueToCode(P,"object",0)}['${ae}']`,99]},y.object_set=function(P){const ae=P.getFieldValue("field_name");return`${y.valueToCode(P,"object_field",0)}['${ae}'] = ${y.valueToCode(P,"value_field",0)};\n`},y.object_create=function(P){if(!P.numFields)return["{}",99];let ae="";for(let q=1;q<=P.numFields;q++)ae+=`"${P.getFieldValue("field"+q)}": ${y.valueToCode(P,"field_input"+q,0)}, `;return[`{ ${ae} }`,99]};const U="object_field",V="object_create_mutator_top",J="#F99EA3",X=(P,...ae)=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[P]),j={type:"object_from_json",message0:X("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:J,tooltip:X("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};m.object_from_json={init:function(){this.jsonInit(j)}};const oe={type:"object_to_json",message0:X("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:J,tooltip:X("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};m.object_to_json={init:function(){this.jsonInit(oe)}};const ee={type:"object_get",message0:X("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:J,tooltip:X("object_get_json_tooltip"),helpUrl:""};m.object_get={init:function(){this.jsonInit(ee)}};const se={type:"object_set",message0:X("object_set_json"),args0:[{type:"field_input",name:"field_name",text:X("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:J,tooltip:X("object_set_json_tooltip"),helpUrl:""};m.object_set={init:function(){this.jsonInit(se)}};const Q={type:"object_create",message0:X("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:X("object_create_tooltip"),helpUrl:""};m.object_create={init:function(){this.jsonInit(Q)}};const ce={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:X("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};m[U]={init:function(){this.jsonInit(ce)}};const $={type:"object_create_mutator",message0:X("object_create"),nextStatement:null,colour:15,tooltip:X("object_create_tooltip"),helpUrl:""};m[V]={init:function(){this.jsonInit($)}},S.registerMutator("controls_create_mutator",{numFields:0,fields:[],domToMutation:function(P){this.fields=[];for(let W,ae=0;W=P.childNodes[ae];ae++)"field"==W.nodeName.toLowerCase()&&this.fields.push(W.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const P=document.createElement("mutation");P.setAttribute("num_fields",""+this.numFields);for(let ae=0;ae<this.fields.length;ae++){const W=document.createElement("field");W.setAttribute("name",this.fields[ae]),P.appendChild(W)}return P},compose:function(P){let ae=P.nextConnection&&P.nextConnection.targetBlock();this.numFields=0,this.fields=[];let W=[null];for(;ae;)this.fields.push(ae.getFieldValue("field_name")),this.numFields++,W.push(ae.savedConnection),ae=ae.nextConnection&&ae.nextConnection.targetBlock();this.updateShape();for(let q=1;q<=this.numFields;q++)Blockly.Mutator.reconnect(W[q],this,"field_input"+q)},decompose:function(P){const ae=P.newBlock(V);ae.initSvg();let W=ae.nextConnection;for(let q=0;q<this.fields.length;q++){const re=P.newBlock(U);re.initSvg(),re.setFieldValue(this.fields[q],"field_name"),W.connect(re.previousConnection),W=re.nextConnection}return ae},saveConnections:function(P){let ae=P.nextConnection&&P.nextConnection.targetBlock(),W=1;for(;ae;){const q=this.getInput("field_input"+W);ae.savedConnection=q&&q.connection.targetConnection,ae.setFieldValue(this.getFieldValue("field"+W),"field_name"),W++,ae=ae.nextConnection&&ae.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let P=1;for(;this.getInput("field_input"+P);)this.removeInput("field_input"+P),P++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let ae=1;ae<=this.numFields;ae++){const W=this.fields[ae-1];this.appendValueInput("field_input"+ae).setCheck(null).setAlign(1).appendField(s(W),"field"+ae)}}},null,["object_field"])},I.fieldXML=function(){return'    <category name="Objects" id="Objects">\n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n</category>\n'}},70081:(T,I)=>{I.definitionBlocks=function(m,y,S){m.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new S([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};y.displayCurrentDate=l=>{let h="";switch(l.getFieldValue("dateFormat").toString()){case"human":h="displayDateFormatted('human')";break;case"iso":h="displayDateFormatted('iso')";break;case"unix":h="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[h,99]}},I.fieldXML=function(){return'<block type="displayCurrentDate"></block>'}},55126:(T,I)=>{I.definitionBlocks=function(m,y){m.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},y.DateFromText=s=>["Date.parse("+(y.valueToCode(s,"VALUE",y.ORDER_ATOMIC)||"")+")",99]},I.fieldXML=function(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}},41175:(T,I)=>{I.generalBlocks=function(){return'\n    \n    <category name="BlocklyCore=>">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}},54766:(T,I)=>{I.definitionBlocks=function(m,y){m.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.exportfile=function(n){return"exportToFile("+y.valueToCode(n,"fileName",0)+","+y.valueToCode(n,"contentFile",0)+","+y.valueToCode(n,"convertToByte",0)+");\n"}},I.fieldXML=function(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},41944:(T,I)=>{I.definitionBlocks=function(m,y){m.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.filterList=function(S){var s=y.valueToCode(S,"LIST",y.ORDER_MEMBER)||"[]",n=y.valueToCode(S,"Logic",y.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var l="";return l+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+s+")).filter(function (item){ return "+n+";})",[l+="",y.ORDER_FUNCTION_CALL]},m.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.mapList=function(S){var s=y.valueToCode(S,"LIST",y.ORDER_MEMBER)||"[]",n=y.valueToCode(S,"Logic",y.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var l="";return l+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+s+")).map(function (item){ return "+n+";})",[l+="",y.ORDER_FUNCTION_CALL]}},I.fieldXML=function(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n\n        </category>\n\n'}},50929:(T,I)=>{I.definitionBlocks=function(m,y){m.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},y.window_open=function(n){return"open("+(y.valueToCode(n,"TEXT",99)||"''")+");\n"},m.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.valuefromtext=function(n){return["getIDProp("+y.valueToCode(n,"IdOfText",0)+","+(y.valueToCode(n,"ValueToObtain",0)||'"value"')+")",99]}},I.fieldXML=function(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_prompt_ext">\n    </block>\n    '}},78011:(T,I,m)=>{T.exports={defaultBlocks:m(41175),filterBlocks:m(41944),waitBlocks:m(62851),xhrBlocks:m(76989),propBlocks:m(35958),guiBlocks:m(50929),convertersBlocks:m(14147),exportFileBlock:m(54766),createObjectBlocks:m(52446),currentDateBlock:m(70081),dateFromTextBlock:m(55126),waitBlocks:m(35999),commentBlock:m(69570),auth0Blocks:m(85135)}},35958:(T,I)=>{I.definitionBlocks=function(m,y,S){m.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(S("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(S(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(S("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.modifyproperty=function(h){return y.valueToCode(h,"ObjectToChange",0)+"["+y.valueToCode(h,"PropertyName",0)+"]="+y.valueToCode(h,"NewValue",0)+";"},m.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(S("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(S("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},y.getproperty=function(h){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+y.valueToCode(h,"ObjectToChange",0)+"))["+y.valueToCode(h,"PropertyName",0)+"]",99]}},I.fieldXML=function(){return'\n    <category name="Objects" id="Objects">\n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n</category>\n'}},35999:(T,I)=>{I.definitionBlocks=function(m,y){m.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait=function(s){return"waitTime("+(y.valueToCode(s,"VALUE",y.ORDER_ATOMIC)||"")+");"},m.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait_until=function(s){return"waitTime(("+(y.valueToCode(s,"VALUE",0)||"")+"-new Date())/1000);"}},I.fieldXML=function(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}},62851:(T,I)=>{I.definitionBlocks=function(m,y){m([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),y.wait_seconds=function(S){return"waitForSeconds("+Number(S.getFieldValue("SECONDS"))+");\n"}},I.fieldXML=function(){return'\n  <block type="wait_seconds"></block>\n'}},76989:(T,I)=>{I.definitionBlocks=function(m,y,S){m.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.headersbeforehttp=function(l){var u=y.valueToCode(l,"HttpDomain",0)||"(localSite)",b="\n";return b+="{\n",b+="if(!("+u+" in headersForDomain))\n",b+="{\n",b+="headersForDomain["+u+"]=[];\n",b+="};\n",b+="var arr = headersForDomain["+u+"];\n",b+="arr.push({name:"+y.valueToCode(l,"HeaderName",0)+", value:"+y.valueToCode(l,"HeaderValue",0)+"});\n",b+='//alert("a" + JSON.stringify(arr)+"a");\n',(b+='//alert("a" + JSON.stringify(headersForDomain['+u+'])+"a");\n')+"};\n"},m.httprequest={init:function(){this.appendDummyInput().appendField(S([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(S([["GET","GET"],["POST","POST"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},y.httprequest=function(l){var u=l.getFieldValue("TypeOutput"),h=l.getFieldValue("TypeRequest"),_=y.valueToCode(l,"TheUrl",0),b=y.valueToCode(l,"Data",0),M="";switch(h.toString()){case"GET":M="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_+") )";break;case"POST":M="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_+","+b+") )"}var k=M;return"JSON"===u&&(k="JSON.parse("+k+")"),[k,99]}},I.fieldXML=function(){return'\n    <category id="XHR" name="Request">\n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n    \n</block>\n\n</category>\n'}},22456:(T,I,m)=>{var y=m(38506).default;T.exports=class{constructor(n){_s(this,"GenerateBlocks",[]),_s(this,"GenerateFunctions",[]),_s(this,"fieldXMLObjects",[]),_s(this,"fieldXMLFunctions",[]),_s(this,"hasError",!0),_s(this,"paths",[]),_s(this,"name",""),_s(this,"operations",[]),_s(this,"openApiDocument",null),_s(this,"basePath",""),this.swaggerUrl=n}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}`}findCategSwaggerFromPaths(){var n=this.paths.filter(u=>u&&u.id&&u.id.length>0).map(u=>{var h=u.id.indexOf("{");return h>0&&(u.id=u.id.substring(0,h)),u}).map(u=>(u.id.lastIndexOf("/")!=u.id.length-1&&(u.id+="/"),u));this.operations=n.filter(u=>u.nrOps>1).map(u=>({arr:u.id.split("/").filter(_=>_.length>0),id:u.id})).map(u=>({controller:u.arr[u.arr.length-1],id:u.id}));var l=n.filter(u=>1==u.nrOps).map(u=>({arr:u.id.split("/").filter(h=>h.length>0),id:u.id})).map(u=>1==u.arr.length?{controller:u.arr[0],id:u.id}:{controller:u.arr[u.arr.length-2],id:u.id});return this.operations.push(...l),[...new Set(this.operations.map(u=>u.controller))]}categSwagger(){var n=this.findHostNameRegular();(n=n.replaceAll(".","")).length>5&&n.substring(0,5);var h=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+h+'"></category><category name="AllApi" custom="api_'+h+'"></category>'}findRootSite(){var n=this.swaggerUrl,l="";if(n.startsWith("http://")||n.startsWith("https://")){var u=new URL(n);l=u.protocol+"//"+u.hostname,u.port.length>0&&(l+=u.port)}return l}findHostNameRegular(){var _,n=this.swaggerUrl,l="(localSite)";if(n.startsWith("http://")||n.startsWith("https://")){var u=new URL(n),h=null!=(_=u.port)?_:80;l=u.hostname+h}return l.replaceAll(".","")}ParseSwagger(){var n=this;return y(function*(){var M,l=n;l.fieldXMLObjects.push(`<label text="${l.swaggerUrl}"></label>`),l.fieldXMLFunctions.push({id:"",gui:`<label text="${l.swaggerUrl}"></label>`});var u=null;try{u=(yield m(12763).default(n.swaggerUrl)).spec}catch(k){return console.error(`parseSwagger ${n.swaggerUrl}`,k),l.fieldXMLObjects.push("<label text='Error parsing!'></label>"),n}n.hasError=!1,n.basePath=u.basePath||"";var _=null==(M=u.components)?void 0:M.schemas;return(null==_||null==_)&&(_=u.definitions),_?Object.keys(_).sort().forEach(function(k){l.fieldXMLObjects.push(`<block type="${k}"></block>`),l.GenerateBlocks.push(l.GenerateBlock(_[k],k))}):console.log("_A",u),u.paths&&Object.keys(u.paths).forEach(function(k){var H=u.paths[k];l.paths.push({id:k,nrOps:Object.keys(H).length}),Object.keys(H).forEach(function(U){l.GenerateFunctions.push(l.GenerateFunction(H,k,H[U],U))})}),l.openApiDocument=u,l})()}findProperties(n){var l=[];return n.properties&&Object.keys(n.properties).forEach(u=>{l.push({key:u,value:n.properties[u]})}),l}GenerateNameFunction(n,l,u,h){return h+"_"+l.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateFunction(n,l,u,h){var _=this,b=_.GenerateNameFunction(n,l,u,h),k=u;return _.fieldXMLFunctions.push({id:l,gui:`<block type="${b}"></block>`}),function(H,U,V){H[b]={init:function(){var J=l;J.length>15&&(J=J.substring(0,25)+"..."),this.appendDummyInput().appendField(V(h)).appendField(`${h} ${J}`);var X=_.findRootSite();if(k.parameters&&k.parameters.forEach(se=>{var Q=se.name;if(se.required&&(Q+="*"),se.schema&&se.schema.type)if("object"==se.schema.type){var ce=se.schema.$$ref||"";ce.length>0&&(Q+=":"+(ce=ce.substring(ce.lastIndexOf("/")+1)))}else Q+=":"+se.schema.type;this.appendValueInput(`val_${se.name}`).appendField(Q)}),k.requestBody){var j="";if(k.requestBody.content){var oe=k.requestBody.content["application/json"];if(oe&&oe.schema){var ee=oe.schema.$$ref;ee&&(j="=>"+ee.substring(ee.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+j).setCheck()}this.setTooltip(`${h} ${X}${l}`),this.setOutput(!0,"")}},U[b]=function(J){var ee=_.openApiDocument.paths[l][h],se=[];"parameters"in ee&&(se=ee.parameters);var Q=!1,ce=se.filter(le=>"body"==le.in).length>0;(ce||"requestBody"in ee)&&(Q=!0);var $={},Y={};Q&&($.val_values=U.valueToCode(J,"val_values",0),Y.val_values=$.val_values),se.forEach(le=>{$[`val_${le.name}`]=U.valueToCode(J,`val_${le.name}`,0)});var P=se.map(le=>le.name);Q&!ce&&P.push("values"),P.push("extraData"),se.map(le=>`\${obj['val_${le.name}']},`);var W="function(";W+=P.join(","),W+="){\n",W+='var strUrl ="'+_.findRootSite()+_.basePath+l+'";\n';var q=se.filter(le=>"query"==le.in);if(q.length>0){W+='strUrl+="?";\n;';var re=q.map(le=>`${le.name}={`+le.name+"}").join("&");W+='strUrl += "'+re+'";\n;'}var ie=se.filter(le=>"path"==le.in||"query"==le.in).map(le=>`strUrl = strUrl.replace("{${le.name}}",${le.name});`);if(W+=ie.join("\n"),W+=`\n{var res= ${h}Xhr(strUrl`,Q){var be="values";ce&&(be=se.filter(le=>"body"==le.in)[0].name),W+=`,JSON.stringify(${be})`}return W+=");\n",W+="var resJS=JSON.parse(res);\n",W+="if(resJS.statusOK) return resJS.text;\n",W+="errHandler(res);\n}\n",W+="}",W+="(",se.forEach(le=>{W+=$[`val_${le.name}`]+","}),Q&!ce&&(W+=Y.val_values+","),W+="1",[W+=")",99]}}}GenerateBlock(n,l){var u=this,h=l,b=u.findProperties(n);return function(M,k,H){M[h]={init:function(){var U=!1,V=[];n.enum&&(U=!0,V=Object.keys(n.enum).map(j=>[n.enum[j],j]));var X=this.appendDummyInput().appendField(l);U?X.appendField(H(V),`val_${l}`):b.forEach(j=>{var ce,oe=j.key;if(j.value.nullable&&0==j.value.nullable&&(oe+="*"),null==(ce=j.value)?void 0:ce.type){var ee=j.value.type||"";if("object"==ee){var se=j.value.$$ref||"";se.length>0&&(ee=se.substring(se.lastIndexOf("/")+1))}oe+=":"+ee}j.value.$ref&&(oe+="->"+j.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${j.key}`).appendField(`${oe}`)}),this.setOutput(!0,h)}},k[h]=function(U){{var V=!1;n.enum&&(V=!0);var J=u.findProperties(n);const ee=99,se=0;var X="",j=[];return J.forEach(Q=>{let ce=k.valueToCode(U,`val_${Q.key}`,se);""===ce&&(ce="null"),null==ce&&(ce="null"),j.push(`"${Q.key}":${ce}`)}),X="{ "+j.join(",")+" }",V&&(X=U.getFieldValue(`val_${l}`)),[X,ee]}}}}TranslateToBlocklyType(n){return"integer"==n?"Number":"string"==n?"String":"bool"==n?"Boolean":"array"==n?"Array":(console.error("not found TranslateToBlocklyType item"+n),"not found type"+n)}}},80184:(T,I,m)=>{T.exports={parseSwagger:m(44063),parseData:m(22456)}},44063:(T,I,m)=>{var y=m(38506).default;I.parseSwagger=function(){var n=y(function*(l){var H;new(m(22456))(l);var _=[],k=(yield m(50208).default(l)).response;return console.log(k.components.schemas),(null==(H=k.components)?void 0:H.schemas)&&Object.keys(k.components.schemas).forEach(function(U){_.push(function(n,l){var u=l;return n.properties&&Object.keys(n.properties).forEach(h=>{}),function(h,_){h[u]={init:function(){this.appendDummyInput().appendField(l),this.setOutput(!0,u)}}}}(k.components.schemas[U],U))}),_});return function(l){return n.apply(this,arguments)}}(),I.parseSwagger1=function(n){return m(50208).default(n)}},65612:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.Api=void 0;var y=m(16443);I.Api=function(n,l){void 0===l&&(l={}),this.entrypoint=n,y.assignSealed(this,l)}},97542:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.Field=void 0;var y=m(16443);I.Field=function(n,l){void 0===l&&(l={}),this.name=n,y.assignSealed(this,l)}},63039:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.Resource=void 0;var y=m(16443);I.Resource=function(n,l,u){void 0===u&&(u={}),this.name=n,this.url=l,y.assignSealed(this,u)}},36121:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.removeTrailingSlash=void 0;var S=m(2805).__importDefault(m(41510)),s=m(97542),n=m(63039),l=m(8272);I.removeTrailingSlash=function(_){return _.endsWith("/")&&(_=_.slice(0,-1)),_},I.default=function(_,b){return l.getResources(_.paths).map(function(H){var U=H.replace("/",""),V=I.removeTrailingSlash(b)+H,J=Object.keys(_.paths[H])[0],X=_.paths[H][J];if(!X.tags)throw new Error;var j=X.tags[0];if(!_.components)throw new Error;if(!_.components.schemas)throw new Error;var ee=_.components.schemas[j].properties;if(!ee)throw new Error;var se=Object.keys(ee),Q=S.default(_,["components","schemas",j,"required"],[]),ce=se.map(function($){return new s.Field($,{id:null,range:null,reference:null,required:!!Q.find(function(Y){return Y===$}),description:S.default(ee[$],"description","")})});return new n.Resource(U,V,{id:null,title:j,fields:ce,readableFields:ce,writableFields:ce})})}},50208:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});var y=m(2805),S=m(65612),s=y.__importStar(m(36121));I.default=function(l){return l=s.removeTrailingSlash(l),fetch(l).then(function(u){return Promise.all([u,u.json()])}).then(function(u){var h=u[0],_=u[1],b=_.info.title,M=s.default(_,l);return Promise.resolve({api:new S.Api(l,{title:b,resources:M}),response:_,status:h.status})},function(u){var h=u[0],_=u[1];return Promise.reject({api:new S.Api(l,{resources:[]}),response:_,status:h.status})})}},16443:(T,I)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.assignSealed=void 0,I.assignSealed=function(y,S){Object.keys(S).forEach(function(s){Object.defineProperty(y,s,{writable:!0,enumerable:!0,configurable:!1,value:S[s]})})}},8272:(T,I)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.getResources=void 0,I.getResources=function(y){var S=[];return Object.keys(y).forEach(function(s){s.includes("/{id}")||S.find(function(n){return n.startsWith("/"+s.split("/")[1])})||S.push(s)}),S}},53112:T=>{!function(){"use strict";T.exports=function(m){return(m instanceof Buffer?m:Buffer.from(m.toString(),"binary")).toString("base64")}}()},4220:(T,I,m)=>{"use strict";var y=m(1326),S=m(35956),s=S(y("String.prototype.indexOf"));T.exports=function(l,u){var h=y(l,!!u);return"function"==typeof h&&s(l,".prototype.")>-1?S(h):h}},35956:(T,I,m)=>{"use strict";var y=m(11138),S=m(1326),s=S("%Function.prototype.apply%"),n=S("%Function.prototype.call%"),l=S("%Reflect.apply%",!0)||y.call(n,s),u=S("%Object.getOwnPropertyDescriptor%",!0),h=S("%Object.defineProperty%",!0),_=S("%Math.max%");if(h)try{h({},"a",{value:1})}catch(M){h=null}T.exports=function(k){var H=l(y,n,arguments);if(u&&h){var U=u(H,"length");U.configurable&&h(H,"length",{value:1+_(0,k.length-(arguments.length-1))})}return H};var b=function(){return l(y,s,arguments)};h?h(T.exports,"apply",{value:b}):T.exports.apply=b},32946:(T,I)=>{"use strict";I.parse=function(h,_){if("string"!=typeof h)throw new TypeError("argument str must be a string");for(var b={},M=_||{},k=h.split(S),H=M.decode||m,U=0;U<k.length;U++){var V=k[U],J=V.indexOf("=");if(!(J<0)){var X=V.substr(0,J).trim(),j=V.substr(++J,V.length).trim();'"'==j[0]&&(j=j.slice(1,-1)),null==b[X]&&(b[X]=u(j,H))}}return b},I.serialize=function(h,_,b){var M=b||{},k=M.encode||y;if("function"!=typeof k)throw new TypeError("option encode is invalid");if(!s.test(h))throw new TypeError("argument name is invalid");var H=k(_);if(H&&!s.test(H))throw new TypeError("argument val is invalid");var U=h+"="+H;if(null!=M.maxAge){var V=M.maxAge-0;if(isNaN(V)||!isFinite(V))throw new TypeError("option maxAge is invalid");U+="; Max-Age="+Math.floor(V)}if(M.domain){if(!s.test(M.domain))throw new TypeError("option domain is invalid");U+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError("option path is invalid");U+="; Path="+M.path}if(M.expires){if("function"!=typeof M.expires.toUTCString)throw new TypeError("option expires is invalid");U+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(U+="; HttpOnly"),M.secure&&(U+="; Secure"),M.sameSite)switch("string"==typeof M.sameSite?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return U};var m=decodeURIComponent,y=encodeURIComponent,S=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function u(h,_){try{return _(h)}catch(b){return h}}},28430:(T,I,m)=>{m(21446),m(13122);var y=m(35361);T.exports=y.Array.from},19117:(T,I,m)=>{m(90418);var y=m(35361);T.exports=y.Array.isArray},14149:(T,I,m)=>{m(80706);var y=m(27824);T.exports=y("Array").concat},37311:(T,I,m)=>{m(68905),m(94666);var y=m(27824);T.exports=y("Array").entries},96154:(T,I,m)=>{m(81136);var y=m(27824);T.exports=y("Array").filter},68592:(T,I,m)=>{m(89543);var y=m(27824);T.exports=y("Array").find},52535:(T,I,m)=>{m(46152);var y=m(27824);T.exports=y("Array").forEach},39457:(T,I,m)=>{m(96875);var y=m(27824);T.exports=y("Array").includes},7184:(T,I,m)=>{m(22616);var y=m(27824);T.exports=y("Array").indexOf},45218:(T,I,m)=>{m(36850);var y=m(27824);T.exports=y("Array").map},30705:(T,I,m)=>{m(62693);var y=m(27824);T.exports=y("Array").slice},22280:(T,I,m)=>{m(72101);var y=m(27824);T.exports=y("Array").splice},38615:(T,I,m)=>{m(68905),m(21446);var y=m(27556);T.exports=y},59597:(T,I,m)=>{var y=m(49778),S=m(14149),s=Array.prototype;T.exports=function(n){var l=n.concat;return n===s||y(s,n)&&l===s.concat?S:l}},46824:(T,I,m)=>{var y=m(49778),S=m(96154),s=Array.prototype;T.exports=function(n){var l=n.filter;return n===s||y(s,n)&&l===s.filter?S:l}},45600:(T,I,m)=>{var y=m(49778),S=m(68592),s=Array.prototype;T.exports=function(n){var l=n.find;return n===s||y(s,n)&&l===s.find?S:l}},85923:(T,I,m)=>{var y=m(49778),S=m(39457),s=m(48781),n=Array.prototype,l=String.prototype;T.exports=function(u){var h=u.includes;return u===n||y(n,u)&&h===n.includes?S:"string"==typeof u||u===l||y(l,u)&&h===l.includes?s:h}},77146:(T,I,m)=>{var y=m(49778),S=m(7184),s=Array.prototype;T.exports=function(n){var l=n.indexOf;return n===s||y(s,n)&&l===s.indexOf?S:l}},24773:(T,I,m)=>{var y=m(49778),S=m(45218),s=Array.prototype;T.exports=function(n){var l=n.map;return n===s||y(s,n)&&l===s.map?S:l}},58445:(T,I,m)=>{var y=m(49778),S=m(30705),s=Array.prototype;T.exports=function(n){var l=n.slice;return n===s||y(s,n)&&l===s.slice?S:l}},8138:(T,I,m)=>{var y=m(49778),S=m(22280),s=Array.prototype;T.exports=function(n){var l=n.splice;return n===s||y(s,n)&&l===s.splice?S:l}},41108:(T,I,m)=>{var y=m(49778),S=m(30566),s=String.prototype;T.exports=function(n){var l=n.startsWith;return"string"==typeof n||n===s||y(s,n)&&l===s.startsWith?S:l}},27615:(T,I,m)=>{m(39481);var y=m(35361),S=m(27549);y.JSON||(y.JSON={stringify:JSON.stringify}),T.exports=function(n,l,u){return S(y.JSON.stringify,null,arguments)}},92889:(T,I,m)=>{m(1476);var y=m(35361);T.exports=y.Object.assign},5318:(T,I,m)=>{m(63851);var S=m(35361).Object,s=T.exports=function(l,u){return S.defineProperties(l,u)};S.defineProperties.sham&&(s.sham=!0)},75634:(T,I,m)=>{m(23179);var S=m(35361).Object,s=T.exports=function(l,u,h){return S.defineProperty(l,u,h)};S.defineProperty.sham&&(s.sham=!0)},36669:(T,I,m)=>{m(69178);var y=m(35361);T.exports=y.Object.entries},88095:(T,I,m)=>{m(67827);var S=m(35361).Object,s=T.exports=function(l,u){return S.getOwnPropertyDescriptor(l,u)};S.getOwnPropertyDescriptor.sham&&(s.sham=!0)},89439:(T,I,m)=>{m(53603);var y=m(35361);T.exports=y.Object.getOwnPropertyDescriptors},13799:(T,I,m)=>{m(5001);var y=m(35361);T.exports=y.Object.getOwnPropertySymbols},33054:(T,I,m)=>{m(63596);var y=m(35361);T.exports=y.Object.keys},649:(T,I,m)=>{m(96476),m(68905),m(94666),m(47110),m(5823),m(78084),m(31296),m(21446);var y=m(35361);T.exports=y.Promise},48781:(T,I,m)=>{m(54840);var y=m(27824);T.exports=y("String").includes},30566:(T,I,m)=>{m(93784);var y=m(27824);T.exports=y("String").startsWith},67079:(T,I,m)=>{m(80706),m(94666),m(5001),m(55623),m(19060),m(43364),m(97447),m(70830),m(85873),m(5623),m(98499),m(81281),m(91348),m(25609),m(69538),m(64827),m(5256),m(897),m(6603),m(73609);var y=m(35361);T.exports=y.Symbol},41519:(T,I,m)=>{m(68905),m(94666),m(21446),m(70830);var y=m(12506);T.exports=y.f("iterator")},21643:(T,I,m)=>{m(68905),m(94666),m(58871);var y=m(35361);T.exports=y.WeakMap},15814:(T,I,m)=>{var y=m(16775);T.exports=y},80345:(T,I,m)=>{var y=m(4718);T.exports=y},90974:(T,I,m)=>{var y=m(81826);T.exports=y},23458:(T,I,m)=>{var y=m(40779);T.exports=y},75223:(T,I,m)=>{var y=m(48596);T.exports=y},31151:(T,I,m)=>{var y=m(35093);T.exports=y},31175:(T,I,m)=>{var y=m(71166);T.exports=y},60918:(T,I,m)=>{var y=m(71258);T.exports=y},68625:(T,I,m)=>{var y=m(72102);T.exports=y},58917:(T,I,m)=>{var y=m(87440);T.exports=y},2126:(T,I,m)=>{var y=m(48021);T.exports=y},93648:(T,I,m)=>{var y=m(4490);T.exports=y},58300:(T,I,m)=>{var y=m(16625);T.exports=y},7137:(T,I,m)=>{var y=m(95609);m(69797),m(24101),m(1127),m(96860),T.exports=y},24435:(T,I,m)=>{var y=m(35875);m(67924),m(27907),m(59331),m(97515),m(97601),m(61061),m(98377),T.exports=y},30218:(T,I,m)=>{var y=m(34542);T.exports=y},62057:(T,I,m)=>{var y=m(71186),S=m(89982),s=m(75885),n=y.TypeError;T.exports=function(l){if(S(l))return l;throw n(s(l)+" is not a function")}},12144:(T,I,m)=>{var y=m(71186),S=m(2043),s=m(75885),n=y.TypeError;T.exports=function(l){if(S(l))return l;throw n(s(l)+" is not a constructor")}},57690:(T,I,m)=>{var y=m(71186),S=m(89982),s=y.String,n=y.TypeError;T.exports=function(l){if("object"==typeof l||S(l))return l;throw n("Can't set "+s(l)+" as a prototype")}},81382:T=>{T.exports=function(){}},37368:(T,I,m)=>{var y=m(71186),S=m(49778),s=y.TypeError;T.exports=function(n,l){if(S(l,n))return n;throw s("Incorrect invocation")}},64808:(T,I,m)=>{var y=m(71186),S=m(4559),s=y.String,n=y.TypeError;T.exports=function(l){if(S(l))return l;throw n(s(l)+" is not an object")}},99844:(T,I,m)=>{var y=m(72194);T.exports=y(function(){if("function"==typeof ArrayBuffer){var S=new ArrayBuffer(8);Object.isExtensible(S)&&Object.defineProperty(S,"a",{value:8})}})},7330:(T,I,m)=>{"use strict";var y=m(32794).forEach,s=m(79444)("forEach");T.exports=s?[].forEach:function(l){return y(this,l,arguments.length>1?arguments[1]:void 0)}},96005:(T,I,m)=>{"use strict";var y=m(71186),S=m(56875),s=m(74217),n=m(12784),l=m(8025),u=m(23969),h=m(2043),_=m(50842),b=m(68140),M=m(80009),k=m(27556),H=y.Array;T.exports=function(V){var J=n(V),X=h(this),j=arguments.length,oe=j>1?arguments[1]:void 0,ee=void 0!==oe;ee&&(oe=S(oe,j>2?arguments[2]:void 0));var ce,$,Y,P,ae,W,se=k(J),Q=0;if(!se||this==H&&u(se))for(ce=_(J),$=X?new this(ce):H(ce);ce>Q;Q++)W=ee?oe(J[Q],Q):J[Q],b($,Q,W);else for(ae=(P=M(J,se)).next,$=X?new this:[];!(Y=s(ae,P)).done;Q++)W=ee?l(P,oe,[Y.value,Q],!0):Y.value,b($,Q,W);return $.length=Q,$}},77118:(T,I,m)=>{var y=m(38611),S=m(40771),s=m(50842),n=function(l){return function(u,h,_){var H,b=y(u),M=s(b),k=S(_,M);if(l&&h!=h){for(;M>k;)if((H=b[k++])!=H)return!0}else for(;M>k;k++)if((l||k in b)&&b[k]===h)return l||k||0;return!l&&-1}};T.exports={includes:n(!0),indexOf:n(!1)}},32794:(T,I,m)=>{var y=m(56875),S=m(83232),s=m(28560),n=m(12784),l=m(50842),u=m(75458),h=S([].push),_=function(b){var M=1==b,k=2==b,H=3==b,U=4==b,V=6==b,J=7==b,X=5==b||V;return function(j,oe,ee,se){for(var q,re,Q=n(j),ce=s(Q),$=y(oe,ee),Y=l(ce),P=0,ae=se||u,W=M?ae(j,Y):k||J?ae(j,0):void 0;Y>P;P++)if((X||P in ce)&&(re=$(q=ce[P],P,Q),b))if(M)W[P]=re;else if(re)switch(b){case 3:return!0;case 5:return q;case 6:return P;case 2:h(W,q)}else switch(b){case 4:return!1;case 7:h(W,q)}return V?-1:H||U?U:W}};T.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6),filterReject:_(7)}},63294:(T,I,m)=>{var y=m(72194),S=m(51227),s=m(47803),n=S("species");T.exports=function(l){return s>=51||!y(function(){var u=[];return(u.constructor={})[n]=function(){return{foo:1}},1!==u[l](Boolean).foo})}},79444:(T,I,m)=>{"use strict";var y=m(72194);T.exports=function(S,s){var n=[][S];return!!n&&y(function(){n.call(null,s||function(){throw 1},1)})}},60462:(T,I,m)=>{var y=m(83232);T.exports=y([].slice)},25278:(T,I,m)=>{var y=m(60462),S=Math.floor,s=function(u,h){var _=u.length,b=S(_/2);return _<8?n(u,h):l(u,s(y(u,0,b),h),s(y(u,b),h),h)},n=function(u,h){for(var M,k,_=u.length,b=1;b<_;){for(k=b,M=u[b];k&&h(u[k-1],M)>0;)u[k]=u[--k];k!==b++&&(u[k]=M)}return u},l=function(u,h,_,b){for(var M=h.length,k=_.length,H=0,U=0;H<M||U<k;)u[H+U]=H<M&&U<k?b(h[H],_[U])<=0?h[H++]:_[U++]:H<M?h[H++]:_[U++];return u};T.exports=s},55666:(T,I,m)=>{var y=m(71186),S=m(21284),s=m(2043),n=m(4559),u=m(51227)("species"),h=y.Array;T.exports=function(_){var b;return S(_)&&(s(b=_.constructor)&&(b===h||S(b.prototype))||n(b)&&null===(b=b[u]))&&(b=void 0),void 0===b?h:b}},75458:(T,I,m)=>{var y=m(55666);T.exports=function(S,s){return new(y(S))(0===s?0:s)}},8025:(T,I,m)=>{var y=m(64808),S=m(48508);T.exports=function(s,n,l,u){try{return u?n(y(l)[0],l[1]):n(l)}catch(h){S(s,"throw",h)}}},92807:(T,I,m)=>{var S=m(51227)("iterator"),s=!1;try{var n=0,l={next:function(){return{done:!!n++}},return:function(){s=!0}};l[S]=function(){return this},Array.from(l,function(){throw 2})}catch(u){}T.exports=function(u,h){if(!h&&!s)return!1;var _=!1;try{var b={};b[S]=function(){return{next:function(){return{done:_=!0}}}},u(b)}catch(M){}return _}},36166:(T,I,m)=>{var y=m(83232),S=y({}.toString),s=y("".slice);T.exports=function(n){return s(S(n),8,-1)}},36346:(T,I,m)=>{var y=m(71186),S=m(98086),s=m(89982),n=m(36166),u=m(51227)("toStringTag"),h=y.Object,_="Arguments"==n(function(){return arguments}());T.exports=S?n:function(M){var k,H,U;return void 0===M?"Undefined":null===M?"Null":"string"==typeof(H=function(M,k){try{return M[k]}catch(H){}}(k=h(M),u))?H:_?n(k):"Object"==(U=n(k))&&s(k.callee)?"Arguments":U}},84089:(T,I,m)=>{var y=m(83232),S=m(60462),s=y("".replace),n=y("".split),l=y([].join),u=String(Error("zxcasd").stack),h=/\n\s*at [^:]*:[^\n]*/,_=h.test(u),b=/@[^\n]*\n/.test(u)&&!/zxcasd/.test(u);T.exports=function(M,k){if("string"!=typeof M)return M;if(_)for(;k--;)M=s(M,h,"");else if(b)return l(S(n(M,"\n"),k),"\n");return M}},2387:(T,I,m)=>{"use strict";var y=m(83232),S=m(61306),s=m(77699).getWeakData,n=m(64808),l=m(4559),u=m(37368),h=m(64837),_=m(32794),b=m(63262),M=m(59066),k=M.set,H=M.getterFor,U=_.find,V=_.findIndex,J=y([].splice),X=0,j=function(se){return se.frozen||(se.frozen=new oe)},oe=function(){this.entries=[]},ee=function(se,Q){return U(se.entries,function(ce){return ce[0]===Q})};oe.prototype={get:function(se){var Q=ee(this,se);if(Q)return Q[1]},has:function(se){return!!ee(this,se)},set:function(se,Q){var ce=ee(this,se);ce?ce[1]=Q:this.entries.push([se,Q])},delete:function(se){var Q=V(this.entries,function(ce){return ce[0]===se});return~Q&&J(this.entries,Q,1),!!~Q}},T.exports={getConstructor:function(se,Q,ce,$){var Y=se(function(q,re){u(q,P),k(q,{type:Q,id:X++,frozen:void 0}),null!=re&&h(re,q[$],{that:q,AS_ENTRIES:ce})}),P=Y.prototype,ae=H(Q),W=function(q,re,ie){var be=ae(q),le=s(n(re),!0);return!0===le?j(be).set(re,ie):le[be.id]=ie,q};return S(P,{delete:function(q){var re=ae(this);if(!l(q))return!1;var ie=s(q);return!0===ie?j(re).delete(q):ie&&b(ie,re.id)&&delete ie[re.id]},has:function(re){var ie=ae(this);if(!l(re))return!1;var be=s(re);return!0===be?j(ie).has(re):be&&b(be,ie.id)}}),S(P,ce?{get:function(re){var ie=ae(this);if(l(re)){var be=s(re);return!0===be?j(ie).get(re):be?be[ie.id]:void 0}},set:function(re,ie){return W(this,re,ie)}}:{add:function(re){return W(this,re,!0)}}),Y}}},8394:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(77699),n=m(72194),l=m(30259),u=m(64837),h=m(37368),_=m(89982),b=m(4559),M=m(81488),k=m(38360).f,H=m(32794).forEach,U=m(93628),V=m(59066),J=V.set,X=V.getterFor;T.exports=function(j,oe,ee){var ae,se=-1!==j.indexOf("Map"),Q=-1!==j.indexOf("Weak"),ce=se?"set":"add",$=S[j],Y=$&&$.prototype,P={};if(U&&_($)&&(Q||Y.forEach&&!n(function(){(new $).entries().next()}))){var W=(ae=oe(function(re,ie){J(h(re,W),{type:j,collection:new $}),null!=ie&&u(ie,re[ce],{that:re,AS_ENTRIES:se})})).prototype,q=X(j);H(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(re){var ie="add"==re||"set"==re;re in Y&&(!Q||"clear"!=re)&&l(W,re,function(be,le){var fe=q(this).collection;if(!ie&&Q&&!b(be))return"get"==re&&void 0;var Se=fe[re](0===be?0:be,le);return ie?this:Se})}),Q||k(W,"size",{configurable:!0,get:function(){return q(this).collection.size}})}else ae=ee.getConstructor(oe,j,se,ce),s.enable();return M(ae,j,!1,!0),P[j]=ae,y({global:!0,forced:!0},P),Q||ee.setStrong(ae,j,se),ae}},78356:(T,I,m)=>{var y=m(63262),S=m(69093),s=m(3182),n=m(38360);T.exports=function(l,u){for(var h=S(u),_=n.f,b=s.f,M=0;M<h.length;M++){var k=h[M];y(l,k)||_(l,k,b(u,k))}}},80736:(T,I,m)=>{var S=m(51227)("match");T.exports=function(s){var n=/./;try{"/./"[s](n)}catch(l){try{return n[S]=!1,"/./"[s](n)}catch(u){}}return!1}},65192:(T,I,m)=>{var y=m(72194);T.exports=!y(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype})},68603:(T,I,m)=>{"use strict";var y=m(17518).IteratorPrototype,S=m(47579),s=m(79695),n=m(81488),l=m(57160),u=function(){return this};T.exports=function(h,_,b){var M=_+" Iterator";return h.prototype=S(y,{next:s(1,b)}),n(h,M,!1,!0),l[M]=u,h}},30259:(T,I,m)=>{var y=m(93628),S=m(38360),s=m(79695);T.exports=y?function(n,l,u){return S.f(n,l,s(1,u))}:function(n,l,u){return n[l]=u,n}},79695:T=>{T.exports=function(I,m){return{enumerable:!(1&I),configurable:!(2&I),writable:!(4&I),value:m}}},68140:(T,I,m)=>{"use strict";var y=m(66943),S=m(38360),s=m(79695);T.exports=function(n,l,u){var h=y(l);h in n?S.f(n,h,s(0,u)):n[h]=u}},8672:(T,I,m)=>{"use strict";var y=m(47695),S=m(74217),s=m(83546),n=m(88197),l=m(89982),u=m(68603),h=m(41340),_=m(86447),b=m(81488),M=m(30259),k=m(64519),H=m(51227),U=m(57160),V=m(17518),J=n.PROPER,X=n.CONFIGURABLE,j=V.IteratorPrototype,oe=V.BUGGY_SAFARI_ITERATORS,ee=H("iterator"),Q="values",ce="entries",$=function(){return this};T.exports=function(Y,P,ae,W,q,re,ie){u(ae,P,W);var De,xe,Re,be=function(ke){if(ke===q&&me)return me;if(!oe&&ke in Se)return Se[ke];switch(ke){case"keys":case Q:case ce:return function(){return new ae(this,ke)}}return function(){return new ae(this)}},le=P+" Iterator",fe=!1,Se=Y.prototype,ve=Se[ee]||Se["@@iterator"]||q&&Se[q],me=!oe&&ve||be(q),Ie="Array"==P&&Se.entries||ve;if(Ie&&(De=h(Ie.call(new Y)))!==Object.prototype&&De.next&&(!s&&h(De)!==j&&(_?_(De,j):l(De[ee])||k(De,ee,$)),b(De,le,!0,!0),s&&(U[le]=$)),J&&q==Q&&ve&&ve.name!==Q&&(!s&&X?M(Se,"name",Q):(fe=!0,me=function(){return S(ve,this)})),q)if(xe={values:be(Q),keys:re?me:be("keys"),entries:be(ce)},ie)for(Re in xe)(oe||fe||!(Re in Se))&&k(Se,Re,xe[Re]);else y({target:P,proto:!0,forced:oe||fe},xe);return(!s||ie)&&Se[ee]!==me&&k(Se,ee,me,{name:q}),U[P]=me,xe}},35985:(T,I,m)=>{var y=m(35361),S=m(63262),s=m(12506),n=m(38360).f;T.exports=function(l){var u=y.Symbol||(y.Symbol={});S(u,l)||n(u,l,{value:s.f(l)})}},93628:(T,I,m)=>{var y=m(72194);T.exports=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},67386:(T,I,m)=>{var y=m(71186),S=m(4559),s=y.document,n=S(s)&&S(s.createElement);T.exports=function(l){return n?s.createElement(l):{}}},27634:T=>{T.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},33700:T=>{T.exports="object"==typeof window},33763:(T,I,m)=>{var y=m(96535),S=m(71186);T.exports=/ipad|iphone|ipod/i.test(y)&&void 0!==S.Pebble},30346:(T,I,m)=>{var y=m(96535);T.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(y)},62151:(T,I,m)=>{var y=m(36166),S=m(71186);T.exports="process"==y(S.process)},145:(T,I,m)=>{var y=m(96535);T.exports=/web0s(?!.*chrome)/i.test(y)},96535:(T,I,m)=>{var y=m(31542);T.exports=y("navigator","userAgent")||""},47803:(T,I,m)=>{var h,_,y=m(71186),S=m(96535),s=y.process,n=y.Deno,l=s&&s.versions||n&&n.version,u=l&&l.v8;u&&(_=(h=u.split("."))[0]>0&&h[0]<4?1:+(h[0]+h[1])),!_&&S&&(!(h=S.match(/Edge\/(\d+)/))||h[1]>=74)&&(h=S.match(/Chrome\/(\d+)/))&&(_=+h[1]),T.exports=_},27824:(T,I,m)=>{var y=m(35361);T.exports=function(S){return y[S+"Prototype"]}},30412:T=>{T.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},59154:(T,I,m)=>{var y=m(72194),S=m(79695);T.exports=!y(function(){var s=Error("a");return!("stack"in s)||(Object.defineProperty(s,"stack",S(1,7)),7!==s.stack)})},47695:(T,I,m)=>{"use strict";var y=m(71186),S=m(27549),s=m(83232),n=m(89982),l=m(3182).f,u=m(33699),h=m(35361),_=m(56875),b=m(30259),M=m(63262),k=function(H){var U=function(V,J,X){if(this instanceof U){switch(arguments.length){case 0:return new H;case 1:return new H(V);case 2:return new H(V,J)}return new H(V,J,X)}return S(H,this,arguments)};return U.prototype=H.prototype,U};T.exports=function(H,U){var ce,$,Y,P,ae,W,q,re,V=H.target,J=H.global,X=H.stat,j=H.proto,oe=J?y:X?y[V]:(y[V]||{}).prototype,ee=J?h:h[V]||b(h,V,{})[V],se=ee.prototype;for(Y in U)ce=!u(J?Y:V+(X?".":"#")+Y,H.forced)&&oe&&M(oe,Y),ae=ee[Y],ce&&(W=H.noTargetGet?(re=l(oe,Y))&&re.value:oe[Y]),P=ce&&W?W:U[Y],(!ce||typeof ae!=typeof P)&&(q=H.bind&&ce?_(P,y):H.wrap&&ce?k(P):j&&n(P)?s(P):P,(H.sham||P&&P.sham||ae&&ae.sham)&&b(q,"sham",!0),b(ee,Y,q),j&&(M(h,$=V+"Prototype")||b(h,$,{}),b(h[$],Y,P),H.real&&se&&!se[Y]&&b(se,Y,P)))}},72194:T=>{T.exports=function(I){try{return!!I()}catch(m){return!0}}},418:(T,I,m)=>{var y=m(72194);T.exports=!y(function(){return Object.isExtensible(Object.preventExtensions({}))})},27549:T=>{var I=Function.prototype,m=I.apply,S=I.call;T.exports="object"==typeof Reflect&&Reflect.apply||(I.bind?S.bind(m):function(){return S.apply(m,arguments)})},56875:(T,I,m)=>{var y=m(83232),S=m(62057),s=y(y.bind);T.exports=function(n,l){return S(n),void 0===l?n:s?s(n,l):function(){return n.apply(l,arguments)}}},74217:T=>{var I=Function.prototype.call;T.exports=I.bind?I.bind(I):function(){return I.apply(I,arguments)}},88197:(T,I,m)=>{var y=m(93628),S=m(63262),s=Function.prototype,n=y&&Object.getOwnPropertyDescriptor,l=S(s,"name"),u=l&&"something"===function(){}.name,h=l&&(!y||y&&n(s,"name").configurable);T.exports={EXISTS:l,PROPER:u,CONFIGURABLE:h}},83232:T=>{var I=Function.prototype,m=I.bind,y=I.call,S=m&&m.bind(y);T.exports=m?function(s){return s&&S(y,s)}:function(s){return s&&function(){return y.apply(s,arguments)}}},31542:(T,I,m)=>{var y=m(35361),S=m(71186),s=m(89982),n=function(l){return s(l)?l:void 0};T.exports=function(l,u){return arguments.length<2?n(y[l])||n(S[l]):y[l]&&y[l][u]||S[l]&&S[l][u]}},27556:(T,I,m)=>{var y=m(36346),S=m(82209),s=m(57160),l=m(51227)("iterator");T.exports=function(u){if(null!=u)return S(u,l)||S(u,"@@iterator")||s[y(u)]}},80009:(T,I,m)=>{var y=m(71186),S=m(74217),s=m(62057),n=m(64808),l=m(75885),u=m(27556),h=y.TypeError;T.exports=function(_,b){var M=arguments.length<2?u(_):b;if(s(M))return n(S(M,_));throw h(l(_)+" is not iterable")}},82209:(T,I,m)=>{var y=m(62057);T.exports=function(S,s){var n=S[s];return null==n?void 0:y(n)}},71186:T=>{var I=function(m){return m&&m.Math==Math&&m};T.exports=I("object"==typeof globalThis&&globalThis)||I("object"==typeof window&&window)||I("object"==typeof self&&self)||I("object"==typeof global&&global)||function(){return this}()||Function("return this")()},63262:(T,I,m)=>{var y=m(83232),S=m(12784),s=y({}.hasOwnProperty);T.exports=Object.hasOwn||function(l,u){return s(S(l),u)}},16998:T=>{T.exports={}},38478:(T,I,m)=>{var y=m(71186);T.exports=function(S,s){var n=y.console;n&&n.error&&(1==arguments.length?n.error(S):n.error(S,s))}},44737:(T,I,m)=>{var y=m(31542);T.exports=y("document","documentElement")},36546:(T,I,m)=>{var y=m(93628),S=m(72194),s=m(67386);T.exports=!y&&!S(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},28560:(T,I,m)=>{var y=m(71186),S=m(83232),s=m(72194),n=m(36166),l=y.Object,u=S("".split);T.exports=s(function(){return!l("z").propertyIsEnumerable(0)})?function(h){return"String"==n(h)?u(h,""):l(h)}:l},96307:(T,I,m)=>{var y=m(83232),S=m(89982),s=m(85452),n=y(Function.toString);S(s.inspectSource)||(s.inspectSource=function(l){return n(l)}),T.exports=s.inspectSource},369:(T,I,m)=>{var y=m(4559),S=m(30259);T.exports=function(s,n){y(n)&&"cause"in n&&S(s,"cause",n.cause)}},77699:(T,I,m)=>{var y=m(47695),S=m(83232),s=m(16998),n=m(4559),l=m(63262),u=m(38360).f,h=m(80679),_=m(22690),b=m(67616),M=m(39900),k=m(418),H=!1,U=M("meta"),V=0,J=function(Q){u(Q,U,{value:{objectID:"O"+V++,weakData:{}}})},se=T.exports={enable:function(){se.enable=function(){},H=!0;var Q=h.f,ce=S([].splice),$={};$[U]=1,Q($).length&&(h.f=function(Y){for(var P=Q(Y),ae=0,W=P.length;ae<W;ae++)if(P[ae]===U){ce(P,ae,1);break}return P},y({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:_.f}))},fastKey:function(Q,ce){if(!n(Q))return"symbol"==typeof Q?Q:("string"==typeof Q?"S":"P")+Q;if(!l(Q,U)){if(!b(Q))return"F";if(!ce)return"E";J(Q)}return Q[U].objectID},getWeakData:function(Q,ce){if(!l(Q,U)){if(!b(Q))return!0;if(!ce)return!1;J(Q)}return Q[U].weakData},onFreeze:function(Q){return k&&H&&b(Q)&&!l(Q,U)&&J(Q),Q}};s[U]=!0},59066:(T,I,m)=>{var U,V,J,y=m(43491),S=m(71186),s=m(83232),n=m(4559),l=m(30259),u=m(63262),h=m(85452),_=m(71063),b=m(16998),M="Object already initialized",k=S.TypeError;if(y||h.state){var oe=h.state||(h.state=new(0,S.WeakMap)),ee=s(oe.get),se=s(oe.has),Q=s(oe.set);U=function($,Y){if(se(oe,$))throw new k(M);return Y.facade=$,Q(oe,$,Y),Y},V=function($){return ee(oe,$)||{}},J=function($){return se(oe,$)}}else{var ce=_("state");b[ce]=!0,U=function($,Y){if(u($,ce))throw new k(M);return Y.facade=$,l($,ce,Y),Y},V=function($){return u($,ce)?$[ce]:{}},J=function($){return u($,ce)}}T.exports={set:U,get:V,has:J,enforce:function($){return J($)?V($):U($,{})},getterFor:function($){return function(Y){var P;if(!n(Y)||(P=V(Y)).type!==$)throw k("Incompatible receiver, "+$+" required");return P}}}},23969:(T,I,m)=>{var y=m(51227),S=m(57160),s=y("iterator"),n=Array.prototype;T.exports=function(l){return void 0!==l&&(S.Array===l||n[s]===l)}},21284:(T,I,m)=>{var y=m(36166);T.exports=Array.isArray||function(s){return"Array"==y(s)}},89982:T=>{T.exports=function(I){return"function"==typeof I}},2043:(T,I,m)=>{var y=m(83232),S=m(72194),s=m(89982),n=m(36346),l=m(31542),u=m(96307),h=function(){},_=[],b=l("Reflect","construct"),M=/^\s*(?:class|function)\b/,k=y(M.exec),H=!M.exec(h),U=function(J){if(!s(J))return!1;try{return b(h,_,J),!0}catch(X){return!1}};T.exports=!b||S(function(){var J;return U(U.call)||!U(Object)||!U(function(){J=!0})||J})?function(J){if(!s(J))return!1;switch(n(J)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return H||!!k(M,u(J))}:U},33699:(T,I,m)=>{var y=m(72194),S=m(89982),s=/#|\.prototype\./,n=function(b,M){var k=u[l(b)];return k==_||k!=h&&(S(M)?y(M):!!M)},l=n.normalize=function(b){return String(b).replace(s,".").toLowerCase()},u=n.data={},h=n.NATIVE="N",_=n.POLYFILL="P";T.exports=n},4559:(T,I,m)=>{var y=m(89982);T.exports=function(S){return"object"==typeof S?null!==S:y(S)}},83546:T=>{T.exports=!0},9463:(T,I,m)=>{var y=m(4559),S=m(36166),n=m(51227)("match");T.exports=function(l){var u;return y(l)&&(void 0!==(u=l[n])?!!u:"RegExp"==S(l))}},92271:(T,I,m)=>{var y=m(71186),S=m(31542),s=m(89982),n=m(49778),l=m(43065),u=y.Object;T.exports=l?function(h){return"symbol"==typeof h}:function(h){var _=S("Symbol");return s(_)&&n(_.prototype,u(h))}},64837:(T,I,m)=>{var y=m(71186),S=m(56875),s=m(74217),n=m(64808),l=m(75885),u=m(23969),h=m(50842),_=m(49778),b=m(80009),M=m(27556),k=m(48508),H=y.TypeError,U=function(J,X){this.stopped=J,this.result=X},V=U.prototype;T.exports=function(J,X,j){var $,Y,P,ae,W,q,re,ee=!(!j||!j.AS_ENTRIES),se=!(!j||!j.IS_ITERATOR),Q=!(!j||!j.INTERRUPTED),ce=S(X,j&&j.that),ie=function(le){return $&&k($,"normal",le),new U(!0,le)},be=function(le){return ee?(n(le),Q?ce(le[0],le[1],ie):ce(le[0],le[1])):Q?ce(le,ie):ce(le)};if(se)$=J;else{if(!(Y=M(J)))throw H(l(J)+" is not iterable");if(u(Y)){for(P=0,ae=h(J);ae>P;P++)if((W=be(J[P]))&&_(V,W))return W;return new U(!1)}$=b(J,Y)}for(q=$.next;!(re=s(q,$)).done;){try{W=be(re.value)}catch(le){k($,"throw",le)}if("object"==typeof W&&W&&_(V,W))return W}return new U(!1)}},48508:(T,I,m)=>{var y=m(74217),S=m(64808),s=m(82209);T.exports=function(n,l,u){var h,_;S(n);try{if(!(h=s(n,"return"))){if("throw"===l)throw u;return u}h=y(h,n)}catch(b){_=!0,h=b}if("throw"===l)throw u;if(_)throw h;return S(h),u}},17518:(T,I,m)=>{"use strict";var M,k,H,y=m(72194),S=m(89982),s=m(47579),n=m(41340),l=m(64519),u=m(51227),h=m(83546),_=u("iterator"),b=!1;[].keys&&("next"in(H=[].keys())?(k=n(n(H)))!==Object.prototype&&(M=k):b=!0),null==M||y(function(){var V={};return M[_].call(V)!==V})?M={}:h&&(M=s(M)),S(M[_])||l(M,_,function(){return this}),T.exports={IteratorPrototype:M,BUGGY_SAFARI_ITERATORS:b}},57160:T=>{T.exports={}},50842:(T,I,m)=>{var y=m(71673);T.exports=function(S){return y(S.length)}},84607:(T,I,m)=>{var J,X,j,oe,ee,se,Q,ce,y=m(71186),S=m(56875),s=m(3182).f,n=m(20284).set,l=m(30346),u=m(33763),h=m(145),_=m(62151),b=y.MutationObserver||y.WebKitMutationObserver,M=y.document,k=y.process,H=y.Promise,U=s(y,"queueMicrotask"),V=U&&U.value;V||(J=function(){var $,Y;for(_&&($=k.domain)&&$.exit();X;){Y=X.fn,X=X.next;try{Y()}catch(P){throw X?oe():j=void 0,P}}j=void 0,$&&$.enter()},l||_||h||!b||!M?!u&&H&&H.resolve?((Q=H.resolve(void 0)).constructor=H,ce=S(Q.then,Q),oe=function(){ce(J)}):_?oe=function(){k.nextTick(J)}:(n=S(n,y),oe=function(){n(J)}):(ee=!0,se=M.createTextNode(""),new b(J).observe(se,{characterData:!0}),oe=function(){se.data=ee=!ee})),T.exports=V||function($){var Y={fn:$,next:void 0};j&&(j.next=Y),X||(X=Y,oe()),j=Y}},98133:(T,I,m)=>{var y=m(71186);T.exports=y.Promise},96596:(T,I,m)=>{var y=m(47803),S=m(72194);T.exports=!!Object.getOwnPropertySymbols&&!S(function(){var s=Symbol();return!String(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&y&&y<41})},20836:(T,I,m)=>{var y=m(72194),S=m(51227),s=m(83546),n=S("iterator");T.exports=!y(function(){var l=new URL("b?a=1&b=2&c=3","http://a"),u=l.searchParams,h="";return l.pathname="c%20d",u.forEach(function(_,b){u.delete("b"),h+=b+_}),s&&!l.toJSON||!u.sort||"http://a/c%20d?a=1&c=3"!==l.href||"3"!==u.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!u[n]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==h||"x"!==new URL("http://x",void 0).host})},43491:(T,I,m)=>{var y=m(71186),S=m(89982),s=m(96307),n=y.WeakMap;T.exports=S(n)&&/native code/.test(s(n))},86343:(T,I,m)=>{"use strict";var y=m(62057),S=function(s){var n,l;this.promise=new s(function(u,h){if(void 0!==n||void 0!==l)throw TypeError("Bad Promise constructor");n=u,l=h}),this.resolve=y(n),this.reject=y(l)};T.exports.f=function(s){return new S(s)}},23895:(T,I,m)=>{var y=m(40208);T.exports=function(S,s){return void 0===S?arguments.length<2?"":s:y(S)}},72566:(T,I,m)=>{var y=m(71186),S=m(9463),s=y.TypeError;T.exports=function(n){if(S(n))throw s("The method doesn't accept regular expressions");return n}},49855:(T,I,m)=>{"use strict";var y=m(93628),S=m(83232),s=m(74217),n=m(72194),l=m(44637),u=m(39557),h=m(52750),_=m(12784),b=m(28560),M=Object.assign,k=Object.defineProperty,H=S([].concat);T.exports=!M||n(function(){if(y&&1!==M({b:1},M(k({},"a",{enumerable:!0,get:function(){k(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var U={},V={},J=Symbol(),X="abcdefghijklmnopqrst";return U[J]=7,X.split("").forEach(function(j){V[j]=j}),7!=M({},U)[J]||l(M({},V)).join("")!=X})?function(V,J){for(var X=_(V),j=arguments.length,oe=1,ee=u.f,se=h.f;j>oe;)for(var P,Q=b(arguments[oe++]),ce=ee?H(l(Q),ee(Q)):l(Q),$=ce.length,Y=0;$>Y;)P=ce[Y++],(!y||s(se,Q,P))&&(X[P]=Q[P]);return X}:M},47579:(T,I,m)=>{var j,y=m(64808),S=m(8584),s=m(30412),n=m(16998),l=m(44737),u=m(67386),h=m(71063),M="prototype",k="script",H=h("IE_PROTO"),U=function(){},V=function(ee){return"<"+k+">"+ee+"</"+k+">"},J=function(ee){ee.write(V("")),ee.close();var se=ee.parentWindow.Object;return ee=null,se},oe=function(){try{j=new ActiveXObject("htmlfile")}catch(se){}oe="undefined"!=typeof document?document.domain&&j?J(j):function(){var Q,ee=u("iframe");return ee.style.display="none",l.appendChild(ee),ee.src=String("javascript:"),(Q=ee.contentWindow.document).open(),Q.write(V("document.F=Object")),Q.close(),Q.F}():J(j);for(var ee=s.length;ee--;)delete oe[M][s[ee]];return oe()};n[H]=!0,T.exports=Object.create||function(se,Q){var ce;return null!==se?(U[M]=y(se),ce=new U,U[M]=null,ce[H]=se):ce=oe(),void 0===Q?ce:S(ce,Q)}},8584:(T,I,m)=>{var y=m(93628),S=m(38360),s=m(64808),n=m(38611),l=m(44637);T.exports=y?Object.defineProperties:function(h,_){s(h);for(var U,b=n(_),M=l(_),k=M.length,H=0;k>H;)S.f(h,U=M[H++],b[U]);return h}},38360:(T,I,m)=>{var y=m(71186),S=m(93628),s=m(36546),n=m(64808),l=m(66943),u=y.TypeError,h=Object.defineProperty;I.f=S?h:function(b,M,k){if(n(b),M=l(M),n(k),s)try{return h(b,M,k)}catch(H){}if("get"in k||"set"in k)throw u("Accessors not supported");return"value"in k&&(b[M]=k.value),b}},3182:(T,I,m)=>{var y=m(93628),S=m(74217),s=m(52750),n=m(79695),l=m(38611),u=m(66943),h=m(63262),_=m(36546),b=Object.getOwnPropertyDescriptor;I.f=y?b:function(k,H){if(k=l(k),H=u(H),_)try{return b(k,H)}catch(U){}if(h(k,H))return n(!S(s.f,k,H),k[H])}},22690:(T,I,m)=>{var y=m(36166),S=m(38611),s=m(80679).f,n=m(60462),l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];T.exports.f=function(_){return l&&"Window"==y(_)?function(h){try{return s(h)}catch(_){return n(l)}}(_):s(S(_))}},80679:(T,I,m)=>{var y=m(20552),s=m(30412).concat("length","prototype");I.f=Object.getOwnPropertyNames||function(l){return y(l,s)}},39557:(T,I)=>{I.f=Object.getOwnPropertySymbols},41340:(T,I,m)=>{var y=m(71186),S=m(63262),s=m(89982),n=m(12784),l=m(71063),u=m(65192),h=l("IE_PROTO"),_=y.Object,b=_.prototype;T.exports=u?_.getPrototypeOf:function(M){var k=n(M);if(S(k,h))return k[h];var H=k.constructor;return s(H)&&k instanceof H?H.prototype:k instanceof _?b:null}},67616:(T,I,m)=>{var y=m(72194),S=m(4559),s=m(36166),n=m(99844),l=Object.isExtensible,u=y(function(){l(1)});T.exports=u||n?function(_){return!(!S(_)||n&&"ArrayBuffer"==s(_))&&(!l||l(_))}:l},49778:(T,I,m)=>{var y=m(83232);T.exports=y({}.isPrototypeOf)},20552:(T,I,m)=>{var y=m(83232),S=m(63262),s=m(38611),n=m(77118).indexOf,l=m(16998),u=y([].push);T.exports=function(h,_){var H,b=s(h),M=0,k=[];for(H in b)!S(l,H)&&S(b,H)&&u(k,H);for(;_.length>M;)S(b,H=_[M++])&&(~n(k,H)||u(k,H));return k}},44637:(T,I,m)=>{var y=m(20552),S=m(30412);T.exports=Object.keys||function(n){return y(n,S)}},52750:(T,I)=>{"use strict";var m={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,S=y&&!m.call({1:2},1);I.f=S?function(n){var l=y(this,n);return!!l&&l.enumerable}:m},86447:(T,I,m)=>{var y=m(83232),S=m(64808),s=m(57690);T.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u,n=!1,l={};try{(u=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(l,[]),n=l instanceof Array}catch(h){}return function(_,b){return S(_),s(b),n?u(_,b):_.__proto__=b,_}}():void 0)},94559:(T,I,m)=>{var y=m(93628),S=m(83232),s=m(44637),n=m(38611),u=S(m(52750).f),h=S([].push),_=function(b){return function(M){for(var X,k=n(M),H=s(k),U=H.length,V=0,J=[];U>V;)X=H[V++],(!y||u(k,X))&&h(J,b?[X,k[X]]:k[X]);return J}};T.exports={entries:_(!0),values:_(!1)}},71470:(T,I,m)=>{"use strict";var y=m(98086),S=m(36346);T.exports=y?{}.toString:function(){return"[object "+S(this)+"]"}},91421:(T,I,m)=>{var y=m(71186),S=m(74217),s=m(89982),n=m(4559),l=y.TypeError;T.exports=function(u,h){var _,b;if("string"===h&&s(_=u.toString)&&!n(b=S(_,u))||s(_=u.valueOf)&&!n(b=S(_,u))||"string"!==h&&s(_=u.toString)&&!n(b=S(_,u)))return b;throw l("Can't convert object to primitive value")}},69093:(T,I,m)=>{var y=m(31542),S=m(83232),s=m(80679),n=m(39557),l=m(64808),u=S([].concat);T.exports=y("Reflect","ownKeys")||function(_){var b=s.f(l(_)),M=n.f;return M?u(b,M(_)):b}},35361:T=>{T.exports={}},83061:T=>{T.exports=function(I){try{return{error:!1,value:I()}}catch(m){return{error:!0,value:m}}}},93186:(T,I,m)=>{var y=m(64808),S=m(4559),s=m(86343);T.exports=function(n,l){if(y(n),S(l)&&l.constructor===n)return l;var u=s.f(n);return(0,u.resolve)(l),u.promise}},61306:(T,I,m)=>{var y=m(64519);T.exports=function(S,s,n){for(var l in s)n&&n.unsafe&&S[l]?S[l]=s[l]:y(S,l,s[l],n);return S}},64519:(T,I,m)=>{var y=m(30259);T.exports=function(S,s,n,l){l&&l.enumerable?S[s]=n:y(S,s,n)}},94087:(T,I,m)=>{var S=m(71186).TypeError;T.exports=function(s){if(null==s)throw S("Can't call method on "+s);return s}},56836:(T,I,m)=>{var y=m(71186),S=Object.defineProperty;T.exports=function(s,n){try{S(y,s,{value:n,configurable:!0,writable:!0})}catch(l){y[s]=n}return n}},36524:(T,I,m)=>{"use strict";var y=m(31542),S=m(38360),s=m(51227),n=m(93628),l=s("species");T.exports=function(u){var h=y(u);n&&h&&!h[l]&&(0,S.f)(h,l,{configurable:!0,get:function(){return this}})}},81488:(T,I,m)=>{var y=m(98086),S=m(38360).f,s=m(30259),n=m(63262),l=m(71470),h=m(51227)("toStringTag");T.exports=function(_,b,M,k){if(_){var H=M?_:_.prototype;n(H,h)||S(H,h,{configurable:!0,value:b}),k&&!y&&s(H,"toString",l)}}},71063:(T,I,m)=>{var y=m(22196),S=m(39900),s=y("keys");T.exports=function(n){return s[n]||(s[n]=S(n))}},85452:(T,I,m)=>{var y=m(71186),S=m(56836),s="__core-js_shared__",n=y[s]||S(s,{});T.exports=n},22196:(T,I,m)=>{var y=m(83546),S=m(85452);(T.exports=function(s,n){return S[s]||(S[s]=void 0!==n?n:{})})("versions",[]).push({version:"3.19.1",mode:y?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},21379:(T,I,m)=>{var y=m(64808),S=m(12144),n=m(51227)("species");T.exports=function(l,u){var _,h=y(l).constructor;return void 0===h||null==(_=y(h)[n])?u:S(_)}},12206:(T,I,m)=>{var y=m(83232),S=m(74518),s=m(40208),n=m(94087),l=y("".charAt),u=y("".charCodeAt),h=y("".slice),_=function(b){return function(M,k){var J,X,H=s(n(M)),U=S(k),V=H.length;return U<0||U>=V?b?"":void 0:(J=u(H,U))<55296||J>56319||U+1===V||(X=u(H,U+1))<56320||X>57343?b?l(H,U):J:b?h(H,U,U+2):X-56320+(J-55296<<10)+65536}};T.exports={codeAt:_(!1),charAt:_(!0)}},20284:(T,I,m)=>{var ce,$,Y,P,y=m(71186),S=m(27549),s=m(56875),n=m(89982),l=m(63262),u=m(72194),h=m(44737),_=m(60462),b=m(67386),M=m(30346),k=m(62151),H=y.setImmediate,U=y.clearImmediate,V=y.process,J=y.Dispatch,X=y.Function,j=y.MessageChannel,oe=y.String,ee=0,se={},Q="onreadystatechange";try{ce=y.location}catch(ie){}var ae=function(ie){if(l(se,ie)){var be=se[ie];delete se[ie],be()}},W=function(ie){return function(){ae(ie)}},q=function(ie){ae(ie.data)},re=function(ie){y.postMessage(oe(ie),ce.protocol+"//"+ce.host)};(!H||!U)&&(H=function(be){var le=_(arguments,1);return se[++ee]=function(){S(n(be)?be:X(be),void 0,le)},$(ee),ee},U=function(be){delete se[be]},k?$=function(ie){V.nextTick(W(ie))}:J&&J.now?$=function(ie){J.now(W(ie))}:j&&!M?(P=(Y=new j).port2,Y.port1.onmessage=q,$=s(P.postMessage,P)):y.addEventListener&&n(y.postMessage)&&!y.importScripts&&ce&&"file:"!==ce.protocol&&!u(re)?($=re,y.addEventListener("message",q,!1)):$=Q in b("script")?function(ie){h.appendChild(b("script"))[Q]=function(){h.removeChild(this),ae(ie)}}:function(ie){setTimeout(W(ie),0)}),T.exports={set:H,clear:U}},40771:(T,I,m)=>{var y=m(74518),S=Math.max,s=Math.min;T.exports=function(n,l){var u=y(n);return u<0?S(u+l,0):s(u,l)}},38611:(T,I,m)=>{var y=m(28560),S=m(94087);T.exports=function(s){return y(S(s))}},74518:T=>{var I=Math.ceil,m=Math.floor;T.exports=function(y){var S=+y;return S!=S||0===S?0:(S>0?m:I)(S)}},71673:(T,I,m)=>{var y=m(74518),S=Math.min;T.exports=function(s){return s>0?S(y(s),9007199254740991):0}},12784:(T,I,m)=>{var y=m(71186),S=m(94087),s=y.Object;T.exports=function(n){return s(S(n))}},11436:(T,I,m)=>{var y=m(71186),S=m(74217),s=m(4559),n=m(92271),l=m(82209),u=m(91421),h=m(51227),_=y.TypeError,b=h("toPrimitive");T.exports=function(M,k){if(!s(M)||n(M))return M;var U,H=l(M,b);if(H){if(void 0===k&&(k="default"),U=S(H,M,k),!s(U)||n(U))return U;throw _("Can't convert object to primitive value")}return void 0===k&&(k="number"),u(M,k)}},66943:(T,I,m)=>{var y=m(11436),S=m(92271);T.exports=function(s){var n=y(s,"string");return S(n)?n:n+""}},98086:(T,I,m)=>{var s={};s[m(51227)("toStringTag")]="z",T.exports="[object z]"===String(s)},40208:(T,I,m)=>{var y=m(71186),S=m(36346),s=y.String;T.exports=function(n){if("Symbol"===S(n))throw TypeError("Cannot convert a Symbol value to a string");return s(n)}},75885:(T,I,m)=>{var S=m(71186).String;T.exports=function(s){try{return S(s)}catch(n){return"Object"}}},39900:(T,I,m)=>{var y=m(83232),S=0,s=Math.random(),n=y(1..toString);T.exports=function(l){return"Symbol("+(void 0===l?"":l)+")_"+n(++S+s,36)}},43065:(T,I,m)=>{var y=m(96596);T.exports=y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},12506:(T,I,m)=>{var y=m(51227);I.f=y},51227:(T,I,m)=>{var y=m(71186),S=m(22196),s=m(63262),n=m(39900),l=m(96596),u=m(43065),h=S("wks"),_=y.Symbol,b=_&&_.for,M=u?_:_&&_.withoutSetter||n;T.exports=function(k){if(!s(h,k)||!l&&"string"!=typeof h[k]){var H="Symbol."+k;h[k]=l&&s(_,k)?_[k]:u&&b?b(H):M(H)}return h[k]}},96476:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(49778),n=m(41340),l=m(86447),u=m(78356),h=m(47579),_=m(30259),b=m(79695),M=m(84089),k=m(369),H=m(64837),U=m(23895),V=m(51227),J=m(59154),X=V("toStringTag"),j=S.Error,oe=[].push,ee=function(ce,$){var ae,Y=arguments.length>2?arguments[2]:void 0,P=s(se,this);l?ae=l(new j(void 0),P?n(this):se):(ae=P?this:h(se),_(ae,X,"Error")),_(ae,"message",U($,"")),J&&_(ae,"stack",M(ae.stack,1)),k(ae,Y);var W=[];return H(ce,oe,{that:W}),_(ae,"errors",W),ae};l?l(ee,j):u(ee,j);var se=ee.prototype=h(j.prototype,{constructor:b(1,ee),message:b(1,""),name:b(1,"AggregateError")});y({global:!0},{AggregateError:ee})},80706:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(72194),n=m(21284),l=m(4559),u=m(12784),h=m(50842),_=m(68140),b=m(75458),M=m(63294),k=m(51227),H=m(47803),U=k("isConcatSpreadable"),V=9007199254740991,J="Maximum allowed index exceeded",X=S.TypeError,j=H>=51||!s(function(){var Q=[];return Q[U]=!1,Q.concat()[0]!==Q}),oe=M("concat"),ee=function(Q){if(!l(Q))return!1;var ce=Q[U];return void 0!==ce?!!ce:n(Q)};y({target:"Array",proto:!0,forced:!j||!oe},{concat:function(ce){var ae,W,q,re,ie,$=u(this),Y=b($,0),P=0;for(ae=-1,q=arguments.length;ae<q;ae++)if(ee(ie=-1===ae?$:arguments[ae])){if(P+(re=h(ie))>V)throw X(J);for(W=0;W<re;W++,P++)W in ie&&_(Y,P,ie[W])}else{if(P>=V)throw X(J);_(Y,P++,ie)}return Y.length=P,Y}})},81136:(T,I,m)=>{"use strict";var y=m(47695),S=m(32794).filter;y({target:"Array",proto:!0,forced:!m(63294)("filter")},{filter:function(u){return S(this,u,arguments.length>1?arguments[1]:void 0)}})},89543:(T,I,m)=>{"use strict";var y=m(47695),S=m(32794).find,s=m(81382),n="find",l=!0;n in[]&&Array(1)[n](function(){l=!1}),y({target:"Array",proto:!0,forced:l},{find:function(h){return S(this,h,arguments.length>1?arguments[1]:void 0)}}),s(n)},46152:(T,I,m)=>{"use strict";var y=m(47695),S=m(7330);y({target:"Array",proto:!0,forced:[].forEach!=S},{forEach:S})},13122:(T,I,m)=>{var y=m(47695),S=m(96005);y({target:"Array",stat:!0,forced:!m(92807)(function(l){Array.from(l)})},{from:S})},96875:(T,I,m)=>{"use strict";var y=m(47695),S=m(77118).includes,s=m(81382);y({target:"Array",proto:!0},{includes:function(l){return S(this,l,arguments.length>1?arguments[1]:void 0)}}),s("includes")},22616:(T,I,m)=>{"use strict";var y=m(47695),S=m(83232),s=m(77118).indexOf,n=m(79444),l=S([].indexOf),u=!!l&&1/l([1],1,-0)<0,h=n("indexOf");y({target:"Array",proto:!0,forced:u||!h},{indexOf:function(b){var M=arguments.length>1?arguments[1]:void 0;return u?l(this,b,M)||0:s(this,b,M)}})},90418:(T,I,m)=>{m(47695)({target:"Array",stat:!0},{isArray:m(21284)})},68905:(T,I,m)=>{"use strict";var y=m(38611),S=m(81382),s=m(57160),n=m(59066),l=m(8672),u="Array Iterator",h=n.set,_=n.getterFor(u);T.exports=l(Array,"Array",function(b,M){h(this,{type:u,target:y(b),index:0,kind:M})},function(){var b=_(this),M=b.target,k=b.kind,H=b.index++;return!M||H>=M.length?(b.target=void 0,{value:void 0,done:!0}):"keys"==k?{value:H,done:!1}:"values"==k?{value:M[H],done:!1}:{value:[H,M[H]],done:!1}},"values"),s.Arguments=s.Array,S("keys"),S("values"),S("entries")},36850:(T,I,m)=>{"use strict";var y=m(47695),S=m(32794).map;y({target:"Array",proto:!0,forced:!m(63294)("map")},{map:function(u){return S(this,u,arguments.length>1?arguments[1]:void 0)}})},62693:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(21284),n=m(2043),l=m(4559),u=m(40771),h=m(50842),_=m(38611),b=m(68140),M=m(51227),k=m(63294),H=m(60462),U=k("slice"),V=M("species"),J=S.Array,X=Math.max;y({target:"Array",proto:!0,forced:!U},{slice:function(oe,ee){var Y,P,ae,se=_(this),Q=h(se),ce=u(oe,Q),$=u(void 0===ee?Q:ee,Q);if(s(se)&&((n(Y=se.constructor)&&(Y===J||s(Y.prototype))||l(Y)&&null===(Y=Y[V]))&&(Y=void 0),Y===J||void 0===Y))return H(se,ce,$);for(P=new(void 0===Y?J:Y)(X($-ce,0)),ae=0;ce<$;ce++,ae++)ce in se&&b(P,ae,se[ce]);return P.length=ae,P}})},72101:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(40771),n=m(74518),l=m(50842),u=m(12784),h=m(75458),_=m(68140),M=m(63294)("splice"),k=S.TypeError,H=Math.max,U=Math.min,V=9007199254740991,J="Maximum allowed length exceeded";y({target:"Array",proto:!0,forced:!M},{splice:function(j,oe){var $,Y,P,ae,W,q,ee=u(this),se=l(ee),Q=s(j,se),ce=arguments.length;if(0===ce?$=Y=0:1===ce?($=0,Y=se-Q):($=ce-2,Y=U(H(n(oe),0),se-Q)),se+$-Y>V)throw k(J);for(P=h(ee,Y),ae=0;ae<Y;ae++)(W=Q+ae)in ee&&_(P,ae,ee[W]);if(P.length=Y,$<Y){for(ae=Q;ae<se-Y;ae++)q=ae+$,(W=ae+Y)in ee?ee[q]=ee[W]:delete ee[q];for(ae=se;ae>se-Y+$;ae--)delete ee[ae-1]}else if($>Y)for(ae=se-Y;ae>Q;ae--)q=ae+$-1,(W=ae+Y-1)in ee?ee[q]=ee[W]:delete ee[q];for(ae=0;ae<$;ae++)ee[ae+Q]=arguments[ae+2];return ee.length=se-Y+$,P}})},39481:(T,I,m)=>{var y=m(47695),S=m(71186),s=m(31542),n=m(27549),l=m(83232),u=m(72194),h=S.Array,_=s("JSON","stringify"),b=l(/./.exec),M=l("".charAt),k=l("".charCodeAt),H=l("".replace),U=l(1..toString),V=/[\uD800-\uDFFF]/g,J=/^[\uD800-\uDBFF]$/,X=/^[\uDC00-\uDFFF]$/,j=function(ee,se,Q){var ce=M(Q,se-1),$=M(Q,se+1);return b(J,ee)&&!b(X,$)||b(X,ee)&&!b(J,ce)?"\\u"+U(k(ee,0),16):ee},oe=u(function(){return'"\\udf06\\ud834"'!==_("\udf06\ud834")||'"\\udead"'!==_("\udead")});_&&y({target:"JSON",stat:!0,forced:oe},{stringify:function(se,Q,ce){for(var $=0,Y=arguments.length,P=h(Y);$<Y;$++)P[$]=arguments[$];var ae=n(_,null,P);return"string"==typeof ae?H(ae,V,j):ae}})},897:(T,I,m)=>{var y=m(71186);m(81488)(y.JSON,"JSON",!0)},6603:()=>{},1476:(T,I,m)=>{var y=m(47695),S=m(49855);y({target:"Object",stat:!0,forced:Object.assign!==S},{assign:S})},63851:(T,I,m)=>{var y=m(47695),S=m(93628);y({target:"Object",stat:!0,forced:!S,sham:!S},{defineProperties:m(8584)})},23179:(T,I,m)=>{var y=m(47695),S=m(93628);y({target:"Object",stat:!0,forced:!S,sham:!S},{defineProperty:m(38360).f})},69178:(T,I,m)=>{var y=m(47695),S=m(94559).entries;y({target:"Object",stat:!0},{entries:function(n){return S(n)}})},67827:(T,I,m)=>{var y=m(47695),S=m(72194),s=m(38611),n=m(3182).f,l=m(93628),u=S(function(){n(1)});y({target:"Object",stat:!0,forced:!l||u,sham:!l},{getOwnPropertyDescriptor:function(b,M){return n(s(b),M)}})},53603:(T,I,m)=>{var y=m(47695),S=m(93628),s=m(69093),n=m(38611),l=m(3182),u=m(68140);y({target:"Object",stat:!0,sham:!S},{getOwnPropertyDescriptors:function(_){for(var V,J,b=n(_),M=l.f,k=s(b),H={},U=0;k.length>U;)void 0!==(J=M(b,V=k[U++]))&&u(H,V,J);return H}})},63596:(T,I,m)=>{var y=m(47695),S=m(12784),s=m(44637);y({target:"Object",stat:!0,forced:m(72194)(function(){s(1)})},{keys:function(h){return s(S(h))}})},94666:()=>{},5823:(T,I,m)=>{"use strict";var y=m(47695),S=m(74217),s=m(62057),n=m(86343),l=m(83061),u=m(64837);y({target:"Promise",stat:!0},{allSettled:function(_){var b=this,M=n.f(b),k=M.resolve,H=M.reject,U=l(function(){var V=s(b.resolve),J=[],X=0,j=1;u(_,function(oe){var ee=X++,se=!1;j++,S(V,b,oe).then(function(Q){se||(se=!0,J[ee]={status:"fulfilled",value:Q},--j||k(J))},function(Q){se||(se=!0,J[ee]={status:"rejected",reason:Q},--j||k(J))})}),--j||k(J)});return U.error&&H(U.value),M.promise}})},78084:(T,I,m)=>{"use strict";var y=m(47695),S=m(62057),s=m(31542),n=m(74217),l=m(86343),u=m(83061),h=m(64837),_="No one promise resolved";y({target:"Promise",stat:!0},{any:function(M){var k=this,H=s("AggregateError"),U=l.f(k),V=U.resolve,J=U.reject,X=u(function(){var j=S(k.resolve),oe=[],ee=0,se=1,Q=!1;h(M,function(ce){var $=ee++,Y=!1;se++,n(j,k,ce).then(function(P){Y||Q||(Q=!0,V(P))},function(P){Y||Q||(Y=!0,oe[$]=P,--se||J(new H(oe,_)))})}),--se||J(new H(oe,_))});return X.error&&J(X.value),U.promise}})},31296:(T,I,m)=>{"use strict";var y=m(47695),S=m(83546),s=m(98133),n=m(72194),l=m(31542),u=m(89982),h=m(21379),_=m(93186),b=m(64519);if(y({target:"Promise",proto:!0,real:!0,forced:!!s&&n(function(){s.prototype.finally.call({then:function(){}},function(){})})},{finally:function(H){var U=h(this,l("Promise")),V=u(H);return this.then(V?function(J){return _(U,H()).then(function(){return J})}:H,V?function(J){return _(U,H()).then(function(){throw J})}:H)}}),!S&&u(s)){var k=l("Promise").prototype.finally;s.prototype.finally!==k&&b(s.prototype,"finally",k,{unsafe:!0})}},47110:(T,I,m)=>{"use strict";var Ui,di,sn,Cn,y=m(47695),S=m(83546),s=m(71186),n=m(31542),l=m(74217),u=m(98133),h=m(64519),_=m(61306),b=m(86447),M=m(81488),k=m(36524),H=m(62057),U=m(89982),V=m(4559),J=m(37368),X=m(96307),j=m(64837),oe=m(92807),ee=m(21379),se=m(20284).set,Q=m(84607),ce=m(93186),$=m(38478),Y=m(86343),P=m(83061),ae=m(59066),W=m(33699),q=m(51227),re=m(33700),ie=m(62151),be=m(47803),le=q("species"),fe="Promise",Se=ae.get,ve=ae.set,me=ae.getterFor(fe),Ie=u&&u.prototype,De=u,xe=Ie,Re=s.TypeError,ke=s.document,gt=s.process,lt=Y.f,Ct=lt,ui=!!(ke&&ke.createEvent&&s.dispatchEvent),ki=U(s.PromiseRejectionEvent),ai="unhandledrejection",Ot=!1,ye=W(fe,function(){var Me=X(De),Ge=Me!==String(De);if(!Ge&&66===be||S&&!xe.finally)return!0;if(be>=51&&/native code/.test(Me))return!1;var ue=new De(function(Ze){Ze(1)}),Ce=function(Ze){Ze(function(){},function(){})};return(ue.constructor={})[le]=Ce,!(Ot=ue.then(function(){})instanceof Ce)||!Ge&&re&&!ki}),Ee=ye||!oe(function(Me){De.all(Me).catch(function(){})}),kt=function(Me){var Ge;return!(!V(Me)||!U(Ge=Me.then))&&Ge},Ht=function(Me,Ge){if(!Me.notified){Me.notified=!0;var ue=Me.reactions;Q(function(){for(var Ce=Me.value,Ue=1==Me.state,Ze=0;ue.length>Ze;){var ei,nn,to,gi=ue[Ze++],et=Ue?gi.ok:gi.fail,st=gi.resolve,yt=gi.reject,Mt=gi.domain;try{et?(Ue||(2===Me.rejection&&mn(Me),Me.rejection=1),!0===et?ei=Ce:(Mt&&Mt.enter(),ei=et(Ce),Mt&&(Mt.exit(),to=!0)),ei===gi.promise?yt(Re("Promise-chain cycle")):(nn=kt(ei))?l(nn,ei,st,yt):st(ei)):yt(Ce)}catch(Vi){Mt&&!to&&Mt.exit(),yt(Vi)}}Me.reactions=[],Me.notified=!1,Ge&&!Me.rejection&&Ut(Me)})}},fi=function(Me,Ge,ue){var Ce,Ue;ui?((Ce=ke.createEvent("Event")).promise=Ge,Ce.reason=ue,Ce.initEvent(Me,!1,!0),s.dispatchEvent(Ce)):Ce={promise:Ge,reason:ue},!ki&&(Ue=s["on"+Me])?Ue(Ce):Me===ai&&$("Unhandled promise rejection",ue)},Ut=function(Me){l(se,s,function(){var Ue,Ge=Me.facade,ue=Me.value;if(Xi(Me)&&(Ue=P(function(){ie?gt.emit("unhandledRejection",ue,Ge):fi(ai,Ge,ue)}),Me.rejection=ie||Xi(Me)?2:1,Ue.error))throw Ue.value})},Xi=function(Me){return 1!==Me.rejection&&!Me.parent},mn=function(Me){l(se,s,function(){var Ge=Me.facade;ie?gt.emit("rejectionHandled",Ge):fi("rejectionhandled",Ge,Me.value)})},qt=function(Me,Ge,ue){return function(Ce){Me(Ge,Ce,ue)}},Je=function(Me,Ge,ue){Me.done||(Me.done=!0,ue&&(Me=ue),Me.value=Ge,Me.state=2,Ht(Me,!0))},qe=function(Me,Ge,ue){if(!Me.done){Me.done=!0,ue&&(Me=ue);try{if(Me.facade===Ge)throw Re("Promise can't be resolved itself");var Ce=kt(Ge);Ce?Q(function(){var Ue={done:!1};try{l(Ce,Ge,qt(qe,Ue,Me),qt(Je,Ue,Me))}catch(Ze){Je(Ue,Ze,Me)}}):(Me.value=Ge,Me.state=1,Ht(Me,!1))}catch(Ue){Je({done:!1},Ue,Me)}}};if(ye&&(De=function(Ge){J(this,xe),H(Ge),l(Ui,this);var ue=Se(this);try{Ge(qt(qe,ue),qt(Je,ue))}catch(Ce){Je(ue,Ce)}},(Ui=function(Ge){ve(this,{type:fe,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_(xe=De.prototype,{then:function(Ge,ue){var Ce=me(this),Ue=Ce.reactions,Ze=lt(ee(this,De));return Ze.ok=!U(Ge)||Ge,Ze.fail=U(ue)&&ue,Ze.domain=ie?gt.domain:void 0,Ce.parent=!0,Ue[Ue.length]=Ze,0!=Ce.state&&Ht(Ce,!1),Ze.promise},catch:function(Me){return this.then(void 0,Me)}}),di=function(){var Me=new Ui,Ge=Se(Me);this.promise=Me,this.resolve=qt(qe,Ge),this.reject=qt(Je,Ge)},Y.f=lt=function(Me){return Me===De||Me===sn?new di(Me):Ct(Me)},!S&&U(u)&&Ie!==Object.prototype)){Cn=Ie.then,Ot||(h(Ie,"then",function(Ge,ue){var Ce=this;return new De(function(Ue,Ze){l(Cn,Ce,Ue,Ze)}).then(Ge,ue)},{unsafe:!0}),h(Ie,"catch",xe.catch,{unsafe:!0}));try{delete Ie.constructor}catch(Me){}b&&b(Ie,xe)}y({global:!0,wrap:!0,forced:ye},{Promise:De}),M(De,fe,!1,!0),k(fe),sn=n(fe),y({target:fe,stat:!0,forced:ye},{reject:function(Ge){var ue=lt(this);return l(ue.reject,void 0,Ge),ue.promise}}),y({target:fe,stat:!0,forced:S||ye},{resolve:function(Ge){return ce(S&&this===sn?De:this,Ge)}}),y({target:fe,stat:!0,forced:Ee},{all:function(Ge){var ue=this,Ce=lt(ue),Ue=Ce.resolve,Ze=Ce.reject,gi=P(function(){var et=H(ue.resolve),st=[],yt=0,Mt=1;j(Ge,function(ei){var nn=yt++,to=!1;Mt++,l(et,ue,ei).then(function(Vi){to||(to=!0,st[nn]=Vi,--Mt||Ue(st))},Ze)}),--Mt||Ue(st)});return gi.error&&Ze(gi.value),Ce.promise},race:function(Ge){var ue=this,Ce=lt(ue),Ue=Ce.reject,Ze=P(function(){var gi=H(ue.resolve);j(Ge,function(et){l(gi,ue,et).then(Ce.resolve,Ue)})});return Ze.error&&Ue(Ze.value),Ce.promise}})},73609:()=>{},54840:(T,I,m)=>{"use strict";var y=m(47695),S=m(83232),s=m(72566),n=m(94087),l=m(40208),u=m(80736),h=S("".indexOf);y({target:"String",proto:!0,forced:!u("includes")},{includes:function(b){return!!~h(l(n(this)),l(s(b)),arguments.length>1?arguments[1]:void 0)}})},21446:(T,I,m)=>{"use strict";var y=m(12206).charAt,S=m(40208),s=m(59066),n=m(8672),l="String Iterator",u=s.set,h=s.getterFor(l);n(String,"String",function(_){u(this,{type:l,string:S(_),index:0})},function(){var H,b=h(this),M=b.string,k=b.index;return k>=M.length?{value:void 0,done:!0}:(H=y(M,k),b.index+=H.length,{value:H,done:!1})})},93784:(T,I,m)=>{"use strict";var J,y=m(47695),S=m(83232),s=m(3182).f,n=m(71673),l=m(40208),u=m(72566),h=m(94087),_=m(80736),b=m(83546),M=S("".startsWith),k=S("".slice),H=Math.min,U=_("startsWith");y({target:"String",proto:!0,forced:!(!b&&!U&&(J=s(String.prototype,"startsWith"),J&&!J.writable)||U)},{startsWith:function(X){var j=l(h(this));u(X);var oe=n(H(arguments.length>1?arguments[1]:void 0,j.length)),ee=l(X);return M?M(j,ee,oe):k(j,oe,oe+ee.length)===ee}})},55623:(T,I,m)=>{m(35985)("asyncIterator")},19060:()=>{},43364:(T,I,m)=>{m(35985)("hasInstance")},97447:(T,I,m)=>{m(35985)("isConcatSpreadable")},70830:(T,I,m)=>{m(35985)("iterator")},5001:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(31542),n=m(27549),l=m(74217),u=m(83232),h=m(83546),_=m(93628),b=m(96596),M=m(72194),k=m(63262),H=m(21284),U=m(89982),V=m(4559),J=m(49778),X=m(92271),j=m(64808),oe=m(12784),ee=m(38611),se=m(66943),Q=m(40208),ce=m(79695),$=m(47579),Y=m(44637),P=m(80679),ae=m(22690),W=m(39557),q=m(3182),re=m(38360),ie=m(52750),be=m(60462),le=m(64519),fe=m(22196),Se=m(71063),ve=m(16998),me=m(39900),Ie=m(51227),De=m(12506),xe=m(35985),Re=m(81488),ke=m(59066),gt=m(32794).forEach,lt=Se("hidden"),Ct="Symbol",ui="prototype",ki=Ie("toPrimitive"),ai=ke.set,pt=ke.getterFor(Ct),Kt=Object[ui],ot=S.Symbol,Hi=ot&&ot[ui],Pe=S.TypeError,Zi=S.QObject,Ot=s("JSON","stringify"),Ui=q.f,di=re.f,sn=ae.f,Cn=ie.f,ye=u([].push),Ee=fe("symbols"),kt=fe("op-symbols"),Ht=fe("string-to-symbol-registry"),fi=fe("symbol-to-string-registry"),Ut=fe("wks"),Xi=!Zi||!Zi[ui]||!Zi[ui].findChild,mn=_&&M(function(){return 7!=$(di({},"a",{get:function(){return di(this,"a",{value:7}).a}})).a})?function(et,st,yt){var Mt=Ui(Kt,st);Mt&&delete Kt[st],di(et,st,yt),Mt&&et!==Kt&&di(Kt,st,Mt)}:di,qt=function(et,st){var yt=Ee[et]=$(Hi);return ai(yt,{type:Ct,tag:et,description:st}),_||(yt.description=st),yt},Je=function(st,yt,Mt){st===Kt&&Je(kt,yt,Mt),j(st);var ei=se(yt);return j(Mt),k(Ee,ei)?(Mt.enumerable?(k(st,lt)&&st[lt][ei]&&(st[lt][ei]=!1),Mt=$(Mt,{enumerable:ce(0,!1)})):(k(st,lt)||di(st,lt,ce(1,{})),st[lt][ei]=!0),mn(st,ei,Mt)):di(st,ei,Mt)},qe=function(st,yt){j(st);var Mt=ee(yt),ei=Y(Mt).concat(Ue(Mt));return gt(ei,function(nn){(!_||l(Ge,Mt,nn))&&Je(st,nn,Mt[nn])}),st},Ge=function(st){var yt=se(st),Mt=l(Cn,this,yt);return!(this===Kt&&k(Ee,yt)&&!k(kt,yt))&&(!(Mt||!k(this,yt)||!k(Ee,yt)||k(this,lt)&&this[lt][yt])||Mt)},ue=function(st,yt){var Mt=ee(st),ei=se(yt);if(Mt!==Kt||!k(Ee,ei)||k(kt,ei)){var nn=Ui(Mt,ei);return nn&&k(Ee,ei)&&!(k(Mt,lt)&&Mt[lt][ei])&&(nn.enumerable=!0),nn}},Ce=function(st){var yt=sn(ee(st)),Mt=[];return gt(yt,function(ei){!k(Ee,ei)&&!k(ve,ei)&&ye(Mt,ei)}),Mt},Ue=function(st){var yt=st===Kt,Mt=sn(yt?kt:ee(st)),ei=[];return gt(Mt,function(nn){k(Ee,nn)&&(!yt||k(Kt,nn))&&ye(ei,Ee[nn])}),ei};if(b||(le(Hi=(ot=function(){if(J(Hi,this))throw Pe("Symbol is not a constructor");var st=arguments.length&&void 0!==arguments[0]?Q(arguments[0]):void 0,yt=me(st),Mt=function(ei){this===Kt&&l(Mt,kt,ei),k(this,lt)&&k(this[lt],yt)&&(this[lt][yt]=!1),mn(this,yt,ce(1,ei))};return _&&Xi&&mn(Kt,yt,{configurable:!0,set:Mt}),qt(yt,st)})[ui],"toString",function(){return pt(this).tag}),le(ot,"withoutSetter",function(et){return qt(me(et),et)}),ie.f=Ge,re.f=Je,q.f=ue,P.f=ae.f=Ce,W.f=Ue,De.f=function(et){return qt(Ie(et),et)},_&&(di(Hi,"description",{configurable:!0,get:function(){return pt(this).description}}),h||le(Kt,"propertyIsEnumerable",Ge,{unsafe:!0}))),y({global:!0,wrap:!0,forced:!b,sham:!b},{Symbol:ot}),gt(Y(Ut),function(et){xe(et)}),y({target:Ct,stat:!0,forced:!b},{for:function(et){var st=Q(et);if(k(Ht,st))return Ht[st];var yt=ot(st);return Ht[st]=yt,fi[yt]=st,yt},keyFor:function(st){if(!X(st))throw Pe(st+" is not a symbol");if(k(fi,st))return fi[st]},useSetter:function(){Xi=!0},useSimple:function(){Xi=!1}}),y({target:"Object",stat:!0,forced:!b,sham:!_},{create:function(st,yt){return void 0===yt?$(st):qe($(st),yt)},defineProperty:Je,defineProperties:qe,getOwnPropertyDescriptor:ue}),y({target:"Object",stat:!0,forced:!b},{getOwnPropertyNames:Ce,getOwnPropertySymbols:Ue}),y({target:"Object",stat:!0,forced:M(function(){W.f(1)})},{getOwnPropertySymbols:function(st){return W.f(oe(st))}}),Ot&&y({target:"JSON",stat:!0,forced:!b||M(function(){var et=ot();return"[null]"!=Ot([et])||"{}"!=Ot({a:et})||"{}"!=Ot(Object(et))})},{stringify:function(st,yt,Mt){var ei=be(arguments),nn=yt;if((V(yt)||void 0!==st)&&!X(st))return H(yt)||(yt=function(to,Vi){if(U(nn)&&(Vi=l(nn,this,to,Vi)),!X(Vi))return Vi}),ei[1]=yt,n(Ot,null,ei)}}),!Hi[ki]){var gi=Hi.valueOf;le(Hi,ki,function(et){return l(gi,this)})}Re(ot,Ct),ve[lt]=!0},5623:(T,I,m)=>{m(35985)("matchAll")},85873:(T,I,m)=>{m(35985)("match")},98499:(T,I,m)=>{m(35985)("replace")},81281:(T,I,m)=>{m(35985)("search")},91348:(T,I,m)=>{m(35985)("species")},25609:(T,I,m)=>{m(35985)("split")},69538:(T,I,m)=>{m(35985)("toPrimitive")},64827:(T,I,m)=>{m(35985)("toStringTag")},5256:(T,I,m)=>{m(35985)("unscopables")},58871:(T,I,m)=>{"use strict";var H,y=m(71186),S=m(83232),s=m(61306),n=m(77699),l=m(8394),u=m(2387),h=m(4559),_=m(67616),b=m(59066).enforce,M=m(43491),k=!y.ActiveXObject&&"ActiveXObject"in y,U=function(se){return function(){return se(this,arguments.length?arguments[0]:void 0)}},V=l("WeakMap",U,u);if(M&&k){H=u.getConstructor(U,"WeakMap",!0),n.enable();var J=V.prototype,X=S(J.delete),j=S(J.has),oe=S(J.get),ee=S(J.set);s(J,{delete:function(se){if(h(se)&&!_(se)){var Q=b(this);return Q.frozen||(Q.frozen=new H),X(this,se)||Q.frozen.delete(se)}return X(this,se)},has:function(Q){if(h(Q)&&!_(Q)){var ce=b(this);return ce.frozen||(ce.frozen=new H),j(this,Q)||ce.frozen.has(Q)}return j(this,Q)},get:function(Q){if(h(Q)&&!_(Q)){var ce=b(this);return ce.frozen||(ce.frozen=new H),j(this,Q)?oe(this,Q):ce.frozen.get(Q)}return oe(this,Q)},set:function(Q,ce){if(h(Q)&&!_(Q)){var $=b(this);$.frozen||($.frozen=new H),j(this,Q)?ee(this,Q,ce):$.frozen.set(Q,ce)}else ee(this,Q,ce);return this}})}},69797:(T,I,m)=>{m(96476)},24101:(T,I,m)=>{m(5823)},96860:(T,I,m)=>{m(78084)},1127:(T,I,m)=>{"use strict";var y=m(47695),S=m(86343),s=m(83061);y({target:"Promise",stat:!0},{try:function(n){var l=S.f(this),u=s(n);return(u.error?l.reject:l.resolve)(u.value),l.promise}})},67924:(T,I,m)=>{m(35985)("asyncDispose")},27907:(T,I,m)=>{m(35985)("dispose")},59331:(T,I,m)=>{m(35985)("matcher")},97515:(T,I,m)=>{m(35985)("metadata")},97601:(T,I,m)=>{m(35985)("observable")},61061:(T,I,m)=>{m(35985)("patternMatch")},98377:(T,I,m)=>{m(35985)("replaceAll")},33840:(T,I,m)=>{m(68905);var y=m(27634),S=m(71186),s=m(36346),n=m(30259),l=m(57160),h=m(51227)("toStringTag");for(var _ in y){var b=S[_],M=b&&b.prototype;M&&s(M)!==h&&n(M,h,_),l[_]=l.Array}},56269:(T,I,m)=>{"use strict";m(68905);var y=m(47695),S=m(71186),s=m(31542),n=m(74217),l=m(83232),u=m(20836),h=m(64519),_=m(61306),b=m(81488),M=m(68603),k=m(59066),H=m(37368),U=m(89982),V=m(63262),J=m(56875),X=m(36346),j=m(64808),oe=m(4559),ee=m(40208),se=m(47579),Q=m(79695),ce=m(80009),$=m(27556),Y=m(51227),P=m(25278),ae=Y("iterator"),W="URLSearchParams",q=W+"Iterator",re=k.set,ie=k.getterFor(W),be=k.getterFor(q),le=s("fetch"),fe=s("Request"),Se=s("Headers"),ve=fe&&fe.prototype,me=Se&&Se.prototype,Ie=S.RegExp,De=S.TypeError,xe=S.decodeURIComponent,Re=S.encodeURIComponent,ke=l("".charAt),gt=l([].join),lt=l([].push),Ct=l("".replace),ui=l([].shift),ki=l([].splice),ai=l("".split),pt=l("".slice),Kt=/\+/g,ot=Array(4),Hi=function(Je){return ot[Je-1]||(ot[Je-1]=Ie("((?:%[\\da-f]{2}){"+Je+"})","gi"))},Pe=function(Je){try{return xe(Je)}catch(qe){return Je}},Zi=function(Je){var qe=Ct(Je,Kt," "),Me=4;try{return xe(qe)}catch(Ge){for(;Me;)qe=Ct(qe,Hi(Me--),Pe);return qe}},Ot=/[!'()~]|%20/g,Ui={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},di=function(Je){return Ui[Je]},sn=function(Je){return Ct(Re(Je),Ot,di)},Cn=function(Je,qe){if(qe)for(var ue,Ce,Me=ai(qe,"&"),Ge=0;Ge<Me.length;)(ue=Me[Ge++]).length&&(Ce=ai(ue,"="),lt(Je,{key:Zi(ui(Ce)),value:Zi(gt(Ce,"="))}))},ye=function(Je){this.entries.length=0,Cn(this.entries,Je)},Ee=function(Je,qe){if(Je<qe)throw De("Not enough arguments")},kt=M(function(qe,Me){re(this,{type:q,iterator:ce(ie(qe).entries),kind:Me})},"Iterator",function(){var qe=be(this),Me=qe.kind,Ge=qe.iterator.next(),ue=Ge.value;return Ge.done||(Ge.value="keys"===Me?ue.key:"values"===Me?ue.value:[ue.key,ue.value]),Ge}),Ht=function(){H(this,fi);var ue,Ce,Ue,Ze,gi,et,st,yt,Mt,qe=arguments.length>0?arguments[0]:void 0,Me=this,Ge=[];if(re(Me,{type:W,entries:Ge,updateURL:function(){},updateSearchParams:ye}),void 0!==qe)if(oe(qe))if(ue=$(qe))for(Ue=(Ce=ce(qe,ue)).next;!(Ze=n(Ue,Ce)).done;){if(gi=ce(j(Ze.value)),(st=n(et=gi.next,gi)).done||(yt=n(et,gi)).done||!n(et,gi).done)throw De("Expected sequence with length 2");lt(Ge,{key:ee(st.value),value:ee(yt.value)})}else for(Mt in qe)V(qe,Mt)&&lt(Ge,{key:Mt,value:ee(qe[Mt])});else Cn(Ge,"string"==typeof qe?"?"===ke(qe,0)?pt(qe,1):qe:ee(qe))},fi=Ht.prototype;if(_(fi,{append:function(qe,Me){Ee(arguments.length,2);var Ge=ie(this);lt(Ge.entries,{key:ee(qe),value:ee(Me)}),Ge.updateURL()},delete:function(Je){Ee(arguments.length,1);for(var qe=ie(this),Me=qe.entries,Ge=ee(Je),ue=0;ue<Me.length;)Me[ue].key===Ge?ki(Me,ue,1):ue++;qe.updateURL()},get:function(qe){Ee(arguments.length,1);for(var Me=ie(this).entries,Ge=ee(qe),ue=0;ue<Me.length;ue++)if(Me[ue].key===Ge)return Me[ue].value;return null},getAll:function(qe){Ee(arguments.length,1);for(var Me=ie(this).entries,Ge=ee(qe),ue=[],Ce=0;Ce<Me.length;Ce++)Me[Ce].key===Ge&&lt(ue,Me[Ce].value);return ue},has:function(qe){Ee(arguments.length,1);for(var Me=ie(this).entries,Ge=ee(qe),ue=0;ue<Me.length;)if(Me[ue++].key===Ge)return!0;return!1},set:function(qe,Me){Ee(arguments.length,1);for(var et,Ge=ie(this),ue=Ge.entries,Ce=!1,Ue=ee(qe),Ze=ee(Me),gi=0;gi<ue.length;gi++)(et=ue[gi]).key===Ue&&(Ce?ki(ue,gi--,1):(Ce=!0,et.value=Ze));Ce||lt(ue,{key:Ue,value:Ze}),Ge.updateURL()},sort:function(){var qe=ie(this);P(qe.entries,function(Me,Ge){return Me.key>Ge.key?1:-1}),qe.updateURL()},forEach:function(qe){for(var Ce,Me=ie(this).entries,Ge=J(qe,arguments.length>1?arguments[1]:void 0),ue=0;ue<Me.length;)Ge((Ce=Me[ue++]).value,Ce.key,this)},keys:function(){return new kt(this,"keys")},values:function(){return new kt(this,"values")},entries:function(){return new kt(this,"entries")}},{enumerable:!0}),h(fi,ae,fi.entries,{name:"entries"}),h(fi,"toString",function(){for(var ue,qe=ie(this).entries,Me=[],Ge=0;Ge<qe.length;)ue=qe[Ge++],lt(Me,sn(ue.key)+"="+sn(ue.value));return gt(Me,"&")},{enumerable:!0}),b(Ht,W),y({global:!0,forced:!u},{URLSearchParams:Ht}),!u&&U(Se)){var Ut=l(me.has),Xi=l(me.set),mn=function(Je){if(oe(Je)){var Me,qe=Je.body;if(X(qe)===W)return Me=Je.headers?new Se(Je.headers):new Se,Ut(Me,"content-type")||Xi(Me,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),se(Je,{body:Q(0,ee(qe)),headers:Q(0,Me)})}return Je};if(U(le)&&y({global:!0,enumerable:!0,forced:!0},{fetch:function(qe){return le(qe,arguments.length>1?mn(arguments[1]):{})}}),U(fe)){var qt=function(qe){return H(this,ve),new fe(qe,arguments.length>1?mn(arguments[1]):{})};ve.constructor=qt,qt.prototype=ve,y({global:!0,forced:!0},{Request:qt})}}T.exports={URLSearchParams:Ht,getState:ie}},16775:(T,I,m)=>{var y=m(28430);T.exports=y},4718:(T,I,m)=>{var y=m(19117);T.exports=y},15593:(T,I,m)=>{var y=m(37311);T.exports=y},29568:(T,I,m)=>{var y=m(52535);T.exports=y},81826:(T,I,m)=>{var y=m(38615);m(33840),T.exports=y},29032:(T,I,m)=>{var y=m(59597);T.exports=y},93928:(T,I,m)=>{m(33840);var y=m(36346),S=m(63262),s=m(49778),n=m(15593),l=Array.prototype,u={DOMTokenList:!0,NodeList:!0};T.exports=function(h){var _=h.entries;return h===l||s(l,h)&&_===l.entries||S(u,y(h))?n:_}},40779:(T,I,m)=>{var y=m(46824);T.exports=y},88092:(T,I,m)=>{var y=m(45600);T.exports=y},48596:(T,I,m)=>{m(33840);var y=m(36346),S=m(63262),s=m(49778),n=m(29568),l=Array.prototype,u={DOMTokenList:!0,NodeList:!0};T.exports=function(h){var _=h.forEach;return h===l||s(l,h)&&_===l.forEach||S(u,y(h))?n:_}},43910:(T,I,m)=>{var y=m(85923);T.exports=y},35093:(T,I,m)=>{var y=m(77146);T.exports=y},89412:(T,I,m)=>{var y=m(24773);T.exports=y},71166:(T,I,m)=>{var y=m(58445);T.exports=y},14570:(T,I,m)=>{var y=m(8138);T.exports=y},68786:(T,I,m)=>{var y=m(41108);T.exports=y},94768:(T,I,m)=>{var y=m(27615);T.exports=y},5219:(T,I,m)=>{var y=m(92889);T.exports=y},71258:(T,I,m)=>{var y=m(5318);T.exports=y},72102:(T,I,m)=>{var y=m(75634);T.exports=y},47833:(T,I,m)=>{var y=m(36669);T.exports=y},87440:(T,I,m)=>{var y=m(88095);T.exports=y},48021:(T,I,m)=>{var y=m(89439);T.exports=y},4490:(T,I,m)=>{var y=m(13799);T.exports=y},16625:(T,I,m)=>{var y=m(33054);T.exports=y},95609:(T,I,m)=>{var y=m(649);m(33840),T.exports=y},35875:(T,I,m)=>{var y=m(67079);m(33840),T.exports=y},34542:(T,I,m)=>{var y=m(41519);m(33840),T.exports=y},56447:(T,I,m)=>{var y=m(84253);m(33840),T.exports=y},3024:(T,I,m)=>{var y=m(21643);m(33840),T.exports=y},84253:(T,I,m)=>{m(56269);var y=m(35361);T.exports=y.URLSearchParams},36316:function(){var T;T="undefined"!=typeof self?self:this,function(m){var y_searchParams="URLSearchParams"in T,y_iterable="Symbol"in T&&"iterator"in Symbol,y_blob="FileReader"in T&&"Blob"in T&&function(){try{return new Blob,!0}catch(Y){return!1}}(),y_formData="FormData"in T,y_arrayBuffer="ArrayBuffer"in T;if(y_arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(Y){return Y&&s.indexOf(Object.prototype.toString.call(Y))>-1};function l(Y){if("string"!=typeof Y&&(Y=String(Y)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Y))throw new TypeError("Invalid character in header field name");return Y.toLowerCase()}function u(Y){return"string"!=typeof Y&&(Y=String(Y)),Y}function h(Y){var P={next:function(){var ae=Y.shift();return{done:void 0===ae,value:ae}}};return y_iterable&&(P[Symbol.iterator]=function(){return P}),P}function _(Y){this.map={},Y instanceof _?Y.forEach(function(P,ae){this.append(ae,P)},this):Array.isArray(Y)?Y.forEach(function(P){this.append(P[0],P[1])},this):Y&&Object.getOwnPropertyNames(Y).forEach(function(P){this.append(P,Y[P])},this)}function b(Y){if(Y.bodyUsed)return Promise.reject(new TypeError("Already read"));Y.bodyUsed=!0}function M(Y){return new Promise(function(P,ae){Y.onload=function(){P(Y.result)},Y.onerror=function(){ae(Y.error)}})}function k(Y){var P=new FileReader,ae=M(P);return P.readAsArrayBuffer(Y),ae}function V(Y){if(Y.slice)return Y.slice(0);var P=new Uint8Array(Y.byteLength);return P.set(new Uint8Array(Y)),P.buffer}function J(){return this.bodyUsed=!1,this._initBody=function(Y){this._bodyInit=Y,Y?"string"==typeof Y?this._bodyText=Y:y_blob&&Blob.prototype.isPrototypeOf(Y)?this._bodyBlob=Y:y_formData&&FormData.prototype.isPrototypeOf(Y)?this._bodyFormData=Y:y_searchParams&&URLSearchParams.prototype.isPrototypeOf(Y)?this._bodyText=Y.toString():y_arrayBuffer&&y_blob&&function(Y){return Y&&DataView.prototype.isPrototypeOf(Y)}(Y)?(this._bodyArrayBuffer=V(Y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Y)||n(Y))?this._bodyArrayBuffer=V(Y):this._bodyText=Y=Object.prototype.toString.call(Y):this._bodyText="",this.headers.get("content-type")||("string"==typeof Y?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y_searchParams&&URLSearchParams.prototype.isPrototypeOf(Y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y_blob&&(this.blob=function(){var Y=b(this);if(Y)return Y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var Y=b(this);if(Y)return Y;if(this._bodyBlob)return function(Y){var P=new FileReader,ae=M(P);return P.readAsText(Y),ae}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(Y){for(var P=new Uint8Array(Y),ae=new Array(P.length),W=0;W<P.length;W++)ae[W]=String.fromCharCode(P[W]);return ae.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y_formData&&(this.formData=function(){return this.text().then(ee)}),this.json=function(){return this.text().then(JSON.parse)},this}_.prototype.append=function(Y,P){Y=l(Y),P=u(P);var ae=this.map[Y];this.map[Y]=ae?ae+", "+P:P},_.prototype.delete=function(Y){delete this.map[l(Y)]},_.prototype.get=function(Y){return Y=l(Y),this.has(Y)?this.map[Y]:null},_.prototype.has=function(Y){return this.map.hasOwnProperty(l(Y))},_.prototype.set=function(Y,P){this.map[l(Y)]=u(P)},_.prototype.forEach=function(Y,P){for(var ae in this.map)this.map.hasOwnProperty(ae)&&Y.call(P,this.map[ae],ae,this)},_.prototype.keys=function(){var Y=[];return this.forEach(function(P,ae){Y.push(ae)}),h(Y)},_.prototype.values=function(){var Y=[];return this.forEach(function(P){Y.push(P)}),h(Y)},_.prototype.entries=function(){var Y=[];return this.forEach(function(P,ae){Y.push([ae,P])}),h(Y)},y_iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);var X=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function oe(Y,P){var ae=(P=P||{}).body;if(Y instanceof oe){if(Y.bodyUsed)throw new TypeError("Already read");this.url=Y.url,this.credentials=Y.credentials,P.headers||(this.headers=new _(Y.headers)),this.method=Y.method,this.mode=Y.mode,this.signal=Y.signal,!ae&&null!=Y._bodyInit&&(ae=Y._bodyInit,Y.bodyUsed=!0)}else this.url=String(Y);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new _(P.headers)),this.method=function(Y){var P=Y.toUpperCase();return X.indexOf(P)>-1?P:Y}(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&ae)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ae)}function ee(Y){var P=new FormData;return Y.trim().split("&").forEach(function(ae){if(ae){var W=ae.split("="),q=W.shift().replace(/\+/g," "),re=W.join("=").replace(/\+/g," ");P.append(decodeURIComponent(q),decodeURIComponent(re))}}),P}function se(Y){var P=new _;return Y.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(W){var q=W.split(":"),re=q.shift().trim();if(re){var ie=q.join(":").trim();P.append(re,ie)}}),P}function Q(Y,P){P||(P={}),this.type="default",this.status=void 0===P.status?200:P.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in P?P.statusText:"OK",this.headers=new _(P.headers),this.url=P.url||"",this._initBody(Y)}oe.prototype.clone=function(){return new oe(this,{body:this._bodyInit})},J.call(oe.prototype),J.call(Q.prototype),Q.prototype.clone=function(){return new Q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},Q.error=function(){var Y=new Q(null,{status:0,statusText:""});return Y.type="error",Y};var ce=[301,302,303,307,308];Q.redirect=function(Y,P){if(-1===ce.indexOf(P))throw new RangeError("Invalid status code");return new Q(null,{status:P,headers:{location:Y}})},m.DOMException=T.DOMException;try{new m.DOMException}catch(Y){m.DOMException=function(P,ae){this.message=P,this.name=ae;var W=Error(P);this.stack=W.stack},m.DOMException.prototype=Object.create(Error.prototype),m.DOMException.prototype.constructor=m.DOMException}function $(Y,P){return new Promise(function(ae,W){var q=new oe(Y,P);if(q.signal&&q.signal.aborted)return W(new m.DOMException("Aborted","AbortError"));var re=new XMLHttpRequest;function ie(){re.abort()}re.onload=function(){var be={status:re.status,statusText:re.statusText,headers:se(re.getAllResponseHeaders()||"")};be.url="responseURL"in re?re.responseURL:be.headers.get("X-Request-URL"),ae(new Q("response"in re?re.response:re.responseText,be))},re.onerror=function(){W(new TypeError("Network request failed"))},re.ontimeout=function(){W(new TypeError("Network request failed"))},re.onabort=function(){W(new m.DOMException("Aborted","AbortError"))},re.open(q.method,q.url,!0),"include"===q.credentials?re.withCredentials=!0:"omit"===q.credentials&&(re.withCredentials=!1),"responseType"in re&&y_blob&&(re.responseType="blob"),q.headers.forEach(function(be,le){re.setRequestHeader(le,be)}),q.signal&&(q.signal.addEventListener("abort",ie),re.onreadystatechange=function(){4===re.readyState&&q.signal.removeEventListener("abort",ie)}),re.send(void 0===q._bodyInit?null:q._bodyInit)})}$.polyfill=!0,T.fetch||(T.fetch=$,T.Headers=_,T.Request=oe,T.Response=Q),m.Headers=_,m.Request=oe,m.Response=Q,m.fetch=$,Object.defineProperty(m,"__esModule",{value:!0})}({})},60910:T=>{"use strict";function I(n){return n instanceof Buffer||n instanceof Date||n instanceof RegExp}function m(n){if(n instanceof Buffer){var l=Buffer.alloc?Buffer.alloc(n.length):new Buffer(n.length);return n.copy(l),l}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp)return new RegExp(n);throw new Error("Unexpected situation")}function y(n){var l=[];return n.forEach(function(u,h){l[h]="object"==typeof u&&null!==u?Array.isArray(u)?y(u):I(u)?m(u):s({},u):u}),l}function S(n,l){return"__proto__"===l?void 0:n[l]}var s=T.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var u,h,n=arguments[0],l=Array.prototype.slice.call(arguments,1);return l.forEach(function(b){"object"!=typeof b||null===b||Array.isArray(b)||Object.keys(b).forEach(function(M){if(h=S(n,M),(u=S(b,M))!==n)return"object"!=typeof u||null===u?void(n[M]=u):Array.isArray(u)?void(n[M]=y(u)):I(u)?void(n[M]=m(u)):"object"!=typeof h||null===h||Array.isArray(h)?void(n[M]=s({},u)):void(n[M]=s(h,u))})}),n}},48086:function(T,I){var S;void 0!==(S=function(){"use strict";function n(M,k,H){var U=new XMLHttpRequest;U.open("GET",M),U.responseType="blob",U.onload=function(){b(U.response,k,H)},U.onerror=function(){console.error("could not download file")},U.send()}function l(M){var k=new XMLHttpRequest;k.open("HEAD",M,!1);try{k.send()}catch(H){}return 200<=k.status&&299>=k.status}function u(M){try{M.dispatchEvent(new MouseEvent("click"))}catch(H){var k=document.createEvent("MouseEvents");k.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),M.dispatchEvent(k)}}var h="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,_=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=h.saveAs||("object"!=typeof window||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(M,k,H){var U=h.URL||h.webkitURL,V=document.createElement("a");V.download=k=k||M.name||"download",V.rel="noopener","string"==typeof M?(V.href=M,V.origin===location.origin?u(V):l(V.href)?n(M,k,H):u(V,V.target="_blank")):(V.href=U.createObjectURL(M),setTimeout(function(){U.revokeObjectURL(V.href)},4e4),setTimeout(function(){u(V)},0))}:"msSaveOrOpenBlob"in navigator?function(M,k,H){if(k=k||M.name||"download","string"!=typeof M)navigator.msSaveOrOpenBlob(function(M,k){return void 0===k?k={autoBom:!1}:"object"!=typeof k&&(console.warn("Deprecated: Expected third argument to be a object"),k={autoBom:!k}),k.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(M.type)?new Blob(["\ufeff",M],{type:M.type}):M}(M,H),k);else if(l(M))n(M,k,H);else{var U=document.createElement("a");U.href=M,U.target="_blank",setTimeout(function(){u(U)})}}:function(M,k,H,U){if((U=U||open("","_blank"))&&(U.document.title=U.document.body.innerText="downloading..."),"string"==typeof M)return n(M,k,H);var V="application/octet-stream"===M.type,J=/constructor/i.test(h.HTMLElement)||h.safari,X=/CriOS\/[\d]+/.test(navigator.userAgent);if((X||V&&J||_)&&"undefined"!=typeof FileReader){var j=new FileReader;j.onloadend=function(){var se=j.result;se=X?se:se.replace(/^data:[^;]*;/,"data:attachment/file;"),U?U.location.href=se:location=se,U=null},j.readAsDataURL(M)}else{var oe=h.URL||h.webkitURL,ee=oe.createObjectURL(M);U?U.location=ee:location.href=ee,U=null,setTimeout(function(){oe.revokeObjectURL(ee)},4e4)}});h.saveAs=b.saveAs=b,T.exports=b}.apply(I,[]))&&(T.exports=S)},78953:T=>{"use strict";var I="Function.prototype.bind called on incompatible ",m=Array.prototype.slice,y=Object.prototype.toString,S="[object Function]";T.exports=function(n){var l=this;if("function"!=typeof l||y.call(l)!==S)throw new TypeError(I+l);for(var h,u=m.call(arguments,1),_=function(){if(this instanceof h){var U=l.apply(this,u.concat(m.call(arguments)));return Object(U)===U?U:this}return l.apply(n,u.concat(m.call(arguments)))},b=Math.max(0,l.length-u.length),M=[],k=0;k<b;k++)M.push("$"+k);if(h=Function("binder","return function ("+M.join(",")+"){ return binder.apply(this,arguments); }")(_),l.prototype){var H=function(){};H.prototype=l.prototype,h.prototype=new H,H.prototype=null}return h}},11138:(T,I,m)=>{"use strict";var y=m(78953);T.exports=Function.prototype.bind||y},1326:(T,I,m)=>{"use strict";var y,S=SyntaxError,s=Function,n=TypeError,l=function(ae){try{return s('"use strict"; return ('+ae+").constructor;")()}catch(W){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(ae){u=null}var h=function(){throw new n},_=u?function(){try{return h}catch(ae){try{return u(arguments,"callee").get}catch(W){return h}}}():h,b=m(18097)(),M=Object.getPrototypeOf||function(ae){return ae.__proto__},k={},H="undefined"==typeof Uint8Array?y:M(Uint8Array),U={"%AggregateError%":"undefined"==typeof AggregateError?y:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?y:ArrayBuffer,"%ArrayIteratorPrototype%":b?M([][Symbol.iterator]()):y,"%AsyncFromSyncIteratorPrototype%":y,"%AsyncFunction%":k,"%AsyncGenerator%":k,"%AsyncGeneratorFunction%":k,"%AsyncIteratorPrototype%":k,"%Atomics%":"undefined"==typeof Atomics?y:Atomics,"%BigInt%":"undefined"==typeof BigInt?y:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?y:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?y:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?y:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":k,"%Int8Array%":"undefined"==typeof Int8Array?y:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?y:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b?M(M([][Symbol.iterator]())):y,"%JSON%":"object"==typeof JSON?JSON:y,"%Map%":"undefined"==typeof Map?y:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&b?M((new Map)[Symbol.iterator]()):y,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?y:Promise,"%Proxy%":"undefined"==typeof Proxy?y:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?y:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?y:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&b?M((new Set)[Symbol.iterator]()):y,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b?M(""[Symbol.iterator]()):y,"%Symbol%":b?Symbol:y,"%SyntaxError%":S,"%ThrowTypeError%":_,"%TypedArray%":H,"%TypeError%":n,"%Uint8Array%":"undefined"==typeof Uint8Array?y:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?y:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?y:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?y:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?y:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?y:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?y:WeakSet},V=function ae(W){var q;if("%AsyncFunction%"===W)q=l("async function () {}");else if("%GeneratorFunction%"===W)q=l("function* () {}");else if("%AsyncGeneratorFunction%"===W)q=l("async function* () {}");else if("%AsyncGenerator%"===W){var re=ae("%AsyncGeneratorFunction%");re&&(q=re.prototype)}else if("%AsyncIteratorPrototype%"===W){var ie=ae("%AsyncGenerator%");ie&&(q=M(ie.prototype))}return U[W]=q,q},J={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},X=m(11138),j=m(51142),oe=X.call(Function.call,Array.prototype.concat),ee=X.call(Function.apply,Array.prototype.splice),se=X.call(Function.call,String.prototype.replace),Q=X.call(Function.call,String.prototype.slice),ce=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,Y=function(W){var q=Q(W,0,1),re=Q(W,-1);if("%"===q&&"%"!==re)throw new S("invalid intrinsic syntax, expected closing `%`");if("%"===re&&"%"!==q)throw new S("invalid intrinsic syntax, expected opening `%`");var ie=[];return se(W,ce,function(be,le,fe,Se){ie[ie.length]=fe?se(Se,$,"$1"):le||be}),ie},P=function(W,q){var ie,re=W;if(j(J,re)&&(re="%"+(ie=J[re])[0]+"%"),j(U,re)){var be=U[re];if(be===k&&(be=V(re)),void 0===be&&!q)throw new n("intrinsic "+W+" exists, but is not available. Please file an issue!");return{alias:ie,name:re,value:be}}throw new S("intrinsic "+W+" does not exist!")};T.exports=function(W,q){if("string"!=typeof W||0===W.length)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof q)throw new n('"allowMissing" argument must be a boolean');var re=Y(W),ie=re.length>0?re[0]:"",be=P("%"+ie+"%",q),le=be.name,fe=be.value,Se=!1,ve=be.alias;ve&&(ie=ve[0],ee(re,oe([0,1],ve)));for(var me=1,Ie=!0;me<re.length;me+=1){var De=re[me],xe=Q(De,0,1),Re=Q(De,-1);if(('"'===xe||"'"===xe||"`"===xe||'"'===Re||"'"===Re||"`"===Re)&&xe!==Re)throw new S("property names with quotes must have matching quotes");if(("constructor"===De||!Ie)&&(Se=!0),j(U,le="%"+(ie+="."+De)+"%"))fe=U[le];else if(null!=fe){if(!(De in fe)){if(!q)throw new n("base intrinsic for "+W+" exists, but the property is not available.");return}if(u&&me+1>=re.length){var ke=u(fe,De);fe=(Ie=!!ke)&&"get"in ke&&!("originalValue"in ke.get)?ke.get:fe[De]}else Ie=j(fe,De),fe=fe[De];Ie&&!Se&&(U[le]=fe)}}return fe}},18097:(T,I,m)=>{"use strict";var y="undefined"!=typeof Symbol&&Symbol,S=m(14933);T.exports=function(){return"function"==typeof y&&"function"==typeof Symbol&&"symbol"==typeof y("foo")&&"symbol"==typeof Symbol("bar")&&S()}},14933:T=>{"use strict";T.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var m={},y=Symbol("test"),S=Object(y);if("string"==typeof y||"[object Symbol]"!==Object.prototype.toString.call(y)||"[object Symbol]"!==Object.prototype.toString.call(S))return!1;for(y in m[y]=42,m)return!1;if("function"==typeof Object.keys&&0!==Object.keys(m).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(m).length)return!1;var n=Object.getOwnPropertySymbols(m);if(1!==n.length||n[0]!==y||!Object.prototype.propertyIsEnumerable.call(m,y))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(m,y);if(42!==l.value||!0!==l.enumerable)return!1}return!0}},51142:(T,I,m)=>{"use strict";var y=m(11138);T.exports=y.call(Function.call,Object.prototype.hasOwnProperty)},41510:T=>{var ue,m="__lodash_hash_undefined__",y=1/0,l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,h=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,k=/^\[object .+?Constructor\]$/,H="object"==typeof global&&global&&global.Object===Object&&global,U="object"==typeof self&&self&&self.Object===Object&&self,V=H||U||Function("return this")(),j=Array.prototype,oe=Function.prototype,ee=Object.prototype,se=V["__core-js_shared__"],Q=(ue=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||""))?"Symbol(src)_1."+ue:"",ce=oe.toString,$=ee.hasOwnProperty,Y=ee.toString,P=RegExp("^"+ce.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ae=V.Symbol,W=j.splice,q=di(V,"Map"),re=di(Object,"create"),ie=ae?ae.prototype:void 0,be=ie?ie.toString:void 0;function le(ue){var Ce=-1,Ue=ue?ue.length:0;for(this.clear();++Ce<Ue;){var Ze=ue[Ce];this.set(Ze[0],Ze[1])}}function De(ue){var Ce=-1,Ue=ue?ue.length:0;for(this.clear();++Ce<Ue;){var Ze=ue[Ce];this.set(Ze[0],Ze[1])}}function Ct(ue){var Ce=-1,Ue=ue?ue.length:0;for(this.clear();++Ce<Ue;){var Ze=ue[Ce];this.set(Ze[0],Ze[1])}}function ot(ue,Ce){for(var Ue=ue.length;Ue--;)if(Ut(ue[Ue][0],Ce))return Ue;return-1}function Ui(ue,Ce){var Ue=ue.__data__;return function(ue){var Ce=typeof ue;return"string"==Ce||"number"==Ce||"symbol"==Ce||"boolean"==Ce?"__proto__"!==ue:null===ue}(Ce)?Ue["string"==typeof Ce?"string":"hash"]:Ue.map}function di(ue,Ce){var Ue=function(ue,Ce){return null==ue?void 0:ue[Ce]}(ue,Ce);return function(ue){if(!qt(ue)||function(ue){return!!Q&&Q in ue}(ue))return!1;var Ce=function(ue){var Ce=qt(ue)?Y.call(ue):"";return"[object Function]"==Ce||"[object GeneratorFunction]"==Ce}(ue)||function(ue){var Ce=!1;if(null!=ue&&"function"!=typeof ue.toString)try{Ce=!!(ue+"")}catch(Ue){}return Ce}(ue)?P:k;return Ce.test(function(ue){if(null!=ue){try{return ce.call(ue)}catch(Ce){}try{return ue+""}catch(Ce){}}return""}(ue))}(Ue)?Ue:void 0}le.prototype.clear=function(){this.__data__=re?re(null):{}},le.prototype.delete=function(ue){return this.has(ue)&&delete this.__data__[ue]},le.prototype.get=function(ue){var Ce=this.__data__;if(re){var Ue=Ce[ue];return Ue===m?void 0:Ue}return $.call(Ce,ue)?Ce[ue]:void 0},le.prototype.has=function(ue){var Ce=this.__data__;return re?void 0!==Ce[ue]:$.call(Ce,ue)},le.prototype.set=function(ue,Ce){return this.__data__[ue]=re&&void 0===Ce?m:Ce,this},De.prototype.clear=function(){this.__data__=[]},De.prototype.delete=function(ue){var Ce=this.__data__,Ue=ot(Ce,ue);return!(Ue<0||(Ue==Ce.length-1?Ce.pop():W.call(Ce,Ue,1),0))},De.prototype.get=function(ue){var Ce=this.__data__,Ue=ot(Ce,ue);return Ue<0?void 0:Ce[Ue][1]},De.prototype.has=function(ue){return ot(this.__data__,ue)>-1},De.prototype.set=function(ue,Ce){var Ue=this.__data__,Ze=ot(Ue,ue);return Ze<0?Ue.push([ue,Ce]):Ue[Ze][1]=Ce,this},Ct.prototype.clear=function(){this.__data__={hash:new le,map:new(q||De),string:new le}},Ct.prototype.delete=function(ue){return Ui(this,ue).delete(ue)},Ct.prototype.get=function(ue){return Ui(this,ue).get(ue)},Ct.prototype.has=function(ue){return Ui(this,ue).has(ue)},Ct.prototype.set=function(ue,Ce){return Ui(this,ue).set(ue,Ce),this};var Ee=fi(function(ue){ue=function(ue){return null==ue?"":function(ue){if("string"==typeof ue)return ue;if(qe(ue))return be?be.call(ue):"";var Ce=ue+"";return"0"==Ce&&1/ue==-y?"-0":Ce}(ue)}(ue);var Ce=[];return h.test(ue)&&Ce.push(""),ue.replace(_,function(Ue,Ze,gi,et){Ce.push(gi?et.replace(M,"$1"):Ze||Ue)}),Ce});function kt(ue){if("string"==typeof ue||qe(ue))return ue;var Ce=ue+"";return"0"==Ce&&1/ue==-y?"-0":Ce}function fi(ue,Ce){if("function"!=typeof ue||Ce&&"function"!=typeof Ce)throw new TypeError("Expected a function");var Ue=function(){var Ze=arguments,gi=Ce?Ce.apply(this,Ze):Ze[0],et=Ue.cache;if(et.has(gi))return et.get(gi);var st=ue.apply(this,Ze);return Ue.cache=et.set(gi,st),st};return Ue.cache=new(fi.Cache||Ct),Ue}function Ut(ue,Ce){return ue===Ce||ue!=ue&&Ce!=Ce}fi.Cache=Ct;var Xi=Array.isArray;function qt(ue){var Ce=typeof ue;return!!ue&&("object"==Ce||"function"==Ce)}function qe(ue){return"symbol"==typeof ue||function(ue){return!!ue&&"object"==typeof ue}(ue)&&"[object Symbol]"==Y.call(ue)}T.exports=function(ue,Ce,Ue){var Ze=null==ue?void 0:function(ue,Ce){Ce=function(ue,Ce){if(Xi(ue))return!1;var Ue=typeof ue;return!("number"!=Ue&&"symbol"!=Ue&&"boolean"!=Ue&&null!=ue&&!qe(ue))||u.test(ue)||!l.test(ue)||null!=Ce&&ue in Object(Ce)}(Ce,ue)?[Ce]:function(ue){return Xi(ue)?ue:Ee(ue)}(Ce);for(var Ue=0,Ze=Ce.length;null!=ue&&Ue<Ze;)ue=ue[kt(Ce[Ue++])];return Ue&&Ue==Ze?ue:void 0}(ue,Ce);return void 0===Ze?Ue:Ze}},92778:(T,I,m)=>{var s=m(30573)(m(13737),"DataView");T.exports=s},95581:(T,I,m)=>{var y=m(58529),S=m(95882),s=m(93067),n=m(28726),l=m(3609);function u(h){var _=-1,b=null==h?0:h.length;for(this.clear();++_<b;){var M=h[_];this.set(M[0],M[1])}}u.prototype.clear=y,u.prototype.delete=S,u.prototype.get=s,u.prototype.has=n,u.prototype.set=l,T.exports=u},55961:(T,I,m)=>{var y=m(82626),S=m(28471),s=m(39349),n=m(80268),l=m(36032);function u(h){var _=-1,b=null==h?0:h.length;for(this.clear();++_<b;){var M=h[_];this.set(M[0],M[1])}}u.prototype.clear=y,u.prototype.delete=S,u.prototype.get=s,u.prototype.has=n,u.prototype.set=l,T.exports=u},46741:(T,I,m)=>{var s=m(30573)(m(13737),"Map");T.exports=s},40281:(T,I,m)=>{var y=m(78176),S=m(48116),s=m(22679),n=m(22230),l=m(99766);function u(h){var _=-1,b=null==h?0:h.length;for(this.clear();++_<b;){var M=h[_];this.set(M[0],M[1])}}u.prototype.clear=y,u.prototype.delete=S,u.prototype.get=s,u.prototype.has=n,u.prototype.set=l,T.exports=u},96442:(T,I,m)=>{var s=m(30573)(m(13737),"Promise");T.exports=s},35435:(T,I,m)=>{var s=m(30573)(m(13737),"Set");T.exports=s},68366:(T,I,m)=>{var y=m(55961),S=m(38359),s=m(35987),n=m(40286),l=m(62709),u=m(92764);function h(_){var b=this.__data__=new y(_);this.size=b.size}h.prototype.clear=S,h.prototype.delete=s,h.prototype.get=n,h.prototype.has=l,h.prototype.set=u,T.exports=h},73555:(T,I,m)=>{var y=m(13737);T.exports=y.Symbol},7025:(T,I,m)=>{var y=m(13737);T.exports=y.Uint8Array},89885:(T,I,m)=>{var s=m(30573)(m(13737),"WeakMap");T.exports=s},8914:T=>{T.exports=function(m,y){for(var S=-1,s=null==m?0:m.length;++S<s&&!1!==y(m[S],S,m););return m}},71236:T=>{T.exports=function(m,y){for(var S=-1,s=null==m?0:m.length,n=0,l=[];++S<s;){var u=m[S];y(u,S,m)&&(l[n++]=u)}return l}},50185:(T,I,m)=>{var y=m(34110),S=m(12208),s=m(52092),n=m(44735),l=m(14846),u=m(83483),_=Object.prototype.hasOwnProperty;T.exports=function(M,k){var H=s(M),U=!H&&S(M),V=!H&&!U&&n(M),J=!H&&!U&&!V&&u(M),X=H||U||V||J,j=X?y(M.length,String):[],oe=j.length;for(var ee in M)(k||_.call(M,ee))&&(!X||!("length"==ee||V&&("offset"==ee||"parent"==ee)||J&&("buffer"==ee||"byteLength"==ee||"byteOffset"==ee)||l(ee,oe)))&&j.push(ee);return j}},11981:T=>{T.exports=function(m,y){for(var S=-1,s=null==m?0:m.length,n=Array(s);++S<s;)n[S]=y(m[S],S,m);return n}},60583:T=>{T.exports=function(m,y){for(var S=-1,s=y.length,n=m.length;++S<s;)m[n+S]=y[S];return m}},30919:(T,I,m)=>{var y=m(20826),S=m(9412),n=Object.prototype.hasOwnProperty;T.exports=function(u,h,_){var b=u[h];(!n.call(u,h)||!S(b,_)||void 0===_&&!(h in u))&&y(u,h,_)}},58459:(T,I,m)=>{var y=m(9412);T.exports=function(s,n){for(var l=s.length;l--;)if(y(s[l][0],n))return l;return-1}},88244:(T,I,m)=>{var y=m(14976),S=m(5773);T.exports=function(n,l){return n&&y(l,S(l),n)}},91948:(T,I,m)=>{var y=m(14976),S=m(39754);T.exports=function(n,l){return n&&y(l,S(l),n)}},20826:(T,I,m)=>{var y=m(32062);T.exports=function(s,n,l){"__proto__"==n&&y?y(s,n,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[n]=l}},17584:(T,I,m)=>{var y=m(68366),S=m(8914),s=m(30919),n=m(88244),l=m(91948),u=m(59352),h=m(35004),_=m(67703),b=m(42058),M=m(12818),k=m(16233),H=m(96435),U=m(47176),V=m(53678),J=m(80177),X=m(52092),j=m(44735),oe=m(56432),ee=m(27954),se=m(65871),Q=m(5773),ce=m(39754),ae="[object Arguments]",be="[object Function]",ve="[object Object]",Pe={};Pe[ae]=Pe["[object Array]"]=Pe["[object ArrayBuffer]"]=Pe["[object DataView]"]=Pe["[object Boolean]"]=Pe["[object Date]"]=Pe["[object Float32Array]"]=Pe["[object Float64Array]"]=Pe["[object Int8Array]"]=Pe["[object Int16Array]"]=Pe["[object Int32Array]"]=Pe["[object Map]"]=Pe["[object Number]"]=Pe[ve]=Pe["[object RegExp]"]=Pe["[object Set]"]=Pe["[object String]"]=Pe["[object Symbol]"]=Pe["[object Uint8Array]"]=Pe["[object Uint8ClampedArray]"]=Pe["[object Uint16Array]"]=Pe["[object Uint32Array]"]=!0,Pe["[object Error]"]=Pe[be]=Pe["[object WeakMap]"]=!1,T.exports=function Zi(Ot,Ui,di,sn,Cn,ye){var Ee,kt=1&Ui,Ht=2&Ui,fi=4&Ui;if(di&&(Ee=Cn?di(Ot,sn,Cn,ye):di(Ot)),void 0!==Ee)return Ee;if(!ee(Ot))return Ot;var Ut=X(Ot);if(Ut){if(Ee=U(Ot),!kt)return h(Ot,Ee)}else{var Xi=H(Ot),mn=Xi==be||"[object GeneratorFunction]"==Xi;if(j(Ot))return u(Ot,kt);if(Xi==ve||Xi==ae||mn&&!Cn){if(Ee=Ht||mn?{}:J(Ot),!kt)return Ht?b(Ot,l(Ee,Ot)):_(Ot,n(Ee,Ot))}else{if(!Pe[Xi])return Cn?Ot:{};Ee=V(Ot,Xi,kt)}}ye||(ye=new y);var qt=ye.get(Ot);if(qt)return qt;ye.set(Ot,Ee),se(Ot)?Ot.forEach(function(Me){Ee.add(Zi(Me,Ui,di,Me,Ot,ye))}):oe(Ot)&&Ot.forEach(function(Me,Ge){Ee.set(Ge,Zi(Me,Ui,di,Ge,Ot,ye))});var qe=Ut?void 0:(fi?Ht?k:M:Ht?ce:Q)(Ot);return S(qe||Ot,function(Me,Ge){qe&&(Me=Ot[Ge=Me]),s(Ee,Ge,Zi(Me,Ui,di,Ge,Ot,ye))}),Ee}},30866:(T,I,m)=>{var y=m(27954),S=Object.create,s=function(){function n(){}return function(l){if(!y(l))return{};if(S)return S(l);n.prototype=l;var u=new n;return n.prototype=void 0,u}}();T.exports=s},80255:(T,I,m)=>{var y=m(52426),S=m(41162);T.exports=function(n,l){for(var u=0,h=(l=y(l,n)).length;null!=n&&u<h;)n=n[S(l[u++])];return u&&u==h?n:void 0}},20702:(T,I,m)=>{var y=m(60583),S=m(52092);T.exports=function(n,l,u){var h=l(n);return S(n)?h:y(h,u(n))}},15687:(T,I,m)=>{var y=m(73555),S=m(23531),s=m(98406),u=y?y.toStringTag:void 0;T.exports=function(_){return null==_?void 0===_?"[object Undefined]":"[object Null]":u&&u in Object(_)?S(_):s(_)}},11760:(T,I,m)=>{var y=m(15687),S=m(12142);T.exports=function(l){return S(l)&&"[object Arguments]"==y(l)}},54929:(T,I,m)=>{var y=m(96435),S=m(12142);T.exports=function(l){return S(l)&&"[object Map]"==y(l)}},67097:(T,I,m)=>{var y=m(27660),S=m(94996),s=m(27954),n=m(25850),u=/^\[object .+?Constructor\]$/,k=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");T.exports=function(U){return!(!s(U)||S(U))&&(y(U)?k:u).test(n(U))}},77480:(T,I,m)=>{var y=m(96435),S=m(12142);T.exports=function(l){return S(l)&&"[object Set]"==y(l)}},89638:(T,I,m)=>{var y=m(15687),S=m(85353),s=m(12142),q={};q["[object Float32Array]"]=q["[object Float64Array]"]=q["[object Int8Array]"]=q["[object Int16Array]"]=q["[object Int32Array]"]=q["[object Uint8Array]"]=q["[object Uint8ClampedArray]"]=q["[object Uint16Array]"]=q["[object Uint32Array]"]=!0,q["[object Arguments]"]=q["[object Array]"]=q["[object ArrayBuffer]"]=q["[object Boolean]"]=q["[object DataView]"]=q["[object Date]"]=q["[object Error]"]=q["[object Function]"]=q["[object Map]"]=q["[object Number]"]=q["[object Object]"]=q["[object RegExp]"]=q["[object Set]"]=q["[object String]"]=q["[object WeakMap]"]=!1,T.exports=function(ie){return s(ie)&&S(ie.length)&&!!q[y(ie)]}},85924:(T,I,m)=>{var y=m(21900),S=m(16585),n=Object.prototype.hasOwnProperty;T.exports=function(u){if(!y(u))return S(u);var h=[];for(var _ in Object(u))n.call(u,_)&&"constructor"!=_&&h.push(_);return h}},71300:(T,I,m)=>{var y=m(27954),S=m(21900),s=m(91355),l=Object.prototype.hasOwnProperty;T.exports=function(h){if(!y(h))return s(h);var _=S(h),b=[];for(var M in h)"constructor"==M&&(_||!l.call(h,M))||b.push(M);return b}},34110:T=>{T.exports=function(m,y){for(var S=-1,s=Array(m);++S<m;)s[S]=y(S);return s}},19917:(T,I,m)=>{var y=m(73555),S=m(11981),s=m(52092),n=m(23088),u=y?y.prototype:void 0,h=u?u.toString:void 0;T.exports=function _(b){if("string"==typeof b)return b;if(s(b))return S(b,_)+"";if(n(b))return h?h.call(b):"";var M=b+"";return"0"==M&&1/b==-1/0?"-0":M}},49613:T=>{T.exports=function(m){return function(y){return m(y)}}},52426:(T,I,m)=>{var y=m(52092),S=m(21056),s=m(55715),n=m(19169);T.exports=function(u,h){return y(u)?u:S(u,h)?[u]:s(n(u))}},70799:(T,I,m)=>{var y=m(7025);T.exports=function(s){var n=new s.constructor(s.byteLength);return new y(n).set(new y(s)),n}},59352:(T,I,m)=>{T=m.nmd(T);var y=m(13737),S=I&&!I.nodeType&&I,s=S&&T&&!T.nodeType&&T,l=s&&s.exports===S?y.Buffer:void 0,u=l?l.allocUnsafe:void 0;T.exports=function(_,b){if(b)return _.slice();var M=_.length,k=u?u(M):new _.constructor(M);return _.copy(k),k}},88752:(T,I,m)=>{var y=m(70799);T.exports=function(s,n){var l=n?y(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.byteLength)}},47366:T=>{var I=/\w*$/;T.exports=function(y){var S=new y.constructor(y.source,I.exec(y));return S.lastIndex=y.lastIndex,S}},45486:(T,I,m)=>{var y=m(73555),S=y?y.prototype:void 0,s=S?S.valueOf:void 0;T.exports=function(l){return s?Object(s.call(l)):{}}},83650:(T,I,m)=>{var y=m(70799);T.exports=function(s,n){var l=n?y(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.length)}},35004:T=>{T.exports=function(m,y){var S=-1,s=m.length;for(y||(y=Array(s));++S<s;)y[S]=m[S];return y}},14976:(T,I,m)=>{var y=m(30919),S=m(20826);T.exports=function(n,l,u,h){var _=!u;u||(u={});for(var b=-1,M=l.length;++b<M;){var k=l[b],H=h?h(u[k],n[k],k,u,n):void 0;void 0===H&&(H=n[k]),_?S(u,k,H):y(u,k,H)}return u}},67703:(T,I,m)=>{var y=m(14976),S=m(93003);T.exports=function(n,l){return y(n,S(n),l)}},42058:(T,I,m)=>{var y=m(14976),S=m(48871);T.exports=function(n,l){return y(n,S(n),l)}},96871:(T,I,m)=>{var y=m(13737);T.exports=y["__core-js_shared__"]},32062:(T,I,m)=>{var y=m(30573),S=function(){try{var s=y(Object,"defineProperty");return s({},"",{}),s}catch(n){}}();T.exports=S},35684:T=>{var I="object"==typeof global&&global&&global.Object===Object&&global;T.exports=I},12818:(T,I,m)=>{var y=m(20702),S=m(93003),s=m(5773);T.exports=function(l){return y(l,s,S)}},16233:(T,I,m)=>{var y=m(20702),S=m(48871),s=m(39754);T.exports=function(l){return y(l,s,S)}},53234:(T,I,m)=>{var y=m(38754);T.exports=function(s,n){var l=s.__data__;return y(n)?l["string"==typeof n?"string":"hash"]:l.map}},30573:(T,I,m)=>{var y=m(67097),S=m(19052);T.exports=function(n,l){var u=S(n,l);return y(u)?u:void 0}},79748:(T,I,m)=>{var S=m(1265)(Object.getPrototypeOf,Object);T.exports=S},23531:(T,I,m)=>{var y=m(73555),S=Object.prototype,s=S.hasOwnProperty,n=S.toString,l=y?y.toStringTag:void 0;T.exports=function(h){var _=s.call(h,l),b=h[l];try{h[l]=void 0;var M=!0}catch(H){}var k=n.call(h);return M&&(_?h[l]=b:delete h[l]),k}},93003:(T,I,m)=>{var y=m(71236),S=m(11186),n=Object.prototype.propertyIsEnumerable,l=Object.getOwnPropertySymbols;T.exports=l?function(h){return null==h?[]:(h=Object(h),y(l(h),function(_){return n.call(h,_)}))}:S},48871:(T,I,m)=>{var y=m(60583),S=m(79748),s=m(93003),n=m(11186);T.exports=Object.getOwnPropertySymbols?function(h){for(var _=[];h;)y(_,s(h)),h=S(h);return _}:n},96435:(T,I,m)=>{var y=m(92778),S=m(46741),s=m(96442),n=m(35435),l=m(89885),u=m(15687),h=m(25850),_="[object Map]",M="[object Promise]",k="[object Set]",H="[object WeakMap]",U="[object DataView]",V=h(y),J=h(S),X=h(s),j=h(n),oe=h(l),ee=u;(y&&ee(new y(new ArrayBuffer(1)))!=U||S&&ee(new S)!=_||s&&ee(s.resolve())!=M||n&&ee(new n)!=k||l&&ee(new l)!=H)&&(ee=function(se){var Q=u(se),ce="[object Object]"==Q?se.constructor:void 0,$=ce?h(ce):"";if($)switch($){case V:return U;case J:return _;case X:return M;case j:return k;case oe:return H}return Q}),T.exports=ee},19052:T=>{T.exports=function(m,y){return null==m?void 0:m[y]}},58529:(T,I,m)=>{var y=m(87642);T.exports=function(){this.__data__=y?y(null):{},this.size=0}},95882:T=>{T.exports=function(m){var y=this.has(m)&&delete this.__data__[m];return this.size-=y?1:0,y}},93067:(T,I,m)=>{var y=m(87642),n=Object.prototype.hasOwnProperty;T.exports=function(u){var h=this.__data__;if(y){var _=h[u];return"__lodash_hash_undefined__"===_?void 0:_}return n.call(h,u)?h[u]:void 0}},28726:(T,I,m)=>{var y=m(87642),s=Object.prototype.hasOwnProperty;T.exports=function(l){var u=this.__data__;return y?void 0!==u[l]:s.call(u,l)}},3609:(T,I,m)=>{var y=m(87642);T.exports=function(n,l){var u=this.__data__;return this.size+=this.has(n)?0:1,u[n]=y&&void 0===l?"__lodash_hash_undefined__":l,this}},47176:T=>{var m=Object.prototype.hasOwnProperty;T.exports=function(S){var s=S.length,n=new S.constructor(s);return s&&"string"==typeof S[0]&&m.call(S,"index")&&(n.index=S.index,n.input=S.input),n}},53678:(T,I,m)=>{var y=m(70799),S=m(88752),s=m(47366),n=m(45486),l=m(83650);T.exports=function(ae,W,q){var re=ae.constructor;switch(W){case"[object ArrayBuffer]":return y(ae);case"[object Boolean]":case"[object Date]":return new re(+ae);case"[object DataView]":return S(ae,q);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(ae,q);case"[object Map]":case"[object Set]":return new re;case"[object Number]":case"[object String]":return new re(ae);case"[object RegExp]":return s(ae);case"[object Symbol]":return n(ae)}}},80177:(T,I,m)=>{var y=m(30866),S=m(79748),s=m(21900);T.exports=function(l){return"function"!=typeof l.constructor||s(l)?{}:y(S(l))}},14846:T=>{var m=/^(?:0|[1-9]\d*)$/;T.exports=function(S,s){var n=typeof S;return!!(s=null==s?9007199254740991:s)&&("number"==n||"symbol"!=n&&m.test(S))&&S>-1&&S%1==0&&S<s}},21056:(T,I,m)=>{var y=m(52092),S=m(23088),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;T.exports=function(u,h){if(y(u))return!1;var _=typeof u;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=u&&!S(u))||n.test(u)||!s.test(u)||null!=h&&u in Object(h)}},38754:T=>{T.exports=function(m){var y=typeof m;return"string"==y||"number"==y||"symbol"==y||"boolean"==y?"__proto__"!==m:null===m}},94996:(T,I,m)=>{var n,y=m(96871),S=(n=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";T.exports=function(n){return!!S&&S in n}},21900:T=>{var I=Object.prototype;T.exports=function(y){var S=y&&y.constructor;return y===("function"==typeof S&&S.prototype||I)}},82626:T=>{T.exports=function(){this.__data__=[],this.size=0}},28471:(T,I,m)=>{var y=m(58459),s=Array.prototype.splice;T.exports=function(l){var u=this.__data__,h=y(u,l);return!(h<0||(h==u.length-1?u.pop():s.call(u,h,1),--this.size,0))}},39349:(T,I,m)=>{var y=m(58459);T.exports=function(s){var n=this.__data__,l=y(n,s);return l<0?void 0:n[l][1]}},80268:(T,I,m)=>{var y=m(58459);T.exports=function(s){return y(this.__data__,s)>-1}},36032:(T,I,m)=>{var y=m(58459);T.exports=function(s,n){var l=this.__data__,u=y(l,s);return u<0?(++this.size,l.push([s,n])):l[u][1]=n,this}},78176:(T,I,m)=>{var y=m(95581),S=m(55961),s=m(46741);T.exports=function(){this.size=0,this.__data__={hash:new y,map:new(s||S),string:new y}}},48116:(T,I,m)=>{var y=m(53234);T.exports=function(s){var n=y(this,s).delete(s);return this.size-=n?1:0,n}},22679:(T,I,m)=>{var y=m(53234);T.exports=function(s){return y(this,s).get(s)}},22230:(T,I,m)=>{var y=m(53234);T.exports=function(s){return y(this,s).has(s)}},99766:(T,I,m)=>{var y=m(53234);T.exports=function(s,n){var l=y(this,s),u=l.size;return l.set(s,n),this.size+=l.size==u?0:1,this}},764:(T,I,m)=>{var y=m(84369);T.exports=function(n){var l=y(n,function(h){return 500===u.size&&u.clear(),h}),u=l.cache;return l}},87642:(T,I,m)=>{var S=m(30573)(Object,"create");T.exports=S},16585:(T,I,m)=>{var S=m(1265)(Object.keys,Object);T.exports=S},91355:T=>{T.exports=function(m){var y=[];if(null!=m)for(var S in Object(m))y.push(S);return y}},27447:(T,I,m)=>{T=m.nmd(T);var y=m(35684),S=I&&!I.nodeType&&I,s=S&&T&&!T.nodeType&&T,l=s&&s.exports===S&&y.process,u=function(){try{return s&&s.require&&s.require("util").types||l&&l.binding&&l.binding("util")}catch(_){}}();T.exports=u},98406:T=>{var m=Object.prototype.toString;T.exports=function(S){return m.call(S)}},1265:T=>{T.exports=function(m,y){return function(S){return m(y(S))}}},13737:(T,I,m)=>{var y=m(35684),S="object"==typeof self&&self&&self.Object===Object&&self,s=y||S||Function("return this")();T.exports=s},38359:(T,I,m)=>{var y=m(55961);T.exports=function(){this.__data__=new y,this.size=0}},35987:T=>{T.exports=function(m){var y=this.__data__,S=y.delete(m);return this.size=y.size,S}},40286:T=>{T.exports=function(m){return this.__data__.get(m)}},62709:T=>{T.exports=function(m){return this.__data__.has(m)}},92764:(T,I,m)=>{var y=m(55961),S=m(46741),s=m(40281);T.exports=function(u,h){var _=this.__data__;if(_ instanceof y){var b=_.__data__;if(!S||b.length<199)return b.push([u,h]),this.size=++_.size,this;_=this.__data__=new s(b)}return _.set(u,h),this.size=_.size,this}},55715:(T,I,m)=>{var y=m(764),S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,n=y(function(l){var u=[];return 46===l.charCodeAt(0)&&u.push(""),l.replace(S,function(h,_,b,M){u.push(b?M.replace(s,"$1"):_||h)}),u});T.exports=n},41162:(T,I,m)=>{var y=m(23088);T.exports=function(n){if("string"==typeof n||y(n))return n;var l=n+"";return"0"==l&&1/n==-1/0?"-0":l}},25850:T=>{var m=Function.prototype.toString;T.exports=function(S){if(null!=S){try{return m.call(S)}catch(s){}try{return S+""}catch(s){}}return""}},32005:(T,I,m)=>{var y=m(17584);T.exports=function(l){return y(l,5)}},9412:T=>{T.exports=function(m,y){return m===y||m!=m&&y!=y}},87578:(T,I,m)=>{var y=m(80255);T.exports=function(s,n,l){var u=null==s?void 0:y(s,n);return void 0===u?l:u}},12208:(T,I,m)=>{var y=m(11760),S=m(12142),s=Object.prototype,n=s.hasOwnProperty,l=s.propertyIsEnumerable,u=y(function(){return arguments}())?y:function(h){return S(h)&&n.call(h,"callee")&&!l.call(h,"callee")};T.exports=u},52092:T=>{T.exports=Array.isArray},54528:(T,I,m)=>{var y=m(27660),S=m(85353);T.exports=function(n){return null!=n&&S(n.length)&&!y(n)}},44735:(T,I,m)=>{T=m.nmd(T);var y=m(13737),S=m(96585),s=I&&!I.nodeType&&I,n=s&&T&&!T.nodeType&&T,u=n&&n.exports===s?y.Buffer:void 0;T.exports=(u?u.isBuffer:void 0)||S},36593:(T,I,m)=>{var y=m(85924),S=m(96435),s=m(12208),n=m(52092),l=m(54528),u=m(44735),h=m(21900),_=m(83483),H=Object.prototype.hasOwnProperty;T.exports=function(V){if(null==V)return!0;if(l(V)&&(n(V)||"string"==typeof V||"function"==typeof V.splice||u(V)||_(V)||s(V)))return!V.length;var J=S(V);if("[object Map]"==J||"[object Set]"==J)return!V.size;if(h(V))return!y(V).length;for(var X in V)if(H.call(V,X))return!1;return!0}},27660:(T,I,m)=>{var y=m(15687),S=m(27954);T.exports=function(_){if(!S(_))return!1;var b=y(_);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b}},85353:T=>{T.exports=function(y){return"number"==typeof y&&y>-1&&y%1==0&&y<=9007199254740991}},56432:(T,I,m)=>{var y=m(54929),S=m(49613),s=m(27447),n=s&&s.isMap,l=n?S(n):y;T.exports=l},27954:T=>{T.exports=function(m){var y=typeof m;return null!=m&&("object"==y||"function"==y)}},12142:T=>{T.exports=function(m){return null!=m&&"object"==typeof m}},1794:(T,I,m)=>{var y=m(15687),S=m(79748),s=m(12142),h=Function.prototype.toString,_=Object.prototype.hasOwnProperty,b=h.call(Object);T.exports=function(k){if(!s(k)||"[object Object]"!=y(k))return!1;var H=S(k);if(null===H)return!0;var U=_.call(H,"constructor")&&H.constructor;return"function"==typeof U&&U instanceof U&&h.call(U)==b}},65871:(T,I,m)=>{var y=m(77480),S=m(49613),s=m(27447),n=s&&s.isSet,l=n?S(n):y;T.exports=l},23088:(T,I,m)=>{var y=m(15687),S=m(12142);T.exports=function(l){return"symbol"==typeof l||S(l)&&"[object Symbol]"==y(l)}},83483:(T,I,m)=>{var y=m(89638),S=m(49613),s=m(27447),n=s&&s.isTypedArray,l=n?S(n):y;T.exports=l},5773:(T,I,m)=>{var y=m(50185),S=m(85924),s=m(54528);T.exports=function(l){return s(l)?y(l):S(l)}},39754:(T,I,m)=>{var y=m(50185),S=m(71300),s=m(54528);T.exports=function(l){return s(l)?y(l,!0):S(l)}},84369:(T,I,m)=>{var y=m(40281);function s(n,l){if("function"!=typeof n||null!=l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var h=arguments,_=l?l.apply(this,h):h[0],b=u.cache;if(b.has(_))return b.get(_);var M=n.apply(this,h);return u.cache=b.set(_,M)||b,M};return u.cache=new(s.Cache||y),u}s.Cache=y,T.exports=s},11186:T=>{T.exports=function(){return[]}},96585:T=>{T.exports=function(){return!1}},19169:(T,I,m)=>{var y=m(19917);T.exports=function(s){return null==s?"":y(s)}},29007:(T,I,m)=>{var y="function"==typeof Map&&Map.prototype,S=Object.getOwnPropertyDescriptor&&y?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=y&&S&&"function"==typeof S.get?S.get:null,n=y&&Map.prototype.forEach,l="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=l&&u&&"function"==typeof u.get?u.get:null,_=l&&Set.prototype.forEach,M="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,H="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,V="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,J=Boolean.prototype.valueOf,X=Object.prototype.toString,j=Function.prototype.toString,oe=String.prototype.match,ee="function"==typeof BigInt?BigInt.prototype.valueOf:null,se=Object.getOwnPropertySymbols,Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ce="function"==typeof Symbol&&"object"==typeof Symbol.iterator,$=Object.prototype.propertyIsEnumerable,Y=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ye){return ye.__proto__}:null),P=m(96553).custom,ae=P&&Ie(P)?P:null,W="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function q(ye,Ee,kt){var Ht="double"===(kt.quoteStyle||Ee)?'"':"'";return Ht+ye+Ht}function re(ye){return String(ye).replace(/"/g,"&quot;")}function ie(ye){return!("[object Array]"!==ke(ye)||W&&"object"==typeof ye&&W in ye)}function Ie(ye){if(ce)return ye&&"object"==typeof ye&&ye instanceof Symbol;if("symbol"==typeof ye)return!0;if(!ye||"object"!=typeof ye||!Q)return!1;try{return Q.call(ye),!0}catch(Ee){}return!1}T.exports=function ye(Ee,kt,Ht,fi){var Ut=kt||{};if(Re(Ut,"quoteStyle")&&"single"!==Ut.quoteStyle&&"double"!==Ut.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Re(Ut,"maxStringLength")&&("number"==typeof Ut.maxStringLength?Ut.maxStringLength<0&&Ut.maxStringLength!==1/0:null!==Ut.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Xi=!Re(Ut,"customInspect")||Ut.customInspect;if("boolean"!=typeof Xi&&"symbol"!==Xi)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Re(Ut,"indent")&&null!==Ut.indent&&"\t"!==Ut.indent&&!(parseInt(Ut.indent,10)===Ut.indent&&Ut.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===Ee)return"undefined";if(null===Ee)return"null";if("boolean"==typeof Ee)return Ee?"true":"false";if("string"==typeof Ee)return ot(Ee,Ut);if("number"==typeof Ee)return 0===Ee?1/0/Ee>0?"0":"-0":String(Ee);if("bigint"==typeof Ee)return String(Ee)+"n";var mn=void 0===Ut.depth?5:Ut.depth;if(void 0===Ht&&(Ht=0),Ht>=mn&&mn>0&&"object"==typeof Ee)return ie(Ee)?"[Array]":"[Object]";var qt=function(ye,Ee){var kt;if("\t"===ye.indent)kt="\t";else{if(!("number"==typeof ye.indent&&ye.indent>0))return null;kt=Array(ye.indent+1).join(" ")}return{base:kt,prev:Array(Ee+1).join(kt)}}(Ut,Ht);if(void 0===fi)fi=[];else if(lt(fi,Ee)>=0)return"[Circular]";function Je(tr,ka,an){if(ka&&(fi=fi.slice()).push(ka),an){var Fo={depth:Ut.depth};return Re(Ut,"quoteStyle")&&(Fo.quoteStyle=Ut.quoteStyle),ye(tr,Fo,Ht+1,fi)}return ye(tr,Ut,Ht+1,fi)}if("function"==typeof Ee){var qe=function(ye){if(ye.name)return ye.name;var Ee=oe.call(j.call(ye),/^function\s*([\w$]+)/);return Ee?Ee[1]:null}(Ee),Me=Cn(Ee,Je);return"[Function"+(qe?": "+qe:" (anonymous)")+"]"+(Me.length>0?" { "+Me.join(", ")+" }":"")}if(Ie(Ee)){var Ge=ce?String(Ee).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):Q.call(Ee);return"object"!=typeof Ee||ce?Ge:Pe(Ge)}if(function(ye){return!(!ye||"object"!=typeof ye)&&("undefined"!=typeof HTMLElement&&ye instanceof HTMLElement||"string"==typeof ye.nodeName&&"function"==typeof ye.getAttribute)}(Ee)){for(var ue="<"+String(Ee.nodeName).toLowerCase(),Ce=Ee.attributes||[],Ue=0;Ue<Ce.length;Ue++)ue+=" "+Ce[Ue].name+"="+q(re(Ce[Ue].value),"double",Ut);return ue+=">",Ee.childNodes&&Ee.childNodes.length&&(ue+="..."),ue+"</"+String(Ee.nodeName).toLowerCase()+">"}if(ie(Ee)){if(0===Ee.length)return"[]";var Ze=Cn(Ee,Je);return qt&&!function(ye){for(var Ee=0;Ee<ye.length;Ee++)if(lt(ye[Ee],"\n")>=0)return!1;return!0}(Ze)?"["+sn(Ze,qt)+"]":"[ "+Ze.join(", ")+" ]"}if(function(ye){return!("[object Error]"!==ke(ye)||W&&"object"==typeof ye&&W in ye)}(Ee)){var gi=Cn(Ee,Je);return 0===gi.length?"["+String(Ee)+"]":"{ ["+String(Ee)+"] "+gi.join(", ")+" }"}if("object"==typeof Ee&&Xi){if(ae&&"function"==typeof Ee[ae])return Ee[ae]();if("symbol"!==Xi&&"function"==typeof Ee.inspect)return Ee.inspect()}if(function(ye){if(!s||!ye||"object"!=typeof ye)return!1;try{s.call(ye);try{h.call(ye)}catch(Ee){return!0}return ye instanceof Map}catch(Ee){}return!1}(Ee)){var et=[];return n.call(Ee,function(tr,ka){et.push(Je(ka,Ee,!0)+" => "+Je(tr,Ee))}),Ot("Map",s.call(Ee),et,qt)}if(function(ye){if(!h||!ye||"object"!=typeof ye)return!1;try{h.call(ye);try{s.call(ye)}catch(Ee){return!0}return ye instanceof Set}catch(Ee){}return!1}(Ee)){var st=[];return _.call(Ee,function(tr){st.push(Je(tr,Ee))}),Ot("Set",h.call(Ee),st,qt)}if(function(ye){if(!M||!ye||"object"!=typeof ye)return!1;try{M.call(ye,M);try{H.call(ye,H)}catch(Ee){return!0}return ye instanceof WeakMap}catch(Ee){}return!1}(Ee))return Zi("WeakMap");if(function(ye){if(!H||!ye||"object"!=typeof ye)return!1;try{H.call(ye,H);try{M.call(ye,M)}catch(Ee){return!0}return ye instanceof WeakSet}catch(Ee){}return!1}(Ee))return Zi("WeakSet");if(function(ye){if(!V||!ye||"object"!=typeof ye)return!1;try{return V.call(ye),!0}catch(Ee){}return!1}(Ee))return Zi("WeakRef");if(function(ye){return!("[object Number]"!==ke(ye)||W&&"object"==typeof ye&&W in ye)}(Ee))return Pe(Je(Number(Ee)));if(function(ye){if(!ye||"object"!=typeof ye||!ee)return!1;try{return ee.call(ye),!0}catch(Ee){}return!1}(Ee))return Pe(Je(ee.call(Ee)));if(function(ye){return!("[object Boolean]"!==ke(ye)||W&&"object"==typeof ye&&W in ye)}(Ee))return Pe(J.call(Ee));if(function(ye){return!("[object String]"!==ke(ye)||W&&"object"==typeof ye&&W in ye)}(Ee))return Pe(Je(String(Ee)));if(!function(ye){return!("[object Date]"!==ke(ye)||W&&"object"==typeof ye&&W in ye)}(Ee)&&!function(ye){return!("[object RegExp]"!==ke(ye)||W&&"object"==typeof ye&&W in ye)}(Ee)){var yt=Cn(Ee,Je),Mt=Y?Y(Ee)===Object.prototype:Ee instanceof Object||Ee.constructor===Object,ei=Ee instanceof Object?"":"null prototype",nn=!Mt&&W&&Object(Ee)===Ee&&W in Ee?ke(Ee).slice(8,-1):ei?"Object":"",Vi=(Mt||"function"!=typeof Ee.constructor?"":Ee.constructor.name?Ee.constructor.name+" ":"")+(nn||ei?"["+[].concat(nn||[],ei||[]).join(": ")+"] ":"");return 0===yt.length?Vi+"{}":qt?Vi+"{"+sn(yt,qt)+"}":Vi+"{ "+yt.join(", ")+" }"}return String(Ee)};var xe=Object.prototype.hasOwnProperty||function(ye){return ye in this};function Re(ye,Ee){return xe.call(ye,Ee)}function ke(ye){return X.call(ye)}function lt(ye,Ee){if(ye.indexOf)return ye.indexOf(Ee);for(var kt=0,Ht=ye.length;kt<Ht;kt++)if(ye[kt]===Ee)return kt;return-1}function ot(ye,Ee){if(ye.length>Ee.maxStringLength){var kt=ye.length-Ee.maxStringLength,Ht="... "+kt+" more character"+(kt>1?"s":"");return ot(ye.slice(0,Ee.maxStringLength),Ee)+Ht}return q(ye.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,Hi),"single",Ee)}function Hi(ye){var Ee=ye.charCodeAt(0),kt={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ee];return kt?"\\"+kt:"\\x"+(Ee<16?"0":"")+Ee.toString(16).toUpperCase()}function Pe(ye){return"Object("+ye+")"}function Zi(ye){return ye+" { ? }"}function Ot(ye,Ee,kt,Ht){return ye+" ("+Ee+") {"+(Ht?sn(kt,Ht):kt.join(", "))+"}"}function sn(ye,Ee){if(0===ye.length)return"";var kt="\n"+Ee.prev+Ee.base;return kt+ye.join(","+kt)+"\n"+Ee.prev}function Cn(ye,Ee){var kt=ie(ye),Ht=[];if(kt){Ht.length=ye.length;for(var fi=0;fi<ye.length;fi++)Ht[fi]=Re(ye,fi)?Ee(ye[fi],ye):""}var Xi,Ut="function"==typeof se?se(ye):[];if(ce){Xi={};for(var mn=0;mn<Ut.length;mn++)Xi["$"+Ut[mn]]=Ut[mn]}for(var qt in ye)!Re(ye,qt)||kt&&String(Number(qt))===qt&&qt<ye.length||ce&&Xi["$"+qt]instanceof Symbol||(/[^\w$]/.test(qt)?Ht.push(Ee(qt,ye)+": "+Ee(ye[qt],ye)):Ht.push(qt+": "+Ee(ye[qt],ye)));if("function"==typeof se)for(var Je=0;Je<Ut.length;Je++)$.call(ye,Ut[Je])&&Ht.push("["+Ee(Ut[Je])+"]: "+Ee(ye[Ut[Je]],ye));return Ht}},73881:T=>{"use strict";function I(m,y){return Object.prototype.hasOwnProperty.call(m,y)}T.exports=function(m,y,S,s){S=S||"=";var n={};if("string"!=typeof m||0===m.length)return n;var l=/\+/g;m=m.split(y=y||"&");var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var h=m.length;u>0&&h>u&&(h=u);for(var _=0;_<h;++_){var k,H,U,V,b=m[_].replace(l,"%20"),M=b.indexOf(S);M>=0?(k=b.substr(0,M),H=b.substr(M+1)):(k=b,H=""),U=decodeURIComponent(k),V=decodeURIComponent(H),I(n,U)?Array.isArray(n[U])?n[U].push(V):n[U]=[n[U],V]:n[U]=V}return n}},15338:T=>{"use strict";var I=function(m){switch(typeof m){case"string":return m;case"boolean":return m?"true":"false";case"number":return isFinite(m)?m:"";default:return""}};T.exports=function(m,y,S,s){return y=y||"&",S=S||"=",null===m&&(m=void 0),"object"==typeof m?Object.keys(m).map(function(n){var l=encodeURIComponent(I(n))+S;return Array.isArray(m[n])?m[n].map(function(u){return l+encodeURIComponent(I(u))}).join(y):l+encodeURIComponent(I(m[n]))}).join(y):s?encodeURIComponent(I(s))+S+encodeURIComponent(I(m)):""}},89069:(T,I,m)=>{"use strict";I.decode=I.parse=m(73881),I.encode=I.stringify=m(15338)},91388:T=>{var I=function(m){"use strict";var s,y=Object.prototype,S=y.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",u=n.asyncIterator||"@@asyncIterator",h=n.toStringTag||"@@toStringTag";function _(le,fe,Se){return Object.defineProperty(le,fe,{value:Se,enumerable:!0,configurable:!0,writable:!0}),le[fe]}try{_({},"")}catch(le){_=function(fe,Se,ve){return fe[Se]=ve}}function b(le,fe,Se,ve){var Ie=Object.create((fe&&fe.prototype instanceof X?fe:X).prototype),De=new re(ve||[]);return Ie._invoke=function(le,fe,Se){var ve=k;return function(Ie,De){if(ve===U)throw new Error("Generator is already running");if(ve===V){if("throw"===Ie)throw De;return be()}for(Se.method=Ie,Se.arg=De;;){var xe=Se.delegate;if(xe){var Re=ae(xe,Se);if(Re){if(Re===J)continue;return Re}}if("next"===Se.method)Se.sent=Se._sent=Se.arg;else if("throw"===Se.method){if(ve===k)throw ve=V,Se.arg;Se.dispatchException(Se.arg)}else"return"===Se.method&&Se.abrupt("return",Se.arg);ve=U;var ke=M(le,fe,Se);if("normal"===ke.type){if(ve=Se.done?V:H,ke.arg===J)continue;return{value:ke.arg,done:Se.done}}"throw"===ke.type&&(ve=V,Se.method="throw",Se.arg=ke.arg)}}}(le,Se,De),Ie}function M(le,fe,Se){try{return{type:"normal",arg:le.call(fe,Se)}}catch(ve){return{type:"throw",arg:ve}}}m.wrap=b;var k="suspendedStart",H="suspendedYield",U="executing",V="completed",J={};function X(){}function j(){}function oe(){}var ee={};_(ee,l,function(){return this});var se=Object.getPrototypeOf,Q=se&&se(se(ie([])));Q&&Q!==y&&S.call(Q,l)&&(ee=Q);var ce=oe.prototype=X.prototype=Object.create(ee);function $(le){["next","throw","return"].forEach(function(fe){_(le,fe,function(Se){return this._invoke(fe,Se)})})}function Y(le,fe){function Se(Ie,De,xe,Re){var ke=M(le[Ie],le,De);if("throw"!==ke.type){var gt=ke.arg,lt=gt.value;return lt&&"object"==typeof lt&&S.call(lt,"__await")?fe.resolve(lt.__await).then(function(Ct){Se("next",Ct,xe,Re)},function(Ct){Se("throw",Ct,xe,Re)}):fe.resolve(lt).then(function(Ct){gt.value=Ct,xe(gt)},function(Ct){return Se("throw",Ct,xe,Re)})}Re(ke.arg)}var ve;this._invoke=function(Ie,De){function xe(){return new fe(function(Re,ke){Se(Ie,De,Re,ke)})}return ve=ve?ve.then(xe,xe):xe()}}function ae(le,fe){var Se=le.iterator[fe.method];if(Se===s){if(fe.delegate=null,"throw"===fe.method){if(le.iterator.return&&(fe.method="return",fe.arg=s,ae(le,fe),"throw"===fe.method))return J;fe.method="throw",fe.arg=new TypeError("The iterator does not provide a 'throw' method")}return J}var ve=M(Se,le.iterator,fe.arg);if("throw"===ve.type)return fe.method="throw",fe.arg=ve.arg,fe.delegate=null,J;var me=ve.arg;return me?me.done?(fe[le.resultName]=me.value,fe.next=le.nextLoc,"return"!==fe.method&&(fe.method="next",fe.arg=s),fe.delegate=null,J):me:(fe.method="throw",fe.arg=new TypeError("iterator result is not an object"),fe.delegate=null,J)}function W(le){var fe={tryLoc:le[0]};1 in le&&(fe.catchLoc=le[1]),2 in le&&(fe.finallyLoc=le[2],fe.afterLoc=le[3]),this.tryEntries.push(fe)}function q(le){var fe=le.completion||{};fe.type="normal",delete fe.arg,le.completion=fe}function re(le){this.tryEntries=[{tryLoc:"root"}],le.forEach(W,this),this.reset(!0)}function ie(le){if(le){var fe=le[l];if(fe)return fe.call(le);if("function"==typeof le.next)return le;if(!isNaN(le.length)){var Se=-1,ve=function me(){for(;++Se<le.length;)if(S.call(le,Se))return me.value=le[Se],me.done=!1,me;return me.value=s,me.done=!0,me};return ve.next=ve}}return{next:be}}function be(){return{value:s,done:!0}}return j.prototype=oe,_(ce,"constructor",oe),_(oe,"constructor",j),j.displayName=_(oe,h,"GeneratorFunction"),m.isGeneratorFunction=function(le){var fe="function"==typeof le&&le.constructor;return!!fe&&(fe===j||"GeneratorFunction"===(fe.displayName||fe.name))},m.mark=function(le){return Object.setPrototypeOf?Object.setPrototypeOf(le,oe):(le.__proto__=oe,_(le,h,"GeneratorFunction")),le.prototype=Object.create(ce),le},m.awrap=function(le){return{__await:le}},$(Y.prototype),_(Y.prototype,u,function(){return this}),m.AsyncIterator=Y,m.async=function(le,fe,Se,ve,me){void 0===me&&(me=Promise);var Ie=new Y(b(le,fe,Se,ve),me);return m.isGeneratorFunction(fe)?Ie:Ie.next().then(function(De){return De.done?De.value:Ie.next()})},$(ce),_(ce,h,"Generator"),_(ce,l,function(){return this}),_(ce,"toString",function(){return"[object Generator]"}),m.keys=function(le){var fe=[];for(var Se in le)fe.push(Se);return fe.reverse(),function ve(){for(;fe.length;){var me=fe.pop();if(me in le)return ve.value=me,ve.done=!1,ve}return ve.done=!0,ve}},m.values=ie,re.prototype={constructor:re,reset:function(le){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(q),!le)for(var fe in this)"t"===fe.charAt(0)&&S.call(this,fe)&&!isNaN(+fe.slice(1))&&(this[fe]=s)},stop:function(){this.done=!0;var fe=this.tryEntries[0].completion;if("throw"===fe.type)throw fe.arg;return this.rval},dispatchException:function(le){if(this.done)throw le;var fe=this;function Se(Re,ke){return Ie.type="throw",Ie.arg=le,fe.next=Re,ke&&(fe.method="next",fe.arg=s),!!ke}for(var ve=this.tryEntries.length-1;ve>=0;--ve){var me=this.tryEntries[ve],Ie=me.completion;if("root"===me.tryLoc)return Se("end");if(me.tryLoc<=this.prev){var De=S.call(me,"catchLoc"),xe=S.call(me,"finallyLoc");if(De&&xe){if(this.prev<me.catchLoc)return Se(me.catchLoc,!0);if(this.prev<me.finallyLoc)return Se(me.finallyLoc)}else if(De){if(this.prev<me.catchLoc)return Se(me.catchLoc,!0)}else{if(!xe)throw new Error("try statement without catch or finally");if(this.prev<me.finallyLoc)return Se(me.finallyLoc)}}}},abrupt:function(le,fe){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var ve=this.tryEntries[Se];if(ve.tryLoc<=this.prev&&S.call(ve,"finallyLoc")&&this.prev<ve.finallyLoc){var me=ve;break}}me&&("break"===le||"continue"===le)&&me.tryLoc<=fe&&fe<=me.finallyLoc&&(me=null);var Ie=me?me.completion:{};return Ie.type=le,Ie.arg=fe,me?(this.method="next",this.next=me.finallyLoc,J):this.complete(Ie)},complete:function(le,fe){if("throw"===le.type)throw le.arg;return"break"===le.type||"continue"===le.type?this.next=le.arg:"return"===le.type?(this.rval=this.arg=le.arg,this.method="return",this.next="end"):"normal"===le.type&&fe&&(this.next=fe),J},finish:function(le){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Se=this.tryEntries[fe];if(Se.finallyLoc===le)return this.complete(Se.completion,Se.afterLoc),q(Se),J}},catch:function(le){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var Se=this.tryEntries[fe];if(Se.tryLoc===le){var ve=Se.completion;if("throw"===ve.type){var me=ve.arg;q(Se)}return me}}throw new Error("illegal catch attempt")},delegateYield:function(le,fe,Se){return this.delegate={iterator:ie(le),resultName:fe,nextLoc:Se},"next"===this.method&&(this.arg=s),J}},m}(T.exports);try{regeneratorRuntime=I}catch(m){"object"==typeof globalThis?globalThis.regeneratorRuntime=I:Function("r","regeneratorRuntime = r")(I)}},69109:(T,I,m)=>{"use strict";var y=m(1326),S=m(4220),s=m(29007),n=y("%TypeError%"),l=y("%WeakMap%",!0),u=y("%Map%",!0),h=S("WeakMap.prototype.get",!0),_=S("WeakMap.prototype.set",!0),b=S("WeakMap.prototype.has",!0),M=S("Map.prototype.get",!0),k=S("Map.prototype.set",!0),H=S("Map.prototype.has",!0),U=function(j,oe){for(var se,ee=j;null!==(se=ee.next);ee=se)if(se.key===oe)return ee.next=se.next,se.next=j.next,j.next=se,se};T.exports=function(){var oe,ee,se,Q={assert:function(ce){if(!Q.has(ce))throw new n("Side channel does not contain "+s(ce))},get:function(ce){if(l&&ce&&("object"==typeof ce||"function"==typeof ce)){if(oe)return h(oe,ce)}else if(u){if(ee)return M(ee,ce)}else if(se)return function(j,oe){var ee=U(j,oe);return ee&&ee.value}(se,ce)},has:function(ce){if(l&&ce&&("object"==typeof ce||"function"==typeof ce)){if(oe)return b(oe,ce)}else if(u){if(ee)return H(ee,ce)}else if(se)return function(j,oe){return!!U(j,oe)}(se,ce);return!1},set:function(ce,$){l&&ce&&("object"==typeof ce||"function"==typeof ce)?(oe||(oe=new l),_(oe,ce,$)):u?(ee||(ee=new u),k(ee,ce,$)):(se||(se={key:{},next:null}),function(j,oe,ee){var se=U(j,oe);se?se.value=ee:j.next={key:oe,next:j.next,value:ee}}(se,ce,$))}};return Q}},12763:(T,I,m)=>{"use strict";m.r(I),m.d(I,{default:()=>Kl,helpers:()=>Eb});var y={};m.r(y),m.d(y,{JsonPatchError:()=>bn,_areEquals:()=>Nl,applyOperation:()=>Ko,applyPatch:()=>Ms,applyReducer:()=>Av,deepClone:()=>xv,getValueByPointer:()=>Ds,validate:()=>Wa,validator:()=>ao});var S={};m.r(S),m.d(S,{compare:()=>Jc,generate:()=>$c,observe:()=>Kc,unobserve:()=>eS});var s={};m.r(s),m.d(s,{cookie:()=>Hf,header:()=>Vf,path:()=>cS,query:()=>uu});var n=m(23005),l=m(12988),u=m(66360),h=m(18753),_=m(71094),b=m(90343),M=m(84916),k=m(31946);function H(g,C,w){return C in g?k(g,C,{value:w,enumerable:!0,configurable:!0,writable:!0}):g[C]=w,g}function U(g,C){var w=n(g);if(l){var R=l(g);C&&(R=u(R).call(R,function(O){return h(g,O).enumerable})),w.push.apply(w,R)}return w}function V(g){for(var C=1;C<arguments.length;C++){var R,w=null!=arguments[C]?arguments[C]:{};if(C%2)_(R=U(Object(w),!0)).call(R,function(F){H(g,F,w[F])});else if(b)M(g,b(w));else{var O;_(O=U(Object(w))).call(O,function(F){k(g,F,h(w,F))})}}return g}var J=m(53130),X=m.n(J),j=m(38330),oe=m.n(j),ee=m(23402),se=m(93449),Q=m(57272),ce=m(57124),$=m(19898),Y=m(97326);function P(g,C){(null==C||C>g.length)&&(C=g.length);for(var w=0,R=new Array(C);w<C;w++)R[w]=g[w];return R}function ae(g,C){var w;if(g){if("string"==typeof g)return P(g,C);var R=$(w=Object.prototype.toString.call(g)).call(w,8,-1);if("Object"===R&&g.constructor&&(R=g.constructor.name),"Map"===R||"Set"===R)return Y(g);if("Arguments"===R||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return P(g,C)}}function W(g,C){var w=void 0!==se&&Q(g)||g["@@iterator"];if(!w){if(ce(g)||(w=ae(g))||C&&g&&"number"==typeof g.length){w&&(g=w);var R=0,O=function(){};return{s:O,n:function(){return R>=g.length?{done:!0}:{done:!1,value:g[R++]}},e:function(ne){throw ne},f:O}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var G,F=!0,L=!1;return{s:function(){w=w.call(g)},n:function(){var ne=w.next();return F=ne.done,ne},e:function(ne){L=!0,G=ne},f:function(){try{!F&&null!=w.return&&w.return()}finally{if(L)throw G}}}}var q=m(3599);function re(g){return(re="function"==typeof se&&"symbol"==typeof q?function(w){return typeof w}:function(w){return w&&"function"==typeof se&&w.constructor===se&&w!==se.prototype?"symbol":typeof w})(g)}function fe(g,C){return function(g){if(ce(g))return g}(g)||function(g,C){var w=null==g?null:void 0!==se&&Q(g)||g["@@iterator"];if(null!=w){var L,G,R=[],O=!0,F=!1;try{for(w=w.call(g);!(O=(L=w.next()).done)&&(R.push(L.value),!C||R.length!==C);O=!0);}catch(te){F=!0,G=te}finally{try{!O&&null!=w.return&&w.return()}finally{if(F)throw G}}return R}}(g,C)||ae(g,C)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Se=m(26394);function ve(g,C,w,R,O,F,L){try{var G=g[F](L),te=G.value}catch(ne){return void w(ne)}G.done?C(te):Se.resolve(te).then(R,O)}function me(g){return function(){var C=this,w=arguments;return new Se(function(R,O){var F=g.apply(C,w);function L(te){ve(F,R,O,L,G,"next",te)}function G(te){ve(F,R,O,L,G,"throw",te)}L(void 0)})}}var Ie=m(39126),De=m.n(Ie),xe=m(11761),Re=m.n(xe),ke=m(20272),gt=m.n(ke),lt=m(89926),Ct=m.n(lt),ui=m(23289),ki=m.n(ui),ai=m(64770),pt=m.n(ai),Kt=m(45635),ot=m.n(Kt),Hi=m(87048),Pe=m.n(Hi),Zi=m(45107),Ot=m.n(Zi),Ui=m(26775),di=m.n(Ui),Cn=(m(36316),m(9325)),ye=m.n(Cn);function Ee(g){return null==g}var ue={isNothing:Ee,isObject:function(g){return"object"==typeof g&&null!==g},toArray:function(g){return Array.isArray(g)?g:Ee(g)?[]:[g]},repeat:function(g,C){var R,w="";for(R=0;R<C;R+=1)w+=g;return w},isNegativeZero:function(g){return 0===g&&Number.NEGATIVE_INFINITY===1/g},extend:function(g,C){var w,R,O,F;if(C)for(w=0,R=(F=Object.keys(C)).length;w<R;w+=1)g[O=F[w]]=C[O];return g}};function Ce(g,C){var w="",R=g.reason||"(unknown reason)";return g.mark?(g.mark.name&&(w+='in "'+g.mark.name+'" '),w+="("+(g.mark.line+1)+":"+(g.mark.column+1)+")",!C&&g.mark.snippet&&(w+="\n\n"+g.mark.snippet),R+" "+w):R}function Ue(g,C){Error.call(this),this.name="YAMLException",this.reason=g,this.mark=C,this.message=Ce(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(Ue.prototype=Object.create(Error.prototype)).constructor=Ue,Ue.prototype.toString=function(C){return this.name+": "+Ce(this,C)};var Ze=Ue;function gi(g,C,w,R,O){var F="",L="",G=Math.floor(O/2)-1;return R-C>G&&(C=R-G+(F=" ... ").length),w-R>G&&(w=R+G-(L=" ...").length),{str:F+g.slice(C,w).replace(/\t/g,"\u2192")+L,pos:R-C+F.length}}function et(g,C){return ue.repeat(" ",C-g.length)+g}var Mt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ei=["scalar","sequence","mapping"],Vi=function(g,C){if(C=C||{},Object.keys(C).forEach(function(w){if(-1===Mt.indexOf(w))throw new Ze('Unknown option "'+w+'" is met in definition of "'+g+'" YAML type.')}),this.options=C,this.tag=g,this.kind=C.kind||null,this.resolve=C.resolve||function(){return!0},this.construct=C.construct||function(w){return w},this.instanceOf=C.instanceOf||null,this.predicate=C.predicate||null,this.represent=C.represent||null,this.representName=C.representName||null,this.defaultStyle=C.defaultStyle||null,this.multi=C.multi||!1,this.styleAliases=function(g){var C={};return null!==g&&Object.keys(g).forEach(function(w){g[w].forEach(function(R){C[String(R)]=w})}),C}(C.styleAliases||null),-1===ei.indexOf(this.kind))throw new Ze('Unknown kind "'+this.kind+'" is specified for "'+g+'" YAML type.')};function tr(g,C){var w=[];return g[C].forEach(function(R){var O=w.length;w.forEach(function(F,L){F.tag===R.tag&&F.kind===R.kind&&F.multi===R.multi&&(O=L)}),w[O]=R}),w}function an(g){return this.extend(g)}an.prototype.extend=function(C){var w=[],R=[];if(C instanceof Vi)R.push(C);else if(Array.isArray(C))R=R.concat(C);else{if(!C||!Array.isArray(C.implicit)&&!Array.isArray(C.explicit))throw new Ze("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");C.implicit&&(w=w.concat(C.implicit)),C.explicit&&(R=R.concat(C.explicit))}w.forEach(function(F){if(!(F instanceof Vi))throw new Ze("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(F.loadKind&&"scalar"!==F.loadKind)throw new Ze("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(F.multi)throw new Ze("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),R.forEach(function(F){if(!(F instanceof Vi))throw new Ze("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var O=Object.create(an.prototype);return O.implicit=(this.implicit||[]).concat(w),O.explicit=(this.explicit||[]).concat(R),O.compiledImplicit=tr(O,"implicit"),O.compiledExplicit=tr(O,"explicit"),O.compiledTypeMap=function(){var C,w,g={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function R(O){O.multi?(g.multi[O.kind].push(O),g.multi.fallback.push(O)):g[O.kind][O.tag]=g.fallback[O.tag]=O}for(C=0,w=arguments.length;C<w;C+=1)arguments[C].forEach(R);return g}(O.compiledImplicit,O.compiledExplicit),O};var Fo=an,_o=new Vi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(g){return null!==g?g:""}}),U_=new Vi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(g){return null!==g?g:[]}}),Lp=new Vi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(g){return null!==g?g:{}}}),bd=new Fo({explicit:[_o,U_,Lp]}),Bp=new Vi("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(g){if(null===g)return!0;var C=g.length;return 1===C&&"~"===g||4===C&&("null"===g||"Null"===g||"NULL"===g)},construct:function(){return null},predicate:function(g){return null===g},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Up=new Vi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(g){if(null===g)return!1;var C=g.length;return 4===C&&("true"===g||"True"===g||"TRUE"===g)||5===C&&("false"===g||"False"===g||"FALSE"===g)},construct:function(g){return"true"===g||"True"===g||"TRUE"===g},predicate:function(g){return"[object Boolean]"===Object.prototype.toString.call(g)},represent:{lowercase:function(g){return g?"true":"false"},uppercase:function(g){return g?"TRUE":"FALSE"},camelcase:function(g){return g?"True":"False"}},defaultStyle:"lowercase"});function j_(g){return 48<=g&&g<=57||65<=g&&g<=70||97<=g&&g<=102}function W_(g){return 48<=g&&g<=55}function Gp(g){return 48<=g&&g<=57}var gr=new Vi("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(g){if(null===g)return!1;var O,C=g.length,w=0,R=!1;if(!C)return!1;if(("-"===(O=g[w])||"+"===O)&&(O=g[++w]),"0"===O){if(w+1===C)return!0;if("b"===(O=g[++w])){for(w++;w<C;w++)if("_"!==(O=g[w])){if("0"!==O&&"1"!==O)return!1;R=!0}return R&&"_"!==O}if("x"===O){for(w++;w<C;w++)if("_"!==(O=g[w])){if(!j_(g.charCodeAt(w)))return!1;R=!0}return R&&"_"!==O}if("o"===O){for(w++;w<C;w++)if("_"!==(O=g[w])){if(!W_(g.charCodeAt(w)))return!1;R=!0}return R&&"_"!==O}}if("_"===O)return!1;for(;w<C;w++)if("_"!==(O=g[w])){if(!Gp(g.charCodeAt(w)))return!1;R=!0}return!(!R||"_"===O)},construct:function(g){var R,C=g,w=1;if(-1!==C.indexOf("_")&&(C=C.replace(/_/g,"")),("-"===(R=C[0])||"+"===R)&&("-"===R&&(w=-1),R=(C=C.slice(1))[0]),"0"===C)return 0;if("0"===R){if("b"===C[1])return w*parseInt(C.slice(2),2);if("x"===C[1])return w*parseInt(C.slice(2),16);if("o"===C[1])return w*parseInt(C.slice(2),8)}return w*parseInt(C,10)},predicate:function(g){return"[object Number]"===Object.prototype.toString.call(g)&&g%1==0&&!ue.isNegativeZero(g)},represent:{binary:function(g){return g>=0?"0b"+g.toString(2):"-0b"+g.toString(2).slice(1)},octal:function(g){return g>=0?"0o"+g.toString(8):"-0o"+g.toString(8).slice(1)},decimal:function(g){return g.toString(10)},hexadecimal:function(g){return g>=0?"0x"+g.toString(16).toUpperCase():"-0x"+g.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),hn=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Gi=/^[-+]?[0-9]+e/,Sc=new Vi("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(g){return!(null===g||!hn.test(g)||"_"===g[g.length-1])},construct:function(g){var C,w;return w="-"===(C=g.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(C[0])>=0&&(C=C.slice(1)),".inf"===C?1===w?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===C?NaN:w*parseFloat(C,10)},predicate:function(g){return"[object Number]"===Object.prototype.toString.call(g)&&(g%1!=0||ue.isNegativeZero(g))},represent:function(g,C){var w;if(isNaN(g))switch(C){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===g)switch(C){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===g)switch(C){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ue.isNegativeZero(g))return"-0.0";return w=g.toString(10),Gi.test(w)?w.replace("e",".e"):w},defaultStyle:"lowercase"}),jp=bd.extend({implicit:[Bp,Up,gr,Sc]}),$t=jp,Tt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),wd=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Dc=new Vi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(g){return null!==g&&(null!==Tt.exec(g)||null!==wd.exec(g))},construct:function(g){var C,w,R,O,F,L,G,_e,te=0,ne=null;if(null===(C=Tt.exec(g))&&(C=wd.exec(g)),null===C)throw new Error("Date resolve error");if(w=+C[1],R=+C[2]-1,O=+C[3],!C[4])return new Date(Date.UTC(w,R,O));if(F=+C[4],L=+C[5],G=+C[6],C[7]){for(te=C[7].slice(0,3);te.length<3;)te+="0";te=+te}return C[9]&&(ne=6e4*(60*+C[10]+ +(C[11]||0)),"-"===C[9]&&(ne=-ne)),_e=new Date(Date.UTC(w,R,O,F,L,G,te)),ne&&_e.setTime(_e.getTime()-ne),_e},instanceOf:Date,represent:function(g){return g.toISOString()}}),ar=new Vi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(g){return"<<"===g||null===g}}),Sd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",X_=new Vi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(g){if(null===g)return!1;var C,w,R=0,O=g.length,F=Sd;for(w=0;w<O;w++)if(!((C=F.indexOf(g.charAt(w)))>64)){if(C<0)return!1;R+=6}return R%8==0},construct:function(g){var C,w,R=g.replace(/[\r\n=]/g,""),O=R.length,F=Sd,L=0,G=[];for(C=0;C<O;C++)C%4==0&&C&&(G.push(L>>16&255),G.push(L>>8&255),G.push(255&L)),L=L<<6|F.indexOf(R.charAt(C));return 0==(w=O%4*6)?(G.push(L>>16&255),G.push(L>>8&255),G.push(255&L)):18===w?(G.push(L>>10&255),G.push(L>>2&255)):12===w&&G.push(L>>4&255),new Uint8Array(G)},predicate:function(g){return"[object Uint8Array]"===Object.prototype.toString.call(g)},represent:function(g){var R,O,C="",w=0,F=g.length,L=Sd;for(R=0;R<F;R++)R%3==0&&R&&(C+=L[w>>18&63],C+=L[w>>12&63],C+=L[w>>6&63],C+=L[63&w]),w=(w<<8)+g[R];return 0==(O=F%3)?(C+=L[w>>18&63],C+=L[w>>12&63],C+=L[w>>6&63],C+=L[63&w]):2===O?(C+=L[w>>10&63],C+=L[w>>4&63],C+=L[w<<2&63],C+=L[64]):1===O&&(C+=L[w>>2&63],C+=L[w<<4&63],C+=L[64],C+=L[64]),C}}),K_=Object.prototype.hasOwnProperty,Fw=Object.prototype.toString,$_=new Vi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(g){if(null===g)return!0;var w,R,O,F,L,C=[],G=g;for(w=0,R=G.length;w<R;w+=1){if(L=!1,"[object Object]"!==Fw.call(O=G[w]))return!1;for(F in O)if(K_.call(O,F)){if(L)return!1;L=!0}if(!L)return!1;if(-1!==C.indexOf(F))return!1;C.push(F)}return!0},construct:function(g){return null!==g?g:[]}}),Vw=Object.prototype.toString,Q_=new Vi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(g){if(null===g)return!0;var C,w,R,O,F,L=g;for(F=new Array(L.length),C=0,w=L.length;C<w;C+=1){if("[object Object]"!==Vw.call(R=L[C])||1!==(O=Object.keys(R)).length)return!1;F[C]=[O[0],R[O[0]]]}return!0},construct:function(g){if(null===g)return[];var C,w,R,O,F,L=g;for(F=new Array(L.length),C=0,w=L.length;C<w;C+=1)R=L[C],O=Object.keys(R),F[C]=[O[0],R[O[0]]];return F}}),Z_=Object.prototype.hasOwnProperty,qi=new Vi("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(g){if(null===g)return!0;var C,w=g;for(C in w)if(Z_.call(w,C)&&null!==w[C])return!1;return!0},construct:function(g){return null!==g?g:{}}}),Wp=$t.extend({implicit:[Dc,ar],explicit:[X_,$_,Q_,qi]}),Ks=Object.prototype.hasOwnProperty,ev=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Xp=/[\x85\u2028\u2029]/,Rc=/[,\[\]\{\}]/,Ic=/^(?:!|!!|![a-z\-]+!)$/i,Md=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Kp(g){return Object.prototype.toString.call(g)}function bt(g){return 10===g||13===g}function Vo(g){return 9===g||32===g}function wr(g){return 9===g||32===g||10===g||13===g}function Br(g){return 44===g||91===g||93===g||123===g||125===g}function $p(g){var C;return 48<=g&&g<=57?g-48:97<=(C=32|g)&&C<=102?C-97+10:-1}function Gw(g){return 120===g?2:117===g?4:85===g?8:0}function vs(g){return 48<=g&&g<=57?g-48:-1}function Vr(g){return 48===g?"\0":97===g?"\x07":98===g?"\b":116===g||9===g?"\t":110===g?"\n":118===g?"\v":102===g?"\f":114===g?"\r":101===g?"\x1b":32===g?" ":34===g?'"':47===g?"/":92===g?"\\":78===g?"\x85":95===g?"\xa0":76===g?"\u2028":80===g?"\u2029":""}function jw(g){return g<=65535?String.fromCharCode(g):String.fromCharCode(55296+(g-65536>>10),56320+(g-65536&1023))}for(var tv=new Array(256),mr=new Array(256),Na=0;Na<256;Na++)tv[Na]=Vr(Na)?1:0,mr[Na]=Vr(Na);function iv(g,C){this.input=g,this.filename=C.filename||null,this.schema=C.schema||Wp,this.onWarning=C.onWarning||null,this.legacy=C.legacy||!1,this.json=C.json||!1,this.listener=C.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=g.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Jp(g,C){var w={name:g.filename,buffer:g.input.slice(0,-1),position:g.position,line:g.line,column:g.position-g.lineStart};return w.snippet=function(g,C){if(C=Object.create(C||null),!g.buffer)return null;C.maxLength||(C.maxLength=79),"number"!=typeof C.indent&&(C.indent=1),"number"!=typeof C.linesBefore&&(C.linesBefore=3),"number"!=typeof C.linesAfter&&(C.linesAfter=2);for(var F,w=/\r?\n|\r|\0/g,R=[0],O=[],L=-1;F=w.exec(g.buffer);)O.push(F.index),R.push(F.index+F[0].length),g.position<=F.index&&L<0&&(L=R.length-2);L<0&&(L=R.length-1);var te,ne,G="",pe=Math.min(g.line+C.linesAfter,O.length).toString().length,ge=C.maxLength-(C.indent+pe+3);for(te=1;te<=C.linesBefore&&!(L-te<0);te++)ne=gi(g.buffer,R[L-te],O[L-te],g.position-(R[L]-R[L-te]),ge),G=ue.repeat(" ",C.indent)+et((g.line-te+1).toString(),pe)+" | "+ne.str+"\n"+G;for(ne=gi(g.buffer,R[L],O[L],g.position,ge),G+=ue.repeat(" ",C.indent)+et((g.line+1).toString(),pe)+" | "+ne.str+"\n",G+=ue.repeat("-",C.indent+pe+3+ne.pos)+"^\n",te=1;te<=C.linesAfter&&!(L+te>=O.length);te++)ne=gi(g.buffer,R[L+te],O[L+te],g.position-(R[L]-R[L+te]),ge),G+=ue.repeat(" ",C.indent)+et((g.line+te+1).toString(),pe)+" | "+ne.str+"\n";return G.replace(/\n$/,"")}(w),new Ze(C,w)}function St(g,C){throw Jp(g,C)}function Ii(g,C){g.onWarning&&g.onWarning.call(null,Jp(g,C))}var nv={YAML:function(C,w,R){var O,F,L;null!==C.version&&St(C,"duplication of %YAML directive"),1!==R.length&&St(C,"YAML directive accepts exactly one argument"),null===(O=/^([0-9]+)\.([0-9]+)$/.exec(R[0]))&&St(C,"ill-formed argument of the YAML directive"),F=parseInt(O[1],10),L=parseInt(O[2],10),1!==F&&St(C,"unacceptable YAML version of the document"),C.version=R[0],C.checkLineBreaks=L<2,1!==L&&2!==L&&Ii(C,"unsupported YAML version of the document")},TAG:function(C,w,R){var O,F;2!==R.length&&St(C,"TAG directive accepts exactly two arguments"),F=R[1],Ic.test(O=R[0])||St(C,"ill-formed tag handle (first argument) of the TAG directive"),Ks.call(C.tagMap,O)&&St(C,'there is a previously declared suffix for "'+O+'" tag handle'),Md.test(F)||St(C,"ill-formed tag prefix (second argument) of the TAG directive");try{F=decodeURIComponent(F)}catch(L){St(C,"tag prefix is malformed: "+F)}C.tagMap[O]=F}};function $s(g,C,w,R){var O,F,L,G;if(C<w){if(G=g.input.slice(C,w),R)for(O=0,F=G.length;O<F;O+=1)9===(L=G.charCodeAt(O))||32<=L&&L<=1114111||St(g,"expected valid JSON character");else ev.test(G)&&St(g,"the stream contains non-printable characters");g.result+=G}}function Js(g,C,w,R){var O,F,L,G;for(ue.isObject(w)||St(g,"cannot merge mappings; the provided source object is unacceptable"),L=0,G=(O=Object.keys(w)).length;L<G;L+=1)Ks.call(C,F=O[L])||(C[F]=w[F],R[F]=!0)}function xi(g,C,w,R,O,F,L,G,te){var ne,pe;if(Array.isArray(O))for(ne=0,pe=(O=Array.prototype.slice.call(O)).length;ne<pe;ne+=1)Array.isArray(O[ne])&&St(g,"nested arrays are not supported inside keys"),"object"==typeof O&&"[object Object]"===Kp(O[ne])&&(O[ne]="[object Object]");if("object"==typeof O&&"[object Object]"===Kp(O)&&(O="[object Object]"),O=String(O),null===C&&(C={}),"tag:yaml.org,2002:merge"===R)if(Array.isArray(F))for(ne=0,pe=F.length;ne<pe;ne+=1)Js(g,C,F[ne],w);else Js(g,C,F,w);else!g.json&&!Ks.call(w,O)&&Ks.call(C,O)&&(g.line=L||g.line,g.lineStart=G||g.lineStart,g.position=te||g.position,St(g,"duplicated mapping key")),"__proto__"===O?Object.defineProperty(C,O,{configurable:!0,enumerable:!0,writable:!0,value:F}):C[O]=F,delete w[O];return C}function Pa(g){var C;10===(C=g.input.charCodeAt(g.position))?g.position++:13===C?(g.position++,10===g.input.charCodeAt(g.position)&&g.position++):St(g,"a line break is expected"),g.line+=1,g.lineStart=g.position,g.firstTabInLine=-1}function _n(g,C,w){for(var R=0,O=g.input.charCodeAt(g.position);0!==O;){for(;Vo(O);)9===O&&-1===g.firstTabInLine&&(g.firstTabInLine=g.position),O=g.input.charCodeAt(++g.position);if(C&&35===O)do{O=g.input.charCodeAt(++g.position)}while(10!==O&&13!==O&&0!==O);if(!bt(O))break;for(Pa(g),O=g.input.charCodeAt(g.position),R++,g.lineIndent=0;32===O;)g.lineIndent++,O=g.input.charCodeAt(++g.position)}return-1!==w&&0!==R&&g.lineIndent<w&&Ii(g,"deficient indentation"),R}function La(g){var w,C=g.position;return!(45!==(w=g.input.charCodeAt(C))&&46!==w||w!==g.input.charCodeAt(C+1)||w!==g.input.charCodeAt(C+2)||(C+=3,w=g.input.charCodeAt(C),0!==w&&!wr(w)))}function xc(g,C){1===C?g.result+=" ":C>1&&(g.result+=ue.repeat("\n",C-1))}function Rd(g,C){var w,te,R=g.tag,O=g.anchor,F=[],G=!1;if(-1!==g.firstTabInLine)return!1;for(null!==g.anchor&&(g.anchorMap[g.anchor]=F),te=g.input.charCodeAt(g.position);0!==te&&(-1!==g.firstTabInLine&&(g.position=g.firstTabInLine,St(g,"tab characters must not be used in indentation")),45===te&&wr(g.input.charCodeAt(g.position+1)));)if(G=!0,g.position++,_n(g,!0,-1)&&g.lineIndent<=C)F.push(null),te=g.input.charCodeAt(g.position);else if(w=g.line,Qs(g,C,3,!1,!0),F.push(g.result),_n(g,!0,-1),te=g.input.charCodeAt(g.position),(g.line===w||g.lineIndent>C)&&0!==te)St(g,"bad indentation of a sequence entry");else if(g.lineIndent<C)break;return!!G&&(g.tag=R,g.anchor=O,g.kind="sequence",g.result=F,!0)}function Zp(g){var C,O,F,L,w=!1,R=!1;if(33!==(L=g.input.charCodeAt(g.position)))return!1;if(null!==g.tag&&St(g,"duplication of a tag property"),60===(L=g.input.charCodeAt(++g.position))?(w=!0,L=g.input.charCodeAt(++g.position)):33===L?(R=!0,O="!!",L=g.input.charCodeAt(++g.position)):O="!",C=g.position,w){do{L=g.input.charCodeAt(++g.position)}while(0!==L&&62!==L);g.position<g.length?(F=g.input.slice(C,g.position),L=g.input.charCodeAt(++g.position)):St(g,"unexpected end of the stream within a verbatim tag")}else{for(;0!==L&&!wr(L);)33===L&&(R?St(g,"tag suffix cannot contain exclamation marks"):(O=g.input.slice(C-1,g.position+1),Ic.test(O)||St(g,"named tag handle cannot contain such characters"),R=!0,C=g.position+1)),L=g.input.charCodeAt(++g.position);F=g.input.slice(C,g.position),Rc.test(F)&&St(g,"tag suffix cannot contain flow indicator characters")}F&&!Md.test(F)&&St(g,"tag name cannot contain such characters: "+F);try{F=decodeURIComponent(F)}catch(G){St(g,"tag name is malformed: "+F)}return w?g.tag=F:Ks.call(g.tagMap,O)?g.tag=g.tagMap[O]+F:"!"===O?g.tag="!"+F:"!!"===O?g.tag="tag:yaml.org,2002:"+F:St(g,'undeclared tag handle "'+O+'"'),!0}function ht(g){var C,w;if(38!==(w=g.input.charCodeAt(g.position)))return!1;for(null!==g.anchor&&St(g,"duplication of an anchor property"),w=g.input.charCodeAt(++g.position),C=g.position;0!==w&&!wr(w)&&!Br(w);)w=g.input.charCodeAt(++g.position);return g.position===C&&St(g,"name of an anchor node must contain at least one character"),g.anchor=g.input.slice(C,g.position),!0}function Qs(g,C,w,R,O){var F,L,G,ge,_e,Te,Oe,He,We,te=1,ne=!1,pe=!1;if(null!==g.listener&&g.listener("open",g),g.tag=null,g.anchor=null,g.kind=null,g.result=null,F=L=G=4===w||3===w,R&&_n(g,!0,-1)&&(ne=!0,g.lineIndent>C?te=1:g.lineIndent===C?te=0:g.lineIndent<C&&(te=-1)),1===te)for(;Zp(g)||ht(g);)_n(g,!0,-1)?(ne=!0,G=F,g.lineIndent>C?te=1:g.lineIndent===C?te=0:g.lineIndent<C&&(te=-1)):G=!1;if(G&&(G=ne||O),(1===te||4===w)&&(He=1===w||2===w?C:C+1,We=g.position-g.lineStart,1===te?G&&(Rd(g,We)||function(g,C,w){var R,O,F,L,G,te,Be,ne=g.tag,pe=g.anchor,ge={},_e=Object.create(null),Te=null,Oe=null,He=null,We=!1,at=!1;if(-1!==g.firstTabInLine)return!1;for(null!==g.anchor&&(g.anchorMap[g.anchor]=ge),Be=g.input.charCodeAt(g.position);0!==Be;){if(!We&&-1!==g.firstTabInLine&&(g.position=g.firstTabInLine,St(g,"tab characters must not be used in indentation")),R=g.input.charCodeAt(g.position+1),F=g.line,63!==Be&&58!==Be||!wr(R)){if(L=g.line,G=g.lineStart,te=g.position,!Qs(g,w,2,!1,!0))break;if(g.line===F){for(Be=g.input.charCodeAt(g.position);Vo(Be);)Be=g.input.charCodeAt(++g.position);if(58===Be)wr(Be=g.input.charCodeAt(++g.position))||St(g,"a whitespace character is expected after the key-value separator within a block mapping"),We&&(xi(g,ge,_e,Te,Oe,null,L,G,te),Te=Oe=He=null),at=!0,We=!1,O=!1,Te=g.tag,Oe=g.result;else{if(!at)return g.tag=ne,g.anchor=pe,!0;St(g,"can not read an implicit mapping pair; a colon is missed")}}else{if(!at)return g.tag=ne,g.anchor=pe,!0;St(g,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===Be?(We&&(xi(g,ge,_e,Te,Oe,null,L,G,te),Te=Oe=He=null),at=!0,We=!0,O=!0):We?(We=!1,O=!0):St(g,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),g.position+=1,Be=R;if((g.line===F||g.lineIndent>C)&&(We&&(L=g.line,G=g.lineStart,te=g.position),Qs(g,C,4,!0,O)&&(We?Oe=g.result:He=g.result),We||(xi(g,ge,_e,Te,Oe,He,L,G,te),Te=Oe=He=null),_n(g,!0,-1),Be=g.input.charCodeAt(g.position)),(g.line===F||g.lineIndent>C)&&0!==Be)St(g,"bad indentation of a mapping entry");else if(g.lineIndent<C)break}return We&&xi(g,ge,_e,Te,Oe,null,L,G,te),at&&(g.tag=ne,g.anchor=pe,g.kind="mapping",g.result=ge),at}(g,We,He))||function(g,C){var R,O,F,G,pe,ge,_e,Te,He,We,at,Be,w=!0,L=g.tag,te=g.anchor,Oe=Object.create(null);if(91===(Be=g.input.charCodeAt(g.position)))pe=93,Te=!1,G=[];else{if(123!==Be)return!1;pe=125,Te=!0,G={}}for(null!==g.anchor&&(g.anchorMap[g.anchor]=G),Be=g.input.charCodeAt(++g.position);0!==Be;){if(_n(g,!0,C),(Be=g.input.charCodeAt(g.position))===pe)return g.position++,g.tag=L,g.anchor=te,g.kind=Te?"mapping":"sequence",g.result=G,!0;w?44===Be&&St(g,"expected the node content, but found ','"):St(g,"missed comma between flow collection entries"),at=null,ge=_e=!1,63===Be&&wr(g.input.charCodeAt(g.position+1))&&(ge=_e=!0,g.position++,_n(g,!0,C)),R=g.line,O=g.lineStart,F=g.position,Qs(g,C,1,!1,!0),We=g.tag,He=g.result,_n(g,!0,C),Be=g.input.charCodeAt(g.position),(_e||g.line===R)&&58===Be&&(ge=!0,Be=g.input.charCodeAt(++g.position),_n(g,!0,C),Qs(g,C,1,!1,!0),at=g.result),Te?xi(g,G,Oe,We,He,at,R,O,F):G.push(ge?xi(g,null,Oe,We,He,at,R,O,F):He),_n(g,!0,C),44===(Be=g.input.charCodeAt(g.position))?(w=!0,Be=g.input.charCodeAt(++g.position)):w=!1}St(g,"unexpected end of the stream within a flow collection")}(g,He)?pe=!0:(L&&function(g,C){var w,R,pe,ge,O=1,F=!1,L=!1,G=C,te=0,ne=!1;if(124===(ge=g.input.charCodeAt(g.position)))R=!1;else{if(62!==ge)return!1;R=!0}for(g.kind="scalar",g.result="";0!==ge;)if(43===(ge=g.input.charCodeAt(++g.position))||45===ge)1===O?O=43===ge?3:2:St(g,"repeat of a chomping mode identifier");else{if(!((pe=vs(ge))>=0))break;0===pe?St(g,"bad explicit indentation width of a block scalar; it cannot be less than one"):L?St(g,"repeat of an indentation width identifier"):(G=C+pe-1,L=!0)}if(Vo(ge)){do{ge=g.input.charCodeAt(++g.position)}while(Vo(ge));if(35===ge)do{ge=g.input.charCodeAt(++g.position)}while(!bt(ge)&&0!==ge)}for(;0!==ge;){for(Pa(g),g.lineIndent=0,ge=g.input.charCodeAt(g.position);(!L||g.lineIndent<G)&&32===ge;)g.lineIndent++,ge=g.input.charCodeAt(++g.position);if(!L&&g.lineIndent>G&&(G=g.lineIndent),bt(ge))te++;else{if(g.lineIndent<G){3===O?g.result+=ue.repeat("\n",F?1+te:te):1===O&&F&&(g.result+="\n");break}for(R?Vo(ge)?(ne=!0,g.result+=ue.repeat("\n",F?1+te:te)):ne?(ne=!1,g.result+=ue.repeat("\n",te+1)):0===te?F&&(g.result+=" "):g.result+=ue.repeat("\n",te):g.result+=ue.repeat("\n",F?1+te:te),F=!0,L=!0,te=0,w=g.position;!bt(ge)&&0!==ge;)ge=g.input.charCodeAt(++g.position);$s(g,w,g.position,!1)}}return!0}(g,He)||function(g,C){var w,R,O;if(39!==(w=g.input.charCodeAt(g.position)))return!1;for(g.kind="scalar",g.result="",g.position++,R=O=g.position;0!==(w=g.input.charCodeAt(g.position));)if(39===w){if($s(g,R,g.position,!0),39!==(w=g.input.charCodeAt(++g.position)))return!0;R=g.position,g.position++,O=g.position}else bt(w)?($s(g,R,O,!0),xc(g,_n(g,!1,C)),R=O=g.position):g.position===g.lineStart&&La(g)?St(g,"unexpected end of the document within a single quoted scalar"):(g.position++,O=g.position);St(g,"unexpected end of the stream within a single quoted scalar")}(g,He)||function(g,C){var w,R,O,F,L,G;if(34!==(G=g.input.charCodeAt(g.position)))return!1;for(g.kind="scalar",g.result="",g.position++,w=R=g.position;0!==(G=g.input.charCodeAt(g.position));){if(34===G)return $s(g,w,g.position,!0),g.position++,!0;if(92===G){if($s(g,w,g.position,!0),bt(G=g.input.charCodeAt(++g.position)))_n(g,!1,C);else if(G<256&&tv[G])g.result+=mr[G],g.position++;else if((L=Gw(G))>0){for(O=L,F=0;O>0;O--)(L=$p(G=g.input.charCodeAt(++g.position)))>=0?F=(F<<4)+L:St(g,"expected hexadecimal character");g.result+=jw(F),g.position++}else St(g,"unknown escape sequence");w=R=g.position}else bt(G)?($s(g,w,R,!0),xc(g,_n(g,!1,C)),w=R=g.position):g.position===g.lineStart&&La(g)?St(g,"unexpected end of the document within a double quoted scalar"):(g.position++,R=g.position)}St(g,"unexpected end of the stream within a double quoted scalar")}(g,He)?pe=!0:function(g){var C,w,R;if(42!==(R=g.input.charCodeAt(g.position)))return!1;for(R=g.input.charCodeAt(++g.position),C=g.position;0!==R&&!wr(R)&&!Br(R);)R=g.input.charCodeAt(++g.position);return g.position===C&&St(g,"name of an alias node must contain at least one character"),w=g.input.slice(C,g.position),Ks.call(g.anchorMap,w)||St(g,'unidentified alias "'+w+'"'),g.result=g.anchorMap[w],_n(g,!0,-1),!0}(g)?(pe=!0,(null!==g.tag||null!==g.anchor)&&St(g,"alias node should not have any properties")):function(g,C,w){var O,F,L,G,te,ne,pe,Te,ge=g.kind,_e=g.result;if(wr(Te=g.input.charCodeAt(g.position))||Br(Te)||35===Te||38===Te||42===Te||33===Te||124===Te||62===Te||39===Te||34===Te||37===Te||64===Te||96===Te||(63===Te||45===Te)&&(wr(O=g.input.charCodeAt(g.position+1))||w&&Br(O)))return!1;for(g.kind="scalar",g.result="",F=L=g.position,G=!1;0!==Te;){if(58===Te){if(wr(O=g.input.charCodeAt(g.position+1))||w&&Br(O))break}else if(35===Te){if(wr(g.input.charCodeAt(g.position-1)))break}else{if(g.position===g.lineStart&&La(g)||w&&Br(Te))break;if(bt(Te)){if(te=g.line,ne=g.lineStart,pe=g.lineIndent,_n(g,!1,-1),g.lineIndent>=C){G=!0,Te=g.input.charCodeAt(g.position);continue}g.position=L,g.line=te,g.lineStart=ne,g.lineIndent=pe;break}}G&&($s(g,F,L,!1),xc(g,g.line-te),F=L=g.position,G=!1),Vo(Te)||(L=g.position+1),Te=g.input.charCodeAt(++g.position)}return $s(g,F,L,!1),!!g.result||(g.kind=ge,g.result=_e,!1)}(g,He,1===w)&&(pe=!0,null===g.tag&&(g.tag="?")),null!==g.anchor&&(g.anchorMap[g.anchor]=g.result)):0===te&&(pe=G&&Rd(g,We))),null===g.tag)null!==g.anchor&&(g.anchorMap[g.anchor]=g.result);else if("?"===g.tag){for(null!==g.result&&"scalar"!==g.kind&&St(g,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+g.kind+'"'),ge=0,_e=g.implicitTypes.length;ge<_e;ge+=1)if((Oe=g.implicitTypes[ge]).resolve(g.result)){g.result=Oe.construct(g.result),g.tag=Oe.tag,null!==g.anchor&&(g.anchorMap[g.anchor]=g.result);break}}else if("!"!==g.tag){if(Ks.call(g.typeMap[g.kind||"fallback"],g.tag))Oe=g.typeMap[g.kind||"fallback"][g.tag];else for(Oe=null,ge=0,_e=(Te=g.typeMap.multi[g.kind||"fallback"]).length;ge<_e;ge+=1)if(g.tag.slice(0,Te[ge].tag.length)===Te[ge].tag){Oe=Te[ge];break}Oe||St(g,"unknown tag !<"+g.tag+">"),null!==g.result&&Oe.kind!==g.kind&&St(g,"unacceptable node kind for !<"+g.tag+'> tag; it should be "'+Oe.kind+'", not "'+g.kind+'"'),Oe.resolve(g.result,g.tag)?(g.result=Oe.construct(g.result,g.tag),null!==g.anchor&&(g.anchorMap[g.anchor]=g.result)):St(g,"cannot resolve a node with !<"+g.tag+"> explicit tag")}return null!==g.listener&&g.listener("close",g),null!==g.tag||null!==g.anchor||pe}function Ne(g){var w,R,O,L,C=g.position,F=!1;for(g.version=null,g.checkLineBreaks=g.legacy,g.tagMap=Object.create(null),g.anchorMap=Object.create(null);0!==(L=g.input.charCodeAt(g.position))&&(_n(g,!0,-1),L=g.input.charCodeAt(g.position),!(g.lineIndent>0||37!==L));){for(F=!0,L=g.input.charCodeAt(++g.position),w=g.position;0!==L&&!wr(L);)L=g.input.charCodeAt(++g.position);for(O=[],(R=g.input.slice(w,g.position)).length<1&&St(g,"directive name must not be less than one character in length");0!==L;){for(;Vo(L);)L=g.input.charCodeAt(++g.position);if(35===L){do{L=g.input.charCodeAt(++g.position)}while(0!==L&&!bt(L));break}if(bt(L))break;for(w=g.position;0!==L&&!wr(L);)L=g.input.charCodeAt(++g.position);O.push(g.input.slice(w,g.position))}0!==L&&Pa(g),Ks.call(nv,R)?nv[R](g,R,O):Ii(g,'unknown document directive "'+R+'"')}_n(g,!0,-1),0===g.lineIndent&&45===g.input.charCodeAt(g.position)&&45===g.input.charCodeAt(g.position+1)&&45===g.input.charCodeAt(g.position+2)?(g.position+=3,_n(g,!0,-1)):F&&St(g,"directives end mark is expected"),Qs(g,g.lineIndent-1,4,!1,!0),_n(g,!0,-1),g.checkLineBreaks&&Xp.test(g.input.slice(C,g.position))&&Ii(g,"non-ASCII line breaks are interpreted as content"),g.documents.push(g.result),g.position===g.lineStart&&La(g)?46===g.input.charCodeAt(g.position)&&(g.position+=3,_n(g,!0,-1)):g.position<g.length-1&&St(g,"end of the stream or a document separator is expected")}function _r(g,C){C=C||{},0!==(g=String(g)).length&&(10!==g.charCodeAt(g.length-1)&&13!==g.charCodeAt(g.length-1)&&(g+="\n"),65279===g.charCodeAt(0)&&(g=g.slice(1)));var w=new iv(g,C),R=g.indexOf("\0");for(-1!==R&&(w.position=R,St(w,"null byte is not allowed in input")),w.input+="\0";32===w.input.charCodeAt(w.position);)w.lineIndent+=1,w.position+=1;for(;w.position<w.length-1;)Ne(w);return w.documents}var Hr={loadAll:function(g,C,w){null!==C&&"object"==typeof C&&void 0===w&&(w=C,C=null);var R=_r(g,w);if("function"!=typeof C)return R;for(var O=0,F=R.length;O<F;O+=1)C(R[O])},load:function(g,C){var w=_r(g,C);if(0!==w.length){if(1===w.length)return w[0];throw new Ze("expected a single document in the stream, but found more")}}},nt=Object.prototype.toString,hi=Object.prototype.hasOwnProperty,Bi={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},lv=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],vo=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ad(g){var C,w,R;if(C=g.toString(16).toUpperCase(),g<=255)w="x",R=2;else if(g<=65535)w="u",R=4;else{if(!(g<=4294967295))throw new Ze("code point within a string may not be greater than 0xFFFFFFFF");w="U",R=8}return"\\"+w+ue.repeat("0",R-C.length)+C}function so(g){this.schema=g.schema||Wp,this.indent=Math.max(1,g.indent||2),this.noArrayIndent=g.noArrayIndent||!1,this.skipInvalid=g.skipInvalid||!1,this.flowLevel=ue.isNothing(g.flowLevel)?-1:g.flowLevel,this.styleMap=function(g,C){var w,R,O,F,L,G,te;if(null===C)return{};for(w={},O=0,F=(R=Object.keys(C)).length;O<F;O+=1)L=R[O],G=String(C[L]),"!!"===L.slice(0,2)&&(L="tag:yaml.org,2002:"+L.slice(2)),(te=g.compiledTypeMap.fallback[L])&&hi.call(te.styleAliases,G)&&(G=te.styleAliases[G]),w[L]=G;return w}(this.schema,g.styles||null),this.sortKeys=g.sortKeys||!1,this.lineWidth=g.lineWidth||80,this.noRefs=g.noRefs||!1,this.noCompatMode=g.noCompatMode||!1,this.condenseFlow=g.condenseFlow||!1,this.quotingType='"'===g.quotingType?2:1,this.forceQuotes=g.forceQuotes||!1,this.replacer="function"==typeof g.replacer?g.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ef(g,C){for(var L,w=ue.repeat(" ",C),R=0,O=-1,F="",G=g.length;R<G;)-1===(O=g.indexOf("\n",R))?(L=g.slice(R),R=G):(L=g.slice(R,O+1),R=O+1),L.length&&"\n"!==L&&(F+=w),F+=L;return F}function tf(g,C){return"\n"+ue.repeat(" ",g.indent*C)}function Nc(g){return 32===g||9===g}function Pc(g){return 32<=g&&g<=126||161<=g&&g<=55295&&8232!==g&&8233!==g||57344<=g&&g<=65533&&65279!==g||65536<=g&&g<=1114111}function uv(g){return Pc(g)&&65279!==g&&13!==g&&10!==g}function dv(g,C,w){var R=uv(g),O=R&&!Nc(g);return(w?R:R&&44!==g&&91!==g&&93!==g&&123!==g&&125!==g)&&35!==g&&!(58===C&&!O)||uv(C)&&!Nc(C)&&35===g||58===C&&O}function Lc(g,C){var R,w=g.charCodeAt(C);return w>=55296&&w<=56319&&C+1<g.length&&(R=g.charCodeAt(C+1))>=56320&&R<=57343?1024*(w-55296)+R-56320+65536:w}function hv(g){return/^\n* /.test(g)}function Xw(g,C,w,R,O){g.dump=function(){if(0===C.length)return 2===g.quotingType?'""':"''";if(!g.noCompatMode&&(-1!==lv.indexOf(C)||vo.test(C)))return 2===g.quotingType?'"'+C+'"':"'"+C+"'";var F=g.indent*Math.max(1,w),L=-1===g.lineWidth?-1:Math.max(Math.min(g.lineWidth,40),g.lineWidth-F);switch(function(g,C,w,R,O,F,L,G){var te,ne=0,pe=null,ge=!1,_e=!1,Te=-1!==R,Oe=-1,He=function(g){return Pc(g)&&65279!==g&&!Nc(g)&&45!==g&&63!==g&&58!==g&&44!==g&&91!==g&&93!==g&&123!==g&&125!==g&&35!==g&&38!==g&&42!==g&&33!==g&&124!==g&&61!==g&&62!==g&&39!==g&&34!==g&&37!==g&&64!==g&&96!==g}(Lc(g,0))&&function(g){return!Nc(g)&&58!==g}(Lc(g,g.length-1));if(C||L)for(te=0;te<g.length;ne>=65536?te+=2:te++){if(!Pc(ne=Lc(g,te)))return 5;He=He&&dv(ne,pe,G),pe=ne}else{for(te=0;te<g.length;ne>=65536?te+=2:te++){if(10===(ne=Lc(g,te)))ge=!0,Te&&(_e=_e||te-Oe-1>R&&" "!==g[Oe+1],Oe=te);else if(!Pc(ne))return 5;He=He&&dv(ne,pe,G),pe=ne}_e=_e||Te&&te-Oe-1>R&&" "!==g[Oe+1]}return ge||_e?w>9&&hv(g)?5:L?2===F?5:2:_e?4:3:!He||L||O(g)?2===F?5:2:1}(C,R||g.flowLevel>-1&&w>=g.flowLevel,g.indent,L,function(ne){return function(g,C){var w,R;for(w=0,R=g.implicitTypes.length;w<R;w+=1)if(g.implicitTypes[w].resolve(C))return!0;return!1}(g,ne)},g.quotingType,g.forceQuotes&&!R,O)){case 1:return C;case 2:return"'"+C.replace(/'/g,"''")+"'";case 3:return"|"+Od(C,g.indent)+Fc(ef(C,F));case 4:return">"+Od(C,g.indent)+Fc(ef(function(g,C){for(var F,L,w=/(\n+)([^\n]*)/g,R=(ne=void 0,ne=g.indexOf("\n"),w.lastIndex=ne=-1!==ne?ne:g.length,mv(g.slice(0,ne),C)),O="\n"===g[0]||" "===g[0];L=w.exec(g);){var te=L[2];F=" "===te[0],R+=L[1]+(O||F||""===te?"":"\n")+mv(te,C),O=F}var ne;return R}(C,L),F));case 5:return'"'+function(g){for(var R,C="",w=0,O=0;O<g.length;w>=65536?O+=2:O++)w=Lc(g,O),!(R=Bi[w])&&Pc(w)?(C+=g[O],w>=65536&&(C+=g[O+1])):C+=R||Ad(w);return C}(C)+'"';default:throw new Ze("impossible error: invalid scalar style")}}()}function Od(g,C){var w=hv(g)?String(C):"",R="\n"===g[g.length-1];return w+(!R||"\n"!==g[g.length-2]&&"\n"!==g?R?"":"-":"+")+"\n"}function Fc(g){return"\n"===g[g.length-1]?g.slice(0,-1):g}function mv(g,C){if(""===g||" "===g[0])return g;for(var R,F,w=/ [^ ]/g,O=0,L=0,G=0,te="";R=w.exec(g);)(G=R.index)-O>C&&(te+="\n"+g.slice(O,F=L>O?L:G),O=F+1),L=G;return te+="\n",(te+=g.length-O>C&&L>O?g.slice(O,L)+"\n"+g.slice(L+1):g.slice(O)).slice(1)}function sf(g,C,w){var R,O,F,L,G,te;for(F=0,L=(O=w?g.explicitTypes:g.implicitTypes).length;F<L;F+=1)if(((G=O[F]).instanceOf||G.predicate)&&(!G.instanceOf||"object"==typeof C&&C instanceof G.instanceOf)&&(!G.predicate||G.predicate(C))){if(g.tag=w?G.multi&&G.representName?G.representName(C):G.tag:"?",G.represent){if(te=g.styleMap[G.tag]||G.defaultStyle,"[object Function]"===nt.call(G.represent))R=G.represent(C,te);else{if(!hi.call(G.represent,te))throw new Ze("!<"+G.tag+'> tag resolver accepts not "'+te+'" style');R=G.represent[te](C,te)}g.dump=R}return!0}return!1}function Uo(g,C,w,R,O,F,L){g.tag=null,g.dump=w,sf(g,w,!1)||sf(g,w,!0);var ne,G=nt.call(g.dump),te=R;R&&(R=g.flowLevel<0||g.flowLevel>C);var ge,_e,pe="[object Object]"===G||"[object Array]"===G;if(pe&&(_e=-1!==(ge=g.duplicates.indexOf(w))),(null!==g.tag&&"?"!==g.tag||_e||2!==g.indent&&C>0)&&(O=!1),_e&&g.usedDuplicates[ge])g.dump="*ref_"+ge;else{if(pe&&_e&&!g.usedDuplicates[ge]&&(g.usedDuplicates[ge]=!0),"[object Object]"===G)R&&0!==Object.keys(g.dump).length?(function(g,C,w,R){var G,te,ne,pe,ge,_e,O="",F=g.tag,L=Object.keys(w);if(!0===g.sortKeys)L.sort();else if("function"==typeof g.sortKeys)L.sort(g.sortKeys);else if(g.sortKeys)throw new Ze("sortKeys must be a boolean or a function");for(G=0,te=L.length;G<te;G+=1)_e="",(!R||""!==O)&&(_e+=tf(g,C)),pe=w[ne=L[G]],g.replacer&&(pe=g.replacer.call(w,ne,pe)),Uo(g,C+1,ne,!0,!0,!0)&&((ge=null!==g.tag&&"?"!==g.tag||g.dump&&g.dump.length>1024)&&(g.dump&&10===g.dump.charCodeAt(0)?_e+="?":_e+="? "),_e+=g.dump,ge&&(_e+=tf(g,C)),Uo(g,C+1,pe,!0,ge)&&(g.dump&&10===g.dump.charCodeAt(0)?_e+=":":_e+=": ",O+=_e+=g.dump));g.tag=F,g.dump=O||"{}"}(g,C,g.dump,O),_e&&(g.dump="&ref_"+ge+g.dump)):(function(g,C,w){var L,G,te,ne,pe,R="",O=g.tag,F=Object.keys(w);for(L=0,G=F.length;L<G;L+=1)pe="",""!==R&&(pe+=", "),g.condenseFlow&&(pe+='"'),ne=w[te=F[L]],g.replacer&&(ne=g.replacer.call(w,te,ne)),Uo(g,C,te,!1,!1)&&(g.dump.length>1024&&(pe+="? "),pe+=g.dump+(g.condenseFlow?'"':"")+":"+(g.condenseFlow?"":" "),Uo(g,C,ne,!1,!1)&&(R+=pe+=g.dump));g.tag=O,g.dump="{"+R+"}"}(g,C,g.dump),_e&&(g.dump="&ref_"+ge+" "+g.dump));else if("[object Array]"===G)R&&0!==g.dump.length?(function(g,C,w,R){var L,G,te,O="",F=g.tag;for(L=0,G=w.length;L<G;L+=1)te=w[L],g.replacer&&(te=g.replacer.call(w,String(L),te)),(Uo(g,C+1,te,!0,!0,!1,!0)||void 0===te&&Uo(g,C+1,null,!0,!0,!1,!0))&&((!R||""!==O)&&(O+=tf(g,C)),g.dump&&10===g.dump.charCodeAt(0)?O+="-":O+="- ",O+=g.dump);g.tag=F,g.dump=O||"[]"}(g,g.noArrayIndent&&!L&&C>0?C-1:C,g.dump,O),_e&&(g.dump="&ref_"+ge+g.dump)):(function(g,C,w){var F,L,G,R="",O=g.tag;for(F=0,L=w.length;F<L;F+=1)G=w[F],g.replacer&&(G=g.replacer.call(w,String(F),G)),(Uo(g,C,G,!1,!1)||void 0===G&&Uo(g,C,null,!1,!1))&&(""!==R&&(R+=","+(g.condenseFlow?"":" ")),R+=g.dump);g.tag=O,g.dump="["+R+"]"}(g,C,g.dump),_e&&(g.dump="&ref_"+ge+" "+g.dump));else{if("[object String]"!==G){if("[object Undefined]"===G)return!1;if(g.skipInvalid)return!1;throw new Ze("unacceptable kind of an object to dump "+G)}"?"!==g.tag&&Xw(g,g.dump,C,F,te)}null!==g.tag&&"?"!==g.tag&&(ne=encodeURI("!"===g.tag[0]?g.tag.slice(1):g.tag).replace(/!/g,"%21"),ne="!"===g.tag[0]?"!"+ne:"tag:yaml.org,2002:"===ne.slice(0,18)?"!!"+ne.slice(18):"!<"+ne+">",g.dump=ne+" "+g.dump)}return!0}function af(g,C){var O,F,w=[],R=[];for(Bc(g,w,R),O=0,F=R.length;O<F;O+=1)C.duplicates.push(w[R[O]]);C.usedDuplicates=new Array(F)}function Bc(g,C,w){var R,O,F;if(null!==g&&"object"==typeof g)if(-1!==(O=C.indexOf(g)))-1===w.indexOf(O)&&w.push(O);else if(C.push(g),Array.isArray(g))for(O=0,F=g.length;O<F;O+=1)Bc(g[O],C,w);else for(O=0,F=(R=Object.keys(g)).length;O<F;O+=1)Bc(g[R[O]],C,w)}function Dr(g,C){return function(){throw new Error("Function yaml."+g+" is removed in js-yaml 4. Use yaml."+C+" instead, which is now safe by default.")}}const Hc={Type:Vi,Schema:Fo,FAILSAFE_SCHEMA:bd,JSON_SCHEMA:jp,CORE_SCHEMA:$t,DEFAULT_SCHEMA:Wp,load:Hr.load,loadAll:Hr.loadAll,dump:function(g,C){var w=new so(C=C||{});w.noRefs||af(g,w);var R=g;return w.replacer&&(R=w.replacer.call({"":R},"",R)),Uo(w,0,R,!0,!0)?w.dump+"\n":""},YAMLException:Ze,types:{binary:X_,float:Sc,map:Lp,null:Bp,pairs:Q_,set:qi,timestamp:Dc,bool:Up,int:gr,merge:ar,omap:$_,seq:U_,str:_o},safeLoad:Dr("safeLoad","load"),safeLoadAll:Dr("safeLoadAll","loadAll"),safeDump:Dr("safeDump","dump")},Ha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Mr,Blob:Il,File:Uc}=Ha;function Go(g){return function(g){if(ce(g))return P(g)}(g)||function(g){if(void 0!==se&&null!=Q(g)||null!=g["@@iterator"])return Y(g)}(g)||ae(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Vt=m(71049),bo=m.n(Vt),wv=function(C){return":/?#[]@!$&'()*+,;=".indexOf(C)>-1},Sv=function(C){return/^[a-z0-9\-._~]+$/i.test(C)};function Ua(g){var C,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},R=w.escape,O=arguments.length>2?arguments[2]:void 0;return"number"==typeof g&&(g=g.toString()),"string"==typeof g&&g.length&&R?O?JSON.parse(g):pt()(C=Go(g)).call(C,function(F){var L,G;if(Sv(F)||wv(F)&&"unsafe"===R)return F;var te=new TextEncoder;return pt()(L=pt()(G=Ct()(te.encode(F))).call(G,function(pe){var ge;return bo()(ge="0".concat(pe.toString(16).toUpperCase())).call(ge,-2)})).call(L,function(pe){return"%".concat(pe)}).join("")}).join(""):g}function Gc(g){var C=g.value;return Array.isArray(C)?function(g){var C=g.key,w=g.value,R=g.style,O=g.explode,F=g.escape,L=function(ge){return Ua(ge,{escape:F})};if("simple"===R)return pt()(w).call(w,function(pe){return L(pe)}).join(",");if("label"===R)return".".concat(pt()(w).call(w,function(pe){return L(pe)}).join("."));if("matrix"===R)return pt()(w).call(w,function(pe){return L(pe)}).reduce(function(pe,ge){var _e,Te,Oe;return!pe||O?Pe()(Te=Pe()(Oe="".concat(pe||"",";")).call(Oe,C,"=")).call(Te,ge):Pe()(_e="".concat(pe,",")).call(_e,ge)},"");if("form"===R){var G=O?"&".concat(C,"="):",";return pt()(w).call(w,function(pe){return L(pe)}).join(G)}if("spaceDelimited"===R){var te=O?"".concat(C,"="):"";return pt()(w).call(w,function(pe){return L(pe)}).join(" ".concat(te))}if("pipeDelimited"===R){var ne=O?"".concat(C,"="):"";return pt()(w).call(w,function(pe){return L(pe)}).join("|".concat(ne))}}(g):"object"===re(C)?function(g){var C=g.key,w=g.value,R=g.style,O=g.explode,F=g.escape,L=function(ne){return Ua(ne,{escape:F})},G=ot()(w);return"simple"===R?G.reduce(function(te,ne){var pe,ge,_e,Te=L(w[ne]),Oe=O?"=":",",He=te?"".concat(te,","):"";return Pe()(pe=Pe()(ge=Pe()(_e="".concat(He)).call(_e,ne)).call(ge,Oe)).call(pe,Te)},""):"label"===R?G.reduce(function(te,ne){var pe,ge,_e,Te=L(w[ne]),Oe=O?"=":".",He=te?"".concat(te,"."):".";return Pe()(pe=Pe()(ge=Pe()(_e="".concat(He)).call(_e,ne)).call(ge,Oe)).call(pe,Te)},""):"matrix"===R&&O?G.reduce(function(te,ne){var pe,ge,_e=L(w[ne]),Te=te?"".concat(te,";"):";";return Pe()(pe=Pe()(ge="".concat(Te)).call(ge,ne,"=")).call(pe,_e)},""):"matrix"===R?G.reduce(function(te,ne){var pe,ge,_e=L(w[ne]),Te=te?"".concat(te,","):";".concat(C,"=");return Pe()(pe=Pe()(ge="".concat(Te)).call(ge,ne,",")).call(pe,_e)},""):"form"===R?G.reduce(function(te,ne){var pe,ge,_e,Te,Oe=L(w[ne]),He=te?Pe()(pe="".concat(te)).call(pe,O?"&":","):"",We=O?"=":",";return Pe()(ge=Pe()(_e=Pe()(Te="".concat(He)).call(Te,ne)).call(_e,We)).call(ge,Oe)},""):void 0}(g):function(g){var L,C=g.key,w=g.value,R=g.style,O=g.escape,F=function(te){return Ua(te,{escape:O})};return"simple"===R?F(w):"label"===R?".".concat(F(w)):"matrix"===R?Pe()(L=";".concat(C,"=")).call(L,F(w)):"form"===R||"deepObject"===R?F(w):void 0}(g)}const jo=function(C,w){w.body=C};var wn={serializeRes:jc,mergeInQueryOrForm:Vd};function xl(g){return ia.apply(this,arguments)}function ia(){return ia=me(De().mark(function g(C){var w,O,F,L,G=arguments;return De().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(w=G.length>1&&void 0!==G[1]?G[1]:{},"object"===re(C)&&(C=(w=C).url),w.headers=w.headers||{},wn.mergeInQueryOrForm(w),w.headers&&ot()(w.headers).forEach(function(pe){var ge=w.headers[pe];"string"==typeof ge&&(w.headers[pe]=ge.replace(/\n+/g," "))}),!w.requestInterceptor){ne.next=12;break}return ne.next=8,w.requestInterceptor(w);case 8:if(ne.t0=ne.sent,ne.t0){ne.next=11;break}ne.t0=w;case 11:w=ne.t0;case 12:return/multipart\/form-data/i.test(w.headers["content-type"]||w.headers["Content-Type"])&&w.body instanceof Mr&&(delete w.headers["content-type"],delete w.headers["Content-Type"]),ne.prev=14,ne.next=17,(w.userFetch||fetch)(w.url,w);case 17:return O=ne.sent,ne.next=20,wn.serializeRes(O,C,w);case 20:if(O=ne.sent,!w.responseInterceptor){ne.next=28;break}return ne.next=24,w.responseInterceptor(O);case 24:if(ne.t1=ne.sent,ne.t1){ne.next=27;break}ne.t1=O;case 27:O=ne.t1;case 28:ne.next=39;break;case 30:if(ne.prev=30,ne.t2=ne.catch(14),O){ne.next=34;break}throw ne.t2;case 34:throw(F=new Error(O.statusText||"response status is ".concat(O.status))).status=O.status,F.statusCode=O.status,F.responseError=ne.t2,F;case 39:if(O.ok){ne.next=45;break}throw(L=new Error(O.statusText||"response status is ".concat(O.status))).status=O.status,L.statusCode=O.status,L.response=O,L;case 45:return ne.abrupt("return",O);case 46:case"end":return ne.stop()}},g,null,[[14,30]])})),ia.apply(this,arguments)}var yo=function(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(C)};function Fd(g,C){return C&&(0===C.indexOf("application/json")||C.indexOf("+json")>0)?JSON.parse(g):Hc.load(g)}function jc(g,C){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},R=w.loadSpec,O=void 0!==R&&R,F={ok:g.ok,url:g.url||C,status:g.status,statusText:g.statusText,headers:hf(g.headers)},L=F.headers["content-type"],G=O||yo(L),te=G?g.text:g.blob||g.buffer;return te.call(g).then(function(ne){if(F.text=ne,F.data=ne,G)try{var pe=Fd(ne,L);F.body=pe,F.obj=pe}catch(ge){F.parseError=ge}return F})}function Zw(g){return Re()(g).call(g,", ")?g.split(", "):g}function hf(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof gt()(g)?{}:Ct()(gt()(g).call(g)).reduce(function(C,w){var R=fe(w,2);return C[R[0]]=Zw(R[1]),C},{})}function Ga(g,C){return!C&&"undefined"!=typeof navigator&&(C=navigator),C&&"ReactNative"===C.product?!(!g||"object"!==re(g)||"string"!=typeof g.uri):!!(void 0!==Uc&&g instanceof Uc||void 0!==Il&&g instanceof Il||ArrayBuffer.isView(g))||null!==g&&"object"===re(g)&&"function"==typeof g.pipe}function Al(g,C){return Array.isArray(g)&&g.some(function(w){return Ga(w,C)})}var vr={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Wo={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Bd(g,C){var w=arguments.length>2&&void 0!==arguments[2]&&arguments[2],R=C.collectionFormat,O=C.allowEmptyValue,F=C.serializationOption,L=C.encoding,G="object"!==re(C)||Array.isArray(C)?C:C.value,te=w?function(Oe){return Oe.toString()}:function(Oe){return encodeURIComponent(Oe)},ne=te(g);if(void 0===G&&O)return[[ne,""]];if(Ga(G)||Al(G))return[[ne,G]];if(F)return na(g,G,w,F);if(L){if([re(L.style),re(L.explode),re(L.allowReserved)].some(function(Oe){return"undefined"!==Oe})){var pe=L.style,ge=L.explode,_e=L.allowReserved;return na(g,G,w,{style:pe,explode:ge,allowReserved:_e})}if(L.contentType){if("application/json"===L.contentType){var Te="string"==typeof G?G:ki()(G);return[[ne,te(Te)]]}return[[ne,te(G.toString())]]}return"object"!==re(G)?[[ne,te(G)]]:Array.isArray(G)&&G.every(function(Oe){return"object"!==re(Oe)})?[[ne,pt()(G).call(G,te).join(",")]]:[[ne,te(ki()(G))]]}return"object"!==re(G)?[[ne,te(G)]]:Array.isArray(G)?"multi"===R?[[ne,pt()(G).call(G,te)]]:[[ne,pt()(G).call(G,te).join(Wo[R||"csv"])]]:[[ne,""]]}function na(g,C,w,R){var O,pe,ge,F=R.style||"form",L=void 0===R.explode?"form"===F:R.explode,G=!w&&(R&&R.allowReserved?"unsafe":"reserved"),te=function(Te){return Ua(Te,{escape:G})},ne=w?function(_e){return _e}:function(_e){return Ua(_e,{escape:G})};return"object"!==re(C)?[[ne(g),te(C)]]:Array.isArray(C)?L?[[ne(g),pt()(C).call(C,te)]]:[[ne(g),pt()(C).call(C,te).join(vr[F])]]:"deepObject"===F?pt()(pe=ot()(C)).call(pe,function(_e){var Te;return[ne(Pe()(Te="".concat(g,"[")).call(Te,_e,"]")),te(C[_e])]}):L?pt()(ge=ot()(C)).call(ge,function(_e){return[ne(_e),te(C[_e])]}):[[ne(g),pt()(O=ot()(C)).call(O,function(_e){var Te;return[Pe()(Te="".concat(ne(_e),",")).call(Te,te(C[_e]))]}).join(",")]]}function zo(g){return Ot()(g).reduce(function(C,w){var G,R=fe(w,2),L=W(Bd(R[0],R[1],!0));try{for(L.s();!(G=L.n()).done;){var te=fe(G.value,2),ne=te[0],pe=te[1];if(Array.isArray(pe)){var _e,ge=W(pe);try{for(ge.s();!(_e=ge.n()).done;){var Te=_e.value;if(ArrayBuffer.isView(Te)){var Oe=new Il([Te]);C.append(ne,Oe)}else C.append(ne,Te)}}catch(We){ge.e(We)}finally{ge.f()}}else if(ArrayBuffer.isView(pe)){var He=new Il([pe]);C.append(ne,He)}else C.append(ne,pe)}}catch(We){L.e(We)}finally{L.f()}return C},new Mr)}function pf(g){var C=ot()(g).reduce(function(w,R){var F,O=W(Bd(R,g[R]));try{for(O.s();!(F=O.n()).done;){var L=fe(F.value,2);w[L[0]]=L[1]}}catch(ne){O.e(ne)}finally{O.f()}return w},{});return ye().stringify(C,{encode:!1,indices:!1})||""}function Vd(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=g.url,w=void 0===C?"":C,R=g.query,O=g.form,F=function(){for(var Be=arguments.length,_i=new Array(Be),ni=0;ni<Be;ni++)_i[ni]=arguments[ni];var gn=di()(_i).call(_i,function(Ki){return Ki}).join("&");return gn?"?".concat(gn):""};if(O){var L=ot()(O).some(function(at){var Be=O[at].value;return Ga(Be)||Al(Be)}),G=g.headers["content-type"]||g.headers["Content-Type"];if(L||/multipart\/form-data/i.test(G)){var te=zo(g.form);jo(te,g)}else g.body=pf(O);delete g.form}if(R){var ne=w.split("?"),pe=fe(ne,2),ge=pe[0],_e=pe[1],Te="";if(_e){var Oe=ye().parse(_e),He=ot()(R);He.forEach(function(at){return delete Oe[at]}),Te=ye().stringify(Oe,{encode:!0})}var We=F(Te,pf(R));g.url=ge+We,delete g.query}return g}function ff(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")}function Wc(g,C){for(var w=0;w<C.length;w++){var R=C[w];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),k(g,R.key,R)}}function zc(g,C,w){return C&&Wc(g.prototype,C),w&&Wc(g,w),g}var g,gf=m(78804),Hd=m.n(gf),Iv=m(96916),Ss=m.n(Iv),Yc=m(3498),mf=m.n(Yc),_f=(g=function(C,w){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,O){R.__proto__=O}||function(R,O){for(var F in O)O.hasOwnProperty(F)&&(R[F]=O[F])})(C,w)},function(C,w){function R(){this.constructor=C}g(C,w),C.prototype=null===w?Object.create(w):(R.prototype=w.prototype,new R)}),vf=Object.prototype.hasOwnProperty;function Ol(g,C){return vf.call(g,C)}function ja(g){if(Array.isArray(g)){for(var w=new Array(g.length),C=0;C<w.length;C++)w[C]=""+C;return w}if(Object.keys)return Object.keys(g);for(var R in w=[],g)Ol(g,R)&&w.push(R);return w}function Gr(g){switch(typeof g){case"object":return JSON.parse(JSON.stringify(g));case"undefined":return null;default:return g}}function Ud(g){for(var R,C=0,w=g.length;C<w;){if(!((R=g.charCodeAt(C))>=48&&R<=57))return!1;C++}return!0}function pn(g){return-1===g.indexOf("/")&&-1===g.indexOf("~")?g:g.replace(/~/g,"~0").replace(/\//g,"~1")}function Yo(g){return g.replace(/~1/g,"/").replace(/~0/g,"~")}function Gd(g){if(void 0===g)return!0;if(g)if(Array.isArray(g)){for(var C=0,w=g.length;C<w;C++)if(Gd(g[C]))return!0}else if("object"==typeof g){var R=ja(g),O=R.length;for(C=0;C<O;C++)if(Gd(g[R[C]]))return!0}return!1}function jd(g,C){var w=[g];for(var R in C){var O="object"==typeof C[R]?JSON.stringify(C[R],null,2):C[R];void 0!==O&&w.push(R+": "+O)}return w.join("\n")}var bf=function(g){function C(w,R,O,F,L){var G=this.constructor,te=g.call(this,jd(w,{name:R,index:O,operation:F,tree:L}))||this;return te.name=R,te.index=O,te.operation=F,te.tree=L,Object.setPrototypeOf(te,G.prototype),te.message=jd(w,{name:R,index:O,operation:F,tree:L}),te}return _f(C,g),C}(Error),bn=bf,xv=Gr,Xo={add:function(g,C,w){return g[C]=this.value,{newDocument:w}},remove:function(g,C,w){var R=g[C];return delete g[C],{newDocument:w,removed:R}},replace:function(g,C,w){var R=g[C];return g[C]=this.value,{newDocument:w,removed:R}},move:function(g,C,w){var R=Ds(w,this.path);R&&(R=Gr(R));var O=Ko(w,{op:"remove",path:this.from}).removed;return Ko(w,{op:"add",path:this.path,value:O}),{newDocument:w,removed:R}},copy:function(g,C,w){var R=Ds(w,this.from);return Ko(w,{op:"add",path:this.path,value:Gr(R)}),{newDocument:w}},test:function(g,C,w){return{newDocument:w,test:Nl(g[C],this.value)}},_get:function(g,C,w){return this.value=g[C],{newDocument:w}}},Xc={add:function(g,C,w){return Ud(C)?g.splice(C,0,this.value):g[C]=this.value,{newDocument:w,index:C}},remove:function(g,C,w){return{newDocument:w,removed:g.splice(C,1)[0]}},replace:function(g,C,w){var R=g[C];return g[C]=this.value,{newDocument:w,removed:R}},move:Xo.move,copy:Xo.copy,test:Xo.test,_get:Xo._get};function Ds(g,C){if(""==C)return g;var w={op:"_get",path:C};return Ko(g,w),w.value}function Ko(g,C,w,R,O,F){if(void 0===w&&(w=!1),void 0===R&&(R=!0),void 0===O&&(O=!0),void 0===F&&(F=0),w&&("function"==typeof w?w(C,0,g,C.path):ao(C,0)),""===C.path){var L={newDocument:g};if("add"===C.op)return L.newDocument=C.value,L;if("replace"===C.op)return L.newDocument=C.value,L.removed=g,L;if("move"===C.op||"copy"===C.op)return L.newDocument=Ds(g,C.from),"move"===C.op&&(L.removed=g),L;if("test"===C.op){if(L.test=Nl(g,C.value),!1===L.test)throw new bn("Test operation failed","TEST_OPERATION_FAILED",F,C,g);return L.newDocument=g,L}if("remove"===C.op)return L.removed=g,L.newDocument=null,L;if("_get"===C.op)return C.value=g,L;if(w)throw new bn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",F,C,g);return L}R||(g=Gr(g));var te=(C.path||"").split("/"),ne=g,pe=1,ge=te.length,_e=void 0,Te=void 0,Oe=void 0;for(Oe="function"==typeof w?w:ao;;){if((Te=te[pe])&&-1!=Te.indexOf("~")&&(Te=Yo(Te)),O&&"__proto__"==Te)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(w&&void 0===_e&&(void 0===ne[Te]?_e=te.slice(0,pe).join("/"):pe==ge-1&&(_e=C.path),void 0!==_e&&Oe(C,0,g,_e)),pe++,Array.isArray(ne)){if("-"===Te)Te=ne.length;else{if(w&&!Ud(Te))throw new bn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",F,C,g);Ud(Te)&&(Te=~~Te)}if(pe>=ge){if(w&&"add"===C.op&&Te>ne.length)throw new bn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",F,C,g);if(!1===(L=Xc[C.op].call(C,ne,Te,g)).test)throw new bn("Test operation failed","TEST_OPERATION_FAILED",F,C,g);return L}}else if(pe>=ge){if(!1===(L=Xo[C.op].call(C,ne,Te,g)).test)throw new bn("Test operation failed","TEST_OPERATION_FAILED",F,C,g);return L}if(ne=ne[Te],w&&pe<ge&&(!ne||"object"!=typeof ne))throw new bn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",F,C,g)}}function Ms(g,C,w,R,O){if(void 0===R&&(R=!0),void 0===O&&(O=!0),w&&!Array.isArray(C))throw new bn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");R||(g=Gr(g));for(var F=new Array(C.length),L=0,G=C.length;L<G;L++)F[L]=Ko(g,C[L],w,!0,O,L),g=F[L].newDocument;return F.newDocument=g,F}function Av(g,C,w){var R=Ko(g,C);if(!1===R.test)throw new bn("Test operation failed","TEST_OPERATION_FAILED",w,C,g);return R.newDocument}function ao(g,C,w,R){if("object"!=typeof g||null===g||Array.isArray(g))throw new bn("Operation is not an object","OPERATION_NOT_AN_OBJECT",C,g,w);if(!Xo[g.op])throw new bn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",C,g,w);if("string"!=typeof g.path)throw new bn("Operation `path` property is not a string","OPERATION_PATH_INVALID",C,g,w);if(0!==g.path.indexOf("/")&&g.path.length>0)throw new bn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",C,g,w);if(("move"===g.op||"copy"===g.op)&&"string"!=typeof g.from)throw new bn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",C,g,w);if(("add"===g.op||"replace"===g.op||"test"===g.op)&&void 0===g.value)throw new bn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",C,g,w);if(("add"===g.op||"replace"===g.op||"test"===g.op)&&Gd(g.value))throw new bn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",C,g,w);if(w)if("add"==g.op){var O=g.path.split("/").length,F=R.split("/").length;if(O!==F+1&&O!==F)throw new bn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",C,g,w)}else if("replace"===g.op||"remove"===g.op||"_get"===g.op){if(g.path!==R)throw new bn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",C,g,w)}else if("move"===g.op||"copy"===g.op){var G=Wa([{op:"_get",path:g.from,value:void 0}],w);if(G&&"OPERATION_PATH_UNRESOLVABLE"===G.name)throw new bn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",C,g,w)}}function Wa(g,C,w){try{if(!Array.isArray(g))throw new bn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(C)Ms(Gr(C),Gr(g),w||!0);else{w=w||ao;for(var R=0;R<g.length;R++)w(g[R],R,C,void 0)}}catch(O){if(O instanceof bn)return O;throw O}}function Nl(g,C){if(g===C)return!0;if(g&&C&&"object"==typeof g&&"object"==typeof C){var O,F,L,w=Array.isArray(g),R=Array.isArray(C);if(w&&R){if((F=g.length)!=C.length)return!1;for(O=F;0!=O--;)if(!Nl(g[O],C[O]))return!1;return!0}if(w!=R)return!1;var G=Object.keys(g);if((F=G.length)!==Object.keys(C).length)return!1;for(O=F;0!=O--;)if(!C.hasOwnProperty(G[O]))return!1;for(O=F;0!=O--;)if(!Nl(g[L=G[O]],C[L]))return!1;return!0}return g!=g&&C!=C}var Wd=new WeakMap,Pl=function(C){this.observers=new Map,this.obj=C},zd=function(C,w){this.callback=C,this.observer=w};function eS(g,C){C.unobserve()}function Kc(g,C){var R,O=function(g){return Wd.get(g)}(g);if(O){var F=function(g,C){return g.observers.get(C)}(O,C);R=F&&F.observer}else O=new Pl(g),Wd.set(g,O);if(R)return R;if(R={},O.value=Gr(g),C){R.callback=C,R.next=null;var L=function(){$c(R)},G=function(){clearTimeout(R.next),R.next=setTimeout(L)};"undefined"!=typeof window&&(window.addEventListener("mouseup",G),window.addEventListener("keyup",G),window.addEventListener("mousedown",G),window.addEventListener("keydown",G),window.addEventListener("change",G))}return R.patches=[],R.object=g,R.unobserve=function(){$c(R),clearTimeout(R.next),function(g,C){g.observers.delete(C.callback)}(O,R),"undefined"!=typeof window&&(window.removeEventListener("mouseup",G),window.removeEventListener("keyup",G),window.removeEventListener("mousedown",G),window.removeEventListener("keydown",G),window.removeEventListener("change",G))},O.observers.set(C,new zd(C,R)),R}function $c(g,C){void 0===C&&(C=!1);var w=Wd.get(g.object);Ll(w.value,g.object,g.patches,"",C),g.patches.length&&Ms(w.value,g.patches);var R=g.patches;return R.length>0&&(g.patches=[],g.callback&&g.callback(R)),R}function Ll(g,C,w,R,O){if(C!==g){"function"==typeof C.toJSON&&(C=C.toJSON());for(var F=ja(C),L=ja(g),te=!1,ne=L.length-1;ne>=0;ne--){var ge=g[pe=L[ne]];if(!Ol(C,pe)||void 0===C[pe]&&void 0!==ge&&!1===Array.isArray(C))Array.isArray(g)===Array.isArray(C)?(O&&w.push({op:"test",path:R+"/"+pn(pe),value:Gr(ge)}),w.push({op:"remove",path:R+"/"+pn(pe)}),te=!0):(O&&w.push({op:"test",path:R,value:g}),w.push({op:"replace",path:R,value:C}));else{var _e=C[pe];"object"==typeof ge&&null!=ge&&"object"==typeof _e&&null!=_e&&Array.isArray(ge)===Array.isArray(_e)?Ll(ge,_e,w,R+"/"+pn(pe),O):ge!==_e&&(O&&w.push({op:"test",path:R+"/"+pn(pe),value:Gr(ge)}),w.push({op:"replace",path:R+"/"+pn(pe),value:Gr(_e)}))}}if(te||F.length!=L.length)for(ne=0;ne<F.length;ne++){var pe;!Ol(g,pe=F[ne])&&void 0!==C[pe]&&w.push({op:"add",path:R+"/"+pn(pe),value:Gr(C[pe])})}}}function Jc(g,C,w){void 0===w&&(w=!1);var R=[];return Ll(g,C,R,"",w),R}Object.assign({},y,S,{JsonPatchError:bf,deepClone:Gr,escapePathComponent:pn,unescapePathComponent:Yo});var yf=m(60910),za=m.n(yf),Pv=m(32005),Ya=m.n(Pv);const Ni={add:function(g,C){return{op:"add",path:g,value:C}},replace:Zc,remove:function(g){return{op:"remove",path:g}},merge:function(g,C){return{type:"mutation",op:"merge",path:g,value:C}},mergeDeep:function(g,C){return{type:"mutation",op:"mergeDeep",path:g,value:C}},context:function(g,C){return{type:"context",path:g,value:C}},getIn:function(g,C){return C.reduce(function(w,R){return void 0!==R&&w?w[R]:w},g)},applyPatch:function(g,C,w){if(w=w||{},"merge"===(C=V(V({},C),{},{path:C.path&&Lv(C.path)})).op){var R=Rs(g,C.path);X()(R,C.value),Ms(g,[Zc(C.path,R)])}else if("mergeDeep"===C.op){var O=Rs(g,C.path);for(var F in C.value){var L=C.value[F],G=Array.isArray(L);if(G){var te=O[F]||[];O[F]=Pe()(te).call(te,L)}else if($r(L)&&!G){var ne=V({},O[F]);for(var pe in L){if(Object.prototype.hasOwnProperty.call(ne,pe)){ne=za()(Ya()(ne),L);break}X()(ne,H({},pe,L[pe]))}O[F]=ne}else O[F]=L}}else if("add"===C.op&&""===C.path&&$r(C.value)){Ms(g,ot()(C.value).reduce(function(We,at){return We.push({op:"add",path:"/".concat(Lv(at)),value:C.value[at]}),We},[]))}else if("replace"===C.op&&""===C.path){var Te=C.value;w.allowMetaPatches&&C.meta&&Fn(C)&&(Array.isArray(C.value)||$r(C.value))&&(Te=V(V({},Te),C.meta)),g=Te}else if(Ms(g,[C]),w.allowMetaPatches&&C.meta&&Fn(C)&&(Array.isArray(C.value)||$r(C.value))){var He=V(V({},Rs(g,C.path)),C.meta);Ms(g,[Zc(C.path,He)])}return g},parentPathMatch:function(g,C){if(!Array.isArray(C))return!1;for(var w=0,R=C.length;w<R;w+=1)if(C[w]!==g[w])return!1;return!0},flatten:Vl,fullyNormalizeArray:function(g){return Hl(Vl(Sf(g)))},normalizeArray:Sf,isPromise:function(g){return $r(g)&&$d(g.then)},forEachNew:function(g,C){try{return Bl(g,eu,C)}catch(w){return w}},forEachNewPrimitive:function(g,C){try{return Bl(g,Kd,C)}catch(w){return w}},isJsonPatch:ra,isContextPatch:function(g){return $o(g)&&"context"===g.type},isPatch:$o,isMutation:tu,isAdditiveMutation:Fn,isGenerator:function(g){return"[object GeneratorFunction]"===Object.prototype.toString.call(g)},isFunction:$d,isObject:$r,isError:function(g){return g instanceof Error}};function Lv(g){return Array.isArray(g)?g.length<1?"":"/".concat(pt()(g).call(g,function(C){return(C+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):g}function Zc(g,C,w){return{op:"replace",path:g,value:C,meta:w}}function Bl(g,C,w){var R;return Hl(Vl(pt()(R=di()(g).call(g,Fn)).call(R,function(G){return C(G.value,w,G.path)})||[]))}function Kd(g,C,w){return w=w||[],Array.isArray(g)?pt()(g).call(g,function(O,F){return Kd(O,C,Pe()(w).call(w,F))}):$r(g)?pt()(R=ot()(g)).call(R,function(O){return Kd(g[O],C,Pe()(w).call(w,O))}):C(g,w[w.length-1],w);var R}function eu(g,C,w){var R=[];if((w=w||[]).length>0){var O=C(g,w[w.length-1],w);O&&(R=Pe()(R).call(R,O))}if(Array.isArray(g)){var F=pt()(g).call(g,function(te,ne){return eu(te,C,Pe()(w).call(w,ne))});F&&(R=Pe()(R).call(R,F))}else if($r(g)){var L,G=pt()(L=ot()(g)).call(L,function(te){return eu(g[te],C,Pe()(w).call(w,te))});G&&(R=Pe()(R).call(R,G))}return Vl(R)}function Sf(g){return Array.isArray(g)?g:[g]}function Vl(g){var C;return Pe()(C=[]).apply(C,Go(pt()(g).call(g,function(w){return Array.isArray(w)?Vl(w):w})))}function Hl(g){return di()(g).call(g,function(C){return void 0!==C})}function $r(g){return g&&"object"===re(g)}function $d(g){return g&&"function"==typeof g}function ra(g){if($o(g)){var C=g.op;return"add"===C||"remove"===C||"replace"===C}return!1}function tu(g){return ra(g)||$o(g)&&"mutation"===g.type}function Fn(g){return tu(g)&&("add"===g.op||"replace"===g.op||"merge"===g.op||"mergeDeep"===g.op)}function $o(g){return g&&"object"===re(g)}function Rs(g,C){try{return Ds(g,C)}catch(w){return console.error(w),{}}}var Ul=m(14569),Jd=m.n(Ul),oa=m(58258),Hv=m.n(oa);function Uv(g,C){function w(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var R=arguments.length,O=new Array(R),F=0;F<R;F++)O[F]=arguments[F];this.message=O[0],C&&C.apply(this,O)}return(w.prototype=new Error).name=g,w.prototype.constructor=w,w}var Gv=m(86439),tS=m.n(Gv),jv=["properties"],Ae=["properties"],Wv=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],iS=["schema/example","items/example"];function zv(g){var C=g[g.length-1],w=g[g.length-2],R=g.join("/");return jv.indexOf(C)>-1&&-1===Ae.indexOf(w)||Wv.indexOf(R)>-1||iS.some(function(O){return R.indexOf(O)>-1})}function Mf(g,C){var w,O=fe(g.split("#"),2),L=O[1],G=ee.resolve(O[0]||"",C||"");return L?Pe()(w="".concat(G,"#")).call(w,L):G}var Yv="application/json, application/yaml",rS=new RegExp("^([a-z]+://|//)","i"),Eo=Uv("JSONRefError",function(C,w,R){this.originalError=R,X()(this,w||{})}),Is={},kn=new(Jd()),Qd=[function(g){return"paths"===g[0]&&"responses"===g[3]&&"examples"===g[5]},function(g){return"paths"===g[0]&&"responses"===g[3]&&"content"===g[5]&&"example"===g[7]},function(g){return"paths"===g[0]&&"responses"===g[3]&&"content"===g[5]&&"examples"===g[7]&&"value"===g[9]},function(g){return"paths"===g[0]&&"requestBody"===g[3]&&"content"===g[4]&&"example"===g[6]},function(g){return"paths"===g[0]&&"requestBody"===g[3]&&"content"===g[4]&&"examples"===g[6]&&"value"===g[8]},function(g){return"paths"===g[0]&&"parameters"===g[2]&&"example"===g[4]},function(g){return"paths"===g[0]&&"parameters"===g[3]&&"example"===g[5]},function(g){return"paths"===g[0]&&"parameters"===g[2]&&"examples"===g[4]&&"value"===g[6]},function(g){return"paths"===g[0]&&"parameters"===g[3]&&"examples"===g[5]&&"value"===g[7]},function(g){return"paths"===g[0]&&"parameters"===g[2]&&"content"===g[4]&&"example"===g[6]},function(g){return"paths"===g[0]&&"parameters"===g[2]&&"content"===g[4]&&"examples"===g[6]&&"value"===g[8]},function(g){return"paths"===g[0]&&"parameters"===g[3]&&"content"===g[4]&&"example"===g[7]},function(g){return"paths"===g[0]&&"parameters"===g[3]&&"content"===g[5]&&"examples"===g[7]&&"value"===g[9]}],oS={key:"$ref",plugin:function(C,w,R,O){var F=O.getInstance(),L=bo()(R).call(R,0,-1);if(!zv(L)&&!function(C){return Qd.some(function(w){return w(C)})}(L)){var te=O.getContext(R).baseDoc;if("string"!=typeof C)return new Eo("$ref: must be a string (JSON-Ref)",{$ref:C,baseDoc:te,fullPath:R});var _e,Te,Oe,ne=xs(C),pe=ne[0],ge=ne[1]||"";try{_e=te||pe?lo(pe,te):null}catch(Be){return Ka(Be,{pointer:ge,$ref:C,basePath:_e,fullPath:R})}if(function(g,C,w,R){var O,F,L=kn.get(R);L||kn.set(R,L={});var G=function(g){return 0===g.length?"":"/".concat(pt()(g).call(g,Rr).join("/"))}(w),te=Pe()(O="".concat(C||"<specmap-base>","#")).call(O,g),ne=G.replace(/allOf\/\d+\/?/g,"");if(C===R.contextTree.get([]).baseDoc&&kf(ne,g))return!0;var ge="",_e=w.some(function(Te){var Oe;return ge=Pe()(Oe="".concat(ge,"/")).call(Oe,Rr(Te)),L[ge]&&L[ge].some(function(He){return kf(He,te)||kf(te,He)})});if(_e)return!0;L[ne]=Pe()(F=L[ne]||[]).call(F,te)}(ge,_e,L,O)&&!F.useCircularStructures){var He=Mf(C,_e);return C===He?null:Ni.replace(R,He)}if(null==_e?(Oe=Of(ge),void 0===(Te=O.get(Oe))&&(Te=new Eo("Could not resolve reference: ".concat(C),{pointer:ge,$ref:C,baseDoc:te,fullPath:R}))):Te=null!=(Te=Jo(_e,ge)).__value?Te.__value:Te.catch(function(Be){throw Ka(Be,{pointer:ge,$ref:C,baseDoc:te,fullPath:R})}),Te instanceof Error)return[Ni.remove(R),Te];var We=Mf(C,_e),at=Ni.replace(L,Te,{$$ref:We});if(_e&&_e!==te)return[at,Ni.context(L,{baseDoc:_e})];try{if(!function(g,C){var w=[g];return C.path.reduce(function(O,F){return w.push(O[F]),O[F]},g),function R(O){return Ni.isObject(O)&&(w.indexOf(O)>=0||ot()(O).some(function(F){return R(O[F])}))}(C.value)}(O.state,at)||F.useCircularStructures)return at}catch(Be){return null}}}},Rf=X()(oS,{docCache:Is,absoluteify:lo,clearCache:function(g){void 0!==g?delete Is[g]:ot()(Is).forEach(function(C){delete Is[C]})},JSONRefError:Eo,wrapError:Ka,getDoc:xf,split:xs,extractFromDoc:Jo,fetchJSON:function(g){return fetch(g,{headers:{Accept:Yv},loadSpec:!0}).then(function(C){return C.text()}).then(function(C){return Hc.load(C)})},extract:Af,jsonPointerToArray:Of,unescapeJsonPointerToken:Zd});const Jr=Rf;function lo(g,C){if(!rS.test(g)){var w;if(!C)throw new Eo(Pe()(w="Tried to resolve a relative URL, without having a basePath. path: '".concat(g,"' basePath: '")).call(w,C,"'"));return ee.resolve(C,g)}return g}function Ka(g,C){var w,R;return w=g&&g.response&&g.response.body?Pe()(R="".concat(g.response.body.code," ")).call(R,g.response.body.message):g.message,new Eo("Could not resolve reference: ".concat(w),C,g)}function xs(g){return(g+"").split("#")}function Jo(g,C){var w=Is[g];if(w&&!Ni.isPromise(w))try{var R=Af(C,w);return X()(Ss().resolve(R),{__value:R})}catch(O){return Ss().reject(O)}return xf(g).then(function(O){return Af(C,O)})}function xf(g){var C=Is[g];return C?Ni.isPromise(C)?C:Ss().resolve(C):(Is[g]=Rf.fetchJSON(g).then(function(w){return Is[g]=w,w}),Is[g])}function Af(g,C){var w=Of(g);if(w.length<1)return C;var R=Ni.getIn(C,w);if(void 0===R)throw new Eo("Could not resolve pointer: ".concat(g," does not exist in document"),{pointer:g});return R}function Of(g){var C;if("string"!=typeof g)throw new TypeError("Expected a string, got a ".concat(re(g)));return"/"===g[0]&&(g=g.substr(1)),""===g?[]:pt()(C=g.split("/")).call(C,Zd)}function Zd(g){return"string"!=typeof g?g:new(Hv())("=".concat(g.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function Rr(g){var C,w=new(Hv())([["",g.replace(/~/g,"~0").replace(/\//g,"~1")]]);return bo()(C=w.toString()).call(C,1)}function kf(g,C){if(function(C){return!C||"/"===C||"#"===C}(C))return!0;var w=g.charAt(C.length),R=bo()(C).call(C,-1);return 0===g.indexOf(C)&&(!w||"/"===w||"#"===w)&&"#"!==R}var $v=m(36593),Jv=m.n($v);const Qv={key:"allOf",plugin:function(C,w,R,O,F){if(!F.meta||!F.meta.$$ref){var L=bo()(R).call(R,0,-1);if(!zv(L)){if(!Array.isArray(C)){var G=new TypeError("allOf must be an array");return G.fullPath=R,G}var te=!1,ne=F.value;if(L.forEach(function(_e){!ne||(ne=ne[_e])}),ne=V({},ne),!Jv()(ne)){delete ne.allOf;var ge,pe=[];return pe.push(O.replace(L,{})),C.forEach(function(_e,Te){if(!O.isObject(_e)){if(te)return null;te=!0;var Oe=new TypeError("Elements in allOf must be objects");return Oe.fullPath=R,pe.push(Oe)}pe.push(O.mergeDeep(L,_e));var We=function(g,C){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},R=w.specmap,O=w.getBaseUrlForNodePath,F=void 0===O?function(ne){var pe;return R.getContext(Pe()(pe=[]).call(pe,Go(C),Go(ne))).baseDoc}:O,L=w.targetKeys,G=void 0===L?["$ref","$$ref"]:L,te=[];return tS()(g).forEach(function(){if(Re()(G).call(G,this.key)&&"string"==typeof this.node){var pe=this.path,ge=Pe()(C).call(C,this.path),_e=Mf(this.node,F(pe));te.push(R.replace(ge,_e))}}),te}(_e,bo()(R).call(R,0,-1),{getBaseUrlForNodePath:function(Be){var _i;return O.getContext(Pe()(_i=[]).call(_i,Go(R),[Te],Go(Be))).baseDoc},specmap:O});pe.push.apply(pe,Go(We))}),pe.push(O.mergeDeep(L,ne)),ne.$$ref||pe.push(O.remove(Pe()(ge=[]).call(ge,L,"$$ref"))),pe}}}}},Zv={key:"parameters",plugin:function(C,w,R,O){if(Array.isArray(C)&&C.length){var F=X()([],C),L=bo()(R).call(R,0,-1),G=V({},Ni.getIn(O.spec,L));return C.forEach(function(te,ne){try{F[ne].default=O.parameterMacro(G,te)}catch(ge){var pe=new Error(ge);return pe.fullPath=R,pe}}),Ni.replace(R,F)}return Ni.replace(R,C)}},jl={key:"properties",plugin:function(C,w,R,O){var F=V({},C);for(var L in C)try{F[L].default=O.modelPropertyMacro(F[L])}catch(ne){var G=new Error(ne);return G.fullPath=R,G}return Ni.replace(R,F)}};var eh=function(){function g(C){ff(this,g),this.root=Ja(C||{})}return zc(g,[{key:"set",value:function(w,R){var O=this.getParent(w,!0);if(O){var F=w[w.length-1],L=O.children;L[F]?th(L[F],R,O):L[F]=Ja(R,O)}else th(this.root,R,null)}},{key:"get",value:function(w){if((w=w||[]).length<1)return this.root.value;for(var O,F,R=this.root,L=0;L<w.length&&(O=R.children)[F=w[L]];L+=1)R=O[F];return R&&R.protoValue}},{key:"getParent",value:function(w,R){return!w||w.length<1?null:w.length<2?this.root:bo()(w).call(w,0,-1).reduce(function(O,F){if(!O)return O;var L=O.children;return!L[F]&&R&&(L[F]=Ja(null,O)),L[F]},this.root)}}]),g}();function Ja(g,C){return th({children:{}},g,C)}function th(g,C,w){return g.value=C||{},g.protoValue=w?V(V({},w.protoValue),g.value):g.value,ot()(g.children).forEach(function(R){var O=g.children[R];g.children[R]=th(O,O.value,g)}),g}var iu=function(){},Za=function(){function g(C){var R,O,w=this;ff(this,g),X()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new eh,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:X()(Object.create(this),Ni,{getInstance:function(){return w}}),allowMetaPatches:!1},C),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=di()(R=pt()(O=this.plugins).call(O,this.wrapPlugin.bind(this))).call(R,Ni.isFunction),this.patches.push(Ni.add([],this.spec)),this.patches.push(Ni.context([],this.context)),this.updatePatches(this.patches)}return zc(g,[{key:"debug",value:function(w){if(this.debugLevel===w){for(var R,O=arguments.length,F=new Array(O>1?O-1:0),L=1;L<O;L++)F[L-1]=arguments[L];(R=console).log.apply(R,F)}}},{key:"verbose",value:function(w){if("verbose"===this.debugLevel){for(var R,O,F=arguments.length,L=new Array(F>1?F-1:0),G=1;G<F;G++)L[G-1]=arguments[G];(R=console).log.apply(R,Pe()(O=["[".concat(w,"]   ")]).call(O,L))}}},{key:"wrapPlugin",value:function(w,R){var L,te,ne,O=this.pathDiscriminator,F=null;return w[this.pluginProp]?(F=w,L=w[this.pluginProp]):Ni.isFunction(w)?L=w:Ni.isObject(w)&&(te=w,ne=function(ge,_e){return!Array.isArray(ge)||ge.every(function(Te,Oe){return Te===_e[Oe]})},L=De().mark(function pe(ge,_e){var Te,Oe,He,We,at,Be;return De().wrap(function(ni){for(;;)switch(ni.prev=ni.next){case 0:Be=function(Ki,ji,Pt){var xr,Nn,Dn,vi,Vn,Hn,Os,To,$l,Wf,Cb,ca,cr;return De().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(Ni.isObject(Ki)){ur.next=6;break}if(te.key!==ji[ji.length-1]){ur.next=4;break}return ur.next=4,te.plugin(Ki,te.key,ji,_e);case 4:ur.next=30;break;case 6:Nn=ji[xr=ji.length-1],Dn=ji.indexOf("properties"),vi="properties"===Nn&&xr===Dn,Vn=_e.allowMetaPatches&&Oe[Ki.$$ref],Hn=0,Os=ot()(Ki);case 12:if(!(Hn<Os.length)){ur.next=30;break}if($l=Ki[To=Os[Hn]],Wf=Pe()(ji).call(ji,To),Cb=Ni.isObject($l),ca=Ki.$$ref,Vn){ur.next=22;break}if(!Cb){ur.next=22;break}return _e.allowMetaPatches&&ca&&(Oe[ca]=!0),ur.delegateYield(Be($l,Wf,Pt),"t0",22);case 22:if(vi||To!==te.key){ur.next=27;break}if(cr=ne(O,ji),O&&!cr){ur.next=27;break}return ur.next=27,te.plugin($l,To,Wf,_e,Pt);case 27:Hn++,ur.next=12;break;case 30:case"end":return ur.stop()}},Te)},Te=De().mark(Be),Oe={},He=W(di()(ge).call(ge,Ni.isAdditiveMutation)),ni.prev=4,He.s();case 6:if((We=He.n()).done){ni.next=11;break}return ni.delegateYield(Be((at=We.value).value,at.path,at),"t0",9);case 9:ni.next=6;break;case 11:ni.next=16;break;case 13:ni.prev=13,ni.t1=ni.catch(4),He.e(ni.t1);case 16:return ni.prev=16,He.f(),ni.finish(16);case 19:case"end":return ni.stop()}},pe,null,[[4,13,16,19]])})),X()(L.bind(F),{pluginName:w.name||R,isGenerator:Ni.isGenerator(L)})}},{key:"nextPlugin",value:function(){var w,R=this;return Hd()(w=this.wrappedPlugins).call(w,function(O){return R.getMutationsForPlugin(O).length>0})}},{key:"nextPromisedPatch",value:function(){var w;if(this.promisedPatches.length>0)return Ss().race(pt()(w=this.promisedPatches).call(w,function(R){return R.value}))}},{key:"getPluginHistory",value:function(w){var R=this.constructor.getPluginName(w);return this.pluginHistory[R]||[]}},{key:"getPluginRunCount",value:function(w){return this.getPluginHistory(w).length}},{key:"getPluginHistoryTip",value:function(w){var R=this.getPluginHistory(w);return R&&R[R.length-1]||{}}},{key:"getPluginMutationIndex",value:function(w){var R=this.getPluginHistoryTip(w).mutationIndex;return"number"!=typeof R?-1:R}},{key:"updatePluginHistory",value:function(w,R){var O=this.constructor.getPluginName(w);this.pluginHistory[O]=this.pluginHistory[O]||[],this.pluginHistory[O].push(R)}},{key:"updatePatches",value:function(w){var R=this;Ni.normalizeArray(w).forEach(function(O){if(O instanceof Error)R.errors.push(O);else try{if(!Ni.isObject(O))return void R.debug("updatePatches","Got a non-object patch",O);if(R.showDebug&&R.allPatches.push(O),Ni.isPromise(O.value))return R.promisedPatches.push(O),void R.promisedPatchThen(O);if(Ni.isContextPatch(O))return void R.setContext(O.path,O.value);if(Ni.isMutation(O))return void R.updateMutations(O)}catch(F){console.error(F),R.errors.push(F)}})}},{key:"updateMutations",value:function(w){"object"===re(w.value)&&!Array.isArray(w.value)&&this.allowMetaPatches&&(w.value=V({},w.value));var R=Ni.applyPatch(this.state,w,{allowMetaPatches:this.allowMetaPatches});R&&(this.mutations.push(w),this.state=R)}},{key:"removePromisedPatch",value:function(w){var R,O=this.promisedPatches.indexOf(w);O<0?this.debug("Tried to remove a promisedPatch that isn't there!"):mf()(R=this.promisedPatches).call(R,O,1)}},{key:"promisedPatchThen",value:function(w){var R=this;return w.value=w.value.then(function(O){var F=V(V({},w),{},{value:O});R.removePromisedPatch(w),R.updatePatches(F)}).catch(function(O){R.removePromisedPatch(w),R.updatePatches(O)}),w.value}},{key:"getMutations",value:function(w,R){var O;return w=w||0,"number"!=typeof R&&(R=this.mutations.length),bo()(O=this.mutations).call(O,w,R)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(w){var R=this.getPluginMutationIndex(w);return this.getMutations(R+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(w){return Ni.getIn(this.state,w)}},{key:"_getContext",value:function(w){return this.contextTree.get(w)}},{key:"setContext",value:function(w,R){return this.contextTree.set(w,R)}},{key:"_hasRun",value:function(w){return this.getPluginRunCount(this.getCurrentPlugin())>(w||0)}},{key:"dispatch",value:function(){var G,w=this,R=this,O=this.nextPlugin();if(!O){var F=this.nextPromisedPatch();if(F)return F.then(function(){return w.dispatch()}).catch(function(){return w.dispatch()});var L={spec:this.state,errors:this.errors};return this.showDebug&&(L.patches=this.allPatches),Ss().resolve(L)}if(R.pluginCount=R.pluginCount||{},R.pluginCount[O]=(R.pluginCount[O]||0)+1,R.pluginCount[O]>100)return Ss().resolve({spec:R.state,errors:Pe()(G=R.errors).call(G,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(O!==this.currentPlugin&&this.promisedPatches.length){var te,ne=pt()(te=this.promisedPatches).call(te,function(_e){return _e.value});return Ss().all(pt()(ne).call(ne,function(_e){return _e.then(iu,iu)})).then(function(){return w.dispatch()})}return function(){R.currentPlugin=O;var _e=R.getCurrentMutations(),Te=R.mutations.length-1;try{if(O.isGenerator){var He,Oe=W(O(_e,R.getLib()));try{for(Oe.s();!(He=Oe.n()).done;)ge(He.value)}catch(Be){Oe.e(Be)}finally{Oe.f()}}else ge(O(_e,R.getLib()))}catch(Be){console.error(Be),ge([X()(Object.create(Be),{plugin:O})])}finally{R.updatePluginHistory(O,{mutationIndex:Te})}return R.dispatch()}();function ge(_e){_e&&(_e=Ni.fullyNormalizeArray(_e),R.updatePatches(_e,O))}}}],[{key:"getPluginName",value:function(w){return w.pluginName}},{key:"getPatchesOfType",value:function(w,R){return di()(w).call(w,R)}}]),g}(),sa={refs:Jr,allOf:Qv,parameters:Zv,properties:jl},eb=m(27954),nu=m.n(eb),ru=function(C){return String.prototype.toLowerCase.call(C)},qa=function(C){return C.replace(/[^\w]/gi,"_")};function aa(g){var C=g.openapi;return!!C&&oe()(C).call(C,"3")}function we(g,C){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",R=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},O=R.v2OperationIdCompatibilityMode;if(!g||"object"!==re(g))return null;var F=(g.operationId||"").replace(/\s/g,"");return F.length?qa(g.operationId):Pf(C,w,{v2OperationIdCompatibilityMode:O})}function Pf(g,C){var w,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},O=R.v2OperationIdCompatibilityMode;if(O){var F,L,G=Pe()(F="".concat(C.toLowerCase(),"_")).call(F,g).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(G=G||Pe()(L="".concat(g.substring(1),"_")).call(L,C)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return Pe()(w="".concat(ru(C))).call(w,qa(g))}function Wl(g,C){var w;return Pe()(w="".concat(ru(C),"-")).call(w,g)}function Lf(g,C,w){if(!g||"object"!==re(g)||!g.paths||"object"!==re(g.paths))return null;var R=g.paths;for(var O in R)for(var F in R[O])if("PARAMETERS"!==F.toUpperCase()){var L=R[O][F];if(L&&"object"===re(L)){var G={spec:g,pathName:O,method:F.toUpperCase(),operation:L},te=C(G);if(w&&te)return G}}}function ih(g){var C=g.spec,w=C.paths,R={};if(!w||C.$$normalized)return g;for(var O in w){var F=w[O];if(nu()(F)){var L=F.parameters,G=function(ge){var _e=F[ge];if(!nu()(_e))return"continue";var Te=we(_e,O,ge);if(Te){R[Te]?R[Te].push(_e):R[Te]=[_e];var Oe=R[Te];if(Oe.length>1)Oe.forEach(function(Nn,Dn){var vi;Nn.__originalOperationId=Nn.__originalOperationId||Nn.operationId,Nn.operationId=Pe()(vi="".concat(Te)).call(vi,Dn+1)});else if(void 0!==_e.operationId){var He=Oe[0];He.__originalOperationId=He.__originalOperationId||_e.operationId,He.operationId=Te}}if("parameters"!==ge){var We=[],at={};for(var Be in C)("produces"===Be||"consumes"===Be||"security"===Be)&&(at[Be]=C[Be],We.push(at));if(L&&(at.parameters=L,We.push(at)),We.length){var ni,_i=W(We);try{for(_i.s();!(ni=_i.n()).done;){var gn=ni.value;for(var Ki in gn)if(_e[Ki]){if("parameters"===Ki){var Pt,ji=W(gn[Ki]);try{var xr=function(){var Dn=Pt.value;_e[Ki].some(function(Vn){return Vn.name&&Vn.name===Dn.name||Vn.$ref&&Vn.$ref===Dn.$ref||Vn.$$ref&&Vn.$$ref===Dn.$$ref||Vn===Dn})||_e[Ki].push(Dn)};for(ji.s();!(Pt=ji.n()).done;)xr()}catch(Nn){ji.e(Nn)}finally{ji.f()}}}else _e[Ki]=gn[Ki]}}catch(Nn){_i.e(Nn)}finally{_i.f()}}}};for(var te in F)G(te)}}return C.$$normalized=!0,g}function nh(g){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=C.requestInterceptor,R=C.responseInterceptor,O=g.withCredentials?"include":"same-origin";return function(F){return g({url:F,loadSpec:!0,requestInterceptor:w,responseInterceptor:R,headers:{Accept:Yv},credentials:O}).then(function(L){return L.body})}}function cn(g){var w=g.spec,O=g.mode,F=g.allowMetaPatches,L=void 0===F||F,G=g.pathDiscriminator,te=g.modelPropertyMacro,ne=g.parameterMacro,pe=g.requestInterceptor,ge=g.responseInterceptor,_e=g.skipNormalization,Te=g.useCircularStructures,Oe=g.http,He=g.baseDoc;return He=He||g.url,Oe=g.fetch||Oe||xl,w?We(w):nh(Oe,{requestInterceptor:pe,responseInterceptor:ge})(He).then(We);function We(at){He&&(sa.refs.docCache[He]=at),sa.refs.fetchJSON=nh(Oe,{requestInterceptor:pe,responseInterceptor:ge});var Be=[sa.refs];return"function"==typeof ne&&Be.push(sa.parameters),"function"==typeof te&&Be.push(sa.properties),"strict"!==O&&Be.push(sa.allOf),function(g){return new Za(g).dispatch()}({spec:at,context:{baseDoc:He},plugins:Be,allowMetaPatches:L,pathDiscriminator:G,parameterMacro:ne,modelPropertyMacro:te,useCircularStructures:Te}).then(_e?function(){var _i=me(De().mark(function ni(gn){return De().wrap(function(ji){for(;;)switch(ji.prev=ji.next){case 0:return ji.abrupt("return",gn);case 1:case"end":return ji.stop()}},ni)}));return function(ni){return _i.apply(this,arguments)}}():ih)}}var ou=m(87578),Bn=m.n(ou);function su(){return su=me(De().mark(function g(C,w){var R,O,ge,_e,Te,Oe,He=arguments;return De().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return O=(R=He.length>2&&void 0!==He[2]?He[2]:{}).returnEntireTree,ge={pathDiscriminator:w,baseDoc:R.baseDoc,requestInterceptor:R.requestInterceptor,responseInterceptor:R.responseInterceptor,parameterMacro:R.parameterMacro,modelPropertyMacro:R.modelPropertyMacro,useCircularStructures:R.useCircularStructures},_e=ih({spec:C}),Te=_e.spec,at.next=6,cn(V(V({},ge),{},{spec:Te,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Oe=at.sent,!O&&Array.isArray(w)&&w.length&&(Oe.spec=Bn()(Oe.spec,w)||null),at.abrupt("return",Oe);case 9:case"end":return at.stop()}},g)})),su.apply(this,arguments)}var rh=function(){return null},Yl_mapTagOperations=function(g){var C=g.spec,w=g.cb,R=void 0===w?rh:w,O=g.defaultTag,F=void 0===O?"default":O,L=g.v2OperationIdCompatibilityMode,G={},te={};return Lf(C,function(ne){var pe=ne.pathName,ge=ne.method,_e=ne.operation,Te=_e.tags?function(C){return Array.isArray(C)?C:[C]}(_e.tags):[F];Te.forEach(function(Oe){if("string"==typeof Oe){te[Oe]=te[Oe]||{};var Be,He=te[Oe],We=we(_e,pe,ge,{v2OperationIdCompatibilityMode:L}),at=R({spec:C,pathName:pe,method:ge,operation:_e,operationId:We});if(G[We])G[We]+=1,He[Pe()(Be="".concat(We)).call(Be,G[We])]=at;else if(void 0!==He[We]){var _i,ni,gn=G[We]||1;G[We]=gn+1,He[Pe()(_i="".concat(We)).call(_i,G[We])]=at;var Ki=He[We];delete He[We],He[Pe()(ni="".concat(We)).call(ni,gn)]=Ki}else He[We]=at}})}),te},Yl_makeExecute=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(C){var w=C.pathName,R=C.method,O=C.operationId;return function(F){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},G=g.requestInterceptor,te=g.responseInterceptor,ne=g.userFetch;return g.execute(V({spec:g.spec,requestInterceptor:G,responseInterceptor:te,userFetch:ne,pathName:w,method:R,parameters:F,operationId:O},L))}}},Ff=m(93165);var nb=m(1794),rb=m.n(nb),ob=m(32946);const sb={body:function(g){g.req.body=g.value},header:function(g){var C=g.req,w=g.parameter,R=g.value;C.headers=C.headers||{},void 0!==R&&(C.headers[w.name]=R)},query:function(g){var C=g.req,w=g.value,R=g.parameter;if(C.query=C.query||{},!1===w&&"boolean"===R.type&&(w="false"),0===w&&["number","integer"].indexOf(R.type)>-1&&(w="0"),w)C.query[R.name]={collectionFormat:R.collectionFormat,value:w};else if(R.allowEmptyValue&&void 0!==w){var O=R.name;C.query[O]=C.query[O]||{},C.query[O].allowEmptyValue=!0}},path:function(g){var C=g.req,w=g.value;C.url=C.url.split("{".concat(g.parameter.name,"}")).join(encodeURIComponent(w))},formData:function(g){var C=g.req,w=g.value,R=g.parameter;(w||R.allowEmptyValue)&&(C.form=C.form||{},C.form[R.name]={value:w,allowEmptyValue:R.allowEmptyValue,collectionFormat:R.collectionFormat})}};function cu(g,C){return Re()(C).call(C,"application/json")?"string"==typeof g?g:ki()(g):g.toString()}function cS(g){var C=g.req,w=g.value,R=g.parameter,O=R.name,F=R.style,L=R.explode,G=R.content;if(G){var te=ot()(G)[0];C.url=C.url.split("{".concat(O,"}")).join(Ua(cu(w,te),{escape:!0}))}else{var ne=Gc({key:R.name,value:w,style:F||"simple",explode:L||!1,escape:!0});C.url=C.url.split("{".concat(O,"}")).join(ne)}}function uu(g){var C=g.req,w=g.value,R=g.parameter;if(C.query=C.query||{},R.content){var O=ot()(R.content)[0];C.query[R.name]=cu(w,O)}else if(!1===w&&(w="false"),0===w&&(w="0"),w)C.query[R.name]={value:w,serializationOption:{style:R.style,explode:R.explode,allowReserved:R.allowReserved}};else if(R.allowEmptyValue&&void 0!==w){var te=R.name;C.query[te]=C.query[te]||{},C.query[te].allowEmptyValue=!0}}var sh=["accept","authorization","content-type"];function Vf(g){var C=g.req,w=g.parameter,R=g.value;if(C.headers=C.headers||{},!(sh.indexOf(w.name.toLowerCase())>-1)){if(w.content){var O=ot()(w.content)[0];return void(C.headers[w.name]=cu(R,O))}void 0!==R&&(C.headers[w.name]=Gc({key:w.name,value:R,style:w.style||"simple",explode:void 0!==w.explode&&w.explode,escape:!1}))}}function Hf(g){var C=g.req,w=g.parameter,R=g.value;C.headers=C.headers||{};var O=re(R);if(w.content){var F,L=ot()(w.content)[0];C.headers.Cookie=Pe()(F="".concat(w.name,"=")).call(F,cu(R,L))}else if("undefined"!==O){var G="object"===O&&!Array.isArray(R)&&w.explode?"":"".concat(w.name,"=");C.headers.Cookie=G+Gc({key:w.name,value:R,escape:!1,style:w.style||"form",explode:void 0!==w.explode&&w.explode})}}var Uf=m(53112),As=m.n(Uf);var pb=["http","fetch","spec","operationId","pathName","method","parameters","securities"],Ir=function(C){return Array.isArray(C)?C:[]},Co=Uv("OperationNotFoundError",function(C,w,R){this.originalError=R,X()(this,w||{})}),gb={buildRequest:jf};function jf(g){var C,w,R=g.spec,O=g.operationId,F=g.responseContentType,L=g.scheme,G=g.requestInterceptor,te=g.responseInterceptor,ne=g.contextUrl,pe=g.userFetch,ge=g.server,_e=g.serverVariables,Te=g.http,Oe=g.parameters,He=g.parameterBuilders,We=aa(R);He||(He=We?s:sb);var Be={url:"",credentials:Te&&Te.withCredentials?"include":"same-origin",headers:{},cookies:{}};G&&(Be.requestInterceptor=G),te&&(Be.responseInterceptor=te),pe&&(Be.userFetch=pe);var _i=function(g,C){return g&&g.paths?function(g,C){return Lf(g,C,!0)||null}(g,function(w){var R=w.pathName,O=w.method,F=w.operation;if(!F||"object"!==re(F))return!1;var L=F.operationId;return[we(F,R,O),Wl(R,O),L].some(function(ne){return ne&&ne===C})}):null}(R,O);if(!_i)throw new Co("Operation ".concat(O," not found"));var ni=_i.operation,gn=void 0===ni?{}:ni,Ki=_i.method,ji=_i.pathName;if(Be.url+=lh({spec:R,scheme:L,contextUrl:ne,server:ge,serverVariables:_e,pathName:ji,method:Ki}),!O)return delete Be.cookies,Be;Be.url+=ji,Be.method="".concat(Ki).toUpperCase(),Oe=Oe||{};var Pt=R.paths[ji]||{};F&&(Be.headers.accept=F);var xr=function(C){var w={};C.forEach(function(O){w[O.in]||(w[O.in]={}),w[O.in][O.name]=O});var R=[];return ot()(w).forEach(function(O){ot()(w[O]).forEach(function(F){R.push(w[O][F])})}),R}(Pe()(C=Pe()(w=[]).call(w,Ir(gn.parameters))).call(C,Ir(Pt.parameters)));xr.forEach(function(vi){var Hn,Os,Vn=He[vi.in];if("body"===vi.in&&vi.schema&&vi.schema.properties&&(Hn=Oe),void 0===(Hn=vi&&vi.name&&Oe[vi.name]))Hn=vi&&vi.name&&Oe[Pe()(Os="".concat(vi.in,".")).call(Os,vi.name)];else if(function(C,w){return di()(w).call(w,function(R){return R.name===C})}(vi.name,xr).length>1){var To;console.warn(Pe()(To="Parameter '".concat(vi.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(To,vi.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==Hn){if(void 0!==vi.default&&void 0===Hn&&(Hn=vi.default),void 0===Hn&&vi.required&&!vi.allowEmptyValue)throw new Error("Required parameter ".concat(vi.name," is not provided"));if(We&&vi.schema&&"object"===vi.schema.type&&"string"==typeof Hn)try{Hn=JSON.parse(Hn)}catch($l){throw new Error("Could not parse object parameter value string as JSON")}Vn&&Vn({req:Be,parameter:vi,value:Hn,operation:gn,spec:R})}});var Nn=V(V({},g),{},{operation:gn});if((Be=We?function(g,C){var w=g.operation,R=g.requestBody,L=g.attachContentTypeForEmptyPayload,G=g.requestContentType;C=function(g){var C=g.request,w=g.securities,R=void 0===w?{}:w,O=g.operation,F=void 0===O?{}:O,L=g.spec,G=V({},C),te=R.authorized,ne=void 0===te?{}:te,pe=F.security||L.security||[],ge=ne&&!!ot()(ne).length,_e=Bn()(L,["components","securitySchemes"])||{};return G.headers=G.headers||{},G.query=G.query||{},ot()(R).length&&ge&&pe&&(!Array.isArray(F.security)||F.security.length)?(pe.forEach(function(Te){ot()(Te).forEach(function(Oe){var He=ne[Oe],We=_e[Oe];if(He){var at=He.value||He,Be=We.type;if(He)if("apiKey"===Be)"query"===We.in&&(G.query[We.name]=at),"header"===We.in&&(G.headers[We.name]=at),"cookie"===We.in&&(G.cookies[We.name]=at);else if("http"===Be){if(/^basic$/i.test(We.scheme)){var _i,ni=at.username||"",gn=at.password||"",Ki=As()(Pe()(_i="".concat(ni,":")).call(_i,gn));G.headers.Authorization="Basic ".concat(Ki)}/^bearer$/i.test(We.scheme)&&(G.headers.Authorization="Bearer ".concat(at))}else if("oauth2"===Be||"openIdConnect"===Be){var ji,Pt=He.token||{},Nn=Pt[We["x-tokenName"]||"access_token"],Dn=Pt.token_type;(!Dn||"bearer"===Dn.toLowerCase())&&(Dn="Bearer"),G.headers.Authorization=Pe()(ji="".concat(Dn," ")).call(ji,Nn)}}})}),G):C}({request:C,securities:g.securities,operation:w,spec:g.spec});var te=w.requestBody||{},ne=ot()(te.content||{}),pe=G&&ne.indexOf(G)>-1;if(R||L){if(G&&pe)C.headers["Content-Type"]=G;else if(!G){var ge=ne[0];ge&&(C.headers["Content-Type"]=ge,G=ge)}}else G&&pe&&(C.headers["Content-Type"]=G);if(!g.responseContentType&&w.responses){var _e,Te=di()(_e=Ot()(w.responses)).call(_e,function(He){var We=fe(He,2),Be=We[1],_i=parseInt(We[0],10);return _i>=200&&_i<300&&rb()(Be.content)}).reduce(function(He,We){var Be=fe(We,2)[1];return Pe()(He).call(He,ot()(Be.content))},[]);Te.length>0&&(C.headers.accept=Te.join(", "))}if(R)if(G){if(ne.indexOf(G)>-1)if("application/x-www-form-urlencoded"===G||"multipart/form-data"===G)if("object"===re(R)){var Oe=(te.content[G]||{}).encoding||{};C.form={},ot()(R).forEach(function(He){C.form[He]={value:R[He],encoding:Oe[He]||{}}})}else C.form=R;else C.body=R}else C.body=R;return C}(Nn,Be):function(g,C){var te,ne,w=g.spec,R=g.operation,F=g.requestContentType,L=g.responseContentType,G=g.attachContentTypeForEmptyPayload;if(C=function(g){var C=g.request,w=g.securities,R=void 0===w?{}:w,O=g.operation,F=void 0===O?{}:O,L=g.spec,G=V({},C),te=R.authorized,ne=void 0===te?{}:te,pe=R.specSecurity,_e=F.security||(void 0===pe?[]:pe),Te=ne&&!!ot()(ne).length,Oe=L.securityDefinitions;return G.headers=G.headers||{},G.query=G.query||{},ot()(R).length&&Te&&_e&&(!Array.isArray(F.security)||F.security.length)?(_e.forEach(function(He){ot()(He).forEach(function(We){var at=ne[We];if(at){var Be=at.token,_i=at.value||at,ni=Oe[We],gn=ni.type,ji=Be&&Be[ni["x-tokenName"]||"access_token"],Pt=Be&&Be.token_type;if(at)if("apiKey"===gn){var xr="query"===ni.in?"query":"headers";G[xr]=G[xr]||{},G[xr][ni.name]=_i}else if("basic"===gn)if(_i.header)G.headers.authorization=_i.header;else{var Nn,Dn=_i.username||"",vi=_i.password||"";_i.base64=As()(Pe()(Nn="".concat(Dn,":")).call(Nn,vi)),G.headers.authorization="Basic ".concat(_i.base64)}else if("oauth2"===gn&&ji){var Vn;Pt=Pt&&"bearer"!==Pt.toLowerCase()?Pt:"Bearer",G.headers.authorization=Pe()(Vn="".concat(Pt," ")).call(Vn,ji)}}})}),G):C}({request:C,securities:g.securities,operation:R,spec:w}),C.body||C.form||G)if(F)C.headers["Content-Type"]=F;else if(Array.isArray(R.consumes)){var pe=fe(R.consumes,1);C.headers["Content-Type"]=pe[0]}else if(Array.isArray(w.consumes)){var ge=fe(w.consumes,1);C.headers["Content-Type"]=ge[0]}else R.parameters&&di()(te=R.parameters).call(te,function(We){return"file"===We.type}).length?C.headers["Content-Type"]="multipart/form-data":R.parameters&&di()(ne=R.parameters).call(ne,function(We){return"formData"===We.in}).length&&(C.headers["Content-Type"]="application/x-www-form-urlencoded");else if(F){var _e,Te,Oe=R.parameters&&di()(_e=R.parameters).call(_e,function(We){return"body"===We.in}).length>0,He=R.parameters&&di()(Te=R.parameters).call(Te,function(We){return"formData"===We.in}).length>0;(Oe||He)&&(C.headers["Content-Type"]=F)}return!L&&Array.isArray(R.produces)&&R.produces.length>0&&(C.headers.accept=R.produces.join(", ")),C}(Nn,Be)).cookies&&ot()(Be.cookies).length){var Dn=ot()(Be.cookies).reduce(function(vi,Vn){return vi+(vi?"&":"")+ob.serialize(Vn,Be.cookies[Vn])},"");Be.headers.Cookie=Dn}return Be.cookies&&delete Be.cookies,Vd(Be),Be}var ah=function(C){return C?C.replace(/\W/g,""):null};function lh(g){return aa(g.spec)?function(g){var C=g.spec,w=g.pathName,R=g.method,O=g.server,F=g.contextUrl,L=g.serverVariables,G=void 0===L?{}:L,te=Bn()(C,["paths",w,(R||"").toLowerCase(),"servers"])||Bn()(C,["paths",w,"servers"])||Bn()(C,["servers"]),ne="",pe=null;if(O&&te&&te.length){var ge=pt()(te).call(te,function(Oe){return Oe.url});ge.indexOf(O)>-1&&(ne=O,pe=te[ge.indexOf(O)])}if(!ne&&te&&te.length){ne=te[0].url;var _e=fe(te,1);pe=_e[0]}if(ne.indexOf("{")>-1){var Te=function(g){for(var R,C=[],w=/{([^}]+)}/g;R=w.exec(g);)C.push(R[1]);return C}(ne);Te.forEach(function(Oe){if(pe.variables&&pe.variables[Oe]){var We=G[Oe]||pe.variables[Oe].default,at=new RegExp("{".concat(Oe,"}"),"g");ne=ne.replace(at,We)}})}return function(){var G,te,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",w=ee.parse(g&&C?ee.resolve(C,g):g),R=ee.parse(C),O=ah(w.protocol)||ah(R.protocol)||"",F=w.host||R.host,L=w.pathname||"";return"/"===(G=O&&F?Pe()(te="".concat(O,"://")).call(te,F+L):L)[G.length-1]?bo()(G).call(G,0,-1):G}(ne,F)}(g):function(g){var pe,ge,C=g.spec,w=g.scheme,R=g.contextUrl,F=ee.parse(void 0===R?"":R),L=Array.isArray(C.schemes)?C.schemes[0]:null,G=w||L||ah(F.protocol)||"http",te=C.host||F.host||"",ne=C.basePath||"";return"/"===(pe=G&&te?Pe()(ge="".concat(G,"://")).call(ge,te+ne):ne)[pe.length-1]?bo()(pe).call(pe,0,-1):pe}(g)}function Sn(g){var C=this,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof g?w.url=g:w=g,!(this instanceof Sn))return new Sn(w);X()(this,w);var R=this.resolve().then(function(){return C.disableInterfaces||X()(C,Sn.makeApisTagOperation(C)),C});return R.client=this,R}Sn.makeHttp=function(g,C,w){return w=w||function(R){return R},C=C||function(R){return R},function(R){return"string"==typeof R&&(R={url:R}),wn.mergeInQueryOrForm(R),R=C(R),w(g(R))}}.bind(null,Sn.http=xl),Sn.resolve=cn,Sn.resolveSubtree=function(g,C){return su.apply(this,arguments)},Sn.execute=function(g){var C=g.http,w=g.fetch,R=g.spec,O=g.operationId,F=g.pathName,L=g.method,G=g.parameters,te=g.securities,ne=function(g,C){if(null==g)return{};var R,O,w=function(g,C){if(null==g)return{};var O,F,w={},R=n(g);for(F=0;F<R.length;F++)O=R[F],!(Ff(C).call(C,O)>=0)&&(w[O]=g[O]);return w}(g,C);if(l){var F=l(g);for(O=0;O<F.length;O++)R=F[O],!(Ff(C).call(C,R)>=0)&&(!Object.prototype.propertyIsEnumerable.call(g,R)||(w[R]=g[R]))}return w}(g,pb),pe=C||w||xl;F&&L&&!O&&(O=Wl(F,L));var ge=gb.buildRequest(V({spec:R,operationId:O,parameters:G,securities:te,http:pe},ne));return ge.body&&(rb()(ge.body)||Array.isArray(ge.body))&&(ge.body=ki()(ge.body)),pe(ge)},Sn.serializeRes=jc,Sn.serializeHeaders=hf,Sn.clearCache=function(){sa.refs.clearCache()},Sn.makeApisTagOperation=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=Yl_makeExecute(g);return{apis:Yl_mapTagOperations({v2OperationIdCompatibilityMode:g.v2OperationIdCompatibilityMode,spec:g.spec,cb:C})}},Sn.buildRequest=jf,Sn.helpers={opId:we},Sn.getBaseUrl=lh,(Sn.prototype={http:xl,execute:function(C){return this.applyDefaults(),Sn.execute(V({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},C))},resolve:function(){var C=this,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Sn.resolve(V({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},w)).then(function(R){return C.originalSpec=C.spec,C.spec=R.spec,C.errors=R.errors,C})}}).applyDefaults=function(){var C=this.spec,w=this.url;if(w&&oe()(w).call(w,"http")){var R=ee.parse(w);C.host||(C.host=R.host),C.schemes||(C.schemes=[R.protocol.replace(":","")]),C.basePath||(C.basePath="/")}};var Eb=Sn.helpers;const Kl=Sn},83082:T=>{"use strict";var I=String.prototype.replace,m=/%20/g;T.exports={default:"RFC3986",formatters:{RFC1738:function(S){return I.call(S,m,"+")},RFC3986:function(S){return String(S)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},9325:(T,I,m)=>{"use strict";var y=m(51641),S=m(48185),s=m(83082);T.exports={formats:s,parse:S,stringify:y}},48185:(T,I,m)=>{"use strict";var y=m(29499),S=Object.prototype.hasOwnProperty,s=Array.isArray,n={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:y.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},u=function(U,V){return U&&"string"==typeof U&&V.comma&&U.indexOf(",")>-1?U.split(","):U},k=function(V,J,X,j){if(V){var oe=X.allowDots?V.replace(/\.([^.[]+)/g,"[$1]"):V,se=/(\[[^[\]]*])/g,Q=X.depth>0&&/(\[[^[\]]*])/.exec(oe),ce=Q?oe.slice(0,Q.index):oe,$=[];if(ce){if(!X.plainObjects&&S.call(Object.prototype,ce)&&!X.allowPrototypes)return;$.push(ce)}for(var Y=0;X.depth>0&&null!==(Q=se.exec(oe))&&Y<X.depth;){if(Y+=1,!X.plainObjects&&S.call(Object.prototype,Q[1].slice(1,-1))&&!X.allowPrototypes)return;$.push(Q[1])}return Q&&$.push("["+oe.slice(Q.index)+"]"),function(U,V,J,X){for(var j=X?V:u(V,J),oe=U.length-1;oe>=0;--oe){var ee,se=U[oe];if("[]"===se&&J.parseArrays)ee=[].concat(j);else{ee=J.plainObjects?Object.create(null):{};var Q="["===se.charAt(0)&&"]"===se.charAt(se.length-1)?se.slice(1,-1):se,ce=parseInt(Q,10);J.parseArrays||""!==Q?!isNaN(ce)&&se!==Q&&String(ce)===Q&&ce>=0&&J.parseArrays&&ce<=J.arrayLimit?(ee=[])[ce]=j:ee[Q]=j:ee={0:j}}j=ee}return j}($,J,X,j)}};T.exports=function(U,V){var J=function(V){if(!V)return n;if(null!=V.decoder&&"function"!=typeof V.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==V.charset&&"utf-8"!==V.charset&&"iso-8859-1"!==V.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===V.allowDots?n.allowDots:!!V.allowDots,allowPrototypes:"boolean"==typeof V.allowPrototypes?V.allowPrototypes:n.allowPrototypes,allowSparse:"boolean"==typeof V.allowSparse?V.allowSparse:n.allowSparse,arrayLimit:"number"==typeof V.arrayLimit?V.arrayLimit:n.arrayLimit,charset:void 0===V.charset?n.charset:V.charset,charsetSentinel:"boolean"==typeof V.charsetSentinel?V.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof V.comma?V.comma:n.comma,decoder:"function"==typeof V.decoder?V.decoder:n.decoder,delimiter:"string"==typeof V.delimiter||y.isRegExp(V.delimiter)?V.delimiter:n.delimiter,depth:"number"==typeof V.depth||!1===V.depth?+V.depth:n.depth,ignoreQueryPrefix:!0===V.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof V.interpretNumericEntities?V.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof V.parameterLimit?V.parameterLimit:n.parameterLimit,parseArrays:!1!==V.parseArrays,plainObjects:"boolean"==typeof V.plainObjects?V.plainObjects:n.plainObjects,strictNullHandling:"boolean"==typeof V.strictNullHandling?V.strictNullHandling:n.strictNullHandling}}(V);if(""===U||null==U)return J.plainObjects?Object.create(null):{};for(var X="string"==typeof U?function(V,J){var Q,X={},ee=(J.ignoreQueryPrefix?V.replace(/^\?/,""):V).split(J.delimiter,J.parameterLimit===1/0?void 0:J.parameterLimit),se=-1,ce=J.charset;if(J.charsetSentinel)for(Q=0;Q<ee.length;++Q)0===ee[Q].indexOf("utf8=")&&("utf8=%E2%9C%93"===ee[Q]?ce="utf-8":"utf8=%26%2310003%3B"===ee[Q]&&(ce="iso-8859-1"),se=Q,Q=ee.length);for(Q=0;Q<ee.length;++Q)if(Q!==se){var ae,W,$=ee[Q],Y=$.indexOf("]="),P=-1===Y?$.indexOf("="):Y+1;-1===P?(ae=J.decoder($,n.decoder,ce,"key"),W=J.strictNullHandling?null:""):(ae=J.decoder($.slice(0,P),n.decoder,ce,"key"),W=y.maybeMap(u($.slice(P+1),J),function(q){return J.decoder(q,n.decoder,ce,"value")})),W&&J.interpretNumericEntities&&"iso-8859-1"===ce&&(W=W.replace(/&#(\d+);/g,function(V,J){return String.fromCharCode(parseInt(J,10))})),$.indexOf("[]=")>-1&&(W=s(W)?[W]:W),X[ae]=S.call(X,ae)?y.combine(X[ae],W):W}return X}(U,J):U,j=J.plainObjects?Object.create(null):{},oe=Object.keys(X),ee=0;ee<oe.length;++ee){var se=oe[ee],Q=k(se,X[se],J,"string"==typeof U);j=y.merge(j,Q,J)}return!0===J.allowSparse?j:y.compact(j)}},51641:(T,I,m)=>{"use strict";var y=m(69109),S=m(29499),s=m(83082),n=Object.prototype.hasOwnProperty,l={brackets:function(X){return X+"[]"},comma:"comma",indices:function(X,j){return X+"["+j+"]"},repeat:function(X){return X}},u=Array.isArray,h=Array.prototype.push,_=function(J,X){h.apply(J,u(X)?X:[X])},b=Date.prototype.toISOString,M=s.default,k={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:S.encode,encodeValuesOnly:!1,format:M,formatter:s.formatters[M],indices:!1,serializeDate:function(X){return b.call(X)},skipNulls:!1,strictNullHandling:!1},U=function J(X,j,oe,ee,se,Q,ce,$,Y,P,ae,W,q,re,ie){var be=X;if(ie.has(X))throw new RangeError("Cyclic object value");if("function"==typeof ce?be=ce(j,be):be instanceof Date?be=P(be):"comma"===oe&&u(be)&&(be=S.maybeMap(be,function(ke){return ke instanceof Date?P(ke):ke})),null===be){if(ee)return Q&&!q?Q(j,k.encoder,re,"key",ae):j;be=""}if(function(X){return"string"==typeof X||"number"==typeof X||"boolean"==typeof X||"symbol"==typeof X||"bigint"==typeof X}(be)||S.isBuffer(be))return Q?[W(q?j:Q(j,k.encoder,re,"key",ae))+"="+W(Q(be,k.encoder,re,"value",ae))]:[W(j)+"="+W(String(be))];var Se,fe=[];if(void 0===be)return fe;if("comma"===oe&&u(be))Se=[{value:be.length>0?be.join(",")||null:void 0}];else if(u(ce))Se=ce;else{var ve=Object.keys(be);Se=$?ve.sort($):ve}for(var me=0;me<Se.length;++me){var Ie=Se[me],De="object"==typeof Ie&&void 0!==Ie.value?Ie.value:be[Ie];if(!se||null!==De){var xe=u(be)?"function"==typeof oe?oe(j,Ie):j:j+(Y?"."+Ie:"["+Ie+"]");ie.set(X,!0);var Re=y();_(fe,J(De,xe,oe,ee,se,Q,ce,$,Y,P,ae,W,q,re,Re))}}return fe};T.exports=function(J,X){var ee,j=J,oe=function(X){if(!X)return k;if(null!=X.encoder&&"function"!=typeof X.encoder)throw new TypeError("Encoder has to be a function.");var j=X.charset||k.charset;if(void 0!==X.charset&&"utf-8"!==X.charset&&"iso-8859-1"!==X.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var oe=s.default;if(void 0!==X.format){if(!n.call(s.formatters,X.format))throw new TypeError("Unknown format option provided.");oe=X.format}var ee=s.formatters[oe],se=k.filter;return("function"==typeof X.filter||u(X.filter))&&(se=X.filter),{addQueryPrefix:"boolean"==typeof X.addQueryPrefix?X.addQueryPrefix:k.addQueryPrefix,allowDots:void 0===X.allowDots?k.allowDots:!!X.allowDots,charset:j,charsetSentinel:"boolean"==typeof X.charsetSentinel?X.charsetSentinel:k.charsetSentinel,delimiter:void 0===X.delimiter?k.delimiter:X.delimiter,encode:"boolean"==typeof X.encode?X.encode:k.encode,encoder:"function"==typeof X.encoder?X.encoder:k.encoder,encodeValuesOnly:"boolean"==typeof X.encodeValuesOnly?X.encodeValuesOnly:k.encodeValuesOnly,filter:se,format:oe,formatter:ee,serializeDate:"function"==typeof X.serializeDate?X.serializeDate:k.serializeDate,skipNulls:"boolean"==typeof X.skipNulls?X.skipNulls:k.skipNulls,sort:"function"==typeof X.sort?X.sort:null,strictNullHandling:"boolean"==typeof X.strictNullHandling?X.strictNullHandling:k.strictNullHandling}}(X);"function"==typeof oe.filter?j=(0,oe.filter)("",j):u(oe.filter)&&(ee=oe.filter);var Q=[];if("object"!=typeof j||null===j)return"";var $=l[X&&X.arrayFormat in l?X.arrayFormat:X&&"indices"in X?X.indices?"indices":"repeat":"indices"];ee||(ee=Object.keys(j)),oe.sort&&ee.sort(oe.sort);for(var Y=y(),P=0;P<ee.length;++P){var ae=ee[P];oe.skipNulls&&null===j[ae]||_(Q,U(j[ae],ae,$,oe.strictNullHandling,oe.skipNulls,oe.encode?oe.encoder:null,oe.filter,oe.sort,oe.allowDots,oe.serializeDate,oe.format,oe.formatter,oe.encodeValuesOnly,oe.charset,Y))}var W=Q.join(oe.delimiter),q=!0===oe.addQueryPrefix?"?":"";return oe.charsetSentinel&&(q+="iso-8859-1"===oe.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),W.length>0?q+W:""}},29499:(T,I,m)=>{"use strict";var y=m(83082),S=Object.prototype.hasOwnProperty,s=Array.isArray,n=function(){for(var X=[],j=0;j<256;++j)X.push("%"+((j<16?"0":"")+j.toString(16)).toUpperCase());return X}(),u=function(j,oe){for(var ee=oe&&oe.plainObjects?Object.create(null):{},se=0;se<j.length;++se)void 0!==j[se]&&(ee[se]=j[se]);return ee};T.exports={arrayToObject:u,assign:function(j,oe){return Object.keys(oe).reduce(function(ee,se){return ee[se]=oe[se],ee},j)},combine:function(j,oe){return[].concat(j,oe)},compact:function(j){for(var oe=[{obj:{o:j},prop:"o"}],ee=[],se=0;se<oe.length;++se)for(var Q=oe[se],ce=Q.obj[Q.prop],$=Object.keys(ce),Y=0;Y<$.length;++Y){var P=$[Y],ae=ce[P];"object"==typeof ae&&null!==ae&&-1===ee.indexOf(ae)&&(oe.push({obj:ce,prop:P}),ee.push(ae))}return function(j){for(;j.length>1;){var oe=j.pop(),ee=oe.obj[oe.prop];if(s(ee)){for(var se=[],Q=0;Q<ee.length;++Q)void 0!==ee[Q]&&se.push(ee[Q]);oe.obj[oe.prop]=se}}}(oe),j},decode:function(X,j,oe){var ee=X.replace(/\+/g," ");if("iso-8859-1"===oe)return ee.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ee)}catch(se){return ee}},encode:function(j,oe,ee,se,Q){if(0===j.length)return j;var ce=j;if("symbol"==typeof j?ce=Symbol.prototype.toString.call(j):"string"!=typeof j&&(ce=String(j)),"iso-8859-1"===ee)return escape(ce).replace(/%u[0-9a-f]{4}/gi,function(ae){return"%26%23"+parseInt(ae.slice(2),16)+"%3B"});for(var $="",Y=0;Y<ce.length;++Y){var P=ce.charCodeAt(Y);45===P||46===P||95===P||126===P||P>=48&&P<=57||P>=65&&P<=90||P>=97&&P<=122||Q===y.RFC1738&&(40===P||41===P)?$+=ce.charAt(Y):P<128?$+=n[P]:P<2048?$+=n[192|P>>6]+n[128|63&P]:P<55296||P>=57344?$+=n[224|P>>12]+n[128|P>>6&63]+n[128|63&P]:(P=65536+((1023&P)<<10|1023&ce.charCodeAt(Y+=1)),$+=n[240|P>>18]+n[128|P>>12&63]+n[128|P>>6&63]+n[128|63&P])}return $},isBuffer:function(j){return!(!j||"object"!=typeof j||!(j.constructor&&j.constructor.isBuffer&&j.constructor.isBuffer(j)))},isRegExp:function(j){return"[object RegExp]"===Object.prototype.toString.call(j)},maybeMap:function(j,oe){if(s(j)){for(var ee=[],se=0;se<j.length;se+=1)ee.push(oe(j[se]));return ee}return oe(j)},merge:function X(j,oe,ee){if(!oe)return j;if("object"!=typeof oe){if(s(j))j.push(oe);else{if(!j||"object"!=typeof j)return[j,oe];(ee&&(ee.plainObjects||ee.allowPrototypes)||!S.call(Object.prototype,oe))&&(j[oe]=!0)}return j}if(!j||"object"!=typeof j)return[j].concat(oe);var se=j;return s(j)&&!s(oe)&&(se=u(j,ee)),s(j)&&s(oe)?(oe.forEach(function(Q,ce){if(S.call(j,ce)){var $=j[ce];$&&"object"==typeof $&&Q&&"object"==typeof Q?j[ce]=X($,Q,ee):j.push(Q)}else j[ce]=Q}),j):Object.keys(oe).reduce(function(Q,ce){var $=oe[ce];return Q[ce]=S.call(Q,ce)?X(Q[ce],$,ee):$,Q},se)}}},86439:T=>{var I=T.exports=function(V){return new m(V)};function m(V){this.value=V}function y(V,J,X){var j=[],oe=[],ee=!0;return function se(Q){var ce=X?S(Q):Q,$={},Y=!0,P={node:ce,node_:Q,path:[].concat(j),parent:oe[oe.length-1],parents:oe,key:j.slice(-1)[0],isRoot:0===j.length,level:j.length,circular:null,update:function(q,re){P.isRoot||(P.parent.node[P.key]=q),P.node=q,re&&(Y=!1)},delete:function(q){delete P.parent.node[P.key],q&&(Y=!1)},remove:function(q){k(P.parent.node)?P.parent.node.splice(P.key,1):delete P.parent.node[P.key],q&&(Y=!1)},keys:null,before:function(q){$.before=q},after:function(q){$.after=q},pre:function(q){$.pre=q},post:function(q){$.post=q},stop:function(){ee=!1},block:function(){Y=!1}};if(!ee)return P;function ae(){if("object"==typeof P.node&&null!==P.node){(!P.keys||P.node_!==P.node)&&(P.keys=s(P.node)),P.isLeaf=0==P.keys.length;for(var q=0;q<oe.length;q++)if(oe[q].node_===Q){P.circular=oe[q];break}}else P.isLeaf=!0,P.keys=null;P.notLeaf=!P.isLeaf,P.notRoot=!P.isRoot}ae();var W=J.call(P,P.node);return void 0!==W&&P.update&&P.update(W),$.before&&$.before.call(P,P.node),Y&&("object"==typeof P.node&&null!==P.node&&!P.circular&&(oe.push(P),ae(),H(P.keys,function(q,re){j.push(q),$.pre&&$.pre.call(P,P.node[q],q);var ie=se(P.node[q]);X&&U.call(P.node,q)&&(P.node[q]=ie.node),ie.isLast=re==P.keys.length-1,ie.isFirst=0==re,$.post&&$.post.call(P,ie),j.pop()}),oe.pop()),$.after&&$.after.call(P,P.node)),P}(V).node}function S(V){if("object"==typeof V&&null!==V){var J;if(k(V))J=[];else if(function(V){return"[object Date]"===n(V)}(V))J=new Date(V.getTime?V.getTime():V);else if(function(V){return"[object RegExp]"===n(V)}(V))J=new RegExp(V);else if(function(V){return"[object Error]"===n(V)}(V))J={message:V.message};else if(function(V){return"[object Boolean]"===n(V)}(V))J=new Boolean(V);else if(function(V){return"[object Number]"===n(V)}(V))J=new Number(V);else if(function(V){return"[object String]"===n(V)}(V))J=new String(V);else if(Object.create&&Object.getPrototypeOf)J=Object.create(Object.getPrototypeOf(V));else if(V.constructor===Object)J={};else{var j=function(){};j.prototype=V.constructor&&V.constructor.prototype||V.__proto__||{},J=new j}return H(s(V),function(oe){J[oe]=V[oe]}),J}return V}m.prototype.get=function(V){for(var J=this.value,X=0;X<V.length;X++){var j=V[X];if(!J||!U.call(J,j)){J=void 0;break}J=J[j]}return J},m.prototype.has=function(V){for(var J=this.value,X=0;X<V.length;X++){var j=V[X];if(!J||!U.call(J,j))return!1;J=J[j]}return!0},m.prototype.set=function(V,J){for(var X=this.value,j=0;j<V.length-1;j++){var oe=V[j];U.call(X,oe)||(X[oe]={}),X=X[oe]}return X[V[j]]=J,J},m.prototype.map=function(V){return y(this.value,V,!0)},m.prototype.forEach=function(V){return this.value=y(this.value,V,!1),this.value},m.prototype.reduce=function(V,J){var X=1===arguments.length,j=X?this.value:J;return this.forEach(function(oe){(!this.isRoot||!X)&&(j=V.call(this,j,oe))}),j},m.prototype.paths=function(){var V=[];return this.forEach(function(J){V.push(this.path)}),V},m.prototype.nodes=function(){var V=[];return this.forEach(function(J){V.push(this.node)}),V},m.prototype.clone=function(){var V=[],J=[];return function X(j){for(var oe=0;oe<V.length;oe++)if(V[oe]===j)return J[oe];if("object"==typeof j&&null!==j){var ee=S(j);return V.push(j),J.push(ee),H(s(j),function(se){ee[se]=X(j[se])}),V.pop(),J.pop(),ee}return j}(this.value)};var s=Object.keys||function(J){var X=[];for(var j in J)X.push(j);return X};function n(V){return Object.prototype.toString.call(V)}var k=Array.isArray||function(J){return"[object Array]"===Object.prototype.toString.call(J)},H=function(V,J){if(V.forEach)return V.forEach(J);for(var X=0;X<V.length;X++)J(V[X],X,V)};H(s(m.prototype),function(V){I[V]=function(J){var X=[].slice.call(arguments,1),j=new m(J);return j[V].apply(j,X)}});var U=Object.hasOwnProperty||function(V,J){return J in V}},51397:function(T,I,m){var y;T=m.nmd(T),function(S){"object"==typeof global&&global;var u,h=2147483647,_=36,X=/^xn--/,j=/[^\x20-\x7E]/,oe=/[\x2E\u3002\uFF0E\uFF61]/g,ee={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Q=Math.floor,ce=String.fromCharCode;function Y(me){throw RangeError(ee[me])}function P(me,Ie){for(var De=me.length,xe=[];De--;)xe[De]=Ie(me[De]);return xe}function ae(me,Ie){var De=me.split("@"),xe="";return De.length>1&&(xe=De[0]+"@",me=De[1]),xe+P((me=me.replace(oe,".")).split("."),Ie).join(".")}function W(me){for(var Re,ke,Ie=[],De=0,xe=me.length;De<xe;)(Re=me.charCodeAt(De++))>=55296&&Re<=56319&&De<xe?56320==(64512&(ke=me.charCodeAt(De++)))?Ie.push(((1023&Re)<<10)+(1023&ke)+65536):(Ie.push(Re),De--):Ie.push(Re);return Ie}function q(me){return P(me,function(Ie){var De="";return Ie>65535&&(De+=ce((Ie-=65536)>>>10&1023|55296),Ie=56320|1023&Ie),De+ce(Ie)}).join("")}function re(me){return me-48<10?me-22:me-65<26?me-65:me-97<26?me-97:_}function ie(me,Ie){return me+22+75*(me<26)-((0!=Ie)<<5)}function be(me,Ie,De){var xe=0;for(me=De?Q(me/700):me>>1,me+=Q(me/Ie);me>455;xe+=_)me=Q(me/35);return Q(xe+36*me/(me+38))}function le(me){var xe,lt,Ct,ui,ki,ai,pt,Kt,ot,Hi,Ie=[],De=me.length,Re=0,ke=128,gt=72;for((lt=me.lastIndexOf("-"))<0&&(lt=0),Ct=0;Ct<lt;++Ct)me.charCodeAt(Ct)>=128&&Y("not-basic"),Ie.push(me.charCodeAt(Ct));for(ui=lt>0?lt+1:0;ui<De;){for(ki=Re,ai=1,pt=_;ui>=De&&Y("invalid-input"),((Kt=re(me.charCodeAt(ui++)))>=_||Kt>Q((h-Re)/ai))&&Y("overflow"),Re+=Kt*ai,!(Kt<(ot=pt<=gt?1:pt>=gt+26?26:pt-gt));pt+=_)ai>Q(h/(Hi=_-ot))&&Y("overflow"),ai*=Hi;gt=be(Re-ki,xe=Ie.length+1,0==ki),Q(Re/xe)>h-ke&&Y("overflow"),ke+=Q(Re/xe),Re%=xe,Ie.splice(Re++,0,ke)}return q(Ie)}function fe(me){var Ie,De,xe,Re,ke,gt,lt,Ct,ui,ki,ai,Kt,ot,Hi,Pe,pt=[];for(Kt=(me=W(me)).length,Ie=128,De=0,ke=72,gt=0;gt<Kt;++gt)(ai=me[gt])<128&&pt.push(ce(ai));for(xe=Re=pt.length,Re&&pt.push("-");xe<Kt;){for(lt=h,gt=0;gt<Kt;++gt)(ai=me[gt])>=Ie&&ai<lt&&(lt=ai);for(lt-Ie>Q((h-De)/(ot=xe+1))&&Y("overflow"),De+=(lt-Ie)*ot,Ie=lt,gt=0;gt<Kt;++gt)if((ai=me[gt])<Ie&&++De>h&&Y("overflow"),ai==Ie){for(Ct=De,ui=_;!(Ct<(ki=ui<=ke?1:ui>=ke+26?26:ui-ke));ui+=_)pt.push(ce(ie(ki+(Pe=Ct-ki)%(Hi=_-ki),0))),Ct=Q(Pe/Hi);pt.push(ce(ie(Ct,0))),ke=be(De,ot,xe==Re),De=0,++xe}++De,++Ie}return pt.join("")}u={version:"1.3.2",ucs2:{decode:W,encode:q},decode:le,encode:fe,toASCII:function(me){return ae(me,function(Ie){return j.test(Ie)?"xn--"+fe(Ie):Ie})},toUnicode:function(me){return ae(me,function(Ie){return X.test(Ie)?le(Ie.slice(4).toLowerCase()):Ie})}},void 0!==(y=function(){return u}.call(I,m,I,T))&&(T.exports=y)}()},23402:(T,I,m)=>{"use strict";var y=m(51397),S=m(70880);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}I.parse=ee,I.resolve=function($,Y){return ee($,!1,!0).resolve(Y)},I.resolveObject=function($,Y){return $?ee($,!1,!0).resolveObject(Y):Y},I.format=function($){return S.isString($)&&($=ee($)),$ instanceof s?$.format():s.prototype.format.call($)},I.Url=s;var n=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,_=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),b=["'"].concat(_),M=["%","/","?",";","#"].concat(b),k=["/","?","#"],U=/^[+a-z0-9A-Z_-]{0,63}$/,V=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,J={javascript:!0,"javascript:":!0},X={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},oe=m(89069);function ee($,Y,P){if($&&S.isObject($)&&$ instanceof s)return $;var ae=new s;return ae.parse($,Y,P),ae}s.prototype.parse=function($,Y,P){if(!S.isString($))throw new TypeError("Parameter 'url' must be a string, not "+typeof $);var ae=$.indexOf("?"),W=-1!==ae&&ae<$.indexOf("#")?"?":"#",q=$.split(W);q[0]=q[0].replace(/\\/g,"/");var ie=$=q.join(W);if(ie=ie.trim(),!P&&1===$.split("#").length){var be=u.exec(ie);if(be)return this.path=ie,this.href=ie,this.pathname=be[1],be[2]?(this.search=be[2],this.query=Y?oe.parse(this.search.substr(1)):this.search.substr(1)):Y&&(this.search="",this.query={}),this}var le=n.exec(ie);if(le){var fe=(le=le[0]).toLowerCase();this.protocol=fe,ie=ie.substr(le.length)}if(P||le||ie.match(/^\/\/[^@\/]+@[^@\/]+/)){var Se="//"===ie.substr(0,2);Se&&(!le||!X[le])&&(ie=ie.substr(2),this.slashes=!0)}if(!X[le]&&(Se||le&&!j[le])){for(var ve=-1,me=0;me<k.length;me++)-1!==(Ie=ie.indexOf(k[me]))&&(-1===ve||Ie<ve)&&(ve=Ie);var De,xe;for(-1!==(xe=-1===ve?ie.lastIndexOf("@"):ie.lastIndexOf("@",ve))&&(De=ie.slice(0,xe),ie=ie.slice(xe+1),this.auth=decodeURIComponent(De)),ve=-1,me=0;me<M.length;me++){var Ie;-1!==(Ie=ie.indexOf(M[me]))&&(-1===ve||Ie<ve)&&(ve=Ie)}-1===ve&&(ve=ie.length),this.host=ie.slice(0,ve),ie=ie.slice(ve),this.parseHost(),this.hostname=this.hostname||"";var Re="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Re)for(var ke=this.hostname.split(/\./),gt=(me=0,ke.length);me<gt;me++){var lt=ke[me];if(lt&&!lt.match(U)){for(var Ct="",ui=0,ki=lt.length;ui<ki;ui++)lt.charCodeAt(ui)>127?Ct+="x":Ct+=lt[ui];if(!Ct.match(U)){var ai=ke.slice(0,me),pt=ke.slice(me+1),Kt=lt.match(V);Kt&&(ai.push(Kt[1]),pt.unshift(Kt[2])),pt.length&&(ie="/"+pt.join(".")+ie),this.hostname=ai.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Re||(this.hostname=y.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Re&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ie[0]&&(ie="/"+ie))}if(!J[fe])for(me=0,gt=b.length;me<gt;me++){var Pe=b[me];if(-1!==ie.indexOf(Pe)){var Zi=encodeURIComponent(Pe);Zi===Pe&&(Zi=escape(Pe)),ie=ie.split(Pe).join(Zi)}}var Ot=ie.indexOf("#");-1!==Ot&&(this.hash=ie.substr(Ot),ie=ie.slice(0,Ot));var Ui=ie.indexOf("?");return-1!==Ui?(this.search=ie.substr(Ui),this.query=ie.substr(Ui+1),Y&&(this.query=oe.parse(this.query)),ie=ie.slice(0,Ui)):Y&&(this.search="",this.query={}),ie&&(this.pathname=ie),j[fe]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},s.prototype.format=function(){var $=this.auth||"";$&&($=($=encodeURIComponent($)).replace(/%3A/i,":"),$+="@");var Y=this.protocol||"",P=this.pathname||"",ae=this.hash||"",W=!1,q="";this.host?W=$+this.host:this.hostname&&(W=$+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(W+=":"+this.port)),this.query&&S.isObject(this.query)&&Object.keys(this.query).length&&(q=oe.stringify(this.query));var re=this.search||q&&"?"+q||"";return Y&&":"!==Y.substr(-1)&&(Y+=":"),this.slashes||(!Y||j[Y])&&!1!==W?(W="//"+(W||""),P&&"/"!==P.charAt(0)&&(P="/"+P)):W||(W=""),ae&&"#"!==ae.charAt(0)&&(ae="#"+ae),re&&"?"!==re.charAt(0)&&(re="?"+re),Y+W+(P=P.replace(/[?#]/g,function(ie){return encodeURIComponent(ie)}))+(re=re.replace("#","%23"))+ae},s.prototype.resolve=function($){return this.resolveObject(ee($,!1,!0)).format()},s.prototype.resolveObject=function($){if(S.isString($)){var Y=new s;Y.parse($,!1,!0),$=Y}for(var P=new s,ae=Object.keys(this),W=0;W<ae.length;W++){var q=ae[W];P[q]=this[q]}if(P.hash=$.hash,""===$.href)return P.href=P.format(),P;if($.slashes&&!$.protocol){for(var re=Object.keys($),ie=0;ie<re.length;ie++){var be=re[ie];"protocol"!==be&&(P[be]=$[be])}return j[P.protocol]&&P.hostname&&!P.pathname&&(P.path=P.pathname="/"),P.href=P.format(),P}if($.protocol&&$.protocol!==P.protocol){if(!j[$.protocol]){for(var le=Object.keys($),fe=0;fe<le.length;fe++){var Se=le[fe];P[Se]=$[Se]}return P.href=P.format(),P}if(P.protocol=$.protocol,$.host||X[$.protocol])P.pathname=$.pathname;else{for(var gt=($.pathname||"").split("/");gt.length&&!($.host=gt.shift()););$.host||($.host=""),$.hostname||($.hostname=""),""!==gt[0]&&gt.unshift(""),gt.length<2&&gt.unshift(""),P.pathname=gt.join("/")}return P.search=$.search,P.query=$.query,P.host=$.host||"",P.auth=$.auth,P.hostname=$.hostname||$.host,P.port=$.port,(P.pathname||P.search)&&(P.path=(P.pathname||"")+(P.search||"")),P.slashes=P.slashes||$.slashes,P.href=P.format(),P}var Ie=P.pathname&&"/"===P.pathname.charAt(0),De=$.host||$.pathname&&"/"===$.pathname.charAt(0),xe=De||Ie||P.host&&$.pathname,Re=xe,ke=P.pathname&&P.pathname.split("/")||[],lt=(gt=$.pathname&&$.pathname.split("/")||[],P.protocol&&!j[P.protocol]);if(lt&&(P.hostname="",P.port=null,P.host&&(""===ke[0]?ke[0]=P.host:ke.unshift(P.host)),P.host="",$.protocol&&($.hostname=null,$.port=null,$.host&&(""===gt[0]?gt[0]=$.host:gt.unshift($.host)),$.host=null),xe=xe&&(""===gt[0]||""===ke[0])),De)P.host=$.host||""===$.host?$.host:P.host,P.hostname=$.hostname||""===$.hostname?$.hostname:P.hostname,P.search=$.search,P.query=$.query,ke=gt;else if(gt.length)ke||(ke=[]),ke.pop(),ke=ke.concat(gt),P.search=$.search,P.query=$.query;else if(!S.isNullOrUndefined($.search))return lt&&(P.hostname=P.host=ke.shift(),(Ct=!!(P.host&&P.host.indexOf("@")>0)&&P.host.split("@"))&&(P.auth=Ct.shift(),P.host=P.hostname=Ct.shift())),P.search=$.search,P.query=$.query,(!S.isNull(P.pathname)||!S.isNull(P.search))&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.href=P.format(),P;if(!ke.length)return P.pathname=null,P.path=P.search?"/"+P.search:null,P.href=P.format(),P;for(var ui=ke.slice(-1)[0],ki=(P.host||$.host||ke.length>1)&&("."===ui||".."===ui)||""===ui,ai=0,pt=ke.length;pt>=0;pt--)"."===(ui=ke[pt])?ke.splice(pt,1):".."===ui?(ke.splice(pt,1),ai++):ai&&(ke.splice(pt,1),ai--);if(!xe&&!Re)for(;ai--;ai)ke.unshift("..");xe&&""!==ke[0]&&(!ke[0]||"/"!==ke[0].charAt(0))&&ke.unshift(""),ki&&"/"!==ke.join("/").substr(-1)&&ke.push("");var Ct,Kt=""===ke[0]||ke[0]&&"/"===ke[0].charAt(0);return lt&&(P.hostname=P.host=Kt?"":ke.length?ke.shift():"",(Ct=!!(P.host&&P.host.indexOf("@")>0)&&P.host.split("@"))&&(P.auth=Ct.shift(),P.host=P.hostname=Ct.shift())),(xe=xe||P.host&&ke.length)&&!Kt&&ke.unshift(""),ke.length?P.pathname=ke.join("/"):(P.pathname=null,P.path=null),(!S.isNull(P.pathname)||!S.isNull(P.search))&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.auth=$.auth||P.auth,P.slashes=P.slashes||$.slashes,P.href=P.format(),P},s.prototype.parseHost=function(){var $=this.host,Y=l.exec($);Y&&(":"!==(Y=Y[0])&&(this.port=Y.substr(1)),$=$.substr(0,$.length-Y.length)),$&&(this.hostname=$)}},70880:T=>{"use strict";T.exports={isString:function(I){return"string"==typeof I},isObject:function(I){return"object"==typeof I&&null!==I},isNull:function(I){return null===I},isNullOrUndefined:function(I){return null==I}}},96553:()=>{}},T=>{T(T.s=97953)}]);