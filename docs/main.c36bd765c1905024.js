var s0=Object.defineProperty,o0=Object.defineProperties,r0=Object.getOwnPropertyDescriptors,Jb=Object.getOwnPropertySymbols,a0=Object.prototype.hasOwnProperty,l0=Object.prototype.propertyIsEnumerable,Zb=(li,ht,W)=>ht in li?s0(li,ht,{enumerable:!0,configurable:!0,writable:!0,value:W}):li[ht]=W,km=(li,ht)=>{for(var W in ht||(ht={}))a0.call(ht,W)&&Zb(li,W,ht[W]);if(Jb)for(var W of Jb(ht))l0.call(ht,W)&&Zb(li,W,ht[W]);return li},Lm=(li,ht)=>o0(li,r0(ht));(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{8017:(li,ht,W)=>{"use strict";W.d(ht,{d:()=>Se});var O=W(8306),y=W(8421);const{isArray:t}=Array;var n=W(515),a=W(5403),f=W(3269);var I=W(9646),Y=W(4128),ee=W(2076),_e=W(1005),De=W(8505),Ae=W(3900),Je=W(262),st=W(4004),Ge=W(3014),lt=W(1707);class Rt{constructor(dt,it){this.urL=dt,this.http=it,this.WasAlive=!1}download(){window.location.href="https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip"}IsAlive(){this.WasAlive=!1;var dt=this,it=(new Date).toISOString();return this.http.get(this.urL+`api/v1/Management/CurrentDate?${it}`,{responseType:"text"}).pipe((0,Je.K)(Pe=>(0,I.of)("")),(0,st.U)(Pe=>(null==Pe?void 0:Pe.length)>0&&(Date.parse(Pe),dt.WasAlive=!0,!0)))}LoadBlockContent(dt){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocksContent",{id:dt},{responseType:"text"}).pipe((0,st.U)(Pe=>null==Pe?void 0:Pe.toString()))}LoadBlocks(){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocks",null).pipe((0,st.U)(it=>it.map(Re=>{var ge=new Ge.q(Re);return ge.Source="LocalAPI",ge})))}SaveBlock(dt,it){return this.http.post(this.urL+"api/v1/BASave/SaveNewBlock",{b:dt,content:it},{responseType:"text"}).pipe((0,st.U)(Pe=>Number.parseInt(null==Pe?void 0:Pe.toString(),10)))}}var Wt=W(5e3),tt=W(520),Oe=W(2590);let Se=(()=>{class Qe{constructor(it,Pe){this.http=it,this.loadShowUsageService=Pe,this.settings=null,this.linksSwagger=[],this.demoBlocks=[],this.swaggersDict=new Map,this.customCategories="",this.LocalAPI=null,this.Init()}CreateLocalApis(it,Pe){return new Rt(Pe,it)}Init(){return function(...Qe){const dt=(0,f.jO)(Qe),it=function(Qe){return 1===Qe.length&&t(Qe[0])?Qe[0]:Qe}(Qe);return it.length?new O.y(Pe=>{let Re=it.map(()=>[]),ge=it.map(()=>!1);Pe.add(()=>{Re=ge=null});for(let se=0;!Pe.closed&&se<it.length;se++)(0,y.Xf)(it[se]).subscribe(new a.Q(Pe,at=>{if(Re[se].push(at),Re.every(Be=>Be.length)){const Be=Re.map(ze=>ze.shift());Pe.next(dt?dt(...Be):Be),Re.some((ze,St)=>!ze.length&&ge[St])&&Pe.complete()}},()=>{ge[se]=!0,!Re[se].length&&Pe.complete()}));return()=>{Re=ge=null}}):n.E}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks(),this.loadShowUsageService.getCustomCategories(),this.getLatestVersion()).pipe((0,_e.g)(1e3),(0,De.b)(([it,Pe,Re,ge,se])=>{this.settings=it,this.settings.latestVersion=se,this.linksSwagger=Pe,this.demoBlocks=Re.map(at=>{var Be=new Ge.q(at);return Be.Source="Demos",Be}),this.customCategories=ge,this.LocalAPI=this.CreateLocalApis(this.http,this.settings.localAPI),this.LocalAPI.IsAlive().subscribe(at=>{console.log("LocalAPI is alive",at)})}),(0,Ae.w)(()=>this.obtainSwaggers(this.linksSwagger)),(0,Ae.w)(()=>(0,I.of)("")))}obtainSwaggers(it){var Pe=it.map(ge=>this.LoadSwaggersFromUrl(ge));return(0,Y.D)(Pe)}LoadSwaggersFromUrl(it){var Pe=it.link,Re=it.id||it.link,ge=new lt.L(Pe);return(0,ee.D)(ge.ParseSwagger()).pipe((0,De.b)(at=>{console.log("swagger loaded:"+Pe,at),at.name=Re,this.swaggersDict.set(Pe,at)},at=>{console.error("swagger error:"+Pe,at)}))}getLatestVersion(){return this.http.get("https://ignatandrei.github.io/BlocklyAutomation/version.txt",{responseType:"text"}).pipe((0,Je.K)(it=>(console.error("error getting latest version",it),(0,I.of)("vcannot get latest version"))),(0,st.U)(it=>it.toString().trim().substr(1)))}getSettings(){var it=(new Date).toISOString();return this.http.get(`assets/settings.json?${it}`,{responseType:"text"}).pipe((0,st.U)(Pe=>JSON.parse(Pe)))}}return Qe.\u0275fac=function(it){return new(it||Qe)(Wt.LFG(tt.eN),Wt.LFG(Oe.F))},Qe.\u0275prov=Wt.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})()},3014:(li,ht,W)=>{"use strict";W.d(ht,{q:()=>O});class O{constructor(t={}){this.id="",this.description="",this.categories="",this.blocks="",this.Source="None",Object.assign(this,t)}}},926:(li,ht,W)=>{"use strict";W.d(ht,{v:()=>t});var O=W(7579),y=W(5e3);let t=(()=>{class e{constructor(){this.sendData=new O.x}receiveData(){return this.sendData.asObservable()}sendDataToServer(a,f){this.sendData.next([a,f])}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=y.Yz7({token:e,factory:e.\u0275fac}),e})()},7392:(li,ht,W)=>{"use strict";W.r(ht),W.d(ht,{DisplayBlocklyComponent:()=>ip});var O=W(5861),t=(W(4166),W(6279)),e=W(69);const n=[t.Events.VIEWPORT_CHANGE,t.Events.BLOCK_MOVE,t.Events.BLOCK_DELETE];class E{constructor(r){this.workspace_=r,this.width_=0,this.height_=0,this.top_=0,this.left_=0,this.lastScale_=1,this.cachedContentMetrics_=void 0}init(r){r=Number(r),this.padding_=isNaN(r)?10:r,this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"contentAreaHighlight"},null);const s=String(Math.random()).substring(2),o=t.utils.dom.createSvgElement(new t.utils.Svg("mask"),{id:"contentAreaHighlightMask"+s},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},o),this.rect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH,fill:"black"},o),this.background_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#contentAreaHighlightMask"+s+")"},this.svgGroup_),this.applyColor_();const l=this.workspace_.getMetricsManager();this.cachedContentMetrics_=l.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_);const h=l.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,h),this.svgGroup_.style.transition="opacity 0.25s";const _=this.workspace_.getParentSvg();_.firstChild?_.insertBefore(this.svgGroup_,_.firstChild):_.appendChild(this.svgGroup_),this.onChangeWrapper_=this.onChange_.bind(this),this.workspace_.addChangeListener(this.onChangeWrapper_)}dispose(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onChangeWrapper_&&t.unbindEvent_(this.onChangeWrapper_)}onChange_(r){if(r.type===t.Events.THEME_CHANGE)this.applyColor_();else if(-1!==n.indexOf(r.type)){const s=this.workspace_.getMetricsManager();r.type!==t.Events.VIEWPORT_CHANGE&&(this.cachedContentMetrics_=s.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_));const o=s.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,o)}else r.type===t.Events.BLOCK_DRAG&&this.handleBlockDrag_(r)}handleBlockDrag_(r){this.svgGroup_.setAttribute("opacity",r.isStart?"0":"1")}applyColor_(){const s=this.workspace_.getTheme().getComponentStyle("workspaceBackgroundColour")||"#ffffff",o=t.utils.colour.blend("#000",s,.1),l=t.utils.colour.blend("#fff",s,.1);this.background_.setAttribute("fill","#ffffff"===s||"#fff"===s?o:l)}resize_(r){const s=r.width?r.width+2*this.padding_:0,o=r.height?r.height+2*this.padding_:0;s!==this.width_&&(this.width_=s,this.rect_.setAttribute("width",s)),o!==this.height_&&(this.height_=o,this.rect_.setAttribute("height",o))}position_(r,s){const h=this.workspace_.scale,_=s.top+r.top*h- -this.workspace_.scrollY-this.padding_*h,C=s.left+r.left*h- -this.workspace_.scrollX-this.padding_*h;(_!==this.top_||C!==this.left_||this.lastScale_!==h)&&(this.top_=_,this.left_=C,this.lastScale_=h,this.rect_.setAttribute("transform","translate("+C+","+_+") scale("+h+")"))}}var I=W(3014),Y=W(1707),ee=W(697);const De="undefined"==typeof window?function(p){return p()}:window.requestAnimationFrame;function Ae(p,r,s){const o=s||(_=>Array.prototype.slice.call(_));let l=!1,h=[];return function(..._){h=o(_),l||(l=!0,De.call(window,()=>{l=!1,p.apply(r,h)}))}}const st=p=>"start"===p?"left":"end"===p?"right":"center",Ge=(p,r,s)=>"start"===p?r:"end"===p?s:(r+s)/2;function Rt(){}const Wt=function(){let p=0;return function(){return p++}}();function tt(p){return null==p}function Oe(p){if(Array.isArray&&Array.isArray(p))return!0;const r=Object.prototype.toString.call(p);return"[object"===r.substr(0,7)&&"Array]"===r.substr(-6)}function Se(p){return null!==p&&"[object Object]"===Object.prototype.toString.call(p)}const Qe=p=>("number"==typeof p||p instanceof Number)&&isFinite(+p);function dt(p,r){return Qe(p)?p:r}function it(p,r){return void 0===p?r:p}const Re=(p,r)=>"string"==typeof p&&p.endsWith("%")?parseFloat(p)/100*r:+p;function ge(p,r,s){if(p&&"function"==typeof p.call)return p.apply(s,r)}function se(p,r,s,o){let l,h,_;if(Oe(p))if(h=p.length,o)for(l=h-1;l>=0;l--)r.call(s,p[l],l);else for(l=0;l<h;l++)r.call(s,p[l],l);else if(Se(p))for(_=Object.keys(p),h=_.length,l=0;l<h;l++)r.call(s,p[_[l]],_[l])}function at(p,r){let s,o,l,h;if(!p||!r||p.length!==r.length)return!1;for(s=0,o=p.length;s<o;++s)if(l=p[s],h=r[s],l.datasetIndex!==h.datasetIndex||l.index!==h.index)return!1;return!0}function Be(p){if(Oe(p))return p.map(Be);if(Se(p)){const r=Object.create(null),s=Object.keys(p),o=s.length;let l=0;for(;l<o;++l)r[s[l]]=Be(p[s[l]]);return r}return p}function ze(p){return-1===["__proto__","prototype","constructor"].indexOf(p)}function St(p,r,s,o){if(!ze(p))return;const l=r[p],h=s[p];Se(l)&&Se(h)?wt(l,h,o):r[p]=Be(h)}function wt(p,r,s){const o=Oe(r)?r:[r],l=o.length;if(!Se(p))return p;const h=(s=s||{}).merger||St;for(let _=0;_<l;++_){if(!Se(r=o[_]))continue;const C=Object.keys(r);for(let D=0,L=C.length;D<L;++D)h(C[D],p,r,s)}return p}function At(p,r){return wt(p,r,{merger:$t})}function $t(p,r,s){if(!ze(p))return;const o=r[p],l=s[p];Se(o)&&Se(l)?At(o,l):Object.prototype.hasOwnProperty.call(r,p)||(r[p]=Be(l))}function pi(p,r){const s=p.indexOf(".",r);return-1===s?p.length:s}function Lt(p,r){if(""===r)return p;let s=0,o=pi(r,s);for(;p&&o>s;)p=p[r.substr(s,o-s)],s=o+1,o=pi(r,s);return p}function yi(p){return p.charAt(0).toUpperCase()+p.slice(1)}const Ce=p=>void 0!==p,vt=p=>"function"==typeof p,Ne=(p,r)=>{if(p.size!==r.size)return!1;for(const s of p)if(!r.has(s))return!1;return!0},de=Math.PI,Te=2*de,xt=Te+de,Kt=Number.POSITIVE_INFINITY,Ft=de/180,ke=de/2,We=de/4,_t=2*de/3,Ue=Math.log10,Ye=Math.sign;function et(p){const r=Math.round(p);p=Bt(p,r,p/1e3)?r:p;const s=Math.pow(10,Math.floor(Ue(p))),o=p/s;return(o<=1?1:o<=2?2:o<=5?5:10)*s}function Xe(p){return!isNaN(parseFloat(p))&&isFinite(p)}function Bt(p,r,s){return Math.abs(p-r)<s}function bi(p,r,s){let o,l,h;for(o=0,l=p.length;o<l;o++)h=p[o][s],isNaN(h)||(r.min=Math.min(r.min,h),r.max=Math.max(r.max,h))}function si(p){return p*(de/180)}function ni(p){return p*(180/de)}function sn(p){if(!Qe(p))return;let r=1,s=0;for(;Math.round(p*r)/r!==p;)r*=10,s++;return s}function xi(p,r){const s=r.x-p.x,o=r.y-p.y,l=Math.sqrt(s*s+o*o);let h=Math.atan2(o,s);return h<-.5*de&&(h+=Te),{angle:h,distance:l}}function Ln(p,r){return Math.sqrt(Math.pow(r.x-p.x,2)+Math.pow(r.y-p.y,2))}function Vi(p,r){return(p-r+xt)%Te-de}function Ni(p){return(p%Te+Te)%Te}function Zi(p,r,s,o){const l=Ni(p),h=Ni(r),_=Ni(s),C=Ni(h-l),D=Ni(_-l),L=Ni(l-h),U=Ni(l-_);return l===h||l===_||o&&h===_||C>D&&L<U}function Mi(p,r,s){return Math.max(r,Math.min(s,p))}function $i(p,r,s,o=1e-6){return p>=Math.min(r,s)-o&&p<=Math.max(r,s)+o}const Tn=p=>0===p||1===p,jt=(p,r,s)=>-Math.pow(2,10*(p-=1))*Math.sin((p-r)*Te/s),qe=(p,r,s)=>Math.pow(2,-10*p)*Math.sin((p-r)*Te/s)+1,be={linear:p=>p,easeInQuad:p=>p*p,easeOutQuad:p=>-p*(p-2),easeInOutQuad:p=>(p/=.5)<1?.5*p*p:-.5*(--p*(p-2)-1),easeInCubic:p=>p*p*p,easeOutCubic:p=>(p-=1)*p*p+1,easeInOutCubic:p=>(p/=.5)<1?.5*p*p*p:.5*((p-=2)*p*p+2),easeInQuart:p=>p*p*p*p,easeOutQuart:p=>-((p-=1)*p*p*p-1),easeInOutQuart:p=>(p/=.5)<1?.5*p*p*p*p:-.5*((p-=2)*p*p*p-2),easeInQuint:p=>p*p*p*p*p,easeOutQuint:p=>(p-=1)*p*p*p*p+1,easeInOutQuint:p=>(p/=.5)<1?.5*p*p*p*p*p:.5*((p-=2)*p*p*p*p+2),easeInSine:p=>1-Math.cos(p*ke),easeOutSine:p=>Math.sin(p*ke),easeInOutSine:p=>-.5*(Math.cos(de*p)-1),easeInExpo:p=>0===p?0:Math.pow(2,10*(p-1)),easeOutExpo:p=>1===p?1:1-Math.pow(2,-10*p),easeInOutExpo:p=>Tn(p)?p:p<.5?.5*Math.pow(2,10*(2*p-1)):.5*(2-Math.pow(2,-10*(2*p-1))),easeInCirc:p=>p>=1?p:-(Math.sqrt(1-p*p)-1),easeOutCirc:p=>Math.sqrt(1-(p-=1)*p),easeInOutCirc:p=>(p/=.5)<1?-.5*(Math.sqrt(1-p*p)-1):.5*(Math.sqrt(1-(p-=2)*p)+1),easeInElastic:p=>Tn(p)?p:jt(p,.075,.3),easeOutElastic:p=>Tn(p)?p:qe(p,.075,.3),easeInOutElastic(p){const r=.1125;return Tn(p)?p:p<.5?.5*jt(2*p,r,.45):.5+.5*qe(2*p-1,r,.45)},easeInBack(p){const r=1.70158;return p*p*((r+1)*p-r)},easeOutBack(p){const r=1.70158;return(p-=1)*p*((r+1)*p+r)+1},easeInOutBack(p){let r=1.70158;return(p/=.5)<1?p*p*((1+(r*=1.525))*p-r)*.5:.5*((p-=2)*p*((1+(r*=1.525))*p+r)+2)},easeInBounce:p=>1-be.easeOutBounce(1-p),easeOutBounce(p){const r=7.5625,s=2.75;return p<1/s?r*p*p:p<2/s?r*(p-=1.5/s)*p+.75:p<2.5/s?r*(p-=2.25/s)*p+.9375:r*(p-=2.625/s)*p+.984375},easeInOutBounce:p=>p<.5?.5*be.easeInBounce(2*p):.5*be.easeOutBounce(2*p-1)+.5},te={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},me="0123456789ABCDEF",Ke=p=>me[15&p],yt=p=>me[(240&p)>>4]+me[15&p],Si=p=>(240&p)>>4==(15&p);function Gt(p){return p+.5|0}const Mt=(p,r,s)=>Math.max(Math.min(p,s),r);function ut(p){return Mt(Gt(2.55*p),0,255)}function Ut(p){return Mt(Gt(255*p),0,255)}function ui(p){return Mt(Gt(p/2.55)/100,0,1)}function Yi(p){return Mt(Gt(100*p),0,100)}const un=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Ls=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function js(p,r,s){const o=r*Math.min(s,1-s),l=(h,_=(h+p/30)%12)=>s-o*Math.max(Math.min(_-3,9-_,1),-1);return[l(0),l(8),l(4)]}function Co(p,r,s){const o=(l,h=(l+p/60)%6)=>s-s*r*Math.max(Math.min(h,4-h,1),0);return[o(5),o(3),o(1)]}function Ms(p,r,s){const o=js(p,1,.5);let l;for(r+s>1&&(l=1/(r+s),r*=l,s*=l),l=0;l<3;l++)o[l]*=1-r-s,o[l]+=r;return o}function Jn(p){const s=p.r/255,o=p.g/255,l=p.b/255,h=Math.max(s,o,l),_=Math.min(s,o,l),C=(h+_)/2;let D,L,U;return h!==_&&(U=h-_,L=C>.5?U/(2-h-_):U/(h+_),D=h===s?(o-l)/U+(o<l?6:0):h===o?(l-s)/U+2:(s-o)/U+4,D=60*D+.5),[0|D,L||0,C]}function _o(p,r,s,o){return(Array.isArray(r)?p(r[0],r[1],r[2]):p(r,s,o)).map(Ut)}function Pn(p,r,s){return _o(js,p,r,s)}function Wn(p){return(p%360+360)%360}const Ss={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ss={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let ln;function Le(p,r,s){if(p){let o=Jn(p);o[r]=Math.max(0,Math.min(o[r]+o[r]*s,0===r?360:1)),o=Pn(o),p.r=o[0],p.g=o[1],p.b=o[2]}}function pt(p,r){return p&&Object.assign(r||{},p)}function ri(p){var r={r:0,g:0,b:0,a:255};return Array.isArray(p)?p.length>=3&&(r={r:p[0],g:p[1],b:p[2],a:255},p.length>3&&(r.a=Ut(p[3]))):(r=pt(p,{r:0,g:0,b:0,a:1})).a=Ut(r.a),r}function Di(p){return"r"===p.charAt(0)?function(p){const r=un.exec(p);let o,l,h,s=255;if(r){if(r[7]!==o){const _=+r[7];s=255&(r[8]?ut(_):255*_)}return o=+r[1],l=+r[3],h=+r[5],o=255&(r[2]?ut(o):o),l=255&(r[4]?ut(l):l),h=255&(r[6]?ut(h):h),{r:o,g:l,b:h,a:s}}}(p):function(p){const r=Ls.exec(p);let o,s=255;if(!r)return;r[5]!==o&&(s=r[6]?ut(+r[5]):Ut(+r[5]));const l=Wn(+r[2]),h=+r[3]/100,_=+r[4]/100;return o="hwb"===r[1]?function(p,r,s){return _o(Ms,p,r,s)}(l,h,_):"hsv"===r[1]?function(p,r,s){return _o(Co,p,r,s)}(l,h,_):Pn(l,h,_),{r:o[0],g:o[1],b:o[2],a:s}}(p)}class Ti{constructor(r){if(r instanceof Ti)return r;const s=typeof r;let o;"object"===s?o=ri(r):"string"===s&&(o=function(p){var s,r=p.length;return"#"===p[0]&&(4===r||5===r?s={r:255&17*te[p[1]],g:255&17*te[p[2]],b:255&17*te[p[3]],a:5===r?17*te[p[4]]:255}:(7===r||9===r)&&(s={r:te[p[1]]<<4|te[p[2]],g:te[p[3]]<<4|te[p[4]],b:te[p[5]]<<4|te[p[6]],a:9===r?te[p[7]]<<4|te[p[8]]:255})),s}(r)||function(p){ln||(ln=function(){const p={},r=Object.keys(ss),s=Object.keys(Ss);let o,l,h,_,C;for(o=0;o<r.length;o++){for(_=C=r[o],l=0;l<s.length;l++)h=s[l],C=C.replace(h,Ss[h]);h=parseInt(ss[_],16),p[C]=[h>>16&255,h>>8&255,255&h]}return p}(),ln.transparent=[0,0,0,0]);const r=ln[p.toLowerCase()];return r&&{r:r[0],g:r[1],b:r[2],a:4===r.length?r[3]:255}}(r)||Di(r)),this._rgb=o,this._valid=!!o}get valid(){return this._valid}get rgb(){var r=pt(this._rgb);return r&&(r.a=ui(r.a)),r}set rgb(r){this._rgb=ri(r)}rgbString(){return this._valid?(p=this._rgb)&&(p.a<255?`rgba(${p.r}, ${p.g}, ${p.b}, ${ui(p.a)})`:`rgb(${p.r}, ${p.g}, ${p.b})`):this._rgb;var p}hexString(){return this._valid?(r=function(p){return Si(p.r)&&Si(p.g)&&Si(p.b)&&Si(p.a)}(p=this._rgb)?Ke:yt,p&&"#"+r(p.r)+r(p.g)+r(p.b)+(p.a<255?r(p.a):"")):this._rgb;var p,r}hslString(){return this._valid?function(p){if(!p)return;const r=Jn(p),s=r[0],o=Yi(r[1]),l=Yi(r[2]);return p.a<255?`hsla(${s}, ${o}%, ${l}%, ${ui(p.a)})`:`hsl(${s}, ${o}%, ${l}%)`}(this._rgb):this._rgb}mix(r,s){const o=this;if(r){const l=o.rgb,h=r.rgb;let _;const C=s===_?.5:s,D=2*C-1,L=l.a-h.a,U=((D*L==-1?D:(D+L)/(1+D*L))+1)/2;_=1-U,l.r=255&U*l.r+_*h.r+.5,l.g=255&U*l.g+_*h.g+.5,l.b=255&U*l.b+_*h.b+.5,l.a=C*l.a+(1-C)*h.a,o.rgb=l}return o}clone(){return new Ti(this.rgb)}alpha(r){return this._rgb.a=Ut(r),this}clearer(r){return this._rgb.a*=1-r,this}greyscale(){const r=this._rgb,s=Gt(.3*r.r+.59*r.g+.11*r.b);return r.r=r.g=r.b=s,this}opaquer(r){return this._rgb.a*=1+r,this}negate(){const r=this._rgb;return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,this}lighten(r){return Le(this._rgb,2,r),this}darken(r){return Le(this._rgb,2,-r),this}saturate(r){return Le(this._rgb,1,r),this}desaturate(r){return Le(this._rgb,1,-r),this}rotate(r){return function(p,r){var s=Jn(p);s[0]=Wn(s[0]+r),s=Pn(s),p.r=s[0],p.g=s[1],p.b=s[2]}(this._rgb,r),this}}function Bn(p){return new Ti(p)}const En=p=>p instanceof CanvasGradient||p instanceof CanvasPattern;function Sn(p){return En(p)?p:Bn(p)}function dn(p){return En(p)?p:Bn(p).saturate(.5).darken(.1).hexString()}const Qs=Object.create(null),Eo=Object.create(null);function Bs(p,r){if(!r)return p;const s=r.split(".");for(let o=0,l=s.length;o<l;++o){const h=s[o];p=p[h]||(p[h]=Object.create(null))}return p}function Hs(p,r,s){return"string"==typeof r?wt(Bs(p,r),s):wt(Bs(p,""),r)}var Vn=new class{constructor(r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,o)=>dn(o.backgroundColor),this.hoverBorderColor=(s,o)=>dn(o.borderColor),this.hoverColor=(s,o)=>dn(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(r)}set(r,s){return Hs(this,r,s)}get(r){return Bs(this,r)}describe(r,s){return Hs(Eo,r,s)}override(r,s){return Hs(Qs,r,s)}route(r,s,o,l){const h=Bs(this,r),_=Bs(this,o),C="_"+s;Object.defineProperties(h,{[C]:{value:h[s],writable:!0},[s]:{enumerable:!0,get(){const D=this[C],L=_[l];return Se(D)?Object.assign({},L,D):it(D,L)},set(D){this[C]=D}}})}}({_scriptable:p=>!p.startsWith("on"),_indexable:p=>"events"!==p,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Rs(p,r,s,o,l){let h=r[l];return h||(h=r[l]=p.measureText(l).width,s.push(l)),h>o&&(o=h),o}function $o(p,r,s,o){let l=(o=o||{}).data=o.data||{},h=o.garbageCollect=o.garbageCollect||[];o.font!==r&&(l=o.data={},h=o.garbageCollect=[],o.font=r),p.save(),p.font=r;let _=0;const C=s.length;let D,L,U,Z,ue;for(D=0;D<C;D++)if(Z=s[D],null!=Z&&!0!==Oe(Z))_=Rs(p,l,h,_,Z);else if(Oe(Z))for(L=0,U=Z.length;L<U;L++)ue=Z[L],null!=ue&&!Oe(ue)&&(_=Rs(p,l,h,_,ue));p.restore();const we=h.length/2;if(we>s.length){for(D=0;D<we;D++)delete l[h[D]];h.splice(0,we)}return _}function Jo(p,r,s){const o=p.currentDevicePixelRatio,l=0!==s?Math.max(s/2,.5):0;return Math.round((r-l)*o)/o+l}function no(p,r){(r=r||p.getContext("2d")).save(),r.resetTransform(),r.clearRect(0,0,p.width,p.height),r.restore()}function $s(p,r,s,o){let l,h,_,C,D;const L=r.pointStyle,U=r.rotation,Z=r.radius;let ue=(U||0)*Ft;if(L&&"object"==typeof L&&(l=L.toString(),"[object HTMLImageElement]"===l||"[object HTMLCanvasElement]"===l))return p.save(),p.translate(s,o),p.rotate(ue),p.drawImage(L,-L.width/2,-L.height/2,L.width,L.height),void p.restore();if(!(isNaN(Z)||Z<=0)){switch(p.beginPath(),L){default:p.arc(s,o,Z,0,Te),p.closePath();break;case"triangle":p.moveTo(s+Math.sin(ue)*Z,o-Math.cos(ue)*Z),ue+=_t,p.lineTo(s+Math.sin(ue)*Z,o-Math.cos(ue)*Z),ue+=_t,p.lineTo(s+Math.sin(ue)*Z,o-Math.cos(ue)*Z),p.closePath();break;case"rectRounded":D=.516*Z,C=Z-D,h=Math.cos(ue+We)*C,_=Math.sin(ue+We)*C,p.arc(s-h,o-_,D,ue-de,ue-ke),p.arc(s+_,o-h,D,ue-ke,ue),p.arc(s+h,o+_,D,ue,ue+ke),p.arc(s-_,o+h,D,ue+ke,ue+de),p.closePath();break;case"rect":if(!U){C=Math.SQRT1_2*Z,p.rect(s-C,o-C,2*C,2*C);break}ue+=We;case"rectRot":h=Math.cos(ue)*Z,_=Math.sin(ue)*Z,p.moveTo(s-h,o-_),p.lineTo(s+_,o-h),p.lineTo(s+h,o+_),p.lineTo(s-_,o+h),p.closePath();break;case"crossRot":ue+=We;case"cross":h=Math.cos(ue)*Z,_=Math.sin(ue)*Z,p.moveTo(s-h,o-_),p.lineTo(s+h,o+_),p.moveTo(s+_,o-h),p.lineTo(s-_,o+h);break;case"star":h=Math.cos(ue)*Z,_=Math.sin(ue)*Z,p.moveTo(s-h,o-_),p.lineTo(s+h,o+_),p.moveTo(s+_,o-h),p.lineTo(s-_,o+h),ue+=We,h=Math.cos(ue)*Z,_=Math.sin(ue)*Z,p.moveTo(s-h,o-_),p.lineTo(s+h,o+_),p.moveTo(s+_,o-h),p.lineTo(s-_,o+h);break;case"line":h=Math.cos(ue)*Z,_=Math.sin(ue)*Z,p.moveTo(s-h,o-_),p.lineTo(s+h,o+_);break;case"dash":p.moveTo(s,o),p.lineTo(s+Math.cos(ue)*Z,o+Math.sin(ue)*Z)}p.fill(),r.borderWidth>0&&p.stroke()}}function vo(p,r,s){return s=s||.5,!r||p&&p.x>r.left-s&&p.x<r.right+s&&p.y>r.top-s&&p.y<r.bottom+s}function Js(p,r){p.save(),p.beginPath(),p.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),p.clip()}function ha(p){p.restore()}function Xr(p,r,s,o,l){if(!r)return p.lineTo(s.x,s.y);if("middle"===l){const h=(r.x+s.x)/2;p.lineTo(h,r.y),p.lineTo(h,s.y)}else"after"===l!=!!o?p.lineTo(r.x,s.y):p.lineTo(s.x,r.y);p.lineTo(s.x,s.y)}function Kr(p,r,s,o){if(!r)return p.lineTo(s.x,s.y);p.bezierCurveTo(o?r.cp1x:r.cp2x,o?r.cp1y:r.cp2y,o?s.cp2x:s.cp1x,o?s.cp2y:s.cp1y,s.x,s.y)}function bo(p,r,s,o,l,h={}){const _=Oe(r)?r:[r],C=h.strokeWidth>0&&""!==h.strokeColor;let D,L;for(p.save(),p.font=l.string,function(p,r){r.translation&&p.translate(r.translation[0],r.translation[1]),tt(r.rotation)||p.rotate(r.rotation),r.color&&(p.fillStyle=r.color),r.textAlign&&(p.textAlign=r.textAlign),r.textBaseline&&(p.textBaseline=r.textBaseline)}(p,h),D=0;D<_.length;++D)L=_[D],C&&(h.strokeColor&&(p.strokeStyle=h.strokeColor),tt(h.strokeWidth)||(p.lineWidth=h.strokeWidth),p.strokeText(L,s,o,h.maxWidth)),p.fillText(L,s,o,h.maxWidth),Ia(p,s,o,L,h),o+=l.lineHeight;p.restore()}function Ia(p,r,s,o,l){if(l.strikethrough||l.underline){const h=p.measureText(o),_=r-h.actualBoundingBoxLeft,C=r+h.actualBoundingBoxRight,D=s-h.actualBoundingBoxAscent,L=s+h.actualBoundingBoxDescent,U=l.strikethrough?(D+L)/2:L;p.strokeStyle=p.fillStyle,p.beginPath(),p.lineWidth=l.decorationWidth||2,p.moveTo(_,U),p.lineTo(C,U),p.stroke()}}function Tr(p,r){const{x:s,y:o,w:l,h,radius:_}=r;p.arc(s+_.topLeft,o+_.topLeft,_.topLeft,-ke,de,!0),p.lineTo(s,o+h-_.bottomLeft),p.arc(s+_.bottomLeft,o+h-_.bottomLeft,_.bottomLeft,de,ke,!0),p.lineTo(s+l-_.bottomRight,o+h),p.arc(s+l-_.bottomRight,o+h-_.bottomRight,_.bottomRight,ke,0,!0),p.lineTo(s+l,o+_.topRight),p.arc(s+l-_.topRight,o+_.topRight,_.topRight,0,-ke,!0),p.lineTo(s+_.topLeft,o)}const Aa=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Oa=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function gr(p,r){const s=(""+p).match(Aa);if(!s||"normal"===s[1])return 1.2*r;switch(p=+s[2],s[3]){case"px":return p;case"%":p/=100}return r*p}const Wa=p=>+p||0;function $r(p,r){const s={},o=Se(r),l=o?Object.keys(r):r,h=Se(p)?o?_=>it(p[_],p[r[_]]):_=>p[_]:()=>p;for(const _ of l)s[_]=Wa(h(_));return s}function Jr(p){return $r(p,{top:"y",right:"x",bottom:"y",left:"x"})}function ao(p){return $r(p,["topLeft","topRight","bottomLeft","bottomRight"])}function ys(p){const r=Jr(p);return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Vs(p,r){let s=it((p=p||{}).size,(r=r||Vn.font).size);"string"==typeof s&&(s=parseInt(s,10));let o=it(p.style,r.style);o&&!(""+o).match(Oa)&&(console.warn('Invalid font style specified: "'+o+'"'),o="");const l={family:it(p.family,r.family),lineHeight:gr(it(p.lineHeight,r.lineHeight),s),size:s,style:o,weight:it(p.weight,r.weight),string:""};return l.string=function(p){return!p||tt(p.size)||tt(p.family)?null:(p.style?p.style+" ":"")+(p.weight?p.weight+" ":"")+p.size+"px "+p.family}(l),l}function Ys(p,r,s,o){let h,_,C,l=!0;for(h=0,_=p.length;h<_;++h)if(C=p[h],void 0!==C&&(void 0!==r&&"function"==typeof C&&(C=C(r),l=!1),void 0!==s&&Oe(C)&&(C=C[s%C.length],l=!1),void 0!==C))return o&&!l&&(o.cacheable=!1),C}function lo(p,r){return Object.assign(Object.create(p),r)}function qo(p,r,s){s=s||(_=>p[_]<r);let h,o=p.length-1,l=0;for(;o-l>1;)h=l+o>>1,s(h)?l=h:o=h;return{lo:l,hi:o}}const co=(p,r,s)=>qo(p,s,o=>p[o][r]<s),so=(p,r,s)=>qo(p,s,o=>p[o][r]>=s),qr=["push","pop","shift","splice","unshift"];function wr(p,r){const s=p._chartjs;if(!s)return;const o=s.listeners,l=o.indexOf(r);-1!==l&&o.splice(l,1),!(o.length>0)&&(qr.forEach(h=>{delete p[h]}),delete p._chartjs)}function ps(p){const r=new Set;let s,o;for(s=0,o=p.length;s<o;++s)r.add(p[s]);return r.size===o?p:Array.from(r)}function lr(p,r=[""],s=p,o,l=(()=>p[0])){Ce(o)||(o=Tt("_fallback",p));const h={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:p,_rootScopes:s,_fallback:o,_getTarget:l,override:_=>lr([_,...p],r,s,o)};return new Proxy(h,{deleteProperty:(_,C)=>(delete _[C],delete _._keys,delete p[0][C],!0),get:(_,C)=>uo(_,C,()=>function(p,r,s,o){let l;for(const h of r)if(l=Tt(Ta(h,p),s),Ce(l))return ko(p,l)?z(s,o,p,l):l}(C,r,p,_)),getOwnPropertyDescriptor:(_,C)=>Reflect.getOwnPropertyDescriptor(_._scopes[0],C),getPrototypeOf:()=>Reflect.getPrototypeOf(p[0]),has:(_,C)=>Jt(_).includes(C),ownKeys:_=>Jt(_),set(_,C,D){const L=_._storage||(_._storage=l());return _[C]=L[C]=D,delete _._keys,!0}})}function ls(p,r,s,o){const l={_cacheable:!1,_proxy:p,_context:r,_subProxy:s,_stack:new Set,_descriptors:mr(p,o),setContext:h=>ls(p,h,s,o),override:h=>ls(p.override(h),r,s,o)};return new Proxy(l,{deleteProperty:(h,_)=>(delete h[_],delete p[_],!0),get:(h,_,C)=>uo(h,_,()=>function(p,r,s){const{_proxy:o,_context:l,_subProxy:h,_descriptors:_}=p;let C=o[r];return vt(C)&&_.isScriptable(r)&&(C=function(p,r,s,o){const{_proxy:l,_context:h,_subProxy:_,_stack:C}=s;if(C.has(p))throw new Error("Recursion detected: "+Array.from(C).join("->")+"->"+p);return C.add(p),r=r(h,_||o),C.delete(p),ko(p,r)&&(r=z(l._scopes,l,p,r)),r}(r,C,p,s)),Oe(C)&&C.length&&(C=function(p,r,s,o){const{_proxy:l,_context:h,_subProxy:_,_descriptors:C}=s;if(Ce(h.index)&&o(p))r=r[h.index%r.length];else if(Se(r[0])){const D=r,L=l._scopes.filter(U=>U!==D);r=[];for(const U of D){const Z=z(L,l,p,U);r.push(ls(Z,h,_&&_[p],C))}}return r}(r,C,p,_.isIndexable)),ko(r,C)&&(C=ls(C,l,h&&h[r],_)),C}(h,_,C)),getOwnPropertyDescriptor:(h,_)=>h._descriptors.allKeys?Reflect.has(p,_)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(p,_),getPrototypeOf:()=>Reflect.getPrototypeOf(p),has:(h,_)=>Reflect.has(p,_),ownKeys:()=>Reflect.ownKeys(p),set:(h,_,C)=>(p[_]=C,delete h[_],!0)})}function mr(p,r={scriptable:!0,indexable:!0}){const{_scriptable:s=r.scriptable,_indexable:o=r.indexable,_allKeys:l=r.allKeys}=p;return{allKeys:l,scriptable:s,indexable:o,isScriptable:vt(s)?s:()=>s,isIndexable:vt(o)?o:()=>o}}const Ta=(p,r)=>p?p+yi(r):r,ko=(p,r)=>Se(r)&&"adapters"!==p&&(null===Object.getPrototypeOf(r)||r.constructor===Object);function uo(p,r,s){if(Object.prototype.hasOwnProperty.call(p,r))return p[r];const o=s();return p[r]=o,o}function Sr(p,r,s){return vt(p)?p(r,s):p}const pa=(p,r)=>!0===p?r:"string"==typeof p?Lt(r,p):void 0;function ce(p,r,s,o,l){for(const h of r){const _=pa(s,h);if(_){p.add(_);const C=Sr(_._fallback,s,l);if(Ce(C)&&C!==s&&C!==o)return C}else if(!1===_&&Ce(o)&&s!==o)return null}return!1}function z(p,r,s,o){const l=r._rootScopes,h=Sr(r._fallback,s,o),_=[...p,...l],C=new Set;C.add(o);let D=P(C,_,s,h||s,o);return!(null===D||Ce(h)&&h!==s&&(D=P(C,_,h,D,o),null===D))&&lr(Array.from(C),[""],l,h,()=>function(p,r,s){const o=p._getTarget();r in o||(o[r]={});const l=o[r];return Oe(l)&&Se(s)?s:l}(r,s,o))}function P(p,r,s,o,l){for(;s;)s=ce(p,r,s,o,l);return s}function Tt(p,r){for(const s of r){if(!s)continue;const o=s[p];if(Ce(o))return o}}function Jt(p){let r=p._keys;return r||(r=p._keys=function(p){const r=new Set;for(const s of p)for(const o of Object.keys(s).filter(l=>!l.startsWith("_")))r.add(o);return Array.from(r)}(p._scopes)),r}const Dn=Number.EPSILON||1e-14,es=(p,r)=>r<p.length&&!p[r].skip&&p[r],cs=p=>"x"===p?"y":"x";function os(p,r,s,o){const l=p.skip?r:p,h=r,_=s.skip?r:s,C=Ln(h,l),D=Ln(_,h);let L=C/(C+D),U=D/(C+D);L=isNaN(L)?0:L,U=isNaN(U)?0:U;const Z=o*L,ue=o*U;return{previous:{x:h.x-Z*(_.x-l.x),y:h.y-Z*(_.y-l.y)},next:{x:h.x+ue*(_.x-l.x),y:h.y+ue*(_.y-l.y)}}}function _n(p,r,s){return Math.max(Math.min(p,s),r)}function Or(p,r,s,o,l){let h,_,C,D;if(r.spanGaps&&(p=p.filter(L=>!L.skip)),"monotone"===r.cubicInterpolationMode)!function(p,r="x"){const s=cs(r),o=p.length,l=Array(o).fill(0),h=Array(o);let _,C,D,L=es(p,0);for(_=0;_<o;++_)if(C=D,D=L,L=es(p,_+1),D){if(L){const U=L[r]-D[r];l[_]=0!==U?(L[s]-D[s])/U:0}h[_]=C?L?Ye(l[_-1])!==Ye(l[_])?0:(l[_-1]+l[_])/2:l[_-1]:l[_]}(function(p,r,s){const o=p.length;let l,h,_,C,D,L=es(p,0);for(let U=0;U<o-1;++U)if(D=L,L=es(p,U+1),D&&L){if(Bt(r[U],0,Dn)){s[U]=s[U+1]=0;continue}l=s[U]/r[U],h=s[U+1]/r[U],C=Math.pow(l,2)+Math.pow(h,2),!(C<=9)&&(_=3/Math.sqrt(C),s[U]=l*_*r[U],s[U+1]=h*_*r[U])}})(p,l,h),function(p,r,s="x"){const o=cs(s),l=p.length;let h,_,C,D=es(p,0);for(let L=0;L<l;++L){if(_=C,C=D,D=es(p,L+1),!C)continue;const U=C[s],Z=C[o];_&&(h=(U-_[s])/3,C[`cp1${s}`]=U-h,C[`cp1${o}`]=Z-h*r[L]),D&&(h=(D[s]-U)/3,C[`cp2${s}`]=U+h,C[`cp2${o}`]=Z+h*r[L])}}(p,h,r)}(p,l);else{let L=o?p[p.length-1]:p[0];for(h=0,_=p.length;h<_;++h)C=p[h],D=os(L,C,p[Math.min(h+1,_-(o?0:1))%_],r.tension),C.cp1x=D.previous.x,C.cp1y=D.previous.y,C.cp2x=D.next.x,C.cp2y=D.next.y,L=C}r.capBezierPoints&&function(p,r){let s,o,l,h,_,C=vo(p[0],r);for(s=0,o=p.length;s<o;++s)_=h,h=C,C=s<o-1&&vo(p[s+1],r),h&&(l=p[s],_&&(l.cp1x=_n(l.cp1x,r.left,r.right),l.cp1y=_n(l.cp1y,r.top,r.bottom)),C&&(l.cp2x=_n(l.cp2x,r.left,r.right),l.cp2y=_n(l.cp2y,r.top,r.bottom)))}(p,s)}function Bo(){return"undefined"!=typeof window&&"undefined"!=typeof document}function fa(p){let r=p.parentNode;return r&&"[object ShadowRoot]"===r.toString()&&(r=r.host),r}function er(p,r,s){let o;return"string"==typeof p?(o=parseInt(p,10),-1!==p.indexOf("%")&&(o=o/100*r.parentNode[s])):o=p,o}const tr=p=>window.getComputedStyle(p,null),fe=["top","right","bottom","left"];function N(p,r,s){const o={};s=s?"-"+s:"";for(let l=0;l<4;l++){const h=fe[l];o[h]=parseFloat(p[r+"-"+h+s])||0}return o.width=o.left+o.right,o.height=o.top+o.bottom,o}function Me(p,r){const{canvas:s,currentDevicePixelRatio:o}=r,l=tr(s),h="border-box"===l.boxSizing,_=N(l,"padding"),C=N(l,"border","width"),{x:D,y:L,box:U}=function(p,r){const s=p.native||p,o=s.touches,l=o&&o.length?o[0]:s,{offsetX:h,offsetY:_}=l;let D,L,C=!1;if(((p,r,s)=>(p>0||r>0)&&(!s||!s.shadowRoot))(h,_,s.target))D=h,L=_;else{const U=r.getBoundingClientRect();D=l.clientX-U.left,L=l.clientY-U.top,C=!0}return{x:D,y:L,box:C}}(p,s),Z=_.left+(U&&C.left),ue=_.top+(U&&C.top);let{width:we,height:Ze}=r;return h&&(we-=_.width+C.width,Ze-=_.height+C.height),{x:Math.round((D-Z)/we*s.width/o),y:Math.round((L-ue)/Ze*s.height/o)}}const Ct=p=>Math.round(10*p)/10;function Zt(p,r,s){const o=r||1,l=Math.floor(p.height*o),h=Math.floor(p.width*o);p.height=l/o,p.width=h/o;const _=p.canvas;return _.style&&(s||!_.style.height&&!_.style.width)&&(_.style.height=`${p.height}px`,_.style.width=`${p.width}px`),(p.currentDevicePixelRatio!==o||_.height!==l||_.width!==h)&&(p.currentDevicePixelRatio=o,_.height=l,_.width=h,p.ctx.setTransform(o,0,0,o,0,0),!0)}const gi=function(){let p=!1;try{const r={get passive(){return p=!0,!1}};window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch(r){}return p}();function Bi(p,r){const s=function(p,r){return tr(p).getPropertyValue(r)}(p,r),o=s&&s.match(/^(\d+)(\.\d+)?px$/);return o?+o[1]:void 0}function nn(p,r,s,o){return{x:p.x+s*(r.x-p.x),y:p.y+s*(r.y-p.y)}}function Nn(p,r,s,o){return{x:p.x+s*(r.x-p.x),y:"middle"===o?s<.5?p.y:r.y:"after"===o?s<1?p.y:r.y:s>0?r.y:p.y}}function An(p,r,s,o){const l={x:p.cp2x,y:p.cp2y},h={x:r.cp1x,y:r.cp1y},_=nn(p,l,s),C=nn(l,h,s),D=nn(h,r,s),L=nn(_,C,s),U=nn(C,D,s);return nn(L,U,s)}const hn=new Map;function kn(p,r,s){return function(p,r){r=r||{};const s=p+JSON.stringify(r);let o=hn.get(s);return o||(o=new Intl.NumberFormat(p,r),hn.set(s,o)),o}(r,s).format(p)}function Us(p,r,s){return p?function(p,r){return{x:s=>p+p+r-s,setWidth(s){r=s},textAlign:s=>"center"===s?s:"right"===s?"left":"right",xPlus:(s,o)=>s-o,leftForLtr:(s,o)=>s-o}}(r,s):{x:p=>p,setWidth(p){},textAlign:p=>p,xPlus:(p,r)=>p+r,leftForLtr:(p,r)=>p}}function oo(p,r){let s,o;("ltr"===r||"rtl"===r)&&(s=p.canvas.style,o=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",r,"important"),p.prevTextDirection=o)}function Qr(p,r){void 0!==r&&(delete p.prevTextDirection,p.canvas.style.setProperty("direction",r[0],r[1]))}function ir(p){return"angle"===p?{between:Zi,compare:Vi,normalize:Ni}:{between:$i,compare:(r,s)=>r-s,normalize:r=>r}}function Zs({start:p,end:r,count:s,loop:o,style:l}){return{start:p%s,end:r%s,loop:o&&(r-p+1)%s==0,style:l}}function zo(p,r,s){if(!s)return[p];const{property:o,start:l,end:h}=s,_=r.length,{compare:C,between:D,normalize:L}=ir(o),{start:U,end:Z,loop:ue,style:we}=function(p,r,s){const{property:o,start:l,end:h}=s,{between:_,normalize:C}=ir(o),D=r.length;let ue,we,{start:L,end:U,loop:Z}=p;if(Z){for(L+=D,U+=D,ue=0,we=D;ue<we&&_(C(r[L%D][o]),l,h);++ue)L--,U--;L%=D,U%=D}return U<L&&(U+=D),{start:L,end:U,loop:Z,style:p.style}}(p,r,s),Ze=[];let bt,ei,ki,ot=!1,mt=null;for(let en=U,cn=U;en<=Z;++en)ei=r[en%_],!ei.skip&&(bt=L(ei[o]),bt!==ki&&(ot=D(bt,l,h),null===mt&&(ot||D(l,ki,bt)&&0!==C(l,ki))&&(mt=0===C(bt,l)?en:cn),null!==mt&&(!ot||0===C(h,bt)||D(h,ki,bt))&&(Ze.push(Zs({start:mt,end:en,loop:ue,count:_,style:we})),mt=null),cn=en,ki=bt));return null!==mt&&Ze.push(Zs({start:mt,end:Z,loop:ue,count:_,style:we})),Ze}function nr(p,r){const s=[],o=p.segments;for(let l=0;l<o.length;l++){const h=zo(o[l],p.points,r);h.length&&s.push(...h)}return s}function on(p){return{backgroundColor:p.backgroundColor,borderCapStyle:p.borderCapStyle,borderDash:p.borderDash,borderDashOffset:p.borderDashOffset,borderJoinStyle:p.borderJoinStyle,borderWidth:p.borderWidth,borderColor:p.borderColor}}function an(p,r){return r&&JSON.stringify(p)!==JSON.stringify(r)}var Un=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(r,s,o,l){const _=s.duration;s.listeners[l].forEach(C=>C({chart:r,initial:s.initial,numSteps:_,currentStep:Math.min(o-s.start,_)}))}_refresh(){this._request||(this._running=!0,this._request=De.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(r=Date.now()){let s=0;this._charts.forEach((o,l)=>{if(!o.running||!o.items.length)return;const h=o.items;let D,_=h.length-1,C=!1;for(;_>=0;--_)D=h[_],D._active?(D._total>o.duration&&(o.duration=D._total),D.tick(r),C=!0):(h[_]=h[h.length-1],h.pop());C&&(l.draw(),this._notify(l,o,r,"progress")),h.length||(o.running=!1,this._notify(l,o,r,"complete"),o.initial=!1),s+=h.length}),this._lastDate=r,0===s&&(this._running=!1)}_getAnims(r){const s=this._charts;let o=s.get(r);return o||(o={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(r,o)),o}listen(r,s,o){this._getAnims(r).listeners[s].push(o)}add(r,s){!s||!s.length||this._getAnims(r).items.push(...s)}has(r){return this._getAnims(r).items.length>0}start(r){const s=this._charts.get(r);!s||(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((o,l)=>Math.max(o,l._duration),0),this._refresh())}running(r){if(!this._running)return!1;const s=this._charts.get(r);return!(!s||!s.running||!s.items.length)}stop(r){const s=this._charts.get(r);if(!s||!s.items.length)return;const o=s.items;let l=o.length-1;for(;l>=0;--l)o[l].cancel();s.items=[],this._notify(r,s,Date.now(),"complete")}remove(r){return this._charts.delete(r)}};const us="transparent",wo={boolean:(p,r,s)=>s>.5?r:p,color(p,r,s){const o=Sn(p||us),l=o.valid&&Sn(r||us);return l&&l.valid?l.mix(o,s).hexString():r},number:(p,r,s)=>p+(r-p)*s};class ds{constructor(r,s,o,l){const h=s[o];l=Ys([r.to,l,h,r.from]);const _=Ys([r.from,h,l]);this._active=!0,this._fn=r.fn||wo[r.type||typeof _],this._easing=be[r.easing]||be.linear,this._start=Math.floor(Date.now()+(r.delay||0)),this._duration=this._total=Math.floor(r.duration),this._loop=!!r.loop,this._target=s,this._prop=o,this._from=_,this._to=l,this._promises=void 0}active(){return this._active}update(r,s,o){if(this._active){this._notify(!1);const l=this._target[this._prop],h=o-this._start,_=this._duration-h;this._start=o,this._duration=Math.floor(Math.max(_,r.duration)),this._total+=h,this._loop=!!r.loop,this._to=Ys([r.to,s,l,r.from]),this._from=Ys([r.from,l,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(r){const s=r-this._start,o=this._duration,l=this._prop,h=this._from,_=this._loop,C=this._to;let D;if(this._active=h!==C&&(_||s<o),!this._active)return this._target[l]=C,void this._notify(!0);s<0?this._target[l]=h:(D=s/o%2,D=_&&D>1?2-D:D,D=this._easing(Math.min(1,Math.max(0,D))),this._target[l]=this._fn(h,C,D))}wait(){const r=this._promises||(this._promises=[]);return new Promise((s,o)=>{r.push({res:s,rej:o})})}_notify(r){const s=r?"res":"rej",o=this._promises||[];for(let l=0;l<o.length;l++)o[l][s]()}}Vn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const sl=Object.keys(Vn.animation);Vn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:p=>"onProgress"!==p&&"onComplete"!==p&&"fn"!==p}),Vn.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Vn.describe("animations",{_fallback:"animation"}),Vn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:p=>0|p}}}});class ol{constructor(r,s){this._chart=r,this._properties=new Map,this.configure(s)}configure(r){if(!Se(r))return;const s=this._properties;Object.getOwnPropertyNames(r).forEach(o=>{const l=r[o];if(!Se(l))return;const h={};for(const _ of sl)h[_]=l[_];(Oe(l.properties)&&l.properties||[o]).forEach(_=>{(_===o||!s.has(_))&&s.set(_,h)})})}_animateOptions(r,s){const o=s.options,l=function(p,r){if(!r)return;let s=p.options;if(s)return s.$shared&&(p.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s;p.options=r}(r,o);if(!l)return[];const h=this._createAnimations(l,o);return o.$shared&&function(p,r){const s=[],o=Object.keys(r);for(let l=0;l<o.length;l++){const h=p[o[l]];h&&h.active()&&s.push(h.wait())}return Promise.all(s)}(r.options.$animations,o).then(()=>{r.options=o},()=>{}),h}_createAnimations(r,s){const o=this._properties,l=[],h=r.$animations||(r.$animations={}),_=Object.keys(s),C=Date.now();let D;for(D=_.length-1;D>=0;--D){const L=_[D];if("$"===L.charAt(0))continue;if("options"===L){l.push(...this._animateOptions(r,s));continue}const U=s[L];let Z=h[L];const ue=o.get(L);if(Z){if(ue&&Z.active()){Z.update(ue,U,C);continue}Z.cancel()}ue&&ue.duration?(h[L]=Z=new ds(ue,r,L,U),l.push(Z)):r[L]=U}return l}update(r,s){if(0===this._properties.size)return void Object.assign(r,s);const o=this._createAnimations(r,s);return o.length?(Un.add(this._chart,o),!0):void 0}}function Ho(p,r){const s=p&&p.options||{},o=s.reverse,l=void 0===s.min?r:0,h=void 0===s.max?r:0;return{start:o?h:l,end:o?l:h}}function Lr(p,r){const s=[],o=p._getSortedDatasetMetas(r);let l,h;for(l=0,h=o.length;l<h;++l)s.push(o[l].index);return s}function rl(p,r,s,o={}){const l=p.keys,h="single"===o.mode;let _,C,D,L;if(null!==r){for(_=0,C=l.length;_<C;++_){if(D=+l[_],D===s){if(o.all)continue;break}L=p.values[D],Qe(L)&&(h||0===r||Ye(r)===Ye(L))&&(r+=L)}return r}}function jo(p,r){const s=p&&p.options.stacked;return s||void 0===s&&void 0!==r.stack}function ia(p,r,s){const o=p[r]||(p[r]={});return o[s]||(o[s]={})}function cr(p,r,s,o){for(const l of r.getMatchingVisibleMetas(o).reverse()){const h=p[l.index];if(s&&h>0||!s&&h<0)return l.index}return null}function Il(p,r){const{chart:s,_cachedMeta:o}=p,l=s._stacks||(s._stacks={}),{iScale:h,vScale:_,index:C}=o,D=h.axis,L=_.axis,U=function(p,r,s){return`${p.id}.${r.id}.${s.stack||s.type}`}(h,_,o),Z=r.length;let ue;for(let we=0;we<Z;++we){const Ze=r[we],{[D]:ot,[L]:mt}=Ze;ue=(Ze._stacks||(Ze._stacks={}))[L]=ia(l,U,ot),ue[C]=mt,ue._top=cr(ue,_,!0,o.type),ue._bottom=cr(ue,_,!1,o.type)}}function ga(p,r){const s=p.scales;return Object.keys(s).filter(o=>s[o].axis===r).shift()}function Pr(p,r){const s=p.controller.index,o=p.vScale&&p.vScale.axis;if(o){r=r||p._parsed;for(const l of r){const h=l._stacks;if(!h||void 0===h[o]||void 0===h[o][s])return;delete h[o][s]}}}const ma=p=>"reset"===p||"none"===p,Ec=(p,r)=>r?p:Object.assign({},p);let Rr=(()=>{class p{constructor(s,o){this.chart=s,this._ctx=s.ctx,this.index=o,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const s=this._cachedMeta;this.configure(),this.linkScales(),s._stacked=jo(s.vScale,s),this.addElements()}updateIndex(s){this.index!==s&&Pr(this._cachedMeta),this.index=s}linkScales(){const s=this.chart,o=this._cachedMeta,l=this.getDataset(),h=(ue,we,Ze,ot)=>"x"===ue?we:"r"===ue?ot:Ze,_=o.xAxisID=it(l.xAxisID,ga(s,"x")),C=o.yAxisID=it(l.yAxisID,ga(s,"y")),D=o.rAxisID=it(l.rAxisID,ga(s,"r")),L=o.indexAxis,U=o.iAxisID=h(L,_,C,D),Z=o.vAxisID=h(L,C,_,D);o.xScale=this.getScaleForId(_),o.yScale=this.getScaleForId(C),o.rScale=this.getScaleForId(D),o.iScale=this.getScaleForId(U),o.vScale=this.getScaleForId(Z)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(s){return this.chart.scales[s]}_getOtherScale(s){const o=this._cachedMeta;return s===o.iScale?o.vScale:o.iScale}reset(){this._update("reset")}_destroy(){const s=this._cachedMeta;this._data&&wr(this._data,this),s._stacked&&Pr(s)}_dataCheck(){const s=this.getDataset(),o=s.data||(s.data=[]),l=this._data;if(Se(o))this._data=function(p){const r=Object.keys(p),s=new Array(r.length);let o,l,h;for(o=0,l=r.length;o<l;++o)h=r[o],s[o]={x:h,y:p[h]};return s}(o);else if(l!==o){if(l){wr(l,this);const h=this._cachedMeta;Pr(h),h._parsed=[]}o&&Object.isExtensible(o)&&function(p,r){p._chartjs?p._chartjs.listeners.push(r):(Object.defineProperty(p,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),qr.forEach(s=>{const o="_onData"+yi(s),l=p[s];Object.defineProperty(p,s,{configurable:!0,enumerable:!1,value(...h){const _=l.apply(this,h);return p._chartjs.listeners.forEach(C=>{"function"==typeof C[o]&&C[o](...h)}),_}})}))}(o,this),this._syncList=[],this._data=o}}addElements(){const s=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(s.dataset=new this.datasetElementType)}buildOrUpdateElements(s){const o=this._cachedMeta,l=this.getDataset();let h=!1;this._dataCheck();const _=o._stacked;o._stacked=jo(o.vScale,o),o.stack!==l.stack&&(h=!0,Pr(o),o.stack=l.stack),this._resyncElements(s),(h||_!==o._stacked)&&Il(this,o._parsed)}configure(){const s=this.chart.config,o=s.datasetScopeKeys(this._type),l=s.getOptionScopes(this.getDataset(),o,!0);this.options=s.createResolver(l,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(s,o){const{_cachedMeta:l,_data:h}=this,{iScale:_,_stacked:C}=l,D=_.axis;let Z,ue,we,L=0===s&&o===h.length||l._sorted,U=s>0&&l._parsed[s-1];if(!1===this._parsing)l._parsed=h,l._sorted=!0,we=h;else{we=Oe(h[s])?this.parseArrayData(l,h,s,o):Se(h[s])?this.parseObjectData(l,h,s,o):this.parsePrimitiveData(l,h,s,o);const Ze=()=>null===ue[D]||U&&ue[D]<U[D];for(Z=0;Z<o;++Z)l._parsed[Z+s]=ue=we[Z],L&&(Ze()&&(L=!1),U=ue);l._sorted=L}C&&Il(this,we)}parsePrimitiveData(s,o,l,h){const{iScale:_,vScale:C}=s,D=_.axis,L=C.axis,U=_.getLabels(),Z=_===C,ue=new Array(h);let we,Ze,ot;for(we=0,Ze=h;we<Ze;++we)ot=we+l,ue[we]={[D]:Z||_.parse(U[ot],ot),[L]:C.parse(o[ot],ot)};return ue}parseArrayData(s,o,l,h){const{xScale:_,yScale:C}=s,D=new Array(h);let L,U,Z,ue;for(L=0,U=h;L<U;++L)Z=L+l,ue=o[Z],D[L]={x:_.parse(ue[0],Z),y:C.parse(ue[1],Z)};return D}parseObjectData(s,o,l,h){const{xScale:_,yScale:C}=s,{xAxisKey:D="x",yAxisKey:L="y"}=this._parsing,U=new Array(h);let Z,ue,we,Ze;for(Z=0,ue=h;Z<ue;++Z)we=Z+l,Ze=o[we],U[Z]={x:_.parse(Lt(Ze,D),we),y:C.parse(Lt(Ze,L),we)};return U}getParsed(s){return this._cachedMeta._parsed[s]}getDataElement(s){return this._cachedMeta.data[s]}applyStack(s,o,l){const _=this._cachedMeta,C=o[s.axis];return rl({keys:Lr(this.chart,!0),values:o._stacks[s.axis]},C,_.index,{mode:l})}updateRangeFromParsed(s,o,l,h){const _=l[o.axis];let C=null===_?NaN:_;const D=h&&l._stacks[o.axis];h&&D&&(h.values=D,C=rl(h,_,this._cachedMeta.index)),s.min=Math.min(s.min,C),s.max=Math.max(s.max,C)}getMinMax(s,o){const l=this._cachedMeta,h=l._parsed,_=l._sorted&&s===l.iScale,C=h.length,D=this._getOtherScale(s),L=((p,r,s)=>p&&!r.hidden&&r._stacked&&{keys:Lr(this.chart,!0),values:null})(o,l),U={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:Z,max:ue}=function(p){const{min:r,max:s,minDefined:o,maxDefined:l}=p.getUserBounds();return{min:o?r:Number.NEGATIVE_INFINITY,max:l?s:Number.POSITIVE_INFINITY}}(D);let we,Ze;function ot(){Ze=h[we];const mt=Ze[D.axis];return!Qe(Ze[s.axis])||Z>mt||ue<mt}for(we=0;we<C&&(ot()||(this.updateRangeFromParsed(U,s,Ze,L),!_));++we);if(_)for(we=C-1;we>=0;--we)if(!ot()){this.updateRangeFromParsed(U,s,Ze,L);break}return U}getAllParsedValues(s){const o=this._cachedMeta._parsed,l=[];let h,_,C;for(h=0,_=o.length;h<_;++h)C=o[h][s.axis],Qe(C)&&l.push(C);return l}getMaxOverflow(){return!1}getLabelAndValue(s){const o=this._cachedMeta,l=o.iScale,h=o.vScale,_=this.getParsed(s);return{label:l?""+l.getLabelForValue(_[l.axis]):"",value:h?""+h.getLabelForValue(_[h.axis]):""}}_update(s){const o=this._cachedMeta;this.update(s||"default"),o._clip=function(p){let r,s,o,l;return Se(p)?(r=p.top,s=p.right,o=p.bottom,l=p.left):r=s=o=l=p,{top:r,right:s,bottom:o,left:l,disabled:!1===p}}(it(this.options.clip,function(p,r,s){if(!1===s)return!1;const o=Ho(p,s),l=Ho(r,s);return{top:l.end,right:o.end,bottom:l.start,left:o.start}}(o.xScale,o.yScale,this.getMaxOverflow())))}update(s){}draw(){const s=this._ctx,l=this._cachedMeta,h=l.data||[],_=this.chart.chartArea,C=[],D=this._drawStart||0,L=this._drawCount||h.length-D,U=this.options.drawActiveElementsOnTop;let Z;for(l.dataset&&l.dataset.draw(s,_,D,L),Z=D;Z<D+L;++Z){const ue=h[Z];ue.hidden||(ue.active&&U?C.push(ue):ue.draw(s,_))}for(Z=0;Z<C.length;++Z)C[Z].draw(s,_)}getStyle(s,o){const l=o?"active":"default";return void 0===s&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(l):this.resolveDataElementOptions(s||0,l)}getContext(s,o,l){const h=this.getDataset();let _;if(s>=0&&s<this._cachedMeta.data.length){const C=this._cachedMeta.data[s];_=C.$context||(C.$context=function(p,r,s){return lo(p,{active:!1,dataIndex:r,parsed:void 0,raw:void 0,element:s,index:r,mode:"default",type:"data"})}(this.getContext(),s,C)),_.parsed=this.getParsed(s),_.raw=h.data[s],_.index=_.dataIndex=s}else _=this.$context||(this.$context=function(p,r){return lo(p,{active:!1,dataset:void 0,datasetIndex:r,index:r,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),_.dataset=h,_.index=_.datasetIndex=this.index;return _.active=!!o,_.mode=l,_}resolveDatasetElementOptions(s){return this._resolveElementOptions(this.datasetElementType.id,s)}resolveDataElementOptions(s,o){return this._resolveElementOptions(this.dataElementType.id,o,s)}_resolveElementOptions(s,o="default",l){const h="active"===o,_=this._cachedDataOpts,C=s+"-"+o,D=_[C],L=this.enableOptionSharing&&Ce(l);if(D)return Ec(D,L);const U=this.chart.config,Z=U.datasetElementScopeKeys(this._type,s),ue=h?[`${s}Hover`,"hover",s,""]:[s,""],we=U.getOptionScopes(this.getDataset(),Z),Ze=Object.keys(Vn.elements[s]),mt=U.resolveNamedOptions(we,Ze,()=>this.getContext(l,h),ue);return mt.$shared&&(mt.$shared=L,_[C]=Object.freeze(Ec(mt,L))),mt}_resolveAnimations(s,o,l){const h=this.chart,_=this._cachedDataOpts,C=`animation-${o}`,D=_[C];if(D)return D;let L;if(!1!==h.options.animation){const Z=this.chart.config,ue=Z.datasetAnimationScopeKeys(this._type,o),we=Z.getOptionScopes(this.getDataset(),ue);L=Z.createResolver(we,this.getContext(s,l,o))}const U=new ol(h,L&&L.animations);return L&&L._cacheable&&(_[C]=Object.freeze(U)),U}getSharedOptions(s){if(s.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},s))}includeOptions(s,o){return!o||ma(s)||this.chart._animationsDisabled}updateElement(s,o,l,h){ma(h)?Object.assign(s,l):this._resolveAnimations(o,h).update(s,l)}updateSharedOptions(s,o,l){s&&!ma(o)&&this._resolveAnimations(void 0,o).update(s,l)}_setStyle(s,o,l,h){s.active=h;const _=this.getStyle(o,h);this._resolveAnimations(o,l,h).update(s,{options:!h&&this.getSharedOptions(_)||_})}removeHoverStyle(s,o,l){this._setStyle(s,l,"active",!1)}setHoverStyle(s,o,l){this._setStyle(s,l,"active",!0)}_removeDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!1)}_setDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!0)}_resyncElements(s){const o=this._data,l=this._cachedMeta.data;for(const[D,L,U]of this._syncList)this[D](L,U);this._syncList=[];const h=l.length,_=o.length,C=Math.min(_,h);C&&this.parse(0,C),_>h?this._insertElements(h,_-h,s):_<h&&this._removeElements(_,h-_)}_insertElements(s,o,l=!0){const h=this._cachedMeta,_=h.data,C=s+o;let D;const L=U=>{for(U.length+=o,D=U.length-1;D>=C;D--)U[D]=U[D-o]};for(L(_),D=s;D<C;++D)_[D]=new this.dataElementType;this._parsing&&L(h._parsed),this.parse(s,o),l&&this.updateElements(_,s,o,"reset")}updateElements(s,o,l,h){}_removeElements(s,o){const l=this._cachedMeta;if(this._parsing){const h=l._parsed.splice(s,o);l._stacked&&Pr(l,h)}l.data.splice(s,o)}_sync(s){if(this._parsing)this._syncList.push(s);else{const[o,l,h]=s;this[o](l,h)}this.chart._dataChanges.push([this.index,...s])}_onDataPush(){const s=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-s,s])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(s,o){o&&this._sync(["_removeElements",s,o]);const l=arguments.length-2;l&&this._sync(["_insertElements",s,l])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return p.defaults={},p})();function Pa(p){const r=p.iScale,s=function(p,r){if(!p._cache.$bar){const s=p.getMatchingVisibleMetas(r);let o=[];for(let l=0,h=s.length;l<h;l++)o=o.concat(s[l].controller.getAllParsedValues(p));p._cache.$bar=ps(o.sort((l,h)=>l-h))}return p._cache.$bar}(r,p.type);let l,h,_,C,o=r._length;const D=()=>{32767===_||-32768===_||(Ce(C)&&(o=Math.min(o,Math.abs(_-C)||o)),C=_)};for(l=0,h=s.length;l<h;++l)_=r.getPixelForValue(s[l]),D();for(C=void 0,l=0,h=r.ticks.length;l<h;++l)_=r.getPixelForTick(l),D();return o}function ja(p,r,s,o){return Oe(p)?function(p,r,s,o){const l=s.parse(p[0],o),h=s.parse(p[1],o),_=Math.min(l,h),C=Math.max(l,h);let D=_,L=C;Math.abs(_)>Math.abs(C)&&(D=C,L=_),r[s.axis]=L,r._custom={barStart:D,barEnd:L,start:l,end:h,min:_,max:C}}(p,r,s,o):r[s.axis]=s.parse(p,o),r}function Al(p,r,s,o){const l=p.iScale,h=p.vScale,_=l.getLabels(),C=l===h,D=[];let L,U,Z,ue;for(L=s,U=s+o;L<U;++L)ue=r[L],Z={},Z[l.axis]=C||l.parse(_[L],L),D.push(ja(ue,Z,h,L));return D}function nc(p){return p&&void 0!==p.barStart&&void 0!==p.barEnd}function q(p,r,s,o){let l=r.borderSkipped;const h={};if(!l)return void(p.borderSkipped=h);const{start:_,end:C,reverse:D,top:L,bottom:U}=function(p){let r,s,o,l,h;return p.horizontal?(r=p.base>p.x,s="left",o="right"):(r=p.base<p.y,s="bottom",o="top"),r?(l="end",h="start"):(l="start",h="end"),{start:s,end:o,reverse:r,top:l,bottom:h}}(p);"middle"===l&&s&&(p.enableBorderRadius=!0,(s._top||0)===o?l=L:(s._bottom||0)===o?l=U:(h[K(U,_,C,D)]=!0,l=L)),h[K(l,_,C,D)]=!0,p.borderSkipped=h}function K(p,r,s,o){return o?(p=function(p,r,s){return p===r?s:p===s?r:p}(p,r,s),p=ae(p,s,r)):p=ae(p,r,s),p}function ae(p,r,s){return"start"===p?r:"end"===p?s:p}function ve(p,{inflateAmount:r},s){p.inflateAmount="auto"===r?1===s?.33:0:r}Rr.prototype.datasetElementType=null,Rr.prototype.dataElementType=null;let je=(()=>{class p extends Rr{parsePrimitiveData(s,o,l,h){return Al(s,o,l,h)}parseArrayData(s,o,l,h){return Al(s,o,l,h)}parseObjectData(s,o,l,h){const{iScale:_,vScale:C}=s,{xAxisKey:D="x",yAxisKey:L="y"}=this._parsing,U="x"===_.axis?D:L,Z="x"===C.axis?D:L,ue=[];let we,Ze,ot,mt;for(we=l,Ze=l+h;we<Ze;++we)mt=o[we],ot={},ot[_.axis]=_.parse(Lt(mt,U),we),ue.push(ja(Lt(mt,Z),ot,C,we));return ue}updateRangeFromParsed(s,o,l,h){super.updateRangeFromParsed(s,o,l,h);const _=l._custom;_&&o===this._cachedMeta.vScale&&(s.min=Math.min(s.min,_.min),s.max=Math.max(s.max,_.max))}getMaxOverflow(){return 0}getLabelAndValue(s){const o=this._cachedMeta,{iScale:l,vScale:h}=o,_=this.getParsed(s),C=_._custom,D=nc(C)?"["+C.start+", "+C.end+"]":""+h.getLabelForValue(_[h.axis]);return{label:""+l.getLabelForValue(_[l.axis]),value:D}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(s){const o=this._cachedMeta;this.updateElements(o.data,0,o.data.length,s)}updateElements(s,o,l,h){const _="reset"===h,{index:C,_cachedMeta:{vScale:D}}=this,L=D.getBasePixel(),U=D.isHorizontal(),Z=this._getRuler(),ue=this.resolveDataElementOptions(o,h),we=this.getSharedOptions(ue),Ze=this.includeOptions(h,we);this.updateSharedOptions(we,h,ue);for(let ot=o;ot<o+l;ot++){const mt=this.getParsed(ot),bt=_||tt(mt[D.axis])?{base:L,head:L}:this._calculateBarValuePixels(ot),ei=this._calculateBarIndexPixels(ot,Z),ki=(mt._stacks||{})[D.axis],mi={horizontal:U,base:bt.base,enableBorderRadius:!ki||nc(mt._custom)||C===ki._top||C===ki._bottom,x:U?bt.head:ei.center,y:U?ei.center:bt.head,height:U?ei.size:Math.abs(bt.size),width:U?Math.abs(bt.size):ei.size};Ze&&(mi.options=we||this.resolveDataElementOptions(ot,s[ot].active?"active":h));const Ci=mi.options||s[ot].options;q(mi,Ci,ki,C),ve(mi,Ci,Z.ratio),this.updateElement(s[ot],ot,mi,h)}}_getStacks(s,o){const h=this._cachedMeta.iScale,_=h.getMatchingVisibleMetas(this._type),C=h.options.stacked,D=_.length,L=[];let U,Z;for(U=0;U<D;++U)if(Z=_[U],Z.controller.options.grouped){if(void 0!==o){const ue=Z.controller.getParsed(o)[Z.controller._cachedMeta.vScale.axis];if(tt(ue)||isNaN(ue))continue}if((!1===C||-1===L.indexOf(Z.stack)||void 0===C&&void 0===Z.stack)&&L.push(Z.stack),Z.index===s)break}return L.length||L.push(void 0),L}_getStackCount(s){return this._getStacks(void 0,s).length}_getStackIndex(s,o,l){const h=this._getStacks(s,l),_=void 0!==o?h.indexOf(o):-1;return-1===_?h.length-1:_}_getRuler(){const s=this.options,o=this._cachedMeta,l=o.iScale,h=[];let _,C;for(_=0,C=o.data.length;_<C;++_)h.push(l.getPixelForValue(this.getParsed(_)[l.axis],_));const D=s.barThickness;return{min:D||Pa(o),pixels:h,start:l._startPixel,end:l._endPixel,stackCount:this._getStackCount(),scale:l,grouped:s.grouped,ratio:D?1:s.categoryPercentage*s.barPercentage}}_calculateBarValuePixels(s){const{_cachedMeta:{vScale:o,_stacked:l},options:{base:h,minBarLength:_}}=this,C=h||0,D=this.getParsed(s),L=D._custom,U=nc(L);let Ze,ot,Z=D[o.axis],ue=0,we=l?this.applyStack(o,D,l):Z;we!==Z&&(ue=we-Z,we=Z),U&&(Z=L.barStart,we=L.barEnd-L.barStart,0!==Z&&Ye(Z)!==Ye(L.barEnd)&&(ue=0),ue+=Z);const mt=tt(h)||U?ue:h;let bt=o.getPixelForValue(mt);if(Ze=this.chart.getDataVisibility(s)?o.getPixelForValue(ue+we):bt,ot=Ze-bt,Math.abs(ot)<_&&(ot=function(p,r,s){return 0!==p?Ye(p):(r.isHorizontal()?1:-1)*(r.min>=s?1:-1)}(ot,o,C)*_,Z===C&&(bt-=ot/2),Ze=bt+ot),bt===o.getPixelForValue(C)){const ei=Ye(ot)*o.getLineWidthForValue(C)/2;bt+=ei,ot-=ei}return{size:ot,base:bt,head:Ze,center:Ze+ot/2}}_calculateBarIndexPixels(s,o){const l=o.scale,h=this.options,_=h.skipNull,C=it(h.maxBarThickness,1/0);let D,L;if(o.grouped){const U=_?this._getStackCount(s):o.stackCount,Z="flex"===h.barThickness?function(p,r,s,o){const l=r.pixels,h=l[p];let _=p>0?l[p-1]:null,C=p<l.length-1?l[p+1]:null;const D=s.categoryPercentage;null===_&&(_=h-(null===C?r.end-r.start:C-h)),null===C&&(C=h+h-_);const L=h-(h-Math.min(_,C))/2*D;return{chunk:Math.abs(C-_)/2*D/o,ratio:s.barPercentage,start:L}}(s,o,h,U):function(p,r,s,o){const l=s.barThickness;let h,_;return tt(l)?(h=r.min*s.categoryPercentage,_=s.barPercentage):(h=l*o,_=1),{chunk:h/o,ratio:_,start:r.pixels[p]-h/2}}(s,o,h,U),ue=this._getStackIndex(this.index,this._cachedMeta.stack,_?s:void 0);D=Z.start+Z.chunk*ue+Z.chunk/2,L=Math.min(C,Z.chunk*Z.ratio)}else D=l.getPixelForValue(this.getParsed(s)[l.axis],s),L=Math.min(C,o.min*o.ratio);return{base:D-L/2,head:D+L/2,center:D,size:L}}draw(){const s=this._cachedMeta,o=s.vScale,l=s.data,h=l.length;let _=0;for(;_<h;++_)null!==this.getParsed(_)[o.axis]&&l[_].draw(this._ctx)}}return p.id="bar",p.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},p.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},p})(),ft=(()=>{class p extends Rr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(s,o,l,h){const _=super.parsePrimitiveData(s,o,l,h);for(let C=0;C<_.length;C++)_[C]._custom=this.resolveDataElementOptions(C+l).radius;return _}parseArrayData(s,o,l,h){const _=super.parseArrayData(s,o,l,h);for(let C=0;C<_.length;C++)_[C]._custom=it(o[l+C][2],this.resolveDataElementOptions(C+l).radius);return _}parseObjectData(s,o,l,h){const _=super.parseObjectData(s,o,l,h);for(let C=0;C<_.length;C++){const D=o[l+C];_[C]._custom=it(D&&D.r&&+D.r,this.resolveDataElementOptions(C+l).radius)}return _}getMaxOverflow(){const s=this._cachedMeta.data;let o=0;for(let l=s.length-1;l>=0;--l)o=Math.max(o,s[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}getLabelAndValue(s){const o=this._cachedMeta,{xScale:l,yScale:h}=o,_=this.getParsed(s),C=l.getLabelForValue(_.x),D=h.getLabelForValue(_.y),L=_._custom;return{label:o.label,value:"("+C+", "+D+(L?", "+L:"")+")"}}update(s){const o=this._cachedMeta.data;this.updateElements(o,0,o.length,s)}updateElements(s,o,l,h){const _="reset"===h,{iScale:C,vScale:D}=this._cachedMeta,L=this.resolveDataElementOptions(o,h),U=this.getSharedOptions(L),Z=this.includeOptions(h,U),ue=C.axis,we=D.axis;for(let Ze=o;Ze<o+l;Ze++){const ot=s[Ze],mt=!_&&this.getParsed(Ze),bt={},ei=bt[ue]=_?C.getPixelForDecimal(.5):C.getPixelForValue(mt[ue]),ki=bt[we]=_?D.getBasePixel():D.getPixelForValue(mt[we]);bt.skip=isNaN(ei)||isNaN(ki),Z&&(bt.options=this.resolveDataElementOptions(Ze,ot.active?"active":h),_&&(bt.options.radius=0)),this.updateElement(ot,Ze,bt,h)}this.updateSharedOptions(U,h,L)}resolveDataElementOptions(s,o){const l=this.getParsed(s);let h=super.resolveDataElementOptions(s,o);h.$shared&&(h=Object.assign({},h,{$shared:!1}));const _=h.radius;return"active"!==o&&(h.radius=0),h.radius+=it(l&&l._custom,_),h}}return p.id="bubble",p.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},p.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},p})(),ai=(()=>{class p extends Rr{constructor(s,o){super(s,o),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(s,o){const l=this.getDataset().data,h=this._cachedMeta;if(!1===this._parsing)h._parsed=l;else{let C,D,_=L=>+l[L];if(Se(l[s])){const{key:L="value"}=this._parsing;_=U=>+Lt(l[U],L)}for(C=s,D=s+o;C<D;++C)h._parsed[C]=_(C)}}_getRotation(){return si(this.options.rotation-90)}_getCircumference(){return si(this.options.circumference)}_getRotationExtents(){let s=Te,o=-Te;for(let l=0;l<this.chart.data.datasets.length;++l)if(this.chart.isDatasetVisible(l)){const h=this.chart.getDatasetMeta(l).controller,_=h._getRotation(),C=h._getCircumference();s=Math.min(s,_),o=Math.max(o,_+C)}return{rotation:s,circumference:o-s}}update(s){const o=this.chart,{chartArea:l}=o,h=this._cachedMeta,_=h.data,C=this.getMaxBorderWidth()+this.getMaxOffset(_)+this.options.spacing,D=Math.max((Math.min(l.width,l.height)-C)/2,0),L=Math.min(((p,r)=>"string"==typeof p&&p.endsWith("%")?parseFloat(p)/100:p/r)(this.options.cutout,D),1),U=this._getRingWeight(this.index),{circumference:Z,rotation:ue}=this._getRotationExtents(),{ratioX:we,ratioY:Ze,offsetX:ot,offsetY:mt}=function(p,r,s){let o=1,l=1,h=0,_=0;if(r<Te){const C=p,D=C+r,L=Math.cos(C),U=Math.sin(C),Z=Math.cos(D),ue=Math.sin(D),we=(ki,mi,Ci)=>Zi(ki,C,D,!0)?1:Math.max(mi,mi*s,Ci,Ci*s),Ze=(ki,mi,Ci)=>Zi(ki,C,D,!0)?-1:Math.min(mi,mi*s,Ci,Ci*s),ot=we(0,L,Z),mt=we(ke,U,ue),bt=Ze(de,L,Z),ei=Ze(de+ke,U,ue);o=(ot-bt)/2,l=(mt-ei)/2,h=-(ot+bt)/2,_=-(mt+ei)/2}return{ratioX:o,ratioY:l,offsetX:h,offsetY:_}}(ue,Z,L),ki=Math.max(Math.min((l.width-C)/we,(l.height-C)/Ze)/2,0),mi=Re(this.options.radius,ki),Hi=(mi-Math.max(mi*L,0))/this._getVisibleDatasetWeightTotal();this.offsetX=ot*mi,this.offsetY=mt*mi,h.total=this.calculateTotal(),this.outerRadius=mi-Hi*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Hi*U,0),this.updateElements(_,0,_.length,s)}_circumference(s,o){const l=this.options,h=this._cachedMeta,_=this._getCircumference();return o&&l.animation.animateRotate||!this.chart.getDataVisibility(s)||null===h._parsed[s]||h.data[s].hidden?0:this.calculateCircumference(h._parsed[s]*_/Te)}updateElements(s,o,l,h){const _="reset"===h,C=this.chart,D=C.chartArea,Z=(D.left+D.right)/2,ue=(D.top+D.bottom)/2,we=_&&C.options.animation.animateScale,Ze=we?0:this.innerRadius,ot=we?0:this.outerRadius,mt=this.resolveDataElementOptions(o,h),bt=this.getSharedOptions(mt),ei=this.includeOptions(h,bt);let mi,ki=this._getRotation();for(mi=0;mi<o;++mi)ki+=this._circumference(mi,_);for(mi=o;mi<o+l;++mi){const Ci=this._circumference(mi,_),Hi=s[mi],Ui={x:Z+this.offsetX,y:ue+this.offsetY,startAngle:ki,endAngle:ki+Ci,circumference:Ci,outerRadius:ot,innerRadius:Ze};ei&&(Ui.options=bt||this.resolveDataElementOptions(mi,Hi.active?"active":h)),ki+=Ci,this.updateElement(Hi,mi,Ui,h)}this.updateSharedOptions(bt,h,mt)}calculateTotal(){const s=this._cachedMeta,o=s.data;let h,l=0;for(h=0;h<o.length;h++){const _=s._parsed[h];null!==_&&!isNaN(_)&&this.chart.getDataVisibility(h)&&!o[h].hidden&&(l+=Math.abs(_))}return l}calculateCircumference(s){const o=this._cachedMeta.total;return o>0&&!isNaN(s)?Te*(Math.abs(s)/o):0}getLabelAndValue(s){const l=this.chart,h=l.data.labels||[],_=kn(this._cachedMeta._parsed[s],l.options.locale);return{label:h[s]||"",value:_}}getMaxBorderWidth(s){let o=0;const l=this.chart;let h,_,C,D,L;if(!s)for(h=0,_=l.data.datasets.length;h<_;++h)if(l.isDatasetVisible(h)){C=l.getDatasetMeta(h),s=C.data,D=C.controller;break}if(!s)return 0;for(h=0,_=s.length;h<_;++h)L=D.resolveDataElementOptions(h),"inner"!==L.borderAlign&&(o=Math.max(o,L.borderWidth||0,L.hoverBorderWidth||0));return o}getMaxOffset(s){let o=0;for(let l=0,h=s.length;l<h;++l){const _=this.resolveDataElementOptions(l);o=Math.max(o,_.offset||0,_.hoverOffset||0)}return o}_getRingWeightOffset(s){let o=0;for(let l=0;l<s;++l)this.chart.isDatasetVisible(l)&&(o+=this._getRingWeight(l));return o}_getRingWeight(s){return Math.max(it(this.chart.data.datasets[s].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return p.id="doughnut",p.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},p.descriptors={_scriptable:r=>"spacing"!==r,_indexable:r=>"spacing"!==r},p.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(r){const s=r.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:o}}=r.legend.options;return s.labels.map((l,h)=>{const C=r.getDatasetMeta(0).controller.getStyle(h);return{text:l,fillStyle:C.backgroundColor,strokeStyle:C.borderColor,lineWidth:C.borderWidth,pointStyle:o,hidden:!r.getDataVisibility(h),index:h}})}return[]}},onClick(r,s,o){o.chart.toggleDataVisibility(s.index),o.chart.update()}},tooltip:{callbacks:{title:()=>"",label(r){let s=r.label;const o=": "+r.formattedValue;return Oe(s)?(s=s.slice(),s[0]+=o):s+=o,s}}}}},p})(),Xi=(()=>{class p extends Rr{initialize(){this.enableOptionSharing=!0,super.initialize()}update(s){const o=this._cachedMeta,{dataset:l,data:h=[],_dataset:_}=o,C=this.chart._animationsDisabled;let{start:D,count:L}=function(p,r,s){const o=r.length;let l=0,h=o;if(p._sorted){const{iScale:_,_parsed:C}=p,D=_.axis,{min:L,max:U,minDefined:Z,maxDefined:ue}=_.getUserBounds();Z&&(l=Mi(Math.min(co(C,_.axis,L).lo,s?o:co(r,D,_.getPixelForValue(L)).lo),0,o-1)),h=ue?Mi(Math.max(co(C,_.axis,U).hi+1,s?0:co(r,D,_.getPixelForValue(U)).hi+1),l,o)-l:o-l}return{start:l,count:h}}(o,h,C);this._drawStart=D,this._drawCount=L,function(p){const{xScale:r,yScale:s,_scaleRanges:o}=p,l={xmin:r.min,xmax:r.max,ymin:s.min,ymax:s.max};if(!o)return p._scaleRanges=l,!0;const h=o.xmin!==r.min||o.xmax!==r.max||o.ymin!==s.min||o.ymax!==s.max;return Object.assign(o,l),h}(o)&&(D=0,L=h.length),l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!_._decimated,l.points=h;const U=this.resolveDatasetElementOptions(s);this.options.showLine||(U.borderWidth=0),U.segment=this.options.segment,this.updateElement(l,void 0,{animated:!C,options:U},s),this.updateElements(h,D,L,s)}updateElements(s,o,l,h){const _="reset"===h,{iScale:C,vScale:D,_stacked:L,_dataset:U}=this._cachedMeta,Z=this.resolveDataElementOptions(o,h),ue=this.getSharedOptions(Z),we=this.includeOptions(h,ue),Ze=C.axis,ot=D.axis,{spanGaps:mt,segment:bt}=this.options,ei=Xe(mt)?mt:Number.POSITIVE_INFINITY,ki=this.chart._animationsDisabled||_||"none"===h;let mi=o>0&&this.getParsed(o-1);for(let Ci=o;Ci<o+l;++Ci){const Hi=s[Ci],Ui=this.getParsed(Ci),en=ki?Hi:{},cn=tt(Ui[ot]),Ki=en[Ze]=C.getPixelForValue(Ui[Ze],Ci),Ri=en[ot]=_||cn?D.getBasePixel():D.getPixelForValue(L?this.applyStack(D,Ui,L):Ui[ot],Ci);en.skip=isNaN(Ki)||isNaN(Ri)||cn,en.stop=Ci>0&&Ui[Ze]-mi[Ze]>ei,bt&&(en.parsed=Ui,en.raw=U.data[Ci]),we&&(en.options=ue||this.resolveDataElementOptions(Ci,Hi.active?"active":h)),ki||this.updateElement(Hi,Ci,en,h),mi=Ui}this.updateSharedOptions(ue,h,Z)}getMaxOverflow(){const s=this._cachedMeta,o=s.dataset,l=o.options&&o.options.borderWidth||0,h=s.data||[];if(!h.length)return l;const _=h[0].size(this.resolveDataElementOptions(0)),C=h[h.length-1].size(this.resolveDataElementOptions(h.length-1));return Math.max(l,_,C)/2}draw(){const s=this._cachedMeta;s.dataset.updateControlPoints(this.chart.chartArea,s.iScale.axis),super.draw()}}return p.id="line",p.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},p.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},p})();var oa=Object.freeze({__proto__:null,BarController:je,BubbleController:ft,DoughnutController:ai,LineController:Xi,PolarAreaController:(()=>{class p extends Rr{constructor(s,o){super(s,o),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(s){const l=this.chart,h=l.data.labels||[],_=kn(this._cachedMeta._parsed[s].r,l.options.locale);return{label:h[s]||"",value:_}}update(s){const o=this._cachedMeta.data;this._updateRadius(),this.updateElements(o,0,o.length,s)}_updateRadius(){const s=this.chart,o=s.chartArea,l=s.options,h=Math.min(o.right-o.left,o.bottom-o.top),_=Math.max(h/2,0),D=(_-Math.max(l.cutoutPercentage?_/100*l.cutoutPercentage:1,0))/s.getVisibleDatasetCount();this.outerRadius=_-D*this.index,this.innerRadius=this.outerRadius-D}updateElements(s,o,l,h){const _="reset"===h,C=this.chart,D=this.getDataset(),U=C.options.animation,Z=this._cachedMeta.rScale,ue=Z.xCenter,we=Z.yCenter,Ze=Z.getIndexAngle(0)-.5*de;let mt,ot=Ze;const bt=360/this.countVisibleElements();for(mt=0;mt<o;++mt)ot+=this._computeAngle(mt,h,bt);for(mt=o;mt<o+l;mt++){const ei=s[mt];let ki=ot,mi=ot+this._computeAngle(mt,h,bt),Ci=C.getDataVisibility(mt)?Z.getDistanceFromCenterForValue(D.data[mt]):0;ot=mi,_&&(U.animateScale&&(Ci=0),U.animateRotate&&(ki=mi=Ze));const Hi={x:ue,y:we,innerRadius:0,outerRadius:Ci,startAngle:ki,endAngle:mi,options:this.resolveDataElementOptions(mt,ei.active?"active":h)};this.updateElement(ei,mt,Hi,h)}}countVisibleElements(){const s=this.getDataset();let l=0;return this._cachedMeta.data.forEach((h,_)=>{!isNaN(s.data[_])&&this.chart.getDataVisibility(_)&&l++}),l}_computeAngle(s,o,l){return this.chart.getDataVisibility(s)?si(this.resolveDataElementOptions(s,o).angle||l):0}}return p.id="polarArea",p.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},p.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(r){const s=r.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:o}}=r.legend.options;return s.labels.map((l,h)=>{const C=r.getDatasetMeta(0).controller.getStyle(h);return{text:l,fillStyle:C.backgroundColor,strokeStyle:C.borderColor,lineWidth:C.borderWidth,pointStyle:o,hidden:!r.getDataVisibility(h),index:h}})}return[]}},onClick(r,s,o){o.chart.toggleDataVisibility(s.index),o.chart.update()}},tooltip:{callbacks:{title:()=>"",label:r=>r.chart.data.labels[r.dataIndex]+": "+r.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},p})(),PieController:(()=>{class p extends ai{}return p.id="pie",p.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},p})(),RadarController:(()=>{class p extends Rr{getLabelAndValue(s){const o=this._cachedMeta.vScale,l=this.getParsed(s);return{label:o.getLabels()[s],value:""+o.getLabelForValue(l[o.axis])}}update(s){const o=this._cachedMeta,l=o.dataset,h=o.data||[],_=o.iScale.getLabels();if(l.points=h,"resize"!==s){const C=this.resolveDatasetElementOptions(s);this.options.showLine||(C.borderWidth=0),this.updateElement(l,void 0,{_loop:!0,_fullLoop:_.length===h.length,options:C},s)}this.updateElements(h,0,h.length,s)}updateElements(s,o,l,h){const _=this.getDataset(),C=this._cachedMeta.rScale,D="reset"===h;for(let L=o;L<o+l;L++){const U=s[L],Z=this.resolveDataElementOptions(L,U.active?"active":h),ue=C.getPointPositionForValue(L,_.data[L]),we=D?C.xCenter:ue.x,Ze=D?C.yCenter:ue.y,ot={x:we,y:Ze,angle:ue.angle,skip:isNaN(we)||isNaN(Ze),options:Z};this.updateElement(U,L,ot,h)}}}return p.id="radar",p.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},p.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},p})(),ScatterController:(()=>{class p extends Xi{}return p.id="scatter",p.defaults={showLine:!1,fill:!1},p.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:r=>"("+r.label+", "+r.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},p})()});function po(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var rr={_date:(()=>{class p{constructor(s){this.options=s||{}}formats(){return po()}parse(s,o){return po()}format(s,o){return po()}add(s,o,l){return po()}diff(s,o,l){return po()}startOf(s,o,l){return po()}endOf(s,o){return po()}}return p.override=function(r){Object.assign(p.prototype,r)},p})()};function Nr(p,r){return"native"in p?{x:p.x,y:p.y}:Me(p,r)}function Ol(p,r,s,o){const{controller:l,data:h,_sorted:_}=p,C=l._cachedMeta.iScale;if(C&&r===C.axis&&"r"!==r&&_&&h.length){const D=C._reversePixels?so:co;if(!o)return D(h,r,s);if(l._sharedOptions){const L=h[0],U="function"==typeof L.getRange&&L.getRange(r);if(U){const Z=D(h,r,s-U),ue=D(h,r,s+U);return{lo:Z.lo,hi:ue.hi}}}}return{lo:0,hi:h.length-1}}function ul(p,r,s,o,l){const h=p.getSortedVisibleDatasetMetas(),_=s[r];for(let C=0,D=h.length;C<D;++C){const{index:L,data:U}=h[C],{lo:Z,hi:ue}=Ol(h[C],r,_,l);for(let we=Z;we<=ue;++we){const Ze=U[we];Ze.skip||o(Ze,L,we)}}}function Po(p,r,s,o){const l=[];return vo(r,p.chartArea,p._minPadding)&&ul(p,s,r,function(_,C,D){_.inRange(r.x,r.y,o)&&l.push({element:_,datasetIndex:C,index:D})},!0),l}function Es(p,r,s,o,l){return vo(r,p.chartArea,p._minPadding)?"r"!==s||o?function(p,r,s,o,l){let h=[];const _=function(p){const r=-1!==p.indexOf("x"),s=-1!==p.indexOf("y");return function(o,l){const h=r?Math.abs(o.x-l.x):0,_=s?Math.abs(o.y-l.y):0;return Math.sqrt(Math.pow(h,2)+Math.pow(_,2))}}(s);let C=Number.POSITIVE_INFINITY;return ul(p,s,r,function(L,U,Z){const ue=L.inRange(r.x,r.y,l);if(o&&!ue)return;const we=L.getCenterPoint(l);if(!vo(we,p.chartArea,p._minPadding)&&!ue)return;const ot=_(r,we);ot<C?(h=[{element:L,datasetIndex:U,index:Z}],C=ot):ot===C&&h.push({element:L,datasetIndex:U,index:Z})}),h}(p,r,s,o,l):function(p,r,s,o){let l=[];return ul(p,s,r,function(_,C,D){const{startAngle:L,endAngle:U}=_.getProps(["startAngle","endAngle"],o),{angle:Z}=xi(_,{x:r.x,y:r.y});Zi(Z,L,U)&&l.push({element:_,datasetIndex:C,index:D})}),l}(p,r,s,l):[]}function Ll(p,r,s,o){const l=Nr(r,p),h=[],_=s.axis,C="x"===_?"inXRange":"inYRange";let D=!1;return function(p,r){const s=p.getSortedVisibleDatasetMetas();let o,l,h;for(let _=0,C=s.length;_<C;++_){({index:o,data:l}=s[_]);for(let D=0,L=l.length;D<L;++D)h=l[D],h.skip||r(h,o,D)}}(p,(L,U,Z)=>{L[C](l[_],o)&&h.push({element:L,datasetIndex:U,index:Z}),L.inRange(l.x,l.y,o)&&(D=!0)}),s.intersect&&!D?[]:h}var Lc={modes:{index(p,r,s,o){const l=Nr(r,p),h=s.axis||"x",_=s.intersect?Po(p,l,h,o):Es(p,l,h,!1,o),C=[];return _.length?(p.getSortedVisibleDatasetMetas().forEach(D=>{const L=_[0].index,U=D.data[L];U&&!U.skip&&C.push({element:U,datasetIndex:D.index,index:L})}),C):[]},dataset(p,r,s,o){const l=Nr(r,p),h=s.axis||"xy";let _=s.intersect?Po(p,l,h,o):Es(p,l,h,!1,o);if(_.length>0){const C=_[0].datasetIndex,D=p.getDatasetMeta(C).data;_=[];for(let L=0;L<D.length;++L)_.push({element:D[L],datasetIndex:C,index:L})}return _},point:(p,r,s,o)=>Po(p,Nr(r,p),s.axis||"xy",o),nearest:(p,r,s,o)=>Es(p,Nr(r,p),s.axis||"xy",s.intersect,o),x:(p,r,s,o)=>Ll(p,r,{axis:"x",intersect:s.intersect},o),y:(p,r,s,o)=>Ll(p,r,{axis:"y",intersect:s.intersect},o)}};const eo=["left","top","right","bottom"];function wc(p,r){return p.filter(s=>s.pos===r)}function qu(p,r){return p.filter(s=>-1===eo.indexOf(s.pos)&&s.box.axis===r)}function Pc(p,r){return p.sort((s,o)=>{const l=r?o:s,h=r?s:o;return l.weight===h.weight?l.index-h.index:l.weight-h.weight})}function dl(p,r,s,o){return Math.max(p[s],r[s])+Math.max(p[o],r[o])}function du(p,r){p.top=Math.max(p.top,r.top),p.left=Math.max(p.left,r.left),p.bottom=Math.max(p.bottom,r.bottom),p.right=Math.max(p.right,r.right)}function Vo(p,r,s,o){const{pos:l,box:h}=s,_=p.maxPadding;if(!Se(l)){s.size&&(p[l]-=s.size);const Z=o[s.stack]||{size:0,count:1};Z.size=Math.max(Z.size,s.horizontal?h.height:h.width),s.size=Z.size/Z.count,p[l]+=s.size}h.getPadding&&du(_,h.getPadding());const C=Math.max(0,r.outerWidth-dl(_,p,"left","right")),D=Math.max(0,r.outerHeight-dl(_,p,"top","bottom")),L=C!==p.w,U=D!==p.h;return p.w=C,p.h=D,s.horizontal?{same:L,other:U}:{same:U,other:L}}function Da(p,r){const s=r.maxPadding;return function(l){const h={left:0,top:0,right:0,bottom:0};return l.forEach(_=>{h[_]=Math.max(r[_],s[_])}),h}(p?["left","right"]:["top","bottom"])}function rc(p,r,s,o){const l=[];let h,_,C,D,L,U;for(h=0,_=p.length,L=0;h<_;++h){C=p[h],D=C.box,D.update(C.width||r.w,C.height||r.h,Da(C.horizontal,r));const{same:Z,other:ue}=Vo(r,s,C,o);L|=Z&&l.length,U=U||ue,D.fullSize||l.push(C)}return L&&rc(l,r,s,o)||U}function Ya(p,r,s,o,l){p.top=s,p.left=r,p.right=r+o,p.bottom=s+l,p.width=o,p.height=l}function Ir(p,r,s,o){const l=s.padding;let{x:h,y:_}=r;for(const C of p){const D=C.box,L=o[C.stack]||{count:1,placed:0,weight:1},U=C.stackWeight/L.weight||1;if(C.horizontal){const Z=r.w*U,ue=L.size||D.height;Ce(L.start)&&(_=L.start),D.fullSize?Ya(D,l.left,_,s.outerWidth-l.right-l.left,ue):Ya(D,r.left+L.placed,_,Z,ue),L.start=_,L.placed+=Z,_=D.bottom}else{const Z=r.h*U,ue=L.size||D.width;Ce(L.start)&&(h=L.start),D.fullSize?Ya(D,h,l.top,ue,s.outerHeight-l.bottom-l.top):Ya(D,h,r.top+L.placed,ue,Z),L.start=h,L.placed+=Z,h=D.right}}r.x=h,r.y=_}Vn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ws={addBox(p,r){p.boxes||(p.boxes=[]),r.fullSize=r.fullSize||!1,r.position=r.position||"top",r.weight=r.weight||0,r._layers=r._layers||function(){return[{z:0,draw(s){r.draw(s)}}]},p.boxes.push(r)},removeBox(p,r){const s=p.boxes?p.boxes.indexOf(r):-1;-1!==s&&p.boxes.splice(s,1)},configure(p,r,s){r.fullSize=s.fullSize,r.position=s.position,r.weight=s.weight},update(p,r,s,o){if(!p)return;const l=ys(p.options.layout.padding),h=Math.max(r-l.width,0),_=Math.max(s-l.height,0),C=function(p){const r=function(p){const r=[];let s,o,l,h,_,C;for(s=0,o=(p||[]).length;s<o;++s)l=p[s],({position:h,options:{stack:_,stackWeight:C=1}}=l),r.push({index:s,box:l,pos:h,horizontal:l.isHorizontal(),weight:l.weight,stack:_&&h+_,stackWeight:C});return r}(p),s=Pc(r.filter(L=>L.box.fullSize),!0),o=Pc(wc(r,"left"),!0),l=Pc(wc(r,"right")),h=Pc(wc(r,"top"),!0),_=Pc(wc(r,"bottom")),C=qu(r,"x"),D=qu(r,"y");return{fullSize:s,leftAndTop:o.concat(h),rightAndBottom:l.concat(D).concat(_).concat(C),chartArea:wc(r,"chartArea"),vertical:o.concat(l).concat(D),horizontal:h.concat(_).concat(C)}}(p.boxes),D=C.vertical,L=C.horizontal;se(p.boxes,ot=>{"function"==typeof ot.beforeLayout&&ot.beforeLayout()});const U=D.reduce((ot,mt)=>mt.box.options&&!1===mt.box.options.display?ot:ot+1,0)||1,Z=Object.freeze({outerWidth:r,outerHeight:s,padding:l,availableWidth:h,availableHeight:_,vBoxMaxWidth:h/2/U,hBoxMaxHeight:_/2}),ue=Object.assign({},l);du(ue,ys(o));const we=Object.assign({maxPadding:ue,w:h,h:_,x:l.left,y:l.top},l),Ze=function(p,r){const s=function(p){const r={};for(const s of p){const{stack:o,pos:l,stackWeight:h}=s;if(!o||!eo.includes(l))continue;const _=r[o]||(r[o]={count:0,placed:0,weight:0,size:0});_.count++,_.weight+=h}return r}(p),{vBoxMaxWidth:o,hBoxMaxHeight:l}=r;let h,_,C;for(h=0,_=p.length;h<_;++h){C=p[h];const{fullSize:D}=C.box,L=s[C.stack],U=L&&C.stackWeight/L.weight;C.horizontal?(C.width=U?U*o:D&&r.availableWidth,C.height=l):(C.width=o,C.height=U?U*l:D&&r.availableHeight)}return s}(D.concat(L),Z);rc(C.fullSize,we,Z,Ze),rc(D,we,Z,Ze),rc(L,we,Z,Ze)&&rc(D,we,Z,Ze),function(p){const r=p.maxPadding;function s(o){const l=Math.max(r[o]-p[o],0);return p[o]+=l,l}p.y+=s("top"),p.x+=s("left"),s("right"),s("bottom")}(we),Ir(C.leftAndTop,we,Z,Ze),we.x+=we.w,we.y+=we.h,Ir(C.rightAndBottom,we,Z,Ze),p.chartArea={left:we.left,top:we.top,right:we.left+we.w,bottom:we.top+we.h,height:we.h,width:we.w},se(C.chartArea,ot=>{const mt=ot.box;Object.assign(mt,p.chartArea),mt.update(we.w,we.h,{left:0,top:0,right:0,bottom:0})})}};class Fr{acquireContext(r,s){}releaseContext(r){return!1}addEventListener(r,s,o){}removeEventListener(r,s,o){}getDevicePixelRatio(){return 1}getMaximumSize(r,s,o,l){return s=Math.max(0,s||r.width),o=o||r.height,{width:s,height:Math.max(0,l?Math.floor(s/l):o)}}isAttached(r){return!0}updateConfig(r){}}class va extends Fr{acquireContext(r){return r&&r.getContext&&r.getContext("2d")||null}updateConfig(r){r.options.animation=!1}}const hl="$chartjs",hu={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Br=p=>null===p||""===p,Hr=!!gi&&{passive:!0};function Xa(p,r,s){p.canvas.removeEventListener(r,s,Hr)}function pl(p,r){for(const s of p)if(s===r||s.contains(r))return!0}function Nl(p,r,s){const o=p.canvas,l=new MutationObserver(h=>{let _=!1;for(const C of h)_=_||pl(C.addedNodes,o),_=_&&!pl(C.removedNodes,o);_&&s()});return l.observe(document,{childList:!0,subtree:!0}),l}function Rd(p,r,s){const o=p.canvas,l=new MutationObserver(h=>{let _=!1;for(const C of h)_=_||pl(C.removedNodes,o),_=_&&!pl(C.addedNodes,o);_&&s()});return l.observe(document,{childList:!0,subtree:!0}),l}const Ur=new Map;let Fl=0;function Fc(){const p=window.devicePixelRatio;p!==Fl&&(Fl=p,Ur.forEach((r,s)=>{s.currentDevicePixelRatio!==p&&r()}))}function xs(p,r,s){const o=p.canvas,l=o&&fa(o);if(!l)return;const h=Ae((C,D)=>{const L=l.clientWidth;s(C,D),L<l.clientWidth&&s()},window),_=new ResizeObserver(C=>{const D=C[0],L=D.contentRect.width,U=D.contentRect.height;0===L&&0===U||h(L,U)});return _.observe(l),function(p,r){Ur.size||window.addEventListener("resize",Fc),Ur.set(p,r)}(p,h),_}function ac(p,r,s){s&&s.disconnect(),"resize"===r&&function(p){Ur.delete(p),Ur.size||window.removeEventListener("resize",Fc)}(p)}function Hl(p,r,s){const o=p.canvas,l=Ae(h=>{null!==p.ctx&&s(function(p,r){const s=hu[p.type]||p.type,{x:o,y:l}=Me(p,r);return{type:s,chart:r,native:p,x:void 0!==o?o:null,y:void 0!==l?l:null}}(h,p))},p,h=>{const _=h[0];return[_,_.offsetX,_.offsetY]});return function(p,r,s){p.addEventListener(r,s,Hr)}(o,r,l),l}class fl extends Fr{acquireContext(r,s){const o=r&&r.getContext&&r.getContext("2d");return o&&o.canvas===r?(function(p,r){const s=p.style,o=p.getAttribute("height"),l=p.getAttribute("width");if(p[hl]={initial:{height:o,width:l,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Br(l)){const h=Bi(p,"width");void 0!==h&&(p.width=h)}if(Br(o))if(""===p.style.height)p.height=p.width/(r||2);else{const h=Bi(p,"height");void 0!==h&&(p.height=h)}}(r,s),o):null}releaseContext(r){const s=r.canvas;if(!s[hl])return!1;const o=s[hl].initial;["height","width"].forEach(h=>{const _=o[h];tt(_)?s.removeAttribute(h):s.setAttribute(h,_)});const l=o.style||{};return Object.keys(l).forEach(h=>{s.style[h]=l[h]}),s.width=s.width,delete s[hl],!0}addEventListener(r,s,o){this.removeEventListener(r,s),(r.$proxies||(r.$proxies={}))[s]=({attach:Nl,detach:Rd,resize:xs}[s]||Hl)(r,s,o)}removeEventListener(r,s){const o=r.$proxies||(r.$proxies={}),l=o[s];l&&(({attach:ac,detach:ac,resize:ac}[s]||Xa)(r,s,l),o[s]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(r,s,o,l){return function(p,r,s,o){const l=tr(p),h=N(l,"margin"),_=er(l.maxWidth,p,"clientWidth")||Kt,C=er(l.maxHeight,p,"clientHeight")||Kt,D=function(p,r,s){let o,l;if(void 0===r||void 0===s){const h=fa(p);if(h){const _=h.getBoundingClientRect(),C=tr(h),D=N(C,"border","width"),L=N(C,"padding");r=_.width-L.width-D.width,s=_.height-L.height-D.height,o=er(C.maxWidth,h,"clientWidth"),l=er(C.maxHeight,h,"clientHeight")}else r=p.clientWidth,s=p.clientHeight}return{width:r,height:s,maxWidth:o||Kt,maxHeight:l||Kt}}(p,r,s);let{width:L,height:U}=D;if("content-box"===l.boxSizing){const Z=N(l,"border","width"),ue=N(l,"padding");L-=ue.width+Z.width,U-=ue.height+Z.height}return L=Math.max(0,L-h.width),U=Math.max(0,o?Math.floor(L/o):U-h.height),L=Ct(Math.min(L,_,D.maxWidth)),U=Ct(Math.min(U,C,D.maxHeight)),L&&!U&&(U=Ct(L/2)),{width:L,height:U}}(r,s,o,l)}isAttached(r){const s=fa(r);return!(!s||!s.isConnected)}}class yr{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(r){const{x:s,y:o}=this.getProps(["x","y"],r);return{x:s,y:o}}hasValue(){return Xe(this.x)&&Xe(this.y)}getProps(r,s){const o=this.$animations;if(!s||!o)return this;const l={};return r.forEach(h=>{l[h]=o[h]&&o[h].active()?o[h]._to:this[h]}),l}}yr.defaults={},yr.defaultRoutes=void 0;const Bc={values:p=>Oe(p)?p:""+p,numeric(p,r,s){if(0===p)return"0";const o=this.chart.options.locale;let l,h=p;if(s.length>1){const L=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(L<1e-4||L>1e15)&&(l="scientific"),h=function(p,r){let s=r.length>3?r[2].value-r[1].value:r[1].value-r[0].value;return Math.abs(s)>=1&&p!==Math.floor(p)&&(s=p-Math.floor(p)),s}(p,s)}const _=Ue(Math.abs(h)),C=Math.max(Math.min(-1*Math.floor(_),20),0),D={notation:l,minimumFractionDigits:C,maximumFractionDigits:C};return Object.assign(D,this.options.ticks.format),kn(p,o,D)},logarithmic(p,r,s){if(0===p)return"0";const o=p/Math.pow(10,Math.floor(Ue(p)));return 1===o||2===o||5===o?Bc.numeric.call(this,p,r,s):""}};var Mc={formatters:Bc};function ml(p,r,s,o,l){const h=it(o,0),_=Math.min(it(l,p.length),p.length);let D,L,U,C=0;for(s=Math.ceil(s),l&&(D=l-o,s=D/Math.floor(D/s)),U=h;U<0;)C++,U=Math.round(h+C*s);for(L=Math.max(h,0);L<_;L++)L===U&&(r.push(p[L]),C++,U=Math.round(h+C*s))}Vn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(p,r)=>r.lineWidth,tickColor:(p,r)=>r.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Mc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Vn.route("scale.ticks","color","","color"),Vn.route("scale.grid","color","","borderColor"),Vn.route("scale.grid","borderColor","","borderColor"),Vn.route("scale.title","color","","color"),Vn.describe("scale",{_fallback:!1,_scriptable:p=>!p.startsWith("before")&&!p.startsWith("after")&&"callback"!==p&&"parser"!==p,_indexable:p=>"borderDash"!==p&&"tickBorderDash"!==p}),Vn.describe("scales",{_fallback:"scale"}),Vn.describe("scale.ticks",{_scriptable:p=>"backdropPadding"!==p&&"callback"!==p,_indexable:p=>"backdropPadding"!==p});const lc=(p,r,s)=>"top"===r||"left"===r?p[r]+s:p[r]-s;function _l(p,r){const s=[],o=p.length/r,l=p.length;let h=0;for(;h<l;h+=o)s.push(p[Math.floor(h)]);return s}function vl(p,r,s){const o=p.ticks.length,l=Math.min(r,o-1),h=p._startPixel,_=p._endPixel,C=1e-6;let L,D=p.getPixelForTick(l);if(!(s&&(L=1===o?Math.max(D-h,_-D):0===r?(p.getPixelForTick(1)-D)/2:(D-p.getPixelForTick(l-1))/2,D+=l<r?L:-L,D<h-C||D>_+C)))return D}function Rc(p){return p.drawTicks?p.tickLength:0}function xc(p,r){if(!p.display)return 0;const s=Vs(p.font,r),o=ys(p.padding);return(Oe(p.text)?p.text.length:1)*s.lineHeight+o.height}function bl(p,r,s){let o=st(p);return(s&&"right"!==r||!s&&"right"===r)&&(o=(p=>"left"===p?"right":"right"===p?"left":p)(o)),o}class Gr extends yr{constructor(r){super(),this.id=r.id,this.type=r.type,this.options=void 0,this.ctx=r.ctx,this.chart=r.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(r){this.options=r.setContext(this.getContext()),this.axis=r.axis,this._userMin=this.parse(r.min),this._userMax=this.parse(r.max),this._suggestedMin=this.parse(r.suggestedMin),this._suggestedMax=this.parse(r.suggestedMax)}parse(r,s){return r}getUserBounds(){let{_userMin:r,_userMax:s,_suggestedMin:o,_suggestedMax:l}=this;return r=dt(r,Number.POSITIVE_INFINITY),s=dt(s,Number.NEGATIVE_INFINITY),o=dt(o,Number.POSITIVE_INFINITY),l=dt(l,Number.NEGATIVE_INFINITY),{min:dt(r,o),max:dt(s,l),minDefined:Qe(r),maxDefined:Qe(s)}}getMinMax(r){let _,{min:s,max:o,minDefined:l,maxDefined:h}=this.getUserBounds();if(l&&h)return{min:s,max:o};const C=this.getMatchingVisibleMetas();for(let D=0,L=C.length;D<L;++D)_=C[D].controller.getMinMax(this,r),l||(s=Math.min(s,_.min)),h||(o=Math.max(o,_.max));return s=h&&s>o?o:s,o=l&&s>o?s:o,{min:dt(s,dt(o,s)),max:dt(o,dt(s,o))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const r=this.chart.data;return this.options.labels||(this.isHorizontal()?r.xLabels:r.yLabels)||r.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ge(this.options.beforeUpdate,[this])}update(r,s,o){const{beginAtZero:l,grace:h,ticks:_}=this.options,C=_.sampleSize;this.beforeUpdate(),this.maxWidth=r,this.maxHeight=s,this._margins=o=Object.assign({left:0,right:0,top:0,bottom:0},o),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+o.left+o.right:this.height+o.top+o.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(p,r,s){const{min:o,max:l}=p,h=Re(r,(l-o)/2),_=(C,D)=>s&&0===C?0:C+D;return{min:_(o,-Math.abs(h)),max:_(l,h)}}(this,h,l),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const D=C<this.ticks.length;this._convertTicksToLabels(D?_l(this.ticks,C):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),_.display&&(_.autoSkip||"auto"===_.source)&&(this.ticks=function(p,r){const s=p.options.ticks,o=s.maxTicksLimit||function(p){const r=p.options.offset,s=p._tickSize();return Math.floor(Math.min(p._length/s+(r?0:1),p._maxLength/s))}(p),l=s.major.enabled?function(p){const r=[];let s,o;for(s=0,o=p.length;s<o;s++)p[s].major&&r.push(s);return r}(r):[],h=l.length,_=l[0],C=l[h-1],D=[];if(h>o)return function(p,r,s,o){let _,l=0,h=s[0];for(o=Math.ceil(o),_=0;_<p.length;_++)_===h&&(r.push(p[_]),l++,h=s[l*o])}(r,D,l,h/o),D;const L=function(p,r,s){const o=function(p){const r=p.length;let s,o;if(r<2)return!1;for(o=p[0],s=1;s<r;++s)if(p[s]-p[s-1]!==o)return!1;return o}(p),l=r.length/s;if(!o)return Math.max(l,1);const h=function(p){const r=[],s=Math.sqrt(p);let o;for(o=1;o<s;o++)p%o==0&&(r.push(o),r.push(p/o));return s===(0|s)&&r.push(s),r.sort((l,h)=>l-h).pop(),r}(o);for(let _=0,C=h.length-1;_<C;_++){const D=h[_];if(D>l)return D}return Math.max(l,1)}(l,r,o);if(h>0){let U,Z;const ue=h>1?Math.round((C-_)/(h-1)):null;for(ml(r,D,L,tt(ue)?0:_-ue,_),U=0,Z=h-1;U<Z;U++)ml(r,D,L,l[U],l[U+1]);return ml(r,D,L,C,tt(ue)?r.length:C+ue),D}return ml(r,D,L),D}(this,this.ticks),this._labelSizes=null),D&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let s,o,r=this.options.reverse;this.isHorizontal()?(s=this.left,o=this.right):(s=this.top,o=this.bottom,r=!r),this._startPixel=s,this._endPixel=o,this._reversePixels=r,this._length=o-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ge(this.options.afterUpdate,[this])}beforeSetDimensions(){ge(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ge(this.options.afterSetDimensions,[this])}_callHooks(r){this.chart.notifyPlugins(r,this.getContext()),ge(this.options[r],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ge(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(r){const s=this.options.ticks;let o,l,h;for(o=0,l=r.length;o<l;o++)h=r[o],h.label=ge(s.callback,[h.value,o,r],this)}afterTickToLabelConversion(){ge(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ge(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const r=this.options,s=r.ticks,o=this.ticks.length,l=s.minRotation||0,h=s.maxRotation;let C,D,L,_=l;if(!this._isVisible()||!s.display||l>=h||o<=1||!this.isHorizontal())return void(this.labelRotation=l);const U=this._getLabelSizes(),Z=U.widest.width,ue=U.highest.height,we=Mi(this.chart.width-Z,0,this.maxWidth);C=r.offset?this.maxWidth/o:we/(o-1),Z+6>C&&(C=we/(o-(r.offset?.5:1)),D=this.maxHeight-Rc(r.grid)-s.padding-xc(r.title,this.chart.options.font),L=Math.sqrt(Z*Z+ue*ue),_=ni(Math.min(Math.asin(Mi((U.highest.height+6)/C,-1,1)),Math.asin(Mi(D/L,-1,1))-Math.asin(Mi(ue/L,-1,1)))),_=Math.max(l,Math.min(h,_))),this.labelRotation=_}afterCalculateLabelRotation(){ge(this.options.afterCalculateLabelRotation,[this])}beforeFit(){ge(this.options.beforeFit,[this])}fit(){const r={width:0,height:0},{chart:s,options:{ticks:o,title:l,grid:h}}=this,_=this._isVisible(),C=this.isHorizontal();if(_){const D=xc(l,s.options.font);if(C?(r.width=this.maxWidth,r.height=Rc(h)+D):(r.height=this.maxHeight,r.width=Rc(h)+D),o.display&&this.ticks.length){const{first:L,last:U,widest:Z,highest:ue}=this._getLabelSizes(),we=2*o.padding,Ze=si(this.labelRotation),ot=Math.cos(Ze),mt=Math.sin(Ze);C?r.height=Math.min(this.maxHeight,r.height+(o.mirror?0:mt*Z.width+ot*ue.height)+we):r.width=Math.min(this.maxWidth,r.width+(o.mirror?0:ot*Z.width+mt*ue.height)+we),this._calculatePadding(L,U,mt,ot)}}this._handleMargins(),C?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=r.height):(this.width=r.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(r,s,o,l){const{ticks:{align:h,padding:_},position:C}=this.options,D=0!==this.labelRotation,L="top"!==C&&"x"===this.axis;if(this.isHorizontal()){const U=this.getPixelForTick(0)-this.left,Z=this.right-this.getPixelForTick(this.ticks.length-1);let ue=0,we=0;D?L?(ue=l*r.width,we=o*s.height):(ue=o*r.height,we=l*s.width):"start"===h?we=s.width:"end"===h?ue=r.width:(ue=r.width/2,we=s.width/2),this.paddingLeft=Math.max((ue-U+_)*this.width/(this.width-U),0),this.paddingRight=Math.max((we-Z+_)*this.width/(this.width-Z),0)}else{let U=s.height/2,Z=r.height/2;"start"===h?(U=0,Z=r.height):"end"===h&&(U=s.height,Z=0),this.paddingTop=U+_,this.paddingBottom=Z+_}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ge(this.options.afterFit,[this])}isHorizontal(){const{axis:r,position:s}=this.options;return"top"===s||"bottom"===s||"x"===r}isFullSize(){return this.options.fullSize}_convertTicksToLabels(r){let s,o;for(this.beforeTickToLabelConversion(),this.generateTickLabels(r),s=0,o=r.length;s<o;s++)tt(r[s].label)&&(r.splice(s,1),o--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let r=this._labelSizes;if(!r){const s=this.options.ticks.sampleSize;let o=this.ticks;s<o.length&&(o=_l(o,s)),this._labelSizes=r=this._computeLabelSizes(o,o.length)}return r}_computeLabelSizes(r,s){const{ctx:o,_longestTextCache:l}=this,h=[],_=[];let L,U,Z,ue,we,Ze,ot,mt,bt,ei,ki,C=0,D=0;for(L=0;L<s;++L){if(ue=r[L].label,we=this._resolveTickFontOptions(L),o.font=Ze=we.string,ot=l[Ze]=l[Ze]||{data:{},gc:[]},mt=we.lineHeight,bt=ei=0,tt(ue)||Oe(ue)){if(Oe(ue))for(U=0,Z=ue.length;U<Z;++U)ki=ue[U],!tt(ki)&&!Oe(ki)&&(bt=Rs(o,ot.data,ot.gc,bt,ki),ei+=mt)}else bt=Rs(o,ot.data,ot.gc,bt,ue),ei=mt;h.push(bt),_.push(ei),C=Math.max(bt,C),D=Math.max(ei,D)}!function(p,r){se(p,s=>{const o=s.gc,l=o.length/2;let h;if(l>r){for(h=0;h<l;++h)delete s.data[o[h]];o.splice(0,l)}})}(l,s);const mi=h.indexOf(C),Ci=_.indexOf(D),Hi=Ui=>({width:h[Ui]||0,height:_[Ui]||0});return{first:Hi(0),last:Hi(s-1),widest:Hi(mi),highest:Hi(Ci),widths:h,heights:_}}getLabelForValue(r){return r}getPixelForValue(r,s){return NaN}getValueForPixel(r){}getPixelForTick(r){const s=this.ticks;return r<0||r>s.length-1?null:this.getPixelForValue(s[r].value)}getPixelForDecimal(r){this._reversePixels&&(r=1-r);const s=this._startPixel+r*this._length;return Mi(this._alignToPixels?Jo(this.chart,s,0):s,-32768,32767)}getDecimalForPixel(r){const s=(r-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:r,max:s}=this;return r<0&&s<0?s:r>0&&s>0?r:0}getContext(r){const s=this.ticks||[];if(r>=0&&r<s.length){const o=s[r];return o.$context||(o.$context=function(p,r,s){return lo(p,{tick:s,index:r,type:"tick"})}(this.getContext(),r,o))}return this.$context||(this.$context=function(p,r){return lo(p,{scale:r,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const r=this.options.ticks,s=si(this.labelRotation),o=Math.abs(Math.cos(s)),l=Math.abs(Math.sin(s)),h=this._getLabelSizes(),_=r.autoSkipPadding||0,C=h?h.widest.width+_:0,D=h?h.highest.height+_:0;return this.isHorizontal()?D*o>C*l?C/o:D/l:D*l<C*o?D/o:C/l}_isVisible(){const r=this.options.display;return"auto"!==r?!!r:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(r){const s=this.axis,o=this.chart,l=this.options,{grid:h,position:_}=l,C=h.offset,D=this.isHorizontal(),U=this.ticks.length+(C?1:0),Z=Rc(h),ue=[],we=h.setContext(this.getContext()),Ze=we.drawBorder?we.borderWidth:0,ot=Ze/2,mt=function(fi){return Jo(o,fi,Ze)};let bt,ei,ki,mi,Ci,Hi,Ui,en,cn,Ki,Ri,pn;if("top"===_)bt=mt(this.bottom),Hi=this.bottom-Z,en=bt-ot,Ki=mt(r.top)+ot,pn=r.bottom;else if("bottom"===_)bt=mt(this.top),Ki=r.top,pn=mt(r.bottom)-ot,Hi=bt+ot,en=this.top+Z;else if("left"===_)bt=mt(this.right),Ci=this.right-Z,Ui=bt-ot,cn=mt(r.left)+ot,Ri=r.right;else if("right"===_)bt=mt(this.left),cn=r.left,Ri=mt(r.right)-ot,Ci=bt+ot,Ui=this.left+Z;else if("x"===s){if("center"===_)bt=mt((r.top+r.bottom)/2+.5);else if(Se(_)){const fi=Object.keys(_)[0];bt=mt(this.chart.scales[fi].getPixelForValue(_[fi]))}Ki=r.top,pn=r.bottom,Hi=bt+ot,en=Hi+Z}else if("y"===s){if("center"===_)bt=mt((r.left+r.right)/2);else if(Se(_)){const fi=Object.keys(_)[0];bt=mt(this.chart.scales[fi].getPixelForValue(_[fi]))}Ci=bt-ot,Ui=Ci-Z,cn=r.left,Ri=r.right}const Hn=it(l.ticks.maxTicksLimit,U),qt=Math.max(1,Math.ceil(U/Hn));for(ei=0;ei<U;ei+=qt){const fi=h.setContext(this.getContext(ei)),tn=fi.lineWidth,Gn=fi.color,Xn=h.borderDash||[],bs=fi.borderDashOffset,bc=fi.tickWidth,Ai=fi.tickColor,xn=fi.tickBorderDash||[],mo=fi.tickBorderDashOffset;ki=vl(this,ei,C),void 0!==ki&&(mi=Jo(o,ki,tn),D?Ci=Ui=cn=Ri=mi:Hi=en=Ki=pn=mi,ue.push({tx1:Ci,ty1:Hi,tx2:Ui,ty2:en,x1:cn,y1:Ki,x2:Ri,y2:pn,width:tn,color:Gn,borderDash:Xn,borderDashOffset:bs,tickWidth:bc,tickColor:Ai,tickBorderDash:xn,tickBorderDashOffset:mo}))}return this._ticksLength=U,this._borderValue=bt,ue}_computeLabelItems(r){const s=this.axis,o=this.options,{position:l,ticks:h}=o,_=this.isHorizontal(),C=this.ticks,{align:D,crossAlign:L,padding:U,mirror:Z}=h,ue=Rc(o.grid),we=ue+U,Ze=Z?-U:we,ot=-si(this.labelRotation),mt=[];let bt,ei,ki,mi,Ci,Hi,Ui,en,cn,Ki,Ri,pn,Hn="middle";if("top"===l)Hi=this.bottom-Ze,Ui=this._getXAxisLabelAlignment();else if("bottom"===l)Hi=this.top+Ze,Ui=this._getXAxisLabelAlignment();else if("left"===l){const fi=this._getYAxisLabelAlignment(ue);Ui=fi.textAlign,Ci=fi.x}else if("right"===l){const fi=this._getYAxisLabelAlignment(ue);Ui=fi.textAlign,Ci=fi.x}else if("x"===s){if("center"===l)Hi=(r.top+r.bottom)/2+we;else if(Se(l)){const fi=Object.keys(l)[0];Hi=this.chart.scales[fi].getPixelForValue(l[fi])+we}Ui=this._getXAxisLabelAlignment()}else if("y"===s){if("center"===l)Ci=(r.left+r.right)/2-we;else if(Se(l)){const fi=Object.keys(l)[0];Ci=this.chart.scales[fi].getPixelForValue(l[fi])}Ui=this._getYAxisLabelAlignment(ue).textAlign}"y"===s&&("start"===D?Hn="top":"end"===D&&(Hn="bottom"));const qt=this._getLabelSizes();for(bt=0,ei=C.length;bt<ei;++bt){ki=C[bt],mi=ki.label;const fi=h.setContext(this.getContext(bt));en=this.getPixelForTick(bt)+h.labelOffset,cn=this._resolveTickFontOptions(bt),Ki=cn.lineHeight,Ri=Oe(mi)?mi.length:1;const tn=Ri/2,Gn=fi.color,Xn=fi.textStrokeColor,bs=fi.textStrokeWidth;let bc;if(_?(Ci=en,pn="top"===l?"near"===L||0!==ot?-Ri*Ki+Ki/2:"center"===L?-qt.highest.height/2-tn*Ki+Ki:Ki/2-qt.highest.height:"near"===L||0!==ot?Ki/2:"center"===L?qt.highest.height/2-tn*Ki:qt.highest.height-Ri*Ki,Z&&(pn*=-1)):(Hi=en,pn=(1-Ri)*Ki/2),fi.showLabelBackdrop){const Ai=ys(fi.backdropPadding),xn=qt.heights[bt],mo=qt.widths[bt];let Yr=Hi+pn-Ai.top,ru=Ci-Ai.left;switch(Hn){case"middle":Yr-=xn/2;break;case"bottom":Yr-=xn}switch(Ui){case"center":ru-=mo/2;break;case"right":ru-=mo}bc={left:ru,top:Yr,width:mo+Ai.width,height:xn+Ai.height,color:fi.backdropColor}}mt.push({rotation:ot,label:mi,font:cn,color:Gn,strokeColor:Xn,strokeWidth:bs,textOffset:pn,textAlign:Ui,textBaseline:Hn,translation:[Ci,Hi],backdrop:bc})}return mt}_getXAxisLabelAlignment(){const{position:r,ticks:s}=this.options;if(-si(this.labelRotation))return"top"===r?"left":"right";let l="center";return"start"===s.align?l="left":"end"===s.align&&(l="right"),l}_getYAxisLabelAlignment(r){const{position:s,ticks:{crossAlign:o,mirror:l,padding:h}}=this.options,C=r+h,D=this._getLabelSizes().widest.width;let L,U;return"left"===s?l?(U=this.right+h,"near"===o?L="left":"center"===o?(L="center",U+=D/2):(L="right",U+=D)):(U=this.right-C,"near"===o?L="right":"center"===o?(L="center",U-=D/2):(L="left",U=this.left)):"right"===s?l?(U=this.left+h,"near"===o?L="right":"center"===o?(L="center",U-=D/2):(L="left",U-=D)):(U=this.left+C,"near"===o?L="left":"center"===o?(L="center",U+=D/2):(L="right",U=this.right)):L="right",{textAlign:L,x:U}}_computeLabelArea(){if(this.options.ticks.mirror)return;const r=this.chart,s=this.options.position;return"left"===s||"right"===s?{top:0,left:this.left,bottom:r.height,right:this.right}:"top"===s||"bottom"===s?{top:this.top,left:0,bottom:this.bottom,right:r.width}:void 0}drawBackground(){const{ctx:r,options:{backgroundColor:s},left:o,top:l,width:h,height:_}=this;s&&(r.save(),r.fillStyle=s,r.fillRect(o,l,h,_),r.restore())}getLineWidthForValue(r){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const l=this.ticks.findIndex(h=>h.value===r);return l>=0?s.setContext(this.getContext(l)).lineWidth:0}drawGrid(r){const s=this.options.grid,o=this.ctx,l=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(r));let h,_;const C=(D,L,U)=>{!U.width||!U.color||(o.save(),o.lineWidth=U.width,o.strokeStyle=U.color,o.setLineDash(U.borderDash||[]),o.lineDashOffset=U.borderDashOffset,o.beginPath(),o.moveTo(D.x,D.y),o.lineTo(L.x,L.y),o.stroke(),o.restore())};if(s.display)for(h=0,_=l.length;h<_;++h){const D=l[h];s.drawOnChartArea&&C({x:D.x1,y:D.y1},{x:D.x2,y:D.y2},D),s.drawTicks&&C({x:D.tx1,y:D.ty1},{x:D.tx2,y:D.ty2},{color:D.tickColor,width:D.tickWidth,borderDash:D.tickBorderDash,borderDashOffset:D.tickBorderDashOffset})}}drawBorder(){const{chart:r,ctx:s,options:{grid:o}}=this,l=o.setContext(this.getContext()),h=o.drawBorder?l.borderWidth:0;if(!h)return;const _=o.setContext(this.getContext(0)).lineWidth,C=this._borderValue;let D,L,U,Z;this.isHorizontal()?(D=Jo(r,this.left,h)-h/2,L=Jo(r,this.right,_)+_/2,U=Z=C):(U=Jo(r,this.top,h)-h/2,Z=Jo(r,this.bottom,_)+_/2,D=L=C),s.save(),s.lineWidth=l.borderWidth,s.strokeStyle=l.borderColor,s.beginPath(),s.moveTo(D,U),s.lineTo(L,Z),s.stroke(),s.restore()}drawLabels(r){if(!this.options.ticks.display)return;const o=this.ctx,l=this._computeLabelArea();l&&Js(o,l);const h=this._labelItems||(this._labelItems=this._computeLabelItems(r));let _,C;for(_=0,C=h.length;_<C;++_){const D=h[_],L=D.font,U=D.label;D.backdrop&&(o.fillStyle=D.backdrop.color,o.fillRect(D.backdrop.left,D.backdrop.top,D.backdrop.width,D.backdrop.height)),bo(o,U,0,D.textOffset,L,D)}l&&ha(o)}drawTitle(){const{ctx:r,options:{position:s,title:o,reverse:l}}=this;if(!o.display)return;const h=Vs(o.font),_=ys(o.padding),C=o.align;let D=h.lineHeight/2;"bottom"===s||"center"===s||Se(s)?(D+=_.bottom,Oe(o.text)&&(D+=h.lineHeight*(o.text.length-1))):D+=_.top;const{titleX:L,titleY:U,maxWidth:Z,rotation:ue}=function(p,r,s,o){const{top:l,left:h,bottom:_,right:C,chart:D}=p,{chartArea:L,scales:U}=D;let ue,we,Ze,Z=0;const ot=_-l,mt=C-h;if(p.isHorizontal()){if(we=Ge(o,h,C),Se(s)){const bt=Object.keys(s)[0];Ze=U[bt].getPixelForValue(s[bt])+ot-r}else Ze="center"===s?(L.bottom+L.top)/2+ot-r:lc(p,s,r);ue=C-h}else{if(Se(s)){const bt=Object.keys(s)[0];we=U[bt].getPixelForValue(s[bt])-mt+r}else we="center"===s?(L.left+L.right)/2-mt+r:lc(p,s,r);Ze=Ge(o,_,l),Z="left"===s?-ke:ke}return{titleX:we,titleY:Ze,maxWidth:ue,rotation:Z}}(this,D,s,C);bo(r,o.text,0,0,h,{color:o.color,maxWidth:Z,rotation:ue,textAlign:bl(C,s,l),textBaseline:"middle",translation:[L,U]})}draw(r){!this._isVisible()||(this.drawBackground(),this.drawGrid(r),this.drawBorder(),this.drawTitle(),this.drawLabels(r))}_layers(){const r=this.options,s=r.ticks&&r.ticks.z||0,o=it(r.grid&&r.grid.z,-1);return this._isVisible()&&this.draw===Gr.prototype.draw?[{z:o,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:o+1,draw:()=>{this.drawBorder()}},{z:s,draw:l=>{this.drawLabels(l)}}]:[{z:s,draw:l=>{this.draw(l)}}]}getMatchingVisibleMetas(r){const s=this.chart.getSortedVisibleDatasetMetas(),o=this.axis+"AxisID",l=[];let h,_;for(h=0,_=s.length;h<_;++h){const C=s[h];C[o]===this.id&&(!r||C.type===r)&&l.push(C)}return l}_resolveTickFontOptions(r){return Vs(this.options.ticks.setContext(this.getContext(r)).font)}_maxDigits(){const r=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/r}}class ba{constructor(r,s,o){this.type=r,this.scope=s,this.override=o,this.items=Object.create(null)}isForType(r){return Object.prototype.isPrototypeOf.call(this.type.prototype,r.prototype)}register(r){const s=Object.getPrototypeOf(r);let o;var p;"id"in(p=s)&&"defaults"in p&&(o=this.register(s));const l=this.items,h=r.id,_=this.scope+"."+h;if(!h)throw new Error("class does not have id: "+r);return h in l||(l[h]=r,function(p,r,s){const o=wt(Object.create(null),[s?Vn.get(s):{},Vn.get(r),p.defaults]);Vn.set(r,o),p.defaultRoutes&&function(p,r){Object.keys(r).forEach(s=>{const o=s.split("."),l=o.pop(),h=[p].concat(o).join("."),_=r[s].split("."),C=_.pop(),D=_.join(".");Vn.route(h,l,D,C)})}(r,p.defaultRoutes),p.descriptors&&Vn.describe(r,p.descriptors)}(r,_,o),this.override&&Vn.override(r.id,r.overrides)),_}get(r){return this.items[r]}unregister(r){const s=this.items,o=r.id,l=this.scope;o in s&&delete s[o],l&&o in Vn[l]&&(delete Vn[l][o],this.override&&delete Qs[o])}}var Wr=new class{constructor(){this.controllers=new ba(Rr,"datasets",!0),this.elements=new ba(yr,"elements"),this.plugins=new ba(Object,"plugins"),this.scales=new ba(Gr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...r){this._each("register",r)}remove(...r){this._each("unregister",r)}addControllers(...r){this._each("register",r,this.controllers)}addElements(...r){this._each("register",r,this.elements)}addPlugins(...r){this._each("register",r,this.plugins)}addScales(...r){this._each("register",r,this.scales)}getController(r){return this._get(r,this.controllers,"controller")}getElement(r){return this._get(r,this.elements,"element")}getPlugin(r){return this._get(r,this.plugins,"plugin")}getScale(r){return this._get(r,this.scales,"scale")}removeControllers(...r){this._each("unregister",r,this.controllers)}removeElements(...r){this._each("unregister",r,this.elements)}removePlugins(...r){this._each("unregister",r,this.plugins)}removeScales(...r){this._each("unregister",r,this.scales)}_each(r,s,o){[...s].forEach(l=>{const h=o||this._getRegistryForType(l);o||h.isForType(l)||h===this.plugins&&l.id?this._exec(r,h,l):se(l,_=>{const C=o||this._getRegistryForType(_);this._exec(r,C,_)})})}_exec(r,s,o){const l=yi(r);ge(o["before"+l],[],o),s[r](o),ge(o["after"+l],[],o)}_getRegistryForType(r){for(let s=0;s<this._typedRegistries.length;s++){const o=this._typedRegistries[s];if(o.isForType(r))return o}return this.plugins}_get(r,s,o){const l=s.get(r);if(void 0===l)throw new Error('"'+r+'" is not a registered '+o+".");return l}};class Lu{constructor(){this._init=[]}notify(r,s,o,l){"beforeInit"===s&&(this._init=this._createDescriptors(r,!0),this._notify(this._init,r,"install"));const h=l?this._descriptors(r).filter(l):this._descriptors(r),_=this._notify(h,r,s,o);return"afterDestroy"===s&&(this._notify(h,r,"stop"),this._notify(this._init,r,"uninstall")),_}_notify(r,s,o,l){l=l||{};for(const h of r){const _=h.plugin;if(!1===ge(_[o],[s,l,h.options],_)&&l.cancelable)return!1}return!0}invalidate(){tt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(r){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(r);return this._notifyStateChanges(r),s}_createDescriptors(r,s){const o=r&&r.config,l=it(o.options&&o.options.plugins,{}),h=function(p){const r=[],s=Object.keys(Wr.plugins.items);for(let l=0;l<s.length;l++)r.push(Wr.getPlugin(s[l]));const o=p.plugins||[];for(let l=0;l<o.length;l++){const h=o[l];-1===r.indexOf(h)&&r.push(h)}return r}(o);return!1!==l||s?function(p,r,s,o){const l=[],h=p.getContext();for(let _=0;_<r.length;_++){const C=r[_],L=zl(s[C.id],o);null!==L&&l.push({plugin:C,options:ed(p.config,C,L,h)})}return l}(r,h,l,s):[]}_notifyStateChanges(r){const s=this._oldCache||[],o=this._cache,l=(h,_)=>h.filter(C=>!_.some(D=>C.plugin.id===D.plugin.id));this._notify(l(s,o),r,"stop"),this._notify(l(o,s),r,"start")}}function zl(p,r){return r||!1!==p?!0===p?{}:p:null}function ed(p,r,s,o){const l=p.pluginScopeKeys(r),h=p.getOptionScopes(s,l);return p.createResolver(h,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ma(p,r){return((r.datasets||{})[p]||{}).indexAxis||r.indexAxis||(Vn.datasets[p]||{}).indexAxis||"x"}function Yl(p,r){return"x"===p||"y"===p?p:r.axis||function(p){return"top"===p||"bottom"===p?"x":"left"===p||"right"===p?"y":void 0}(r.position)||p.charAt(0).toLowerCase()}function qa(p){const r=p.options||(p.options={});r.plugins=it(r.plugins,{}),r.scales=function(p,r){const s=Qs[p.type]||{scales:{}},o=r.scales||{},l=Ma(p.type,r),h=Object.create(null),_=Object.create(null);return Object.keys(o).forEach(C=>{const D=o[C];if(!Se(D))return console.error(`Invalid scale configuration for scale: ${C}`);if(D._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${C}`);const L=Yl(C,D),U=function(p,r){return p===r?"_index_":"_value_"}(L,l),Z=s.scales||{};h[L]=h[L]||C,_[C]=At(Object.create(null),[{axis:L},D,Z[L],Z[U]])}),p.data.datasets.forEach(C=>{const D=C.type||p.type,L=C.indexAxis||Ma(D,r),Z=(Qs[D]||{}).scales||{};Object.keys(Z).forEach(ue=>{const we=function(p,r){let s=p;return"_index_"===p?s=r:"_value_"===p&&(s="x"===r?"y":"x"),s}(ue,L),Ze=C[we+"AxisID"]||h[we]||we;_[Ze]=_[Ze]||Object.create(null),At(_[Ze],[{axis:we},o[Ze],Z[ue]])})}),Object.keys(_).forEach(C=>{const D=_[C];At(D,[Vn.scales[D.type],Vn.scale])}),_}(p,r)}function Na(p){return(p=p||{}).datasets=p.datasets||[],p.labels=p.labels||[],p}const _u=new Map,Uc=new Set;function Ra(p,r){let s=_u.get(p);return s||(s=r(),_u.set(p,s),Uc.add(s)),s}const zr=(p,r,s)=>{const o=Lt(r,s);void 0!==o&&p.add(o)};class Cl{constructor(r){var p;this._config=((p=(p=r)||{}).data=Na(p.data),qa(p),p),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(r){this._config.type=r}get data(){return this._config.data}set data(r){this._config.data=Na(r)}get options(){return this._config.options}set options(r){this._config.options=r}get plugins(){return this._config.plugins}update(){const r=this._config;this.clearCache(),qa(r)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(r){return Ra(r,()=>[[`datasets.${r}`,""]])}datasetAnimationScopeKeys(r,s){return Ra(`${r}.transition.${s}`,()=>[[`datasets.${r}.transitions.${s}`,`transitions.${s}`],[`datasets.${r}`,""]])}datasetElementScopeKeys(r,s){return Ra(`${r}-${s}`,()=>[[`datasets.${r}.elements.${s}`,`datasets.${r}`,`elements.${s}`,""]])}pluginScopeKeys(r){const s=r.id;return Ra(`${this.type}-plugin-${s}`,()=>[[`plugins.${s}`,...r.additionalOptionScopes||[]]])}_cachedScopes(r,s){const o=this._scopeCache;let l=o.get(r);return(!l||s)&&(l=new Map,o.set(r,l)),l}getOptionScopes(r,s,o){const{options:l,type:h}=this,_=this._cachedScopes(r,o),C=_.get(s);if(C)return C;const D=new Set;s.forEach(U=>{r&&(D.add(r),U.forEach(Z=>zr(D,r,Z))),U.forEach(Z=>zr(D,l,Z)),U.forEach(Z=>zr(D,Qs[h]||{},Z)),U.forEach(Z=>zr(D,Vn,Z)),U.forEach(Z=>zr(D,Eo,Z))});const L=Array.from(D);return 0===L.length&&L.push(Object.create(null)),Uc.has(s)&&_.set(s,L),L}chartOptionScopes(){const{options:r,type:s}=this;return[r,Qs[s]||{},Vn.datasets[s]||{},{type:s},Vn,Eo]}resolveNamedOptions(r,s,o,l=[""]){const h={$shared:!0},{resolver:_,subPrefixes:C}=Fa(this._resolverCache,r,l);let D=_;(function(p,r){const{isScriptable:s,isIndexable:o}=mr(p);for(const l of r){const h=s(l),_=o(l),C=(_||h)&&p[l];if(h&&(vt(C)||Ba(C))||_&&Oe(C))return!0}return!1})(_,s)&&(h.$shared=!1,D=ls(_,o=vt(o)?o():o,this.createResolver(r,o,C)));for(const L of s)h[L]=D[L];return h}createResolver(r,s,o=[""],l){const{resolver:h}=Fa(this._resolverCache,r,o);return Se(s)?ls(h,s,void 0,l):h}}function Fa(p,r,s){let o=p.get(r);o||(o=new Map,p.set(r,o));const l=s.join();let h=o.get(l);return h||(h={resolver:lr(r,s),subPrefixes:s.filter(C=>!C.toLowerCase().includes("hover"))},o.set(l,h)),h}const Ba=p=>Se(p)&&Object.getOwnPropertyNames(p).reduce((r,s)=>r||vt(p[s]),!1),td=["top","bottom","left","right","chartArea"];function Uo(p,r){return"top"===p||"bottom"===p||-1===td.indexOf(p)&&"x"===r}function uc(p,r){return function(s,o){return s[p]===o[p]?s[r]-o[r]:s[p]-o[p]}}function ie(p){const r=p.chart,s=r.options.animation;r.notifyPlugins("afterRender"),ge(s&&s.onComplete,[p],r)}function re(p){const r=p.chart,s=r.options.animation;ge(s&&s.onProgress,[p],r)}function xe(p){return Bo()&&"string"==typeof p?p=document.getElementById(p):p&&p.length&&(p=p[0]),p&&p.canvas&&(p=p.canvas),p}const nt={},gt=p=>{const r=xe(p);return Object.values(nt).filter(s=>s.canvas===r).pop()};function zt(p,r,s){const o=Object.keys(p);for(const l of o){const h=+l;if(h>=r){const _=p[l];delete p[l],(s>0||h>r)&&(p[h+s]=_)}}}class Nt{constructor(r,s){const o=this.config=new Cl(s),l=xe(r),h=gt(l);if(h)throw new Error("Canvas is already in use. Chart with ID '"+h.id+"' must be destroyed before the canvas can be reused.");const _=o.createResolver(o.chartOptionScopes(),this.getContext());var p;this.platform=new(o.platform||(p=l,!Bo()||"undefined"!=typeof OffscreenCanvas&&p instanceof OffscreenCanvas?va:fl)),this.platform.updateConfig(o);const C=this.platform.acquireContext(l,_.aspectRatio),D=C&&C.canvas,L=D&&D.height,U=D&&D.width;this.id=Wt(),this.ctx=C,this.canvas=D,this.width=U,this.height=L,this._options=_,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Lu,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(p,r){let s;return function(...o){return r?(clearTimeout(s),s=setTimeout(p,r,o)):p.apply(this,o),r}}(Z=>this.update(Z),_.resizeDelay||0),this._dataChanges=[],nt[this.id]=this,C&&D?(Un.listen(this,"complete",ie),Un.listen(this,"progress",re),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:r,maintainAspectRatio:s},width:o,height:l,_aspectRatio:h}=this;return tt(r)?s&&h?h:l?o/l:null:r}get data(){return this.config.data}set data(r){this.config.data=r}get options(){return this._options}set options(r){this.config.options=r}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Zt(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return no(this.canvas,this.ctx),this}stop(){return Un.stop(this),this}resize(r,s){Un.running(this)?this._resizeBeforeDraw={width:r,height:s}:this._resize(r,s)}_resize(r,s){const o=this.options,_=this.platform.getMaximumSize(this.canvas,r,s,o.maintainAspectRatio&&this.aspectRatio),C=o.devicePixelRatio||this.platform.getDevicePixelRatio(),D=this.width?"resize":"attach";this.width=_.width,this.height=_.height,this._aspectRatio=this.aspectRatio,Zt(this,C,!0)&&(this.notifyPlugins("resize",{size:_}),ge(o.onResize,[this,_],this),this.attached&&this._doResize(D)&&this.render())}ensureScalesHaveIDs(){se(this.options.scales||{},(o,l)=>{o.id=l})}buildOrUpdateScales(){const r=this.options,s=r.scales,o=this.scales,l=Object.keys(o).reduce((_,C)=>(_[C]=!1,_),{});let h=[];s&&(h=h.concat(Object.keys(s).map(_=>{const C=s[_],D=Yl(_,C),L="r"===D,U="x"===D;return{options:C,dposition:L?"chartArea":U?"bottom":"left",dtype:L?"radialLinear":U?"category":"linear"}}))),se(h,_=>{const C=_.options,D=C.id,L=Yl(D,C),U=it(C.type,_.dtype);(void 0===C.position||Uo(C.position,L)!==Uo(_.dposition))&&(C.position=_.dposition),l[D]=!0;let Z=null;D in o&&o[D].type===U?Z=o[D]:(Z=new(Wr.getScale(U))({id:D,type:U,ctx:this.ctx,chart:this}),o[Z.id]=Z),Z.init(C,r)}),se(l,(_,C)=>{_||delete o[C]}),se(o,_=>{Ws.configure(this,_,_.options),Ws.addBox(this,_)})}_updateMetasets(){const r=this._metasets,s=this.data.datasets.length,o=r.length;if(r.sort((l,h)=>l.index-h.index),o>s){for(let l=s;l<o;++l)this._destroyDatasetMeta(l);r.splice(s,o-s)}this._sortedMetasets=r.slice(0).sort(uc("order","index"))}_removeUnreferencedMetasets(){const{_metasets:r,data:{datasets:s}}=this;r.length>s.length&&delete this._stacks,r.forEach((o,l)=>{0===s.filter(h=>h===o._dataset).length&&this._destroyDatasetMeta(l)})}buildOrUpdateControllers(){const r=[],s=this.data.datasets;let o,l;for(this._removeUnreferencedMetasets(),o=0,l=s.length;o<l;o++){const h=s[o];let _=this.getDatasetMeta(o);const C=h.type||this.config.type;if(_.type&&_.type!==C&&(this._destroyDatasetMeta(o),_=this.getDatasetMeta(o)),_.type=C,_.indexAxis=h.indexAxis||Ma(C,this.options),_.order=h.order||0,_.index=o,_.label=""+h.label,_.visible=this.isDatasetVisible(o),_.controller)_.controller.updateIndex(o),_.controller.linkScales();else{const D=Wr.getController(C),{datasetElementType:L,dataElementType:U}=Vn.datasets[C];Object.assign(D.prototype,{dataElementType:Wr.getElement(U),datasetElementType:L&&Wr.getElement(L)}),_.controller=new D(this,o),r.push(_.controller)}}return this._updateMetasets(),r}_resetElements(){se(this.data.datasets,(r,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(r){const s=this.config;s.update();const o=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),l=this._animationsDisabled=!o.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:r,cancelable:!0}))return;const h=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let _=0;for(let L=0,U=this.data.datasets.length;L<U;L++){const{controller:Z}=this.getDatasetMeta(L),ue=!l&&-1===h.indexOf(Z);Z.buildOrUpdateElements(ue),_=Math.max(+Z.getMaxOverflow(),_)}_=this._minPadding=o.layout.autoPadding?_:0,this._updateLayout(_),l||se(h,L=>{L.reset()}),this._updateDatasets(r),this.notifyPlugins("afterUpdate",{mode:r}),this._layers.sort(uc("z","_idx"));const{_active:C,_lastEvent:D}=this;D?this._eventHandler(D,!0):C.length&&this._updateHoverStyles(C,C,!0),this.render()}_updateScales(){se(this.scales,r=>{Ws.removeBox(this,r)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const r=this.options,s=new Set(Object.keys(this._listeners)),o=new Set(r.events);(!Ne(s,o)||!!this._responsiveListeners!==r.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:r}=this,s=this._getUniformDataChanges()||[];for(const{method:o,start:l,count:h}of s)zt(r,l,"_removeElements"===o?-h:h)}_getUniformDataChanges(){const r=this._dataChanges;if(!r||!r.length)return;this._dataChanges=[];const s=this.data.datasets.length,o=h=>new Set(r.filter(_=>_[0]===h).map((_,C)=>C+","+_.splice(1).join(","))),l=o(0);for(let h=1;h<s;h++)if(!Ne(l,o(h)))return;return Array.from(l).map(h=>h.split(",")).map(h=>({method:h[1],start:+h[2],count:+h[3]}))}_updateLayout(r){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ws.update(this,this.width,this.height,r);const s=this.chartArea,o=s.width<=0||s.height<=0;this._layers=[],se(this.boxes,l=>{o&&"chartArea"===l.position||(l.configure&&l.configure(),this._layers.push(...l._layers()))},this),this._layers.forEach((l,h)=>{l._idx=h}),this.notifyPlugins("afterLayout")}_updateDatasets(r){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:r,cancelable:!0})){for(let s=0,o=this.data.datasets.length;s<o;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,o=this.data.datasets.length;s<o;++s)this._updateDataset(s,vt(r)?r({datasetIndex:s}):r);this.notifyPlugins("afterDatasetsUpdate",{mode:r})}}_updateDataset(r,s){const o=this.getDatasetMeta(r),l={meta:o,index:r,mode:s,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",l)&&(o.controller._update(s),l.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",l))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Un.has(this)?this.attached&&!Un.running(this)&&Un.start(this):(this.draw(),ie({chart:this})))}draw(){let r;if(this._resizeBeforeDraw){const{width:o,height:l}=this._resizeBeforeDraw;this._resize(o,l),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const s=this._layers;for(r=0;r<s.length&&s[r].z<=0;++r)s[r].draw(this.chartArea);for(this._drawDatasets();r<s.length;++r)s[r].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(r){const s=this._sortedMetasets,o=[];let l,h;for(l=0,h=s.length;l<h;++l){const _=s[l];(!r||_.visible)&&o.push(_)}return o}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const r=this.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s)this._drawDataset(r[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(r){const s=this.ctx,o=r._clip,l=!o.disabled,h=this.chartArea,_={meta:r,index:r.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",_)&&(l&&Js(s,{left:!1===o.left?0:h.left-o.left,right:!1===o.right?this.width:h.right+o.right,top:!1===o.top?0:h.top-o.top,bottom:!1===o.bottom?this.height:h.bottom+o.bottom}),r.controller.draw(),l&&ha(s),_.cancelable=!1,this.notifyPlugins("afterDatasetDraw",_))}getElementsAtEventForMode(r,s,o,l){const h=Lc.modes[s];return"function"==typeof h?h(this,r,o,l):[]}getDatasetMeta(r){const s=this.data.datasets[r],o=this._metasets;let l=o.filter(h=>h&&h._dataset===s).pop();return l||(l={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:r,_dataset:s,_parsed:[],_sorted:!1},o.push(l)),l}getContext(){return this.$context||(this.$context=lo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(r){const s=this.data.datasets[r];if(!s)return!1;const o=this.getDatasetMeta(r);return"boolean"==typeof o.hidden?!o.hidden:!s.hidden}setDatasetVisibility(r,s){this.getDatasetMeta(r).hidden=!s}toggleDataVisibility(r){this._hiddenIndices[r]=!this._hiddenIndices[r]}getDataVisibility(r){return!this._hiddenIndices[r]}_updateVisibility(r,s,o){const l=o?"show":"hide",h=this.getDatasetMeta(r),_=h.controller._resolveAnimations(void 0,l);Ce(s)?(h.data[s].hidden=!o,this.update()):(this.setDatasetVisibility(r,o),_.update(h,{visible:o}),this.update(C=>C.datasetIndex===r?l:void 0))}hide(r,s){this._updateVisibility(r,s,!1)}show(r,s){this._updateVisibility(r,s,!0)}_destroyDatasetMeta(r){const s=this._metasets[r];s&&s.controller&&s.controller._destroy(),delete this._metasets[r]}_stop(){let r,s;for(this.stop(),Un.remove(this),r=0,s=this.data.datasets.length;r<s;++r)this._destroyDatasetMeta(r)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:r,ctx:s}=this;this._stop(),this.config.clearCache(),r&&(this.unbindEvents(),no(r,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete nt[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...r){return this.canvas.toDataURL(...r)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const r=this._listeners,s=this.platform,o=(h,_)=>{s.addEventListener(this,h,_),r[h]=_},l=(h,_,C)=>{h.offsetX=_,h.offsetY=C,this._eventHandler(h)};se(this.options.events,h=>o(h,l))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const r=this._responsiveListeners,s=this.platform,o=(D,L)=>{s.addEventListener(this,D,L),r[D]=L},l=(D,L)=>{r[D]&&(s.removeEventListener(this,D,L),delete r[D])},h=(D,L)=>{this.canvas&&this.resize(D,L)};let _;const C=()=>{l("attach",C),this.attached=!0,this.resize(),o("resize",h),o("detach",_)};_=()=>{this.attached=!1,l("resize",h),this._stop(),this._resize(0,0),o("attach",C)},s.isAttached(this.canvas)?C():_()}unbindEvents(){se(this._listeners,(r,s)=>{this.platform.removeEventListener(this,s,r)}),this._listeners={},se(this._responsiveListeners,(r,s)=>{this.platform.removeEventListener(this,s,r)}),this._responsiveListeners=void 0}updateHoverStyle(r,s,o){const l=o?"set":"remove";let h,_,C,D;for("dataset"===s&&(h=this.getDatasetMeta(r[0].datasetIndex),h.controller["_"+l+"DatasetHoverStyle"]()),C=0,D=r.length;C<D;++C){_=r[C];const L=_&&this.getDatasetMeta(_.datasetIndex).controller;L&&L[l+"HoverStyle"](_.element,_.datasetIndex,_.index)}}getActiveElements(){return this._active||[]}setActiveElements(r){const s=this._active||[],o=r.map(({datasetIndex:h,index:_})=>{const C=this.getDatasetMeta(h);if(!C)throw new Error("No dataset found at index "+h);return{datasetIndex:h,element:C.data[_],index:_}});!at(o,s)&&(this._active=o,this._lastEvent=null,this._updateHoverStyles(o,s))}notifyPlugins(r,s,o){return this._plugins.notify(this,r,s,o)}_updateHoverStyles(r,s,o){const l=this.options.hover,h=(D,L)=>D.filter(U=>!L.some(Z=>U.datasetIndex===Z.datasetIndex&&U.index===Z.index)),_=h(s,r),C=o?r:h(r,s);_.length&&this.updateHoverStyle(_,l.mode,!1),C.length&&l.mode&&this.updateHoverStyle(C,l.mode,!0)}_eventHandler(r,s){const o={event:r,replay:s,cancelable:!0,inChartArea:vo(r,this.chartArea,this._minPadding)},l=_=>(_.options.events||this.options.events).includes(r.native.type);if(!1===this.notifyPlugins("beforeEvent",o,l))return;const h=this._handleEvent(r,s,o.inChartArea);return o.cancelable=!1,this.notifyPlugins("afterEvent",o,l),(h||o.changed)&&this.render(),this}_handleEvent(r,s,o){const{_active:l=[],options:h}=this,C=this._getActiveElements(r,l,o,s),D="mouseup"===(p=r).type||"click"===p.type||"contextmenu"===p.type,L=function(p,r,s,o){return s&&"mouseout"!==p.type?o?r:p:null}(r,this._lastEvent,o,D);var p;o&&(this._lastEvent=null,ge(h.onHover,[r,C,this],this),D&&ge(h.onClick,[r,C,this],this));const U=!at(C,l);return(U||s)&&(this._active=C,this._updateHoverStyles(C,l,s)),this._lastEvent=L,U}_getActiveElements(r,s,o,l){if("mouseout"===r.type)return[];if(!o)return s;const h=this.options.hover;return this.getElementsAtEventForMode(r,h.mode,h,l)}}const ci=()=>se(Nt.instances,p=>p._plugins.invalidate()),oi=!0;function vi(p,r,s){const{startAngle:o,pixelMargin:l,x:h,y:_,outerRadius:C,innerRadius:D}=r;let L=l/C;p.beginPath(),p.arc(h,_,C,o-L,s+L),D>l?(L=l/D,p.arc(h,_,D,s+L,o-L,!0)):p.arc(h,_,l,s+ke,o-ke),p.closePath(),p.clip()}function In(p,r,s,o){return{x:s+p*Math.cos(r),y:o+p*Math.sin(r)}}function fo(p,r,s,o,l){const{x:h,y:_,startAngle:C,pixelMargin:D,innerRadius:L}=r,U=Math.max(r.outerRadius+o+s-D,0),Z=L>0?L+o+s+D:0;let ue=0;const we=l-C;if(o){const Xn=((L>0?L-o:0)+(U>0?U-o:0))/2;ue=(we-(0!==Xn?we*Xn/(Xn+o):we))/2}const ot=(we-Math.max(.001,we*U-s/de)/U)/2,mt=C+ot+ue,bt=l-ot-ue,{outerStart:ei,outerEnd:ki,innerStart:mi,innerEnd:Ci}=function(p,r,s,o){const l=function(p){return $r(p,["outerStart","outerEnd","innerStart","innerEnd"])}(p.options.borderRadius),h=(s-r)/2,_=Math.min(h,o*r/2),C=D=>{const L=(s-Math.min(h,D))*o/2;return Mi(D,0,Math.min(h,L))};return{outerStart:C(l.outerStart),outerEnd:C(l.outerEnd),innerStart:Mi(l.innerStart,0,_),innerEnd:Mi(l.innerEnd,0,_)}}(r,Z,U,bt-mt),Hi=U-ei,Ui=U-ki,en=mt+ei/Hi,cn=bt-ki/Ui,Ki=Z+mi,Ri=Z+Ci,pn=mt+mi/Ki,Hn=bt-Ci/Ri;if(p.beginPath(),p.arc(h,_,U,en,cn),ki>0){const tn=In(Ui,cn,h,_);p.arc(tn.x,tn.y,ki,cn,bt+ke)}const qt=In(Ri,bt,h,_);if(p.lineTo(qt.x,qt.y),Ci>0){const tn=In(Ri,Hn,h,_);p.arc(tn.x,tn.y,Ci,bt+ke,Hn+Math.PI)}if(p.arc(h,_,Z,bt-Ci/Z,mt+mi/Z,!0),mi>0){const tn=In(Ki,pn,h,_);p.arc(tn.x,tn.y,mi,pn+Math.PI,mt-ke)}const fi=In(Hi,mt,h,_);if(p.lineTo(fi.x,fi.y),ei>0){const tn=In(Hi,en,h,_);p.arc(tn.x,tn.y,ei,mt-ke,en)}p.closePath()}Object.defineProperties(Nt,{defaults:{enumerable:oi,value:Vn},instances:{enumerable:oi,value:nt},overrides:{enumerable:oi,value:Qs},registry:{enumerable:oi,value:Wr},version:{enumerable:oi,value:"3.7.0"},getChart:{enumerable:oi,value:gt},register:{enumerable:oi,value:(...p)=>{Wr.add(...p),ci()}},unregister:{enumerable:oi,value:(...p)=>{Wr.remove(...p),ci()}}});class to extends yr{constructor(r){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,s,o){const l=this.getProps(["x","y"],o),{angle:h,distance:_}=xi(l,{x:r,y:s}),{startAngle:C,endAngle:D,innerRadius:L,outerRadius:U,circumference:Z}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),ue=this.options.spacing/2,Ze=it(Z,D-C)>=Te||Zi(h,C,D),ot=$i(_,L+ue,U+ue);return Ze&&ot}getCenterPoint(r){const{x:s,y:o,startAngle:l,endAngle:h,innerRadius:_,outerRadius:C}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],r),{offset:D,spacing:L}=this.options,U=(l+h)/2,Z=(_+C+L+D)/2;return{x:s+Math.cos(U)*Z,y:o+Math.sin(U)*Z}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:s,circumference:o}=this,l=(s.offset||0)/2,h=(s.spacing||0)/2;if(this.pixelMargin="inner"===s.borderAlign?.33:0,this.fullCircles=o>Te?Math.floor(o/Te):0,0===o||this.innerRadius<0||this.outerRadius<0)return;r.save();let _=0;if(l){_=l/2;const D=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(D)*_,Math.sin(D)*_),this.circumference>=de&&(_=l)}r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor;const C=function(p,r,s,o){const{fullCircles:l,startAngle:h,circumference:_}=r;let C=r.endAngle;if(l){fo(p,r,s,o,h+Te);for(let D=0;D<l;++D)p.fill();isNaN(_)||(C=h+_%Te,_%Te==0&&(C+=Te))}return fo(p,r,s,o,C),p.fill(),C}(r,this,_,h);(function(p,r,s,o,l){const{options:h}=r,{borderWidth:_,borderJoinStyle:C}=h,D="inner"===h.borderAlign;!_||(D?(p.lineWidth=2*_,p.lineJoin=C||"round"):(p.lineWidth=_,p.lineJoin=C||"bevel"),r.fullCircles&&function(p,r,s){const{x:o,y:l,startAngle:h,pixelMargin:_,fullCircles:C}=r,D=Math.max(r.outerRadius-_,0),L=r.innerRadius+_;let U;for(s&&vi(p,r,h+Te),p.beginPath(),p.arc(o,l,L,h+Te,h,!0),U=0;U<C;++U)p.stroke();for(p.beginPath(),p.arc(o,l,D,h,h+Te),U=0;U<C;++U)p.stroke()}(p,r,D),D&&vi(p,r,l),fo(p,r,s,o,l),p.stroke())})(r,this,_,h,C),r.restore()}}function As(p,r,s=r){p.lineCap=it(s.borderCapStyle,r.borderCapStyle),p.setLineDash(it(s.borderDash,r.borderDash)),p.lineDashOffset=it(s.borderDashOffset,r.borderDashOffset),p.lineJoin=it(s.borderJoinStyle,r.borderJoinStyle),p.lineWidth=it(s.borderWidth,r.borderWidth),p.strokeStyle=it(s.borderColor,r.borderColor)}function Yo(p,r,s){p.lineTo(s.x,s.y)}function ya(p,r,s={}){const o=p.length,{start:l=0,end:h=o-1}=s,{start:_,end:C}=r,D=Math.max(l,_),L=Math.min(h,C);return{count:o,start:D,loop:r.loop,ilen:L<D&&!(l<_&&h<_||l>C&&h>C)?o+L-D:L-D}}function Ha(p,r,s,o){const{points:l,options:h}=r,{count:_,start:C,loop:D,ilen:L}=ya(l,s,o),U=function(p){return p.stepped?Xr:p.tension||"monotone"===p.cubicInterpolationMode?Kr:Yo}(h);let we,Ze,ot,{move:Z=!0,reverse:ue}=o||{};for(we=0;we<=L;++we)Ze=l[(C+(ue?L-we:we))%_],!Ze.skip&&(Z?(p.moveTo(Ze.x,Ze.y),Z=!1):U(p,ot,Ze,ue,h.stepped),ot=Ze);return D&&(Ze=l[(C+(ue?L:0))%_],U(p,ot,Ze,ue,h.stepped)),!!D}function Gc(p,r,s,o){const l=r.points,{count:h,start:_,ilen:C}=ya(l,s,o),{move:D=!0,reverse:L}=o||{};let ue,we,Ze,ot,mt,bt,U=0,Z=0;const ei=mi=>(_+(L?C-mi:mi))%h,ki=()=>{ot!==mt&&(p.lineTo(U,mt),p.lineTo(U,ot),p.lineTo(U,bt))};for(D&&(we=l[ei(0)],p.moveTo(we.x,we.y)),ue=0;ue<=C;++ue){if(we=l[ei(ue)],we.skip)continue;const mi=we.x,Ci=we.y,Hi=0|mi;Hi===Ze?(Ci<ot?ot=Ci:Ci>mt&&(mt=Ci),U=(Z*U+mi)/++Z):(ki(),p.lineTo(mi,Ci),Ze=Hi,Z=0,ot=mt=Ci),bt=Ci}ki()}function id(p){const r=p.options;return p._decimated||p._loop||r.tension||"monotone"===r.cubicInterpolationMode||r.stepped||r.borderDash&&r.borderDash.length?Ha:Gc}to.id="arc",to.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},to.defaultRoutes={backgroundColor:"backgroundColor"};const Cu="function"==typeof Path2D;let Nu=(()=>{class p extends yr{constructor(s){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,s&&Object.assign(this,s)}updateControlPoints(s,o){const l=this.options;!l.tension&&"monotone"!==l.cubicInterpolationMode||l.stepped||this._pointsUpdated||(Or(this._points,l,s,l.spanGaps?this._loop:this._fullLoop,o),this._pointsUpdated=!0)}set points(s){this._points=s,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(p,r){const s=p.points,o=p.options.spanGaps,l=s.length;if(!l)return[];const h=!!p._loop,{start:_,end:C}=function(p,r,s,o){let l=0,h=r-1;if(s&&!o)for(;l<r&&!p[l].skip;)l++;for(;l<r&&p[l].skip;)l++;for(l%=r,s&&(h+=l);h>l&&p[h%r].skip;)h--;return h%=r,{start:l,end:h}}(s,l,h,o);return function(p,r,s,o){return o&&o.setContext&&s?function(p,r,s,o){const l=p._chart.getContext(),h=on(p.options),{_datasetIndex:_,options:{spanGaps:C}}=p,D=s.length,L=[];let U=h,Z=r[0].start,ue=Z;function we(Ze,ot,mt,bt){const ei=C?-1:1;if(Ze!==ot){for(Ze+=D;s[Ze%D].skip;)Ze-=ei;for(;s[ot%D].skip;)ot+=ei;Ze%D!=ot%D&&(L.push({start:Ze%D,end:ot%D,loop:mt,style:bt}),U=bt,Z=ot%D)}}for(const Ze of r){Z=C?Z:Ze.start;let mt,ot=s[Z%D];for(ue=Z+1;ue<=Ze.end;ue++){const bt=s[ue%D];mt=on(o.setContext(lo(l,{type:"segment",p0:ot,p1:bt,p0DataIndex:(ue-1)%D,p1DataIndex:ue%D,datasetIndex:_}))),an(mt,U)&&we(Z,ue-1,Ze.loop,U),ot=bt,U=mt}Z<ue-1&&we(Z,ue-1,Ze.loop,U)}return L}(p,r,s,o):r}(p,!0===o?[{start:_,end:C,loop:h}]:function(p,r,s,o){const l=p.length,h=[];let D,_=r,C=p[r];for(D=r+1;D<=s;++D){const L=p[D%l];L.skip||L.stop?C.skip||(h.push({start:r%l,end:(D-1)%l,loop:o=!1}),r=_=L.stop?D:null):(_=D,C.skip&&(r=D)),C=L}return null!==_&&h.push({start:r%l,end:_%l,loop:o}),h}(s,_,C<_?C+l:C,!!p._fullLoop&&0===_&&C===l-1),s,r)}(this,this.options.segment))}first(){const s=this.segments;return s.length&&this.points[s[0].start]}last(){const s=this.segments,l=s.length;return l&&this.points[s[l-1].end]}interpolate(s,o){const l=this.options,h=s[o],_=this.points,C=nr(this,{property:o,start:h,end:h});if(!C.length)return;const D=[],L=function(p){return p.stepped?Nn:p.tension||"monotone"===p.cubicInterpolationMode?An:nn}(l);let U,Z;for(U=0,Z=C.length;U<Z;++U){const{start:ue,end:we}=C[U],Ze=_[ue],ot=_[we];if(Ze===ot){D.push(Ze);continue}const bt=L(Ze,ot,Math.abs((h-Ze[o])/(ot[o]-Ze[o])),l.stepped);bt[o]=s[o],D.push(bt)}return 1===D.length?D[0]:D}pathSegment(s,o,l){return id(this)(s,this,o,l)}path(s,o,l){const h=this.segments,_=id(this);let C=this._loop;o=o||0,l=l||this.points.length-o;for(const D of h)C&=_(s,this,D,{start:o,end:o+l-1});return!!C}draw(s,o,l,h){(this.points||[]).length&&(this.options||{}).borderWidth&&(s.save(),function(p,r,s,o){Cu&&!r.options.segment?function(p,r,s,o){let l=r._path;l||(l=r._path=new Path2D,r.path(l,s,o)&&l.closePath()),As(p,r.options),p.stroke(l)}(p,r,s,o):function(p,r,s,o){const{segments:l,options:h}=r,_=id(r);for(const C of l)As(p,h,C.style),p.beginPath(),_(p,r,C,{start:s,end:s+o-1})&&p.closePath(),p.stroke()}(p,r,s,o)}(s,this,l,h),s.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return p.id="line",p.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},p.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},p.descriptors={_scriptable:!0,_indexable:r=>"borderDash"!==r&&"fill"!==r},p})();function Fu(p,r,s,o){const l=p.options,{[s]:h}=p.getProps([s],o);return Math.abs(r-h)<l.radius+l.hitRadius}let Wc=(()=>{class p extends yr{constructor(s){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,o,l){const h=this.options,{x:_,y:C}=this.getProps(["x","y"],l);return Math.pow(s-_,2)+Math.pow(o-C,2)<Math.pow(h.hitRadius+h.radius,2)}inXRange(s,o){return Fu(this,s,"x",o)}inYRange(s,o){return Fu(this,s,"y",o)}getCenterPoint(s){const{x:o,y:l}=this.getProps(["x","y"],s);return{x:o,y:l}}size(s){let o=(s=s||this.options||{}).radius||0;return o=Math.max(o,o&&s.hoverRadius||0),2*(o+(o&&s.borderWidth||0))}draw(s,o){const l=this.options;this.skip||l.radius<.1||!vo(this,o,this.size(l)/2)||(s.strokeStyle=l.borderColor,s.lineWidth=l.borderWidth,s.fillStyle=l.backgroundColor,$s(s,l,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}return p.id="point",p.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},p.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},p})();function Bu(p,r){const{x:s,y:o,base:l,width:h,height:_}=p.getProps(["x","y","base","width","height"],r);let C,D,L,U,Z;return p.horizontal?(Z=_/2,C=Math.min(s,l),D=Math.max(s,l),L=o-Z,U=o+Z):(Z=h/2,C=s-Z,D=s+Z,L=Math.min(o,l),U=Math.max(o,l)),{left:C,top:L,right:D,bottom:U}}function El(p,r,s,o){return p?0:Mi(r,s,o)}function Kl(p,r,s,o){const l=null===r,h=null===s,C=p&&!(l&&h)&&Bu(p,o);return C&&(l||$i(r,C.left,C.right))&&(h||$i(s,C.top,C.bottom))}function Tu(p,r){p.rect(r.x,r.y,r.w,r.h)}function Ro(p,r,s={}){const o=p.x!==s.x?-r:0,l=p.y!==s.y?-r:0;return{x:p.x+o,y:p.y+l,w:p.w+((p.x+p.w!==s.x+s.w?r:0)-o),h:p.h+((p.y+p.h!==s.y+s.h?r:0)-l),radius:p.radius}}class dc extends yr{constructor(r){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,r&&Object.assign(this,r)}draw(r){const{inflateAmount:s,options:{borderColor:o,backgroundColor:l}}=this,{inner:h,outer:_}=function(p){const r=Bu(p),s=r.right-r.left,o=r.bottom-r.top,l=function(p,r,s){const l=p.borderSkipped,h=Jr(p.options.borderWidth);return{t:El(l.top,h.top,0,s),r:El(l.right,h.right,0,r),b:El(l.bottom,h.bottom,0,s),l:El(l.left,h.left,0,r)}}(p,s/2,o/2),h=function(p,r,s){const{enableBorderRadius:o}=p.getProps(["enableBorderRadius"]),l=p.options.borderRadius,h=ao(l),_=Math.min(r,s),C=p.borderSkipped,D=o||Se(l);return{topLeft:El(!D||C.top||C.left,h.topLeft,0,_),topRight:El(!D||C.top||C.right,h.topRight,0,_),bottomLeft:El(!D||C.bottom||C.left,h.bottomLeft,0,_),bottomRight:El(!D||C.bottom||C.right,h.bottomRight,0,_)}}(p,s/2,o/2);return{outer:{x:r.left,y:r.top,w:s,h:o,radius:h},inner:{x:r.left+l.l,y:r.top+l.t,w:s-l.l-l.r,h:o-l.t-l.b,radius:{topLeft:Math.max(0,h.topLeft-Math.max(l.t,l.l)),topRight:Math.max(0,h.topRight-Math.max(l.t,l.r)),bottomLeft:Math.max(0,h.bottomLeft-Math.max(l.b,l.l)),bottomRight:Math.max(0,h.bottomRight-Math.max(l.b,l.r))}}}}(this),C=(p=_.radius).topLeft||p.topRight||p.bottomLeft||p.bottomRight?Tr:Tu;var p;r.save(),(_.w!==h.w||_.h!==h.h)&&(r.beginPath(),C(r,Ro(_,s,h)),r.clip(),C(r,Ro(h,-s,_)),r.fillStyle=o,r.fill("evenodd")),r.beginPath(),C(r,Ro(h,s)),r.fillStyle=l,r.fill(),r.restore()}inRange(r,s,o){return Kl(this,r,s,o)}inXRange(r,s){return Kl(this,r,null,s)}inYRange(r,s){return Kl(this,null,r,s)}getCenterPoint(r){const{x:s,y:o,base:l,horizontal:h}=this.getProps(["x","y","base","horizontal"],r);return{x:h?(s+l)/2:s,y:h?o:(o+l)/2}}getRange(r){return"x"===r?this.width/2:this.height/2}}dc.id="bar",dc.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},dc.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Yc=Object.freeze({__proto__:null,ArcElement:to,LineElement:Nu,PointElement:Wc,BarElement:dc});function Hu(p){if(p._decimated){const r=p._data;delete p._decimated,delete p._data,Object.defineProperty(p,"data",{value:r})}}function sd(p){p.data.datasets.forEach(r=>{Hu(r)})}var Ad={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(p,r,s)=>{if(!s.enabled)return void sd(p);const o=p.width;p.data.datasets.forEach((l,h)=>{const{_data:_,indexAxis:C}=l,D=p.getDatasetMeta(h),L=_||l.data;if("y"===Ys([C,p.options.indexAxis])||"line"!==D.type)return;const U=p.scales[D.xAxisID];if("linear"!==U.type&&"time"!==U.type||p.options.parsing)return;let Ze,{start:Z,count:ue}=function(p,r){const s=r.length;let l,o=0;const{iScale:h}=p,{min:_,max:C,minDefined:D,maxDefined:L}=h.getUserBounds();return D&&(o=Mi(co(r,h.axis,_).lo,0,s-1)),l=L?Mi(co(r,h.axis,C).hi+1,o,s)-o:s-o,{start:o,count:l}}(D,L);if(ue<=(s.threshold||4*o))Hu(l);else{switch(tt(_)&&(l._data=L,delete l.data,Object.defineProperty(l,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(ot){this._data=ot}})),s.algorithm){case"lttb":Ze=function(p,r,s,o,l){const h=l.samples||o;if(h>=s)return p.slice(r,r+s);const _=[],C=(s-2)/(h-2);let D=0;const L=r+s-1;let Z,ue,we,Ze,ot,U=r;for(_[D++]=p[U],Z=0;Z<h-2;Z++){let ei,mt=0,bt=0;const ki=Math.floor((Z+1)*C)+1+r,mi=Math.min(Math.floor((Z+2)*C)+1,s)+r,Ci=mi-ki;for(ei=ki;ei<mi;ei++)mt+=p[ei].x,bt+=p[ei].y;mt/=Ci,bt/=Ci;const Hi=Math.floor(Z*C)+1+r,Ui=Math.min(Math.floor((Z+1)*C)+1,s)+r,{x:en,y:cn}=p[U];for(we=Ze=-1,ei=Hi;ei<Ui;ei++)Ze=.5*Math.abs((en-mt)*(p[ei].y-cn)-(en-p[ei].x)*(bt-cn)),Ze>we&&(we=Ze,ue=p[ei],ot=ei);_[D++]=ue,U=ot}return _[D++]=p[L],_}(L,Z,ue,o,s);break;case"min-max":Ze=function(p,r,s,o){let _,C,D,L,U,Z,ue,we,Ze,ot,l=0,h=0;const mt=[],ei=p[r].x,mi=p[r+s-1].x-ei;for(_=r;_<r+s;++_){C=p[_],D=(C.x-ei)/mi*o,L=C.y;const Ci=0|D;if(Ci===U)L<Ze?(Ze=L,Z=_):L>ot&&(ot=L,ue=_),l=(h*l+C.x)/++h;else{const Hi=_-1;if(!tt(Z)&&!tt(ue)){const Ui=Math.min(Z,ue),en=Math.max(Z,ue);Ui!==we&&Ui!==Hi&&mt.push(Lm(km({},p[Ui]),{x:l})),en!==we&&en!==Hi&&mt.push(Lm(km({},p[en]),{x:l}))}_>0&&Hi!==we&&mt.push(p[Hi]),mt.push(C),U=Ci,h=0,Ze=ot=L,Z=ue=we=_}}return mt}(L,Z,ue,o);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}l._decimated=Ze}})},destroy(p){sd(p)}};function oh(p,r,s){const o=function(p){const r=p.options,s=r.fill;let o=it(s&&s.target,s);return void 0===o&&(o=!!r.backgroundColor),!1!==o&&null!==o&&(!0===o?"origin":o)}(p);if(Se(o))return!isNaN(o.value)&&o;let l=parseFloat(o);return Qe(l)&&Math.floor(l)===l?(("-"===o[0]||"+"===o[0])&&(l=r+l),!(l===r||l<0||l>=s)&&l):["origin","start","end","stack","shape"].indexOf(o)>=0&&o}class Cr{constructor(r){this.x=r.x,this.y=r.y,this.radius=r.radius}pathSegment(r,s,o){const{x:l,y:h,radius:_}=this;return r.arc(l,h,_,(s=s||{start:0,end:Te}).end,s.start,!0),!o.bounds}interpolate(r){const{x:s,y:o,radius:l}=this,h=r.angle;return{x:s+Math.cos(h)*l,y:o+Math.sin(h)*l,angle:h}}}function Vu(p,r,s){for(;r>p;r--){const o=s[r];if(!isNaN(o.x)&&!isNaN(o.y))break}return r}function Gu(p,r,s){const o=[];for(let l=0;l<s.length;l++){const h=s[l],{first:_,last:C,point:D}=$l(h,r,"x");if(!(!D||_&&C))if(_)o.unshift(D);else if(p.push(D),!C)break}p.push(...o)}function $l(p,r,s){const o=p.interpolate(r,s);if(!o)return{};const l=o[s],h=p.segments,_=p.points;let C=!1,D=!1;for(let L=0;L<h.length;L++){const U=h[L],Z=_[U.start][s],ue=_[U.end][s];if($i(l,Z,ue)){C=l===Z,D=l===ue;break}}return{first:C,last:D,point:o}}function Ld(p){const{chart:r,fill:s,line:o}=p;if(Qe(s))return function(p,r){const s=p.getDatasetMeta(r);return s&&p.isDatasetVisible(r)?s.dataset:null}(r,s);if("stack"===s)return function(p){const{scale:r,index:s,line:o}=p,l=[],h=o.segments,_=o.points,C=function(p,r){const s=[],o=p.getMatchingVisibleMetas("line");for(let l=0;l<o.length;l++){const h=o[l];if(h.index===r)break;h.hidden||s.unshift(h.dataset)}return s}(r,s);C.push(Pd({x:null,y:r.bottom},o));for(let D=0;D<h.length;D++){const L=h[D];for(let U=L.start;U<=L.end;U++)Gu(l,_[U],C)}return new Nu({points:l,options:{}})}(p);if("shape"===s)return!0;const l=function(p){return(p.scale||{}).getPointPositionForValue?function(p){const{scale:r,fill:s}=p,o=r.options,l=r.getLabels().length,h=[],_=o.reverse?r.max:r.min;let D,L,U;if(U="start"===s?_:"end"===s?o.reverse?r.min:r.max:Se(s)?s.value:r.getBaseValue(),o.grid.circular)return L=r.getPointPositionForValue(0,_),new Cr({x:L.x,y:L.y,radius:r.getDistanceFromCenterForValue(U)});for(D=0;D<l;++D)h.push(r.getPointPositionForValue(D,U));return h}(p):function(p){const{scale:r={},fill:s}=p;let l,o=null;return"start"===s?o=r.bottom:"end"===s?o=r.top:Se(s)?o=r.getPixelForValue(s.value):r.getBasePixel&&(o=r.getBasePixel()),Qe(o)?(l=r.isHorizontal(),{x:l?o:null,y:l?null:o}):null}(p)}(p);return l instanceof Cr?l:Pd(l,o)}function Pd(p,r){let s=[],o=!1;return Oe(p)?(o=!0,s=p):s=function(p,r){const{x:s=null,y:o=null}=p||{},l=r.points,h=[];return r.segments.forEach(({start:_,end:C})=>{C=Vu(_,C,l);const D=l[_],L=l[C];null!==o?(h.push({x:D.x,y:o}),h.push({x:L.x,y:o})):null!==s&&(h.push({x:s,y:D.y}),h.push({x:s,y:L.y}))}),h}(p,r),s.length?new Nu({points:s,options:{tension:0},_loop:o,_fullLoop:o}):null}function go(p,r,s){let l=p[r].fill;const h=[r];let _;if(!s)return l;for(;!1!==l&&-1===h.indexOf(l);){if(!Qe(l))return l;if(_=p[l],!_)return!1;if(_.visible)return l;h.push(l),l=_.fill}return!1}function Nd(p,r,s){p.beginPath(),r.path(p),p.lineTo(r.last().x,s),p.lineTo(r.first().x,s),p.closePath(),p.clip()}function $c(p,r,s,o){if(o)return;let l=r[p],h=s[p];return"angle"===p&&(l=Ni(l),h=Ni(h)),{property:p,start:l,end:h}}function Jl(p,r,s,o){return p&&r?o(p[s],r[s]):p?p[s]:r?r[s]:0}function Su(p,r,s){const{top:o,bottom:l}=r.chart.chartArea,{property:h,start:_,end:C}=s||{};"x"===h&&(p.beginPath(),p.rect(_,o,C-_,l-o),p.clip())}function Jc(p,r,s,o){const l=r.interpolate(s,o);l&&p.lineTo(l.x,l.y)}function od(p,r){const{line:s,target:o,property:l,color:h,scale:_}=r,C=function(p,r,s){const o=p.segments,l=p.points,h=r.points,_=[];for(const C of o){let{start:D,end:L}=C;L=Vu(D,L,l);const U=$c(s,l[D],l[L],C.loop);if(!r.segments){_.push({source:C,target:U,start:l[D],end:l[L]});continue}const Z=nr(r,U);for(const ue of Z){const we=$c(s,h[ue.start],h[ue.end],ue.loop),Ze=zo(C,l,we);for(const ot of Ze)_.push({source:ot,target:ue,start:{[s]:Jl(U,we,"start",Math.max)},end:{[s]:Jl(U,we,"end",Math.min)}})}}return _}(s,o,l);for(const{source:D,target:L,start:U,end:Z}of C){const{style:{backgroundColor:ue=h}={}}=D,we=!0!==o;p.save(),p.fillStyle=ue,Su(p,_,we&&$c(l,U,Z)),p.beginPath();const Ze=!!s.pathSegment(p,D);let ot;if(we){Ze?p.closePath():Jc(p,o,Z,l);const mt=!!o.pathSegment(p,L,{move:Ze,reverse:!0});ot=Ze&&mt,ot||Jc(p,o,U,l)}p.closePath(),p.fill(ot?"evenodd":"nonzero"),p.restore()}}function rd(p,r,s){const o=Ld(r),{line:l,scale:h,axis:_}=r,C=l.options,D=C.fill,L=C.backgroundColor,{above:U=L,below:Z=L}=D||{};o&&l.points.length&&(Js(p,s),function(p,r){const{line:s,target:o,above:l,below:h,area:_,scale:C}=r,D=s._loop?"angle":r.axis;p.save(),"x"===D&&h!==l&&(Nd(p,o,_.top),od(p,{line:s,target:o,color:l,scale:C,property:D}),p.restore(),p.save(),Nd(p,o,_.bottom)),od(p,{line:s,target:o,color:h,scale:C,property:D}),p.restore()}(p,{line:l,target:o,above:U,below:Z,area:s,scale:h,axis:_}),ha(p))}var Wu={id:"filler",afterDatasetsUpdate(p,r,s){const o=(p.data.datasets||[]).length,l=[];let h,_,C,D;for(_=0;_<o;++_)h=p.getDatasetMeta(_),C=h.dataset,D=null,C&&C.options&&C instanceof Nu&&(D={visible:p.isDatasetVisible(_),index:_,fill:oh(C,_,o),chart:p,axis:h.controller.options.indexAxis,scale:h.vScale,line:C}),h.$filler=D,l.push(D);for(_=0;_<o;++_)D=l[_],D&&!1!==D.fill&&(D.fill=go(l,_,s.propagate))},beforeDraw(p,r,s){const o="beforeDraw"===s.drawTime,l=p.getSortedVisibleDatasetMetas(),h=p.chartArea;for(let _=l.length-1;_>=0;--_){const C=l[_].$filler;!C||(C.line.updateControlPoints(h,C.axis),o&&rd(p.ctx,C,h))}},beforeDatasetsDraw(p,r,s){if("beforeDatasetsDraw"!==s.drawTime)return;const o=p.getSortedVisibleDatasetMetas();for(let l=o.length-1;l>=0;--l){const h=o[l].$filler;h&&rd(p.ctx,h,p.chartArea)}},beforeDatasetDraw(p,r,s){const o=r.meta.$filler;!o||!1===o.fill||"beforeDatasetDraw"!==s.drawTime||rd(p.ctx,o,p.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ad=(p,r)=>{let{boxHeight:s=r,boxWidth:o=r}=p;return p.usePointStyle&&(s=Math.min(s,r),o=Math.min(o,r)),{boxWidth:o,boxHeight:s,itemHeight:Math.max(r,s)}};class Zl extends yr{constructor(r){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=r.chart,this.options=r.options,this.ctx=r.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(r,s,o){this.maxWidth=r,this.maxHeight=s,this._margins=o,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const r=this.options.labels||{};let s=ge(r.generateLabels,[this.chart],this)||[];r.filter&&(s=s.filter(o=>r.filter(o,this.chart.data))),r.sort&&(s=s.sort((o,l)=>r.sort(o,l,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:r,ctx:s}=this;if(!r.display)return void(this.width=this.height=0);const o=r.labels,l=Vs(o.font),h=l.size,_=this._computeTitleHeight(),{boxWidth:C,itemHeight:D}=ad(o,h);let L,U;s.font=l.string,this.isHorizontal()?(L=this.maxWidth,U=this._fitRows(_,h,C,D)+10):(U=this.maxHeight,L=this._fitCols(_,h,C,D)+10),this.width=Math.min(L,r.maxWidth||this.maxWidth),this.height=Math.min(U,r.maxHeight||this.maxHeight)}_fitRows(r,s,o,l){const{ctx:h,maxWidth:_,options:{labels:{padding:C}}}=this,D=this.legendHitBoxes=[],L=this.lineWidths=[0],U=l+C;let Z=r;h.textAlign="left",h.textBaseline="middle";let ue=-1,we=-U;return this.legendItems.forEach((Ze,ot)=>{const mt=o+s/2+h.measureText(Ze.text).width;(0===ot||L[L.length-1]+mt+2*C>_)&&(Z+=U,L[L.length-(ot>0?0:1)]=0,we+=U,ue++),D[ot]={left:0,top:we,row:ue,width:mt,height:l},L[L.length-1]+=mt+C}),Z}_fitCols(r,s,o,l){const{ctx:h,maxHeight:_,options:{labels:{padding:C}}}=this,D=this.legendHitBoxes=[],L=this.columnSizes=[],U=_-r;let Z=C,ue=0,we=0,Ze=0,ot=0;return this.legendItems.forEach((mt,bt)=>{const ei=o+s/2+h.measureText(mt.text).width;bt>0&&we+l+2*C>U&&(Z+=ue+C,L.push({width:ue,height:we}),Ze+=ue+C,ot++,ue=we=0),D[bt]={left:Ze,top:we,col:ot,width:ei,height:l},ue=Math.max(ue,ei),we+=l+C}),Z+=ue,L.push({width:ue,height:we}),Z}adjustHitBoxes(){if(!this.options.display)return;const r=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:o,labels:{padding:l},rtl:h}}=this,_=Us(h,this.left,this.width);if(this.isHorizontal()){let C=0,D=Ge(o,this.left+l,this.right-this.lineWidths[C]);for(const L of s)C!==L.row&&(C=L.row,D=Ge(o,this.left+l,this.right-this.lineWidths[C])),L.top+=this.top+r+l,L.left=_.leftForLtr(_.x(D),L.width),D+=L.width+l}else{let C=0,D=Ge(o,this.top+r+l,this.bottom-this.columnSizes[C].height);for(const L of s)L.col!==C&&(C=L.col,D=Ge(o,this.top+r+l,this.bottom-this.columnSizes[C].height)),L.top=D,L.left+=this.left+l,L.left=_.leftForLtr(_.x(L.left),L.width),D+=L.height+l}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const r=this.ctx;Js(r,this),this._draw(),ha(r)}}_draw(){const{options:r,columnSizes:s,lineWidths:o,ctx:l}=this,{align:h,labels:_}=r,C=Vn.color,D=Us(r.rtl,this.left,this.width),L=Vs(_.font),{color:U,padding:Z}=_,ue=L.size,we=ue/2;let Ze;this.drawTitle(),l.textAlign=D.textAlign("left"),l.textBaseline="middle",l.lineWidth=.5,l.font=L.string;const{boxWidth:ot,boxHeight:mt,itemHeight:bt}=ad(_,ue),mi=this.isHorizontal(),Ci=this._computeTitleHeight();Ze=mi?{x:Ge(h,this.left+Z,this.right-o[0]),y:this.top+Z+Ci,line:0}:{x:this.left+Z,y:Ge(h,this.top+Ci+Z,this.bottom-s[0].height),line:0},oo(this.ctx,r.textDirection);const Hi=bt+Z;this.legendItems.forEach((Ui,en)=>{l.strokeStyle=Ui.fontColor||U,l.fillStyle=Ui.fontColor||U;const cn=l.measureText(Ui.text).width,Ki=D.textAlign(Ui.textAlign||(Ui.textAlign=_.textAlign)),Ri=ot+we+cn;let pn=Ze.x,Hn=Ze.y;D.setWidth(this.width),mi?en>0&&pn+Ri+Z>this.right&&(Hn=Ze.y+=Hi,Ze.line++,pn=Ze.x=Ge(h,this.left+Z,this.right-o[Ze.line])):en>0&&Hn+Hi>this.bottom&&(pn=Ze.x=pn+s[Ze.line].width+Z,Ze.line++,Hn=Ze.y=Ge(h,this.top+Ci+Z,this.bottom-s[Ze.line].height)),function(Ui,en,cn){if(isNaN(ot)||ot<=0||isNaN(mt)||mt<0)return;l.save();const Ki=it(cn.lineWidth,1);if(l.fillStyle=it(cn.fillStyle,C),l.lineCap=it(cn.lineCap,"butt"),l.lineDashOffset=it(cn.lineDashOffset,0),l.lineJoin=it(cn.lineJoin,"miter"),l.lineWidth=Ki,l.strokeStyle=it(cn.strokeStyle,C),l.setLineDash(it(cn.lineDash,[])),_.usePointStyle){const Ri={radius:ot*Math.SQRT2/2,pointStyle:cn.pointStyle,rotation:cn.rotation,borderWidth:Ki},pn=D.xPlus(Ui,ot/2);$s(l,Ri,pn,en+we)}else{const Ri=en+Math.max((ue-mt)/2,0),pn=D.leftForLtr(Ui,ot),Hn=ao(cn.borderRadius);l.beginPath(),Object.values(Hn).some(qt=>0!==qt)?Tr(l,{x:pn,y:Ri,w:ot,h:mt,radius:Hn}):l.rect(pn,Ri,ot,mt),l.fill(),0!==Ki&&l.stroke()}l.restore()}(D.x(pn),Hn,Ui),pn=((p,r,s,o)=>p===(o?"left":"right")?s:"center"===p?(r+s)/2:r)(Ki,pn+ot+we,mi?pn+Ri:this.right,r.rtl),function(Ui,en,cn){bo(l,cn.text,Ui,en+bt/2,L,{strikethrough:cn.hidden,textAlign:D.textAlign(cn.textAlign)})}(D.x(pn),Hn,Ui),mi?Ze.x+=Ri+Z:Ze.y+=Hi}),Qr(this.ctx,r.textDirection)}drawTitle(){const r=this.options,s=r.title,o=Vs(s.font),l=ys(s.padding);if(!s.display)return;const h=Us(r.rtl,this.left,this.width),_=this.ctx,C=s.position,L=l.top+o.size/2;let U,Z=this.left,ue=this.width;if(this.isHorizontal())ue=Math.max(...this.lineWidths),U=this.top+L,Z=Ge(r.align,Z,this.right-ue);else{const Ze=this.columnSizes.reduce((ot,mt)=>Math.max(ot,mt.height),0);U=L+Ge(r.align,this.top,this.bottom-Ze-r.labels.padding-this._computeTitleHeight())}const we=Ge(C,Z,Z+ue);_.textAlign=h.textAlign(st(C)),_.textBaseline="middle",_.strokeStyle=s.color,_.fillStyle=s.color,_.font=o.string,bo(_,s.text,we,U,o)}_computeTitleHeight(){const r=this.options.title,s=Vs(r.font),o=ys(r.padding);return r.display?s.lineHeight+o.height:0}_getLegendItemAt(r,s){let o,l,h;if($i(r,this.left,this.right)&&$i(s,this.top,this.bottom))for(h=this.legendHitBoxes,o=0;o<h.length;++o)if(l=h[o],$i(r,l.left,l.left+l.width)&&$i(s,l.top,l.top+l.height))return this.legendItems[o];return null}handleEvent(r){const s=this.options;if(!function(p,r){return!!("mousemove"===p&&(r.onHover||r.onLeave)||r.onClick&&("click"===p||"mouseup"===p))}(r.type,s))return;const o=this._getLegendItemAt(r.x,r.y);if("mousemove"===r.type){const l=this._hoveredItem,h=((p,r)=>null!==p&&null!==r&&p.datasetIndex===r.datasetIndex&&p.index===r.index)(l,o);l&&!h&&ge(s.onLeave,[r,l,this],this),this._hoveredItem=o,o&&!h&&ge(s.onHover,[r,o,this],this)}else o&&ge(s.onClick,[r,o,this],this)}}var zs={id:"legend",_element:Zl,start(p,r,s){const o=p.legend=new Zl({ctx:p.ctx,options:s,chart:p});Ws.configure(p,o,s),Ws.addBox(p,o)},stop(p){Ws.removeBox(p,p.legend),delete p.legend},beforeUpdate(p,r,s){const o=p.legend;Ws.configure(p,o,s),o.options=s},afterUpdate(p){const r=p.legend;r.buildLabels(),r.adjustHitBoxes()},afterEvent(p,r){r.replay||p.legend.handleEvent(r.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(p,r,s){const o=r.datasetIndex,l=s.chart;l.isDatasetVisible(o)?(l.hide(o),r.hidden=!0):(l.show(o),r.hidden=!1)},onHover:null,onLeave:null,labels:{color:p=>p.chart.options.color,boxWidth:40,padding:10,generateLabels(p){const r=p.data.datasets,{labels:{usePointStyle:s,pointStyle:o,textAlign:l,color:h}}=p.legend.options;return p._getSortedDatasetMetas().map(_=>{const C=_.controller.getStyle(s?0:void 0),D=ys(C.borderWidth);return{text:r[_.index].label,fillStyle:C.backgroundColor,fontColor:h,hidden:!_.visible,lineCap:C.borderCapStyle,lineDash:C.borderDash,lineDashOffset:C.borderDashOffset,lineJoin:C.borderJoinStyle,lineWidth:(D.width+D.height)/4,strokeStyle:C.borderColor,pointStyle:o||C.pointStyle,rotation:C.rotation,textAlign:l||C.textAlign,borderRadius:0,datasetIndex:_.index}},this)}},title:{color:p=>p.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:p=>!p.startsWith("on"),labels:{_scriptable:p=>!["generateLabels","filter","sort"].includes(p)}}};class Zc extends yr{constructor(r){super(),this.chart=r.chart,this.options=r.options,this.ctx=r.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(r,s){const o=this.options;if(this.left=0,this.top=0,!o.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=r,this.height=this.bottom=s;const l=Oe(o.text)?o.text.length:1;this._padding=ys(o.padding);const h=l*Vs(o.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=h:this.width=h}isHorizontal(){const r=this.options.position;return"top"===r||"bottom"===r}_drawArgs(r){const{top:s,left:o,bottom:l,right:h,options:_}=this,C=_.align;let L,U,Z,D=0;return this.isHorizontal()?(U=Ge(C,o,h),Z=s+r,L=h-o):("left"===_.position?(U=o+r,Z=Ge(C,l,s),D=-.5*de):(U=h-r,Z=Ge(C,s,l),D=.5*de),L=l-s),{titleX:U,titleY:Z,maxWidth:L,rotation:D}}draw(){const r=this.ctx,s=this.options;if(!s.display)return;const o=Vs(s.font),h=o.lineHeight/2+this._padding.top,{titleX:_,titleY:C,maxWidth:D,rotation:L}=this._drawArgs(h);bo(r,s.text,0,0,o,{color:s.color,maxWidth:D,rotation:L,textAlign:st(s.align),textBaseline:"middle",translation:[_,C]})}}var ql={id:"title",_element:Zc,start(p,r,s){!function(p,r){const s=new Zc({ctx:p.ctx,options:r,chart:p});Ws.configure(p,s,r),Ws.addBox(p,s),p.titleBlock=s}(p,s)},stop(p){Ws.removeBox(p,p.titleBlock),delete p.titleBlock},beforeUpdate(p,r,s){const o=p.titleBlock;Ws.configure(p,o,s),o.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qc=new WeakMap;var Du={id:"subtitle",start(p,r,s){const o=new Zc({ctx:p.ctx,options:s,chart:p});Ws.configure(p,o,s),Ws.addBox(p,o),qc.set(p,o)},stop(p){Ws.removeBox(p,qc.get(p)),qc.delete(p)},beforeUpdate(p,r,s){const o=qc.get(p);Ws.configure(p,o,s),o.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Qc={average(p){if(!p.length)return!1;let r,s,o=0,l=0,h=0;for(r=0,s=p.length;r<s;++r){const _=p[r].element;if(_&&_.hasValue()){const C=_.tooltipPosition();o+=C.x,l+=C.y,++h}}return{x:o/h,y:l/h}},nearest(p,r){if(!p.length)return!1;let h,_,C,s=r.x,o=r.y,l=Number.POSITIVE_INFINITY;for(h=0,_=p.length;h<_;++h){const D=p[h].element;if(D&&D.hasValue()){const U=Ln(r,D.getCenterPoint());U<l&&(l=U,C=D)}}if(C){const D=C.tooltipPosition();s=D.x,o=D.y}return{x:s,y:o}}};function Ns(p,r){return r&&(Oe(r)?Array.prototype.push.apply(p,r):p.push(r)),p}function Ua(p){return("string"==typeof p||p instanceof String)&&p.indexOf("\n")>-1?p.split("\n"):p}function pc(p,r){const{element:s,datasetIndex:o,index:l}=r,h=p.getDatasetMeta(o).controller,{label:_,value:C}=h.getLabelAndValue(l);return{chart:p,label:_,parsed:h.getParsed(l),raw:p.data.datasets[o].data[l],formattedValue:C,dataset:h.getDataset(),dataIndex:l,datasetIndex:o,element:s}}function ld(p,r){const s=p.chart.ctx,{body:o,footer:l,title:h}=p,{boxWidth:_,boxHeight:C}=r,D=Vs(r.bodyFont),L=Vs(r.titleFont),U=Vs(r.footerFont),Z=h.length,ue=l.length,we=o.length,Ze=ys(r.padding);let ot=Ze.height,mt=0,bt=o.reduce((mi,Ci)=>mi+Ci.before.length+Ci.lines.length+Ci.after.length,0);bt+=p.beforeBody.length+p.afterBody.length,Z&&(ot+=Z*L.lineHeight+(Z-1)*r.titleSpacing+r.titleMarginBottom),bt&&(ot+=we*(r.displayColors?Math.max(C,D.lineHeight):D.lineHeight)+(bt-we)*D.lineHeight+(bt-1)*r.bodySpacing),ue&&(ot+=r.footerMarginTop+ue*U.lineHeight+(ue-1)*r.footerSpacing);let ei=0;const ki=function(mi){mt=Math.max(mt,s.measureText(mi).width+ei)};return s.save(),s.font=L.string,se(p.title,ki),s.font=D.string,se(p.beforeBody.concat(p.afterBody),ki),ei=r.displayColors?_+2+r.boxPadding:0,se(o,mi=>{se(mi.before,ki),se(mi.lines,ki),se(mi.after,ki)}),ei=0,s.font=U.string,se(p.footer,ki),s.restore(),mt+=Ze.width,{width:mt,height:ot}}function v(p,r,s,o){const{x:l,width:h}=s,{width:_,chartArea:{left:C,right:D}}=p;let L="center";return"center"===o?L=l<=(C+D)/2?"left":"right":l<=h/2?L="left":l>=_-h/2&&(L="right"),function(p,r,s,o){const{x:l,width:h}=o,_=s.caretSize+s.caretPadding;if("left"===p&&l+h+_>r.width||"right"===p&&l-h-_<0)return!0}(L,p,r,s)&&(L="center"),L}function w(p,r,s){const o=s.yAlign||r.yAlign||function(p,r){const{y:s,height:o}=r;return s<o/2?"top":s>p.height-o/2?"bottom":"center"}(p,s);return{xAlign:s.xAlign||r.xAlign||v(p,r,s,o),yAlign:o}}function H(p,r,s,o){const{caretSize:l,caretPadding:h,cornerRadius:_}=p,{xAlign:C,yAlign:D}=s,L=l+h,{topLeft:U,topRight:Z,bottomLeft:ue,bottomRight:we}=ao(_);let Ze=function(p,r){let{x:s,width:o}=p;return"right"===r?s-=o:"center"===r&&(s-=o/2),s}(r,C);const ot=function(p,r,s){let{y:o,height:l}=p;return"top"===r?o+=s:o-="bottom"===r?l+s:l/2,o}(r,D,L);return"center"===D?"left"===C?Ze+=L:"right"===C&&(Ze-=L):"left"===C?Ze-=Math.max(U,ue)+l:"right"===C&&(Ze+=Math.max(Z,we)+l),{x:Mi(Ze,0,o.width-r.width),y:Mi(ot,0,o.height-r.height)}}function J(p,r,s){const o=ys(s.padding);return"center"===r?p.x+p.width/2:"right"===r?p.x+p.width-o.right:p.x+o.left}function oe(p){return Ns([],Ua(p))}function Ee(p,r){const s=r&&r.dataset&&r.dataset.tooltip&&r.dataset.tooltip.callbacks;return s?p.override(s):p}let rt=(()=>{class p extends yr{constructor(s){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=s.chart||s._chart,this._chart=this.chart,this.options=s.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(s){this.options=s,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const s=this._cachedAnimations;if(s)return s;const o=this.chart,l=this.options.setContext(this.getContext()),h=l.enabled&&o.options.animation&&l.animations,_=new ol(this.chart,h);return h._cacheable&&(this._cachedAnimations=Object.freeze(_)),_}getContext(){return this.$context||(this.$context=function(p,r,s){return lo(p,{tooltip:r,tooltipItems:s,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(s,o){const{callbacks:l}=o,h=l.beforeTitle.apply(this,[s]),_=l.title.apply(this,[s]),C=l.afterTitle.apply(this,[s]);let D=[];return D=Ns(D,Ua(h)),D=Ns(D,Ua(_)),D=Ns(D,Ua(C)),D}getBeforeBody(s,o){return oe(o.callbacks.beforeBody.apply(this,[s]))}getBody(s,o){const{callbacks:l}=o,h=[];return se(s,_=>{const C={before:[],lines:[],after:[]},D=Ee(l,_);Ns(C.before,Ua(D.beforeLabel.call(this,_))),Ns(C.lines,D.label.call(this,_)),Ns(C.after,Ua(D.afterLabel.call(this,_))),h.push(C)}),h}getAfterBody(s,o){return oe(o.callbacks.afterBody.apply(this,[s]))}getFooter(s,o){const{callbacks:l}=o,h=l.beforeFooter.apply(this,[s]),_=l.footer.apply(this,[s]),C=l.afterFooter.apply(this,[s]);let D=[];return D=Ns(D,Ua(h)),D=Ns(D,Ua(_)),D=Ns(D,Ua(C)),D}_createItems(s){const o=this._active,l=this.chart.data,h=[],_=[],C=[];let L,U,D=[];for(L=0,U=o.length;L<U;++L)D.push(pc(this.chart,o[L]));return s.filter&&(D=D.filter((Z,ue,we)=>s.filter(Z,ue,we,l))),s.itemSort&&(D=D.sort((Z,ue)=>s.itemSort(Z,ue,l))),se(D,Z=>{const ue=Ee(s.callbacks,Z);h.push(ue.labelColor.call(this,Z)),_.push(ue.labelPointStyle.call(this,Z)),C.push(ue.labelTextColor.call(this,Z))}),this.labelColors=h,this.labelPointStyles=_,this.labelTextColors=C,this.dataPoints=D,D}update(s,o){const l=this.options.setContext(this.getContext()),h=this._active;let _,C=[];if(h.length){const D=Qc[l.position].call(this,h,this._eventPosition);C=this._createItems(l),this.title=this.getTitle(C,l),this.beforeBody=this.getBeforeBody(C,l),this.body=this.getBody(C,l),this.afterBody=this.getAfterBody(C,l),this.footer=this.getFooter(C,l);const L=this._size=ld(this,l),U=Object.assign({},D,L),Z=w(this.chart,l,U),ue=H(l,U,Z,this.chart);this.xAlign=Z.xAlign,this.yAlign=Z.yAlign,_={opacity:1,x:ue.x,y:ue.y,width:L.width,height:L.height,caretX:D.x,caretY:D.y}}else 0!==this.opacity&&(_={opacity:0});this._tooltipItems=C,this.$context=void 0,_&&this._resolveAnimations().update(this,_),s&&l.external&&l.external.call(this,{chart:this.chart,tooltip:this,replay:o})}drawCaret(s,o,l,h){const _=this.getCaretPosition(s,l,h);o.lineTo(_.x1,_.y1),o.lineTo(_.x2,_.y2),o.lineTo(_.x3,_.y3)}getCaretPosition(s,o,l){const{xAlign:h,yAlign:_}=this,{caretSize:C,cornerRadius:D}=l,{topLeft:L,topRight:U,bottomLeft:Z,bottomRight:ue}=ao(D),{x:we,y:Ze}=s,{width:ot,height:mt}=o;let bt,ei,ki,mi,Ci,Hi;return"center"===_?(Ci=Ze+mt/2,"left"===h?(bt=we,ei=bt-C,mi=Ci+C,Hi=Ci-C):(bt=we+ot,ei=bt+C,mi=Ci-C,Hi=Ci+C),ki=bt):(ei="left"===h?we+Math.max(L,Z)+C:"right"===h?we+ot-Math.max(U,ue)-C:this.caretX,"top"===_?(mi=Ze,Ci=mi-C,bt=ei-C,ki=ei+C):(mi=Ze+mt,Ci=mi+C,bt=ei+C,ki=ei-C),Hi=mi),{x1:bt,x2:ei,x3:ki,y1:mi,y2:Ci,y3:Hi}}drawTitle(s,o,l){const h=this.title,_=h.length;let C,D,L;if(_){const U=Us(l.rtl,this.x,this.width);for(s.x=J(this,l.titleAlign,l),o.textAlign=U.textAlign(l.titleAlign),o.textBaseline="middle",C=Vs(l.titleFont),D=l.titleSpacing,o.fillStyle=l.titleColor,o.font=C.string,L=0;L<_;++L)o.fillText(h[L],U.x(s.x),s.y+C.lineHeight/2),s.y+=C.lineHeight+D,L+1===_&&(s.y+=l.titleMarginBottom-D)}}_drawColorBox(s,o,l,h,_){const C=this.labelColors[l],D=this.labelPointStyles[l],{boxHeight:L,boxWidth:U,boxPadding:Z}=_,ue=Vs(_.bodyFont),we=J(this,"left",_),Ze=h.x(we),mt=o.y+(L<ue.lineHeight?(ue.lineHeight-L)/2:0);if(_.usePointStyle){const bt={radius:Math.min(U,L)/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:1},ei=h.leftForLtr(Ze,U)+U/2,ki=mt+L/2;s.strokeStyle=_.multiKeyBackground,s.fillStyle=_.multiKeyBackground,$s(s,bt,ei,ki),s.strokeStyle=C.borderColor,s.fillStyle=C.backgroundColor,$s(s,bt,ei,ki)}else{s.lineWidth=C.borderWidth||1,s.strokeStyle=C.borderColor,s.setLineDash(C.borderDash||[]),s.lineDashOffset=C.borderDashOffset||0;const bt=h.leftForLtr(Ze,U-Z),ei=h.leftForLtr(h.xPlus(Ze,1),U-Z-2),ki=ao(C.borderRadius);Object.values(ki).some(mi=>0!==mi)?(s.beginPath(),s.fillStyle=_.multiKeyBackground,Tr(s,{x:bt,y:mt,w:U,h:L,radius:ki}),s.fill(),s.stroke(),s.fillStyle=C.backgroundColor,s.beginPath(),Tr(s,{x:ei,y:mt+1,w:U-2,h:L-2,radius:ki}),s.fill()):(s.fillStyle=_.multiKeyBackground,s.fillRect(bt,mt,U,L),s.strokeRect(bt,mt,U,L),s.fillStyle=C.backgroundColor,s.fillRect(ei,mt+1,U-2,L-2))}s.fillStyle=this.labelTextColors[l]}drawBody(s,o,l){const{body:h}=this,{bodySpacing:_,bodyAlign:C,displayColors:D,boxHeight:L,boxWidth:U,boxPadding:Z}=l,ue=Vs(l.bodyFont);let we=ue.lineHeight,Ze=0;const ot=Us(l.rtl,this.x,this.width),mt=function(cn){o.fillText(cn,ot.x(s.x+Ze),s.y+we/2),s.y+=we+_},bt=ot.textAlign(C);let ei,ki,mi,Ci,Hi,Ui,en;for(o.textAlign=C,o.textBaseline="middle",o.font=ue.string,s.x=J(this,bt,l),o.fillStyle=l.bodyColor,se(this.beforeBody,mt),Ze=D&&"right"!==bt?"center"===C?U/2+Z:U+2+Z:0,Ci=0,Ui=h.length;Ci<Ui;++Ci){for(ei=h[Ci],ki=this.labelTextColors[Ci],o.fillStyle=ki,se(ei.before,mt),mi=ei.lines,D&&mi.length&&(this._drawColorBox(o,s,Ci,ot,l),we=Math.max(ue.lineHeight,L)),Hi=0,en=mi.length;Hi<en;++Hi)mt(mi[Hi]),we=ue.lineHeight;se(ei.after,mt)}Ze=0,we=ue.lineHeight,se(this.afterBody,mt),s.y-=_}drawFooter(s,o,l){const h=this.footer,_=h.length;let C,D;if(_){const L=Us(l.rtl,this.x,this.width);for(s.x=J(this,l.footerAlign,l),s.y+=l.footerMarginTop,o.textAlign=L.textAlign(l.footerAlign),o.textBaseline="middle",C=Vs(l.footerFont),o.fillStyle=l.footerColor,o.font=C.string,D=0;D<_;++D)o.fillText(h[D],L.x(s.x),s.y+C.lineHeight/2),s.y+=C.lineHeight+l.footerSpacing}}drawBackground(s,o,l,h){const{xAlign:_,yAlign:C}=this,{x:D,y:L}=s,{width:U,height:Z}=l,{topLeft:ue,topRight:we,bottomLeft:Ze,bottomRight:ot}=ao(h.cornerRadius);o.fillStyle=h.backgroundColor,o.strokeStyle=h.borderColor,o.lineWidth=h.borderWidth,o.beginPath(),o.moveTo(D+ue,L),"top"===C&&this.drawCaret(s,o,l,h),o.lineTo(D+U-we,L),o.quadraticCurveTo(D+U,L,D+U,L+we),"center"===C&&"right"===_&&this.drawCaret(s,o,l,h),o.lineTo(D+U,L+Z-ot),o.quadraticCurveTo(D+U,L+Z,D+U-ot,L+Z),"bottom"===C&&this.drawCaret(s,o,l,h),o.lineTo(D+Ze,L+Z),o.quadraticCurveTo(D,L+Z,D,L+Z-Ze),"center"===C&&"left"===_&&this.drawCaret(s,o,l,h),o.lineTo(D,L+ue),o.quadraticCurveTo(D,L,D+ue,L),o.closePath(),o.fill(),h.borderWidth>0&&o.stroke()}_updateAnimationTarget(s){const o=this.chart,l=this.$animations,h=l&&l.x,_=l&&l.y;if(h||_){const C=Qc[s.position].call(this,this._active,this._eventPosition);if(!C)return;const D=this._size=ld(this,s),L=Object.assign({},C,this._size),U=w(o,s,L),Z=H(s,L,U,o);(h._to!==Z.x||_._to!==Z.y)&&(this.xAlign=U.xAlign,this.yAlign=U.yAlign,this.width=D.width,this.height=D.height,this.caretX=C.x,this.caretY=C.y,this._resolveAnimations().update(this,Z))}}draw(s){const o=this.options.setContext(this.getContext());let l=this.opacity;if(!l)return;this._updateAnimationTarget(o);const h={width:this.width,height:this.height},_={x:this.x,y:this.y};l=Math.abs(l)<.001?0:l;const C=ys(o.padding);o.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(s.save(),s.globalAlpha=l,this.drawBackground(_,s,h,o),oo(s,o.textDirection),_.y+=C.top,this.drawTitle(_,s,o),this.drawBody(_,s,o),this.drawFooter(_,s,o),Qr(s,o.textDirection),s.restore())}getActiveElements(){return this._active||[]}setActiveElements(s,o){const l=this._active,h=s.map(({datasetIndex:D,index:L})=>{const U=this.chart.getDatasetMeta(D);if(!U)throw new Error("Cannot find a dataset at index "+D);return{datasetIndex:D,element:U.data[L],index:L}}),_=!at(l,h),C=this._positionChanged(h,o);(_||C)&&(this._active=h,this._eventPosition=o,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(s,o,l=!0){if(o&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const h=this.options,_=this._active||[],C=this._getActiveElements(s,_,o,l),D=this._positionChanged(C,s),L=o||!at(C,_)||D;return L&&(this._active=C,(h.enabled||h.external)&&(this._eventPosition={x:s.x,y:s.y},this.update(!0,o))),L}_getActiveElements(s,o,l,h){const _=this.options;if("mouseout"===s.type)return[];if(!h)return o;const C=this.chart.getElementsAtEventForMode(s,_.mode,_,l);return _.reverse&&C.reverse(),C}_positionChanged(s,o){const{caretX:l,caretY:h,options:_}=this,C=Qc[_.position].call(this,s,o);return!1!==C&&(l!==C.x||h!==C.y)}}return p.positioners=Qc,p})();var Yt=Object.freeze({__proto__:null,Decimation:Ad,Filler:Wu,Legend:zs,SubTitle:Du,Title:ql,Tooltip:{id:"tooltip",_element:rt,positioners:Qc,afterInit(p,r,s){s&&(p.tooltip=new rt({chart:p,options:s}))},beforeUpdate(p,r,s){p.tooltip&&p.tooltip.initialize(s)},reset(p,r,s){p.tooltip&&p.tooltip.initialize(s)},afterDraw(p){const r=p.tooltip,s={tooltip:r};!1!==p.notifyPlugins("beforeTooltipDraw",s)&&(r&&r.draw(p.ctx),p.notifyPlugins("afterTooltipDraw",s))},afterEvent(p,r){p.tooltip&&p.tooltip.handleEvent(r.event,r.replay,r.inChartArea)&&(r.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(p,r)=>r.bodyFont.size,boxWidth:(p,r)=>r.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Rt,title(p){if(p.length>0){const r=p[0],s=r.chart.data.labels,o=s?s.length:0;if(this&&this.options&&"dataset"===this.options.mode)return r.dataset.label||"";if(r.label)return r.label;if(o>0&&r.dataIndex<o)return s[r.dataIndex]}return""},afterTitle:Rt,beforeBody:Rt,beforeLabel:Rt,label(p){if(this&&this.options&&"dataset"===this.options.mode)return p.label+": "+p.formattedValue||p.formattedValue;let r=p.dataset.label||"";r&&(r+=": ");const s=p.formattedValue;return tt(s)||(r+=s),r},labelColor(p){const s=p.chart.getDatasetMeta(p.datasetIndex).controller.getStyle(p.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(p){const s=p.chart.getDatasetMeta(p.datasetIndex).controller.getStyle(p.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Rt,afterBody:Rt,beforeFooter:Rt,footer:Rt,afterFooter:Rt}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:p=>"filter"!==p&&"itemSort"!==p&&"external"!==p,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class Ii extends Gr{constructor(r){super(r),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(r){const s=this._addedLabels;if(s.length){const o=this.getLabels();for(const{index:l,label:h}of s)o[l]===h&&o.splice(l,1);this._addedLabels=[]}super.init(r)}parse(r,s){if(tt(r))return null;const o=this.getLabels();return((p,r)=>null===p?null:Mi(Math.round(p),0,r))(s=isFinite(s)&&o[s]===r?s:function(p,r,s,o){const l=p.indexOf(r);return-1===l?((p,r,s,o)=>("string"==typeof r?(s=p.push(r)-1,o.unshift({index:s,label:r})):isNaN(r)&&(s=null),s))(p,r,s,o):l!==p.lastIndexOf(r)?s:l}(o,r,it(s,r),this._addedLabels),o.length-1)}determineDataLimits(){const{minDefined:r,maxDefined:s}=this.getUserBounds();let{min:o,max:l}=this.getMinMax(!0);"ticks"===this.options.bounds&&(r||(o=0),s||(l=this.getLabels().length-1)),this.min=o,this.max=l}buildTicks(){const r=this.min,s=this.max,o=this.options.offset,l=[];let h=this.getLabels();h=0===r&&s===h.length-1?h:h.slice(r,s+1),this._valueRange=Math.max(h.length-(o?0:1),1),this._startValue=this.min-(o?.5:0);for(let _=r;_<=s;_++)l.push({value:_});return l}getLabelForValue(r){const s=this.getLabels();return r>=0&&r<s.length?s[r]:r}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(r){return"number"!=typeof r&&(r=this.parse(r)),null===r?NaN:this.getPixelForDecimal((r-this._startValue)/this._valueRange)}getPixelForTick(r){const s=this.ticks;return r<0||r>s.length-1?null:this.getPixelForValue(s[r].value)}getValueForPixel(r){return Math.round(this._startValue+this.getDecimalForPixel(r)*this._valueRange)}getBasePixel(){return this.bottom}}function Qi(p,r,{horizontal:s,minRotation:o}){const l=si(o),h=(s?Math.sin(l):Math.cos(l))||.001;return Math.min(r/h,.75*r*(""+p).length)}Ii.id="category",Ii.defaults={ticks:{callback:Ii.prototype.getLabelForValue}};class Pi extends Gr{constructor(r){super(r),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(r,s){return tt(r)||("number"==typeof r||r instanceof Number)&&!isFinite(+r)?null:+r}handleTickRangeOptions(){const{beginAtZero:r}=this.options,{minDefined:s,maxDefined:o}=this.getUserBounds();let{min:l,max:h}=this;const _=D=>l=s?l:D,C=D=>h=o?h:D;if(r){const D=Ye(l),L=Ye(h);D<0&&L<0?C(0):D>0&&L>0&&_(0)}if(l===h){let D=1;(h>=Number.MAX_SAFE_INTEGER||l<=Number.MIN_SAFE_INTEGER)&&(D=Math.abs(.05*h)),C(h+D),r||_(l-D)}this.min=l,this.max=h}getTickLimit(){const r=this.options.ticks;let l,{maxTicksLimit:s,stepSize:o}=r;return o?(l=Math.ceil(this.max/o)-Math.floor(this.min/o)+1,l>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${o} would result generating up to ${l} ticks. Limiting to 1000.`),l=1e3)):(l=this.computeTickLimit(),s=s||11),s&&(l=Math.min(s,l)),l}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const r=this.options,s=r.ticks;let o=this.getTickLimit();o=Math.max(2,o);const _=function(p,r){const s=[],{bounds:l,step:h,min:_,max:C,precision:D,count:L,maxTicks:U,maxDigits:Z,includeBounds:ue}=p,we=h||1,Ze=U-1,{min:ot,max:mt}=r,bt=!tt(_),ei=!tt(C),ki=!tt(L),mi=(mt-ot)/(Z+1);let Hi,Ui,en,cn,Ci=et((mt-ot)/Ze/we)*we;if(Ci<1e-14&&!bt&&!ei)return[{value:ot},{value:mt}];cn=Math.ceil(mt/Ci)-Math.floor(ot/Ci),cn>Ze&&(Ci=et(cn*Ci/Ze/we)*we),tt(D)||(Hi=Math.pow(10,D),Ci=Math.ceil(Ci*Hi)/Hi),"ticks"===l?(Ui=Math.floor(ot/Ci)*Ci,en=Math.ceil(mt/Ci)*Ci):(Ui=ot,en=mt),bt&&ei&&h&&function(p,r){const s=Math.round(p);return s-r<=p&&s+r>=p}((C-_)/h,Ci/1e3)?(cn=Math.round(Math.min((C-_)/Ci,U)),Ci=(C-_)/cn,Ui=_,en=C):ki?(Ui=bt?_:Ui,en=ei?C:en,cn=L-1,Ci=(en-Ui)/cn):(cn=(en-Ui)/Ci,cn=Bt(cn,Math.round(cn),Ci/1e3)?Math.round(cn):Math.ceil(cn));const Ki=Math.max(sn(Ci),sn(Ui));Hi=Math.pow(10,tt(D)?Ki:D),Ui=Math.round(Ui*Hi)/Hi,en=Math.round(en*Hi)/Hi;let Ri=0;for(bt&&(ue&&Ui!==_?(s.push({value:_}),Ui<_&&Ri++,Bt(Math.round((Ui+Ri*Ci)*Hi)/Hi,_,Qi(_,mi,p))&&Ri++):Ui<_&&Ri++);Ri<cn;++Ri)s.push({value:Math.round((Ui+Ri*Ci)*Hi)/Hi});return ei&&ue&&en!==C?s.length&&Bt(s[s.length-1].value,C,Qi(C,mi,p))?s[s.length-1].value=C:s.push({value:C}):(!ei||en===C)&&s.push({value:en}),s}({maxTicks:o,bounds:r.bounds,min:r.min,max:r.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:!1!==s.includeBounds},this._range||this);return"ticks"===r.bounds&&bi(_,this,"value"),r.reverse?(_.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),_}configure(){const r=this.ticks;let s=this.min,o=this.max;if(super.configure(),this.options.offset&&r.length){const l=(o-s)/Math.max(r.length-1,1)/2;s-=l,o+=l}this._startValue=s,this._endValue=o,this._valueRange=o-s}getLabelForValue(r){return kn(r,this.chart.options.locale,this.options.ticks.format)}}class qi extends Pi{determineDataLimits(){const{min:r,max:s}=this.getMinMax(!0);this.min=Qe(r)?r:0,this.max=Qe(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const r=this.isHorizontal(),s=r?this.width:this.height,o=si(this.options.ticks.minRotation),l=(r?Math.sin(o):Math.cos(o))||.001,h=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,h.lineHeight/l))}getPixelForValue(r){return null===r?NaN:this.getPixelForDecimal((r-this._startValue)/this._valueRange)}getValueForPixel(r){return this._startValue+this.getDecimalForPixel(r)*this._valueRange}}function bn(p){return p/Math.pow(10,Math.floor(Ue(p)))==1}qi.id="linear",qi.defaults={ticks:{callback:Mc.formatters.numeric}};class Qn extends Gr{constructor(r){super(r),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(r,s){const o=Pi.prototype.parse.apply(this,[r,s]);if(0!==o)return Qe(o)&&o>0?o:null;this._zero=!0}determineDataLimits(){const{min:r,max:s}=this.getMinMax(!0);this.min=Qe(r)?Math.max(0,r):null,this.max=Qe(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:r,maxDefined:s}=this.getUserBounds();let o=this.min,l=this.max;const h=D=>o=r?o:D,_=D=>l=s?l:D,C=(D,L)=>Math.pow(10,Math.floor(Ue(D))+L);o===l&&(o<=0?(h(1),_(10)):(h(C(o,-1)),_(C(l,1)))),o<=0&&h(C(l,-1)),l<=0&&_(C(o,1)),this._zero&&this.min!==this._suggestedMin&&o===C(this.min,0)&&h(C(o,-1)),this.min=o,this.max=l}buildTicks(){const r=this.options,o=function(p,r){const s=Math.floor(Ue(r.max)),o=Math.ceil(r.max/Math.pow(10,s)),l=[];let h=dt(p.min,Math.pow(10,Math.floor(Ue(r.min)))),_=Math.floor(Ue(h)),C=Math.floor(h/Math.pow(10,_)),D=_<0?Math.pow(10,Math.abs(_)):1;do{l.push({value:h,major:bn(h)}),++C,10===C&&(C=1,++_,D=_>=0?1:D),h=Math.round(C*Math.pow(10,_)*D)/D}while(_<s||_===s&&C<o);const L=dt(p.max,h);return l.push({value:L,major:bn(h)}),l}({min:this._userMin,max:this._userMax},this);return"ticks"===r.bounds&&bi(o,this,"value"),r.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}getLabelForValue(r){return void 0===r?"0":kn(r,this.chart.options.locale,this.options.ticks.format)}configure(){const r=this.min;super.configure(),this._startValue=Ue(r),this._valueRange=Ue(this.max)-Ue(r)}getPixelForValue(r){return(void 0===r||0===r)&&(r=this.min),null===r||isNaN(r)?NaN:this.getPixelForDecimal(r===this.min?0:(Ue(r)-this._startValue)/this._valueRange)}getValueForPixel(r){const s=this.getDecimalForPixel(r);return Math.pow(10,this._startValue+s*this._valueRange)}}function Os(p){const r=p.ticks;if(r.display&&p.display){const s=ys(r.backdropPadding);return it(r.font&&r.font.size,Vn.font.size)+s.height}return 0}function No(p,r,s){return s=Oe(s)?s:[s],{w:$o(p,r.string,s),h:s.length*r.lineHeight}}function ro(p,r,s,o,l){return p===o||p===l?{start:r-s/2,end:r+s/2}:p<o||p>l?{start:r-s,end:r}:{start:r,end:r+s}}function ca(p,r,s,o,l){const h=Math.abs(Math.sin(s)),_=Math.abs(Math.cos(s));let C=0,D=0;o.start<r.l?(C=(r.l-o.start)/h,p.l=Math.min(p.l,r.l-C)):o.end>r.r&&(C=(o.end-r.r)/h,p.r=Math.max(p.r,r.r+C)),l.start<r.t?(D=(r.t-l.start)/_,p.t=Math.min(p.t,r.t-D)):l.end>r.b&&(D=(l.end-r.b)/_,p.b=Math.max(p.b,r.b+D))}function jr(p){return 0===p||180===p?"center":p<180?"left":"right"}function ar(p,r,s){return"right"===s?p-=r:"center"===s&&(p-=r/2),p}function Ko(p,r,s){return 90===s||270===s?p-=r/2:(s>270||s<90)&&(p-=r),p}function xo(p,r,s,o){const{ctx:l}=p;if(s)l.arc(p.xCenter,p.yCenter,r,0,Te);else{let h=p.getPointPosition(0,r);l.moveTo(h.x,h.y);for(let _=1;_<o;_++)h=p.getPointPosition(_,r),l.lineTo(h.x,h.y)}}Qn.id="logarithmic",Qn.defaults={ticks:{callback:Mc.formatters.logarithmic,major:{enabled:!0}}};class Ca extends Pi{constructor(r){super(r),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const r=this._padding=ys(Os(this.options)/2),s=this.width=this.maxWidth-r.width,o=this.height=this.maxHeight-r.height;this.xCenter=Math.floor(this.left+s/2+r.left),this.yCenter=Math.floor(this.top+o/2+r.top),this.drawingArea=Math.floor(Math.min(s,o)/2)}determineDataLimits(){const{min:r,max:s}=this.getMinMax(!1);this.min=Qe(r)&&!isNaN(r)?r:0,this.max=Qe(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Os(this.options))}generateTickLabels(r){Pi.prototype.generateTickLabels.call(this,r),this._pointLabels=this.getLabels().map((s,o)=>{const l=ge(this.options.pointLabels.callback,[s,o],this);return l||0===l?l:""}).filter((s,o)=>this.chart.getDataVisibility(o))}fit(){const r=this.options;r.display&&r.pointLabels.display?function(p){const r={l:p.left+p._padding.left,r:p.right-p._padding.right,t:p.top+p._padding.top,b:p.bottom-p._padding.bottom},s=Object.assign({},r),o=[],l=[],h=p._pointLabels.length,_=p.options.pointLabels,C=_.centerPointLabels?de/h:0;for(let D=0;D<h;D++){const L=_.setContext(p.getPointLabelContext(D));l[D]=L.padding;const U=p.getPointPosition(D,p.drawingArea+l[D],C),Z=Vs(L.font),ue=No(p.ctx,Z,p._pointLabels[D]);o[D]=ue;const we=Ni(p.getIndexAngle(D)+C),Ze=Math.round(ni(we));ca(s,r,we,ro(Ze,U.x,ue.w,0,180),ro(Ze,U.y,ue.h,90,270))}p.setCenterPoint(r.l-s.l,s.r-r.r,r.t-s.t,s.b-r.b),p._pointLabelItems=function(p,r,s){const o=[],l=p._pointLabels.length,h=p.options,_=Os(h)/2,C=p.drawingArea,D=h.pointLabels.centerPointLabels?de/l:0;for(let L=0;L<l;L++){const U=p.getPointPosition(L,C+_+s[L],D),Z=Math.round(ni(Ni(U.angle+ke))),ue=r[L],we=Ko(U.y,ue.h,Z),Ze=jr(Z),ot=ar(U.x,ue.w,Ze);o.push({x:U.x,y:we,textAlign:Ze,left:ot,top:we,right:ot+ue.w,bottom:we+ue.h})}return o}(p,o,l)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(r,s,o,l){this.xCenter+=Math.floor((r-s)/2),this.yCenter+=Math.floor((o-l)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(r,s,o,l))}getIndexAngle(r){return Ni(r*(Te/(this._pointLabels.length||1))+si(this.options.startAngle||0))}getDistanceFromCenterForValue(r){if(tt(r))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-r)*s:(r-this.min)*s}getValueForDistanceFromCenter(r){if(tt(r))return NaN;const s=r/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(r){const s=this._pointLabels||[];if(r>=0&&r<s.length){const o=s[r];return function(p,r,s){return lo(p,{label:s,index:r,type:"pointLabel"})}(this.getContext(),r,o)}}getPointPosition(r,s,o=0){const l=this.getIndexAngle(r)-ke+o;return{x:Math.cos(l)*s+this.xCenter,y:Math.sin(l)*s+this.yCenter,angle:l}}getPointPositionForValue(r,s){return this.getPointPosition(r,this.getDistanceFromCenterForValue(s))}getBasePosition(r){return this.getPointPositionForValue(r||0,this.getBaseValue())}getPointLabelPosition(r){const{left:s,top:o,right:l,bottom:h}=this._pointLabelItems[r];return{left:s,top:o,right:l,bottom:h}}drawBackground(){const{backgroundColor:r,grid:{circular:s}}=this.options;if(r){const o=this.ctx;o.save(),o.beginPath(),xo(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),o.closePath(),o.fillStyle=r,o.fill(),o.restore()}}drawGrid(){const r=this.ctx,s=this.options,{angleLines:o,grid:l}=s,h=this._pointLabels.length;let _,C,D;if(s.pointLabels.display&&function(p,r){const{ctx:s,options:{pointLabels:o}}=p;for(let l=r-1;l>=0;l--){const h=o.setContext(p.getPointLabelContext(l)),_=Vs(h.font),{x:C,y:D,textAlign:L,left:U,top:Z,right:ue,bottom:we}=p._pointLabelItems[l],{backdropColor:Ze}=h;if(!tt(Ze)){const ot=ys(h.backdropPadding);s.fillStyle=Ze,s.fillRect(U-ot.left,Z-ot.top,ue-U+ot.width,we-Z+ot.height)}bo(s,p._pointLabels[l],C,D+_.lineHeight/2,_,{color:h.color,textAlign:L,textBaseline:"middle"})}}(this,h),l.display&&this.ticks.forEach((L,U)=>{0!==U&&(C=this.getDistanceFromCenterForValue(L.value),function(p,r,s,o){const l=p.ctx,h=r.circular,{color:_,lineWidth:C}=r;!h&&!o||!_||!C||s<0||(l.save(),l.strokeStyle=_,l.lineWidth=C,l.setLineDash(r.borderDash),l.lineDashOffset=r.borderDashOffset,l.beginPath(),xo(p,s,h,o),l.closePath(),l.stroke(),l.restore())}(this,l.setContext(this.getContext(U-1)),C,h))}),o.display){for(r.save(),_=h-1;_>=0;_--){const L=o.setContext(this.getPointLabelContext(_)),{color:U,lineWidth:Z}=L;!Z||!U||(r.lineWidth=Z,r.strokeStyle=U,r.setLineDash(L.borderDash),r.lineDashOffset=L.borderDashOffset,C=this.getDistanceFromCenterForValue(s.ticks.reverse?this.min:this.max),D=this.getPointPosition(_,C),r.beginPath(),r.moveTo(this.xCenter,this.yCenter),r.lineTo(D.x,D.y),r.stroke())}r.restore()}}drawBorder(){}drawLabels(){const r=this.ctx,s=this.options,o=s.ticks;if(!o.display)return;const l=this.getIndexAngle(0);let h,_;r.save(),r.translate(this.xCenter,this.yCenter),r.rotate(l),r.textAlign="center",r.textBaseline="middle",this.ticks.forEach((C,D)=>{if(0===D&&!s.reverse)return;const L=o.setContext(this.getContext(D)),U=Vs(L.font);if(h=this.getDistanceFromCenterForValue(this.ticks[D].value),L.showLabelBackdrop){r.font=U.string,_=r.measureText(C.label).width,r.fillStyle=L.backdropColor;const Z=ys(L.backdropPadding);r.fillRect(-_/2-Z.left,-h-U.size/2-Z.top,_+Z.width,U.size+Z.height)}bo(r,C.label,0,-h,U,{color:L.color})}),r.restore()}drawTitle(){}}Ca.id="radialLinear",Ca.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Mc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:p=>p,padding:5,centerPointLabels:!1}},Ca.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Ca.descriptors={angleLines:{_fallback:"grid"}};const Ks={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},io=Object.keys(Ks);function Io(p,r){return p-r}function fc(p,r){if(tt(r))return null;const s=p._adapter,{parser:o,round:l,isoWeekday:h}=p._parseOpts;let _=r;return"function"==typeof o&&(_=o(_)),Qe(_)||(_="string"==typeof o?s.parse(_,o):s.parse(_)),null===_?null:(l&&(_="week"!==l||!Xe(h)&&!0!==h?s.startOf(_,l):s.startOf(_,"isoWeek",h)),+_)}function xa(p,r,s,o){const l=io.length;for(let h=io.indexOf(p);h<l-1;++h){const _=Ks[io[h]],C=_.steps?_.steps:Number.MAX_SAFE_INTEGER;if(_.common&&Math.ceil((s-r)/(C*_.size))<=o)return io[h]}return io[l-1]}function Go(p,r,s){if(s){if(s.length){const{lo:o,hi:l}=qo(s,r);p[s[o]>=r?s[o]:s[l]]=!0}}else p[r]=!0}function eu(p,r,s){const o=[],l={},h=r.length;let _,C;for(_=0;_<h;++_)C=r[_],l[C]=_,o.push({value:C,major:!1});return 0!==h&&s?function(p,r,s,o){const l=p._adapter,h=+l.startOf(r[0].value,o),_=r[r.length-1].value;let C,D;for(C=h;C<=_;C=+l.add(C,1,o))D=s[C],D>=0&&(r[D].major=!0);return r}(p,o,l,s):o}let cd=(()=>{class p extends Gr{constructor(s){super(s),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(s,o){const l=s.time||(s.time={}),h=this._adapter=new rr._date(s.adapters.date);At(l.displayFormats,h.formats()),this._parseOpts={parser:l.parser,round:l.round,isoWeekday:l.isoWeekday},super.init(s),this._normalized=o.normalized}parse(s,o){return void 0===s?null:fc(this,s)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const s=this.options,o=this._adapter,l=s.time.unit||"day";let{min:h,max:_,minDefined:C,maxDefined:D}=this.getUserBounds();function L(U){!C&&!isNaN(U.min)&&(h=Math.min(h,U.min)),!D&&!isNaN(U.max)&&(_=Math.max(_,U.max))}(!C||!D)&&(L(this._getLabelBounds()),("ticks"!==s.bounds||"labels"!==s.ticks.source)&&L(this.getMinMax(!1))),h=Qe(h)&&!isNaN(h)?h:+o.startOf(Date.now(),l),_=Qe(_)&&!isNaN(_)?_:+o.endOf(Date.now(),l)+1,this.min=Math.min(h,_-1),this.max=Math.max(h+1,_)}_getLabelBounds(){const s=this.getLabelTimestamps();let o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;return s.length&&(o=s[0],l=s[s.length-1]),{min:o,max:l}}buildTicks(){const s=this.options,o=s.time,l=s.ticks,h="labels"===l.source?this.getLabelTimestamps():this._generate();"ticks"===s.bounds&&h.length&&(this.min=this._userMin||h[0],this.max=this._userMax||h[h.length-1]);const _=this.min,D=function(p,r,s){let o=0,l=p.length;for(;o<l&&p[o]<r;)o++;for(;l>o&&p[l-1]>s;)l--;return o>0||l<p.length?p.slice(o,l):p}(h,_,this.max);return this._unit=o.unit||(l.autoSkip?xa(o.minUnit,this.min,this.max,this._getLabelCapacity(_)):function(p,r,s,o,l){for(let h=io.length-1;h>=io.indexOf(s);h--){const _=io[h];if(Ks[_].common&&p._adapter.diff(l,o,_)>=r-1)return _}return io[s?io.indexOf(s):0]}(this,D.length,o.minUnit,this.min,this.max)),this._majorUnit=l.major.enabled&&"year"!==this._unit?function(p){for(let r=io.indexOf(p)+1,s=io.length;r<s;++r)if(Ks[io[r]].common)return io[r]}(this._unit):void 0,this.initOffsets(h),s.reverse&&D.reverse(),eu(this,D,this._majorUnit)}initOffsets(s){let h,_,o=0,l=0;this.options.offset&&s.length&&(h=this.getDecimalForValue(s[0]),o=1===s.length?1-h:(this.getDecimalForValue(s[1])-h)/2,_=this.getDecimalForValue(s[s.length-1]),l=1===s.length?_:(_-this.getDecimalForValue(s[s.length-2]))/2);const C=s.length<3?.5:.25;o=Mi(o,0,C),l=Mi(l,0,C),this._offsets={start:o,end:l,factor:1/(o+1+l)}}_generate(){const s=this._adapter,o=this.min,l=this.max,h=this.options,_=h.time,C=_.unit||xa(_.minUnit,o,l,this._getLabelCapacity(o)),D=it(_.stepSize,1),L="week"===C&&_.isoWeekday,U=Xe(L)||!0===L,Z={};let we,Ze,ue=o;if(U&&(ue=+s.startOf(ue,"isoWeek",L)),ue=+s.startOf(ue,U?"day":C),s.diff(l,o,C)>1e5*D)throw new Error(o+" and "+l+" are too far apart with stepSize of "+D+" "+C);const ot="data"===h.ticks.source&&this.getDataTimestamps();for(we=ue,Ze=0;we<l;we=+s.add(we,D,C),Ze++)Go(Z,we,ot);return(we===l||"ticks"===h.bounds||1===Ze)&&Go(Z,we,ot),Object.keys(Z).sort((mt,bt)=>mt-bt).map(mt=>+mt)}getLabelForValue(s){const l=this.options.time;return this._adapter.format(s,l.tooltipFormat?l.tooltipFormat:l.displayFormats.datetime)}_tickFormatFunction(s,o,l,h){const _=this.options,C=_.time.displayFormats,D=this._unit,L=this._majorUnit,Z=L&&C[L],ue=l[o],Ze=this._adapter.format(s,h||(L&&Z&&ue&&ue.major?Z:D&&C[D])),ot=_.ticks.callback;return ot?ge(ot,[Ze,o,l],this):Ze}generateTickLabels(s){let o,l,h;for(o=0,l=s.length;o<l;++o)h=s[o],h.label=this._tickFormatFunction(h.value,o,s)}getDecimalForValue(s){return null===s?NaN:(s-this.min)/(this.max-this.min)}getPixelForValue(s){const o=this._offsets,l=this.getDecimalForValue(s);return this.getPixelForDecimal((o.start+l)*o.factor)}getValueForPixel(s){const o=this._offsets,l=this.getDecimalForPixel(s)/o.factor-o.end;return this.min+l*(this.max-this.min)}_getLabelSize(s){const o=this.options.ticks,l=this.ctx.measureText(s).width,h=si(this.isHorizontal()?o.maxRotation:o.minRotation),_=Math.cos(h),C=Math.sin(h),D=this._resolveTickFontOptions(0).size;return{w:l*_+D*C,h:l*C+D*_}}_getLabelCapacity(s){const o=this.options.time,l=o.displayFormats,h=l[o.unit]||l.millisecond,_=this._tickFormatFunction(s,0,eu(this,[s],this._majorUnit),h),C=this._getLabelSize(_),D=Math.floor(this.isHorizontal()?this.width/C.w:this.height/C.h)-1;return D>0?D:1}getDataTimestamps(){let o,l,s=this._cache.data||[];if(s.length)return s;const h=this.getMatchingVisibleMetas();if(this._normalized&&h.length)return this._cache.data=h[0].controller.getAllParsedValues(this);for(o=0,l=h.length;o<l;++o)s=s.concat(h[o].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const s=this._cache.labels||[];let o,l;if(s.length)return s;const h=this.getLabels();for(o=0,l=h.length;o<l;++o)s.push(fc(this,h[o]));return this._cache.labels=this._normalized?s:this.normalize(s)}normalize(s){return ps(s.sort(Io))}}return p.id="time",p.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},p})();function tu(p,r,s){let h,_,C,D,o=0,l=p.length-1;s?(r>=p[o].pos&&r<=p[l].pos&&({lo:o,hi:l}=co(p,"pos",r)),({pos:h,time:C}=p[o]),({pos:_,time:D}=p[l])):(r>=p[o].time&&r<=p[l].time&&({lo:o,hi:l}=co(p,"time",r)),({time:h,pos:C}=p[o]),({time:_,pos:D}=p[l]));const L=_-h;return L?C+(D-C)*(r-h)/L:C}class Mu extends cd{constructor(r){super(r),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const r=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(r);this._minPos=tu(s,this.min),this._tableRange=tu(s,this.max)-this._minPos,super.initOffsets(r)}buildLookupTable(r){const{min:s,max:o}=this,l=[],h=[];let _,C,D,L,U;for(_=0,C=r.length;_<C;++_)L=r[_],L>=s&&L<=o&&l.push(L);if(l.length<2)return[{time:s,pos:0},{time:o,pos:1}];for(_=0,C=l.length;_<C;++_)U=l[_+1],D=l[_-1],L=l[_],Math.round((U+D)/2)!==L&&h.push({time:L,pos:_/(C-1)});return h}_getTimestampsForTable(){let r=this._cache.all||[];if(r.length)return r;const s=this.getDataTimestamps(),o=this.getLabelTimestamps();return r=s.length&&o.length?this.normalize(s.concat(o)):s.length?s:o,r=this._cache.all=r,r}getDecimalForValue(r){return(tu(this._table,r)-this._minPos)/this._tableRange}getValueForPixel(r){const s=this._offsets,o=this.getDecimalForPixel(r)/s.factor-s.end;return tu(this._table,o*this._tableRange+this._minPos,!0)}}Mu.id="timeseries",Mu.defaults=cd.defaults,Nt.register(oa,Yc,Yt,Object.freeze({__proto__:null,CategoryScale:Ii,LinearScale:qi,LogarithmicScale:Qn,RadialLinearScale:Ca,TimeScale:cd,TimeSeriesScale:Mu}));const ah=Nt;var ud=W(4968),Ru=W(262),el=W(3075),iu=W(8675),dd=W(4004),lh=W(9841),Fe=W(5e3),Yu=W(8966),Vd=W(8017),kh=W(3251),Ud=W(7322),Lh=W(7531),Gd=W(1079),hd=W(9808),Wd=W(7423),tl=W(3874),_p=W(508);function ch(p,r){if(1&p&&(Fe.TgZ(0,"mat-option",14),Fe._uU(1),Fe.qZA()),2&p){const s=r.$implicit;Fe.Q6J("value",s),Fe.xp6(1),Fe.hij(" ",s," ")}}function Ph(p,r){if(1&p&&(Fe.TgZ(0,"mat-option",14),Fe._uU(1),Fe.qZA()),2&p){const s=r.$implicit;Fe.Q6J("value",s),Fe.xp6(1),Fe.hij(" ",s," ")}}function vp(p,r){if(1&p){const s=Fe.EpF();Fe.TgZ(0,"tr"),Fe.TgZ(1,"td"),Fe._uU(2),Fe.qZA(),Fe.TgZ(3,"td"),Fe.TgZ(4,"button",15),Fe.NdJ("click",function(){const h=Fe.CHM(s).$implicit;return Fe.oxw().chooseDemo(h)}),Fe._uU(5),Fe.qZA(),Fe.qZA(),Fe.TgZ(6,"td"),Fe.TgZ(7,"b"),Fe._uU(8),Fe.qZA(),Fe._uU(9),Fe.qZA(),Fe.qZA()}if(2&p){const s=r.$implicit,o=r.index;let l,h;Fe.xp6(2),Fe.hij(" ",o+1," "),Fe.xp6(3),Fe.hij(" ",s.description," "),Fe.xp6(3),Fe.Oqu(null==s.categories||null==(l=s.categories.split(";"))?null:l.join(", ")),Fe.xp6(1),Fe.hij(" ",null==s.blocks||null==(h=s.blocks.split(";"))?null:h.join(", ")," ")}}function bp(p,r){if(1&p){const s=Fe.EpF();Fe.TgZ(0,"button",15),Fe.NdJ("click",function(){return Fe.CHM(s),Fe.oxw().Verify()}),Fe.TgZ(1,"mat-icon"),Fe._uU(2,"save"),Fe.qZA(),Fe._uU(3," Verify LocalAPI "),Fe.qZA()}}function yp(p,r){if(1&p){const s=Fe.EpF();Fe.TgZ(0,"tr"),Fe.TgZ(1,"td"),Fe._uU(2),Fe.qZA(),Fe.TgZ(3,"td"),Fe.TgZ(4,"button",15),Fe.NdJ("click",function(){const h=Fe.CHM(s).$implicit;return Fe.oxw().chooseDemo(h)}),Fe._uU(5),Fe.qZA(),Fe.qZA(),Fe.TgZ(6,"td"),Fe.TgZ(7,"b"),Fe._uU(8),Fe.qZA(),Fe._uU(9),Fe.qZA(),Fe.qZA()}if(2&p){const s=r.$implicit,o=r.index;let l,h;Fe.xp6(2),Fe.hij(" ",o+1," "),Fe.xp6(3),Fe.hij(" ",s.description||s.id," "),Fe.xp6(3),Fe.Oqu(null==s.categories||null==(l=s.categories.split(";"))?null:l.join(", ")),Fe.xp6(1),Fe.hij(" ",null==s.blocks||null==(h=s.blocks.split(";"))?null:h.join(", ")," ")}}let Nh=(()=>{class p{constructor(s,o){this.dialogRef=s,this.DetailsApp=o,this.BlocksLocal=[],this.demos=[],this.demosCategories=new Map,this.demosBlocks=new Map,this.demosArray=null,this.myBlocks=new el.NI,this.optionsBlocks=[],this.filteredOptionsBlocks=null,this.myCategories=new el.NI,this.mySearchText=new el.NI,this.optionsCategories=[],this.filteredOptionsCategories=null,this.InitiateDemos(),this.loadFromLocalAPI()}loadFromLocalAPI(){var s,o;(null===(s=this.DetailsApp.LocalAPI)||void 0===s?void 0:s.WasAlive)&&(null===(o=this.DetailsApp.LocalAPI)||void 0===o||o.LoadBlocks().subscribe(l=>{this.BlocksLocal=l}))}Verify(){var s;null===(s=this.DetailsApp.LocalAPI)||void 0===s||s.IsAlive().subscribe(o=>{o&&this.loadFromLocalAPI()})}InitiateDemos(){var s=this.DetailsApp.demoBlocks;this.demos=s.sort((o,l)=>o.description.localeCompare(l.description)),this.optionsCategories=[...new Set(s.map(o=>o.categories).filter(o=>(null==o?void 0:o.length)>0).flatMap(o=>o.split(";")).filter(o=>(null==o?void 0:o.length)>0).sort((o,l)=>o.toLocaleLowerCase().localeCompare(l.toLocaleLowerCase())))],this.optionsBlocks=[...new Set(s.map(o=>o.blocks).filter(o=>(null==o?void 0:o.length)>0).flatMap(o=>o.split(";")).filter(o=>(null==o?void 0:o.length)>0).sort((o,l)=>o.toLowerCase().localeCompare(l.toLowerCase())))],this.filteredOptionsBlocks=this.myBlocks.valueChanges.pipe((0,iu.O)(""),(0,dd.U)(o=>{var l=(o||"").trim();return this._filter(l,this.optionsBlocks)})),this.filteredOptionsCategories=this.myCategories.valueChanges.pipe((0,iu.O)(""),(0,dd.U)(o=>{var l=(o||"").trim();return this._filter(l,this.optionsCategories)})),this.demosArray=(0,lh.a)([this.myBlocks.valueChanges.pipe((0,iu.O)("")),this.myCategories.valueChanges.pipe((0,iu.O)("")),this.mySearchText.valueChanges.pipe((0,iu.O)(""))]).pipe((0,iu.O)(this.demos),(0,dd.U)(([o,l,h])=>((Array.isArray(o)||"object"==typeof o)&&(o=""),(Array.isArray(l)||"object"==typeof l)&&(l=""),(Array.isArray(h)||"object"==typeof h)&&(h=""),o=(o||"").trim().toLowerCase(),l=(l||"").trim().toLowerCase(),h=(null==h?void 0:h.trim().toLowerCase())||"",this.demos.filter(C=>{var D,L,U,Z,ue,we;return(0==o.length||(null===(D=C.blocks)||void 0===D?void 0:D.toLowerCase().indexOf(o))>-1)&&(0==l.length||(null===(L=C.categories)||void 0===L?void 0:L.toLowerCase().indexOf(l))>-1)&&(0==h.length||(null===(U=C.description)||void 0===U?void 0:U.toLowerCase().indexOf(h))>-1||(null===(Z=C.blocks)||void 0===Z?void 0:Z.toLowerCase().indexOf(h))>-1||(null===(ue=C.categories)||void 0===ue?void 0:ue.toLowerCase().indexOf(h))>-1||(null===(we=C.id)||void 0===we?void 0:we.toLowerCase().indexOf(h))>-1)}))))}ngOnInit(){}_filter(s,o){const l=s.toLowerCase();return 0==l.length?o:o.filter(h=>h.toLowerCase().includes(l))}chooseDemo(s){return this.dialogRef.close(s)}Close(){this.dialogRef.close()}}return p.\u0275fac=function(s){return new(s||p)(Fe.Y36(Yu.so),Fe.Y36(Vd.d))},p.\u0275cmp=Fe.Xpm({type:p,selectors:[["app-find-saved-blocks"]],decls:52,vars:16,consts:[["label","Demos"],[1,"example-form"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","Categories","matInput","",3,"formControl","matAutocomplete"],["autoCategories","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Pick one","aria-label","Blocks","matInput","",3,"formControl","matAutocomplete"],["autoBlocks","matAutocomplete"],["type","text","placeholder","enter text to search","matInput","",3,"formControl"],[4,"ngFor","ngForOf"],["label","Saved on local"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["label","CLOUD","disabled","disabled"],["mat-raised-button","","id","blocks","color","accent",3,"click"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(s,o){if(1&s&&(Fe.TgZ(0,"mat-tab-group"),Fe.TgZ(1,"mat-tab",0),Fe.TgZ(2,"form",1),Fe.TgZ(3,"mat-form-field",2),Fe.TgZ(4,"mat-label"),Fe._uU(5,"Categories"),Fe.qZA(),Fe._UZ(6,"input",3),Fe.TgZ(7,"mat-autocomplete",null,4),Fe.YNc(9,ch,2,2,"mat-option",5),Fe.ALo(10,"async"),Fe.qZA(),Fe.qZA(),Fe.TgZ(11,"mat-form-field",2),Fe.TgZ(12,"mat-label"),Fe._uU(13,"Blocks"),Fe.qZA(),Fe._UZ(14,"input",6),Fe.TgZ(15,"mat-autocomplete",null,7),Fe.YNc(17,Ph,2,2,"mat-option",5),Fe.ALo(18,"async"),Fe.qZA(),Fe.qZA(),Fe.TgZ(19,"mat-form-field",2),Fe.TgZ(20,"mat-label"),Fe._uU(21,"Search"),Fe.qZA(),Fe._UZ(22,"input",8),Fe.qZA(),Fe.qZA(),Fe.TgZ(23,"table"),Fe.TgZ(24,"thead"),Fe.TgZ(25,"tr"),Fe.TgZ(26,"th"),Fe._uU(27,"Number"),Fe.qZA(),Fe.TgZ(28,"th"),Fe._uU(29,"Name"),Fe.qZA(),Fe.TgZ(30,"th"),Fe._uU(31,"Details"),Fe.qZA(),Fe.qZA(),Fe.qZA(),Fe.YNc(32,vp,10,4,"tr",9),Fe.ALo(33,"async"),Fe.qZA(),Fe.qZA(),Fe.TgZ(34,"mat-tab",10),Fe.YNc(35,bp,4,0,"button",11),Fe.TgZ(36,"table"),Fe.TgZ(37,"thead"),Fe.TgZ(38,"tr"),Fe.TgZ(39,"th"),Fe._uU(40,"Number"),Fe.qZA(),Fe.TgZ(41,"th"),Fe._uU(42,"Name"),Fe.qZA(),Fe.TgZ(43,"th"),Fe._uU(44,"Details"),Fe.qZA(),Fe.qZA(),Fe.qZA(),Fe.YNc(45,yp,10,4,"tr",9),Fe.qZA(),Fe.qZA(),Fe.TgZ(46,"mat-tab",12),Fe._uU(47," Saved on Cloud "),Fe.qZA(),Fe.qZA(),Fe.TgZ(48,"button",13),Fe.NdJ("click",function(){return o.Close()}),Fe.TgZ(49,"mat-icon"),Fe._uU(50,"close"),Fe.qZA(),Fe._uU(51," Close\n"),Fe.qZA()),2&s){const l=Fe.MAs(8),h=Fe.MAs(16);Fe.xp6(6),Fe.Q6J("formControl",o.myCategories)("matAutocomplete",l),Fe.xp6(3),Fe.Q6J("ngForOf",Fe.lcZ(10,10,o.filteredOptionsCategories)),Fe.xp6(5),Fe.Q6J("formControl",o.myBlocks)("matAutocomplete",h),Fe.xp6(3),Fe.Q6J("ngForOf",Fe.lcZ(18,12,o.filteredOptionsBlocks)),Fe.xp6(5),Fe.Q6J("formControl",o.mySearchText),Fe.xp6(10),Fe.Q6J("ngForOf",Fe.lcZ(33,14,o.demosArray)),Fe.xp6(3),Fe.Q6J("ngIf",!(null!=o.DetailsApp.LocalAPI&&o.DetailsApp.LocalAPI.WasAlive)),Fe.xp6(10),Fe.Q6J("ngForOf",o.BlocksLocal)}},directives:[kh.SP,kh.uX,el._Y,el.JL,el.F,Ud.KE,Ud.hX,Lh.Nt,el.Fj,Gd.ZL,el.JJ,el.oH,Gd.XC,hd.sg,hd.O5,Wd.lW,tl.Hw,_p.ey],pipes:[hd.Ov],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid}table[_ngcontent-%COMP%]{width:100%;height:480px;margin:0 auto;display:block;overflow-x:auto;border-spacing:0}tbody[_ngcontent-%COMP%]{white-space:nowrap}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px;border-top-width:0;border-left-width:0}th[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;vertical-align:bottom}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right-width:0}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom-width:0}"]}),p})();class Cp{constructor(){}definitionBlocks(r,s){r.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},s.headersbeforehttp=function(h){var _=s.valueToCode(h,"HttpDomain",0)||"(localSite)",L="\n";return L+="{\n",L+="if(!("+_+" in headersForDomain))\n",L+="{\n",L+="headersForDomain["+_+"]=[];\n",L+="};\n",L+="var arr = headersForDomain["+_+"];\n",L+="arr.push({name:"+s.valueToCode(h,"HeaderName",0)+", value:"+s.valueToCode(h,"HeaderValue",0)+"});\n",L+='//alert("a" + JSON.stringify(arr)+"a");\n',(L+='//alert("a" + JSON.stringify(headersForDomain['+_+'])+"a");\n')+"};\n"},r.httprequest={init:function(){this.appendDummyInput().appendField(new t.FieldDropdown([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(new t.FieldDropdown([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},s.httprequest=function(h){var _=h.getFieldValue("TypeOutput"),C=h.getFieldValue("TypeRequest"),D=s.valueToCode(h,"TheUrl",0),L=s.valueToCode(h,"Data",0),U="";switch(C.toString()){case"GET":U="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+D+") )";break;case"POST":U="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+D,L&&(U+=","+L),U+=") )";break;case"DELETE":U="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+D,L&&(U+=","+L),U+=") )";break;case"PUT":U="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+D,L&&(U+=","+L),U+=") )";break;default:alert("Do not understand : "+C.toString())}var Z=U;return"JSON"===_&&(Z="JSON.parse("+Z+")"),[Z,99]}}fieldXML(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>  \n  }\n}\n'}}class pd{fieldXML(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}}class Xu{definitionBlocks(r,s){r.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},s.trycatchfinally=function(h){var L="try {\n"+s.statementToCode(h,"TRY")+"}\n";return(L+="catch(err){\n errHandler(JSON.stringify(err));\n"+s.statementToCode(h,"CATCH")+"\n}")+"finally{\n "+s.statementToCode(h,"FINALLY")+"\n}\n"}}fieldXML(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}}class ns{definitionBlocks(r,s){r.ttsBlock={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Voice").appendField(new t.FieldDropdown(this.generateOptions),"voiceSelected"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")},generateOptions:function(){if(window.speechSynthesis){var l=window.speechSynthesis.getVoices().map((h,_)=>[h.name,"voice"+_]);if(l.length>0)return l}return[["no voice","NoVoice"]]}},s.ttsBlock=function(o){var l=o.getFieldValue("voiceSelected");return l=l.replace("voice",""),"speakDefault("+s.valueToCode(o,"NAME",s.ORDER_ATOMIC)+","+l+");\n"}}fieldXML(){return'<block type="ttsBlock">\n        <value name="NAME">\n            <shadow type="text">\n            <field name="TEXT">Hello</field></shadow>\n        </value>       \n        </block>\n'}}class Ku{definitionBlocks(r,s){r.pianoBlock={init:function(){this.appendValueInput("Note").setCheck("String").appendField("Note(A-G)"),this.appendValueInput("Sharp").setCheck("Boolean").appendField("#"),this.appendValueInput("Octave").setCheck("Number").appendField("Octave"),this.appendValueInput("Duration").setCheck("Number").appendField("Duration"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://github.com/keithwhor/audiosynth")}},s.pianoBlock=function(o){var l=s.valueToCode(o,"Note",s.ORDER_ATOMIC),D="";return"true"==(s.valueToCode(o,"Sharp",s.ORDER_ATOMIC)||!1)&&(D="#"),"playPiano("+l+D+","+s.valueToCode(o,"Octave",s.ORDER_ATOMIC)+","+(s.valueToCode(o,"Duration",s.ORDER_ATOMIC)||2)+");\n"},r.cmajor={init:function(){this.appendDummyInput().appendField("CMajor "),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.cmajor=function(o){return['["C","D","E","F","G","A","B"]',s.ORDER_NONE]}}fieldXML(){return'<block type="pianoBlock">\n        <value name="Note">\n            <shadow type="text">\n            <field name="TEXT">C</field></shadow>\n        </value>       \n        <value name="Octave">\n            <shadow type="math_number">\n            <field name="NUM">4</field></shadow>\n        </value>       \n        <value name="Sharp">\n            <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field></shadow>\n        </value>       \n        \n        <value name="Duration">\n            <shadow type="math_number">\n            <field name="NUM">2</field></shadow>\n        </value>       \n        </block>\n        <block type="cmajor"></block>\n\n'}}class Fh{constructor(){this.definitionBlocks=function(r,s){r.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.filterList=function(o){var l=s.valueToCode(o,"LIST",s.ORDER_MEMBER)||"[]",h=s.valueToCode(o,"Logic",s.ORDER_ATOMIC);"string"==typeof h&&(h=h.substr(1,h.length-2));var _="";return _+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+l+")).filter(function (item){ return "+h+";})",[_+="",s.ORDER_FUNCTION_CALL]},r.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.mapList=function(o){var l=s.valueToCode(o,"LIST",s.ORDER_MEMBER)||"[]",h=s.valueToCode(o,"Logic",s.ORDER_ATOMIC);"string"==typeof h&&(h=h.substr(1,h.length-2));var _="";return _+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+l+")).map(function (item){ return "+h+";})",[_+="",s.ORDER_FUNCTION_CALL]},r.reduceList={init:function(){this.appendDummyInput().appendField("reduceList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("initValue").setCheck(null).appendField("initialValue"),this.appendValueInput("Logic").setCheck("String").appendField("callback(acc,curVal,index, array)=>"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.reduceList=function(o){var l=s.valueToCode(o,"LIST",s.ORDER_MEMBER)||"[]",h="";try{h=s.valueToCode(o,"initValue",s.ORDER_ATOMIC)}catch(D){window.alert(D)}var _=s.valueToCode(o,"Logic",s.ORDER_ATOMIC);"string"==typeof _&&(_=_.substr(1,_.length-2));var C="";return C+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+l+")).reduce(function (acc,curVal,index,array){ "+_+";}",h&&h.toString().length>0&&(C+=","+h),C+=")",[C+="",s.ORDER_FUNCTION_CALL]}}}fieldXML(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="initValue">\n                    <shadow type="text">\n                        <field name="TEXT"> </field>\n                    </shadow>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="reduceList">\n        <value name="LIST">\n        <block type="variables_get">\n                <field name="VAR">list</field>\n            </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n'}}class Bh{definitionBlocks(r,s){r.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.auth0webapidata=function(h){var U='{"client_id":'+s.valueToCode(h,"client_id",0);return U+=',"client_secret":'+s.valueToCode(h,"client_secret",0),U+=',"audience":'+s.valueToCode(h,"audience",0),U+=',"grant_type":'+s.valueToCode(h,"grant_type",0),[U+="}",99]}}fieldXML(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}}class zd{definitionBlocks(r,s){r.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},s.converttojson=function(h){return["JSON.parse("+s.valueToCode(h,"ValueToConvert",0)+")",99]},r.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},s.converttostring=function(h){return["JSON.stringify("+s.valueToCode(h,"ValueToConvert",0)+")",99]},r.convertcsv={init:function(){this.appendDummyInput().appendField("Convert To CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},s.convertcsv=function(h){return["convertToCSV("+s.valueToCode(h,"ArrayToConvert",s.ORDER_ATOMIC)+")",99]}}fieldXML(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}}class ec{definitionBlocks(r,s){r.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new t.FieldDropdown([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};s.displayCurrentDate=h=>{let C="";switch(h.getFieldValue("dateFormat").toString()){case"human":C="displayDateFormatted('human')";break;case"iso":C="displayDateFormatted('iso')";break;case"unix":C="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[C,99]}}fieldXML(){return'<block type="displayCurrentDate"></block>'}}class Hh{definitionBlocks(r,s){r.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},s.DateFromText=l=>["Date.parse("+(s.valueToCode(l,"VALUE",s.ORDER_ATOMIC)||"")+")",99]}fieldXML(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}}class gc{definitionBlocks(r,s){r.blockemail={init:function(){this.appendValueInput("from").setCheck(null).appendField("From:"),this.appendValueInput("to").setCheck(null).appendField("To:"),this.appendValueInput("cc").setCheck(null).appendField("CC:"),this.appendValueInput("bcc").setCheck(null).appendField("BCC:"),this.appendValueInput("subject").setCheck(null).appendField("Subject:"),this.appendValueInput("body").setCheck(null).appendField("Body:").appendField(new t.FieldDropdown([["HTML","Html"],["TEXT","Text"]]),"NAME"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},r.sendinblue={init:function(){this.appendDummyInput().appendField("SendInBlue"),this.appendValueInput("APIKey").setCheck(null).appendField("ApiKey"),this.appendValueInput("email").setCheck("blockemail").appendField("Email"),this.setColour(230),this.setTooltip("Please see https://account.sendinblue.com/advanced/api"),this.setHelpUrl("https://account.sendinblue.com/advanced/api"),this.setOutput(!0,null)}},s.sendinblue=function(l){var C='window.alert("SendInBlue");\n',D="api.sendinblue.com";return C=`(function(apiKey,email){if(!('${D}' in headersForDomain)){ headersForDomain['${D}']=[]; };\n`,C+=`headersForDomain['${D}'].push({"name":"api-key","value":apiKey});\n`,C+=`headersForDomain['${D}'].push({"name":"Content-Type","value":"application/json"});\n`,C+=`headersForDomain['${D}'].push({"name":"Accept","value":"application/json"});\n`,C+='var sendinblueData={"sender":{"email": email.from }, "to":[{"email":email.to }],"subject":email.subject,"htmlContent": email.body} ;\n',C+="\nwindow.alert(JSON.stringify(sendinblueData));\n",C+=`var res=JSON.parse(postXhr("https://${D}/v3/smtp/email",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\n`,[C+="})("+s.valueToCode(l,"APIKey",s.ORDER_ATOMIC)+","+s.valueToCode(l,"email",s.ORDER_ATOMIC)+")",s.ORDER_NONE]},s.blockemail=function(l){var h=s.valueToCode(l,"from",s.ORDER_ATOMIC),_=s.valueToCode(l,"to",s.ORDER_ATOMIC),C=s.valueToCode(l,"cc",s.ORDER_ATOMIC),D=s.valueToCode(l,"bcc",s.ORDER_ATOMIC),L=s.valueToCode(l,"subject",s.ORDER_ATOMIC),U=l.getFieldValue("NAME"),ue="{";return ue+='"from":'+h+",",ue+='"to":'+_+",",ue+='"cc":'+C+",",ue+='"bcc":'+D+",",ue+='"subject":'+L+",",ue+='"body":'+s.valueToCode(l,"body",s.ORDER_ATOMIC)+",",ue+='"typeEmail":"'+U+'"',[""+(ue+="}"),s.ORDER_NONE]}}fieldXML(){return'<block type="blockemail">\n        <value name="from">\n            <shadow type="text">\n                <field name="TEXT">test@test.com</field>\n            </shadow>\n        </value>\n        <value name="to">\n            <shadow type="text">\n                <field name="TEXT">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name="cc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="bcc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="subject">\n            <shadow type="text">\n                <field name="TEXT">My test email</field>\n            </shadow>\n        </value>\n        <value name="body">\n            <shadow type="text">\n                <field name="TEXT">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type="sendinblue">\n        <value name="APIKey">\n            <shadow type="text">\n                <field name="TEXT">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name="email">\n            <shadow type="blockemail">\n            </shadow>\n            \n        </value>\n        \n        </block>\n'}}class il{definitionBlocks(r,s){r.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.exportfile=function(h){return"exportToFile("+s.valueToCode(h,"fileName",0)+","+s.valueToCode(h,"contentFile",0)+","+s.valueToCode(h,"convertToByte",0)+");\n"}}fieldXML(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class mc{constructor(){this.definitionBlocks=function(r,s){r.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},s.window_open=function(h){var _=s.valueToCode(h,"TEXT",99)||"''";return"if((typeof "+_+' == "object") && ("to" in '+_+')){open("mailto:'+_.to+'")}else{ open('+_+")};\n"},r.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},s.text_message=function(h){return"alert1("+(s.valueToCode(h,"TEXT",99)||"''")+");\n"},r.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(new t.FieldLabelSerializable(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},s.text_print_return=function(h){var _=s.valueToCode(h,"TEXT",0)||"''";return["(function(){window.alert("+_+");\n;return ("+_+");}())\n",99]},r.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.valuefromtext=function(h){return["getIDProp("+s.valueToCode(h,"IdOfText",0)+","+(s.valueToCode(h,"ValueToObtain",0)||'"value"')+")",99]}}}fieldXML(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}}class jd{definitionBlocks(r,s){r.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(new t.FieldDropdown([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(new t.FieldLabelSerializable("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(new t.FieldLabelSerializable("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(new t.FieldLabelSerializable("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(new t.FieldLabelSerializable("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.chart_js=function(o){var l=o.getFieldValue("ChartTypeValue"),_=(s.valueToCode(o,"ChartTitleValue",s.ORDER_ATOMIC),s.valueToCode(o,"LabelsValue",s.ORDER_ATOMIC)),C=s.valueToCode(o,"DataSet1Label",s.ORDER_ATOMIC),D=s.valueToCode(o,"DataSet1Data",s.ORDER_ATOMIC),L="",U="x";switch(l){case"HBar":L="bar",U="y";break;case"VBar":L="bar";break;default:throw"Unknown chart type:"+l}return[`JSON.stringify({ 'type': '${L}', 'options':{ 'indexAxis':'${U}'},  'data': {  'labels': ${_}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${C}, 'data': ${D} }] } })`,s.ORDER_NONE]}}fieldXML(){return'<block type="chart_js"></block>'}}class fd{definitionBlocks(r,s){r.HTMLheaders={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Header").appendField(new t.FieldDropdown([["H1","H1"],["H2","H2"],["H3","H3"]]),"NAME"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to Header "),this.setHelpUrl("")}},s.HTMLheaders=function(o){var l=o.getFieldValue("NAME");return[`'<${l}>'+ ${s.valueToCode(o,"NAME",s.ORDER_ATOMIC)} + '</${l}>'`,s.ORDER_NONE]},r.HTMLlist={init:function(){this.appendDummyInput().appendField("List ").appendField(new t.FieldDropdown([["OL","ol"],["UL","ul"]]),"listType"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(240),this.setTooltip("list - please add li block "),this.setHelpUrl("")}},s.HTMLlist=function(o){var l=o.getFieldValue("listType");return s.valueToCode(o,"ListType",s.ORDER_ATOMIC),`window.alert('<${l}>');\n;${s.statementToCode(o,"Content")};\n;window.alert('</${l}>');\n`},r.HTMLli={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("LI"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to LI"),this.setHelpUrl("")}},s.HTMLli=function(o){return[`'<li>'+ ${s.valueToCode(o,"NAME",s.ORDER_ATOMIC)} + '</li>'`,s.ORDER_NONE]},r.HTMLliStart={init:function(){this.appendDummyInput().appendField("List").appendField(new t.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI start"),this.setHelpUrl("")}},s.HTMLliStart=function(o){return[`'<${o.getFieldValue("NAME")}>'`,s.ORDER_NONE]},r.HTMLliStop={init:function(){this.appendDummyInput().appendField("/List").appendField(new t.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI stop"),this.setHelpUrl("")}},s.HTMLliStop=function(o){return[`'</${o.getFieldValue("NAME")}>'`,s.ORDER_NONE]},r.HTMLlink={init:function(){this.appendDummyInput().appendField("A").appendField("target").appendField(new t.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("HREF").setCheck(null).appendField("href"),this.appendValueInput("text").setCheck(null).appendField("text"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.HTMLlink=function(o){var l=o.getFieldValue("targetDrop"),h=s.valueToCode(o,"HREF",s.ORDER_ATOMIC),_=s.valueToCode(o,"text",s.ORDER_ATOMIC),C="'<a href=\"'+"+h;return C+=`+ '" target="${l}"'`,[C+="+ '>'+"+(_=_||h)+"+ '</a> '",s.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="HTMLheaders">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type="HTMLlist"></block>\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n  \n<block type="HTMLli">\n<value name="NAME">\n<shadow type="text">\n <field name="TEXT"></field>\n</shadow>\n</value>\n</block>    \n</value>\n</block>\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStart"></block>\n</value>\n</block>    \n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStop"></block>\n\n</value>\n</block>    \n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlink"></block>\n\n</value>\n</block>    \n\n\n'}}class Yd{definitionBlocks(r,s){r.simpleHtmlparser={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Find ").appendField(new t.FieldDropdown([["Tables","table"],["Links","a"],["Images","img"],["List","ul,ol"],["Headers","h1,h2,h3,h4,h5,h6"]]),"To"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},s.simpleHtmlparser=function(o){var _="(function(value){ \n";return _+=`var doc  = parseDOMFromStringElements(value,"text/html","${o.getFieldValue("To")}");\n`,_+="return doc;\n",[_+="})("+s.valueToCode(o,"NAME",s.ORDER_ATOMIC)+")",s.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="simpleHtmlparser">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        '}}class uh{definitionBlocks(r,s){r.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new t.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new t.FieldLabelSerializable(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(new t.FieldLabelSerializable("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},s.modifyproperty=function(C){return s.valueToCode(C,"ObjectToChange",0)+"["+s.valueToCode(C,"PropertyName",0)+"]="+s.valueToCode(C,"NewValue",0)+";"},r.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new t.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new t.FieldLabelSerializable("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},s.getproperty=function(C){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+s.valueToCode(C,"ObjectToChange",0)+"))["+s.valueToCode(C,"PropertyName",0)+"]",99]}}fieldXML(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}}class gd{definitionBlocks(r,s,o,l){s.object_from_json=function(Ki){return[`JSON.parse(${s.valueToCode(Ki,"JSON",0)})`,99]},s.object_to_json=function(Ki){return[`JSON.stringify(${s.valueToCode(Ki,"object",0)})`,99]},s.object_get=function(Ki){const Ri=Ki.getFieldValue("field_name");return[`${s.valueToCode(Ki,"object",0)}['${Ri}']`,99]},s.object_set=function(Ki){const Ri=Ki.getFieldValue("field_name");return`${s.valueToCode(Ki,"object_field",0)}['${Ri}'] = ${s.valueToCode(Ki,"value_field",0)};\n`},s.object_create=function(Ki){if(!Ki.numFields)return["{}",99];let Ri="";for(let Hn=1;Hn<=Ki.numFields;Hn++)Ri+=`"${Ki.getFieldValue("field"+Hn)}": ${s.valueToCode(Ki,"field_input"+Hn,0)}, `;return[`{ ${Ri} }`,99]};const Ze="object_field",ot="object_create_mutator_top",mt="#F99EA3",bt=Ki=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[Ki]),ei={type:"object_from_json",message0:bt("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:mt,tooltip:bt("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};r.object_from_json={init:function(){this.jsonInit(ei)}};const ki={type:"object_to_json",message0:bt("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:mt,tooltip:bt("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};r.object_to_json={init:function(){this.jsonInit(ki)}};const mi={type:"object_get",message0:bt("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:mt,tooltip:bt("object_get_json_tooltip"),helpUrl:""};r.object_get={init:function(){this.jsonInit(mi)}};const Ci={type:"object_set",message0:bt("object_set_json"),args0:[{type:"field_input",name:"field_name",text:bt("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:mt,tooltip:bt("object_set_json_tooltip"),helpUrl:""};r.object_set={init:function(){this.jsonInit(Ci)}};const Hi={type:"object_create",message0:bt("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:bt("object_create_tooltip"),helpUrl:""};r.object_create={init:function(){this.jsonInit(Hi)}};const Ui={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:bt("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};r[Ze]={init:function(){this.jsonInit(Ui)}};const en={type:"object_create_mutator",message0:bt("object_create"),nextStatement:null,colour:15,tooltip:bt("object_create_tooltip"),helpUrl:""};r[ot]={init:function(){this.jsonInit(en)}};const cn={numFields:0,fields:new Array,domToMutation:function(Ki){this.fields=[];for(let pn,Ri=0;pn=Ki.childNodes[Ri];Ri++)"field"==pn.nodeName.toLowerCase()&&this.fields.push(pn.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const Ki=document.createElement("mutation");Ki.setAttribute("num_fields",""+this.numFields);for(let Ri=0;Ri<this.fields.length;Ri++){const pn=document.createElement("field");pn.setAttribute("name",this.fields[Ri]),Ki.appendChild(pn)}return Ki},compose:function(Ki){let Ri=Ki.nextConnection&&Ki.nextConnection.targetBlock();this.numFields=0,this.fields=[];let pn=[null];for(;Ri;)this.fields.push(Ri.getFieldValue("field_name")),this.numFields++,pn.push(Ri.savedConnection),Ri=Ri.nextConnection&&Ri.nextConnection.targetBlock();this.updateShape();for(let Hn=1;Hn<=this.numFields;Hn++)l.reconnect(pn[Hn],this,"field_input"+Hn)},decompose:function(Ki){const Ri=Ki.newBlock(ot);Ri.initSvg();let pn=Ri.nextConnection;for(let Hn=0;Hn<this.fields.length;Hn++){const qt=Ki.newBlock(Ze);qt.initSvg(),qt.setFieldValue(this.fields[Hn],"field_name"),pn.connect(qt.previousConnection),pn=qt.nextConnection}return Ri},saveConnections:function(Ki){let Ri=Ki.nextConnection&&Ki.nextConnection.targetBlock(),pn=1;for(;Ri;){const Hn=this.getInput("field_input"+pn);Ri.savedConnection=Hn&&Hn.connection.targetConnection,Ri.setFieldValue(this.getFieldValue("field"+pn),"field_name"),pn++,Ri=Ri.nextConnection&&Ri.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let Ki=1;for(;this.getInput("field_input"+Ki);)this.removeInput("field_input"+Ki),Ki++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let Ri=1;Ri<=this.numFields;Ri++){const pn=this.fields[Ri-1];this.appendValueInput("field_input"+Ri).setCheck(null).setAlign(1).appendField(new t.FieldTextInput(pn),"field"+Ri)}}};try{o.registerMutator("controls_create_mutator",cn,null,["object_field"])}catch(Ki){}}fieldXML(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}}class Df{definitionBlocks(r,s){r.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},s.credsforhttp=function(h){return"withCredsForDomain["+(s.valueToCode(h,"HttpDomain",0)||"(localSite)")+"]="+s.valueToCode(h,"WithCreds",0)+";\n"}}fieldXML(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class md{definitionBlocks(r,s){r.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},s.wait=function(l){return"waitTime("+(s.valueToCode(l,"VALUE",s.ORDER_ATOMIC)||"")+");"},r.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},s.wait_until=function(l){return"waitTime(("+(s.valueToCode(l,"VALUE",0)||"")+"-new Date())/1000);"}}fieldXML(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}}class _d{definitionBlocks(r,s){r([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),s.wait_seconds=function(o){return"waitForSeconds("+Number(o.getFieldValue("SECONDS"))+");\n"}}fieldXML(){return'\n  <block type="wait_seconds"></block>\n'}}class Xd{definitionBlocks(r,s){r.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(new t.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},s.comment=function(l){return"/*\n"+(s.valueToCode(l,"TEXT",0)||"''")+"\n*/;\n"},r.debugger={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("debugger").appendField(new t.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},s.debugger=function(l){return"startDebugger("+(s.valueToCode(l,"TEXT",0)||"''")+",'"+l.id+"',this);\n"}}fieldXML(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type="debugger">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n'}}class Kd{constructor(){this.xhrBlocks=new Cp,this.defaultBlocks=new pd,this.trycatchFinBlock=new Xu,this.ttsBlock=new ns,this.pianoBlock=new Ku,this.filterBlocks=new Fh,this.auth0Blocks=new Bh,this.convertersBlocks=new zd,this.currentDateBlock=new ec,this.dateFromTextBlock=new Hh,this.emailBlocks=new gc,this.exportFileBlock=new il,this.guiBlocks=new mc,this.chartBlock=new jd,this.htmlblocks=new fd,this.HTMLParserBlocks=new Yd,this.propBlocks=new uh,this.createObjectBlocks=new gd,this.windowsCreds=new Df,this.waitBlocks1=new md,this.waitBlocks2=new _d,this.commentBlock=new Xd}}var vd=W(2734);class Ep{constructor(){}DownloadBlocks(r,s,o){var l=r.workspaceToDom(s,!0),h=r.domToPrettyText(l),_=new Blob([h],{type:"text/plain;charset=utf-16"});vd.saveAs(_,o)}A(){return 1}LoadFile(r,s,o){s.clear();var l=r.textToDom(o);r.domToWorkspace(l,s)}formatInt(r){return r<10?"0"+r:r.toString(10)}formatDate(r){return`${this.formatInt(r.getFullYear())}${this.formatInt(r.getMonth()+1)}${this.formatInt(r.getDate())}${this.formatInt(r.getHours())}${this.formatInt(r.getMinutes())}${this.formatInt(r.getSeconds())}`}saveState(r,s,o){var l="BlocklyState"+(o||""),h=r.workspaceToDom(s,!0),_=r.domToPrettyText(h);window.localStorage.setItem(l,_)}restoreState(r,s,o){var h=window.localStorage.getItem("BlocklyState"+(o||""));if(((null==h?void 0:h.length)||0)>62){var _=r.textToDom(h);r.clearWorkspaceAndLoadFromXml(_,s)}return""}}const $d=W(6942);class dh{constructor(r,s){this.workspace=r,this.BlocklyJavaScript=s,this.latestCode="",this.step=0,this.highlightPause=!1,this.myInterpreter=null,this.runner=null}generateCodeAndLoadIntoInterpreter(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(this.workspace),this.resetStepUi(!0)}resetStepUi(r){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1}resetInterpreter(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)}highlightBlock(r){this.workspace.highlightBlock(r),this.highlightPause=!0}nextStep(r,s){console.log("next step"),r.myInterpreter.step()?setTimeout((o,l)=>{o.nextStep(o,l)},10,r,s):(s?s():console.log("\n\n<< Program complete >>"),r.resetInterpreter(),r.resetStepUi(!1))}runCode(r,s,o,l){""==l&&(l=this.latestCode),this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var h=this;h.myInterpreter=r(l,(_,C)=>h.initApiJS(_,C,h,s,o)),1!=window.runOneByOne?setTimeout(function(){h.highlightPause=!1,h.runner=function(){h.myInterpreter&&(h.myInterpreter.run()?setTimeout(h.runner,10):(o?o():console.log("\n\n<< Program complete >>"),h.resetInterpreter(),h.resetStepUi(!1)))},h.runner&&h.runner()},100):this.nextStep(h,o)}initInterpreterWaitForSeconds(r,s){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var o=r.createAsyncFunction(function(l,h){setTimeout(h,1e3*l)});r.setProperty(s,"waitForSeconds",o)}getCreds(r,s,o){var l=r.pseudoToNative(s),h="(localSite)";(o.startsWith("http://")||o.startsWith("https://"))&&(h=new URL(o).hostname);var _=!1;return h in l?_=l[h]:"*"in l&&(_=l["*"]),_}getHeaders(r,s,o){var l=r.pseudoToNative(s),h="(localSite)";(o.startsWith("http://")||o.startsWith("https://"))&&(h=new URL(o).hostname);var _=[];return h in l?_=l[h]:"*"in l&&(_=l["*"]),_}doGet(r,s,o,l){let h=new XMLHttpRequest;h.open("GET",r,!0),this.generateDataAndCreds(h,o,l,!1),h.onreadystatechange=function(){if(4==h.readyState){if(h.status>=200&&h.status<300){var _=JSON.stringify({origHref:r,objectToSend:"",status:h.status,statusOK:!0,text:h.responseText});return s(_)}return _=JSON.stringify({origHref:r,objectToSend:"",status:h.status,statusOK:!1,text:h.responseText,headers:h.getAllResponseHeaders()}),s(_)}},h.send(null)}exportToFile(r,s,o){var l;return l=1==o?this.b64toBlob1(s,"",512):new Blob([s],{type:"text/plain;charset=utf-8"}),vd.saveAs(l,r),r}b64toBlob1(r,s="",o=512){const l=atob(r),h=[];for(let C=0;C<l.length;C+=o){const D=l.slice(C,C+o),L=new Array(D.length);for(let Z=0;Z<D.length;Z++)L[Z]=D.charCodeAt(Z);const U=new Uint8Array(L);h.push(U)}return new Blob(h,{type:s})}displayDateCurrentAsHuman(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}displayDateCurrentAsIso(){return(new Date).toISOString()}displayDateCurrentAsUnix(){return Date.now()}displayDateFormatted(r){switch(r){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:return console.log("Date time format not suported"),""}}generateDataAndCreds(r,s,o,l){if(o)r.withCredentials=o;else{var h=!1;if(s&&s.length>0)for(var _=0;_<s.length;_++){var C=s[_];"Content-Type"==C.name&&(h=!0),r.setRequestHeader(C.name,C.value)}l&&!h&&r.setRequestHeader("Content-Type","application/json;charset=UTF-8")}}doPut(r,s,o,l,h){let _=s,C=new XMLHttpRequest;C.open("PUT",r,!0),this.generateDataAndCreds(C,l,h,!!s),C.onreadystatechange=function(){if(4==C.readyState){if(C.status>=200&&C.status<300){var D=JSON.stringify({origHref:r,objectToSend:s,status:C.status,statusOK:!0,text:C.responseText});return o(D)}return D=JSON.stringify({origHref:r,objectToSend:s,status:C.status,statusOK:!1,text:C.responseText,headers:C.getAllResponseHeaders()}),o(D)}},C.send(_)}doDelete(r,s,o,l,h){let _=s;var C=new XMLHttpRequest;C.open("DELETE",r,!0),this.generateDataAndCreds(C,l,h,!!s),C.onreadystatechange=function(){if(4==C.readyState){if(C.status>=200&&C.status<300){var D=JSON.stringify({origHref:r,objectToSend:"",status:C.status,statusOK:!0,text:C.responseText});return o(D)}return D=JSON.stringify({origHref:r,status:C.status,statusOK:!1,text:C.responseText,objectToSend:s,headers:C.getAllResponseHeaders()}),o(D)}},C.send(_)}doPost(r,s,o,l,h){let _=s,C=new XMLHttpRequest;C.open("POST",r,!0),this.generateDataAndCreds(C,l,h,!!s),C.onreadystatechange=function(){if(4==C.readyState){if(C.status>=200&&C.status<300){var D=JSON.stringify({origHref:r,objectToSend:s,status:C.status,statusOK:!0,text:C.responseText});return o(D)}return D=JSON.stringify({origHref:r,objectToSend:s,status:C.status,statusOK:!1,text:C.responseText,headers:C.getAllResponseHeaders()}),o(D)}},C.send(_)}table2array(r){var s=r.rows,o=[];if(0==s.length)return[];for(var l=Array.from(s[0].children).map(L=>L.innerText),h=1;h<s.length;h++){for(var _=s[h].children,C={},D=0;D<_.length;D++)C[l[D]]=_[D].innerText;o.push(C)}return o}list2array(r){var s=r.getElementsByTagName("li"),o=[];if(0==s.length)return[];for(var l=0;l<s.length;l++)o.push({li:s[l].innerText});return o}parseDOMFromStringElements(r,s,o){var l,h=(new DOMParser).parseFromString(r,s),_=[];if(o.toString().indexOf(",")>-1)for(var C=o.split(","),D=0;D<C.length;D++)_=_.concat(Array.from(h.getElementsByTagName(C[D])));else _=_.concat(h.getElementsByTagName(o));var L={};if(0==_.length)return L;switch(o){case"table":for(L={},D=0;D<_.length;D++)L["table"+D]=this.table2array(_[D]);break;case"a":L=[];var U=(null===(l=null==window?void 0:window.location)||void 0===l?void 0:l.host)||"";for(U.length>0&&(U=window.location.protocol+"//"+U),D=0;D<_.length;D++){var Z=_[D].href;U.length>0&&Z.startsWith(U)&&(Z=Z.substring(U.length)),L.push({href:Z,text:_[D].innerText})}break;case"img":for(L=[],D=0;D<_.length;D++)L.push({src:_[D].src});break;case"ul,ol":for(L={},D=0;D<_.length;D++)L["list"+D]=this.list2array(_[D]);break;case"h1,h2,h3,h4,h5,h6":for(L=[],D=0;D<_.length;D++)L.push({header:_[D].innerText});break;default:throw new Error(`tag !${o}! not supported`)}return JSON.stringify(L)}consoleLog(r,s){return console.log(r,s)}initApiJS(r,s,o,l,h){var _=qt=>{l?l("\n error --\n"+qt+"\n error --"):console.log(qt)};r.setProperty(s,"errHandler",r.createNativeFunction(_)),r.setProperty(s,"consoleLog",r.createNativeFunction(function(qt,fi){return r.createPrimitive(o.consoleLog(qt,fi))})),r.setProperty(s,"parseDOMFromStringElements",r.createNativeFunction(function(qt,fi,tn){return qt=qt?qt.toString():"",r.createPrimitive(o.parseDOMFromStringElements(qt,fi,tn))})),r.setProperty(s,"parseDomNative",r.createNativeFunction(_));var L=r.nativeToPseudo({"(localSite)":!1});r.setProperty(s,"withCredsForDomain",L);var U=r.nativeToPseudo({"(localSite)":[]});r.setProperty(s,"headersForDomain",U),r.setProperty(s,"alert1",r.createNativeFunction(function(qt){qt=qt?qt.toString():"",window.alert(qt)})),r.setProperty(s,"playPiano",r.createNativeFunction(function(qt,fi,tn){$d.Synth.createInstrument("piano").play(qt,fi,tn)})),r.setProperty(s,"startDebugger",r.createNativeFunction(function(qt,fi,tn){o.highlightBlock(fi),console.log(qt,fi,tn)})),r.setProperty(s,"alert",r.createNativeFunction(function(qt){qt=qt?qt.toString():"",l?l(qt):console.log(qt)})),r.setProperty(s,"waitTime",r.createAsyncFunction((qt,fi)=>{console.log(`waiting seconds ${qt}`),setTimeout(fi,1e3*qt)})),r.setProperty(s,"displayDateFormatted",r.createNativeFunction(qt=>o.displayDateFormatted(qt))),r.setProperty(s,"exportToFile",r.createNativeFunction((qt,fi,tn)=>o.exportToFile(qt,fi,tn))),r.setProperty(s,"convertToCSV",r.createNativeFunction(qt=>{var fi=null;return Array.isArray(qt)?fi=qt:((fi="object"!=typeof qt?JSON.parse(qt):{})&&fi.table0&&(fi=fi.table0),fi&&fi.list0&&(fi=fi.list0)),0==fi.length?"":(fi=[Object.keys(fi[0])].concat(fi)).map(Gn=>Object.values(Gn).toString()).join("\n")})),r.setProperty(s,"open",r.createNativeFunction(function(qt){window.open(qt,"_blank")})),r.setProperty(s,"changeHost",r.createNativeFunction(function(qt,fi){if(0==(fi=(fi=fi?fi.toString():"").trim()).length)return qt;if(0==(qt=(qt=qt||"").trim()).length&&!(qt=fi).startsWith("http"))throw`please put in front of ${fi} http:// or https://`;var tn=new URL(qt);if(fi.startsWith("http")){var Gn=new URL(fi);tn.hostname=Gn.hostname,tn.protocol=Gn.protocol}else tn.hostname=fi.replace("https://","").replace("http://","");var Xn=tn.href;return Xn.endsWith("/")&&(Xn=Xn.substring(0,Xn.length-1)),Xn})),r.setProperty(s,"changePort",r.createNativeFunction(function(qt,fi){var tn=new URL(qt);console.log(`url ${tn.href}`),tn.port=fi,console.log(`url ${tn.href}`);var Gn=tn.href;return Gn.endsWith("/")&&(Gn=Gn.substring(0,Gn.length-1)),Gn})),r.setProperty(s,"speakDefault",r.createNativeFunction(function(qt,fi,tn,Gn,Xn){var bs=new SpeechSynthesisUtterance(qt),bc=parseInt(fi),Ai=window.speechSynthesis.getVoices()[bc];bs.voice=Ai,window.speechSynthesis.speak(bs)})),r.setProperty(s,"prompt",r.createAsyncFunction(function(qt,fi,tn){qt=qt?qt.toString():"",fi=fi?fi.toString():"",tn(window.prompt(qt,fi))})),o.BlocklyJavaScript.addReservedWords("waitForSeconds");var en=r.createAsyncFunction(function(qt,fi){setTimeout(fi,1e3*qt)});r.setProperty(s,"waitForSeconds",en),r.setProperty(s,"getXhr",r.createAsyncFunction((qt,fi)=>{var tn=o.getHeaders(r,U,qt),Gn=o.getCreds(r,L,qt);return o.doGet(qt,fi,tn,Gn)})),r.setProperty(s,"postXhr",r.createAsyncFunction((qt,fi,tn)=>{try{var Gn=o.getHeaders(r,U,qt),Xn=o.getCreds(r,L,qt);o.doPost(qt,fi,tn,Gn,Xn)}catch(bs){alert("is an error"+bs)}})),r.setProperty(s,"deleteXhr",r.createAsyncFunction((qt,fi,tn)=>{try{var Gn=o.getHeaders(r,U,qt),Xn=o.getCreds(r,L,qt);o.doDelete(qt,fi,tn,Gn,Xn)}catch(bs){alert("is an error"+bs)}})),r.setProperty(s,"putXhr",r.createAsyncFunction((qt,fi,tn)=>{try{var Gn=r.pseudoToNative(U),Xn="(localSite)";(qt.startsWith("http://")||qt.startsWith("https://"))&&(Xn=new URL(qt).hostname);var bs=[];Xn in Gn&&(bs=Gn[Xn]),o.doPut(qt,fi,tn,bs,!1)}catch(Ai){alert("is an error"+Ai)}})),r.setProperty(s,"highlightBlock",r.createNativeFunction(function(qt){return qt=qt?qt.toString():"",r.createPrimitive(o.highlightBlock(qt))}))}}class Dl{constructor(r){this.table=r}reloadData(r,s){return this.table.dataLoader.load(r,void 0,void 0,void 0,s)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(r){return this.table.eventBus.subscribed(r)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(r){return this.table.externalEvents.subscribed(r)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(r,s){return void 0!==s&&(this.table.options[r]=s),this.table.options[r]}setOption(r,s){return void 0!==s&&(this.table.options[r]=s),this.table.options[r]}module(r){return this.table.module(r)}}class ks extends Dl{constructor(r,s){super(r),this._handler=null}initialize(){}registerTableOption(r,s){this.table.optionsList.register(r,s)}registerColumnOption(r,s){this.table.columnManager.optionsList.register(r,s)}registerTableFunction(r,s){void 0===this.table[r]?this.table[r]=s:console.warn("Unable to bind table function, name already in use",r)}registerComponentFunction(r,s,o){return this.table.componentFunctionBinder.bind(r,s,o)}registerDataHandler(r,s){this.table.rowManager.registerDataPipelineHandler(r,s),this._handler=r}registerDisplayHandler(r,s){this.table.rowManager.registerDisplayPipelineHandler(r,s),this._handler=r}refreshData(r,s){s||(s=this._handler),s&&this.table.rowManager.refreshActiveData(s,!1,r)}}class Ao{static elVisible(r){return!(r.offsetWidth<=0&&r.offsetHeight<=0)}static elOffset(r){var s=r.getBoundingClientRect();return{top:s.top+window.pageYOffset-document.documentElement.clientTop,left:s.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(r,s,o=[]){var l={}.__proto__,h=[].__proto__;for(var _ in s||(s=Object.assign(Array.isArray(r)?[]:{},r)),r){let D,L,C=r[_];null!=C&&"object"==typeof C&&(C.__proto__===l||C.__proto__===h)&&(D=o.findIndex(U=>U.subject===C),D>-1?s[_]=o[D].copy:(L=Object.assign(Array.isArray(C)?[]:{},C),o.unshift({subject:C,copy:L}),s[_]=this.deepClone(C,L,o)))}return s}}var Mf={};let Tp=(()=>{class p extends ks{constructor(s){super(s),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(s){var o=!1,l={};this.allowedTypes.forEach(h=>{var C,_="accessor"+(h.charAt(0).toUpperCase()+h.slice(1));s.definition[_]&&(C=this.lookupAccessor(s.definition[_]))&&(o=!0,l[_]={accessor:C,params:s.definition[_+"Params"]||{}})}),o&&(s.modules.accessor=l)}lookupAccessor(s){var o=!1;switch(typeof s){case"string":p.accessors[s]?o=p.accessors[s]:console.warn("Accessor Error - No such accessor found, ignoring: ",s);break;case"function":o=s}return o}transformRow(s,o){var l="accessor"+(o.charAt(0).toUpperCase()+o.slice(1)),h=s.getComponent(),_=Ao.deepClone(s.data||{});return this.table.columnManager.traverse(function(C){var D,L,U,Z;C.modules.accessor&&(L=C.modules.accessor[l]||C.modules.accessor.accessor||!1)&&"undefined"!=(D=C.getFieldValue(_))&&(Z=C.getComponent(),U="function"==typeof L.params?L.params(D,_,o,Z,h):L.params,C.setFieldValue(_,L.accessor(D,_,o,U,Z,h)))}),_}}return p.moduleName="accessor",p.accessors=Mf,p})();var Rf={method:"GET"};function bd(p,r){var s=[];if(r=r||"",Array.isArray(p))p.forEach((l,h)=>{s=s.concat(bd(l,r?r+"["+h+"]":h))});else if("object"==typeof p)for(var o in p)s=s.concat(bd(p[o],r?r+"["+o+"]":o));else s.push({key:r,value:p});return s}function hh(p){var r=bd(p),s=[];return r.forEach(function(o){s.push(encodeURIComponent(o.key)+"="+encodeURIComponent(o.value))}),s.join("&")}function Vh(p,r,s){return p&&s&&Object.keys(s).length&&(!r.method||"get"==r.method.toLowerCase())&&(r.method="get",p+=(p.includes("?")?"&":"?")+hh(s)),p}function ph(p,r,s){var o;return new Promise((l,h)=>{if(p=this.urlGenerator.call(this.table,p,r,s),"GET"!=r.method.toUpperCase())if(o="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var _ in o.headers)r.headers||(r.headers={}),void 0===r.headers[_]&&(r.headers[_]=o.headers[_]);r.body=o.body.call(this,p,r,s)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);p?(void 0===r.headers&&(r.headers={}),void 0===r.headers.Accept&&(r.headers.Accept="application/json"),void 0===r.headers["X-Requested-With"]&&(r.headers["X-Requested-With"]="XMLHttpRequest"),void 0===r.mode&&(r.mode="cors"),"cors"==r.mode?(void 0===r.headers.Origin&&(r.headers.Origin=window.location.origin),void 0===r.credentials&&(r.credentials="same-origin")):void 0===r.credentials&&(r.credentials="include"),fetch(p,r).then(C=>{C.ok?C.json().then(D=>{l(D)}).catch(D=>{h(D),console.warn("Ajax Load Error - Invalid JSON returned",D)}):(console.error("Ajax Load Error - Connection Error: "+C.status,C.statusText),h(C))}).catch(C=>{console.error("Ajax Load Error - Connection Error: ",C),h(C)})):(console.warn("Ajax Load Error - No URL Set"),l([]))})}function x(p,r){var s=[];if(r=r||"",Array.isArray(p))p.forEach((l,h)=>{s=s.concat(x(l,r?r+"["+h+"]":h))});else if("object"==typeof p)for(var o in p)s=s.concat(x(p[o],r?r+"["+o+"]":o));else s.push({key:r,value:p});return s}var B={json:{headers:{"Content-Type":"application/json"},body:function(p,r,s){return JSON.stringify(s)}},form:{headers:{},body:function(p,r,s){var o=x(s),l=new FormData;return o.forEach(function(h){l.append(h.key,h.value)}),l}}};let m=(()=>{class p extends ks{constructor(s){super(s),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=p.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||p.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||p.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(s,o,l,h){return!((s||!this.url)&&"string"!=typeof s)}requestData(s,o,l,h,_){return this.requestDataCheck(s)?(s&&this.setUrl(s),o&&this.setParams(o,!0),l&&this.setConfig(l),this.sendRequest()):_}setParams(s,o){if(o){this.params=this.params||{};for(let l in s)this.params[l]=s[l]}else this.params=s}getParams(){return this.params||{}}setConfig(s){if(this._loadDefaultConfig(),"string"==typeof s)this.config.method=s;else for(let o in s)this.config[o]=s[o]}_loadDefaultConfig(s){if(!this.config||s){this.config={};for(let o in p.defaultConfig)this.config[o]=p.defaultConfig[o]}}setUrl(s){this.url=s}getUrl(){return this.url}sendRequest(s){var o=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(o,this.config,this.params).then(l=>(this.table.options.ajaxResponse&&(l=this.table.options.ajaxResponse.call(this.table,this.url,this.params,l)),l)):Promise.reject()}}return p.moduleName="ajax",p.defaultConfig=Rf,p.defaultURLGenerator=Vh,p.defaultLoaderPromise=ph,p.contentTypeFormatters=B,p})();var M={replace:function(p){return this.table.setData(p)},update:function(p){return this.table.updateOrAddData(p)},insert:function(p){return this.table.addData(p)}},X={table:function(p){var r=[],s=!0,o=this.table.columnManager.columns,l=[],h=[];return(p=p.split("\n")).forEach(function(_){r.push(_.split("\t"))}),!(!r.length||1===r.length&&r[0].length<2)&&(r[0].forEach(function(_){var C=o.find(function(D){return _&&D.definition.title&&_.trim()&&D.definition.title.trim()===_.trim()});C?l.push(C):s=!1}),s||(s=!0,l=[],r[0].forEach(function(_){var C=o.find(function(D){return _&&D.field&&_.trim()&&D.field.trim()===_.trim()});C?l.push(C):s=!1}),s||(l=this.table.columnManager.columnsByIndex)),s&&r.shift(),r.forEach(function(_){var C={};_.forEach(function(D,L){l[L]&&(C[l[L].field]=D)}),h.push(C)}),h)}};let he=(()=>{class p extends ks{constructor(s){super(s),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",s=>{var o,l;if(!this.blocked){if(s.preventDefault(),this.customSelection)o=this.customSelection,this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o));else{var h=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");o=(l=this.table.modules.export.genereateHTMLTable(h))?this.generatePlainContent(h):"",this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o),l=this.table.options.clipboardCopyFormatter("html",l))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):s.clipboardData&&s.clipboardData.setData?(s.clipboardData.setData("text/plain",o),l&&s.clipboardData.setData("text/html",l)):s.originalEvent&&s.originalEvent.clipboardData.setData&&(s.originalEvent.clipboardData.setData("text/plain",o),l&&s.originalEvent.clipboardData.setData("text/html",l)),this.dispatchExternal("clipboardCopied",o,l),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",s=>{this.paste(s)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(s){var o=[];return s.forEach(l=>{var h=[];l.columns.forEach(_=>{var C="";if(_)if("group"===l.type&&(_.value=_.component.getKey()),null===_.value)C="";else switch(typeof _.value){case"object":C=JSON.stringify(_.value);break;case"undefined":C="";break;default:C=_.value}h.push(C)}),o.push(h.join("\t"))}),o.join("\n")}copy(s,o){var l,h;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=s||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((s=document.createRange()).selectNodeContents(this.table.element),(l=window.getSelection()).toString()&&o&&(this.customSelection=l.toString()),l.removeAllRanges(),l.addRange(s)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((h=document.body.createTextRange()).moveToElementText(this.table.element),h.select()),document.execCommand("copy"),l&&l.removeAllRanges())}setPasteAction(s){switch(typeof s){case"string":this.pasteAction=p.pasteActions[s],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",s);break;case"function":this.pasteAction=s}}setPasteParser(s){switch(typeof s){case"string":this.pasteParser=p.pasteParsers[s],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",s);break;case"function":this.pasteParser=s}}paste(s){var o,l,h;this.checkPaseOrigin(s)&&(o=this.getPasteData(s),(l=this.pasteParser.call(this,o))?(s.preventDefault(),this.table.modExists("mutator")&&(l=this.mutateData(l)),h=this.pasteAction.call(this,l),this.dispatchExternal("clipboardPasted",o,l,h)):this.dispatchExternal("clipboardPasteError",o))}mutateData(s){var o=[];return Array.isArray(s)?s.forEach(l=>{o.push(this.table.modules.mutator.transformRow(l,"clipboard"))}):o=s,o}checkPaseOrigin(s){var o=!0;return("DIV"!=s.target.tagName||this.table.modules.edit.currentCell)&&(o=!1),o}getPasteData(s){var o;return window.clipboardData&&window.clipboardData.getData?o=window.clipboardData.getData("Text"):s.clipboardData&&s.clipboardData.getData?o=s.clipboardData.getData("text/plain"):s.originalEvent&&s.originalEvent.clipboardData.getData&&(o=s.originalEvent.clipboardData.getData("text/plain")),o}}return p.moduleName="clipboard",p.pasteActions=M,p.pasteParsers=X,p})();class kt{constructor(r){return this._row=r,new Proxy(this,{get:function(s,o,l){return void 0!==s[o]?s[o]:s._row.table.componentFunctionBinder.handle("row",s._row,o)}})}getData(r){return this._row.getData(r)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var r=[];return this._row.getCells().forEach(function(s){r.push(s.getComponent())}),r}getCell(r){var s=this._row.getCell(r);return!!s&&s.getComponent()}_getSelf(){return this._row}}class hi{constructor(r){return this._cell=r,new Proxy(this,{get:function(s,o,l){return void 0!==s[o]?s[o]:s._cell.table.componentFunctionBinder.handle("cell",s._cell,o)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(r,s){void 0===s&&(s=!0),this._cell.setValue(r,s)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class Li extends Dl{constructor(r,s){super(r.table),this.table=r.table,this.column=r,this.row=s,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var r=this.element,s=this.column.getField();r.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(r.style.display="inline-flex",r.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(r.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),s&&r.setAttribute("tabulator-field",s),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(_=>{r.classList.add(_)}),"hover"===this.table.options.tooltipGenerationMode&&r.addEventListener("mouseenter",_=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var r;switch(typeof(r=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(r instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(r)}else this.element.innerHTML="",null!=r&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",r);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=r}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var r=this.column.tooltip;r?(!0===r?r=this.value:"function"==typeof r&&!1===(r=r(this.getComponent()))&&(r=""),void 0===r&&(r=""),this.element.setAttribute("title",r)):this.element.setAttribute("title","")}getElement(r){return this.loaded||(this.loaded=!0,r||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(r,s){this.setValueProcessData(r,s)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(r,s){var o=!1;return this.value!=r&&(o=!0,s&&(r=this.chain("cell-value-changing",[this,r],null,r))),this.setValueActual(r),o&&this.dispatch("cell-value-changed",this),o}setValueActual(r){this.oldValue=this.value,this.value=r,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,r),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new hi(this)),this.component}}class Yn{constructor(r){return this._column=r,this.type="ColumnComponent",new Proxy(this,{get:function(s,o,l){return void 0!==s[o]?s[o]:s._column.table.componentFunctionBinder.handle("column",s._column,o)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var r=[];return this._column.cells.forEach(function(s){r.push(s.getComponent())}),r}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(r){r.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(r){r.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var r=[];return this._column.columns.length&&this._column.columns.forEach(function(s){r.push(s.getComponent())}),r}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(r,s){var o=this._column.table.columnManager.findColumn(r);o?this._column.table.columnManager.moveColumn(this._column,o,s):console.warn("Move Error - No matching column found:",o)}getNextColumn(){var r=this._column.nextColumn();return!!r&&r.getComponent()}getPrevColumn(){var r=this._column.prevColumn();return!!r&&r.getComponent()}updateDefinition(r){return this._column.updateDefinition(r)}getWidth(){return this._column.getWidth()}setWidth(r){var s;return s=!0===r?this._column.reinitializeWidth(!0):this._column.setWidth(r),this._column.table.columnManager.renderer.rerenderColumns(!0),s}}var Ji={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let hs=(()=>{class p extends Dl{constructor(s,o){super(o.table),this.definition=s,this.parent=o,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((l,h)=>{var _=new p(l,this);this.attachColumn(_)}),this.checkColumnVisibility()):o.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var s=document.createElement("div");return s.classList.add("tabulator-col"),s.setAttribute("role","columnheader"),s.setAttribute("aria-sort","none"),s}createGroupElement(){var s=document.createElement("div");return s.classList.add("tabulator-col-group-cols"),s}mapDefinitions(){var s=this.table.options.columnDefaults;if(s)for(let o in s)void 0===this.definition[o]&&(this.definition[o]=s[o]);this.definition=this.table.columnManager.optionsList.generate(p.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(s=>{-1===p.defaultOptionList.indexOf(s)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",s)})}setField(s){this.field=s,this.fieldStructure=s?this.table.options.nestedFieldSeparator?s.split(this.table.options.nestedFieldSeparator):[s]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(s){this.parent.registerColumnPosition(s)}registerColumnField(s){this.parent.registerColumnField(s)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(s){s.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var s=this.definition,o=void 0===s.headerTooltip?s.tooltip:s.headerTooltip;o?!0===o?s.field?this.langBind("columns|"+s.field,l=>{this.element.setAttribute("title",l||s.title)}):this.element.setAttribute("title",s.title):("function"==typeof o&&!1===(o=o(this.getComponent()))&&(o=""),this.element.setAttribute("title",o)):this.element.setAttribute("title","")}_initialize(){for(var s=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);s.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===s.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",o=>{this.setTooltip()})}_bindEvents(){var o,l,h,s=this.definition;"function"==typeof s.headerClick&&this.element.addEventListener("click",_=>{s.headerClick(_,this.getComponent())}),"function"==typeof s.headerDblClick&&this.element.addEventListener("dblclick",_=>{s.headerDblClick(_,this.getComponent())}),"function"==typeof s.headerContext&&this.element.addEventListener("contextmenu",_=>{s.headerContext(_,this.getComponent())}),"function"==typeof s.headerTap&&(h=!1,this.element.addEventListener("touchstart",_=>{h=!0},{passive:!0}),this.element.addEventListener("touchend",_=>{h&&s.headerTap(_,this.getComponent()),h=!1})),"function"==typeof s.headerDblTap&&(o=null,this.element.addEventListener("touchend",_=>{o?(clearTimeout(o),o=null,s.headerDblTap(_,this.getComponent())):o=setTimeout(()=>{clearTimeout(o),o=null},300)})),"function"==typeof s.headerTapHold&&(l=null,this.element.addEventListener("touchstart",_=>{clearTimeout(l),l=setTimeout(function(){clearTimeout(l),l=null,h=!1,s.headerTapHold(_,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",_=>{clearTimeout(l),l=null}))}_buildColumnHeader(){var s=this.definition;this.dispatch("column-layout",this),void 0!==s.visible&&(s.visible?this.show(!0):this.hide(!0)),s.cssClass&&s.cssClass.split(" ").forEach(h=>{this.element.classList.add(h)}),s.field&&this.element.setAttribute("tabulator-field",s.field),this.setMinWidth(parseInt(s.minWidth)),s.maxWidth&&this.setMaxWidth(parseInt(s.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var l=document.createElement("div");return l.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),l.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),l}_buildColumnHeaderTitle(){var s=this.definition,o=document.createElement("div");if(o.classList.add("tabulator-col-title"),s.editableTitle){var l=document.createElement("input");l.classList.add("tabulator-title-editor"),l.addEventListener("click",h=>{h.stopPropagation(),l.focus()}),l.addEventListener("change",()=>{s.title=l.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),o.appendChild(l),s.field?this.langBind("columns|"+s.field,h=>{l.value=h||s.title||"&nbsp;"}):l.value=s.title||"&nbsp;"}else s.field?this.langBind("columns|"+s.field,h=>{this._formatColumnHeaderTitle(o,h||s.title||"&nbsp;")}):this._formatColumnHeaderTitle(o,s.title||"&nbsp;");return o}_formatColumnHeaderTitle(s,o){var l=this.chain("column-format",[this,o,s],null,()=>o);switch(typeof l){case"object":l instanceof Node?s.appendChild(l):(s.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l));break;case"undefined":case"null":s.innerHTML="";break;default:s.innerHTML=l}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(o=>{this.element.classList.add(o)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(s){return s[this.field]}_getNestedData(s){var _,o=s,l=this.fieldStructure,h=l.length;for(let C=0;C<h&&(_=o=o[l[C]],o);C++);return _}_setFlatData(s,o){this.field&&(s[this.field]=o)}_setNestedData(s,o){var l=s,h=this.fieldStructure,_=h.length;for(let C=0;C<_;C++)if(C==_-1)l[h[C]]=o;else{if(!l[h[C]]){if(void 0===o)break;l[h[C]]={}}l=l[h[C]]}}attachColumn(s){this.groupElement?(this.columns.push(s),this.groupElement.appendChild(s.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(s,o){var l=this.parent.isGroup?this.parent.getGroupElement().clientHeight:o||this.parent.getHeadersElement().clientHeight;this.element.style.height=l+"px",this.isGroup&&(this.groupElement.style.minHeight=l-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==s&&(this.element.style.paddingTop="bottom"===s?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(h){h.verticalAlign(s)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(s){s.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(s){var o=[];return this.isGroup&&s&&(this.columns.forEach(function(l){o.push(l.getDefinition(!0))}),this.definition.columns=o),this.definition}checkColumnVisibility(){var s=!1;this.columns.forEach(function(o){o.visible&&(s=!0)}),s?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(s,o){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(l){l.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,o),s||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(s,o){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(l){l.hide()}),this.dispatch("column-hide",this),s||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var s=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(o){o.visible&&(s+=o.getWidth())}),this.contentElement.style.maxWidth=s-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(s){var o=this.columns.indexOf(s);o>-1&&this.columns.splice(o,1),this.columns.length||this.delete()}setWidth(s){this.widthFixed=!0,this.setWidthActual(s)}setWidthActual(s){isNaN(s)&&(s=Math.floor(this.table.element.clientWidth/100*parseInt(s))),s=Math.max(this.minWidth,s),this.maxWidth&&(s=Math.min(this.maxWidth,s)),this.width=s,this.widthStyled=s?s+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(o){o.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var s=[];this.cells.forEach(function(o){o.row.heightInitialized&&(null!==o.row.getElement().offsetParent?(s.push(o.row),o.row.clearCellHeight()):o.row.heightInitialized=!1)}),s.forEach(function(o){o.calcHeight()}),s.forEach(function(o){o.setCellHeight()})}getWidth(){var s=0;return this.isGroup?this.columns.forEach(function(o){o.visible&&(s+=o.getWidth())}):s=this.width,s}getHeight(){return this.element.offsetHeight}setMinWidth(s){this.minWidth=s,this.minWidthStyled=s?s+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(o){o.setMinWidth()})}setMaxWidth(s){this.maxWidth=s,this.maxWidthStyled=s?s+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(o){o.setMaxWidth()})}delete(){return new Promise((s,o)=>{this.isGroup&&this.columns.forEach(function(h){h.delete()}),this.dispatch("column-delete",this);var l=this.cells.length;for(let h=0;h<l;h++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),s()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(s){var o=new Li(this,s);return this.cells.push(o),o}nextColumn(){var s=this.table.columnManager.findColumnIndex(this);return s>-1&&this._nextVisibleColumn(s+1)}_nextVisibleColumn(s){var o=this.table.columnManager.getColumnByIndex(s);return!o||o.visible?o:this._nextVisibleColumn(s+1)}prevColumn(){var s=this.table.columnManager.findColumnIndex(this);return s>-1&&this._prevVisibleColumn(s-1)}_prevVisibleColumn(s){var o=this.table.columnManager.getColumnByIndex(s);return!o||o.visible?o:this._prevVisibleColumn(s-1)}reinitializeWidth(s){this.widthFixed=!1,void 0!==this.definition.width&&!s&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(o=>{o.clearWidth()}));var s=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(o=>{var l=o.getWidth();l>s&&(s=l)}),s&&this.setWidthActual(s+1))}}updateDefinition(s){var o;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(o=Object.assign({},this.getDefinition()),o=Object.assign(o,s),this.table.columnManager.addColumn(o,!1,this).then(l=>(o.field==this.field&&(this.field=!1),this.delete().then(()=>l.getComponent()))))}deleteCell(s){var o=this.cells.indexOf(s);o>-1&&this.cells.splice(o,1)}getComponent(){return this.component||(this.component=new Yn(this)),this.component}}return p.defaultOptionList=Ji,p})();class ms{constructor(r){return this._row=r,new Proxy(this,{get:function(s,o,l){return void 0!==s[o]?s[o]:s._row.table.componentFunctionBinder.handle("row",s._row,o)}})}getData(r){return this._row.getData(r)}getElement(){return this._row.getElement()}getCells(){var r=[];return this._row.getCells().forEach(function(s){r.push(s.getComponent())}),r}getCell(r){var s=this._row.getCell(r);return!!s&&s.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(r){return this._row.table.rowManager.getRowPosition(this._row,r)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(r,s){this._row.moveToRow(r,s)}update(r){return this._row.updateData(r)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var r=this._row.nextRow();return r&&r.getComponent()}getPrevRow(){var r=this._row.prevRow();return r&&r.getComponent()}}class Wo extends Dl{constructor(r,s,o="row"){super(s.table),this.parent=s,this.data={},this.type=o,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(r)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var r=document.createElement("div");r.classList.add("tabulator-row"),r.setAttribute("role","row"),this.element=r}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(r){if(this.create(),!this.initialized||r){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),r&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(r){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(r){var s=0,o=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(l){var h=l.getHeight();h>s&&(s=h)}),this.height=r?Math.max(s,o):this.manualHeight?this.height:Math.max(s,o),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(r){r.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(r){r.clearHeight()})}normalizeHeight(r){r&&this.clearCellHeight(),this.calcHeight(r),this.setCellHeight()}setHeight(r,s){(this.height!=r||s)&&(this.manualHeight=!0,this.height=r,this.heightStyled=r?r+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(r){var s=this.cells.indexOf(r);s>-1&&this.cells.splice(s,1)}setData(r){this.data=this.chain("row-data-init-before",[this,r],void 0,r),this.dispatch("row-data-init-after",this)}updateData(r){var l,s=this.element&&Ao.elVisible(this.element),o={};return new Promise((h,_)=>{for(var C in"string"==typeof r&&(r=JSON.parse(r)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(o=Object.assign(o,this.data),o=Object.assign(o,r)),l=this.chain("row-data-changing",[this,o,r],null,r))this.data[C]=l[C];for(var C in this.dispatch("row-data-save-after",this),r)this.table.columnManager.getColumnsByFieldRoot(C).forEach(U=>{let Z=this.getCell(U.getField());if(Z){let ue=U.getFieldValue(l);Z.getValue()!=ue&&(Z.setValueProcessData(ue),s&&Z.cellRendered())}});s?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,s,r),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),h()})}getData(r){return r?this.chain("row-data-retrieve",[this,r],null,this.data):this.data}getCell(r){return r=this.table.columnManager.findColumn(r),this.initialized||this.generateCells(),this.cells.find(function(o){return o.column===r})}getCellIndex(r){return this.cells.findIndex(function(s){return s===r})}findCell(r){return this.cells.find(s=>s.element===r)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(r,s){var o=this.table.rowManager.findRow(r);o?(this.table.rowManager.moveRowActual(this,o,!s),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",r)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(r){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,r),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var r=this.cells.length;for(let s=0;s<r;s++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new ms(this)),this.component}}var nu={avg:function(p,r,s){var o=0,l=void 0!==s.precision?s.precision:2;return p.length&&(o=p.reduce(function(h,_){return Number(h)+Number(_)}),o/=p.length,o=!1!==l?o.toFixed(l):o),parseFloat(o).toString()},max:function(p,r,s){var o=null,l=void 0!==s.precision&&s.precision;return p.forEach(function(h){((h=Number(h))>o||null===o)&&(o=h)}),null!==o?!1!==l?o.toFixed(l):o:""},min:function(p,r,s){var o=null,l=void 0!==s.precision&&s.precision;return p.forEach(function(h){((h=Number(h))<o||null===o)&&(o=h)}),null!==o?!1!==l?o.toFixed(l):o:""},sum:function(p,r,s){var o=0,l=void 0!==s.precision&&s.precision;return p.length&&p.forEach(function(h){h=Number(h),o+=isNaN(h)?0:Number(h)}),!1!==l?o.toFixed(l):o},concat:function(p,r,s){var o=0;return p.length&&(o=p.reduce(function(l,h){return String(l)+String(h)})),o},count:function(p,r,s){var o=0;return p.length&&p.forEach(function(l){l&&o++}),o}};let _c=(()=>{class p extends ks{constructor(s){super(s),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var s=document.createElement("div");return s.classList.add("tabulator-calcs-holder"),s}initialize(){this.genColumn=new hs({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(s){this.recalc(this.table.rowManager.activeRows),s&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(s){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(s){(s.column.definition.topCalc||s.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(s.row)):this.recalcActiveRows())}initializeColumnCheck(s){(s.definition.topCalc||s.definition.bottomCalc)&&this.initializeColumn(s)}initializeColumn(s){var o=s.definition,l={topCalcParams:o.topCalcParams||{},botCalcParams:o.bottomCalcParams||{}};if(o.topCalc){switch(typeof o.topCalc){case"string":p.calculations[o.topCalc]?l.topCalc=p.calculations[o.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.topCalc);break;case"function":l.topCalc=o.topCalc}l.topCalc&&(s.modules.columnCalcs=l,this.topCalcs.push(s),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(o.bottomCalc){switch(typeof o.bottomCalc){case"string":p.calculations[o.bottomCalc]?l.botCalc=p.calculations[o.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.bottomCalc);break;case"function":l.botCalc=o.bottomCalc}l.botCalc&&(s.modules.columnCalcs=l,this.botCalcs.push(s),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var s=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),s=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),s=!0),s&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(s){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-s+"px")}recalc(s){var o;if(this.topInitialized||this.botInitialized){if(this.rowsToData(s),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),o=this.generateRow("top",this.rowsToData(s)),this.topRow=o;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(o.getElement()),o.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),o=this.generateRow("bottom",this.rowsToData(s)),this.botRow=o;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(o.getElement()),o.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(s){this.recalcGroup(this.table.modules.groupRows.getRowGroup(s))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(o=>{this.recalcGroup(o)})}recalcGroup(s){var o,l;s&&s.calcs&&(s.calcs.bottom&&(o=this.rowsToData(s.rows),l=this.generateRowData("bottom",o),s.calcs.bottom.updateData(l),s.calcs.bottom.reinitialize()),s.calcs.top&&(o=this.rowsToData(s.rows),l=this.generateRowData("top",o),s.calcs.top.updateData(l),s.calcs.top.reinitialize()))}generateTopRow(s){return this.generateRow("top",this.rowsToData(s))}generateBottomRow(s){return this.generateRow("bottom",this.rowsToData(s))}rowsToData(s){var o=[];return s.forEach(l=>{if(o.push(l.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&l.modules.dataTree.open){var h=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(l));o=o.concat(h)}}),o}generateRow(s,o){var h,l=this.generateRowData(s,o);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),h=new Wo(l,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),h.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+s),h.component=!1,h.getComponent=()=>(h.component||(h.component=new kt(this)),h.component),h.generateCells=()=>{var _=[];this.table.columnManager.columnsByIndex.forEach(C=>{this.genColumn.setField(C.getField()),this.genColumn.hozAlign=C.hozAlign,this.genColumn.modules.format=C.definition[s+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(C.definition[s+"CalcFormatter"]),params:C.definition[s+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=C.definition.cssClass;var D=new Li(this.genColumn,h);D.getElement(),D.column=C,D.setWidth(),C.cells.push(D),_.push(D),C.visible||D.hide()}),h.cells=_},h}generateRowData(s,o){var C,D,l={},_="top"==s?"topCalc":"botCalc";return("top"==s?this.topCalcs:this.botCalcs).forEach(function(L){var U=[];L.modules.columnCalcs&&L.modules.columnCalcs[_]&&(o.forEach(function(Z){U.push(L.getFieldValue(Z))}),C="function"==typeof L.modules.columnCalcs[D=_+"Params"]?L.modules.columnCalcs[D](U,o):L.modules.columnCalcs[D],L.setFieldValue(l,L.modules.columnCalcs[_](U,o,C)))}),l}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var s={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(l=>{s[l.getKey()]=this.getGroupResults(l)}):s={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},s}getGroupResults(s){var o=s._getSelf(),l=s.getSubGroups(),h={};return l.forEach(C=>{h[C.getKey()]=this.getGroupResults(C)}),{top:o.calcs.top?o.calcs.top.getData():{},bottom:o.calcs.bottom?o.calcs.bottom.getData():{},groups:h}}}return p.moduleName="columnCalcs",p.calculations=nu,p})(),da=(()=>{class p extends ks{constructor(s){super(s),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var s=null,o=this.table.columnManager.getFirstVisibileColumn(),l=this.table.options;switch(this.field=l.dataTreeChildField,this.indent=l.dataTreeChildIndent,this.elementField=l.dataTreeElementColumn||!!o&&o.field,l.dataTreeBranchElement&&(!0===l.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof l.dataTreeBranchElement?((s=document.createElement("div")).innerHTML=l.dataTreeBranchElement,this.branchEl=s.firstChild):this.branchEl=l.dataTreeBranchElement),l.dataTreeCollapseElement?"string"==typeof l.dataTreeCollapseElement?((s=document.createElement("div")).innerHTML=l.dataTreeCollapseElement,this.collapseEl=s.firstChild):this.collapseEl=l.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),l.dataTreeExpandElement?"string"==typeof l.dataTreeExpandElement?((s=document.createElement("div")).innerHTML=l.dataTreeExpandElement,this.expandEl=s.firstChild):this.expandEl=l.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof l.dataTreeStartExpanded){case"boolean":this.startOpen=function(h,_){return l.dataTreeStartExpanded};break;case"function":this.startOpen=l.dataTreeStartExpanded;break;default:this.startOpen=function(h,_){return l.dataTreeStartExpanded[_]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(s){return this.getTreeChildren(s,!0)}columnMoving(){var s=[];return this.table.rowManager.rows.forEach(o=>{s=s.concat(this.getTreeChildren(o,!1,!0))}),s}rowDataChanged(s,o,l){this.redrawNeeded(l)&&(this.initializeRow(s),o&&(this.layoutRow(s),this.refreshData(!0)))}initializeRow(s){var o=s.getData()[this.field],l=Array.isArray(o),h=l||!l&&"object"==typeof o&&null!==o;!h&&s.modules.dataTree&&s.modules.dataTree.branchEl&&s.modules.dataTree.branchEl.parentNode.removeChild(s.modules.dataTree.branchEl),!h&&s.modules.dataTree&&s.modules.dataTree.controlEl&&s.modules.dataTree.controlEl.parentNode.removeChild(s.modules.dataTree.controlEl),s.modules.dataTree={index:s.modules.dataTree?s.modules.dataTree.index:0,open:!!h&&(s.modules.dataTree?s.modules.dataTree.open:this.startOpen(s.getComponent(),0)),controlEl:!(!s.modules.dataTree||!h)&&s.modules.dataTree.controlEl,branchEl:!(!s.modules.dataTree||!h)&&s.modules.dataTree.branchEl,parent:!!s.modules.dataTree&&s.modules.dataTree.parent,children:h}}reinitializeRowChildren(s){this.getTreeChildren(s,!1,!0).forEach(function(l){l.reinitialize(!0)})}layoutRow(s){var l=(this.elementField?s.getCell(this.elementField):s.getCells()[0]).getElement(),h=s.modules.dataTree;h.branchEl&&(h.branchEl.parentNode&&h.branchEl.parentNode.removeChild(h.branchEl),h.branchEl=!1),h.controlEl&&(h.controlEl.parentNode&&h.controlEl.parentNode.removeChild(h.controlEl),h.controlEl=!1),this.generateControlElement(s,l),s.getElement().classList.add("tabulator-tree-level-"+h.index),h.index&&(this.branchEl?(h.branchEl=this.branchEl.cloneNode(!0),l.insertBefore(h.branchEl,l.firstChild),this.table.rtl?h.branchEl.style.marginRight=(h.branchEl.offsetWidth+h.branchEl.style.marginLeft)*(h.index-1)+h.index*this.indent+"px":h.branchEl.style.marginLeft=(h.branchEl.offsetWidth+h.branchEl.style.marginRight)*(h.index-1)+h.index*this.indent+"px"):this.table.rtl?l.style.paddingRight=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-right"))+h.index*this.indent+"px":l.style.paddingLeft=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-left"))+h.index*this.indent+"px")}generateControlElement(s,o){var l=s.modules.dataTree,h=(o=o||s.getCells()[0].getElement(),l.controlEl);!1!==l.children&&(l.open?(l.controlEl=this.collapseEl.cloneNode(!0),l.controlEl.addEventListener("click",_=>{_.stopPropagation(),this.collapseRow(s)})):(l.controlEl=this.expandEl.cloneNode(!0),l.controlEl.addEventListener("click",_=>{_.stopPropagation(),this.expandRow(s)})),l.controlEl.addEventListener("mousedown",_=>{_.stopPropagation()}),h&&h.parentNode===o?h.parentNode.replaceChild(l.controlEl,h):o.insertBefore(l.controlEl,o.firstChild))}setDisplayIndex(s){this.displayIndex=s}getDisplayIndex(){return this.displayIndex}getRows(s){var o=[];return s.forEach((l,h)=>{var _;o.push(l),l instanceof Wo&&(l.create(),!(_=l.modules.dataTree.children).index&&!1!==_.children&&this.getChildren(l).forEach(D=>{D.create(),o.push(D)}))}),o}getChildren(s,o){var l=s.modules.dataTree,h=[],_=[];return!1!==l.children&&(l.open||o)&&(Array.isArray(l.children)||(l.children=this.generateChildren(s)),h=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(l.children):l.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(h),h.forEach(C=>{_.push(C),this.getChildren(C).forEach(L=>{_.push(L)})})),_}generateChildren(s){var o=[],l=s.getData()[this.field];return Array.isArray(l)||(l=[l]),l.forEach(h=>{var _=new Wo(h||{},this.table.rowManager);_.create(),_.modules.dataTree.index=s.modules.dataTree.index+1,_.modules.dataTree.parent=s,_.modules.dataTree.children&&(_.modules.dataTree.open=this.startOpen(_.getComponent(),_.modules.dataTree.index)),o.push(_)}),o}expandRow(s,o){var l=s.modules.dataTree;!1!==l.children&&(l.open=!0,s.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",s.getComponent(),s.modules.dataTree.index))}collapseRow(s){var o=s.modules.dataTree;!1!==o.children&&(o.open=!1,s.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",s.getComponent(),s.modules.dataTree.index))}toggleRow(s){var o=s.modules.dataTree;!1!==o.children&&(o.open?this.collapseRow(s):this.expandRow(s))}getTreeParent(s){return!!s.modules.dataTree.parent&&s.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(s){var o=s.modules.dataTree,l=[];return o.children&&(Array.isArray(o.children)||(o.children=this.generateChildren(s)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(o.children):o.children).forEach(_=>{_ instanceof Wo&&l.push(_)})),l}rowDelete(s){var l,o=s.modules.dataTree.parent;o&&(!1!==(l=this.findChildIndex(s,o))&&o.data[this.field].splice(l,1),o.data[this.field].length||delete o.data[this.field],this.initializeRow(o),this.layoutRow(o)),this.refreshData(!0)}addTreeChildRow(s,o,l,h){var _=!1;"string"==typeof o&&(o=JSON.parse(o)),Array.isArray(s.data[this.field])||(s.data[this.field]=[],s.modules.dataTree.open=this.startOpen(s.getComponent(),s.modules.dataTree.index)),void 0!==h&&!1!==(_=this.findChildIndex(h,s))&&s.data[this.field].splice(l?_:_+1,0,o),!1===_&&(l?s.data[this.field].unshift(o):s.data[this.field].push(o)),this.initializeRow(s),this.layoutRow(s),this.refreshData(!0)}findChildIndex(s,o){var l=!1;return"object"==typeof s?s instanceof Wo?l=s.data:s instanceof RowComponent?l=s._getSelf().data:"undefined"!=typeof HTMLElement&&s instanceof HTMLElement&&o.modules.dataTree&&(l=o.modules.dataTree.children.find(h=>h instanceof Wo&&h.element===s))&&(l=l.data):l=null!=s&&o.data[this.field].find(h=>h.data[this.table.options.index]==s),l&&(Array.isArray(o.data[this.field])&&(l=o.data[this.field].indexOf(l)),-1==l&&(l=!1)),l}getTreeChildren(s,o,l){var h=s.modules.dataTree,_=[];return h.children&&(Array.isArray(h.children)||(h.children=this.generateChildren(s)),h.children.forEach(C=>{C instanceof Wo&&(_.push(o?C.getComponent():C),l&&(_=_.concat(this.getTreeChildren(C,o,l))))})),_}checkForRestyle(s){s.row.cells.indexOf(s)||this.layoutRow(s.row)}getChildField(){return this.field}redrawNeeded(s){return!!this.field&&void 0!==s[this.field]||!!this.elementField&&void 0!==s[this.elementField]}}return p.moduleName="dataTree",p})();var xf={csv:function(p,r,s){var o=r&&r.delimiter?r.delimiter:",",l=[],h=[];p.forEach(_=>{var C=[];switch(_.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":_.columns.forEach((D,L)=>{D&&1===D.depth&&(h[L]=null==D.value?"":'"'+String(D.value).split('"').join('""')+'"')});break;case"row":_.columns.forEach(D=>{if(D){switch(typeof D.value){case"object":D.value=JSON.stringify(D.value);break;case"undefined":case"null":D.value=""}C.push('"'+String(D.value).split('"').join('""')+'"')}}),l.push(C.join(o))}}),h.length&&l.unshift(h.join(o)),l=l.join("\n"),r.bom&&(l="\ufeff"+l),s(l,"text/csv")},json:function(p,r,s){var o=[];p.forEach(l=>{var h={};switch(l.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":l.columns.forEach(_=>{_&&(h[_.component.getField()]=_.value)}),o.push(h)}}),s(o=JSON.stringify(o,null,"\t"),"application/json")},pdf:function(p,r,s){var o=[],l=[],h={},_=r.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},C=r.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},D=r.jsPDF||{},L=r&&r.title?r.title:"";function U(ue,we){var Ze=[];return ue.columns.forEach(ot=>{var mt;if(ot){switch(typeof ot.value){case"object":ot.value=JSON.stringify(ot.value);break;case"undefined":case"null":ot.value=""}mt={content:ot.value,colSpan:ot.width,rowSpan:ot.height},we&&(mt.styles=we),Ze.push(mt)}else Ze.push("")}),Ze}D.orientation||(D.orientation=r.orientation||"landscape"),D.unit||(D.unit="pt"),p.forEach(ue=>{switch(ue.type){case"header":o.push(U(ue));break;case"group":l.push(U(ue,_));break;case"calc":l.push(U(ue,C));break;case"row":l.push(U(ue))}});var Z=new jspdf.jsPDF(D);r&&r.autoTable&&(h="function"==typeof r.autoTable?r.autoTable(Z)||{}:r.autoTable),L&&(h.didDrawPage=function(ue){Z.text(L,40,30)}),h.head=o,h.body=l,Z.autoTable(h),r&&r.documentProcessing&&r.documentProcessing(Z),s(Z.output("arraybuffer"),"application/pdf")},xlsx:function(p,r,s){var l=r.sheetName||"Sheet1",h=XLSX.utils.book_new(),_=new Dl(this);function D(){var Z=[],ue=[],we={},Ze={s:{c:0,r:0},e:{c:p[0]?p[0].columns.reduce((ot,mt)=>ot+(mt&&mt.width?mt.width:1),0):0,r:p.length}};return p.forEach((ot,mt)=>{var bt=[];ot.columns.forEach(function(ei,ki){ei?(bt.push(ei.value instanceof Date||"object"!=typeof ei.value?ei.value:JSON.stringify(ei.value)),(ei.width>1||ei.height>-1)&&ue.push({s:{r:mt,c:ki},e:{r:mt+ei.height-1,c:ki+ei.width-1}})):bt.push("")}),Z.push(bt)}),XLSX.utils.sheet_add_aoa(we,Z),we["!ref"]=XLSX.utils.encode_range(Ze),ue.length&&(we["!merges"]=ue),we}if(h.SheetNames=[],h.Sheets={},r.sheetOnly)s(D());else{if(r.sheets)for(var L in r.sheets)!0===r.sheets[L]?(h.SheetNames.push(L),h.Sheets[L]=D()):(h.SheetNames.push(L),_.commsSend(r.sheets[L],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(Z){h.Sheets[L]=Z}}));else h.SheetNames.push(l),h.Sheets[l]=D();r.documentProcessing&&(h=r.documentProcessing(h)),s(function(Z){for(var ue=new ArrayBuffer(Z.length),we=new Uint8Array(ue),Ze=0;Ze!=Z.length;++Ze)we[Ze]=255&Z.charCodeAt(Ze);return ue}(XLSX.write(h,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(p,r,s){this.modExists("export",!0)&&s(this.modules.export.genereateHTMLTable(p),"text/html")}};let Wh=(()=>{class p extends ks{constructor(s){super(s),this.registerTableOption("downloadReady",function(o,l){return l}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(s,o,l,h){this.download(s,o,l,h,!0)}download(s,o,l,h,_){var C=!1;if("function"==typeof s?C=s:p.downloaders[s]?C=p.downloaders[s]:console.warn("Download Error - No such download type found: ",s),C){var L=this.generateExportList(h);C.call(this.table,L,l||{},function(U,Z){_?!0===_?this.triggerDownload(U,Z,s,o,!0):_(U):this.triggerDownload(U,Z,s,o)}.bind(this))}}generateExportList(s){var o=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,s||this.table.options.downloadRowRange,"download"),l=this.table.options.groupHeaderDownload;return l&&!Array.isArray(l)&&(l=[l]),o.forEach(h=>{var _;"group"===h.type&&(_=h.columns[0],l&&l[h.indent]&&(_.value=l[h.indent](_.value,h.component._group.getRowCount(),h.component._group.getData(),h.component)))}),o}triggerDownload(s,o,l,h,_){var C=document.createElement("a"),D=new Blob([s],{type:o});h=h||"Tabulator."+("function"==typeof l?"txt":l),(D=this.table.options.downloadReady(s,D))&&(_?window.open(window.URL.createObjectURL(D)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(D,h):(C.setAttribute("href",window.URL.createObjectURL(D)),C.setAttribute("download",h),C.style.display="none",document.body.appendChild(C),C.click(),document.body.removeChild(C)),this.dispatchExternal("downloadComplete"))}commsReceived(s,o,l){"intercept"===o&&this.download(l.type,"",l.options,l.active,l.intercept)}}return p.moduleName="download",p.downloaders=xf,p})();function fh(p,r){var s=r.mask,o=void 0!==r.maskLetterChar?r.maskLetterChar:"A",l=void 0!==r.maskNumberChar?r.maskNumberChar:"9",h=void 0!==r.maskWildcardChar?r.maskWildcardChar:"*";function _(C){var D=s[C];void 0!==D&&D!==h&&D!==o&&D!==l&&(p.value=p.value+""+D,_(C+1))}p.addEventListener("keydown",C=>{var D=p.value.length,L=C.key;if(C.keyCode>46){if(D>=s.length)return C.preventDefault(),C.stopPropagation(),!1;switch(s[D]){case o:if(L.toUpperCase()==L.toLowerCase())return C.preventDefault(),C.stopPropagation(),!1;break;case l:if(isNaN(L))return C.preventDefault(),C.stopPropagation(),!1;break;case h:break;default:if(L!==s[D])return C.preventDefault(),C.stopPropagation(),!1}}}),p.addEventListener("keyup",C=>{C.keyCode>46&&r.maskAutoFill&&_(p.value.length)}),p.placeholder||(p.placeholder=s),r.maskAutoFill&&_(p.value.length)}var Sp={input:function(p,r,s,o,l){var h=p.getValue(),_=document.createElement("input");if(_.setAttribute("type",l.search?"search":"text"),_.style.padding="4px",_.style.width="100%",_.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let D in l.elementAttributes)"+"==D.charAt(0)?(D=D.slice(1),_.setAttribute(D,_.getAttribute(D)+l.elementAttributes["+"+D])):_.setAttribute(D,l.elementAttributes[D]);function C(D){null==h&&""!==_.value||_.value!==h?s(_.value)&&(h=_.value):o()}return _.value=void 0!==h?h:"",r(function(){_.focus({preventScroll:!0}),_.style.height="100%"}),_.addEventListener("change",C),_.addEventListener("blur",C),_.addEventListener("keydown",function(D){switch(D.keyCode){case 13:C();break;case 27:o();break;case 35:case 36:D.stopPropagation()}}),l.mask&&fh(_,l),_},textarea:function(p,r,s,o,l){var h=p.getValue(),_=l.verticalNavigation||"hybrid",C=String(null!=h?h:""),L=(C.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),U=0;if(L.style.display="block",L.style.padding="2px",L.style.height="100%",L.style.width="100%",L.style.boxSizing="border-box",L.style.whiteSpace="pre-wrap",L.style.resize="none",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let ue in l.elementAttributes)"+"==ue.charAt(0)?(ue=ue.slice(1),L.setAttribute(ue,L.getAttribute(ue)+l.elementAttributes["+"+ue])):L.setAttribute(ue,l.elementAttributes[ue]);function Z(ue){null==h&&""!==L.value||L.value!==h?(s(L.value)&&(h=L.value),setTimeout(function(){p.getRow().normalizeHeight()},300)):o()}return L.value=C,r(function(){L.focus({preventScroll:!0}),L.style.height="100%",L.style.height=L.scrollHeight+"px",p.getRow().normalizeHeight()}),L.addEventListener("change",Z),L.addEventListener("blur",Z),L.addEventListener("keyup",function(){L.style.height="";var ue=L.scrollHeight;L.style.height=ue+"px",ue!=U&&(U=ue,p.getRow().normalizeHeight())}),L.addEventListener("keydown",function(ue){switch(ue.keyCode){case 27:o();break;case 38:("editor"==_||"hybrid"==_&&L.selectionStart)&&(ue.stopImmediatePropagation(),ue.stopPropagation());break;case 40:("editor"==_||"hybrid"==_&&L.selectionStart!==L.value.length)&&(ue.stopImmediatePropagation(),ue.stopPropagation());break;case 35:case 36:ue.stopPropagation()}}),l.mask&&fh(L,l),L},number:function(p,r,s,o,l){var h=p.getValue(),_=l.verticalNavigation||"editor",C=document.createElement("input");if(C.setAttribute("type","number"),void 0!==l.max&&C.setAttribute("max",l.max),void 0!==l.min&&C.setAttribute("min",l.min),void 0!==l.step&&C.setAttribute("step",l.step),C.style.padding="4px",C.style.width="100%",C.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let U in l.elementAttributes)"+"==U.charAt(0)?(U=U.slice(1),C.setAttribute(U,C.getAttribute(U)+l.elementAttributes["+"+U])):C.setAttribute(U,l.elementAttributes[U]);C.value=h;var D=function(U){L()};function L(){var U=C.value;!isNaN(U)&&""!==U&&(U=Number(U)),U!==h?s(U)&&(h=U):o()}return r(function(){C.removeEventListener("blur",D),C.focus({preventScroll:!0}),C.style.height="100%",C.addEventListener("blur",D)}),C.addEventListener("keydown",function(U){switch(U.keyCode){case 13:L();break;case 27:o();break;case 38:case 40:"editor"==_&&(U.stopImmediatePropagation(),U.stopPropagation());break;case 35:case 36:U.stopPropagation()}}),l.mask&&fh(C,l),C},range:function(p,r,s,o,l){var h=p.getValue(),_=document.createElement("input");if(_.setAttribute("type","range"),void 0!==l.max&&_.setAttribute("max",l.max),void 0!==l.min&&_.setAttribute("min",l.min),void 0!==l.step&&_.setAttribute("step",l.step),_.style.padding="4px",_.style.width="100%",_.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let D in l.elementAttributes)"+"==D.charAt(0)?(D=D.slice(1),_.setAttribute(D,_.getAttribute(D)+l.elementAttributes["+"+D])):_.setAttribute(D,l.elementAttributes[D]);function C(){var D=_.value;!isNaN(D)&&""!==D&&(D=Number(D)),D!=h?s(D)&&(h=D):o()}return _.value=h,r(function(){_.focus({preventScroll:!0}),_.style.height="100%"}),_.addEventListener("blur",function(D){C()}),_.addEventListener("keydown",function(D){switch(D.keyCode){case 13:C();break;case 27:o()}}),_},select:function(p,r,s,o,l){var h=this,_=p.getElement(),C=p.getValue(),D=l.verticalNavigation||"editor",L=void 0!==C||null===C?Array.isArray(C)?C:[C]:void 0!==l.defaultValue?l.defaultValue:[],U=document.createElement("input"),Z=document.createElement("div"),ue=l.multiselect,we=[],Ze={},ot=[],mt=[],bt=!0,ei=!1,ki="",mi=null;function Ci(Ai){var Yr,xn={},mo=h.table.getData();return(Yr=Ai?h.table.columnManager.getColumnByField(Ai):p.getColumn()._getSelf())?mo.forEach(function(ru){var Zu=Yr.getFieldValue(ru);null!=Zu&&""!==Zu&&(xn[Zu]=!0)}):console.warn("unable to find matching column to create select lookup list:",Ai),Object.keys(xn)}function en(Ai,xn){!ue&&Ze&&Ze.element&&Ze.element.classList.remove("active"),Ze&&Ze.element&&Ze.element.classList.remove("focused"),Ze=Ai,Ai.element&&(Ai.element.classList.add("focused"),xn&&Ai.element.classList.add("active")),Ai&&Ai.element&&Ai.element.scrollIntoView&&Ai.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function cn(Ai){-1==mt.indexOf(Ai)&&(mt.push(Ai),en(Ai,!0)),qt()}function Ki(Ai){var xn=mt[Ai];Ai>-1&&(mt.splice(Ai,1),xn.element&&xn.element.classList.remove("active"))}function Ri(Ai){Ai||(Ai=Ze);var xn=mt.indexOf(Ai);xn>-1?Ki(xn):(!0!==ue&&mt.length>=ue&&Ki(0),cn(Ai)),qt()}function pn(Ai){Xn(),Ai||(Ai=Ze),Ai&&(U.value=Ai.label,s(Ai.value)),L=[Ai.value]}function Hn(Ai){Ai||Xn();var xn=[];mt.forEach(mo=>{xn.push(mo.value)}),L=xn,s(xn)}function qt(){var Ai=[];mt.forEach(xn=>{Ai.push(xn.label)}),U.value=Ai.join(", "),!1===h.currentCell&&Hn(!0)}function tn(){Xn(),o()}function Xn(){Z.parentNode&&Z.parentNode.removeChild(Z),h.table.rowManager.element.removeEventListener("scroll",tn)}if((Array.isArray(l)||!Array.isArray(l)&&"object"==typeof l&&!l.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),l={values:l}),U.setAttribute("type","text"),U.style.padding="4px",U.style.width="100%",U.style.boxSizing="border-box",U.style.cursor="default",U.readOnly=0!=this.currentCell,l.elementAttributes&&"object"==typeof l.elementAttributes)for(let Ai in l.elementAttributes)"+"==Ai.charAt(0)?(Ai=Ai.slice(1),U.setAttribute(Ai,U.getAttribute(Ai)+l.elementAttributes["+"+Ai])):U.setAttribute(Ai,l.elementAttributes[Ai]);return U.value=void 0!==C||null===C?C:"",U.addEventListener("search",function(Ai){U.value||(function(){var Ai=mt.length;for(let xn=0;xn<Ai;xn++)Ki(0)}(),Hn())}),U.addEventListener("keydown",function(Ai){var xn;switch(Ai.keyCode){case 38:xn=we.indexOf(Ze),("editor"==D||"hybrid"==D&&xn)&&(Ai.stopImmediatePropagation(),Ai.stopPropagation(),Ai.preventDefault(),xn>0&&en(we[xn-1],!ue));break;case 40:xn=we.indexOf(Ze),("editor"==D||"hybrid"==D&&xn<we.length-1)&&(Ai.stopImmediatePropagation(),Ai.stopPropagation(),Ai.preventDefault(),xn<we.length-1&&en(-1==xn?we[0]:we[xn+1],!ue));break;case 37:case 39:Ai.stopImmediatePropagation(),Ai.stopPropagation(),Ai.preventDefault();break;case 13:ue?Ri():pn();break;case 27:tn();break;case 9:break;default:!1===h.currentCell&&Ai.preventDefault(),Ai.keyCode>=38&&Ai.keyCode<=90&&function(Ai){clearTimeout(mi);var xn=String.fromCharCode(event.keyCode).toLowerCase();ki+=xn.toLowerCase();var mo=we.find(Yr=>void 0!==Yr.label&&Yr.label.toLowerCase().startsWith(ki));mo&&en(mo,!ue),mi=setTimeout(()=>{ki=""},800)}()}}),U.addEventListener("blur",function(Ai){bt&&(ue?Hn():tn())}),U.addEventListener("focus",function(Ai){ei||function(){if(mt=[],!Z.parentNode){!function(Ai,xn){var mo=[],Yr=[];function ru(Oo){return xn.indexOf((Oo={label:Oo.label,value:Oo.value,itemParams:Oo.itemParams,elementAttributes:Oo.elementAttributes,element:!1}).value)>-1&&cn(Oo),mo.push(Oo),Yr.push(Oo),Oo}if("function"==typeof Ai&&(Ai=Ai(p)),Array.isArray(Ai))Ai.forEach(function(Oo){var Rl;"object"==typeof Oo?Oo.options?(Yr.push(Rl={label:Oo.label,group:!0,itemParams:Oo.itemParams,elementAttributes:Oo.elementAttributes,element:!1}),Oo.options.forEach(function(bg){ru(bg)})):ru(Oo):(xn.indexOf((Rl={label:Oo,value:Oo,element:!1}).value)>-1&&cn(Rl),mo.push(Rl),Yr.push(Rl))});else for(var Zu in Ai){var th={label:Ai[Zu],value:Zu,element:!1};xn.indexOf(th.value)>-1&&cn(th),mo.push(th),Yr.push(th)}l.sortValuesList&&(mo.sort((Oo,Rl)=>Oo.label<Rl.label?-1:Oo.label>Rl.label?1:0),Yr.sort((Oo,Rl)=>Oo.label<Rl.label?-1:Oo.label>Rl.label?1:0),"asc"!==l.sortValuesList&&(mo.reverse(),Yr.reverse())),we=mo,ot=Yr,function(){for(;Z.firstChild;)Z.removeChild(Z.firstChild);ot.forEach(function(Ai){var xn=Ai.element;if(!xn){if(xn=document.createElement("div"),Ai.label=l.listItemFormatter?l.listItemFormatter(Ai.value,Ai.label,p,xn,Ai.itemParams):Ai.label,Ai.group?(xn.classList.add("tabulator-edit-select-list-group"),xn.tabIndex=0,xn.innerHTML=""===Ai.label?"&nbsp;":Ai.label):(xn.classList.add("tabulator-edit-select-list-item"),xn.tabIndex=0,xn.innerHTML=""===Ai.label?"&nbsp;":Ai.label,xn.addEventListener("click",function(){ei=!0,setTimeout(()=>{ei=!1},10),ue?(Ri(Ai),U.focus()):pn(Ai)}),mt.indexOf(Ai)>-1&&xn.classList.add("active")),Ai.elementAttributes&&"object"==typeof Ai.elementAttributes)for(let mo in Ai.elementAttributes)"+"==mo.charAt(0)?(mo=mo.slice(1),xn.setAttribute(mo,U.getAttribute(mo)+Ai.elementAttributes["+"+mo])):xn.setAttribute(mo,Ai.elementAttributes[mo]);xn.addEventListener("mousedown",function(){bt=!1,setTimeout(function(){bt=!0},10)}),Ai.element=xn}Z.appendChild(xn)})}()}(!0===l.values?Ci():"string"==typeof l.values?Ci(l.values):l.values||[],L);var Ai=Ao.elOffset(_);Z.style.minWidth=_.offsetWidth+"px",Z.style.top=Ai.top+_.offsetHeight+"px",Z.style.left=Ai.left+"px",Z.addEventListener("mousedown",function(xn){bt=!1,setTimeout(function(){bt=!0},10)}),document.body.appendChild(Z)}}()}),(Z=document.createElement("div")).classList.add("tabulator-edit-select-list"),r(function(){U.style.height="100%",U.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",tn)},10),U},autocomplete:function(p,r,s,o,l){var h=this,_=p.getElement(),C=p.getValue(),D=l.verticalNavigation||"editor",L=void 0!==C||null===C?C:void 0!==l.defaultValue?l.defaultValue:"",U=document.createElement("input"),Z=document.createElement("div"),ue=[],we=!1,Ze=!0,ot=!1;if(U.setAttribute("type","search"),U.style.padding="4px",U.style.width="100%",U.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let qt in l.elementAttributes)"+"==qt.charAt(0)?(qt=qt.slice(1),U.setAttribute(qt,U.getAttribute(qt)+l.elementAttributes["+"+qt])):U.setAttribute(qt,l.elementAttributes[qt]);function mt(){!0===l.values?ot=bt():"string"==typeof l.values&&(ot=bt(l.values))}function bt(qt){var Gn,fi={},tn=h.table.getData();return(Gn=qt?h.table.columnManager.getColumnByField(qt):p.getColumn()._getSelf())?(tn.forEach(function(Xn){var bs=Gn.getFieldValue(Xn);null!=bs&&""!==bs&&(fi[bs]=!0)}),fi=l.sortValuesList?"asc"==l.sortValuesList?Object.keys(fi).sort():Object.keys(fi).sort().reverse():Object.keys(fi)):console.warn("unable to find matching column to create autocomplete lookup list:",qt),fi}function ei(qt,fi){var Gn,Xn,tn=[];Gn=ot||l.values||[],l.searchFunc?(tn=l.searchFunc(qt,Gn))instanceof Promise?(ki(void 0!==l.searchingPlaceholder?l.searchingPlaceholder:"Searching..."),tn.then(bs=>{Hi(mi(bs),fi)}).catch(bs=>{console.err("error in autocomplete search promise:",bs)})):Hi(mi(tn),fi):(Xn=mi(Gn),""===qt?l.showListOnEmpty&&(tn=Xn):Xn.forEach(function(bs){(null!==bs.value||void 0!==bs.value)&&(String(bs.value).toLowerCase().indexOf(String(qt).toLowerCase())>-1||String(bs.title).toLowerCase().indexOf(String(qt).toLowerCase())>-1)&&tn.push(bs)}),Hi(tn,fi))}function ki(qt){var fi=document.createElement("div");Ci(),!1!==qt&&(fi.classList.add("tabulator-edit-select-list-notice"),fi.tabIndex=0,qt instanceof Node?fi.appendChild(qt):fi.innerHTML=qt,Z.appendChild(fi))}function mi(qt){var fi=[];if(Array.isArray(qt))qt.forEach(function(Xn){var bs={};"object"==typeof Xn?(bs.title=l.listItemFormatter?l.listItemFormatter(Xn.value,Xn.label):Xn.label,bs.value=Xn.value):(bs.title=l.listItemFormatter?l.listItemFormatter(Xn,Xn):Xn,bs.value=Xn),fi.push(bs)});else for(var tn in qt){var Gn={title:l.listItemFormatter?l.listItemFormatter(tn,qt[tn]):qt[tn],value:tn};fi.push(Gn)}return fi}function Ci(){for(;Z.firstChild;)Z.removeChild(Z.firstChild)}function Hi(qt,fi){qt.length?function(qt,fi){var tn=!1;Ci(),(ue=qt).forEach(function(Gn){var Xn=Gn.element;Xn||((Xn=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),Xn.tabIndex=0,Xn.innerHTML=Gn.title,Xn.addEventListener("click",function(bs){Ki(Gn),en()}),Xn.addEventListener("mousedown",function(bs){Ze=!1,setTimeout(function(){Ze=!0},10)}),Gn.element=Xn,fi&&Gn.value==C&&(U.value=Gn.title,Gn.element.classList.add("active"),tn=!0),Gn===we&&(Gn.element.classList.add("active"),tn=!0)),Z.appendChild(Xn)}),tn||Ki(!1)}(qt,fi):l.emptyPlaceholder&&ki(l.emptyPlaceholder)}function en(){Ri(),we?C!==we.value?(C=we.value,U.value=we.title,s(we.value)):o():l.freetext||l.allowEmpty&&""===U.value?(C=U.value,s(U.value)):o()}function Ki(qt,fi){we&&we.element&&we.element.classList.remove("active"),we=qt,qt&&qt.element&&qt.element.classList.add("active"),qt&&qt.element&&qt.element.scrollIntoView&&qt.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Ri(){Z.parentNode&&Z.parentNode.removeChild(Z),h.table.rowManager.element.removeEventListener("scroll",pn)}function pn(){Ri(),o()}return Z.classList.add("tabulator-edit-select-list"),Z.addEventListener("mousedown",function(qt){Ze=!1,setTimeout(function(){Ze=!0},10)}),U.addEventListener("keydown",function(qt){var fi;switch(qt.keyCode){case 38:fi=ue.indexOf(we),("editor"==D||"hybrid"==D&&fi)&&(qt.stopImmediatePropagation(),qt.stopPropagation(),qt.preventDefault(),Ki(fi>0&&ue[fi-1]));break;case 40:fi=ue.indexOf(we),("editor"==D||"hybrid"==D&&fi<ue.length-1)&&(qt.stopImmediatePropagation(),qt.stopPropagation(),qt.preventDefault(),fi<ue.length-1&&Ki(-1==fi?ue[0]:ue[fi+1]));break;case 37:case 39:qt.stopImmediatePropagation(),qt.stopPropagation();break;case 13:en();break;case 27:pn();break;case 36:case 35:qt.stopImmediatePropagation()}}),U.addEventListener("keyup",function(qt){switch(qt.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:ei(U.value)}}),U.addEventListener("search",function(qt){ei(U.value)}),U.addEventListener("blur",function(qt){Ze&&en()}),U.addEventListener("focus",function(qt){var fi=L;mt(),function(){if(!Z.parentNode){for(;Z.firstChild;)Z.removeChild(Z.firstChild);var qt=Ao.elOffset(_);Z.style.minWidth=_.offsetWidth+"px",Z.style.top=qt.top+_.offsetHeight+"px",Z.style.left=qt.left+"px",document.body.appendChild(Z)}}(),U.value=fi,ei(fi,!0)}),r(function(){U.style.height="100%",U.focus({preventScroll:!0})}),l.mask&&fh(U,l),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",pn)},10),mt(),U.value=L,ei(L,!0),U},star:function(p,r,s,o,l){var h=this,_=p.getElement(),C=p.getValue(),D=_.getElementsByTagName("svg").length||5,L=_.getElementsByTagName("svg")[0]?_.getElementsByTagName("svg")[0].getAttribute("width"):14,U=[],Z=document.createElement("div"),ue=document.createElementNS("http://www.w3.org/2000/svg","svg");function we(bt){U.forEach(function(ei,ki){ki<bt?("ie"==h.table.browser?ei.setAttribute("class","tabulator-star-active"):ei.classList.replace("tabulator-star-inactive","tabulator-star-active"),ei.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==h.table.browser?ei.setAttribute("class","tabulator-star-inactive"):ei.classList.replace("tabulator-star-active","tabulator-star-inactive"),ei.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function Ze(bt){var ei=document.createElement("span"),ki=ue.cloneNode(!0);U.push(ki),ei.addEventListener("mouseenter",function(mi){mi.stopPropagation(),mi.stopImmediatePropagation(),we(bt)}),ei.addEventListener("mousemove",function(mi){mi.stopPropagation(),mi.stopImmediatePropagation()}),ei.addEventListener("click",function(mi){mi.stopPropagation(),mi.stopImmediatePropagation(),s(bt),_.blur()}),ei.appendChild(ki),Z.appendChild(ei)}function ot(bt){C=bt,we(bt)}if(_.style.whiteSpace="nowrap",_.style.overflow="hidden",_.style.textOverflow="ellipsis",Z.style.verticalAlign="middle",Z.style.display="inline-block",Z.style.padding="4px",ue.setAttribute("width",L),ue.setAttribute("height",L),ue.setAttribute("viewBox","0 0 512 512"),ue.setAttribute("xml:space","preserve"),ue.style.padding="0 1px",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let bt in l.elementAttributes)"+"==bt.charAt(0)?(bt=bt.slice(1),Z.setAttribute(bt,Z.getAttribute(bt)+l.elementAttributes["+"+bt])):Z.setAttribute(bt,l.elementAttributes[bt]);for(var mt=1;mt<=D;mt++)Ze(mt);return we(C=Math.min(parseInt(C),D)),Z.addEventListener("mousemove",function(bt){we(0)}),Z.addEventListener("click",function(bt){s(0)}),_.addEventListener("blur",function(bt){o()}),_.addEventListener("keydown",function(bt){switch(bt.keyCode){case 39:ot(C+1);break;case 37:ot(C-1);break;case 13:s(C);break;case 27:o()}}),Z},progress:function(p,r,s,o,l){var ot,mt,ue,we,h=p.getElement(),_=void 0===l.max?(null==(ot=h.getElementsByTagName("div")[0])?void 0:ot.getAttribute("max"))||100:l.max,C=void 0===l.min?(null==(mt=h.getElementsByTagName("div")[0])?void 0:mt.getAttribute("min"))||0:l.min,D=(_-C)/100,L=p.getValue()||0,U=document.createElement("div"),Z=document.createElement("div");function Ze(){var bt=window.getComputedStyle(h,null),ei=D*Math.round(Z.offsetWidth/((h.clientWidth-parseInt(bt.getPropertyValue("padding-left"))-parseInt(bt.getPropertyValue("padding-right")))/100))+C;s(ei),h.setAttribute("aria-valuenow",ei),h.setAttribute("aria-label",L)}if(U.style.position="absolute",U.style.right="0",U.style.top="0",U.style.bottom="0",U.style.width="5px",U.classList.add("tabulator-progress-handle"),Z.style.display="inline-block",Z.style.position="relative",Z.style.height="100%",Z.style.backgroundColor="#488CE9",Z.style.maxWidth="100%",Z.style.minWidth="0%",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let bt in l.elementAttributes)"+"==bt.charAt(0)?(bt=bt.slice(1),Z.setAttribute(bt,Z.getAttribute(bt)+l.elementAttributes["+"+bt])):Z.setAttribute(bt,l.elementAttributes[bt]);return h.style.padding="4px 4px",L=Math.min(parseFloat(L),_),L=Math.max(parseFloat(L),C),L=Math.round((L-C)/D),Z.style.width=L+"%",h.setAttribute("aria-valuemin",C),h.setAttribute("aria-valuemax",_),Z.appendChild(U),U.addEventListener("mousedown",function(bt){ue=bt.screenX,we=Z.offsetWidth}),U.addEventListener("mouseover",function(){U.style.cursor="ew-resize"}),h.addEventListener("mousemove",function(bt){ue&&(Z.style.width=we+bt.screenX-ue+"px")}),h.addEventListener("mouseup",function(bt){ue&&(bt.stopPropagation(),bt.stopImmediatePropagation(),ue=!1,we=!1,Ze())}),h.addEventListener("keydown",function(bt){switch(bt.keyCode){case 39:bt.preventDefault(),Z.style.width=Z.clientWidth+h.clientWidth/100+"px";break;case 37:bt.preventDefault(),Z.style.width=Z.clientWidth-h.clientWidth/100+"px";break;case 9:case 13:Ze();break;case 27:o()}}),h.addEventListener("blur",function(){o()}),Z},tickCross:function(p,r,s,o,l){var h=p.getValue(),_=document.createElement("input"),C=l.tristate,D=void 0===l.indeterminateValue?null:l.indeterminateValue,L=!1;if(_.setAttribute("type","checkbox"),_.style.marginTop="5px",_.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let Z in l.elementAttributes)"+"==Z.charAt(0)?(Z=Z.slice(1),_.setAttribute(Z,_.getAttribute(Z)+l.elementAttributes["+"+Z])):_.setAttribute(Z,l.elementAttributes[Z]);function U(Z){return C?Z?L?D:_.checked:_.checked&&!L?(_.checked=!1,_.indeterminate=!0,L=!0,D):(L=!1,_.checked):_.checked}return _.value=h,C&&(void 0===h||h===D||""===h)&&(L=!0,_.indeterminate=!0),"firefox"!=this.table.browser&&r(function(){_.focus({preventScroll:!0})}),_.checked=!0===h||"true"===h||"True"===h||1===h,r(function(){_.focus()}),_.addEventListener("change",function(Z){s(U())}),_.addEventListener("blur",function(Z){s(U(!0))}),_.addEventListener("keydown",function(Z){13==Z.keyCode&&s(U()),27==Z.keyCode&&o()}),_}};let jh=(()=>{class p extends ks{constructor(s){super(s),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=p.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(s){var o=this.currentCell,l=this.options("tabEndNewRow");o&&(this.navigateNext(s)||l&&(o.getElement().firstChild.blur(),(l=this.table.addRow(!0===l?{}:"function"==typeof l?l(o.row.getComponent()):Object.assign({},l))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(s){return!!s.modules.edit&&s.modules.edit.edited}cellCancelEdit(s){s===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(s){s||(s=this.modules.edit.getEditedCells()),Array.isArray(s)||(s=[s]),s.forEach(o=>{this.modules.edit.clearEdited(o._getSelf())})}navigatePrev(s){var l,h,o=this.currentCell;if(o){if(s&&s.preventDefault(),l=this.navigateLeft())return!0;if((h=this.table.rowManager.prevDisplayRow(o.row,!0))&&(l=this.findNextEditableCell(h,h.cells.length)))return l.getComponent().edit(),!0}return!1}navigateNext(s){var l,h,o=this.currentCell;if(o){if(s&&s.preventDefault(),l=this.navigateRight())return!0;if((h=this.table.rowManager.nextDisplayRow(o.row,!0))&&(l=this.findNextEditableCell(h,-1)))return l.getComponent().edit(),!0}return!1}navigateLeft(s){var l,h,o=this.currentCell;return!(!o||(s&&s.preventDefault(),l=o.getIndex(),h=this.findPrevEditableCell(o.row,l),!h)||(h.getComponent().edit(),0))}navigateRight(s){var l,h,o=this.currentCell;return!(!o||(s&&s.preventDefault(),l=o.getIndex(),h=this.findNextEditableCell(o.row,l),!h)||(h.getComponent().edit(),0))}navigateUp(s){var l,h,o=this.currentCell;return!(!o||(s&&s.preventDefault(),l=o.getIndex(),h=this.table.rowManager.prevDisplayRow(o.row,!0),!h)||(h.cells[l].getComponent().edit(),0))}navigateDown(s){var l,h,o=this.currentCell;return!(!o||(s&&s.preventDefault(),l=o.getIndex(),h=this.table.rowManager.nextDisplayRow(o.row,!0),!h)||(h.cells[l].getComponent().edit(),0))}findNextEditableCell(s,o){var l=!1;if(o<s.cells.length-1)for(var h=o+1;h<s.cells.length;h++){let _=s.cells[h];if(_.column.modules.edit&&Ao.elVisible(_.getElement())){let C=!0;if("function"==typeof _.column.modules.edit.check&&(C=_.column.modules.edit.check(_.getComponent())),C){l=_;break}}}return l}findPrevEditableCell(s,o){var l=!1;if(o>0)for(var h=o-1;h>=0;h--){let _=s.cells[h],C=!0;if(_.column.modules.edit&&Ao.elVisible(_.getElement())&&("function"==typeof _.column.modules.edit.check&&(C=_.column.modules.edit.check(_.getComponent())),C)){l=_;break}}return l}initializeColumnCheck(s){void 0!==s.definition.editor&&this.initializeColumn(s)}columnDeleteCheck(s){this.currentCell&&this.currentCell.column===s&&this.cancelEdit()}rowDeleteCheck(s){this.currentCell&&this.currentCell.row===s&&this.cancelEdit()}initializeColumn(s){var o={editor:!1,blocked:!1,check:s.definition.editable,params:s.definition.editorParams||{}};switch(typeof s.definition.editor){case"string":this.editors[s.definition.editor]?o.editor=this.editors[s.definition.editor]:console.warn("Editor Error - No such editor found: ",s.definition.editor);break;case"function":o.editor=s.definition.editor;break;case"boolean":!0===s.definition.editor&&("function"!=typeof s.definition.formatter?o.editor=this.editors[s.definition.formatter]?this.editors[s.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",s.definition.formatter))}o.editor&&(s.modules.edit=o)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(s){var l,o=this.currentCell;if(this.invalidEdit=!1,o){for(this.currentCell=!1,l=o.getElement(),s?o.validate&&o.validate():l.classList.remove("tabulator-validation-fail"),l.classList.remove("tabulator-editing");l.firstChild;)l.removeChild(l.firstChild);o.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var s=this.currentCell,o=this.currentCell.getComponent();this.clearEditor(!0),s.setValueActual(s.getValue()),s.cellRendered(),("textarea"==s.column.definition.editor||s.column.definition.variableHeight)&&s.row.normalizeHeight(!0),s.column.definition.cellEditCancelled&&s.column.definition.cellEditCancelled.call(this.table,o),this.dispatchExternal("cellEditCancelled",o)}}bindEditor(s){if(s.column.modules.edit){var o=this,l=s.getElement(!0);l.setAttribute("tabindex",0),l.addEventListener("click",function(h){l.classList.contains("tabulator-editing")||l.focus({preventScroll:!0})}),l.addEventListener("mousedown",function(h){2===h.button?h.preventDefault():o.mouseClick=!0}),l.addEventListener("focus",function(h){o.recursionBlock||o.edit(s,h,!1)})}}focusCellNoEvent(s,o){this.recursionBlock=!0,o&&"ie"===this.table.browser||s.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(s,o){this.focusCellNoEvent(s),this.edit(s,!1,o)}focusScrollAdjust(s){if("virtual"==this.table.rowManager.getRenderMode()){var o=this.table.rowManager.element.scrollTop,l=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,h=s.row.getElement();h.offsetTop<o?this.table.rowManager.element.scrollTop-=o-h.offsetTop:h.offsetTop+h.offsetHeight>l&&(this.table.rowManager.element.scrollTop+=h.offsetTop+h.offsetHeight-l);var C=this.table.rowManager.element.scrollLeft,D=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,L=s.getElement();this.table.modExists("frozenColumns")&&(C+=parseInt(this.table.modules.frozenColumns.leftMargin),D-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(C-=parseInt(this.table.columnManager.renderer.vDomPadLeft),D-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),L.offsetLeft<C?this.table.rowManager.element.scrollLeft-=C-L.offsetLeft:L.offsetLeft+L.offsetWidth>D&&(this.table.rowManager.element.scrollLeft+=L.offsetLeft+L.offsetWidth-D)}}edit(s,o,l){var L,U,Z,h=this,_=!0,C=function(){},D=s.getElement();if(!this.currentCell){if(s.column.modules.edit.blocked)return this.mouseClick=!1,D.blur(),!1;switch(o&&o.stopPropagation(),typeof s.column.modules.edit.check){case"function":_=s.column.modules.edit.check(s.getComponent());break;case"boolean":_=s.column.modules.edit.check}if(_||l){if(h.cancelEdit(),h.currentCell=s,this.focusScrollAdjust(s),U=s.getComponent(),this.mouseClick&&(this.mouseClick=!1,s.column.definition.cellClick&&s.column.definition.cellClick.call(this.table,o,U)),s.column.definition.cellEditing&&s.column.definition.cellEditing.call(this.table,U),this.dispatchExternal("cellEditing",U),Z="function"==typeof s.column.modules.edit.params?s.column.modules.edit.params(U):s.column.modules.edit.params,!1===(L=s.column.modules.edit.editor.call(h,U,function(bt){C=bt},function(bt){if(h.currentCell===s){var ei=!0;return s.column.modules.validate&&h.table.modExists("validate")&&"manual"!=h.table.options.validationMode&&(ei=h.table.modules.validate.validate(s.column.modules.validate,s,bt)),!0===ei||"highlight"===h.table.options.validationMode?(h.clearEditor(),s.modules.edit||(s.modules.edit={}),s.modules.edit.edited=!0,-1==h.editedCells.indexOf(s)&&h.editedCells.push(s),s.setValue(bt,!0),h.table.options.dataTree&&h.table.modExists("dataTree")&&h.table.modules.dataTree.checkForRestyle(s),!0===ei||(D.classList.add("tabulator-validation-fail"),h.table.externalEvents.dispatch("validationFailed",s.getComponent(),bt,ei),!1)):(h.invalidEdit=!0,D.classList.add("tabulator-validation-fail"),h.focusCellNoEvent(s,!0),C(),h.table.externalEvents.dispatch("validationFailed",s.getComponent(),bt,ei),!1)}},function(){h.currentCell===s&&(h.cancelEdit(),h.table.options.dataTree&&h.table.modExists("dataTree")&&h.table.modules.dataTree.checkForRestyle(s))},Z)))return D.blur(),!1;if(!(L instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",L),D.blur(),!1;for(D.classList.add("tabulator-editing"),s.row.getElement().classList.add("tabulator-row-editing");D.firstChild;)D.removeChild(D.firstChild);D.appendChild(L),C();for(var ot=D.children,mt=0;mt<ot.length;mt++)ot[mt].addEventListener("click",function(bt){bt.stopPropagation()});return!0}return this.mouseClick=!1,D.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var s=[];return this.editedCells.forEach(o=>{s.push(o.getComponent())}),s}clearEdited(s){var o;s.modules.edit&&s.modules.edit.edited&&(s.modules.edit.edited=!1,s.modules.validate&&(s.modules.validate.invalid=!1)),(o=this.editedCells.indexOf(s))>-1&&this.editedCells.splice(o,1)}}return p.moduleName="edit",p.editors=Sp,p})();class gh{constructor(r,s,o,l){this.type=r,this.columns=s,this.component=o||!1,this.indent=l||0}}class mh{constructor(r,s,o,l,h){this.value=r,this.component=s||!1,this.width=o,this.height=l,this.depth=h}}let _h=(()=>{class p extends ks{constructor(s){super(s),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(s,o,l,h){this.cloneTableStyle=o,this.config=s||{},this.colVisProp=h;var _=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],C=this.bodyToExportRows(this.rowLookup(l));return _.concat(C)}genereateTable(s,o,l,h){var _=this.generateExportList(s,o,l,h);return this.genereateTableElement(_)}rowLookup(s){var o=[];if("function"==typeof s)s.call(this.table).forEach(l=>{(l=this.table.rowManager.findRow(l))&&o.push(l)});else switch(s){case!0:case"visible":o=this.table.rowManager.getVisibleRows(!0);break;case"all":o=this.table.rowManager.rows;break;case"selected":o=this.table.modules.selectRow.selectedRows;break;default:o=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],o)}generateColumnGroupHeaders(){var s=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(l=>{var h=this.processColumnGroup(l);h&&s.push(h)}),s}processColumnGroup(s){var o=s.columns,l=0,_={title:s.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||s.definition.title,column:s,depth:1};if(o.length){if(_.subGroups=[],_.width=0,o.forEach(C=>{var D=this.processColumnGroup(C);D&&(_.width+=D.width,_.subGroups.push(D),D.depth>l&&(l=D.depth))}),_.depth+=l,!_.width)return!1}else{if(!this.columnVisCheck(s))return!1;_.width=1}return _}columnVisCheck(s){return!1!==s.definition[this.colVisProp]&&(s.visible||!s.visible&&s.definition[this.colVisProp])}headersToExportRows(s){var o=[],l=0,h=[];function _(C,D){var L=l-D;if(void 0===o[D]&&(o[D]=[]),C.height=C.subGroups?1:L-C.depth+1,o[D].push(C),C.height>1)for(let U=1;U<C.height;U++)void 0===o[D+U]&&(o[D+U]=[]),o[D+U].push(!1);if(C.width>1)for(let U=1;U<C.width;U++)o[D].push(!1);C.subGroups&&C.subGroups.forEach(function(U){_(U,D+1)})}return s.forEach(function(C){C.depth>l&&(l=C.depth)}),s.forEach(function(C){_(C,0)}),o.forEach(C=>{var D=[];C.forEach(L=>{D.push(L?new mh(L.title,L.column.getComponent(),L.width,L.height,L.depth):null)}),h.push(new gh("header",D))}),h}bodyToExportRows(s){var o=[],l=[];return this.table.columnManager.columnsByIndex.forEach(h=>{this.columnVisCheck(h)&&o.push(h.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&s.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&s.push(this.table.modules.columnCalcs.botRow)),(s=s.filter(h=>{switch(h.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&h.modules.dataTree.parent)}return!0})).forEach((h,_)=>{var C=h.getData(this.colVisProp),D=[],L=0;switch(h.type){case"group":L=h.level,D.push(new mh(h.key,h.getComponent(),o.length,1));break;case"calc":case"row":o.forEach(U=>{D.push(new mh(U._column.getFieldValue(C),U,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(L=h.modules.dataTree.index)}l.push(new gh(h.type,D,h.getComponent(),L))}),l}genereateTableElement(s){var o=document.createElement("table"),l=document.createElement("thead"),h=document.createElement("tbody"),_=this.lookupTableStyles(),C=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],D={};return D.rowFormatter=null!==C?C:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(D.treeElementField=this.table.modules.dataTree.elementField),D.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],D.groupHeader&&!Array.isArray(D.groupHeader)&&(D.groupHeader=[D.groupHeader]),o.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),l,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),s.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),s.forEach((L,U)=>{switch(L.type){case"header":l.appendChild(this.genereateHeaderElement(L,D,_));break;case"group":h.appendChild(this.genereateGroupElement(L,D,_));break;case"calc":h.appendChild(this.genereateCalcElement(L,D,_));break;case"row":let Z=this.genereateRowElement(L,D,_);this.mapElementStyles(U%2&&_.evenRow?_.evenRow:_.oddRow,Z,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),h.appendChild(Z)}}),l.innerHTML&&o.appendChild(l),o.appendChild(h),this.mapElementStyles(this.table.element,o,["border-top","border-left","border-right","border-bottom"]),o}lookupTableStyles(){var s={};return this.cloneTableStyle&&window.getComputedStyle&&(s.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),s.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),s.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),s.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),s.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],s.firstRow&&(s.styleCells=s.firstRow.getElementsByClassName("tabulator-cell"),s.firstCell=s.styleCells[0],s.lastCell=s.styleCells[s.styleCells.length-1])),s}genereateHeaderElement(s,o,l){var h=document.createElement("tr");return s.columns.forEach(_=>{if(_){var C=document.createElement("th"),D=_.component._column.definition.cssClass?_.component._column.definition.cssClass.split(" "):[];C.colSpan=_.width,C.rowSpan=_.height,C.innerHTML=_.value,this.cloneTableStyle&&(C.style.boxSizing="border-box"),D.forEach(function(L){C.classList.add(L)}),this.mapElementStyles(_.component.getElement(),C,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(_.component._column.contentElement,C,["padding-top","padding-left","padding-right","padding-bottom"]),_.component._column.visible?this.mapElementStyles(_.component.getElement(),C,["width"]):_.component._column.definition.width&&(C.style.width=_.component._column.definition.width+"px"),_.component._column.parent&&this.mapElementStyles(_.component._column.parent.groupElement,C,["border-top"]),h.appendChild(C)}}),h}genereateGroupElement(s,o,l){var h=document.createElement("tr"),_=document.createElement("td"),C=s.columns[0];return h.classList.add("tabulator-print-table-row"),C.value=o.groupHeader&&o.groupHeader[s.indent]?o.groupHeader[s.indent](C.value,s.component._group.getRowCount(),s.component._group.getData(),s.component):!1===o.groupHeader?C.value:s.component._group.generator(C.value,s.component._group.getRowCount(),s.component._group.getData(),s.component),_.colSpan=C.width,_.innerHTML=C.value,h.classList.add("tabulator-print-table-group"),h.classList.add("tabulator-group-level-"+s.indent),C.component.isVisible()&&h.classList.add("tabulator-group-visible"),this.mapElementStyles(l.firstGroup,h,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(l.firstGroup,_,["padding-top","padding-left","padding-right","padding-bottom"]),h.appendChild(_),h}genereateCalcElement(s,o,l){var h=this.genereateRowElement(s,o,l);return h.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(l.calcRow,h,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),h}genereateRowElement(s,o,l){var h=document.createElement("tr");return h.classList.add("tabulator-print-table-row"),s.columns.forEach(_=>{if(_){var C=document.createElement("td"),D=_.component._column,L=_.value,U={modules:{},getValue:function(){return L},getField:function(){return D.definition.field},getElement:function(){return C},getColumn:function(){return D.getComponent()},getData:function(){return s.component.getData()},getRow:function(){return s.component},getComponent:function(){return U},column:D};if((D.definition.cssClass?D.definition.cssClass.split(" "):[]).forEach(function(ue){C.classList.add(ue)}),this.table.modExists("format")&&!1!==this.config.formatCells)L=this.table.modules.format.formatExportValue(U,this.colVisProp);else switch(typeof L){case"object":L=JSON.stringify(L);break;case"undefined":case"null":L="";break;default:L=L}L instanceof Node?C.appendChild(L):C.innerHTML=L,l.firstCell&&(this.mapElementStyles(l.firstCell,C,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),D.definition.align&&(C.style.textAlign=D.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(o.treeElementField&&o.treeElementField==D.field||!o.treeElementField&&0==i)&&(s.component._row.modules.dataTree.controlEl&&C.insertBefore(s.component._row.modules.dataTree.controlEl.cloneNode(!0),C.firstChild),s.component._row.modules.dataTree.branchEl&&C.insertBefore(s.component._row.modules.dataTree.branchEl.cloneNode(!0),C.firstChild)),h.appendChild(C),U.modules.format&&U.modules.format.renderedCallback&&U.modules.format.renderedCallback(),o.rowFormatter&&!1!==this.config.formatCells&&o.rowFormatter(s.component)}}),h}genereateHTMLTable(s){var o=document.createElement("div");return o.appendChild(this.genereateTableElement(s)),o.innerHTML}getHtml(s,o,l,h){var _=this.generateExportList(l||this.table.options.htmlOutputConfig,o,s,h||"htmlOutput");return this.genereateHTMLTable(_)}mapElementStyles(s,o,l){if(this.cloneTableStyle&&s&&o){var h={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var _=window.getComputedStyle(s);l.forEach(function(C){o.style[h[C]]=_.getPropertyValue(C)})}}}}return p.moduleName="export",p})();var Of={"=":function(p,r,s,o){return r==p},"<":function(p,r,s,o){return r<p},"<=":function(p,r,s,o){return r<=p},">":function(p,r,s,o){return r>p},">=":function(p,r,s,o){return r>=p},"!=":function(p,r,s,o){return r!=p},regex:function(p,r,s,o){return"string"==typeof p&&(p=new RegExp(p)),p.test(r)},like:function(p,r,s,o){return null==p?r===p:null!=r&&String(r).toLowerCase().indexOf(p.toLowerCase())>-1},keywords:function(p,r,s,o){var l=p.toLowerCase().split(void 0===o.separator?" ":o.separator),h=String(null==r?"":r).toLowerCase(),_=[];return l.forEach(C=>{h.includes(C)&&_.push(!0)}),o.matchAll?_.length===l.length:!!_.length},starts:function(p,r,s,o){return null==p?r===p:null!=r&&String(r).toLowerCase().startsWith(p.toLowerCase())},ends:function(p,r,s,o){return null==p?r===p:null!=r&&String(r).toLowerCase().endsWith(p.toLowerCase())},in:function(p,r,s,o){return Array.isArray(p)?!p.length||p.indexOf(r)>-1:(console.warn("Filter Error - filter value is not an array:",p),!1)}};let Dp=(()=>{class p extends ks{constructor(s){super(s),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(s=>{var o=this.table.columnManager.findColumn(s.field);if(!o)return console.warn("Column Filter Error - No matching column found:",s.field),!1;this.setHeaderFilterValue(o,s.value)}),this.tableInitialized=!0}remoteFilterParams(s,o,l,h){return h.filter=this.getFilters(!0,!0),h}userSetFilter(s,o,l,h){this.setFilter(s,o,l,h),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(s,o,l,h){this.addFilter(s,o,l,h),this.refreshFilter()}userSetHeaderFilterFocus(s){var o=this.table.columnManager.findColumn(s);if(!o)return console.warn("Column Filter Focus Error - No matching column found:",s),!1;this.setHeaderFilterFocus(o)}userGetHeaderFilterValue(s){var o=this.table.columnManager.findColumn(s);if(o)return this.getHeaderFilterValue(o);console.warn("Column Filter Error - No matching column found:",s)}userSetHeaderFilterValue(s,o){var l=this.table.columnManager.findColumn(s);if(!l)return console.warn("Column Filter Error - No matching column found:",s),!1;this.setHeaderFilterValue(l,o)}userRemoveFilter(s,o,l){this.removeFilter(s,o,l),this.refreshFilter()}userClearFilter(s){this.clearFilter(s),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(s,o,l){return this.search("rows",s,o,l)}searchData(s,o,l){return this.search("data",s,o,l)}initializeColumnHeaderFilter(s){var o=s.definition;o.headerFilter&&(void 0!==o.headerFilterPlaceholder&&o.field&&this.module("localize").setHeaderFilterColumnPlaceholder(o.field,o.headerFilterPlaceholder),this.initializeColumn(s))}initializeColumn(s,o){var l=this,h=s.getField();s.modules.filter={success:function(C){var Z,D="input"==s.modules.filter.tagType&&"text"==s.modules.filter.attrType||"textarea"==s.modules.filter.tagType?"partial":"match",L="",U="";if(void 0===s.modules.filter.prevSuccess||s.modules.filter.prevSuccess!==C){if(s.modules.filter.prevSuccess=C,s.modules.filter.emptyFunc(C))delete l.headerFilters[h];else{switch(s.modules.filter.value=C,typeof s.definition.headerFilterFunc){case"string":p.filters[s.definition.headerFilterFunc]?(L=s.definition.headerFilterFunc,Z=function(ue){var we=s.definition.headerFilterFuncParams||{},Ze=s.getFieldValue(ue);return we="function"==typeof we?we(C,Ze,ue):we,p.filters[s.definition.headerFilterFunc](C,Ze,ue,we)}):console.warn("Header Filter Error - Matching filter function not found: ",s.definition.headerFilterFunc);break;case"function":L=Z=function(ue){var we=s.definition.headerFilterFuncParams||{},Ze=s.getFieldValue(ue);return we="function"==typeof we?we(C,Ze,ue):we,s.definition.headerFilterFunc(C,Ze,ue,we)}}Z||("partial"===D?(Z=function(ue){var we=s.getFieldValue(ue);return null!=we&&String(we).toLowerCase().indexOf(String(C).toLowerCase())>-1},L="like"):(Z=function(ue){return s.getFieldValue(ue)==C},L="=")),l.headerFilters[h]={value:C,func:Z,type:L,params:{}}}U=JSON.stringify(l.headerFilters),l.prevHeaderFilterChangeCheck!==U&&(l.prevHeaderFilterChangeCheck=U,l.trackChanges(),l.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(s)}generateHeaderFilterElement(s,o,l){var D,L,U,Z,ue,we,Ze,h=this,_=s.modules.filter.success,C=s.getField();if(s.modules.filter.headerElement&&s.modules.filter.headerElement.parentNode&&s.contentElement.removeChild(s.modules.filter.headerElement.parentNode),C){switch(s.modules.filter.emptyFunc=s.definition.headerFilterEmptyCheck||function(mt){return!mt&&"0"!==mt&&0!==mt},(D=document.createElement("div")).classList.add("tabulator-header-filter"),typeof s.definition.headerFilter){case"string":h.table.modules.edit.editors[s.definition.headerFilter]?(L=h.table.modules.edit.editors[s.definition.headerFilter],("tick"===s.definition.headerFilter||"tickCross"===s.definition.headerFilter)&&!s.definition.headerFilterEmptyCheck&&(s.modules.filter.emptyFunc=function(mt){return!0!==mt&&!1!==mt})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",s.definition.editor);break;case"function":L=s.definition.headerFilter;break;case"boolean":s.modules.edit&&s.modules.edit.editor?L=s.modules.edit.editor:s.definition.formatter&&h.table.modules.edit.editors[s.definition.formatter]?(L=h.table.modules.edit.editors[s.definition.formatter],("tick"===s.definition.formatter||"tickCross"===s.definition.formatter)&&!s.definition.headerFilterEmptyCheck&&(s.modules.filter.emptyFunc=function(mt){return!0!==mt&&!1!==mt})):L=h.table.modules.edit.editors.input}if(L){if(Z={getValue:function(){return void 0!==o?o:""},getField:function(){return s.definition.field},getElement:function(){return D},getColumn:function(){return s.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},Ze="function"==typeof(Ze=s.definition.headerFilterParams||{})?Ze.call(h.table):Ze,!(U=L.call(this.table.modules.edit,Z,function(){},_,function(){},Ze)))return void console.warn("Filter Error - Cannot add filter to "+C+" column, editor returned a value of false");if(!(U instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+C+" column, editor should return an instance of Node, the editor returned:",U);C?h.langBind("headerFilters|columns|"+s.definition.field,function(mt){U.setAttribute("placeholder",void 0!==mt&&mt?mt:h.langText("headerFilters|default"))}):h.langBind("headerFilters|default",function(mt){U.setAttribute("placeholder",mt)}),U.addEventListener("click",function(mt){mt.stopPropagation(),U.focus()}),U.addEventListener("focus",mt=>{var bt=this.table.columnManager.element.scrollLeft;bt!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(bt),this.table.columnManager.scrollHorizontal(bt))}),ue=!1,we=function(mt){ue&&clearTimeout(ue),ue=setTimeout(function(){_(U.value)},h.table.options.headerFilterLiveFilterDelay)},s.modules.filter.headerElement=U,s.modules.filter.attrType=U.hasAttribute("type")?U.getAttribute("type").toLowerCase():"",s.modules.filter.tagType=U.tagName.toLowerCase(),!1!==s.definition.headerFilterLiveFilter&&("autocomplete"===s.definition.headerFilter||"tickCross"===s.definition.headerFilter||("autocomplete"===s.definition.editor||"tickCross"===s.definition.editor)&&!0===s.definition.headerFilter||(U.addEventListener("keyup",we),U.addEventListener("search",we),"number"==s.modules.filter.attrType&&U.addEventListener("change",function(mt){_(U.value)}),"text"==s.modules.filter.attrType&&"ie"!==this.table.browser&&U.setAttribute("type","search")),("input"==s.modules.filter.tagType||"select"==s.modules.filter.tagType||"textarea"==s.modules.filter.tagType)&&U.addEventListener("mousedown",function(mt){mt.stopPropagation()})),D.appendChild(U),s.contentElement.appendChild(D),l||h.headerFilterColumns.push(s)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",s.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(s){s.modules.filter&&s.modules.filter.headerElement&&(s.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(s){s.modules.filter&&s.modules.filter.headerElement&&(s.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(s){s.modules.filter&&s.modules.filter.headerElement?s.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",s.getField())}getHeaderFilterValue(s){if(s.modules.filter&&s.modules.filter.headerElement)return s.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",s.getField())}setHeaderFilterValue(s,o){s&&(s.modules.filter&&s.modules.filter.headerElement?(this.generateHeaderFilterElement(s,o,!0),s.modules.filter.success(o)):console.warn("Column Filter Error - No header filter set on column:",s.getField()))}reloadHeaderFilter(s){s&&(s.modules.filter&&s.modules.filter.headerElement?this.generateHeaderFilterElement(s,s.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",s.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var s=this.changed;return this.changed=!1,s}setFilter(s,o,l,h){this.filterList=[],Array.isArray(s)||(s=[{field:s,type:o,value:l,params:h}]),this.addFilter(s)}addFilter(s,o,l,h){Array.isArray(s)||(s=[{field:s,type:o,value:l,params:h}]),s.forEach(_=>{(_=this.findFilter(_))&&(this.filterList.push(_),this.changed=!0)})}findFilter(s){var o;if(Array.isArray(s))return this.findSubFilters(s);var l=!1;return"function"==typeof s.field?l=function(h){return s.field(h,s.type||{})}:p.filters[s.type]?l=(o=this.table.columnManager.getColumnByField(s.field))?function(h){return p.filters[s.type](s.value,o.getFieldValue(h),h,s.params||{})}:function(h){return p.filters[s.type](s.value,h[s.field],h,s.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",s.type),s.func=l,!!s.func&&s}findSubFilters(s){var o=[];return s.forEach(l=>{(l=this.findFilter(l))&&o.push(l)}),!!o.length&&o}getFilters(s,o){var l=[];return s&&(l=this.getHeaderFilters()),o&&l.forEach(function(h){"function"==typeof h.type&&(h.type="function")}),l.concat(this.filtersToArray(this.filterList,o))}filtersToArray(s,o){var l=[];return s.forEach(h=>{var _;Array.isArray(h)?l.push(this.filtersToArray(h,o)):(_={field:h.field,type:h.type,value:h.value},o&&"function"==typeof _.type&&(_.type="function"),l.push(_))}),l}getHeaderFilters(){var s=[];for(var o in this.headerFilters)s.push({field:o,type:this.headerFilters[o].type,value:this.headerFilters[o].value});return s}removeFilter(s,o,l){Array.isArray(s)||(s=[{field:s,type:o,value:l}]),s.forEach(h=>{var _;(_=this.filterList.findIndex("object"==typeof h.field?C=>h===C:C=>h.field===C.field&&h.type===C.type&&h.value===C.value))>-1?this.filterList.splice(_,1):console.warn("Filter Error - No matching filter type found, ignoring: ",h.type)}),this.trackChanges()}clearFilter(s){this.filterList=[],s&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(s=>{void 0!==s.modules.filter.value&&delete s.modules.filter.value,s.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(s)}),this.trackChanges()}search(s,o,l,h){var _=[],C=[];return Array.isArray(o)||(o=[{field:o,type:l,value:h}]),o.forEach(D=>{(D=this.findFilter(D))&&C.push(D)}),this.table.rowManager.rows.forEach(D=>{var L=!0;C.forEach(U=>{this.filterRecurse(U,D.getData())||(L=!1)}),L&&_.push("data"===s?D.getData("data"):D.getComponent())}),_}filter(s,o){var l=[],h=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?s.forEach(_=>{this.filterRow(_)&&l.push(_)}):l=s.slice(0),this.subscribedExternal("dataFiltered")&&(l.forEach(_=>{h.push(_.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),h)),l}filterRow(s,o){var l=!0,h=s.getData();for(var _ in this.filterList.forEach(C=>{this.filterRecurse(C,h)||(l=!1)}),this.headerFilters)this.headerFilters[_].func(h)||(l=!1);return l}filterRecurse(s,o){var l=!1;return Array.isArray(s)?s.forEach(h=>{this.filterRecurse(h,o)&&(l=!0)}):l=s.func(o),l}}return p.moduleName="filter",p.filters=Of,p})();var Op={plaintext:function(p,r,s){return this.emptyToSpace(this.sanitizeHTML(p.getValue()))},html:function(p,r,s){return p.getValue()},textarea:function(p,r,s){return p.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(p.getValue()))},money:function(p,r,s){var h,_,C,D,o=parseFloat(p.getValue()),l="",L=r.decimal||".",U=r.thousand||",",Z=r.negativeSign||"-",ue=r.symbol||"",we=!!r.symbolAfter,Ze=void 0!==r.precision?r.precision:2;if(isNaN(o))return this.emptyToSpace(this.sanitizeHTML(p.getValue()));for(o<0&&(o=Math.abs(o),l=Z),h=!1!==Ze?o.toFixed(Ze):o,_=(h=String(h).split("."))[0],C=h.length>1?L+h[1]:"",D=/(\d+)(\d{3})/;D.test(_);)_=_.replace(D,"$1"+U+"$2");return we?l+_+C+ue:l+ue+_+C},link:function(p,r,s){var o=p.getValue(),l=r.urlPrefix||"",h=r.download,_=o,C=document.createElement("a");if(r.labelField&&(_=p.getData()[r.labelField]),r.label)switch(typeof r.label){case"string":_=r.label;break;case"function":_=r.label(p)}if(_){if(r.urlField&&(o=p.getData()[r.urlField]),r.url)switch(typeof r.url){case"string":o=r.url;break;case"function":o=r.url(p)}return C.setAttribute("href",l+o),r.target&&C.setAttribute("target",r.target),r.download&&(h="function"==typeof h?h(p):!0===h?"":h,C.setAttribute("download",h)),C.innerHTML=this.emptyToSpace(this.sanitizeHTML(_)),C}return"&nbsp;"},image:function(p,r,s){var o=document.createElement("img"),l=p.getValue();switch(r.urlPrefix&&(l=r.urlPrefix+p.getValue()),r.urlSuffix&&(l+=r.urlSuffix),o.setAttribute("src",l),typeof r.height){case"number":o.style.height=r.height+"px";break;case"string":o.style.height=r.height}switch(typeof r.width){case"number":o.style.width=r.width+"px";break;case"string":o.style.width=r.width}return o.addEventListener("load",function(){p.getRow().normalizeHeight()}),o},tickCross:function(p,r,s){var o=p.getValue(),l=p.getElement(),h=r.allowEmpty,C=void 0!==r.tickElement?r.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',D=void 0!==r.crossElement?r.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return r.allowTruthy&&o||!0===o||"true"===o||"True"===o||1===o||"1"===o?(l.setAttribute("aria-checked",!0),C||""):!h||"null"!==o&&""!==o&&null!=o?(l.setAttribute("aria-checked",!1),D||""):(l.setAttribute("aria-checked","mixed"),"")},datetime:function(p,r,s){var o=window.DateTime||luxon.DateTime,l=r.inputFormat||"yyyy-MM-dd HH:mm:ss",h=r.outputFormat||"dd/MM/yyyy HH:mm:ss",_=void 0!==r.invalidPlaceholder?r.invalidPlaceholder:"",C=p.getValue();if(void 0!==o){var D=(window.DateTime||luxon.DateTime).fromFormat(C,l);return D.isValid?(r.timezone&&(D=D.shiftTimezone(r.timezone)),D.toFormat(h)):!0===_?C:"function"==typeof _?_(C):_}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(p,r,s){var o=window.DateTime||luxon.DateTime,l=r.inputFormat||"yyyy-MM-dd HH:mm:ss",h=void 0!==r.invalidPlaceholder?r.invalidPlaceholder:"",_=void 0!==r.suffix&&r.suffix,C=void 0!==r.unit?r.unit:"days",D=void 0!==r.humanize&&r.humanize,L=void 0!==r.date?r.date:o.now(),U=p.getValue();if(void 0!==o){var Z=o.fromFormat(U,l);if(!Z.isValid)return!0===h?U:"function"==typeof h?h(U):h;if(!D)return parseInt(Z.diff(L,C)[C])+(_?" "+_:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(p,r,s){var o=p.getValue();return void 0===r[o]?(console.warn("Missing display value for "+o),o):r[o]},star:function(p,r,s){var o=p.getValue(),l=p.getElement(),h=r&&r.stars?r.stars:5,_=document.createElement("span"),C=document.createElementNS("http://www.w3.org/2000/svg","svg");_.style.verticalAlign="middle",C.setAttribute("width","14"),C.setAttribute("height","14"),C.setAttribute("viewBox","0 0 512 512"),C.setAttribute("xml:space","preserve"),C.style.padding="0 1px",o=o&&!isNaN(o)?parseInt(o):0,o=Math.max(0,Math.min(o,h));for(var U=1;U<=h;U++){var Z=C.cloneNode(!0);Z.innerHTML=U<=o?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',_.appendChild(Z)}return l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.style.textOverflow="ellipsis",l.setAttribute("aria-label",o),_},traffic:function(p,r,s){var U,o=this.sanitizeHTML(p.getValue())||0,l=document.createElement("span"),h=r&&r.max?r.max:100,_=r&&r.min?r.min:0,C=r&&void 0!==r.color?r.color:["red","orange","green"],D="#666666";if(!isNaN(o)&&void 0!==p.getValue()){switch(l.classList.add("tabulator-traffic-light"),U=parseFloat(o)<=h?parseFloat(o):h,U=parseFloat(U)>=_?parseFloat(U):_,U=Math.round((U-_)/((h-_)/100)),typeof C){case"string":D=C;break;case"function":D=C(o);break;case"object":if(Array.isArray(C)){var ue=Math.floor(U/(100/C.length));ue=Math.min(ue,C.length-1),D=C[ue=Math.max(ue,0)];break}}return l.style.backgroundColor=D,l}},progress:function(p,r,s){var L,U,Z,ue,o=this.sanitizeHTML(p.getValue())||0,l=p.getElement(),h=r&&r.max?r.max:100,_=r&&r.min?r.min:0,C=r&&r.legendAlign?r.legendAlign:"center";switch(L=parseFloat(o)<=h?parseFloat(o):h,L=parseFloat(L)>=_?parseFloat(L):_,L=Math.round((L-_)/((h-_)/100)),typeof r.color){case"string":U=r.color;break;case"function":U=r.color(o);break;case"object":if(Array.isArray(r.color)){var we=100/r.color.length,Ze=Math.floor(L/we);Ze=Math.min(Ze,r.color.length-1),Ze=Math.max(Ze,0),U=r.color[Ze];break}default:U="#2DC214"}switch(typeof r.legend){case"string":Z=r.legend;break;case"function":Z=r.legend(o);break;case"boolean":Z=o;break;default:Z=!1}switch(typeof r.legendColor){case"string":ue=r.legendColor;break;case"function":ue=r.legendColor(o);break;case"object":Array.isArray(r.legendColor)&&(we=100/r.legendColor.length,Ze=Math.floor(L/we),Ze=Math.min(Ze,r.legendColor.length-1),Ze=Math.max(Ze,0),ue=r.legendColor[Ze]);break;default:ue="#000"}l.style.minWidth="30px",l.style.position="relative",l.setAttribute("aria-label",L);var ot=document.createElement("div");ot.style.display="inline-block",ot.style.position="absolute",ot.style.width=L+"%",ot.style.backgroundColor=U,ot.style.height="100%",ot.setAttribute("data-max",h),ot.setAttribute("data-min",_);var mt=document.createElement("div");if(mt.style.position="relative",mt.style.width="100%",mt.style.height="100%",Z){var bt=document.createElement("div");bt.style.position="absolute",bt.style.top=0,bt.style.left=0,bt.style.textAlign=C,bt.style.width="100%",bt.style.color=ue,bt.innerHTML=Z}return s(function(){if(!(p instanceof hi)){var ei=document.createElement("div");ei.style.position="absolute",ei.style.top="4px",ei.style.bottom="4px",ei.style.left="4px",ei.style.right="4px",l.appendChild(ei),l=ei}l.appendChild(mt),mt.appendChild(ot),Z&&mt.appendChild(bt)}),""},color:function(p,r,s){return p.getElement().style.backgroundColor=this.sanitizeHTML(p.getValue()),""},buttonTick:function(p,r,s){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(p,r,s){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(p,r,s){return this.table.rowManager.activeRows.indexOf(p.getRow()._getSelf())+1},handle:function(p,r,s){return p.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(p,r,s){var o=document.createElement("div"),l=p.getRow()._row.modules.responsiveLayout;function h(_){var C=l.element;l.open=_,C&&(l.open?(o.classList.add("open"),C.style.display=""):(o.classList.remove("open"),C.style.display="none"))}return o.classList.add("tabulator-responsive-collapse-toggle"),o.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",p.getElement().classList.add("tabulator-row-handle"),o.addEventListener("click",function(_){_.stopImmediatePropagation(),h(!l.open)}),h(l.open),o},rowSelection:function(p,r,s){var o=document.createElement("input");if(o.type="checkbox",this.table.modExists("selectRow",!0))if(o.addEventListener("click",h=>{h.stopPropagation()}),"function"==typeof p.getRow){var l=p.getRow();l instanceof ms?(o.addEventListener("change",h=>{l.toggleSelect()}),o.checked=l.isSelected&&l.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(l,o)):o=""}else o.addEventListener("change",h=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(r.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(o);return o}};let kp=(()=>{class p extends ks{constructor(s){super(s),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(s){s.modules.format=this.lookupFormatter(s,""),void 0!==s.definition.formatterPrint&&(s.modules.format.print=this.lookupFormatter(s,"Print")),void 0!==s.definition.formatterClipboard&&(s.modules.format.clipboard=this.lookupFormatter(s,"Clipboard")),void 0!==s.definition.formatterHtmlOutput&&(s.modules.format.htmlOutput=this.lookupFormatter(s,"HtmlOutput"))}lookupFormatter(s,o){var l={params:s.definition["formatter"+o+"Params"]||{}},h=s.definition["formatter"+o];switch(typeof h){case"string":p.formatters[h]?l.formatter=p.formatters[h]:(console.warn("Formatter Error - No such formatter found: ",h),l.formatter=p.formatters.plaintext);break;case"function":l.formatter=h;break;default:l.formatter=p.formatters.plaintext}return l}cellRendered(s){s.modules.format&&s.modules.format.renderedCallback&&!s.modules.format.rendered&&(s.modules.format.renderedCallback(),s.modules.format.rendered=!0)}formatHeader(s,o,l){var h,_,C,D;return s.definition.titleFormatter?(h=this.getFormatter(s.definition.titleFormatter),C=L=>{s.titleFormatterRendered=L},D={getValue:function(){return o},getElement:function(){return l}},_="function"==typeof(_=s.definition.titleFormatterParams||{})?_():_,h.call(this,D,_,C)):o}formatValue(s){var o=s.getComponent(),l="function"==typeof s.column.modules.format.params?s.column.modules.format.params(o):s.column.modules.format.params;return s.column.modules.format.formatter.call(this,o,l,function(_){s.modules.format||(s.modules.format={}),s.modules.format.renderedCallback=_,s.modules.format.rendered=!1})}formatExportValue(s,o){var h,l=s.column.modules.format[o];if(l){let _=function(C){s.modules.format||(s.modules.format={}),s.modules.format.renderedCallback=C,s.modules.format.rendered=!1};return h="function"==typeof l.params?l.params(component):l.params,l.formatter.call(this,s.getComponent(),h,_)}return this.formatValue(s)}sanitizeHTML(s){if(s){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(s).replace(/[&<>"'`=\/]/g,function(l){return o[l]})}return s}emptyToSpace(s){return null==s||""===s?"&nbsp;":s}getFormatter(s){switch(typeof s){case"string":p.formatters[s]?s=p.formatters[s]:(console.warn("Formatter Error - No such formatter found: ",s),s=p.formatters.plaintext);break;case"function":s=s;break;default:s=p.formatters.plaintext}return s}}return p.moduleName="format",p.formatters=Op,p})(),Lp=(()=>{class p extends ks{constructor(s){super(s),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(s){this.layoutElement(s.element,s.column)}initializeColumn(s){var o={margin:0,edge:!1};s.isGroup||(this.frozenCheck(s)?(o.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(s):this.rightColumns.unshift(s),this.active=!0,s.modules.frozen=o):this.initializationMode="right")}frozenCheck(s){return s.parent.isGroup&&s.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),s.parent.isGroup?this.frozenCheck(s.parent):s.definition.frozen}scrollHorizontal(){var s;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),s=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),s.forEach(o=>{"row"===o.type&&this.layoutRow(o)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(s){s.forEach(o=>{o.calcs.top&&this.layoutRow(o.calcs.top),o.calcs.bottom&&this.layoutRow(o.calcs.bottom),o.groupList&&o.groupList.length&&this.layoutGroupCalcs(o.groupList&&o.groupList)})}layoutColumnPosition(s){var o=[];this.leftColumns.forEach((l,h)=>{if(l.modules.frozen.margin=this._calcSpace(this.leftColumns,h)+this.table.columnManager.scrollLeft+"px",l.modules.frozen.edge=h==this.leftColumns.length-1,l.parent.isGroup){var _=this.getColGroupParentElement(l);o.includes(_)||(this.layoutElement(_,l),o.push(_)),l.modules.frozen.edge&&_.classList.add("tabulator-frozen-"+l.modules.frozen.position)}else this.layoutElement(l.getElement(),l);s&&l.cells.forEach(C=>{this.layoutElement(C.getElement(!0),l)})}),this.rightColumns.forEach((l,h)=>{l.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,h+1)+"px",l.modules.frozen.edge=h==this.rightColumns.length-1,this.layoutElement(l.parent.isGroup?this.getColGroupParentElement(l):l.getElement(),l),s&&l.cells.forEach(_=>{this.layoutElement(_.getElement(!0),l)})})}getColGroupParentElement(s){return s.parent.isGroup?this.getColGroupParentElement(s.parent):s.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(s=>{"row"===s.type&&this.layoutRow(s)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(s){s.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(l=>{var h=s.getCell(l);h&&this.layoutElement(h.getElement(!0),l)}),this.rightColumns.forEach(l=>{var h=s.getCell(l);h&&this.layoutElement(h.getElement(!0),l)})}layoutElement(s,o){o.modules.frozen&&(s.style.position="absolute",s.style.left=o.modules.frozen.margin,s.classList.add("tabulator-frozen"),o.modules.frozen.edge&&s.classList.add("tabulator-frozen-"+o.modules.frozen.position))}_calcSpace(s,o){var l=0;for(let h=0;h<o;h++)s[h].visible&&(l+=s[h].getWidth());return l}}return p.moduleName="frozenColumns",p})(),Gf=(()=>{class p extends ks{constructor(s){super(s),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(s){return this.rows.indexOf(s)>-1}isFrozen(){return!!this.rows.length}getRows(s){var o=s.slice(0);return this.rows.forEach(function(l){var h=o.indexOf(l);h>-1&&o.splice(h,1)}),o}freezeRow(s){s.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(s.modules.frozen=!0,this.topElement.appendChild(s.getElement()),s.initialize(),s.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(s),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(s){this.rows.indexOf(s),s.modules.frozen?(s.modules.frozen=!1,this.detachRow(s),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(s){var o=this.rows.indexOf(s);if(o>-1){var l=s.getElement();l.parentNode&&l.parentNode.removeChild(l),this.rows.splice(o,1)}}styleRows(s){this.rows.forEach((o,l)=>{this.table.rowManager.styleRow(o,l)})}}return p.moduleName="frozenRows",p})();class Wf{constructor(r){return this._group=r,this.type="GroupComponent",new Proxy(this,{get:function(s,o,l){return void 0!==s[o]?s[o]:s._group.table.componentFunctionBinder.handle("row",s._group,o)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class $u{constructor(r,s,o,l,h,_,C){this.groupManager=r,this.parent=s,this.key=l,this.level=o,this.field=h,this.hasSubGroups=o<r.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=C,this.rows=[],this.groups=[],this.groupList=[],this.generator=_,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=C?C.visible:void 0!==r.startOpen[o]?r.startOpen[o]:r.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(r){r.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var r=document.createElement("div");r.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(r),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var r=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[r]&&this.groupManager.allowedValues[r].forEach(s=>{this._createGroup(s,r)})}addBindings(){var r,s,o;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(o=!1,this.element.addEventListener("touchstart",h=>{o=!0},{passive:!0}),this.element.addEventListener("touchend",h=>{o&&this.groupManager.table.options.groupTap(h,this.getComponent()),o=!1})),this.groupManager.table.options.groupDblTap&&(r=null,this.element.addEventListener("touchend",h=>{r?(clearTimeout(r),r=null,this.groupManager.table.options.groupDblTap(h,this.getComponent())):r=setTimeout(()=>{clearTimeout(r),r=null},300)})),this.groupManager.table.options.groupTapHold&&(s=null,this.element.addEventListener("touchstart",h=>{clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),s=null,o=!1,this.groupManager.table.options.groupTapHold(h,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",h=>{clearTimeout(s),s=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",h=>{h.stopPropagation(),h.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(r,s){var o=s+"_"+r,l=new $u(this.groupManager,this,s,r,this.groupManager.groupIDLookups[s].field,this.groupManager.headerGenerator[s]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[o]);this.groups[o]=l,this.groupList.push(l)}_addRowToGroup(r){var s=this.level+1;if(this.hasSubGroups){var o=this.groupManager.groupIDLookups[s].func(r.getData()),l=s+"_"+o;this.groupManager.allowedValues&&this.groupManager.allowedValues[s]?this.groups[l]&&this.groups[l].addRow(r):(this.groups[l]||this._createGroup(o,s),this.groups[l].addRow(r))}}_addRow(r){this.rows.push(r),r.modules.group=this}insertRow(r,s,o){var l=this.conformRowData({});r.updateData(l);var h=this.rows.indexOf(s);h>-1?this.rows.splice(o?h+1:h,0,r):o?this.rows.push(r):this.rows.unshift(r),r.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(r){this.arrowElement.style.marginLeft=r,this.groupList.forEach(function(s){s.scrollHeader(r)})}getRowIndex(r){}conformRowData(r){return this.field?r[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(r=this.parent.conformRowData(r)),r}removeRow(r){var s=this.rows.indexOf(r),o=r.getElement();s>-1&&this.rows.splice(s,1),this.groupManager.table.options.groupValues||this.rows.length?(o.parentNode&&o.parentNode.removeChild(o),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(r){var o,s=r.level+"_"+r.key;this.groups[s]&&(delete this.groups[s],(o=this.groupList.indexOf(r))>-1&&this.groupList.splice(o,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(r){var s=[];return s.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(o){s=s.concat(o.getHeadersAndRows(r))}):(!r&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),s.push(this.calcs.top)),s=s.concat(this.rows),!r&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),s.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!r&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),s.push(this.calcs.top))),!r&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),s.push(this.calcs.bottom)))),s}getData(r,s){var o=[];return this._visSet(),(!r||r&&this.visible)&&this.rows.forEach(l=>{o.push(l.getData(s||"data"))}),o}getRowCount(){var r=0;return this.groupList.length?this.groupList.forEach(s=>{r+=s.getRowCount()}):r=this.rows.length,r}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(r=>{r.getHeadersAndRows().forEach(o=>{o.detachElement()})}):this.rows.forEach(r=>{var s=r.getElement();s.parentNode.removeChild(s)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var r=this.getElement();this.groupList.length?this.groupList.forEach(s=>{s.getHeadersAndRows().forEach(l=>{var h=l.getElement();r.parentNode.insertBefore(h,r.nextSibling),l.initialize(),r=h})}):this.rows.forEach(s=>{var o=s.getElement();r.parentNode.insertBefore(o,r.nextSibling),s.initialize(),r=o}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var r=[];"function"==typeof this.visible&&(this.rows.forEach(function(s){r.push(s.getData())}),this.visible=this.visible(this.key,this.getRowCount(),r,this.getComponent()))}getRowGroup(r){var s=!1;return this.groupList.length?this.groupList.forEach(function(o){var l=o.getRowGroup(r);l&&(s=l)}):this.rows.find(function(o){return o===r})&&(s=this),s}getSubGroups(r){var s=[];return this.groupList.forEach(function(o){s.push(r?o.getComponent():o)}),s}getRows(r){var s=[];return this.rows.forEach(function(o){s.push(r?o.getComponent():o)}),s}generateGroupHeaderContents(){var r=[];for(this.rows.forEach(function(s){r.push(s.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),r,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(r=[]){return r.unshift(this.key),this.parent&&this.parent.getPath(r),r}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var r=0;r<this.element.childNodes.length;++r)this.element.childNodes[r].parentNode.removeChild(this.element.childNodes[r]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(r){(!this.initialized||r)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Ao.elVisible(this.element)&&this.initialize(!0)}setHeight(r){this.height!=r&&(this.height=r,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new Wf(this)),this.component}}let Pp=(()=>{class p extends ks{constructor(s){super(s),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var s=this.table.options.groupBy,o=this.table.options.groupStartOpen,l=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(s)&&Array.isArray(l)&&s.length>l.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(_,C)=>{this.headerGenerator[0]=(D,L,U)=>(void 0===D?"":D)+"<span>("+L+" "+(1===L?_:C.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(s)||s?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(_=>{_.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),_.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(s)||(s=[s]),s.forEach((_,C)=>{var D,L;D="function"==typeof _?_:(L=this.table.columnManager.getColumnByField(_))?function(U){return L.getFieldValue(U)}:function(U){return U[_]},this.groupIDLookups.push({field:"function"!=typeof _&&_,func:D,values:!!this.allowedValues&&this.allowedValues[C]})}),o&&(Array.isArray(o)||(o=[o]),o.forEach(_=>{}),this.startOpen=o),l&&(this.headerGenerator=Array.isArray(l)?l:[l])}}rowSample(s,o){var l=this.getGroups(!1)[0];return o.push(l.getRows(!1)[0]),o}virtualRenderFill(){var s=this.table.rowManager.tableElement,o=this.table.rowManager.getVisibleRows();o=o.filter(l=>"group"!==l.type),s.style.minWidth=o.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(s,o,l){this.assignRowToGroup(s);var h=s.modules.group.rows;return h.length>1&&(!o||o&&-1==h.indexOf(o)?l?h[0]!==s&&this.table.rowManager.moveRowInArray(s.modules.group.rows,s,o=h[0],!l):h[h.length-1]!==s&&this.table.rowManager.moveRowInArray(s.modules.group.rows,s,o=h[h.length-1],!l):this.table.rowManager.moveRowInArray(s.modules.group.rows,s,o,!l)),o}trackChanges(){this.dispatch("group-changed")}setGroupBy(s){this.table.options.groupBy=s,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(s){this.table.options.groupValues=s,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(s){this.table.options.groupStartOpen=s,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(s){this.table.options.groupHeader=s,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(s){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(s){return!!s.modules.group&&s.modules.group.getComponent()}rowMoving(s,o,l){!l&&o instanceof $u&&(o=this.table.rowManager.prevDisplayRow(s)||o);var h=o instanceof $u?o:o.modules.group,_=s instanceof $u?s:s.modules.group;h===_?this.table.rowManager.moveRowInArray(h.rows,s,o,l):(_&&_.removeRow(s),h.insertRow(s,o,l))}rowDeleting(s){s.modules.group&&s.modules.group.removeRow(s)}rowsUpdated(s){this.updateGroupRows(!0)}cellUpdated(s){this.reassignRowToGroup(s.row)}setDisplayIndex(s){this.displayIndex=s}getDisplayIndex(){return this.displayIndex}getRows(s){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(s),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):s.slice(0)}getGroups(s){var o=[];return this.groupList.forEach(function(l){o.push(s?l.getComponent():l)}),o}getChildGroups(s){var o=[];return s||(s=this),s.groupList.forEach(l=>{l.groupList.length?o=o.concat(this.getChildGroups(l)):o.push(l)}),o}wipe(){this.groupList.forEach(function(s){s.wipe()})}pullGroupListData(s){var o=[];return s.forEach(l=>{var h={level:0,rowCount:0,headerContent:""},_=[];l.hasSubGroups?(_=this.pullGroupListData(l.groupList),h.level=l.level,h.rowCount=_.length-l.groupList.length,h.headerContent=l.generator(l.key,h.rowCount,l.rows,l),o.push(h),o=o.concat(_)):(h.level=l.level,h.headerContent=l.generator(l.key,l.rows.length,l.rows,l),h.rowCount=l.getRows().length,o.push(h),l.getRows().forEach(C=>{o.push(C.getData("data"))}))}),o}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(s){var o=!1;return this.groupList.forEach(l=>{var h=l.getRowGroup(s);h&&(o=h)}),o}countGroups(){return this.groupList.length}generateGroups(s){var o=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(l=>{this.createGroup(l,0,o)}),s.forEach(l=>{this.assignRowToExistingGroup(l,o)})):s.forEach(l=>{this.assignRowToGroup(l,o)})}createGroup(s,o,l){var _,h=o+"_"+s;_=new $u(this,!1,o,s,this.groupIDLookups[0].field,this.headerGenerator[0],(l=l||[])[h]),this.groups[h]=_,this.groupList.push(_)}assignRowToExistingGroup(s,o){var h="0_"+this.groupIDLookups[0].func(s.getData());this.groups[h]&&this.groups[h].addRow(s)}assignRowToGroup(s,o){var l=this.groupIDLookups[0].func(s.getData()),h=!this.groups["0_"+l];return h&&this.createGroup(l,0,o),this.groups["0_"+l].addRow(s),!h}reassignRowToGroup(s){if("row"===s.type){var o=s.modules.group,l=o.getPath(),h=this.getExpectedPath(s);l.length==h.length&&l.every((C,D)=>C===h[D])||(o.removeRow(s),this.assignRowToGroup(s,this.groups),this.refreshData(!0))}}getExpectedPath(s){var o=[],l=s.getData();return this.groupIDLookups.forEach(h=>{o.push(h.func(l))}),o}updateGroupRows(s){var o=[];return this.groupList.forEach(l=>{o=o.concat(l.getHeadersAndRows())}),s&&this.refreshData(!0,this.displayHandler),o}scrollHeaders(s){"virtual"===this.table.options.renderHorizontal&&(s-=this.table.columnManager.renderer.vDomPadLeft),s+="px",this.groupList.forEach(o=>{o.scrollHeader(s)})}removeGroup(s){var l,o=s.level+"_"+s.key;this.groups[o]&&(delete this.groups[o],(l=this.groupList.indexOf(s))>-1&&this.groupList.splice(l,1))}}return p.moduleName="groupRows",p})();var zf={cellEdit:function(p){p.component.setValueProcessData(p.data.oldValue),p.component.cellRendered()},rowAdd:function(p){p.component.deleteActual()},rowDelete:function(p){var r=this.table.rowManager.addRowActual(p.data.data,p.data.pos,p.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(p.component,r)},rowMove:function(p){this.table.rowManager.moveRowActual(p.component,this.table.rowManager.rows[p.data.posFrom],!p.data.after),this.table.rowManager.redraw()}},kc={cellEdit:function(p){p.component.setValueProcessData(p.data.newValue),p.component.cellRendered()},rowAdd:function(p){var r=this.table.rowManager.addRowActual(p.data.data,p.data.pos,p.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(p.component,r)},rowDelete:function(p){p.component.deleteActual()},rowMove:function(p){this.table.rowManager.moveRowActual(p.component,this.table.rowManager.rows[p.data.posTo],p.data.after),this.table.rowManager.redraw()}};let Xh=(()=>{class p extends ks{constructor(s){super(s),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(s,o,l){this.action("rowMove",s,{posFrom:this.table.rowManager.getRowPosition(s),posTo:this.table.rowManager.getRowPosition(o),to:o,after:l})}rowAdded(s,o,l,h){this.action("rowAdd",s,{data:o,pos:l,index:h})}rowDeleted(s){var o,l;this.table.options.groupBy?(o=(l=s.getComponent().getGroup().rows).indexOf(s))&&(o=l[o-1]):(o=s.table.rowManager.getRowIndex(s))&&(o=s.table.rowManager.rows[o-1]),this.action("rowDelete",s,{data:s.getData(),pos:!o,index:o})}cellUpdated(s){this.action("cellEdit",s,{oldValue:s.oldValue,newValue:s.value})}clear(){this.history=[],this.index=-1}action(s,o,l){this.history=this.history.slice(0,this.index+1),this.history.push({type:s,component:o,data:l}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(s){var o=this.history.findIndex(function(l){return l.component===s});o>-1&&(this.history.splice(o,1),o<=this.index&&this.index--,this.clearComponentHistory(s))}undo(){if(this.index>-1){let s=this.history[this.index];return p.undoers[s.type].call(this,s),this.index--,this.dispatchExternal("historyUndo",s.type,s.component.getComponent(),s.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let s=this.history[this.index];return p.redoers[s.type].call(this,s),this.dispatchExternal("historyRedo",s.type,s.component.getComponent(),s.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(s,o){this.history.forEach(function(l){if(l.component instanceof Wo)l.component===s&&(l.component=o);else if(l.component instanceof Li&&l.component.row===s){var h=l.component.column.getField();h&&(l.component=o.getCell(h))}})}}return p.moduleName="history",p.undoers=zf,p.redoers=kc,p})(),jf=(()=>{class p extends ks{constructor(s){super(s),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var s=this.table.originalElement,o=this.table.options,h=s.getElementsByTagName("th"),_=s.getElementsByTagName("tbody")[0],C=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),_=_?_.getElementsByTagName("tr"):[],this._extractOptions(s,o),h.length?this._extractHeaders(h,_):this._generateBlankHeaders(h,_);for(var D=0;D<_.length;D++){var U=_[D].getElementsByTagName("td"),Z={};this.hasIndex||(Z[o.index]=D);for(var ue=0;ue<U.length;ue++)void 0!==this.fieldIndex[ue]&&(Z[this.fieldIndex[ue]]=U[ue].innerHTML);C.push(Z)}o.data=C,this.dispatchExternal("htmlImported")}_extractOptions(s,o,l){var h=s.attributes,_=l?Object.assign([],l):Object.keys(o),C={};for(var D in _.forEach(Z=>{C[Z.toLowerCase()]=Z}),h){var U,L=h[D];L&&"object"==typeof L&&L.name&&0===L.name.indexOf("tabulator-")&&(U=L.name.replace("tabulator-",""),void 0!==C[U]&&(o[C[U]]=this._attribValue(L.value)))}}_attribValue(s){return"true"===s||"false"!==s&&s}_findCol(s){return this.table.options.columns.find(l=>l.title===s)||!1}_extractHeaders(s,o){for(var l=0;l<s.length;l++){var D,h=s[l],_=!1,C=this._findCol(h.textContent);C?_=!0:C={title:h.textContent.trim()},C.field||(C.field=h.textContent.trim().toLowerCase().replace(" ","_")),(D=h.getAttribute("width"))&&!C.width&&(C.width=D),this._extractOptions(h,C,hs.prototype.defaultOptionList),this.fieldIndex[l]=C.field,C.field==this.table.options.index&&(this.hasIndex=!0),_||this.table.options.columns.push(C)}}_generateBlankHeaders(s,o){for(var l=0;l<s.length;l++){var h=s[l],_={title:"",field:"col"+l};this.fieldIndex[l]=_.field;var C=h.getAttribute("width");C&&(_.width=C),this.table.options.columns.push(_)}}}return p.moduleName="htmlTableImport",p})(),Yf=(()=>{class p extends ks{constructor(s){super(s),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(s,o){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){s.preventDefault();try{if(document.selection)(l=document.body.createTextRange()).moveToElementText(this.element),l.select();else if(window.getSelection){var l;(l=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(l)}}catch(h){}}}initializeExternalEvents(){for(let s in this.eventMap)this.subscriptionChangeExternal(s,this.subscriptionChanged.bind(this,s))}subscriptionChanged(s,o){o?this.subscribers[s]||(this.eventMap[s].includes("-")?(this.subscribers[s]=this.handle.bind(this,s),this.subscribe(this.eventMap[s],this.subscribers[s])):this.subscribeTouchEvents(s)):this.eventMap[s].includes("-")?this.subscribers[s]&&!this.columnSubscribers[s]&&!this.subscribedExternal(s)&&(this.unsubscribe(this.eventMap[s],this.subscribers[s]),delete this.subscribers[s]):this.unsubscribeTouchEvents(s)}subscribeTouchEvents(s){var o=this.eventMap[s];this.touchSubscribers[o+"-touchstart"]||(this.touchSubscribers[o+"-touchstart"]=this.handleTouch.bind(this,o,"start"),this.touchSubscribers[o+"-touchend"]=this.handleTouch.bind(this,o,"end"),this.subscribe(o+"-touchstart",this.touchSubscribers[o+"-touchstart"]),this.subscribe(o+"-touchend",this.touchSubscribers[o+"-touchend"])),this.subscribers[s]=!0}unsubscribeTouchEvents(s){var o=!0,l=this.eventMap[s];if(this.subscribers[s]&&!this.subscribedExternal(s)){delete this.subscribers[s];for(let h in this.eventMap)this.eventMap[h]===l&&this.subscribers[h]&&(o=!1);o&&(this.unsubscribe(l+"-touchstart",this.touchSubscribers[l+"-touchstart"]),this.unsubscribe(l+"-touchend",this.touchSubscribers[l+"-touchend"]),delete this.touchSubscribers[l+"-touchstart"],delete this.touchSubscribers[l+"-touchend"])}}initializeColumn(s){var o=s.definition;for(let l in this.eventMap)o[l]&&(this.subscriptionChanged(l,!0),this.columnSubscribers[l]||(this.columnSubscribers[l]=[]),this.columnSubscribers[l].push(s))}handle(s,o,l){this.dispatchEvent(s,o,l)}handleTouch(s,o,l,h){var _=this.touchWatchers[s];switch("column"===s&&(s="header"),o){case"start":_.tap=!0,clearTimeout(_.tapHold),_.tapHold=setTimeout(()=>{clearTimeout(_.tapHold),_.tapHold=null,_.tap=null,clearTimeout(_.tapDbl),_.tapDbl=null,this.dispatchEvent(s+"TapHold",l,h)},1e3);break;case"end":_.tap&&(_.tap=null,this.dispatchEvent(s+"Tap",l,h)),_.tapDbl?(clearTimeout(_.tapDbl),_.tapDbl=null,this.dispatchEvent(s+"DblTap",l,h)):_.tapDbl=setTimeout(()=>{clearTimeout(_.tapDbl),_.tapDbl=null},300),clearTimeout(_.tapHold),_.tapHold=null}}dispatchEvent(s,o,l){var _,h=l.getComponent();this.columnSubscribers[s]&&(l instanceof Li?_=l.column.definition[s]:l instanceof hs&&(_=l.definition[s]),_&&_(o,h)),this.dispatchExternal(s,o,h)}}return p.moduleName="interaction",p})();var Hm={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},Np={keyBlock:function(p){p.stopPropagation(),p.preventDefault()},scrollPageUp:function(p){var r=this.table.rowManager,s=r.scrollTop-r.element.clientHeight;p.preventDefault(),r.displayRowsCount&&(s>=0?r.element.scrollTop=s:r.scrollToRow(r.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(p){var r=this.table.rowManager,s=r.scrollTop+r.element.clientHeight,o=r.element.scrollHeight;p.preventDefault(),r.displayRowsCount&&(s<=o?r.element.scrollTop=s:r.scrollToRow(r.getDisplayRows()[r.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(p){var r=this.table.rowManager;p.preventDefault(),r.displayRowsCount&&r.scrollToRow(r.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(p){var r=this.table.rowManager;p.preventDefault(),r.displayRowsCount&&r.scrollToRow(r.getDisplayRows()[r.displayRowsCount-1]),this.table.element.focus()},navPrev:function(p){this.dispatch("keybinding-nav-prev",p)},navNext:function(p){this.dispatch("keybinding-nav-next",p)},navLeft:function(p){this.dispatch("keybinding-nav-left",p)},navRight:function(p){this.dispatch("keybinding-nav-right",p)},navUp:function(p){this.dispatch("keybinding-nav-up",p)},navDown:function(p){this.dispatch("keybinding-nav-down",p)},undo:function(p){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(p.preventDefault(),this.table.modules.history.undo()))},redo:function(p){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(p.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(p){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let Xf=(()=>{class p extends ks{constructor(s){super(s),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var s=this.table.options.keybindings,o={};if(this.watchKeys={},this.pressedKeys=[],!1!==s){for(let l in p.bindings)o[l]=p.bindings[l];if(Object.keys(s).length)for(let l in s)o[l]=s[l];this.mapBindings(o),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(s){for(let o in s)p.actions[o]?s[o]&&("object"!=typeof s[o]&&(s[o]=[s[o]]),s[o].forEach(l=>{this.mapBinding(o,l)})):console.warn("Key Binding Error - no such action:",o)}mapBinding(s,o){var l={action:p.actions[s],keys:[],ctrl:!1,shift:!1,meta:!1};o.toString().toLowerCase().split(" ").join("").split("+").forEach(_=>{switch(_){case"ctrl":l.ctrl=!0;break;case"shift":l.shift=!0;break;case"meta":l.meta=!0;break;default:_=parseInt(_),l.keys.push(_),this.watchKeys[_]||(this.watchKeys[_]=[]),this.watchKeys[_].push(l)}})}bindEvents(){var s=this;this.keyupBinding=function(o){var l=o.keyCode,h=s.watchKeys[l];h&&(s.pressedKeys.push(l),h.forEach(function(_){s.checkBinding(o,_)}))},this.keydownBinding=function(o){var l=o.keyCode;if(s.watchKeys[l]){var _=s.pressedKeys.indexOf(l);_>-1&&s.pressedKeys.splice(_,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(s,o){var l=!0;return s.ctrlKey==o.ctrl&&s.shiftKey==o.shift&&s.metaKey==o.meta&&(o.keys.forEach(h=>{-1==this.pressedKeys.indexOf(h)&&(l=!1)}),l&&o.action.call(this,s),!0)}}return p.moduleName="keybindings",p.bindings=Hm,p.actions=Np,p})(),Kf=(()=>{class p extends ks{constructor(s){super(s),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(s){(s.column.definition.contextMenu||s.column.definition.clickMenu)&&this.initializeCell(s)}initializeColumn(s){var o=s.definition;(o.headerContextMenu||o.headerClickMenu||o.headerMenu)&&this.initializeColumnHeader(s)}initializeColumnHeader(s){var o;s.definition.headerContextMenu&&(s.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,s,s.definition.headerContextMenu)),this.tapHold(s,s.definition.headerContextMenu)),s.definition.headerMenu&&((o=document.createElement("span")).classList.add("tabulator-header-menu-button"),o.innerHTML="&vellip;",o.addEventListener("click",l=>{l.stopPropagation(),l.preventDefault(),this.LoadMenuEvent(s,s.definition.headerMenu,l)}),s.titleElement.insertBefore(o,s.titleElement.firstChild))}LoadMenuEvent(s,o,l){o="function"==typeof o?o.call(this.table,s.getComponent(),l):o,this.loadMenu(l,s,o)}tapHold(s,o){var l=s.getElement(),h=null,_=!1;l.addEventListener("touchstart",C=>{clearTimeout(h),_=!1,h=setTimeout(()=>{clearTimeout(h),h=null,_=!0,this.LoadMenuEvent(s,o,C)},1e3)},{passive:!0}),l.addEventListener("touchend",C=>{clearTimeout(h),h=null,_&&C.preventDefault()})}initializeCell(s){s.column.definition.contextMenu&&(s.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,s,s.column.definition.contextMenu)),this.tapHold(s,s.column.definition.contextMenu)),s.column.definition.clickMenu&&s.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,s,s.column.definition.clickMenu))}initializeRow(s){this.table.options.rowContextMenu&&(s.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,s,this.table.options.rowContextMenu)),this.tapHold(s,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&s.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,s,this.table.options.rowClickMenu))}initializeGroup(s){this.table.options.groupContextMenu&&(s.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,s,this.table.options.groupContextMenu)),this.tapHold(s,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&s.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,s,this.table.options.groupClickMenu))}loadMenu(s,o,l,h){var _=!(s instanceof MouseEvent),C=document.createElement("div");if(C.classList.add("tabulator-menu"),_||s.preventDefault(),l&&l.length){if(!h){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}l.forEach(D=>{var L=document.createElement("div"),U=D.label,Z=D.disabled;D.separator?L.classList.add("tabulator-menu-separator"):(L.classList.add("tabulator-menu-item"),"function"==typeof U&&(U=U.call(this.table,o.getComponent())),U instanceof Node?L.appendChild(U):L.innerHTML=U,"function"==typeof Z&&(Z=Z.call(this.table,o.getComponent())),Z?(L.classList.add("tabulator-menu-item-disabled"),L.addEventListener("click",ue=>{ue.stopPropagation()})):D.menu&&D.menu.length?L.addEventListener("click",ue=>{ue.stopPropagation(),this.hideOldSubMenus(C),this.loadMenu(ue,o,D.menu,L)}):D.action&&L.addEventListener("click",ue=>{D.action(ue,o.getComponent())}),D.menu&&D.menu.length&&L.classList.add("tabulator-menu-item-submenu")),C.appendChild(L)}),C.addEventListener("click",D=>{this.hideMenu()}),this.menuElements.push(C),this.positionMenu(C,h,_,s)}}hideOldSubMenus(s){var o=this.menuElements.indexOf(s);if(o>-1)for(let h=this.menuElements.length-1;h>o;h--){var l=this.menuElements[h];l.parentNode&&l.parentNode.removeChild(l),this.menuElements.pop()}}positionMenu(s,o,l,h){var C,D,L,_=Math.max(document.body.offsetHeight,window.innerHeight);o?(C=(L=Ao.elOffset(o)).left+o.offsetWidth,D=L.top-1):(C=l?h.touches[0].pageX:h.pageX,D=l?h.touches[0].pageY:h.pageY,this.positionReversedX=!1),s.style.top=D+"px",s.style.left=C+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(s),D+s.offsetHeight>=_&&(s.style.top="",s.style.bottom=o?_-L.top-o.offsetHeight-1+"px":_-D+"px"),(C+s.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(s.style.left="",s.style.right=o?document.documentElement.offsetWidth-L.left+"px":document.documentElement.offsetWidth-C+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(s){27==s.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(s=>{s.parentNode&&s.parentNode.removeChild(s)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return p.moduleName="menu",p})(),$f=(()=>{class p extends ks{constructor(s){super(s),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var s=document.createElement("div");return s.classList.add("tabulator-col"),s.classList.add("tabulator-col-placeholder"),s}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(s){var h,o=this,l={};s.modules.frozen||(h=s.getElement(),l.mousemove=function(_){s.parent===o.moving.parent&&((o.touchMove?_.touches[0].pageX:_.pageX)-Ao.elOffset(h).left+o.table.columnManager.element.scrollLeft>s.getWidth()/2?(o.toCol!==s||!o.toColAfter)&&(h.parentNode.insertBefore(o.placeholderElement,h.nextSibling),o.moveColumn(s,!0)):(o.toCol!==s||o.toColAfter)&&(h.parentNode.insertBefore(o.placeholderElement,h),o.moveColumn(s,!1)))}.bind(o),h.addEventListener("mousedown",function(_){o.touchMove=!1,1===_.which&&(o.checkTimeout=setTimeout(function(){o.startMove(_,s)},o.checkPeriod))}),h.addEventListener("mouseup",function(_){1===_.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),o.bindTouchEvents(s)),s.modules.moveColumn=l}bindTouchEvents(s){var h,_,C,D,L,U,o=s.getElement(),l=!1;o.addEventListener("touchstart",Z=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,h=s.nextColumn(),C=h?h.getWidth()/2:0,_=s.prevColumn(),D=_?_.getWidth()/2:0,L=0,U=0,l=!1,this.startMove(Z,s)},this.checkPeriod)},{passive:!0}),o.addEventListener("touchmove",Z=>{var ue,we;this.moving&&(this.moveHover(Z),l||(l=Z.touches[0].pageX),(ue=Z.touches[0].pageX-l)>0?h&&ue-L>C&&(we=h)!==s&&(l=Z.touches[0].pageX,we.getElement().parentNode.insertBefore(this.placeholderElement,we.getElement().nextSibling),this.moveColumn(we,!0)):_&&-ue-U>D&&(we=_)!==s&&(l=Z.touches[0].pageX,we.getElement().parentNode.insertBefore(this.placeholderElement,we.getElement()),this.moveColumn(we,!1)),we&&(h=we.nextColumn(),L=C,C=h?h.getWidth()/2:0,_=we.prevColumn(),U=D,D=_?_.getWidth()/2:0))},{passive:!0}),o.addEventListener("touchend",Z=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(Z)})}startMove(s,o){var l=o.getElement(),h=this.table.columnManager.getElement(),_=this.table.columnManager.getHeadersElement();this.moving=o,this.startX=(this.touchMove?s.touches[0].pageX:s.pageX)-Ao.elOffset(l).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=o.getWidth()+"px",this.placeholderElement.style.height=o.getHeight()+"px",l.parentNode.insertBefore(this.placeholderElement,l),l.parentNode.removeChild(l),this.hoverElement=l.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=h.clientHeight-_.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(s)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(s){s.modules.moveColumn.mousemove&&s.getElement().addEventListener("mousemove",s.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(s){s.modules.moveColumn.mousemove&&s.getElement().removeEventListener("mousemove",s.modules.moveColumn.mousemove)})}moveColumn(s,o){var l=this.moving.getCells();this.toCol=s,this.toColAfter=o,o?s.getCells().forEach(function(h,_){var C=h.getElement(!0);C.parentNode&&l[_]&&C.parentNode.insertBefore(l[_].getElement(),C.nextSibling)}):s.getCells().forEach(function(h,_){var C=h.getElement(!0);C.parentNode&&l[_]&&C.parentNode.insertBefore(l[_].getElement(),C)})}endMove(s){(1===s.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(s){var _,o=this.table.columnManager.getElement(),l=o.scrollLeft,h=(this.touchMove?s.touches[0].pageX:s.pageX)-Ao.elOffset(o).left+l;this.hoverElement.style.left=h-this.startX+"px",h-l<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{_=Math.max(0,l-5),this.table.rowManager.getElement().scrollLeft=_,this.autoScrollTimeout=!1},1))),l+o.clientWidth-h<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{_=Math.min(o.clientWidth,l+5),this.table.rowManager.getElement().scrollLeft=_,this.autoScrollTimeout=!1},1)))}}return p.moduleName="moveColumn",p})();class wd extends ks{constructor(r){super(r),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var r=document.createElement("div");return r.classList.add("tabulator-row"),r.classList.add("tabulator-row-placeholder"),r}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(r){var s=this,o={};o.mouseup=function(l){s.tableRowDrop(l,row)}.bind(s),o.mousemove=function(l){if(l.pageY-Ao.elOffset(r.element).top+s.table.rowManager.element.scrollTop>r.getHeight()/2)s.toRow===r&&s.toRowAfter||((h=r.getElement()).parentNode.insertBefore(s.placeholderElement,h.nextSibling),s.moveRow(r,!0));else if(s.toRow!==r||s.toRowAfter){var h;(h=r.getElement()).previousSibling&&(h.parentNode.insertBefore(s.placeholderElement,h),s.moveRow(r,!1))}}.bind(s),r.modules.moveRow=o}initializeRow(r){var l,s=this,o={};o.mouseup=function(h){s.tableRowDrop(h,r)}.bind(s),o.mousemove=function(h){var _=r.getElement();h.pageY-Ao.elOffset(_).top+s.table.rowManager.element.scrollTop>r.getHeight()/2?(s.toRow!==r||!s.toRowAfter)&&(_.parentNode.insertBefore(s.placeholderElement,_.nextSibling),s.moveRow(r,!0)):(s.toRow!==r||s.toRowAfter)&&(_.parentNode.insertBefore(s.placeholderElement,_),s.moveRow(r,!1))}.bind(s),this.hasHandle||((l=r.getElement()).addEventListener("mousedown",function(h){1===h.which&&(s.checkTimeout=setTimeout(function(){s.startMove(h,r)},s.checkPeriod))}),l.addEventListener("mouseup",function(h){1===h.which&&s.checkTimeout&&clearTimeout(s.checkTimeout)}),this.bindTouchEvents(r,r.getElement())),r.modules.moveRow=o}initializeColumn(r){r.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(r){if(r.column.definition.rowHandle&&!1!==this.table.options.movableRows){var s=this,o=r.getElement(!0);o.addEventListener("mousedown",function(l){1===l.which&&(s.checkTimeout=setTimeout(function(){s.startMove(l,r.row)},s.checkPeriod))}),o.addEventListener("mouseup",function(l){1===l.which&&s.checkTimeout&&clearTimeout(s.checkTimeout)}),this.bindTouchEvents(r.row,o)}}bindTouchEvents(r,s){var l,h,_,C,D,L,o=!1;s.addEventListener("touchstart",U=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,l=r.nextRow(),_=l?l.getHeight()/2:0,h=r.prevRow(),C=h?h.getHeight()/2:0,D=0,L=0,o=!1,this.startMove(U,r)},this.checkPeriod)},{passive:!0}),s.addEventListener("touchmove",U=>{var Z,ue;this.moving&&(U.preventDefault(),this.moveHover(U),o||(o=U.touches[0].pageY),(Z=U.touches[0].pageY-o)>0?l&&Z-D>_&&(ue=l)!==r&&(o=U.touches[0].pageY,ue.getElement().parentNode.insertBefore(this.placeholderElement,ue.getElement().nextSibling),this.moveRow(ue,!0)):h&&-Z-L>C&&(ue=h)!==r&&(o=U.touches[0].pageY,ue.getElement().parentNode.insertBefore(this.placeholderElement,ue.getElement()),this.moveRow(ue,!1)),ue&&(l=ue.nextRow(),D=_,_=l?l.getHeight()/2:0,h=ue.prevRow(),L=C,C=h?h.getHeight()/2:0))}),s.addEventListener("touchend",U=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(U),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(r=>{("row"===r.type||"group"===r.type)&&r.modules.moveRow&&r.modules.moveRow.mousemove&&r.getElement().addEventListener("mousemove",r.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(r=>{("row"===r.type||"group"===r.type)&&r.modules.moveRow&&r.modules.moveRow.mousemove&&r.getElement().removeEventListener("mousemove",r.modules.moveRow.mousemove)})}startMove(r,s){var o=s.getElement();this.setStartPosition(r,s),this.moving=s,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=s.getWidth()+"px",this.placeholderElement.style.height=s.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(s)):(o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o)),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(r)}setStartPosition(r,s){var h,_,o=this.touchMove?r.touches[0].pageX:r.pageX,l=this.touchMove?r.touches[0].pageY:r.pageY;h=s.getElement(),this.connection?(_=h.getBoundingClientRect(),this.startX=_.left-o+window.pageXOffset,this.startY=_.top-l+window.pageYOffset):this.startY=l-h.getBoundingClientRect().top}endMove(r){(!r||1===r.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(r,s){this.toRow=r,this.toRowAfter=s}moveHover(r){this.connection?this.moveHoverConnections.call(this,r):this.moveHoverTable.call(this,r)}moveHoverTable(r){var s=this.table.rowManager.getElement(),o=s.scrollTop,l=(this.touchMove?r.touches[0].pageY:r.pageY)-s.getBoundingClientRect().top+o;this.hoverElement.style.top=l-this.startY+"px"}moveHoverConnections(r){this.hoverElement.style.left=this.startX+(this.touchMove?r.touches[0].pageX:r.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?r.touches[0].pageY:r.pageY)+"px"}elementRowDrop(r,s,o){this.dispatchExternal("movableRowsElementDrop",r,s,!!o&&o.getComponent())}connectToTables(r){var s;this.connectionSelectorsTables&&(s=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",s),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:r})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(o=>{"string"==typeof o?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(o))):this.connectionElements.push(o)}),this.connectionElements.forEach(o=>{var l=h=>{this.elementRowDrop(h,o,this.moving)};o.addEventListener("mouseup",l),o.tabulatorElementDropEvent=l,o.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var r;this.connectionSelectorsTables&&(r=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",r),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(s=>{s.classList.remove("tabulator-movingrow-receiving"),s.removeEventListener("mouseup",s.tabulatorElementDropEvent),delete s.tabulatorElementDropEvent})}connect(r,s){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=r,this.connectedRow=s,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&o.modules.moveRow&&o.modules.moveRow.mouseup&&o.getElement().addEventListener("mouseup",o.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",s,r),!0)}disconnect(r){r===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(s=>{"row"===s.type&&s.modules.moveRow&&s.modules.moveRow.mouseup&&s.getElement().removeEventListener("mouseup",s.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",r)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(r,s,o){var l=!1;if(o){switch(typeof this.table.options.movableRowsSender){case"string":l=this.senders[this.table.options.movableRowsSender];break;case"function":l=this.table.options.movableRowsSender}l?l.call(this,this.moving.getComponent(),s?s.getComponent():void 0,r):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),s?s.getComponent():void 0,r)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),s?s.getComponent():void 0,r);this.endMove()}tableRowDrop(r,s){var o=!1,l=!1;switch(r.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":o=this.receivers[this.table.options.movableRowsReceiver];break;case"function":o=this.table.options.movableRowsReceiver}o?l=o.call(this,this.connectedRow.getComponent(),s?s.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(l?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),s?s.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:s,success:l})}commsReceived(r,s,o){switch(s){case"connect":return this.connect(r,o.row);case"disconnect":return this.disconnect(r);case"dropcomplete":return this.dropComplete(r,o.row,o.success)}}}wd.prototype.receivers={insert:function(p,r,s){return this.table.addRow(p.getData(),void 0,r),!0},add:function(p,r,s){return this.table.addRow(p.getData()),!0},update:function(p,r,s){return!!r&&(r.update(p.getData()),!0)},replace:function(p,r,s){return!!r&&(this.table.addRow(p.getData(),void 0,r),r.delete(),!0)}},wd.prototype.senders={delete:function(p,r,s){p.delete()}},wd.moduleName="moveRow";var Jf={};let Zf=(()=>{class p extends ks{constructor(s){super(s),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(s,o,l){return this.transformRow(o,"data",l)}initializeColumn(s){var o=!1,l={};this.allowedTypes.forEach(h=>{var C,_="mutator"+(h.charAt(0).toUpperCase()+h.slice(1));s.definition[_]&&(C=this.lookupMutator(s.definition[_]))&&(o=!0,l[_]={mutator:C,params:s.definition[_+"Params"]||{}})}),o&&(s.modules.mutate=l)}lookupMutator(s){var o=!1;switch(typeof s){case"string":p.mutators[s]?o=p.mutators[s]:console.warn("Mutator Error - No such mutator found, ignoring: ",s);break;case"function":o=s}return o}transformRow(s,o,l){var _,h="mutator"+(o.charAt(0).toUpperCase()+o.slice(1));return this.enabled&&this.table.columnManager.traverse(C=>{var D,L,U;C.modules.mutate&&(D=C.modules.mutate[h]||C.modules.mutate.mutator||!1)&&(_=C.getFieldValue(void 0!==l?l:s),("data"==o||void 0!==_)&&(U=C.getComponent(),L="function"==typeof D.params?D.params(_,s,o,U):D.params,C.setFieldValue(s,D.mutator(_,s,o,L,U))))}),s}transformCell(s,o){if(s.column.modules.mutate){var l=s.column.modules.mutate.mutatorEdit||s.column.modules.mutate.mutator||!1,h={};if(l)return h=Object.assign(h,s.row.getData()),s.column.setFieldValue(h,o),l.mutator(o,h,"edit",l.params,s.getComponent())}return o}enable(){this.enabled=!0}disable(){this.enabled=!1}}return p.moduleName="mutator",p.mutators=Jf,p})(),vh=(()=>{class p extends ks{constructor(s){super(s),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(s,o){var _,l=this.table.rowManager,h=l.getDisplayRows();return o?h.length?_=h[0]:l.activeRows.length&&(_=l.activeRows[l.activeRows.length-1],o=!1):h.length&&(_=h[h.length-1],o=!(h.length<this.size)),{index:_,top:o}}calculatePageSizes(){var s,o;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((s=document.createElement("div")).classList.add("tabulator-row"),s.style.visibility="hidden",(o=document.createElement("div")).classList.add("tabulator-cell"),o.innerHTML="Page Row Test",s.appendChild(o),this.table.rowManager.getTableElement().appendChild(s),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/s.offsetHeight),this.table.rowManager.getTableElement().removeChild(s)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(s,o,l,h){return this.initialLoad||(this.progressiveLoad&&!l||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),h.page=this.page,this.size&&(h.size=this.size),h}userSetPageToRow(s){return this.table.options.pagination&&(s=this.rowManager.findRow(s))?this.setPageToRow(s):Promise.reject()}userSetPageSize(s){return!!this.table.options.pagination&&(this.setPageSize(s),this.setPage(1))}scrollVertical(s,o){var l;!o&&!this.table.dataLoader.loading&&(l=this.table.rowManager.getElement()).scrollHeight-l.clientHeight-s<(this.table.options.progressiveLoadScrollMargin||2*l.clientHeight)&&this.nextPage()}restOnRenderBefore(s,o){return o||"local"===this.mode&&this.reset(),s}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var s;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(s=document.createElement("button")).classList.add("tabulator-page"),s.setAttribute("type","button"),s.setAttribute("role","button"),s.setAttribute("aria-label",""),s.setAttribute("title",""),this.firstBut=s.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=s.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=s.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=s.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var s=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=s=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&s.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){s=[];for(let o=1;o<5;o++)s.push(this.size*o);this.pageSizes=s}else s=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);s.forEach(o=>{var l=document.createElement("option");l.value=o,!0===o?this.langBind("pagination|all",function(h){l.innerHTML=h}):l.innerHTML=o,this.pageSizeSelect.appendChild(l)}),this.pageSizeSelect.value=this.size}}initializePaginator(s){var o;s||(this.langBind("pagination|first",l=>{this.firstBut.innerHTML=l}),this.langBind("pagination|first_title",l=>{this.firstBut.setAttribute("aria-label",l),this.firstBut.setAttribute("title",l)}),this.langBind("pagination|prev",l=>{this.prevBut.innerHTML=l}),this.langBind("pagination|prev_title",l=>{this.prevBut.setAttribute("aria-label",l),this.prevBut.setAttribute("title",l)}),this.langBind("pagination|next",l=>{this.nextBut.innerHTML=l}),this.langBind("pagination|next_title",l=>{this.nextBut.setAttribute("aria-label",l),this.nextBut.setAttribute("title",l)}),this.langBind("pagination|last",l=>{this.lastBut.innerHTML=l}),this.langBind("pagination|last_title",l=>{this.lastBut.setAttribute("aria-label",l),this.lastBut.setAttribute("title",l)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(o=document.createElement("label"),this.langBind("pagination|page_size",l=>{this.pageSizeSelect.setAttribute("aria-label",l),this.pageSizeSelect.setAttribute("title",l),o.innerHTML=l}),this.element.appendChild(o),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",l=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!s&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(s){this.initializePaginator(!0),this.mode="progressive_"+s,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(s){this.displayIndex=s}getDisplayIndex(){return this.displayIndex}setMaxRows(s){this.max=s?!0===this.size?1:Math.ceil(s/this.size):1,this.page>this.max&&(this.page=this.max)}reset(s){this.initialLoad||("local"==this.mode||s)&&(this.page=1)}setMaxPage(s){s=parseInt(s),this.max=s||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(s){switch(s){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(s=parseInt(s))>0&&s<=this.max||"local"!==this.mode?(this.page=s,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",s),Promise.reject())}setPageToRow(s){var l=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(s);if(l>-1){var h=!0===this.size?1:Math.ceil((l+1)/this.size);return this.setPage(h)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(s){!0!==s&&(s=parseInt(s)),s>0&&(this.size=s),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let s=Math.floor((this.count-1)/2),o=Math.ceil((this.count-1)/2),l=this.max-this.page+s+1<this.count?this.max-this.count+1:Math.max(this.page-s,1),h=this.page<=o?Math.min(this.count,this.max):Math.min(this.page+o,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let _=l;_<=h;_++)_>0&&_<=this.max&&this.pagesElement.appendChild(this._generatePageButton(_));this.footerRedraw()}_generatePageButton(s){var o=document.createElement("button");return o.classList.add("tabulator-page"),s==this.page&&o.classList.add("active"),o.setAttribute("type","button"),o.setAttribute("role","button"),this.langBind("pagination|page_title",l=>{o.setAttribute("aria-label",l+" "+s),o.setAttribute("title",l+" "+s)}),o.setAttribute("data-page",s),o.textContent=s,o.addEventListener("click",l=>{this.setPage(s)}),o}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(s){return this.size}getMode(){return this.mode}getRows(s){var o,l,h;if("local"==this.mode){o=[],this.setMaxRows(s.length),!0===this.size?(l=0,h=s.length):h=(l=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let _=l;_<h;_++)s[_]&&o.push(s[_]);return o}return this._setPageButtons(),s.slice(0)}trigger(){var s;switch(this.mode){case"local":return s=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(s),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(s){if(void 0===s.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),s.data){if(this.max=parseInt(s.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(s.data,!1,1==this.page):this.table.rowManager.addRows(s.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":s=this.table.rowManager.getData().concat(s.data),this.table.rowManager.setData(s,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return s.data}footerRedraw(){var s=this.table.footerManager.element;Math.ceil(s.clientWidth)-s.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(s.clientWidth)-s.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return p.moduleName="page",p})();var Kh={local:function(p,r){var s=localStorage.getItem(p+"-"+r);return!!s&&JSON.parse(s)},cookie:function(p,r){var h,_,s=document.cookie,o=p+"-"+r,l=s.indexOf(o+"=");return l>-1&&((h=(s=s.substr(l)).indexOf(";"))>-1&&(s=s.substr(0,h)),_=s.replace(o+"=","")),!!_&&JSON.parse(_)}},qf={local:function(p,r,s){localStorage.setItem(p+"-"+r,JSON.stringify(s))},cookie:function(p,r,s){var o=new Date;o.setDate(o.getDate()+1e4),document.cookie=p+"-"+r+"="+JSON.stringify(s)+"; expires="+o.toUTCString()}};let $h=(()=>{class p extends ks{constructor(s){super(s),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var s="_tabulator_test";try{return window.localStorage.setItem(s,s),window.localStorage.removeItem(s),!0}catch(o){return!1}}initialize(){if(this.table.options.persistence){var l,s=this.table.options.persistenceMode,o=this.table.options.persistenceID;this.mode=!0!==s?s:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:p.readers[this.table.options.persistenceReaderFunc]?this.readFunc=p.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):p.readers[this.mode]?this.readFunc=p.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:p.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=p.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):p.writers[this.mode]?this.writeFunc=p.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(o||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(l=this.retreiveData("page"))&&(void 0!==l.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=l.paginationSize),void 0!==l.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=l.paginationInitialPage)),this.config.group&&(l=this.retreiveData("group"))&&(void 0!==l.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=l.groupBy),void 0!==l.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=l.groupStartOpen),void 0!==l.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=l.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(s){this.config[s]&&this.save(s)}tableBuilt(){var o,l;this.config.sort&&(o=this.load("sort"))&&(this.table.initialSort=o),this.config.filter&&(l=this.load("filter"))&&(this.table.initialFilter=l)}tableRedraw(s){s&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(s){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,s)),!0}initializeColumn(s){var o;this.config.columns&&(this.defWatcherBlock=!0,o=s.getDefinition(),(!0===this.config.columns?Object.keys(o):this.config.columns).forEach(h=>{var _=Object.getOwnPropertyDescriptor(o,h),C=o[h];_&&Object.defineProperty(o,h,{set:function(D){C=D,this.defWatcherBlock||this.save("columns"),_.set&&_.set(D)},get:function(){return _.get&&_.get(),C}})}),this.defWatcherBlock=!1)}load(s,o){var l=this.retreiveData(s);return o&&(l=l?this.mergeDefinition(o,l):o),l}retreiveData(s){return!!this.readFunc&&this.readFunc(this.id,s)}mergeDefinition(s,o){var l=[];return(o=o||[]).forEach((h,_)=>{var D,C=this._findColumn(s,h);C&&(!0===this.config.columns||null==this.config.columns?(D=Object.keys(C)).push("width"):D=this.config.columns,D.forEach(L=>{"columns"!==L&&void 0!==h[L]&&(C[L]=h[L])}),C.columns&&(C.columns=this.mergeDefinition(C.columns,h.columns)),l.push(C))}),s.forEach((h,_)=>{this._findColumn(o,h)||(l.length>_?l.splice(_,0,h):l.push(h))}),l}_findColumn(s,o){var l=o.columns?"group":o.field?"field":"object";return s.find(function(h){switch(l){case"group":return h.title===o.title&&h.columns.length===o.columns.length;case"field":return h.field===o.field;case"object":return h===o}})}save(s){var o={};switch(s){case"columns":o=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":o=this.table.modules.filter.getFilters();break;case"sort":o=this.validateSorters(this.table.modules.sort.getSort());break;case"group":o=this.getGroupConfig();break;case"page":o=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,s,o)}validateSorters(s){return s.forEach(function(o){o.column=o.field,delete o.field}),s}getGroupConfig(){var s={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(s.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(s.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(s.groupHeader=this.table.options.groupHeader)),s}getPageConfig(){var s={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(s.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(s.paginationInitialPage=this.table.modules.page.getPage())),s}parseColumns(s){var o=[],l=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return s.forEach(h=>{var D,_={},C=h.getDefinition();h.isGroup?(_.title=C.title,_.columns=this.parseColumns(h.getColumns())):(_.field=h.getField(),!0===this.config.columns||null==this.config.columns?(D=Object.keys(C)).push("width"):D=this.config.columns,D.forEach(L=>{switch(L){case"width":_.width=h.getWidth();break;case"visible":_.visible=h.visible;break;default:"function"!=typeof C[L]&&-1===l.indexOf(L)&&(_[L]=C[L])}})),o.push(_)}),o}}return p.moduleName="persistence",p.readers=Kh,p.writers=qf,p})(),Jh=(()=>{class p extends ks{constructor(s){super(s),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(s,o,l){var U,Z,h=window.scrollX,_=window.scrollY,C=document.createElement("div"),D=document.createElement("div"),L=this.table.modules.export.genereateTable(void 0!==l?l:this.table.options.printConfig,void 0!==o?o:this.table.options.printStyled,s||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(C.classList.add("tabulator-print-header"),"string"==typeof(U="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?C.innerHTML=U:C.appendChild(U),this.element.appendChild(C)),this.element.appendChild(L),this.table.options.printFooter&&(D.classList.add("tabulator-print-footer"),"string"==typeof(Z="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?D.innerHTML=Z:D.appendChild(Z),this.element.appendChild(D)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,L),window.print(),this.cleanup(),window.scrollTo(h,_),this.manualBlock=!1}}return p.moduleName="print",p})(),Fp=(()=>{class p extends ks{constructor(s){super(s),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(s){var l,o=this;this.currentVersion++,l=this.currentVersion,this.unwatchData(),this.data=s,this.origFuncs.push=s.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var h=Array.from(arguments);return!o.blocked&&l===o.currentVersion&&h.forEach(_=>{o.table.rowManager.addRowActual(_,!1)}),o.origFuncs.push.apply(s,arguments)}}),this.origFuncs.unshift=s.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var h=Array.from(arguments);return!o.blocked&&l===o.currentVersion&&h.forEach(_=>{o.table.rowManager.addRowActual(_,!0)}),o.origFuncs.unshift.apply(s,arguments)}}),this.origFuncs.shift=s.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var h;return!o.blocked&&l===o.currentVersion&&o.data.length&&(h=o.table.rowManager.getRowFromDataObject(o.data[0]))&&h.deleteActual(),o.origFuncs.shift.call(s)}}),this.origFuncs.pop=s.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var h;return!o.blocked&&l===o.currentVersion&&o.data.length&&(h=o.table.rowManager.getRowFromDataObject(o.data[o.data.length-1]))&&h.deleteActual(),o.origFuncs.pop.call(s)}}),this.origFuncs.splice=s.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var L,h=Array.from(arguments),_=h[0]<0?s.length+h[0]:h[0],C=h[1],D=!!h[2]&&h.slice(2);if(!o.blocked&&l===o.currentVersion){if(D&&((L=!!s[_]&&o.table.rowManager.getRowFromDataObject(s[_]))?D.forEach(Z=>{o.table.rowManager.addRowActual(Z,!0,L,!0)}):(D=D.slice().reverse()).forEach(Z=>{o.table.rowManager.addRowActual(Z,!0,!1,!0)})),0!==C){var U=s.slice(_,void 0===h[1]?h[1]:_+C);U.forEach((Z,ue)=>{var we=o.table.rowManager.getRowFromDataObject(Z);we&&we.deleteActual(ue!==U.length-1)})}(D||0!==C)&&o.table.rowManager.reRenderInPosition()}return o.origFuncs.splice.apply(s,arguments)}})}unwatchData(){if(!1!==this.data)for(var s in this.origFuncs)Object.defineProperty(this.data,s,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(s){var o=s.getData();for(var l in this.blocked=!0,o)this.watchKey(s,o,l);this.table.options.dataTree&&this.watchTreeChildren(s),this.blocked=!1}watchTreeChildren(s){var o=s.getData()[this.table.options.dataTreeChildField],l={};function h(){this.table.modules.dataTree.initializeRow(s),this.table.modules.dataTree.layoutRow(s),this.table.rowManager.refreshActiveData("tree",!1,!0)}o&&(l.push=o.push,Object.defineProperty(o,"push",{enumerable:!1,configurable:!0,value:()=>{var _=l.push.apply(o,arguments);return h(),_}}),l.unshift=o.unshift,Object.defineProperty(o,"unshift",{enumerable:!1,configurable:!0,value:()=>{var _=l.unshift.apply(o,arguments);return h(),_}}),l.shift=o.shift,Object.defineProperty(o,"shift",{enumerable:!1,configurable:!0,value:()=>{var _=l.shift.call(o);return h(),_}}),l.pop=o.pop,Object.defineProperty(o,"pop",{enumerable:!1,configurable:!0,value:()=>{var _=l.pop.call(o);return h(),_}}),l.splice=o.splice,Object.defineProperty(o,"splice",{enumerable:!1,configurable:!0,value:()=>{var _=l.splice.apply(o,arguments);return h(),_}}))}watchKey(s,o,l){var h=Object.getOwnPropertyDescriptor(o,l),_=o[l],C=this.currentVersion;Object.defineProperty(o,l,{set:D=>{if(_=D,!this.blocked&&C===this.currentVersion){var L={};L[l]=D,s.updateData(L)}h.set&&h.set(D)},get:()=>(h.get&&h.get(),_)})}unwatchRow(s){var o=s.getData();for(var l in o)Object.defineProperty(o,l,{value:o[l]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return p.moduleName="reactiveData",p})(),Qf=(()=>{class p extends ks{constructor(s){super(s),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(s){"row"===s.row.type&&this.initializeColumn("cell",s.column,s.element)}layoutColumnHeader(s){this.initializeColumn("header",s,s.element)}initializeColumn(s,o,l){var h=this,C=o.definition.resizable;if("header"===s&&(o.modules.resize={variableHeight:"textarea"==o.definition.formatter||o.definition.variableHeight}),!0===C||C==s){var D=document.createElement("div");D.className="tabulator-col-resize-handle";var L=document.createElement("div");L.className="tabulator-col-resize-handle prev",D.addEventListener("click",function(ue){ue.stopPropagation()});var U=function(ue){var we=o.getLastColumn();we&&h._checkResizability(we)&&(h.startColumn=o,h._mouseDown(ue,we,D))};D.addEventListener("mousedown",U),D.addEventListener("touchstart",U,{passive:!0}),D.addEventListener("dblclick",function(ue){var we=o.getLastColumn();we&&h._checkResizability(we)&&(ue.stopPropagation(),we.reinitializeWidth(!0))}),L.addEventListener("click",function(ue){ue.stopPropagation()});var Z=function(ue){var we,Ze,ot;(we=o.getFirstColumn())&&(ot=(Ze=h.table.columnManager.findColumnIndex(we))>0&&h.table.columnManager.getColumnByIndex(Ze-1))&&h._checkResizability(ot)&&(h.startColumn=o,h._mouseDown(ue,ot,L))};L.addEventListener("mousedown",Z),L.addEventListener("touchstart",Z,{passive:!0}),L.addEventListener("dblclick",function(ue){var we,Ze,ot;(we=o.getFirstColumn())&&(ot=(Ze=h.table.columnManager.findColumnIndex(we))>0&&h.table.columnManager.getColumnByIndex(Ze-1))&&h._checkResizability(ot)&&(ue.stopPropagation(),ot.reinitializeWidth(!0))}),l.appendChild(D),l.appendChild(L)}}_checkResizability(s){return s.definition.resizable}_mouseDown(s,o,l){var h=this;function _(D){o.setWidth(h.table.rtl?h.startWidth-((void 0===D.screenX?D.touches[0].screenX:D.screenX)-h.startX):h.startWidth+((void 0===D.screenX?D.touches[0].screenX:D.screenX)-h.startX)),h.table.columnManager.renderer.rerenderColumns(!0),!h.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights()}function C(D){h.startColumn.modules.edit&&(h.startColumn.modules.edit.blocked=!1),h.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights(),document.body.removeEventListener("mouseup",C),document.body.removeEventListener("mousemove",_),l.removeEventListener("touchmove",_),l.removeEventListener("touchend",C),h.table.element.classList.remove("tabulator-block-select"),h.dispatch("column-resized",o),h.table.externalEvents.dispatch("columnResized",o.getComponent())}h.table.element.classList.add("tabulator-block-select"),s.stopPropagation(),h.startColumn.modules.edit&&(h.startColumn.modules.edit.blocked=!0),h.startX=void 0===s.screenX?s.touches[0].screenX:s.screenX,h.startWidth=o.getWidth(),document.body.addEventListener("mousemove",_),document.body.addEventListener("mouseup",C),l.addEventListener("touchmove",_,{passive:!0}),l.addEventListener("touchend",C)}}return p.moduleName="resizeColumns",p})(),eg=(()=>{class p extends ks{constructor(s){super(s),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(s){var o=this,l=s.getElement(),h=document.createElement("div");h.className="tabulator-row-resize-handle";var _=document.createElement("div");_.className="tabulator-row-resize-handle prev",h.addEventListener("click",function(L){L.stopPropagation()});var C=function(L){o.startRow=s,o._mouseDown(L,s,h)};h.addEventListener("mousedown",C),h.addEventListener("touchstart",C,{passive:!0}),_.addEventListener("click",function(L){L.stopPropagation()});var D=function(L){var U=o.table.rowManager.prevDisplayRow(s);U&&(o.startRow=U,o._mouseDown(L,U,_))};_.addEventListener("mousedown",D),_.addEventListener("touchstart",D,{passive:!0}),l.appendChild(h),l.appendChild(_)}_mouseDown(s,o,l){var h=this;function _(D){o.setHeight(h.startHeight+((void 0===D.screenY?D.touches[0].screenY:D.screenY)-h.startY))}function C(D){document.body.removeEventListener("mouseup",_),document.body.removeEventListener("mousemove",_),l.removeEventListener("touchmove",_),l.removeEventListener("touchend",C),h.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",o.getComponent())}h.table.element.classList.add("tabulator-block-select"),s.stopPropagation(),h.startY=void 0===s.screenY?s.touches[0].screenY:s.screenY,h.startHeight=o.getHeight(),document.body.addEventListener("mousemove",_),document.body.addEventListener("mouseup",C),l.addEventListener("touchmove",_,{passive:!0}),l.addEventListener("touchend",C)}}return p.moduleName="resizeRows",p})(),Zh=(()=>{class p extends ks{constructor(s){super(s),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var o,s=this.table;this.tableHeight=s.element.clientHeight,this.tableWidth=s.element.clientWidth,s.element.parentNode&&(this.containerHeight=s.element.parentNode.clientHeight,this.containerWidth=s.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===s.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(l=>{if(!s.browserMobile||s.browserMobile&&!s.modules.edit.currentCell){var h=Math.floor(l[0].contentRect.height),_=Math.floor(l[0].contentRect.width);(this.tableHeight!=h||this.tableWidth!=_)&&(this.tableHeight=h,this.tableWidth=_,s.element.parentNode&&(this.containerHeight=s.element.parentNode.clientHeight,this.containerWidth=s.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),s.redraw())}}),this.observer.observe(s.element),o=window.getComputedStyle(s.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(o.getPropertyValue("max-height")||o.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(l=>{if(!s.browserMobile||s.browserMobile&&!s.modules.edit.currentCell){var h=Math.floor(l[0].contentRect.height),_=Math.floor(l[0].contentRect.width);(this.containerHeight!=h||this.containerWidth!=_)&&(this.containerHeight=h,this.containerWidth=_,this.tableHeight=s.element.clientHeight,this.tableWidth=s.element.clientWidth),s.columnManager.renderer.rerenderColumns(!0),s.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!s.browserMobile||s.browserMobile&&!s.modules.edit.currentCell)&&(s.columnManager.renderer.rerenderColumns(!0),s.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return p.moduleName="resizeTable",p})(),Vm=(()=>{class p extends ks{constructor(s){super(s),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(s){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(s||this.update())}initializeResponsivity(){var s=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(o,l){o.modules.responsive&&o.modules.responsive.order&&o.modules.responsive.visible&&(o.modules.responsive.index=l,s.push(o),!o.visible&&"collapse"===self.mode&&self.hiddenColumns.push(o))}),s=(s=s.reverse()).sort(function(o,l){return l.modules.responsive.order-o.modules.responsive.order||l.modules.responsive.index-o.modules.responsive.index}),this.columns=s,"collapse"===this.mode&&this.generateCollapsedContent();for(let o of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==o.definition.formatter){this.collapseHandleColumn=o;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(s){var o=s.getDefinition();s.modules.responsive={order:void 0===o.responsive?1:o.responsive,visible:!1!==o.visible}}initializeRow(s){var o;"calc"!==s.type&&((o=document.createElement("div")).classList.add("tabulator-responsive-collapse"),s.modules.responsiveLayout={element:o,open:this.collapseStartOpen},this.collapseStartOpen||(o.style.display="none"))}layoutRow(s){var o=s.getElement();s.modules.responsiveLayout&&(o.appendChild(s.modules.responsiveLayout.element),this.generateCollapsedRowContent(s))}updateColumnVisibility(s,o){!o&&s.modules.responsive&&(s.modules.responsive.visible=s.visible,this.initialize())}hideColumn(s){var o=this.hiddenColumns.length;s.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(s),this.generateCollapsedContent(),this.collapseHandleColumn&&!o&&this.collapseHandleColumn.show())}showColumn(s){var o;s.show(!1,!0),s.setWidth(s.getWidth()),"collapse"===this.mode&&((o=this.hiddenColumns.indexOf(s))>-1&&this.hiddenColumns.splice(o,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var s=this,o=!0;o;){let l="fitColumns"==s.table.modules.layout.getMode()?s.table.columnManager.getFlexBaseWidth():s.table.columnManager.getWidth(),h=(s.table.options.headerVisible?s.table.columnManager.element.clientWidth:s.table.element.clientWidth)-l;if(h<0){let _=s.columns[s.index];_?(s.hideColumn(_),s.index++):o=!1}else{let _=s.columns[s.index-1];_&&h>0&&h>=_.getWidth()?(s.showColumn(_),s.index--):o=!1}s.table.rowManager.activeRowsCount||s.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var s=this;this.table.rowManager.getDisplayRows().forEach(function(l){s.generateCollapsedRowContent(l)})}generateCollapsedRowContent(s){var o,l;if(s.modules.responsiveLayout){for(o=s.modules.responsiveLayout.element;o.firstChild;)o.removeChild(o.firstChild);(l=this.collapseFormatter(this.generateCollapsedRowData(s)))&&o.appendChild(l)}}generateCollapsedRowData(s){var _,o=this,l=s.getData(),h=[];return this.hiddenColumns.forEach(function(C){var D=C.getFieldValue(l);C.definition.title&&C.field&&(C.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters?(_={value:!1,data:{},getValue:function(){return D},getData:function(){return l},getElement:function(){return document.createElement("div")},getRow:function(){return s.getComponent()},getColumn:function(){return C.getComponent()}},h.push({field:C.field,title:C.definition.title,value:C.modules.format.formatter.call(o.table.modules.format,_,C.modules.format.params,function(U){U()})})):h.push({field:C.field,title:C.definition.title,value:D}))}),h}formatCollapsedData(s){var o=document.createElement("table");return s.forEach(function(l){var D,h=document.createElement("tr"),_=document.createElement("td"),C=document.createElement("td"),L=document.createElement("strong");_.appendChild(L),this.langBind("columns|"+l.field,function(U){L.innerText=U||l.title}),l.value instanceof Node?((D=document.createElement("div")).appendChild(l.value),C.appendChild(D)):C.innerHTML=l.value,h.appendChild(_),h.appendChild(C),o.appendChild(h)},this),Object.keys(s).length?o:""}}return p.moduleName="responsiveLayout",p})(),Bp=(()=>{class p extends ks{constructor(s){super(s),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(o,l){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(s,o){return"selected"===s?this.selectedRows:o}rowDeleted(s){this._deselectRow(s,!0)}clearSelectionData(s){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==s&&this._rowSelectionChanged()}initializeRow(s){var o=this,l=s.getElement(),h=function(){setTimeout(function(){o.selecting=!1},50),document.body.removeEventListener("mouseup",h)};s.modules.select={selected:!1},o.table.options.selectableCheck.call(this.table,s.getComponent())?(l.classList.add("tabulator-selectable"),l.classList.remove("tabulator-unselectable"),o.table.options.selectable&&"highlight"!=o.table.options.selectable&&("click"===o.table.options.selectableRangeMode?l.addEventListener("click",function(_){if(_.shiftKey){o.table._clearSelection(),o.lastClickedRow=o.lastClickedRow||s;var C=o.table.rowManager.getDisplayRowIndex(o.lastClickedRow),D=o.table.rowManager.getDisplayRowIndex(s),L=C<=D?C:D,U=C>=D?C:D,ue=o.table.rowManager.getDisplayRows().slice(0).splice(L,U-L+1);_.ctrlKey||_.metaKey?(ue.forEach(function(we){we!==o.lastClickedRow&&(!0===o.table.options.selectable||o.isRowSelected(s)||o.selectedRows.length<o.table.options.selectable)&&o.toggleRow(we)}),o.lastClickedRow=s):(o.deselectRows(void 0,!0),!0!==o.table.options.selectable&&ue.length>o.table.options.selectable&&(ue=ue.slice(0,o.table.options.selectable)),o.selectRows(ue)),o.table._clearSelection()}else _.ctrlKey||_.metaKey?(o.toggleRow(s),o.lastClickedRow=s):(o.deselectRows(void 0,!0),o.selectRows(s),o.lastClickedRow=s)}):(l.addEventListener("click",function(_){(!o.table.modExists("edit")||!o.table.modules.edit.getCurrentCell())&&o.table._clearSelection(),o.selecting||o.toggleRow(s)}),l.addEventListener("mousedown",function(_){if(_.shiftKey)return o.table._clearSelection(),o.selecting=!0,o.selectPrev=[],document.body.addEventListener("mouseup",h),document.body.addEventListener("keyup",h),o.toggleRow(s),!1}),l.addEventListener("mouseenter",function(_){o.selecting&&(o.table._clearSelection(),o.toggleRow(s),o.selectPrev[1]==s&&o.toggleRow(o.selectPrev[0]))}),l.addEventListener("mouseout",function(_){o.selecting&&(o.table._clearSelection(),o.selectPrev.unshift(s))})))):(l.classList.add("tabulator-unselectable"),l.classList.remove("tabulator-selectable"))}toggleRow(s){this.table.options.selectableCheck.call(this.table,s.getComponent())&&(s.modules.select&&s.modules.select.selected?this._deselectRow(s):this._selectRow(s))}selectRows(s){var o;switch(typeof s){case"undefined":this.table.rowManager.rows.forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged();break;case"string":(o=this.table.rowManager.findRow(s))?this._selectRow(o,!0,!0):this.table.rowManager.getRows(s).forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(s)?(s.forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged()):this._selectRow(s,!1,!0)}}_selectRow(s,o,l){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!l&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var h=this.table.rowManager.findRow(s);h?-1==this.selectedRows.indexOf(h)&&(h.getElement().classList.add("tabulator-selected"),h.modules.select||(h.modules.select={}),h.modules.select.selected=!0,h.modules.select.checkboxEl&&(h.modules.select.checkboxEl.checked=!0),this.selectedRows.push(h),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(h,!0),o||this.dispatchExternal("rowSelected",h.getComponent()),this._rowSelectionChanged(o)):o||console.warn("Selection Error - No such row found, ignoring selection:"+s)}isRowSelected(s){return-1!==this.selectedRows.indexOf(s)}deselectRows(s,o){var h,l=this;if(void 0===s){h=l.selectedRows.length;for(let _=0;_<h;_++)l._deselectRow(l.selectedRows[0],!0);l._rowSelectionChanged(o)}else Array.isArray(s)?(s.forEach(function(_){l._deselectRow(_,!0)}),l._rowSelectionChanged(o)):l._deselectRow(s,o)}_deselectRow(s,o){var _,l=this,h=l.table.rowManager.findRow(s);h?(_=l.selectedRows.findIndex(function(C){return C==h}))>-1&&(h.getElement().classList.remove("tabulator-selected"),h.modules.select||(h.modules.select={}),h.modules.select.selected=!1,h.modules.select.checkboxEl&&(h.modules.select.checkboxEl.checked=!1),l.selectedRows.splice(_,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(h,!1),o||this.dispatchExternal("rowDeselected",h.getComponent()),l._rowSelectionChanged(o)):o||console.warn("Deselection Error - No such row found, ignoring selection:"+s)}getSelectedData(){var s=[];return this.selectedRows.forEach(function(o){s.push(o.getData())}),s}getSelectedRows(){var s=[];return this.selectedRows.forEach(function(o){s.push(o.getComponent())}),s}_rowSelectionChanged(s){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),s||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(s,o){s._row.modules.select||(s._row.modules.select={}),s._row.modules.select.checkboxEl=o}registerHeaderSelectCheckbox(s){this.headerCheckboxElement=s}childRowSelection(s,o){var l=this.table.modules.dataTree.getChildren(s,!0);if(o)for(let h of l)this._selectRow(h,!0);else for(let h of l)this._deselectRow(h,!0)}}return p.moduleName="selectRow",p})();function bh(p,r,s,o,l,h,_){var C=window.DateTime||luxon.DateTime,D=_.format||"dd/MM/yyyy HH:mm:ss",L=_.alignEmptyValues,U=0;if(void 0!==C){if(p=C.fromFormat(p,D),r=C.fromFormat(r,D),p.isValid){if(r.isValid)return p-r;U=1}else U=r.isValid?-1:0;return("top"===L&&"desc"===h||"bottom"===L&&"asc"===h)&&(U*=-1),U}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var Um={number:function(p,r,s,o,l,h,_){var C=_.alignEmptyValues,D=_.decimalSeparator,L=_.thousandSeparator,U=0;if(p=String(p),r=String(r),L&&(p=p.split(L).join(""),r=r.split(L).join("")),D&&(p=p.split(D).join("."),r=r.split(D).join(".")),p=parseFloat(p),r=parseFloat(r),isNaN(p))U=isNaN(r)?0:-1;else{if(!isNaN(r))return p-r;U=1}return("top"===C&&"desc"===h||"bottom"===C&&"asc"===h)&&(U*=-1),U},string:function(p,r,s,o,l,h,_){var L,C=_.alignEmptyValues,D=0;if(p){if(r){switch(typeof _.locale){case"boolean":_.locale&&(L=this.langLocale());break;case"string":L=_.locale}return String(p).toLowerCase().localeCompare(String(r).toLowerCase(),L)}D=1}else D=r?-1:0;return("top"===C&&"desc"===h||"bottom"===C&&"asc"===h)&&(D*=-1),D},date:function(p,r,s,o,l,h,_){return _.format||(_.format="dd/MM/yyyy"),bh.call(this,p,r,s,o,l,h,_)},time:function(p,r,s,o,l,h,_){return _.format||(_.format="HH:mm"),bh.call(this,p,r,s,o,l,h,_)},datetime:bh,boolean:function(p,r,s,o,l,h,_){return(!0===p||"true"===p||"True"===p||1===p?1:0)-(!0===r||"true"===r||"True"===r||1===r?1:0)},array:function(p,r,s,o,l,h,_){var L=_.type||"length",U=_.alignEmptyValues,Z=0;function ue(we){switch(L){case"length":return we.length;case"sum":return we.reduce(function(Ze,ot){return Ze+ot});case"max":return Math.max.apply(null,we);case"min":return Math.min.apply(null,we);case"avg":return we.reduce(function(Ze,ot){return Ze+ot})/we.length}}if(Array.isArray(p)){if(Array.isArray(r))return(p?ue(p):0)-(r?ue(r):0);U=1}else U=Array.isArray(r)?-1:0;return("top"===U&&"desc"===h||"bottom"===U&&"asc"===h)&&(Z*=-1),Z},exists:function(p,r,s,o,l,h,_){return(void 0===p?0:1)-(void 0===r?0:1)},alphanum:function(p,r,s,o,l,h,_){var C,D,L,U,ue,Z=0,we=/(\d+)|(\D+)/g,Ze=/\d/,ot=_.alignEmptyValues,mt=0;if(p||0===p){if(r||0===r){if(isFinite(p)&&isFinite(r))return p-r;if((C=String(p).toLowerCase())===(D=String(r).toLowerCase()))return 0;if(!Ze.test(C)||!Ze.test(D))return C>D?1:-1;for(C=C.match(we),D=D.match(we),ue=C.length>D.length?D.length:C.length;Z<ue;)if((L=C[Z])!==(U=D[Z++]))return isFinite(L)&&isFinite(U)?("0"===L.charAt(0)&&(L="."+L),"0"===U.charAt(0)&&(U="."+U),L-U):L>U?1:-1;return C.length>D.length}mt=1}else mt=r||0===r?-1:0;return("top"===ot&&"desc"===h||"bottom"===ot&&"asc"===h)&&(mt*=-1),mt}},Wp={integer:function(p,r,s){return""===r||null==r||"number"==typeof(r=Number(r))&&isFinite(r)&&Math.floor(r)===r},float:function(p,r,s){return""===r||null==r||"number"==typeof(r=Number(r))&&isFinite(r)&&r%1!=0},numeric:function(p,r,s){return""===r||null==r||!isNaN(r)},string:function(p,r,s){return""===r||null==r||isNaN(r)},max:function(p,r,s){return""===r||null==r||parseFloat(r)<=s},min:function(p,r,s){return""===r||null==r||parseFloat(r)>=s},starts:function(p,r,s){return""===r||null==r||String(r).toLowerCase().startsWith(String(s).toLowerCase())},ends:function(p,r,s){return""===r||null==r||String(r).toLowerCase().endsWith(String(s).toLowerCase())},minLength:function(p,r,s){return""===r||null==r||String(r).length>=s},maxLength:function(p,r,s){return""===r||null==r||String(r).length<=s},in:function(p,r,s){return""===r||null==r||("string"==typeof s&&(s=s.split("|")),""===r||s.indexOf(r)>-1)},regex:function(p,r,s){return""===r||null==r||new RegExp(s).test(r)},unique:function(p,r,s){if(""===r||null==r)return!0;var o=!0,l=p.getData(),h=p.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(_){var C=_.getData();C!==l&&r==h.getFieldValue(C)&&(o=!1)}),o},required:function(p,r,s){return""!==r&&null!=r}},Qd=Object.freeze({__proto__:null,AccessorModule:Tp,AjaxModule:m,ClipboardModule:he,ColumnCalcsModule:_c,DataTreeModule:da,DownloadModule:Wh,EditModule:jh,ExportModule:_h,FilterModule:Dp,FormatModule:kp,FrozenColumnsModule:Lp,FrozenRowsModule:Gf,GroupRowsModule:Pp,HistoryModule:Xh,HtmlTableImportModule:jf,InteractionModule:Yf,KeybindingsModule:Xf,MenuModule:Kf,MoveColumnsModule:$f,MoveRowsModule:wd,MutatorModule:Zf,PageModule:vh,PersistenceModule:$h,PrintModule:Jh,ReactiveDataModule:Fp,ResizeColumnsModule:Qf,ResizeRowsModule:eg,ResizeTableModule:Zh,ResponsiveLayoutModule:Vm,SelectRowModule:Bp,SortModule:(()=>{class p extends ks{constructor(s){super(s),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(s,o,l,h){var _=this.getSort();return _.forEach(C=>{delete C.column}),h.sort=_,h}userSetSort(s,o){this.setSort(s,o),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(s){var l,h,o=!1;switch(typeof s.definition.sorter){case"string":p.sorters[s.definition.sorter]?o=p.sorters[s.definition.sorter]:console.warn("Sort Error - No such sorter found: ",s.definition.sorter);break;case"function":o=s.definition.sorter}s.modules.sort={sorter:o,dir:"none",params:s.definition.sorterParams||{},startingDir:s.definition.headerSortStartingDir||"asc",tristate:s.definition.headerSortTristate},!1!==s.definition.headerSort&&((l=s.getElement()).classList.add("tabulator-sortable"),(h=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?h.appendChild(this.table.options.headerSortElement):h.innerHTML=this.table.options.headerSortElement,s.titleHolderElement.appendChild(h),s.modules.sort.element=h,l.addEventListener("click",_=>{var C="",D=[],L=!1;if(s.modules.sort){if(s.modules.sort.tristate)C="none"==s.modules.sort.dir?s.modules.sort.startingDir:s.modules.sort.dir==s.modules.sort.startingDir?"asc"==s.modules.sort.dir?"desc":"asc":"none";else switch(s.modules.sort.dir){case"asc":C="desc";break;case"desc":C="asc";break;default:C=s.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(_.shiftKey||_.ctrlKey)?((L=(D=this.getSort()).findIndex(U=>U.field===s.getField()))>-1?(D[L].dir=C,L!=D.length-1&&(L=D.splice(L,1)[0],"none"!=C&&D.push(L))):"none"!=C&&D.push({column:s,dir:C}),this.setSort(D)):"none"==C?this.clear():this.setSort(s,C),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var s=this.changed;return this.changed=!1,s}getSort(){var o=[];return this.sortList.forEach(function(l){l.column&&o.push({column:l.column.getComponent(),field:l.column.getField(),dir:l.dir})}),o}setSort(s,o){var l=this,h=[];Array.isArray(s)||(s=[{column:s,dir:o}]),s.forEach(function(_){var C;(C=l.table.columnManager.findColumn(_.column))?(_.column=C,h.push(_),l.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",_.column)}),l.sortList=h,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(s){var _,o=this.table.rowManager.activeRows[0],l="string";if(o&&(o=o.getData(),s.getField()))switch(_=s.getFieldValue(o),typeof _){case"undefined":l="string";break;case"boolean":l="boolean";break;default:isNaN(_)||""===_?_.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(l="alphanum"):l="number"}return p.sorters[l]}sort(s){var o=this,l=this.table.options.sortOrderReverse?o.sortList.slice().reverse():o.sortList,h=[],_=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",o.getSort()),o.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(l.forEach(function(C,D){var L=C.column.modules.sort;C.column&&L&&(L.sorter||(L.sorter=o.findSorter(C.column)),C.params="function"==typeof L.params?L.params(C.column.getComponent(),C.dir):L.params,h.push(C)),o.setColumnHeader(C.column,C.dir)}),h.length&&o._sortItems(s,h)):l.forEach(function(C,D){o.setColumnHeader(C.column,C.dir)}),this.subscribedExternal("dataSorted")&&(s.forEach(C=>{_.push(C.getComponent())}),this.dispatchExternal("dataSorted",o.getSort(),_)),s}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(s){s.modules.sort&&(s.modules.sort.dir="none",s.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(s,o){s.modules.sort.dir=o,s.getElement().setAttribute("aria-sort",o)}_sortItems(s,o){var l=o.length-1;s.sort((h,_)=>{for(var C,D=l;D>=0;D--){let L=o[D];if(0!==(C=this._sortRow(h,_,L.column,L.dir,L.params)))break}return C})}_sortRow(s,o,l,h,_){var C,D,L="asc"==h?s:o,U="asc"==h?o:s;return s=void 0!==(s=l.getFieldValue(L.getData()))?s:"",o=void 0!==(o=l.getFieldValue(U.getData()))?o:"",C=L.getComponent(),D=U.getComponent(),l.modules.sort.sorter.call(this,s,o,C,D,l.getComponent(),h,_)}}return p.moduleName="sort",p.sorters=Um,p})(),ValidateModule:(()=>{class p extends ks{constructor(s){super(s),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(s){return!s.modules.validate||!s.modules.validate.invalid}cellValidate(s){return this.validate(s.column.modules.validate,s,s.getValue())}columnValidate(s){var o=[];return s.cells.forEach(function(l){this.cellValidate(l)||o.push(l.getComponent())}),!o.length||o}rowValidate(s){var o=[];return s.cells.forEach(function(l){this.cellValidate(l)||o.push(l.getComponent())}),!o.length||o}userClearCellValidation(s){s||(s=this.getInvalidCells()),Array.isArray(s)||(s=[s]),s.forEach(o=>{this.clearValidation(o._getSelf())})}userValidate(s){var o=[];return this.table.rowManager.rows.forEach(function(l){var h=l.validate();!0!==h&&(o=o.concat(h))}),!o.length||o}initializeColumnCheck(s){void 0!==s.definition.validator&&this.initializeColumn(s)}initializeColumn(s){var h,o=this,l=[];s.definition.validator&&(Array.isArray(s.definition.validator)?s.definition.validator.forEach(function(_){(h=o._extractValidator(_))&&l.push(h)}):(h=this._extractValidator(s.definition.validator))&&l.push(h),s.modules.validate=!!l.length&&l)}_extractValidator(s){var o,l,h;switch(typeof s){case"string":return(h=s.indexOf(":"))>-1?(o=s.substring(0,h),l=s.substring(h+1)):o=s,this._buildValidator(o,l);case"function":return this._buildValidator(s);case"object":return this._buildValidator(s.type,s.parameters)}}_buildValidator(s,o){var l="function"==typeof s?s:p.validators[s];return l?{type:"function"==typeof s?"function":s,func:l,params:o}:(console.warn("Validator Setup Error - No matching validator found:",s),!1)}validate(s,o,l){var h=this,_=[],C=this.invalidCells.indexOf(o);return s&&s.forEach(function(D){D.func.call(h,o.getComponent(),l,D.params)||_.push({type:D.type,parameters:D.params})}),_=!_.length||_,o.modules.validate||(o.modules.validate={}),!0===_?(o.modules.validate.invalid=!1,o.getElement().classList.remove("tabulator-validation-fail"),C>-1&&this.invalidCells.splice(C,1)):(o.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&o.getElement().classList.add("tabulator-validation-fail"),-1==C&&this.invalidCells.push(o)),_}getInvalidCells(){var s=[];return this.invalidCells.forEach(o=>{s.push(o.getComponent())}),s}clearValidation(s){var o;s.modules.validate&&s.modules.validate.invalid&&(s.getElement().classList.remove("tabulator-validation-fail"),s.modules.validate.invalid=!1,(o=this.invalidCells.indexOf(s))>-1&&this.invalidCells.splice(o,1))}}return p.moduleName="validate",p.validators=Wp,p})()}),ng={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class Ch{constructor(r,s){this.table=r,this.msgType=s,this.registeredDefaults={}}register(r,s){this.registeredDefaults[r]=s}generate(r,s={}){var o=Object.assign({},this.registeredDefaults);if(Object.assign(o,r),!1!==s.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var l in s)o.hasOwnProperty(l)||console.warn("Invalid "+this.msgType+" option:",l);for(var l in o)l in s?o[l]=s[l]:Array.isArray(o[l])?o[l]=Object.assign([],o[l]):"object"==typeof o[l]&&null!==o[l]?o[l]=Object.assign({},o[l]):void 0===o[l]&&delete o[l];return o}}class eh extends Dl{constructor(r){super(r),this.elementVertical=r.rowManager.element,this.elementHorizontal=r.columnManager.element,this.tableElement=r.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(r){}renderRows(){}renderColumns(){}rerenderRows(r){r&&r()}rerenderColumns(r,s){}renderRowCells(r){}rerenderRowCells(r,s){}scrollColumns(r,s){}scrollRows(r,s){}resize(){}scrollToRow(r){}scrollToRowNearestTop(r){}visibleRows(r){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(r,s){var o=r.getElement();s%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(r){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(r,s,o){var l=this.rows().indexOf(r),h=r.getElement(),_=0;return new Promise((C,D)=>{if(l>-1){if(void 0===o&&(o=this.table.options.scrollToRowIfVisible),!o&&Ao.elVisible(h)&&(_=Ao.elOffset(h).top-Ao.elOffset(this.elementVertical).top)>0&&_<this.elementVertical.clientHeight-h.offsetHeight)return!1;switch(void 0===s&&(s=this.table.options.scrollToRowPosition),"nearest"===s&&(s=this.scrollToRowNearestTop(r)?"top":"bottom"),this.scrollToRow(r),s){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(h.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-h.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-h.offsetTop)+h.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+h.offsetHeight}C()}else console.warn("Scroll Error - Row not visible"),D("Scroll Error - Row not visible")})}}class jp extends eh{constructor(r){super(r)}renderRowCells(r){r.cells.forEach(s=>{r.element.appendChild(s.getElement()),s.cellRendered()})}reinitializeColumnWidths(r){r.forEach(function(s){s.reinitializeWidth()})}}class Yp extends eh{constructor(r){super(r),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var r=this.options("columns"),o=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),o=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),o=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),o=!1),r&&r.find(l=>l.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),o=!1),o}renderColumns(r,s){this.dataChange()}scrollColumns(r,s){this.scrollLeft!=r&&(this.scrollLeft=r,this.scroll(r-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(r,s){var o={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!r||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var l=0;this.table.columnManager.columnsByIndex.forEach(h=>{var _={};if(h.visible){var C=h.getWidth();_.leftPos=l,_.rightPos=l+C,_.width=C,"fitData"===this.options("layout")&&(_.fitDataCheck=!0),l+C>this.vDomScrollPosLeft&&l<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=l),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=C),this.columns.push(h),h.modules.vdomHoz=_,l+=C}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,s||(!r||this.reinitChanged(o))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(r){this.initialized?this.initializeRow(r):r.cells.forEach(s=>{r.element.appendChild(s.getElement()),s.cellRendered()})}rerenderRowCells(r,s){this.reinitializeRow(r,s)}reinitializeColumnWidths(r){for(let s=this.leftCol;s<=this.rightCol;s++)this.columns[s].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var h,l,r=!1,s=0,o=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(_=>{!_.definition.width&&_.visible&&(r=!0)}),r&&r&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,l=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(h=l.getElement(),l.generateCells(),this.tableElement.appendChild(h),o=0;o<l.cells.length;o++){let D=l.cells[o];if(h.appendChild(D.getElement()),D.column.reinitializeWidth(),(s+=D.column.getWidth())>this.vDomScrollPosRight)break}for(h.parentNode.removeChild(h),this.fitDataColAvg=Math.floor(s/(o+1));o<this.table.columnManager.columnsByIndex.length;o++)this.table.columnManager.columnsByIndex[o].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(r){var s=!0;return r.cols.length!==this.columns.length||r.leftCol!==this.leftCol||r.rightCol!==this.rightCol||(r.cols.forEach((o,l)=>{o!==this.columns[l]&&(s=!1)}),!s)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(s=>{this.reinitializeRow(s,!0)})}scroll(r){this.vDomScrollPosLeft+=r,this.vDomScrollPosRight+=r,r>.8*this.elementVertical.clientWidth?this.rerenderColumns():r>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(r,s,o){for(let l=r;l<s;l++){let h=this.columns[l];h.modules.vdomHoz.leftPos+=o,h.modules.vdomHoz.rightPos+=o}}addColRight(){var r=this.columns[this.rightCol+1];r&&r.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var l=o.getCell(r);o.getElement().appendChild(l.getElement()),l.cellRendered()}}),this.fitDataColActualWidthCheck(r),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=r.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var r=this.columns[this.leftCol-1];r&&r.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(l=>{if("group"!==l.type){var h=l.getCell(r);l.getElement().prepend(h.getElement()),h.cellRendered()}}),this.fitDataColActualWidthCheck(r),this.leftCol?this.vDomPadLeft-=r.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(r){var s;(r=this.columns[this.rightCol])&&r.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(s=this.table.rowManager.getVisibleRows(),r.modules.vdomHoz.visible=!1,s.forEach(o=>{if("group"!==o.type){var l=o.getCell(r);o.getElement().removeChild(l.getElement())}}),this.vDomPadRight+=r.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var r=this.columns[this.leftCol];r&&r.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var l=o.getCell(r);l.parentNode&&o.getElement().removeChild(l.getElement())}}),this.vDomPadLeft+=r.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(r){var s,o;r.modules.vdomHoz.fitDataCheck&&(r.reinitializeWidth(),(o=(s=r.getWidth())-r.modules.vdomHoz.width)&&(r.modules.vdomHoz.rightPos+=o,r.modules.vdomHoz.width=s,this.colPositionAdjust(this.rightCol+2,this.columns.length,o)),r.modules.vdomHoz.fitDataCheck=!1)}initializeRow(r){if("group"!==r.type){r.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let s=this.leftCol;s<=this.rightCol;s++){let o=this.columns[s];if(o&&o.visible){let l=r.getCell(o);r.getElement().appendChild(l.getElement()),l.cellRendered()}}}}reinitializeRow(r,s){if("group"!==r.type&&(s||!r.modules.vdomHoz||r.modules.vdomHoz.leftCol!==this.leftCol||r.modules.vdomHoz.rightCol!==this.rightCol)){for(var o=r.getElement();o.firstChild;)o.removeChild(o.firstChild);this.initializeRow(r)}}}class sg extends Dl{constructor(r){super(r),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new Ch(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var r;(r="string"==typeof this.table.options.renderHorizontal?{virtual:Yp,basic:jp}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new r(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var r=document.createElement("div");return r.classList.add("tabulator-headers"),r.setAttribute("role","row"),r}createHeaderElement(){var r=document.createElement("div");return r.classList.add("tabulator-header"),r.setAttribute("role","rowgroup"),this.table.options.headerVisible||r.classList.add("tabulator-header-hidden"),r}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(r){var o=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=r,this.element.style.marginLeft=r>o?-(r-o)+"px":0,this.scrollLeft=r,this.renderer.scrollColumns(r)}generateColumnsFromRowData(r){var l,h,s=[],o=this.table.options.autoColumnsDefinitions;if(r&&r.length){for(var _ in l=r[0]){let C={field:_,title:_},D=l[_];switch(typeof D){case"undefined":h="string";break;case"boolean":h="boolean";break;case"object":h=Array.isArray(D)?"array":"string";break;default:h=isNaN(D)||""===D?D.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}C.sorter=h,s.push(C)}if(o)switch(typeof o){case"function":this.table.options.columns=o.call(this.table,s);break;case"object":Array.isArray(o)?s.forEach(C=>{var D=o.find(L=>L.field===C.field);D&&Object.assign(C,D)}):s.forEach(C=>{o[C.field]&&Object.assign(C,o[C.field])}),this.table.options.columns=s}else this.table.options.columns=s;this.setColumns(this.table.options.columns)}}setColumns(r,s){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),r.forEach((o,l)=>{this._addColumn(o)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(r,s,o){var l=new hs(r,this),h=l.getElement(),_=o&&this.findColumnIndex(o);if(o&&_>-1){var C=o.getTopColumn(),D=this.columns.indexOf(C),L=C.getElement();s?(this.columns.splice(D,0,l),L.parentNode.insertBefore(h,L)):(this.columns.splice(D+1,0,l),L.parentNode.insertBefore(h,L.nextSibling))}else s?(this.columns.unshift(l),this.headersElement.insertBefore(l.getElement(),this.headersElement.firstChild)):(this.columns.push(l),this.headersElement.appendChild(l.getElement()));return l.columnRendered(),l}registerColumnField(r){r.definition.field&&(this.columnsByField[r.definition.field]=r)}registerColumnPosition(r){this.columnsByIndex.push(r)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(r){r.reRegisterPosition()})}verticalAlignHeaders(){var r=0;this.columns.forEach(s=>{var o;s.clearVerticalAlign(),(o=s.getHeight())>r&&(r=o)}),this.columns.forEach(s=>{s.verticalAlign(this.table.options.columnHeaderVertAlign,r)}),this.table.rowManager.adjustTableSize()}findColumn(r){return"object"!=typeof r?this.columnsByField[r]||!1:r instanceof hs?r:r instanceof Yn?r._getSelf()||!1:"undefined"!=typeof HTMLElement&&r instanceof HTMLElement&&this.columns.find(o=>o.element===r)||!1}getColumnByField(r){return this.columnsByField[r]}getColumnsByFieldRoot(r){var s=[];return Object.keys(this.columnsByField).forEach(o=>{o.split(".")[0]===r&&s.push(this.columnsByField[o])}),s}getColumnByIndex(r){return this.columnsByIndex[r]}getFirstVisibileColumn(r){return(r=this.columnsByIndex.findIndex(s=>s.visible))>-1&&this.columnsByIndex[r]}getColumns(){return this.columns}findColumnIndex(r){return this.columnsByIndex.findIndex(s=>r===s)}getRealColumns(){return this.columnsByIndex}traverse(r){this.columnsByIndex.forEach((s,o)=>{r(s,o)})}getDefinitions(r){var s=[];return this.columnsByIndex.forEach(o=>{(!r||r&&o.visible)&&s.push(o.getDefinition())}),s}getDefinitionTree(){var r=[];return this.columns.forEach(s=>{r.push(s.getDefinition(!0))}),r}getComponents(r){var s=[];return(r?this.columns:this.columnsByIndex).forEach(l=>{s.push(l.getComponent())}),s}getWidth(){var r=0;return this.columnsByIndex.forEach(s=>{s.visible&&(r+=s.getWidth())}),r}moveColumn(r,s,o){this.moveColumnActual(r,s,o),s.element.parentNode.insertBefore(r.element,s.element),o&&s.element.parentNode.insertBefore(s.element,r.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(r,s,o){this._moveColumnInArray(r.parent.isGroup?r.parent.columns:this.columns,r,s,o),this._moveColumnInArray(this.columnsByIndex,r,s,o,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",r,s,o),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",r.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(r,s,o,l,h){var C,_=r.indexOf(s);_>-1&&(r.splice(_,1),(C=r.indexOf(o))>-1?l&&(C+=1):C=_,r.splice(C,0,s),h&&(this.chain("column-moving-rows",[s,o,l],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(L){if(L.cells.length){var U=L.cells.splice(_,1)[0];L.cells.splice(C,0,U)}}))}scrollToColumn(r,s,o){var l=0,h=0,_=0,C=r.getElement();return new Promise((D,L)=>{if(void 0===s&&(s=this.table.options.scrollToColumnPosition),void 0===o&&(o=this.table.options.scrollToColumnIfVisible),r.visible){switch(s){case"middle":case"center":_=-this.element.clientWidth/2;break;case"right":_=C.clientWidth-this.headersElement.clientWidth}if(!o&&(h=C.offsetLeft)>0&&h+C.offsetWidth<this.element.clientWidth)return!1;l=C.offsetLeft+_,l=Math.max(Math.min(l,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(l),this.scrollHorizontal(l),D()}else console.warn("Scroll Error - Column not visible"),L("Scroll Error - Column not visible")})}generateCells(r){var s=[];return this.columnsByIndex.forEach(o=>{s.push(o.generateCell(r))}),s}getFlexBaseWidth(){var r=this.table.element.clientWidth,s=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(r-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(o){var l,h,_;o.visible&&(l=o.definition.width||0,h=parseInt(o.minWidth),_="string"==typeof l?l.indexOf("%")>-1?r/100*parseInt(l):parseInt(l):l,s+=_>h?_:h)}),s}addColumn(r,s,o){return new Promise((l,h)=>{var _=this._addColumn(r,s,o);this._reIndexColumns(),this.dispatch("column-add",r,s,o),"fitColumns"!=this.layoutMode()&&_.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),l(_)})}deregisterColumn(r){var o,s=r.getField();s&&delete this.columnsByField[s],(o=this.columnsByIndex.indexOf(r))>-1&&this.columnsByIndex.splice(o,1),(o=this.columns.indexOf(r))>-1&&this.columns.splice(o,1),this.verticalAlignHeaders(),this.redraw()}redraw(r){Ao.elVisible(this.element)&&this.verticalAlignHeaders(),r&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",r)||this.layoutRefresh(),this.dispatch("table-redraw",r),this.table.footerManager.redraw()}}class Qh extends eh{constructor(r){super(r),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var r=this.tableElement;r.firstChild;)r.removeChild(r.firstChild);r.scrollTop=0,r.scrollLeft=0,r.style.minWidth="",r.style.minHeight="",r.style.display="",r.style.visibility=""}renderRows(){var r=this.tableElement,s=!0;this.rows().forEach((o,l)=>{this.styleRow(o,l),r.appendChild(o.getElement()),o.initialize(!0),"group"!==o.type&&(s=!1)}),r.style.minWidth=s?this.table.columnManager.getWidth()+"px":""}rerenderRows(r){this.render(),r&&r()}scrollToRowNearestTop(r){var s=Ao.elOffset(r.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-s)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-s))}scrollToRow(r){var s=r.getElement();this.elementVertical.scrollTop=Ao.elOffset(s).top-Ao.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(r){return this.rows()}}class og extends eh{constructor(r){super(r),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var r=this.tableElement;r.firstChild;)r.removeChild(r.firstChild);r.style.paddingTop="",r.style.paddingBottom="",r.style.minWidth="",r.style.minHeight="",r.style.display="",r.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(r){for(var s=this.elementVertical.scrollTop,o=!1,l=!1,h=this.table.rowManager.scrollLeft,_=this.rows(),C=this.vDomTop;C<=this.vDomBottom;C++)if(_[C]){var D=s-_[C].getElement().offsetTop;if(!(!1===l||Math.abs(D)<l))break;l=D,o=C}_.forEach(L=>{L.deinitializeHeight()}),r&&r(),this._virtualRenderFill(!1===o?this.rows.length-1:o,!0,l||0),this.scrollColumns(h)}scrollColumns(r){this.table.rowManager.scrollHorizontal(r)}scrollRows(r,s){var o=r-this.vDomScrollPosTop,l=r-this.vDomScrollPosBottom,h=2*this.vDomWindowBuffer,_=this.rows();if(this.scrollTop=r,-o>h||l>h){var C=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*_.length)),this.scrollColumns(C)}else s?(o<0&&this._addTopRow(_,-o),l<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(_,-l):this.vDomScrollPosBottom=this.scrollTop)):(l>=0&&this._addBottomRow(_,l),o>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(_,o):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(r){var s=this.rows().indexOf(r);return!(Math.abs(this.vDomTop-s)>Math.abs(this.vDomBottom-s))}scrollToRow(r){var s=this.rows().indexOf(r);s>-1&&this._virtualRenderFill(s,!0)}visibleRows(r){var s=this.elementVertical.scrollTop,o=this.elementVertical.clientHeight+s,l=!1,h=0,_=0,C=this.rows();if(r)h=this.vDomTop,_=this.vDomBottom;else for(var D=this.vDomTop;D<=this.vDomBottom;D++)if(C[D])if(l){if(!(o-C[D].getElement().offsetTop>=0))break;_=D}else if(s-C[D].getElement().offsetTop>=0)h=D;else{if(l=!0,!(o-C[D].getElement().offsetTop>=0))break;_=D}return C.slice(h,_+1)}_virtualRenderFill(r,s,o){var l=this.tableElement,h=this.elementVertical,_=0,C=0,D=0,L=0,U=0,Z=this.rows(),ue=Z.length,we=this.elementVertical.clientHeight;if(o=o||0,r=r||0){for(;l.firstChild;)l.removeChild(l.firstChild);(D=(ue-r+1)*this.vDomRowHeight)<we&&(r-=Math.ceil((we-D)/this.vDomRowHeight))<0&&(r=0),r-=_=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),r)}else this.clear();if(ue&&Ao.elVisible(this.elementVertical)){for(this.vDomTop=r,this.vDomBottom=r-1;(C<=we+this.vDomWindowBuffer||U<this.vDomWindowMinTotalRows)&&this.vDomBottom<ue-1;){var mt,Ze=this.vDomBottom+1,ot=Z[Ze];this.styleRow(ot,Ze),l.appendChild(ot.getElement()),ot.initialize(),ot.heightInitialized||ot.normalizeHeight(!0),mt=ot.getHeight(),U<_?L+=mt:C+=mt,mt>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*mt),this.vDomBottom++,U++}r?(this.vDomTopPad=s?this.vDomRowHeight*this.vDomTop+o:this.scrollTop-L,this.vDomBottomPad=this.vDomBottom==ue-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-C-L,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((C+L)/U),this.vDomBottomPad=this.vDomRowHeight*(ue-this.vDomBottom-1),this.vDomScrollHeight=L+C+this.vDomBottomPad-we),l.style.paddingTop=this.vDomTopPad+"px",l.style.paddingBottom=this.vDomBottomPad+"px",s&&(this.scrollTop=this.vDomTopPad+L+o-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-we:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-we),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&s&&(this.scrollTop+=this.elementVertical.offsetHeight-we),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,h.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(r,s){for(var o=this.tableElement,l=[],h=0,_=this.vDomTop-1,C=0;this.vDomTop;){let L,U,D=r[_];if(!(D&&C<this.vDomMaxRenderChain))break;if(L=D.getHeight()||this.vDomRowHeight,U=D.initialized,!(s>=L))break;this.styleRow(D,_),o.insertBefore(D.getElement(),o.firstChild),(!D.initialized||!D.heightInitialized)&&l.push(D),D.initialize(),U||(L=D.getElement().offsetHeight,L>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*L)),s-=L,h+=L,this.vDomTop--,_--,C++}for(let D of l)D.clearCellHeight();this._quickNormalizeRowHeight(l),h&&(this.vDomTopPad-=h,this.vDomTopPad<0&&(this.vDomTopPad=_*this.vDomRowHeight),_<1&&(this.vDomTopPad=0),o.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=h)}_removeTopRow(r,s){for(var o=[],l=0,h=0;;){let C,_=r[this.vDomTop];if(!(_&&h<this.vDomMaxRenderChain))break;if(C=_.getHeight()||this.vDomRowHeight,!(s>=C))break;this.vDomTop++,s-=C,l+=C,o.push(_),h++}for(let _ of o){let C=_.getElement();C.parentNode&&C.parentNode.removeChild(C)}l&&(this.vDomTopPad+=l,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?l:l+this.vDomWindowBuffer)}_addBottomRow(r,s){for(var o=this.tableElement,l=[],h=0,_=this.vDomBottom+1,C=0;;){let L,U,D=r[_];if(!(D&&C<this.vDomMaxRenderChain))break;if(L=D.getHeight()||this.vDomRowHeight,U=D.initialized,!(s>=L))break;this.styleRow(D,_),o.appendChild(D.getElement()),(!D.initialized||!D.heightInitialized)&&l.push(D),D.initialize(),U||(L=D.getElement().offsetHeight,L>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*L)),s-=L,h+=L,this.vDomBottom++,_++,C++}for(let D of l)D.clearCellHeight();this._quickNormalizeRowHeight(l),h&&(this.vDomBottomPad-=h,(this.vDomBottomPad<0||_==r.length-1)&&(this.vDomBottomPad=0),o.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=h)}_removeBottomRow(r,s){for(var o=[],l=0,h=0;;){let C,_=r[this.vDomBottom];if(!(_&&h<this.vDomMaxRenderChain))break;if(C=_.getHeight()||this.vDomRowHeight,!(s>=C))break;this.vDomBottom--,s-=C,l+=C,o.push(_),h++}for(let _ of o){let C=_.getElement();C.parentNode&&C.parentNode.removeChild(C)}l&&(this.vDomBottomPad+=l,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=l)}_quickNormalizeRowHeight(r){for(let s of r)s.calcHeight();for(let s of r)s.setCellHeight()}}class rg extends Dl{constructor(r){super(r),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var r=document.createElement("div");return r.classList.add("tabulator-tableholder"),r.setAttribute("tabindex",0),r.setAttribute("role","rowgroup"),r}createTableElement(){var r=document.createElement("div");return r.classList.add("tabulator-table"),r.setAttribute("role","rowgroup"),r}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(r,s){return s?this.activeRows.indexOf(r):this.rows.indexOf(r)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var r=this.element.scrollLeft,s=this.scrollLeft>r,o=this.element.scrollTop,l=this.scrollTop>o;this.scrollLeft!=r&&(this.scrollLeft=r,this.dispatch("scroll-horizontal",r,s),this.dispatchExternal("scrollHorizontal",r,s)),this.scrollTop!=o&&(this.scrollTop=o,this.renderer.scrollRows(o,l),this.dispatch("scroll-vertical",o,l),this.dispatchExternal("scrollVertical",o,l))})}findRow(r){return"object"!=typeof r?null!=r&&(this.rows.find(o=>o.data[this.table.options.index]==r)||!1):r instanceof Wo?r:r instanceof ms?r._getSelf()||!1:"undefined"!=typeof HTMLElement&&r instanceof HTMLElement&&this.rows.find(o=>o.getElement()===r)||!1}getRowFromDataObject(r){return this.rows.find(o=>o.data===r)||!1}getRowFromPosition(r,s){return s?this.activeRows[r]:this.rows[r]}scrollToRow(r,s,o){return this.renderer.scrollToRowPosition(r,s,o)}setData(r,s,o){return new Promise((l,h)=>{s&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(r,!0):this.reRenderInPosition(()=>{this._setDataActual(r)}):(this.table.options.autoColumns&&o&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(r),this.resetScroll(),this._setDataActual(r)),l()})}_setDataActual(r,s){this.dispatchExternal("dataProcessing",r),this._wipeElements(),Array.isArray(r)?(this.dispatch("data-processing",r),r.forEach((o,l)=>{if(o&&"object"==typeof o){var h=new Wo(o,this);this.rows.push(h)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",o)}),this.refreshActiveData(!1,!1,s),this.dispatch("data-processed",r),this.dispatchExternal("dataProcessed",r)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof r,"\nData:     ",r)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(r=>{r.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(r,s){var o=this.rows.indexOf(r),l=this.activeRows.indexOf(r);l>-1&&this.activeRows.splice(l,1),o>-1&&this.rows.splice(o,1),this.setActiveRows(this.activeRows),this.displayRowIterator(h=>{var _=h.indexOf(r);_>-1&&h.splice(_,1)}),s||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",r.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(r,s,o,l){var h=this.addRowActual(r,s,o,l);return this.dispatch("row-added",h,r,s,o),h}addRows(r,s,o){var l=[];return new Promise((h,_)=>{s=this.findAddRowPos(s),Array.isArray(r)||(r=[r]),(void 0===o&&s||void 0!==o&&!s)&&r.reverse(),r.forEach((C,D)=>{var L=this.addRow(C,s,o,!0);l.push(L),this.dispatch("row-added",L,r,s,o)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),l.length&&this._clearPlaceholder(),h(l)})}findAddRowPos(r){return void 0===r&&(r=this.table.options.addRowPos),"pos"===r&&(r=!0),"bottom"===r&&(r=!1),r}addRowActual(r,s,o,l){var D,L,h=r instanceof Wo?r:new Wo(r||{},this),_=this.findAddRowPos(s),C=-1;return o||(L=this.chain("row-adding-position",[h,_],null,{index:o,top:_}),o=L.index,_=L.top),void 0!==o&&(o=this.findRow(o)),(o=this.chain("row-adding-index",[h,o,_],null,o))&&(C=this.rows.indexOf(o)),o&&C>-1?(D=this.activeRows.indexOf(o),this.displayRowIterator(function(U){var Z=U.indexOf(o);Z>-1&&U.splice(_?Z:Z+1,0,h)}),D>-1&&this.activeRows.splice(_?D:D+1,0,h),this.rows.splice(_?C:C+1,0,h)):_?(this.displayRowIterator(function(U){U.unshift(h)}),this.activeRows.unshift(h),this.rows.unshift(h)):(this.displayRowIterator(function(U){U.push(h)}),this.activeRows.push(h),this.rows.push(h)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",h.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),l||this.reRenderInPosition(),h}moveRow(r,s,o){this.dispatch("row-move",r,s,o),this.moveRowActual(r,s,o),this.regenerateRowNumbers(),this.dispatch("row-moved",r,s,o),this.dispatchExternal("rowMoved",r.getComponent())}moveRowActual(r,s,o){this.moveRowInArray(this.rows,r,s,o),this.moveRowInArray(this.activeRows,r,s,o),this.displayRowIterator(l=>{this.moveRowInArray(l,r,s,o)}),this.dispatch("row-moving",r,s,o)}moveRowInArray(r,s,o,l){var h,_,D;if(s!==o&&((h=r.indexOf(s))>-1&&(r.splice(h,1),_=r.indexOf(o),r.splice(_>-1?l?_+1:_:h,0,s)),r===this.getDisplayRows())){D=_>h?_:h+1;for(let L=h<_?h:_;L<=D;L++)r[L]&&this.styleRow(r[L],L)}}clearData(){this.setData([])}getRowIndex(r){return this.findRowIndex(r,this.rows)}getDisplayRowIndex(r){var s=this.getDisplayRows().indexOf(r);return s>-1&&s}nextDisplayRow(r,s){var o=this.getDisplayRowIndex(r),l=!1;return!1!==o&&o<this.displayRowsCount-1&&(l=this.getDisplayRows()[o+1]),!l||l instanceof Wo&&"row"==l.type?l:this.nextDisplayRow(l,s)}prevDisplayRow(r,s){var o=this.getDisplayRowIndex(r),l=!1;return o&&(l=this.getDisplayRows()[o-1]),!s||!l||l instanceof Wo&&"row"==l.type?l:this.prevDisplayRow(l,s)}findRowIndex(r,s){var o;return!!((r=this.findRow(r))&&(o=s.indexOf(r),o>-1))&&o}getData(r,s){var o=[];return this.getRows(r).forEach(function(h){"row"==h.type&&o.push(h.getData(s||"data"))}),o}getComponents(r){var s=[];return this.getRows(r).forEach(function(l){s.push(l.getComponent())}),s}getDataCount(r){return this.getRows(r).length}scrollHorizontal(r){this.scrollLeft=r,this.element.scrollLeft=r,this.dispatch("scroll-horizontal",r)}registerDataPipelineHandler(r,s){void 0!==s?(this.dataPipeline.push({handler:r,priority:s}),this.dataPipeline.sort((o,l)=>o.priority-l.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(r,s){void 0!==s?(this.displayPipeline.push({handler:r,priority:s}),this.displayPipeline.sort((o,l)=>o.priority-l.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(r,s,o){var l=this.table,h="",_=0,C=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof r)if((_=this.dataPipeline.findIndex(D=>D.handler===r))>-1)h="dataPipeline",s&&(_==this.dataPipeline.length-1?h="display":_++);else{if(!((_=this.displayPipeline.findIndex(D=>D.handler===r))>-1))return void console.error("Unable to refresh data, invalid handler provided",r);h="displayPipeline",s&&(_==this.displayPipeline.length-1?h="end":_++)}else h=r||"all",_=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===h&&_<this.redrawBlockRestoreConfig.index||C.indexOf(h)<C.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:r,skipStage:s,renderInPosition:o,stage:h,index:_});else{switch(this.dispatch("data-refeshing"),r||(this.activeRowsPipeline[0]=this.rows.slice(0)),h){case"all":case"dataPipeline":for(let D=_;D<this.dataPipeline.length;D++){let L=this.dataPipeline[D].handler(this.activeRowsPipeline[D].slice(0));this.activeRowsPipeline[D+1]=L||this.activeRowsPipeline[D].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":_=0,this.resetDisplayRows();case"displayPipeline":for(let D=_;D<this.displayPipeline.length;D++){let L=this.displayPipeline[D].handler((D?this.getDisplayRows(D-1):this.activeRows).slice(0),o);this.setDisplayRows(L||this.getDisplayRows(D-1).slice(0),D)}}Ao.elVisible(this.element)&&(o?this.reRenderInPosition():(r||this.table.columnManager.renderer.renderColumns(),this.renderTable(),l.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(r=>{var s=r.getCell(this.rowNumColumn);s&&s._generateContents()})}setActiveRows(r){this.activeRows=r,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(r,s){var o=!0;return s&&void 0!==this.displayRows[s]?(this.displayRows[s]=r,o=!0):(this.displayRows.push(r),o=s=this.displayRows.length-1),s==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),o}getDisplayRows(r){return void 0===r?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[r]||[]}getVisibleRows(r){return this.renderer.visibleRows(!r)}displayRowIterator(r){this.activeRowsPipeline.forEach(r),this.displayRows.forEach(r),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(r){var s;switch(r){case"active":s=this.activeRows;break;case"display":s=this.table.rowManager.getDisplayRows();break;case"visible":s=this.getVisibleRows(!0);break;default:s=this.chain("rows-retrieve",r,null,this.rows)||this.rows}return s}reRenderInPosition(r){this.redrawBlock?r?r():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(r)}initializeRenderer(){var r;(r="string"==typeof this.table.options.renderVertical?{virtual:og,basic:Qh}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new r(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(r,s){var o=r.getElement();s%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(r){r.normalizeHeight()})}adjustTableSize(){var r=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let s=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+s+"px)",this.element.style.height="calc(100% - "+s+"px)",this.element.style.maxHeight="calc(100% - "+s+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-s+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&r!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(r){r.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(r){var s=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,r?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(s),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var r=document.createEvent("Event");r.initEvent("scroll",!1,!0),this.element.dispatchEvent(r)}else this.element.dispatchEvent(new Event("scroll"))}}class Xp extends Dl{constructor(r){super(r),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var r=document.createElement("div");return r.classList.add("tabulator-footer"),r}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(r,s){this.activate(s),this.element.appendChild(r),this.table.rowManager.adjustTableSize()}prepend(r,s){this.activate(s),this.element.insertBefore(r,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(r){r.parentNode.removeChild(r),this.deactivate()}deactivate(r){(!this.element.firstChild||r)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(r){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),r&&this.links.push(r)}redraw(){this.links.forEach(function(r){r.footerRedraw()})}}class Sd extends Dl{constructor(r){super(r),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var r={};this.listeners.forEach(s=>{r[s]={handler:null,components:[]}}),this.listeners=r}bindSubscriptionWatchers(){var r=Object.keys(this.listeners),s=Object.values(this.componentMap);for(let o of s)for(let l of r)this.subscriptionChange(o+"-"+l,this.subscriptionChanged.bind(this,o,l))}subscriptionChanged(r,s,o){var l=this.listeners[s].components,h=l.indexOf(r),_=!1;o?-1===h&&(l.push(r),_=!0):this.subscribed(r+"-"+s)||h>-1&&(l.splice(h,1),_=!0),_&&this.updateEventListeners()}updateEventListeners(){for(let r in this.listeners){let s=this.listeners[r];s.components.length?s.handler||(s.handler=this.track.bind(this,r),this.el.addEventListener(r,s.handler)):s.handler&&(this.el.removeEventListener(r,s.handler),s.handler=null)}}track(r,s){var o=s.composedPath&&s.composedPath()||s.path,l=this.findTargets(o);l=this.bindComponents(r,l),this.triggerEvents(r,s,l)}findTargets(r){var s={};let o=Object.keys(this.componentMap);for(let l of r){let h=l.classList?[...l.classList]:[];if(h.filter(D=>this.abortClasses.includes(D)).length)break;let C=h.filter(D=>o.includes(D));for(let D of C)s[this.componentMap[D]]=l}return s.group&&s.group===s.row&&delete s.row,s}bindComponents(r,s){var o=Object.keys(s).reverse(),l=this.listeners[r],h={};for(let _ of o){let C,D=s[_],L=this.previousTargets[_];if(L&&L.target===D)C=L.component;else switch(_){case"row":case"group":(l.components.includes("row")||l.components.includes("cell"))&&(C=this.table.rowManager.getVisibleRows().find(Z=>Z.getElement()===D));break;case"column":l.components.includes("column")&&(C=this.table.columnManager.findColumn(D));break;case"cell":l.components.includes("cell")&&(C=s.row.findCell(D))}C&&(s[_]=C,h[_]={target:D,component:C})}return this.previousTargets=h,s}triggerEvents(r,s,o){var l=this.listeners[r];for(let h in o)o[h]&&l.components.includes(h)&&this.dispatch(h+"-"+r,s,o[h])}}class Kp{constructor(r){this.table=r,this.bindings={}}bind(r,s,o){this.bindings[r]||(this.bindings[r]={}),this.bindings[r][s]?console.warn("Unable to bind component handler, a matching function name is already bound",r,s,hanlder):this.bindings[r][s]=o}handle(r,s,o){if(this.bindings[r]&&this.bindings[r][o])return this.bindings[r][o].bind(null,s);"then"!==o&&"string"==typeof o&&!o.startsWith("_")&&console.error("The "+r+" component does not have a "+o+" function, have you checked that you have the correct Tabulator module installed?")}}class ag extends Dl{constructor(r){super(r),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var r;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((r=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=r.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((r=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=r.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var r=document.createElement("div");return r.classList.add("tabulator-loader"),r}createMsgElement(){var r=document.createElement("div");return r.classList.add("tabulator-loader-msg"),r.setAttribute("role","alert"),r}load(r,s,o,l,h){var _=++this.requestOrder;return this.dispatchExternal("dataLoading",r),r&&(0==r.indexOf("{")||0==r.indexOf("["))&&(r=JSON.parse(r)),this.confirm("data-loading",r,s,o,h)?(this.loading=!0,h||this.showLoader(),s=this.chain("data-params",[r,o,h],s||{},{}),s=this.mapParams(s,this.table.options.dataSendParams),this.chain("data-load",[r,s,o,h],Promise.resolve([])).then(L=>{!Array.isArray(L)&&"object"==typeof L&&(L=this.mapParams(L,this.objectInvert(this.table.options.dataReceiveParams)));var U=this.chain("data-loaded",L,null,L);_==this.requestOrder?(this.hideLoader(),!1!==U&&(this.dispatchExternal("dataLoaded",U),this.table.rowManager.setData(U,l,!l))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(L=>{console.error("Data Load Error: ",L),this.dispatchExternal("dataLoadError",L),h||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",r),r||(r=[]),this.table.rowManager.setData(r,l,!l),Promise.resolve())}mapParams(r,s){var o={};for(let l in r)o[s.hasOwnProperty(l)?s[l]:l]=r[l];return o}objectInvert(r){var s={};for(let o in r)s[r[o]]=o;return s}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class lg{constructor(r,s,o){this.table=r,this.events={},this.optionsList=s||{},this.subscriptionNotifiers={},this.dispatch=o?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=o}subscriptionChange(r,s){this.subscriptionNotifiers[r]||(this.subscriptionNotifiers[r]=[]),this.subscriptionNotifiers[r].push(s),this.subscribed(r)&&this._notifiySubscriptionChange(r,!0)}subscribe(r,s){this.events[r]||(this.events[r]=[]),this.events[r].push(s),this._notifiySubscriptionChange(r,!0)}unsubscribe(r,s){var o;if(this.events[r]){if(s){if(!((o=this.events[r].findIndex(l=>l===s))>-1))return void console.warn("Cannot remove event, no matching event found:",r,s);this.events[r].splice(o,1)}else delete this.events[r];this._notifiySubscriptionChange(r,!1)}else console.warn("Cannot remove event, no events set on:",r)}subscribed(r){return this.events[r]&&this.events[r].length}_notifiySubscriptionChange(r,s){var o=this.subscriptionNotifiers[r];o&&o.forEach(l=>{l(s)})}_dispatch(){var o,r=Array.from(arguments),s=r.shift();return this.events[s]&&this.events[s].forEach((l,h)=>{let _=l.apply(this.table,r);h||(o=_)}),o}_debugDispatch(){var r=Array.from(arguments),s=r[0];return r[0]="ExternalEvent:"+r[0],(!0===this.debug||this.debug.includes(s))&&console.log(...r),this._dispatch(...arguments)}}class Dd{constructor(r){this.events={},this.subscriptionNotifiers={},this.dispatch=r?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=r?this._debugChain.bind(this):this._chain.bind(this),this.confirm=r?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=r}subscriptionChange(r,s){this.subscriptionNotifiers[r]||(this.subscriptionNotifiers[r]=[]),this.subscriptionNotifiers[r].push(s),this.subscribed(r)&&this._notifiySubscriptionChange(r,!0)}subscribe(r,s,o=1e4){this.events[r]||(this.events[r]=[]),this.events[r].push({callback:s,priority:o}),this.events[r].sort((l,h)=>l.priority-h.priority),this._notifiySubscriptionChange(r,!0)}unsubscribe(r,s){var o;if(this.events[r]){if(s){if(!((o=this.events[r].findIndex(l=>l.callback===s))>-1))return void console.warn("Cannot remove event, no matching event found:",r,s);this.events[r].splice(o,1)}this._notifiySubscriptionChange(r,!1)}else console.warn("Cannot remove event, no events set on:",r)}subscribed(r){return this.events[r]&&this.events[r].length}_chain(r,s,o,l){var h=o;return Array.isArray(s)||(s=[s]),this.subscribed(r)?(this.events[r].forEach((_,C)=>{h=_.callback.apply(this,s.concat([h]))}),h):"function"==typeof l?l():l}_confirm(r,s){var o=!1;return Array.isArray(s)||(s=[s]),this.subscribed(r)&&this.events[r].forEach((l,h)=>{l.callback.apply(this,s)&&(o=!0)}),o}_notifiySubscriptionChange(r,s){var o=this.subscriptionNotifiers[r];o&&o.forEach(l=>{l(s)})}_dispatch(){var r=Array.from(arguments),s=r.shift();this.events[s]&&this.events[s].forEach(o=>{o.callback.apply(this,r)})}_debugDispatch(){var r=Array.from(arguments),s=r[0];return r[0]="InternalEvent:"+s,(!0===this.debug||this.debug.includes(s))&&console.log(...r),this._dispatch(...arguments)}_debugChain(){var r=Array.from(arguments),s=r[0];return r[0]="InternalEvent:"+s,(!0===this.debug||this.debug.includes(s))&&console.log(...r),this._chain(...arguments)}_debugConfirm(){var r=Array.from(arguments),s=r[0];return r[0]="InternalEvent:"+s,(!0===this.debug||this.debug.includes(s))&&console.log(...r),this._confirm(...arguments)}}let Eh=(()=>{class p{static register(s){p.tables.push(s)}static deregister(s){var o=p.tables.indexOf(s);o>-1&&p.tables.splice(o,1)}static lookupTable(s,o){var h,_,l=[];if("string"==typeof s){if((h=document.querySelectorAll(s)).length)for(var C=0;C<h.length;C++)(_=p.matchElement(h[C]))&&l.push(_)}else"undefined"!=typeof HTMLElement&&s instanceof HTMLElement||s instanceof Ju?(_=p.matchElement(s))&&l.push(_):Array.isArray(s)?s.forEach(function(D){l=l.concat(p.lookupTable(D))}):o||console.warn("Table Connection Error - Invalid Selector",s);return l}static matchElement(s){return p.tables.find(function(o){return s instanceof Ju?o===s:o.element===s})}}return p.tables=[],p})();function $p(p){p.forEach(function(r){r.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var ep={fitData:function(p){this.table.columnManager.renderer.reinitializeColumnWidths(p),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:$p,fitDataTable:$p,fitDataStretch:function(p){var r=0,s=this.table.rowManager.element.clientWidth,o=0,l=!1;p.forEach((h,_)=>{h.widthFixed||h.reinitializeWidth(),(this.table.options.responsiveLayout?h.modules.responsive.visible:h.visible)&&(l=h),h.visible&&(r+=h.getWidth())}),l?(o=s-r+l.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(l.setWidth(0),this.table.modules.responsiveLayout.update()),o>0?l.setWidth(o):l.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(p){var h,L,r=this.table.element.clientWidth,s=0,o=0,l=0,_=[],C=[],D=0,U=0;function Z(we){return"string"==typeof we?we.indexOf("%")>-1?r/100*parseInt(we):parseInt(we):we}function ue(we,Ze,ot,mt){var bt=[],ei=0,ki=0,mi=0,Ci=l,Hi=0,Ui=0,en=[];function cn(Ri){return ot*(Ri.column.definition.widthGrow||1)}function Ki(Ri){return Z(Ri.width)-ot*(Ri.column.definition.widthShrink||0)}return we.forEach(function(Ri,pn){var Hn=mt?Ki(Ri):cn(Ri);Ri.column.minWidth>=Hn?bt.push(Ri):Ri.column.maxWidth&&Ri.column.maxWidth<Hn?(Ri.width=Ri.column.maxWidth,Ze-=Ri.column.maxWidth,(Ci-=mt?Ri.column.definition.widthShrink||1:Ri.column.definition.widthGrow||1)&&(ot=Math.floor(Ze/Ci))):(en.push(Ri),Ui+=mt?Ri.column.definition.widthShrink||1:Ri.column.definition.widthGrow||1)}),bt.length?(bt.forEach(function(Ri){ei+=mt?Ri.width-Ri.column.minWidth:Ri.column.minWidth,Ri.width=Ri.column.minWidth}),Hi=(ki=Ze-ei)-(mi=Ui?Math.floor(ki/Ui):ki)*Ui,Hi+=ue(en,ki,mi,mt)):(Hi=Ui?Ze-Math.floor(Ze/Ui)*Ui:Ze,en.forEach(function(Ri){Ri.width=mt?Ki(Ri):cn(Ri)})),Hi}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(r-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),p.forEach(function(we){var Ze,ot,mt;we.visible&&(Ze=we.definition.width,ot=parseInt(we.minWidth),Ze?(mt=Z(Ze),s+=mt>ot?mt:ot,we.definition.widthShrink&&(C.push({column:we,width:mt>ot?mt:ot}),D+=we.definition.widthShrink)):(_.push({column:we,width:0}),l+=we.definition.widthGrow||1))}),o=r-s,h=Math.floor(o/l),U=ue(_,o,h,!1),_.length&&U>0&&(_[_.length-1].width+=+U),_.forEach(function(we){o-=we.width}),(L=Math.abs(U)+o)>0&&D&&(U=ue(C,L,Math.floor(L/D),!0)),C.length&&(C[C.length-1].width-=U),_.forEach(function(we){we.column.setWidth(we.width)}),C.forEach(function(we){we.column.setWidth(we.width)})}},Zp={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},pg=Object.freeze({__proto__:null,LayoutModule:(()=>{class p extends ks{constructor(s){super(s,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var s=this.table.options.layout;p.modes[s]?this.mode=s:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+s),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){p.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return p.moduleName="layout",p.modes=ep,p})(),LocalizeModule:(()=>{class p extends ks{constructor(s){super(s),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Ao.deepClone(p.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let s in this.table.options.langs)this.installLang(s,this.table.options.langs[s]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(s){this.langList.default.headerFilters.default=s}setHeaderFilterColumnPlaceholder(s,o){this.langList.default.headerFilters.columns[s]=o,this.lang&&!this.lang.headerFilters.columns[s]&&(this.lang.headerFilters.columns[s]=o)}installLang(s,o){this.langList[s]?this._setLangProp(this.langList[s],o):this.langList[s]=o}_setLangProp(s,o){for(let l in o)s[l]&&"object"==typeof s[l]?this._setLangProp(s[l],o[l]):s[l]=o[l]}setLocale(s){if(!0===(s=s||"default")&&navigator.language&&(s=navigator.language.toLowerCase()),s&&!this.langList[s]){let l=s.split("-")[0];this.langList[l]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",s,l),s=l):(console.warn("Localization Error - Matching locale not found, using default: ",s),s="default")}this.locale=s,this.lang=Ao.deepClone(this.langList.default||{}),"default"!=s&&function o(l,h){for(var _ in l)"object"==typeof l[_]?(h[_]||(h[_]={}),o(l[_],h[_])):h[_]=l[_]}(this.langList[s],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(s){return this.locale}getLang(s){return s?this.langList[s]:this.lang}getText(s,o){var l=(s=o?s+"|"+o:s).split("|");return this._getLangElement(l,this.locale)||""}_getLangElement(s,o){var l=this.lang;return s.forEach(function(h){var _;l&&(l=void 0!==(_=l[h])&&_)}),l}bind(s,o){this.bindings[s]||(this.bindings[s]=[]),this.bindings[s].push(o),o(this.getText(s),this.lang)}_executeBindings(){for(let s in this.bindings)this.bindings[s].forEach(o=>{o(this.getText(s),this.lang)})}}return p.moduleName="localize",p.langs=Zp,p})(),CommsModule:(()=>{class p extends ks{constructor(s){super(s)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(s){var o=[];return Eh.lookupTable(s).forEach(h=>{this.table!==h&&o.push(h)}),o}send(s,o,l,h){var _=this.getConnections(s);_.forEach(C=>{C.tableComms(this.table.element,o,l,h)}),!_.length&&s&&console.warn("Table Connection Error - No tables matching selector found",s)}receive(s,o,l,h){if(this.table.modExists(o))return this.table.modules[o].commsReceived(s,l,h);console.warn("Inter-table Comms Error - no such module:",o)}}return p.moduleName="comms",p})()});class qp{constructor(r,s){this.bindStaticFuctionality(r),this.bindModules(r,pg,!0),s&&this.bindModules(r,s)}bindStaticFuctionality(r){r.moduleBindings={},r.extendModule=function(s,o,l){if(r.moduleBindings[s]){var h=r.moduleBindings[s][o];if(h)if("object"==typeof l)for(let _ in l)h[_]=l[_];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",o)}else console.warn("Module Error - module does not exist:",s)},r.registerModule=function(s){Array.isArray(s)||(s=[s]),s.forEach(o=>{r.registerModuleBinding(o)})},r.registerModuleBinding=function(s){r.moduleBindings[s.moduleName]=s},r.findTable=function(s){var o=Eh.lookupTable(s,!0);return!(Array.isArray(o)&&!o.length)&&o},r.prototype.bindModules=function(){for(var s in this.modules={},r.moduleBindings){let o=r.moduleBindings[s];this.modules[s]=new o(this),o.prototype.moduleCore?this.modulesCore[s]=this.modules[s]:this.modulesRegular[s]=this.modules[s]}}}bindModules(r,s,o){var l=Object.values(s);o&&l.forEach(h=>{h.prototype.moduleCore=!0}),r.registerModule(l)}}let Ju=(()=>{class p{constructor(s,o){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new Kp(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new Ch(this,"table constructor"),this.initialized=!1,this.initializeElement(s)&&(this.initialzeCoreSystems(o),setTimeout(()=>{this._create()})),Eh.register(this)}initializeElement(s){return"undefined"!=typeof HTMLElement&&s instanceof HTMLElement?(this.element=s,!0):"string"==typeof s?(this.element=document.querySelector(s),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",s),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",s),!1)}initialzeCoreSystems(s){this.columnManager=new sg(this),this.rowManager=new rg(this),this.footerManager=new Xp(this),this.dataLoader=new ag(this),this.bindModules(),this.options=this.optionsList.generate(p.defaultOptions,s),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new lg(this,this.options,this.options.debugEventsExternal),this.eventBus=new Dd(this.options.debugEventsInternal),this.interactionMonitor=new Sd(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var s=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==s.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var l,s=this.element,o=this.options;if("TABLE"===s.tagName){this.originalElement=this.element,l=document.createElement("div");var h=s.attributes;for(var _ in h)"object"==typeof h[_]&&l.setAttribute(h[_].name,h[_].value);s.parentNode.replaceChild(l,s),this.element=s=l}for(s.classList.add("tabulator"),s.setAttribute("role","grid");s.firstChild;)s.removeChild(s.firstChild);o.height&&(o.height=isNaN(o.height)?o.height:o.height+"px",s.style.height=o.height),!1!==o.minHeight&&(o.minHeight=isNaN(o.minHeight)?o.minHeight:o.minHeight+"px",s.style.minHeight=o.minHeight),!1!==o.maxHeight&&(o.maxHeight=isNaN(o.maxHeight)?o.maxHeight:o.maxHeight+"px",s.style.maxHeight=o.maxHeight)}_initializeTable(){var s=this.element,o=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let _ in this.modulesCore)this.modulesCore[_].initialize();if("string"==typeof o.placeholder){var l=document.createElement("div");l.classList.add("tabulator-placeholder");var h=document.createElement("span");h.innerHTML=o.placeholder,l.appendChild(h),o.placeholder=l}s.appendChild(this.columnManager.getElement()),s.appendChild(this.rowManager.getElement()),o.footerElement&&this.footerManager.activate(),o.autoColumns&&o.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let _ in this.modulesRegular)this.modulesRegular[_].initialize();this.columnManager.setColumns(o.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var s=this.element;for(Eh.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(o){o.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];s.firstChild;)s.removeChild(s.firstChild);s.classList.remove("tabulator")}_detectBrowser(){var s=navigator.userAgent||navigator.vendor||window.opera;s.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):s.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):s.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(s)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(s.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(s){return new Promise((o,l)=>{var h=document.createElement("input");h.type="file",h.accept=s||".json,application/json",h.addEventListener("change",_=>{var L,C=h.files[0],D=new FileReader;D.readAsText(C),D.onload=U=>{try{L=JSON.parse(D.result)}catch(Z){return console.warn("File Load Error - File contents is invalid JSON",Z),void l(Z)}this.setData(L).then(Z=>{o(Z)}).catch(Z=>{o(Z)})},D.onerror=U=>{console.warn("File Load Error - Unable to read file"),l()}}),h.click()})}setData(s,o,l){if(this.initialized)return this.dataLoader.load(s,o,l,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(s){return this.rowManager.getData(s)}getDataCount(s){return this.rowManager.getDataCount(s)}replaceData(s,o,l){if(this.initialized)return this.dataLoader.load(s,o,l,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(s){var o=0;if(this.initialized)return new Promise((l,h)=>{this.dataLoader.blockActiveLoad(),"string"==typeof s&&(s=JSON.parse(s)),s?s.forEach(_=>{var C=this.rowManager.findRow(_[this.options.index]);C&&(o++,C.updateData(_).then(()=>{--o||l()}))}):(console.warn("Update Error - No data provided"),h("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(s,o,l){if(this.initialized)return new Promise((h,_)=>{this.dataLoader.blockActiveLoad(),"string"==typeof s&&(s=JSON.parse(s)),s?this.rowManager.addRows(s,o,l).then(C=>{var D=[];C.forEach(function(L){D.push(L.getComponent())}),h(D)}):(console.warn("Update Error - No data provided"),_("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(s){var o=[],l=0;if(this.initialized)return new Promise((h,_)=>{this.dataLoader.blockActiveLoad(),"string"==typeof s&&(s=JSON.parse(s)),s?s.forEach(C=>{var D=this.rowManager.findRow(C[this.options.index]);l++,D?D.updateData(C).then(()=>{l--,o.push(D.getComponent()),l||h(o)}):this.rowManager.addRows(C).then(L=>{l--,o.push(L[0].getComponent()),l||h(o)})}):(console.warn("Update Error - No data provided"),_("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(s){var o=this.rowManager.findRow(s);return o?o.getComponent():(console.warn("Find Error - No matching row found:",s),!1)}getRowFromPosition(s,o){var l=this.rowManager.getRowFromPosition(s,o);return l?l.getComponent():(console.warn("Find Error - No matching row found:",s),!1)}deleteRow(s){var o=[];Array.isArray(s)||(s=[s]);for(let l of s){let h=this.rowManager.findRow(l,!0);if(!h)return console.error("Delete Error - No matching row found:",l),Promise.reject("Delete Error - No matching row found");o.push(h)}return o.sort((l,h)=>this.rowManager.rows.indexOf(l)>this.rowManager.rows.indexOf(h)?1:-1),o.forEach(l=>{l.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(s,o,l){if(this.initialized)return"string"==typeof s&&(s=JSON.parse(s)),this.rowManager.addRows(s,o,l).then(h=>h[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(s,o){var l=this.rowManager.findRow(s);return"string"==typeof o&&(o=JSON.parse(o)),l?l.updateData(o).then(()=>l.getComponent()):this.rowManager.addRows(o).then(h=>h[0].getComponent())}updateRow(s,o){var l=this.rowManager.findRow(s);return"string"==typeof o&&(o=JSON.parse(o)),l?l.updateData(o).then(()=>{resolve(l.getComponent())}):(console.warn("Update Error - No matching row found:",s),Promise.reject("Update Error - No matching row found"))}scrollToRow(s,o,l){var h=this.rowManager.findRow(s);return h?this.rowManager.scrollToRow(h,o,l):(console.warn("Scroll Error - No matching row found:",s),Promise.reject("Scroll Error - No matching row found"))}moveRow(s,o,l){var h=this.rowManager.findRow(s);h?h.moveToRow(o,l):console.warn("Move Error - No matching row found:",s)}getRows(s){if(this.initialized)return this.rowManager.getComponents(s);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(s,o){var l=this.rowManager.findRow(s);return l?this.rowManager.getRowPosition(l,o):(console.warn("Position Error - No matching row found:",s),!1)}setColumns(s){this.initialized?this.columnManager.setColumns(s):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(s){return this.columnManager.getComponents(s)}getColumn(s){var o=this.columnManager.findColumn(s);return o?o.getComponent():(console.warn("Find Error - No matching column found:",s),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(s){var o=this.columnManager.findColumn(s);if(!o)return console.warn("Column Show Error - No matching column found:",s),!1;o.show()}hideColumn(s){var o=this.columnManager.findColumn(s);if(!o)return console.warn("Column Hide Error - No matching column found:",s),!1;o.hide()}toggleColumn(s){var o=this.columnManager.findColumn(s);if(!o)return console.warn("Column Visibility Toggle Error - No matching column found:",s),!1;o.visible?o.hide():o.show()}addColumn(s,o,l){var h=this.columnManager.findColumn(l);return this.columnManager.addColumn(s,o,h).then(_=>_.getComponent())}deleteColumn(s){var o=this.columnManager.findColumn(s);return o?o.delete():(console.warn("Column Delete Error - No matching column found:",s),Promise.reject())}updateColumnDefinition(s,o){var l=this.columnManager.findColumn(s);return l?l.updateDefinition(o):(console.warn("Column Update Error - No matching column found:",s),Promise.reject())}moveColumn(s,o,l){var h=this.columnManager.findColumn(s),_=this.columnManager.findColumn(o);h?_?this.columnManager.moveColumn(h,_,l):console.warn("Move Error - No matching column found:",_):console.warn("Move Error - No matching column found:",s)}scrollToColumn(s,o,l){return new Promise((h,_)=>{var C=this.columnManager.findColumn(s);return C?this.columnManager.scrollToColumn(C,o,l):(console.warn("Scroll Error - No matching column found:",s),Promise.reject("Scroll Error - No matching column found"))})}redraw(s){this.initialized?(this.columnManager.redraw(s),this.rowManager.redraw(s)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(s){this.options.height=isNaN(s)?s:s+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(s,o){this.externalEvents.subscribe(s,o)}off(s,o){this.externalEvents.unsubscribe(s,o)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(s,o){return!!this.modules[s]||(o&&console.error("Tabulator Module Not Installed: "+s),!1)}module(s){var o=this.modules[s];return o||console.error("Tabulator module not installed: "+s),o}}return p.defaultOptions=ng,p})();new qp(Ju),new qp(class extends Ju{},Qd);let Gm=(()=>{class p{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(s){Ju.registerModule([kp,he,Wh,Bp]),this.hotInstance=new Ju(s,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",clipboard:"copy",footerElement:"<div>\n        \x3c!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        --\x3e\n        \n    </div>",placeholder:"please press execute button"})}AddStringToGrid(s){if(s.startsWith("{")&&s.endsWith("}"))try{var o=JSON.parse(s);return void this.objectsForGrid.push(o)}catch(_){}if(s.startsWith("[")&&s.endsWith("]"))try{for(var l=JSON.parse(s),h=0;h<l.length;h++)this.objectsForGrid.push(l[h]);return}catch(_){}this.stringsForGrid.push(s)}AddDataToGrid(s){return"string"==typeof s?(this.AddStringToGrid(null==s?void 0:s.toString()),void this.dataObject.push([null==s?void 0:s.toString()])):"object"==typeof s?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(s)),void this.dataObject.push([s])):(this.dataObject.push([s.ToString()]),void this.AddStringToGrid(s.toString()))}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(s,o){return null!=s&&s.hasOwnProperty(o)}AddObjectToFinishGrid(){for(var s=[],o=this.objectsForGrid,l=0;l<o.length;l++)"string"==typeof(h=o[l])?s.push("_"):s.push(...Object.keys(h));var _=new Set(s);s=Array.from(_);var C=[...s],D=[];for(l=0;l<o.length;l++){for(var h=o[l],L={Nr:l+1},U=0;U<s.length;U++){var Z=s[U],ue=this.goodNameForKey(Z);if(h&&this.hasOwnProperty(h,Z)){var we=h[Z];L[ue]="object"==typeof we?JSON.stringify(we):we}else L[ue]="string"==typeof h&&0===U?h:""}D.push(L)}s.splice(0,0,"Nr"),C.splice(0,0,"Nr");var Ze=this.Headers(C);this.hot.setColumns(Ze),this.hot.replaceData(D)}Headers(s){return s.map(o=>({title:o,field:this.goodNameForKey(o),formatter:function(l,h,_){try{var C=l.getValue().toString();if(C.length<2)return C;if(C.startsWith("[")&&C.endsWith("]"))try{var D=JSON.parse(C),L=l.getRow().getData().Nr,Z=l.getColumn().getField()+"_"+L;return _(function(){new Ju("#"+Z,{data:D,autoColumns:!0,layout:"fitDataFill"})}),"<div id='"+Z+"'>"+C+"</div>"}catch(ue){return C}}catch(ue){return C}return l.getValue()}}))}AddStringToFinishGrid(){for(var s=[],o=0;o<this.stringsForGrid.length;o++)s.push({Nr:o+1,Text:this.stringsForGrid[o]});var h=this.Headers(["Nr","Text"]);this.hot.setColumns(h),this.hot.replaceData(s)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(s){var o=s;return o.replace(".","_")}copyClip(){this.hot.copyToClipboard()}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return p.\u0275fac=function(s){return new(s||p)},p.\u0275prov=Fe.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();var Qp=W(2590),ef=W(1083),mg=W(926),Wm=W(7261),tp=W(3954),Th=W(2181),_g=W(4834),Md=W(1125),tf=W(773),zm=W(33);function vc(p,r){1&p&&Fe._UZ(0,"mat-spinner")}const jm=function(p){return["/","automation","loadexample",p]};function Ym(p,r){if(1&p&&(Fe.TgZ(0,"a",17),Fe._uU(1),Fe.qZA()),2&p){const s=Fe.oxw();Fe.Q6J("routerLink",Fe.VKq(2,jm,s.mustLoadDemoBlock)),Fe.xp6(1),Fe.hij("Direct link ",s.mustLoadDemoBlock,"")}}function nf(p,r){if(1&p){const s=Fe.EpF();Fe.TgZ(0,"ngx-codemirror",19),Fe.NdJ("ngModelChange",function(l){return Fe.CHM(s),Fe.oxw(2).showInner=l}),Fe.qZA()}if(2&p){const s=Fe.oxw(2);Fe.Q6J("options",s.editorPlain)("ngModel",s.showInner)}}function sf(p,r){if(1&p){const s=Fe.EpF();Fe.TgZ(0,"ngx-codemirror",19),Fe.NdJ("ngModelChange",function(l){return Fe.CHM(s),Fe.oxw(2).showJSCode=l}),Fe.qZA()}if(2&p){const s=Fe.oxw(2);Fe.Q6J("options",s.editorJSOptions)("ngModel",s.showJSCode)}}function rf(p,r){if(1&p){const s=Fe.EpF();Fe.TgZ(0,"ngx-codemirror",19),Fe.NdJ("ngModelChange",function(l){return Fe.CHM(s),Fe.oxw(2).showXMLCode=l}),Fe.qZA()}if(2&p){const s=Fe.oxw(2);Fe.Q6J("options",s.editorXMLOptions)("ngModel",s.showXMLCode)}}function vg(p,r){if(1&p){const s=Fe.EpF();Fe.TgZ(0,"ngx-codemirror",19),Fe.NdJ("ngModelChange",function(l){return Fe.CHM(s),Fe.oxw(2).showBlocksDefinition=l}),Fe.qZA()}if(2&p){const s=Fe.oxw(2);Fe.Q6J("options",s.editorJSOptions)("ngModel",s.showBlocksDefinition)}}function Xm(p,r){if(1&p&&(Fe.TgZ(0,"mat-grid-tile"),Fe.YNc(1,nf,1,2,"ngx-codemirror",18),Fe.YNc(2,sf,1,2,"ngx-codemirror",18),Fe.YNc(3,rf,1,2,"ngx-codemirror",18),Fe.YNc(4,vg,1,2,"ngx-codemirror",18),Fe.qZA()),2&p){const s=Fe.oxw();Fe.xp6(1),Fe.Q6J("ngIf",s.ShowOutput()),Fe.xp6(1),Fe.Q6J("ngIf",s.ShowCode()),Fe.xp6(1),Fe.Q6J("ngIf",s.ShowXML()),Fe.xp6(1),Fe.Q6J("ngIf",s.ShowBlocksDefinition())}}var nl=(()=>{return(p=nl||(nl={}))[p.ShowNone=0]="ShowNone",p[p.ShowBlocksDefinition=1]="ShowBlocksDefinition",p[p.ShowXML=2]="ShowXML",p[p.ShowOutput=3]="ShowOutput",p[p.ShowCode=4]="ShowCode",p[p.Stop=100]="Stop",nl;var p})();let ip=(()=>{class p{constructor(s,o,l,h,_,C,D){var L;this.tabulator=s,this.DetailsApp=o,this.loadDemo=l,this.ar=h,this.ta=_,this.snackBar=C,this.dialog=D,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=nl.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.mustLoadDemoBlock="",this.intro=ee(),this.myId=0,this.bs=new Kd,this.bh2=new Ep,this.bh=null,this.fullTextData="",this.fullHtmlData="",this.myChart=null,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.loadedCompletely=!1,this.myId=++p.id,this.ar.paramMap.subscribe(U=>{this.mustLoadDemoBlock=U.get("demoblock")}),this.ta.receiveData().subscribe(U=>{"DisplayBlocklyComponent"==U[0]&&this[U[1]]()}),null===(L=this.DetailsApp.LocalAPI)||void 0===L||L.IsAlive().subscribe()}createIntro(){var s,o=null===(s=this.DetailsApp.settings)||void 0===s?void 0:s.tourSteps.map(l=>{var h;return{title:(null===(h=this.DetailsApp.settings)||void 0===h?void 0:h.title)||"Blockly Automation",intro:l.text,element:document.querySelector(l.query)||void 0}});this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:o}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid(),null!=this.myChart&&this.myChart.destroy();var s=this.theHtmlOutput();s.innerHTML="",this.fullHtmlData="",(s=this.theTextOutput()).innerText="",this.fullTextData=""}ShowText(s){if(null!=s){var o=s.toString();this.fullTextData+=o,this.theTextOutput().innerText=this.fullTextData}}finishHTMLOutput(){this.theHtmlOutput().innerHTML=this.fullHtmlData}ShowHTML(s){if(null!=s){var o=s.toString();this.fullHtmlData+=o,this.theHtmlOutput().innerHTML+=o}}theHtmlOutput(){return document.getElementById("htmlOutput"+this.myId)}theTextOutput(){return document.getElementById("htmlText"+this.myId)}ShowChart(s){var o,l=null===(o=document.getElementById("barchart"+this.myId))||void 0===o?void 0:o.getContext("2d");if(null!=l)try{var h=null==s?void 0:s.toString(),_=JSON.parse(h);_&&_.type&&(this.myChart=new ah(l,_),console.log("make chart",s))}catch(C){this.myChart=null}else console.log("not canvas available for chart!")}RunCode(){this.snackBar.open("Program start","Executing...");var s=this,o=this.run.latestCode,l=this.showJSCode;s.CalculateXMLAndCode(),this.bh=new dh(this.demoWorkspace,e),this.run=this.bh,this.clearOutput(),this.showCodeAndXML=nl.ShowOutput,this.showInner='{ "step_start": "start program",',o!=l&&(window.confirm("Do you want to run the code modified by you ?")&&(o=l),this.showJSCode=l),this.run.runCode((_,C)=>{try{return new Interpreter(_,C)}catch(D){s.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(D)),this.showCodeAndXML=nl.ShowCode}},_=>{s.step++,s.showInner+=`\n           \n"step_${s.step}" : "${_}",`,s.tabulator.AddDataToGrid(_),s.ShowChart(_),s.ShowHTML(_),s.ShowText(_)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),s.showInner+='\n "step_end" : "program executed; see results below"\n}',this.tabulator.FinishGrid(),this.finishHTMLOutput()},o)}ShowLocalAPI(s){var o;null===(o=this.DetailsApp.LocalAPI)||void 0===o||o.LoadBlockContent(s).subscribe(l=>{var h=t.Xml.textToDom(l);null!=this.demoWorkspace&&(t.Xml.clearWorkspaceAndLoadFromXml(h,this.demoWorkspace),window.alert("please press execute button"))})}ShowDemo(s){this.mustLoadDemoBlock=s,this.loadDemo.getDemoBlock(s).subscribe(o=>{var l=t.Xml.textToDom(o);if(null!=this.demoWorkspace){try{t.Xml.clearWorkspaceAndLoadFromXml(l,this.demoWorkspace)}catch(h){return(null==s?void 0:s.toString().indexOf("docker"))>-1?void(window.confirm("This demo must run with Desktop App.\nDo you want to go to download page?")&&window.open("http://ba.serviciipeweb.ro/")):(null==s?void 0:s.toString().indexOf("chrome"))>-1?void(window.confirm("This demo must run with MyPC swagger.\nDo you want to go to download page?")&&window.open("https://github.com/ignatandrei/BlocklyAutomation/wiki/MyPC")):void window.alert("error "+s)}window.alert("please press execute button")}})}registerSwaggerBlocksObjects(s,o){return o.fieldXMLObjects.map(h=>t.Xml.textToDom(h))}registerSwaggerBlocksAPIControllers(s,o,l){return o.findfieldXMLFunctions(l).map(_=>t.Xml.textToDom(_.gui))}registerSwaggerBlocksAPIAll(s,o){return o.fieldXMLFunctions.map(h=>t.Xml.textToDom(h.gui))}ngOnInit(){}ngAfterViewInit(){this.StartRegister(),(0,ud.R)(window,"TabDownload").subscribe(s=>this.tabulator.copyCSV()),(0,ud.R)(window,"TabCopy").subscribe(s=>this.tabulator.copyClip())}ShowBlocks(){this.dialog.open(Nh,{}).afterClosed().subscribe(o=>{if(console.log("The dialog was closed with ",o),o){var l=o;switch(l.Source){case"Demos":try{console.log("into try"),this.ShowDemo(o.id)}catch(h){window.alert(o.id),window.alert(h)}break;case"LocalAPI":this.ShowLocalAPI(o.id);break;default:window.alert(l.Source)}}})}LoadSwagger(){var s=this,l=(new Y.L(""),window.prompt("Swagger/OpenAPI ? "));if(l){if(l.endsWith(".html")||l.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");s.LoadSwaggerFromUrl(l).then(h=>{h.hasError?window.alert("error loading swagger"):(s.addToToolboxSwagger(h,this),window.alert("loaded successfully"))})}}LoadSwaggerFromUrl(s,o){var l=this;return(0,O.Z)(function*(){var h=new Y.L(s),_=yield h.ParseSwagger();return _.name=o||s,_.hasError?_:l.LoadSwaggerFromAPI(_)})()}LoadSwaggerFromAPI(s){if(s.hasError)return console.error("error in swagger",s.name),s;this.swaggerData.push(s);for(var o=0;o<s.GenerateBlocks.length;o++)(0,s.GenerateBlocks[o])(t.Blocks,e);for(o=0;o<s.GenerateFunctions.length;o++)(0,s.GenerateFunctions[o])(t.Blocks,e);return s.metaBlocks()(t.Blocks,e),s}StartRegister(){var s=this;return(0,O.Z)(function*(){var o=s.DetailsApp.swaggersDict,l=new Map;o.forEach((L,U)=>{var Z=!L.hasError;console.log("show swagger: "+U+":"+Z),Z&&l.set(U,s.LoadSwaggerFromAPI(L))});var h=[...Array(50).keys()].map(L=>s.CategorySwaggerHidden(L)).join("");const _=document.getElementById("steps"+s.myId);if(null!=_){s.tabulator.initGrid(_),s.bs.filterBlocks.definitionBlocks(t.Blocks,e),s.bs.waitBlocks2.definitionBlocks(t.defineBlocksWithJsonArray,e),s.bs.xhrBlocks.definitionBlocks(t.Blocks,e),s.bs.propBlocks.definitionBlocks(t.Blocks,e),s.bs.guiBlocks.definitionBlocks(t.Blocks,e),s.bs.convertersBlocks.definitionBlocks(t.Blocks,e),s.bs.exportFileBlock.definitionBlocks(t.Blocks,e),s.bs.createObjectBlocks.definitionBlocks(t.Blocks,e,t.Extensions,t.Mutator),s.bs.currentDateBlock.definitionBlocks(t.Blocks,e),s.bs.dateFromTextBlock.definitionBlocks(t.Blocks,e),s.bs.waitBlocks1.definitionBlocks(t.Blocks,e),s.bs.commentBlock.definitionBlocks(t.Blocks,e),s.bs.trycatchFinBlock.definitionBlocks(t.Blocks,e),s.bs.auth0Blocks.definitionBlocks(t.Blocks,e),s.bs.windowsCreds.definitionBlocks(t.Blocks,e),s.bs.chartBlock.definitionBlocks(t.Blocks,e),s.bs.emailBlocks.definitionBlocks(t.Blocks,e),s.bs.htmlblocks.definitionBlocks(t.Blocks,e),s.bs.HTMLParserBlocks.definitionBlocks(t.Blocks,e),s.bs.ttsBlock.definitionBlocks(t.Blocks,e),s.bs.pianoBlock.definitionBlocks(t.Blocks,e);var C=s.DetailsApp.customCategories,D=[s.bs.defaultBlocks.fieldXML(),` \n        <category name='Blockly Advanced'>\n        <category id="Audio" name="Audio">\n        ${s.bs.ttsBlock.fieldXML()}\n        ${s.bs.pianoBlock.fieldXML()}\n        </category>  \n            ${s.bs.filterBlocks.fieldXML()}\n                \n                ${s.bs.auth0Blocks.fieldXML()}\n                <category id="catConverters"  name="Converters">\n                ${s.bs.convertersBlocks.fieldXML()}\n              </category>    \n              <category id="catDates"  name="Dates">\n          ${s.bs.currentDateBlock.fieldXML()}\n          ${s.bs.dateFromTextBlock.fieldXML()}\n          ${s.bs.waitBlocks1.fieldXML()}\n          ${s.bs.waitBlocks2.fieldXML()}\n        </category>\n        <category id="catEmail"  name="Email">\n        ${s.bs.emailBlocks.fieldXML()}\n      </category>\n\n        <category id="catExporter"  name="Exporter">\n        ${s.bs.exportFileBlock.fieldXML()}\n      </category>\n              <category id="catGUI" name="GUI">\n              ${s.bs.guiBlocks.fieldXML()}\n              ${s.bs.chartBlock.fieldXML()}\n              </category>\n              <category id="catHTML" name="HTML">\n              <category name="GenHTML" id="Generate">\n              ${s.bs.htmlblocks.fieldXML()}\n              </category>\n              <category name="Parser" id="parseHTML">\n              ${s.bs.HTMLParserBlocks.fieldXML()}\n              </category>\n              </category>\n              <category name="Objects" id="objects">\n              ${s.bs.propBlocks.fieldXML()}\n              ${s.bs.createObjectBlocks.fieldXML()}\n              \n              </category>\n              <category id="XHR" name="Request">\n            ${s.bs.xhrBlocks.fieldXML()}\n            ${s.bs.windowsCreds.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${s.bs.waitBlocks1.fieldXML()}\n          ${s.bs.waitBlocks2.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${s.bs.trycatchFinBlock.fieldXML()}\n        ${s.bs.commentBlock.fieldXML()}\n          </category>\n        \n      `,`</category>\n      ${C}\n      \n      <category name="Swagger" id="catSwagger" expanded='false' >          \n          ${h}\n        </category> \n       \n        `];s.initialize(D)}else window.alert("gridElement is null")})()}SaveBlocks(){this.bh2.saveState(t.Xml,this.demoWorkspace,this.myId)}ShowBlocksDefinition(){return this.showCodeAndXML===nl.ShowBlocksDefinition}ShowSelection(){return nl[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==nl.ShowNone}ShowOutput(){return this.showCodeAndXML===nl.ShowOutput}ShowCode(){return this.showCodeAndXML===nl.ShowCode}ShowXML(){return this.showCodeAndXML===nl.ShowXML}CalculateXMLAndCode(){var s=t.Xml.workspaceToDom(this.demoWorkspace,!0),o=t.Xml.domToPrettyText(s);this.showJSCode=this.run.latestCode,this.showXMLCode=o;var l=this.parseTextForBlocks(o);this.showBlocksDefinition=l.map(h=>{try{return`Blockly.Blocks['${h}']={ init: \n`+t.Blocks[h].init.toString()+`};\n};\nBlockly.JavaScript['${h}']=`+e[h].toString()+";"}catch(D){return console.error("parse definition : "+h,D),"//Error for "+h}}).join("\n")}parseTextForBlocks(s){var o=[];if(s.indexOf('<block type="')>=0)for(var l=s.split('<block type="'),h=1;h<l.length;h++){var _=l[h].split('"')[0];o.push(_)}return o}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=nl.ShowNone,setTimeout(o=>{t.svgResize(o)},1e3,this.demoWorkspace)),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var s=window.prompt("Name?","blocks.txt");null!=s&&this.bh2.DownloadBlocks(t.Xml,this.demoWorkspace,s)}changeListener(s){this.readThis(s.target)}readThis(s){var o=s.files[0],l=new FileReader,h=this;l.onloadend=function(_){h.bh2.LoadFile(t.Xml,h.demoWorkspace,l.result),h.run.resetInterpreter()},l.readAsText(o)}CategorySwaggerHidden(s){return`<category name='swagger_hidden_${s}' hidden='true' >${s}</category>`}SaveToLocalAPI(){var s,o,l;if(0==((null===(o=null===(s=this.DetailsApp)||void 0===s?void 0:s.LocalAPI)||void 0===o?void 0:o.WasAlive)||!1))return this.LoadLocalAPI(),void window.alert("local api it is not yet loaded - please try again after loading");var h=t.Xml.workspaceToDom(this.demoWorkspace,!0),_=t.Xml.domToPrettyText(h),C=new I.q,D=window.prompt("name of the blocks?");null!=D&&(C.id=D,C.blocks="",C.categories="",C.description="",null===(l=this.DetailsApp.LocalAPI)||void 0===l||l.SaveBlock(C,_).subscribe(L=>{console.log("number blocks",L),window.alert("saved !")}))}LoadLocalAPI(){var s,o,l=this;return null===(o=null===(s=l.DetailsApp.LocalAPI)||void 0===s?void 0:s.IsAlive())||void 0===o?void 0:o.pipe((0,Ru.K)(h=>{var _;throw window.alert(`cannot load ${null===(_=l.DetailsApp.LocalAPI)||void 0===_?void 0:_.urL}`),h})).subscribe(h=>{var _;if(!h){if(!window.confirm("LocalAPI is not alive.\n Do you want to downlod and run ?"))return;l.DetailsApp.LocalAPI.download()}var C=(null===(_=l.DetailsApp.LocalAPI)||void 0===_?void 0:_.urL)||"";l.LoadSwaggerFromUrl(C+="swagger/v1/swagger.json").then(D=>{D.hasError?window.alert("error loading local api"):(D.name="LocalAPI",l.addToToolboxSwagger(D,this),window.alert("loaded successfully"))})})}initialize(s){var o,l,h,_;const C=document.getElementById("blocklyDiv"+this.myId);if(null!=C){var D=s.map(we=>`<sep></sep>${we}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">    \n    ${D}\n    </xml>`,this.demoWorkspace=t.inject(C,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML}),new E(this.demoWorkspace).init();var U=this;if(((null===(l=null===(o=this.DetailsApp.settings)||void 0===o?void 0:o.startBlocks)||void 0===l?void 0:l.length)||0)>0)try{var Z=((null===(h=this.DetailsApp.settings)||void 0===h?void 0:h.startBlocks)||[]).join("\n"),ue=t.Xml.textToDom(Z);t.Xml.clearWorkspaceAndLoadFromXml(ue,this.demoWorkspace)}catch(we){console.error("error when load default blocks",we)}(null===(_=this.DetailsApp.LocalAPI)||void 0===_?void 0:_.WasAlive)&&this.LoadSwaggerFromUrl(this.DetailsApp.LocalAPI.urL+"swagger/v1/swagger.json","LocalAutomation"),window.setTimeout(U.afterTimeout,2e3,this),this.bh=new dh(this.demoWorkspace,e),this.run=this.bh,U=this,this.demoWorkspace.addChangeListener(function(we){we.isUiEvent||(U.run.resetInterpreter(),U.run.generateCodeAndLoadIntoInterpreter(),U.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){this.bh2.restoreState(t.Xml,this.demoWorkspace,this.myId)}addToToolboxSwagger(s,o){var l,h=s.findCategSwaggerFromPaths().sort().map(we=>`<category name='${we}' custom='func_${s.name}_${we}'></category>`).join("\n"),_=(null==o?void 0:o.CategorySwaggerHidden(null==o?void 0:o.swaggerLoaded))||"",C=o.toolboxXML,D=`<category name='${s.name}'>\n<category name='API' id='func_${s.name}'>\n${h}\n</category>\n${s.categSwagger()}\n\n<category name='meta' id='meta_${s.name}'>\n<block type='meta_swagger_controllers_${s.name}'></block>\n<block type='meta_swagger_controllers_actions_${s.name}'></block>\n</category>\n\n</category>\n`;if(C=C.replace(_,D),o.swaggerLoaded++,o.toolboxXML=C,null===(l=null==o?void 0:o.demoWorkspace)||void 0===l||l.updateToolbox(C),null!=(null==o?void 0:o.demoWorkspace)){var U="objects_"+s.nameCategSwagger(),Z="AllApi_"+s.nameCategSwagger(),ue=s;o.demoWorkspace.registerToolboxCategoryCallback(U,we=>o.registerSwaggerBlocksObjects(we,ue)),o.demoWorkspace.registerToolboxCategoryCallback(Z,we=>o.registerSwaggerBlocksAPIAll(we,ue)),s.findCategSwaggerFromPaths().forEach(we=>{var Ze;null===(Ze=null==o?void 0:o.demoWorkspace)||void 0===Ze||Ze.registerToolboxCategoryCallback(`func_${s.name}_${we}`,ot=>o.registerSwaggerBlocksAPIControllers(ot,s,we))})}}afterTimeout(s){var o,l,h;if(s.loadedCompletely=!0,null!=(null==s?void 0:s.swaggerData))if(s.toolboxXML=s.toolboxXML.replace("Swagger",`Swagger(${s.swaggerData.length})`),s.swaggerData.forEach(L=>{s.addToToolboxSwagger(L,s)}),null!=(null==s?void 0:s.mustLoadDemoBlock))s.ShowDemo(null==s?void 0:s.mustLoadDemoBlock);else{if(((null===(l=null===(o=s.DetailsApp.settings)||void 0===o?void 0:o.startBlocks)||void 0===l?void 0:l.length)||0)>0)try{var C=((null===(h=s.DetailsApp.settings)||void 0===h?void 0:h.startBlocks)||[]).join("\n");if((null==C?void 0:C.length)>62){var D=t.Xml.textToDom(C);t.Xml.clearWorkspaceAndLoadFromXml(D,s.demoWorkspace)}}catch(L){console.log("error when load default blocks",L)}s.restoreBlocks()}}}return p.id=0,p.\u0275fac=function(s){return new(s||p)(Fe.Y36(Gm),Fe.Y36(Vd.d),Fe.Y36(Qp.F),Fe.Y36(ef.gz),Fe.Y36(mg.v),Fe.Y36(Wm.ux),Fe.Y36(Yu.uw))},p.\u0275cmp=Fe.Xpm({type:p,selectors:[["app-display-blockly"]],decls:79,vars:14,consts:[[4,"ngIf"],["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","id","downloadBlocks","color","primary",3,"matMenuTriggerFor"],["menuSave","matMenu"],[3,"inset"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"color","click"],["mat-raised-button","","color","warn","id","runButton",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","accent",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"id"],[3,"id"],["width","800","height","450",3,"id"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"]],template:function(s,o){if(1&s&&(Fe.YNc(0,vc,1,0,"mat-spinner",0),Fe.TgZ(1,"mat-grid-list",1),Fe.TgZ(2,"mat-grid-tile-header"),Fe.TgZ(3,"div",2),Fe.TgZ(4,"div",3),Fe.TgZ(5,"button",4),Fe.NdJ("click",function(){return o.LoadSwagger()}),Fe.TgZ(6,"mat-icon"),Fe._uU(7,"file_upload"),Fe.qZA(),Fe._uU(8," Load Swagger/OpenAPI "),Fe.qZA(),Fe._uU(9," \xa0 "),Fe.TgZ(10,"button",5),Fe.TgZ(11,"mat-icon"),Fe._uU(12,"save"),Fe.qZA(),Fe._uU(13," Save => "),Fe.qZA(),Fe.TgZ(14,"mat-menu",null,6),Fe.TgZ(16,"button",4),Fe.NdJ("click",function(){return o.SaveBlocks()}),Fe.TgZ(17,"mat-icon"),Fe._uU(18,"web"),Fe.qZA(),Fe._uU(19," Persist in browser "),Fe.qZA(),Fe._UZ(20,"mat-divider",7),Fe.TgZ(21,"button",8),Fe.NdJ("click",function(){return o.Download()}),Fe.TgZ(22,"mat-icon"),Fe._uU(23,"download"),Fe.qZA(),Fe._uU(24," Download blocks "),Fe.qZA(),Fe._UZ(25,"mat-divider",7),Fe.TgZ(26,"button",9),Fe.NdJ("click",function(){return o.SaveToLocalAPI()}),Fe.TgZ(27,"mat-icon"),Fe._uU(28,"save"),Fe.qZA(),Fe._uU(29," Save Local "),Fe.qZA(),Fe.qZA(),Fe._uU(30," \xa0 "),Fe.TgZ(31,"button",10),Fe.NdJ("click",function(){return o.RunCode()}),Fe.TgZ(32,"mat-icon"),Fe._uU(33,"play_arrow"),Fe.qZA(),Fe._uU(34," Execute "),Fe.qZA(),Fe._uU(35," \xa0 \xa0 "),Fe.TgZ(36,"input",11),Fe.NdJ("change",function(h){return o.changeListener(h)}),Fe.qZA(),Fe.TgZ(37,"button",4),Fe.NdJ("click",function(){return o.ShowInnerWorkings()}),Fe.TgZ(38,"mat-icon"),Fe._uU(39,"code"),Fe.qZA(),Fe._uU(40),Fe.qZA(),Fe.TgZ(41,"button",12),Fe.NdJ("click",function(){return o.ShowBlocks()}),Fe.TgZ(42,"mat-icon"),Fe._uU(43,"list"),Fe.qZA(),Fe._uU(44," Load Blocks "),Fe.qZA(),Fe.YNc(45,Ym,2,4,"a",13),Fe.qZA(),Fe.qZA(),Fe.qZA(),Fe.TgZ(46,"mat-grid-tile"),Fe._UZ(47,"div",14),Fe.qZA(),Fe.YNc(48,Xm,5,4,"mat-grid-tile",0),Fe.qZA(),Fe.TgZ(49,"mat-accordion"),Fe.TgZ(50,"mat-expansion-panel"),Fe.TgZ(51,"mat-expansion-panel-header"),Fe.TgZ(52,"mat-panel-title"),Fe._uU(53," Output Grid "),Fe.qZA(),Fe.TgZ(54,"mat-panel-description"),Fe._uU(55," Click to see grid of output values "),Fe.qZA(),Fe.qZA(),Fe._UZ(56,"div",15),Fe.qZA(),Fe.TgZ(57,"mat-expansion-panel"),Fe.TgZ(58,"mat-expansion-panel-header"),Fe.TgZ(59,"mat-panel-title"),Fe._uU(60," Chart "),Fe.qZA(),Fe.TgZ(61,"mat-panel-description"),Fe._uU(62," Click to see chart of output values "),Fe.qZA(),Fe.qZA(),Fe.TgZ(63,"p"),Fe._UZ(64,"canvas",16),Fe.qZA(),Fe.qZA(),Fe.TgZ(65,"mat-expansion-panel"),Fe.TgZ(66,"mat-expansion-panel-header"),Fe.TgZ(67,"mat-panel-title"),Fe._uU(68," HTML "),Fe.qZA(),Fe.TgZ(69,"mat-panel-description"),Fe._uU(70," Click to see output as HTML "),Fe.qZA(),Fe.qZA(),Fe._UZ(71,"div",15),Fe.qZA(),Fe.TgZ(72,"mat-expansion-panel"),Fe.TgZ(73,"mat-expansion-panel-header"),Fe.TgZ(74,"mat-panel-title"),Fe._uU(75," Text "),Fe.qZA(),Fe.TgZ(76,"mat-panel-description"),Fe._uU(77," Click to see output as Text "),Fe.qZA(),Fe.qZA(),Fe._UZ(78,"div",15),Fe.qZA(),Fe.qZA()),2&s){const l=Fe.MAs(15);Fe.Q6J("ngIf",!o.loadedCompletely),Fe.xp6(1),Fe.Q6J("cols",o.ShowSomething()?2:1),Fe.xp6(9),Fe.Q6J("matMenuTriggerFor",l),Fe.xp6(10),Fe.Q6J("inset",!0),Fe.xp6(5),Fe.Q6J("inset",!0),Fe.xp6(1),Fe.Q6J("color",null!=o.DetailsApp.LocalAPI&&o.DetailsApp.LocalAPI.WasAlive?"primary":"warn"),Fe.xp6(14),Fe.hij(" ",o.ShowSelection()," "),Fe.xp6(5),Fe.Q6J("ngIf",null==o.mustLoadDemoBlock?null:o.mustLoadDemoBlock.length),Fe.xp6(2),Fe.Q6J("id","blocklyDiv"+o.myId),Fe.xp6(1),Fe.Q6J("ngIf",o.ShowSomething()),Fe.xp6(8),Fe.Q6J("id","steps"+o.myId),Fe.xp6(8),Fe.Q6J("id","barchart"+o.myId),Fe.xp6(7),Fe.Q6J("id","htmlOutput"+o.myId),Fe.xp6(7),Fe.Q6J("id","htmlText"+o.myId)}},directives:[hd.O5,tp.Il,tp.$H,tp.jo,Wd.lW,tl.Hw,Th.p6,Th.VK,_g.d,tp.DX,Md.pp,Md.ib,Md.yz,Md.yK,Md.u4,tf.$g,Wd.zs,ef.yS,zm.C,el.JJ,el.On],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:400;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),p})()},2590:(li,ht,W)=>{"use strict";W.d(ht,{F:()=>a}),W(9646);var y=W(4004),t=W(8505),e=W(5e3),n=W(520);let a=(()=>{class f{constructor(I){this.http=I}getDemoBlocks(){var I=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${I}`,{responseType:"text"}).pipe((0,y.U)(Y=>JSON.parse(Y)))}getCustomCategories(){var I=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/customCategories.txt?${I}`,{responseType:"text"}).pipe((0,y.U)(Y=>Y.toString()))}getSwaggerLinks(){var I=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${I}`,{responseType:"text"}).pipe((0,y.U)(Y=>JSON.parse(Y)))}getDemoBlock(I){var Y=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${I}.txt?${Y}`,{responseType:"text"}).pipe((0,t.b)(_e=>{}),(0,y.U)(_e=>_e.toString()))}}return f.\u0275fac=function(I){return new(I||f)(e.LFG(n.eN))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},4255:(li,ht,W)=>{"use strict";var O=W(2313),y=W(5e3),t=W(3075),e=W(1083),n=W(5861),a=W(7423),f=W(3874),E=W(3251),I=W(9808);const Y=["vcr"];function ee(x,B){if(1&x&&(y.TgZ(0,"mat-icon",9),y._uU(1),y.qZA()),2&x){const m=y.oxw(2).$implicit;y.xp6(1),y.hij(" filter_",m+1,"")}}function _e(x,B){1&x&&(y.TgZ(0,"span"),y._uU(1,"W:{{number+1}"),y.qZA())}function De(x,B){if(1&x&&(y.YNc(0,ee,2,1,"mat-icon",7),y.YNc(1,_e,2,0,"span",8)),2&x){const m=y.oxw().$implicit;y.Q6J("ngIf",m<10),y.xp6(1),y.Q6J("ngIf",m>9)}}function Ae(x,B){}function Je(x,B){1&x&&(y.TgZ(0,"mat-tab",4),y.YNc(1,De,2,2,"ng-template",5),y.YNc(2,Ae,0,0,"ng-template",null,6,y.W1O),y.qZA()),2&x&&y.Q6J("label","W:"+(B.$implicit+1))}let st=(()=>{class x{constructor(m,M){this.fooInjector=m,this.resolver=M,this.data=[],this.selectedTabIndex=0,this.numbers=[0]}addTab(){this.numbers.push(this.numbers.length),this.selectedTabIndex=this.numbers.length-1}changeSelected(m){this.data.filter(M=>M==m).length>0||(this.data.push(m),this.loadBar(m).then(M=>{}))}ngAfterViewInit(){this.data.push(0),this.loadBar(0).then(m=>{})}loadBar(m){var M=this;return(0,n.Z)(function*(){var X;try{const kt=yield Promise.resolve().then(W.bind(W,7392)),hi=M.resolver.resolveComponentFactory(kt.DisplayBlocklyComponent);var he=null===(X=M.components)||void 0===X?void 0:X.get(m);null!=he&&he.createComponent(hi)}catch(kt){console.error("loading"+m,kt)}return m})()}ngOnInit(){}}return x.\u0275fac=function(m){return new(m||x)(y.Y36(y.zs3),y.Y36(y._Vd))},x.\u0275cmp=y.Xpm({type:x,selectors:[["app-blockly-studio"]],viewQuery:function(m,M){if(1&m&&y.Gf(Y,5,y.s_b),2&m){let X;y.iGM(X=y.CRH())&&(M.components=X)}},decls:7,vars:2,consts:[["mat-icon-button","","color","primary",3,"click"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"label"],["mat-tab-label",""],["vcr",""],["aria-hidden","false",4,"ngIf"],[4,"ngIf"],["aria-hidden","false"]],template:function(m,M){1&m&&(y.TgZ(0,"button",0),y.NdJ("click",function(){return M.addTab()}),y.TgZ(1,"mat-icon"),y._uU(2,"add_circle"),y.qZA(),y.qZA(),y.TgZ(3,"mat-tab-group",1),y.NdJ("selectedIndexChange",function(he){return M.changeSelected(he)}),y.YNc(4,Je,4,1,"mat-tab",2),y.qZA(),y.TgZ(5,"button",3),y.NdJ("click",function(){return M.addTab()}),y._uU(6,"Add"),y.qZA()),2&m&&(y.xp6(3),y.Q6J("selectedIndex",M.selectedTabIndex),y.xp6(1),y.Q6J("ngForOf",M.numbers))},directives:[a.lW,f.Hw,E.SP,I.sg,E.uX,E.uD,I.O5],styles:[""]}),x})();var Ge=W(7392);const lt=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:Ge.DisplayBlocklyComponent},{path:"automation/studio",component:st},{path:"automation/loadexample/:demoblock",component:Ge.DisplayBlocklyComponent}];let Rt=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[e.Bz.forRoot(lt)],e.Bz]}),x})();var Wt=W(8017),tt=W(5113),Oe=W(4004),Se=W(7579),Qe=W(6063);class dt extends Se.x{constructor(B=1/0,m=1/0,M=Qe.l){super(),this._bufferSize=B,this._windowTime=m,this._timestampProvider=M,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=m===1/0,this._bufferSize=Math.max(1,B),this._windowTime=Math.max(1,m)}next(B){const{isStopped:m,_buffer:M,_infiniteTimeWindow:X,_timestampProvider:he,_windowTime:kt}=this;m||(M.push(B),!X&&M.push(he.now()+kt)),this._trimBuffer(),super.next(B)}_subscribe(B){this._throwIfClosed(),this._trimBuffer();const m=this._innerSubscribe(B),{_infiniteTimeWindow:M,_buffer:X}=this,he=X.slice();for(let kt=0;kt<he.length&&!B.closed;kt+=M?1:2)B.next(he[kt]);return this._checkFinalizedStatuses(B),m}_trimBuffer(){const{_bufferSize:B,_timestampProvider:m,_buffer:M,_infiniteTimeWindow:X}=this,he=(X?1:2)*B;if(B<1/0&&he<M.length&&M.splice(0,M.length-he),!X){const kt=m.now();let hi=0;for(let Li=1;Li<M.length&&M[Li]<=kt;Li+=2)hi=Li;hi&&M.splice(0,hi+1)}}}var it=W(3099);let Re=(()=>{class x{constructor(){this.title="",this.footer="",this.startBlocks=[],this.tourSteps=[],this.latestVersion="",this.localAPI=""}}return x.version="2021.12.30.1600",x})();var ge=W(926),se=W(925),at=W(495),Be=W(508),ze=W(3191),St=W(1159),wt=W(4968),At=W(6451),$t=W(9300),Xt=W(9718),ti=W(2722),Wi=W(1884),pi=W(5698),Lt=W(8675),yi=W(8372),Ce=W(1777),vt=W(6360),Ne=W(5664),Ve=W(226);const de=["*"];function Te(x,B){if(1&x){const m=y.EpF();y.TgZ(0,"div",2),y.NdJ("click",function(){return y.CHM(m),y.oxw()._onBackdropClicked()}),y.qZA()}if(2&x){const m=y.oxw();y.ekj("mat-drawer-shown",m._isShowingBackdrop())}}function xt(x,B){1&x&&(y.TgZ(0,"mat-drawer-content"),y.Hsn(1,2),y.qZA())}const Kt=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Ft=["mat-drawer","mat-drawer-content","*"];function ke(x,B){if(1&x){const m=y.EpF();y.TgZ(0,"div",2),y.NdJ("click",function(){return y.CHM(m),y.oxw()._onBackdropClicked()}),y.qZA()}if(2&x){const m=y.oxw();y.ekj("mat-drawer-shown",m._isShowingBackdrop())}}function We(x,B){1&x&&(y.TgZ(0,"mat-sidenav-content",3),y.Hsn(1,2),y.qZA())}const _t=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Ue=["mat-sidenav","mat-sidenav-content","*"],et={transformDrawer:(0,Ce.X$)("transform",[(0,Ce.SB)("open, open-instant",(0,Ce.oB)({transform:"none",visibility:"visible"})),(0,Ce.SB)("void",(0,Ce.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Ce.eR)("void => open-instant",(0,Ce.jt)("0ms")),(0,Ce.eR)("void <=> open, open-instant => void",(0,Ce.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Xe=new y.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),Bt=new y.OlP("MAT_DRAWER_CONTAINER");let bi=(()=>{class x extends at.PQ{constructor(m,M,X,he,kt){super(X,he,kt),this._changeDetectorRef=m,this._container=M}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return x.\u0275fac=function(m){return new(m||x)(y.Y36(y.sBO),y.Y36((0,y.Gpc)(()=>ni)),y.Y36(y.SBq),y.Y36(at.mF),y.Y36(y.R0b))},x.\u0275cmp=y.Xpm({type:x,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(m,M){2&m&&y.Udp("margin-left",M._container._contentMargins.left,"px")("margin-right",M._container._contentMargins.right,"px")},features:[y.qOj],ngContentSelectors:de,decls:1,vars:0,template:function(m,M){1&m&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),x})(),si=(()=>{class x{constructor(m,M,X,he,kt,hi,Li,Yn){this._elementRef=m,this._focusTrapFactory=M,this._focusMonitor=X,this._platform=he,this._ngZone=kt,this._interactivityChecker=hi,this._doc=Li,this._container=Yn,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Se.x,this._animationEnd=new Se.x,this._animationState="void",this.openedChange=new y.vpe(!0),this._openedStream=this.openedChange.pipe((0,$t.h)(Ji=>Ji),(0,Oe.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,$t.h)(Ji=>Ji.fromState!==Ji.toState&&0===Ji.toState.indexOf("open")),(0,Xt.h)(void 0)),this._closedStream=this.openedChange.pipe((0,$t.h)(Ji=>!Ji),(0,Oe.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,$t.h)(Ji=>Ji.fromState!==Ji.toState&&"void"===Ji.toState),(0,Xt.h)(void 0)),this._destroyed=new Se.x,this.onPositionChanged=new y.vpe,this._modeChanged=new Se.x,this.openedChange.subscribe(Ji=>{Ji?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,wt.R)(this._elementRef.nativeElement,"keydown").pipe((0,$t.h)(Ji=>Ji.keyCode===St.hY&&!this.disableClose&&!(0,St.Vb)(Ji)),(0,ti.R)(this._destroyed)).subscribe(Ji=>this._ngZone.run(()=>{this.close(),Ji.stopPropagation(),Ji.preventDefault()}))}),this._animationEnd.pipe((0,Wi.x)((Ji,hs)=>Ji.fromState===hs.fromState&&Ji.toState===hs.toState)).subscribe(Ji=>{const{fromState:hs,toState:ms}=Ji;(0===ms.indexOf("open")&&"void"===hs||"void"===ms&&0===hs.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(m){(m="end"===m?"end":"start")!=this._position&&(this._position=m,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(m){this._mode=m,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(m){this._disableClose=(0,ze.Ig)(m)}get autoFocus(){const m=this._autoFocus;return null==m?"side"===this.mode?"dialog":"first-tabbable":m}set autoFocus(m){("true"===m||"false"===m||null==m)&&(m=(0,ze.Ig)(m)),this._autoFocus=m}get opened(){return this._opened}set opened(m){this.toggle((0,ze.Ig)(m))}_forceFocus(m,M){this._interactivityChecker.isFocusable(m)||(m.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{m.addEventListener("blur",()=>m.removeAttribute("tabindex")),m.addEventListener("mousedown",()=>m.removeAttribute("tabindex"))})),m.focus(M)}_focusByCssSelector(m,M){let X=this._elementRef.nativeElement.querySelector(m);X&&this._forceFocus(X,M)}_takeFocus(){if(!this._focusTrap)return;const m=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(M=>{!M&&"function"==typeof this._elementRef.nativeElement.focus&&m.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(m){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,m):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var m;const M=null===(m=this._doc)||void 0===m?void 0:m.activeElement;return!!M&&this._elementRef.nativeElement.contains(M)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(m){return this.toggle(!0,m)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(m=!this.opened,M){m&&M&&(this._openedVia=M);const X=this._setOpen(m,!m&&this._isFocusWithinDrawer(),this._openedVia||"program");return m||(this._openedVia=null),X}_setOpen(m,M,X){return this._opened=m,m?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",M&&this._restoreFocus(X)),this._updateFocusTrapState(),new Promise(he=>{this.openedChange.pipe((0,pi.q)(1)).subscribe(kt=>he(kt?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return x.\u0275fac=function(m){return new(m||x)(y.Y36(y.SBq),y.Y36(Ne.qV),y.Y36(Ne.tE),y.Y36(se.t4),y.Y36(y.R0b),y.Y36(Ne.ic),y.Y36(I.K0,8),y.Y36(Bt,8))},x.\u0275cmp=y.Xpm({type:x,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(m,M){1&m&&y.WFA("@transform.start",function(he){return M._animationStarted.next(he)})("@transform.done",function(he){return M._animationEnd.next(he)}),2&m&&(y.uIk("align",null),y.d8E("@transform",M._animationState),y.ekj("mat-drawer-end","end"===M.position)("mat-drawer-over","over"===M.mode)("mat-drawer-push","push"===M.mode)("mat-drawer-side","side"===M.mode)("mat-drawer-opened",M.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:de,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(m,M){1&m&&(y.F$t(),y.TgZ(0,"div",0),y.Hsn(1),y.qZA())},directives:[at.PQ],encapsulation:2,data:{animation:[et.transformDrawer]},changeDetection:0}),x})(),ni=(()=>{class x{constructor(m,M,X,he,kt,hi=!1,Li){this._dir=m,this._element=M,this._ngZone=X,this._changeDetectorRef=he,this._animationMode=Li,this._drawers=new y.n_E,this.backdropClick=new y.vpe,this._destroyed=new Se.x,this._doCheckSubject=new Se.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Se.x,m&&m.change.pipe((0,ti.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),kt.change().pipe((0,ti.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=hi}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(m){this._autosize=(0,ze.Ig)(m)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(m){this._backdropOverride=null==m?null:(0,ze.Ig)(m)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Lt.O)(this._allDrawers),(0,ti.R)(this._destroyed)).subscribe(m=>{this._drawers.reset(m.filter(M=>!M._container||M._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Lt.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(m=>{this._watchDrawerToggle(m),this._watchDrawerPosition(m),this._watchDrawerMode(m)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,yi.b)(10),(0,ti.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(m=>m.open())}close(){this._drawers.forEach(m=>m.close())}updateContentMargins(){let m=0,M=0;if(this._left&&this._left.opened)if("side"==this._left.mode)m+=this._left._getWidth();else if("push"==this._left.mode){const X=this._left._getWidth();m+=X,M-=X}if(this._right&&this._right.opened)if("side"==this._right.mode)M+=this._right._getWidth();else if("push"==this._right.mode){const X=this._right._getWidth();M+=X,m-=X}m=m||null,M=M||null,(m!==this._contentMargins.left||M!==this._contentMargins.right)&&(this._contentMargins={left:m,right:M},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(m){m._animationStarted.pipe((0,$t.h)(M=>M.fromState!==M.toState),(0,ti.R)(this._drawers.changes)).subscribe(M=>{"open-instant"!==M.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==m.mode&&m.openedChange.pipe((0,ti.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(m.opened))}_watchDrawerPosition(m){!m||m.onPositionChanged.pipe((0,ti.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,pi.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(m){m&&m._modeChanged.pipe((0,ti.R)((0,At.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(m){const M=this._element.nativeElement.classList,X="mat-drawer-container-has-open";m?M.add(X):M.remove(X)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(m=>{"end"==m.position?this._end=m:this._start=m}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(m=>m&&!m.disableClose&&this._canHaveBackdrop(m)).forEach(m=>m._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(m){return"side"!==m.mode||!!this._backdropOverride}_isDrawerOpen(m){return null!=m&&m.opened}}return x.\u0275fac=function(m){return new(m||x)(y.Y36(Ve.Is,8),y.Y36(y.SBq),y.Y36(y.R0b),y.Y36(y.sBO),y.Y36(at.rL),y.Y36(Xe),y.Y36(vt.Qb,8))},x.\u0275cmp=y.Xpm({type:x,selectors:[["mat-drawer-container"]],contentQueries:function(m,M,X){if(1&m&&(y.Suo(X,bi,5),y.Suo(X,si,5)),2&m){let he;y.iGM(he=y.CRH())&&(M._content=he.first),y.iGM(he=y.CRH())&&(M._allDrawers=he)}},viewQuery:function(m,M){if(1&m&&y.Gf(bi,5),2&m){let X;y.iGM(X=y.CRH())&&(M._userContent=X.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(m,M){2&m&&y.ekj("mat-drawer-container-explicit-backdrop",M._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[y._Bn([{provide:Bt,useExisting:x}])],ngContentSelectors:Ft,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(m,M){1&m&&(y.F$t(Kt),y.YNc(0,Te,1,2,"div",0),y.Hsn(1),y.Hsn(2,1),y.YNc(3,xt,2,0,"mat-drawer-content",1)),2&m&&(y.Q6J("ngIf",M.hasBackdrop),y.xp6(3),y.Q6J("ngIf",!M._content))},directives:[I.O5,bi],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),x})(),sn=(()=>{class x extends bi{constructor(m,M,X,he,kt){super(m,M,X,he,kt)}}return x.\u0275fac=function(m){return new(m||x)(y.Y36(y.sBO),y.Y36((0,y.Gpc)(()=>Ln)),y.Y36(y.SBq),y.Y36(at.mF),y.Y36(y.R0b))},x.\u0275cmp=y.Xpm({type:x,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(m,M){2&m&&y.Udp("margin-left",M._container._contentMargins.left,"px")("margin-right",M._container._contentMargins.right,"px")},features:[y.qOj],ngContentSelectors:de,decls:1,vars:0,template:function(m,M){1&m&&(y.F$t(),y.Hsn(0))},encapsulation:2,changeDetection:0}),x})(),xi=(()=>{class x extends si{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(m){this._fixedInViewport=(0,ze.Ig)(m)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(m){this._fixedTopGap=(0,ze.su)(m)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(m){this._fixedBottomGap=(0,ze.su)(m)}}return x.\u0275fac=function(){let B;return function(M){return(B||(B=y.n5z(x)))(M||x)}}(),x.\u0275cmp=y.Xpm({type:x,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(m,M){2&m&&(y.uIk("align",null),y.Udp("top",M.fixedInViewport?M.fixedTopGap:null,"px")("bottom",M.fixedInViewport?M.fixedBottomGap:null,"px"),y.ekj("mat-drawer-end","end"===M.position)("mat-drawer-over","over"===M.mode)("mat-drawer-push","push"===M.mode)("mat-drawer-side","side"===M.mode)("mat-drawer-opened",M.opened)("mat-sidenav-fixed",M.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[y.qOj],ngContentSelectors:de,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(m,M){1&m&&(y.F$t(),y.TgZ(0,"div",0),y.Hsn(1),y.qZA())},directives:[at.PQ],encapsulation:2,data:{animation:[et.transformDrawer]},changeDetection:0}),x})(),Ln=(()=>{class x extends ni{}return x.\u0275fac=function(){let B;return function(M){return(B||(B=y.n5z(x)))(M||x)}}(),x.\u0275cmp=y.Xpm({type:x,selectors:[["mat-sidenav-container"]],contentQueries:function(m,M,X){if(1&m&&(y.Suo(X,sn,5),y.Suo(X,xi,5)),2&m){let he;y.iGM(he=y.CRH())&&(M._content=he.first),y.iGM(he=y.CRH())&&(M._allDrawers=he)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(m,M){2&m&&y.ekj("mat-drawer-container-explicit-backdrop",M._backdropOverride)},exportAs:["matSidenavContainer"],features:[y._Bn([{provide:Bt,useExisting:x}]),y.qOj],ngContentSelectors:Ue,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(m,M){1&m&&(y.F$t(_t),y.YNc(0,ke,1,2,"div",0),y.Hsn(1),y.Hsn(2,1),y.YNc(3,We,2,0,"mat-sidenav-content",1)),2&m&&(y.Q6J("ngIf",M.hasBackdrop),y.xp6(3),y.Q6J("ngIf",!M._content))},directives:[I.O5,sn,at.PQ],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),x})(),Vi=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[I.ez,Be.BQ,se.ud,at.ZD],at.ZD,Be.BQ]}),x})();const Ni=["*",[["mat-toolbar-row"]]],Zi=["*","mat-toolbar-row"],Mi=(0,Be.pj)(class{constructor(x){this._elementRef=x}});let fn=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275dir=y.lG2({type:x,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),x})(),$i=(()=>{class x extends Mi{constructor(m,M,X){super(m),this._platform=M,this._document=X}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return x.\u0275fac=function(m){return new(m||x)(y.Y36(y.SBq),y.Y36(se.t4),y.Y36(I.K0))},x.\u0275cmp=y.Xpm({type:x,selectors:[["mat-toolbar"]],contentQueries:function(m,M,X){if(1&m&&y.Suo(X,fn,5),2&m){let he;y.iGM(he=y.CRH())&&(M._toolbarRows=he)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(m,M){2&m&&y.ekj("mat-toolbar-multiple-rows",M._toolbarRows.length>0)("mat-toolbar-single-row",0===M._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[y.qOj],ngContentSelectors:Zi,decls:2,vars:0,template:function(m,M){1&m&&(y.F$t(Ni),y.Hsn(0),y.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),x})(),jt=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[Be.BQ],Be.BQ]}),x})();W(449);var be=W(4834);const te=["*"],Ke=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],yt=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Gt=(0,Be.Id)((0,Be.Kr)(class{})),Mt=(0,Be.Kr)(class{}),ut=new y.OlP("MatList"),Ut=new y.OlP("MatNavList");let ui=(()=>{class x extends Gt{constructor(){super(...arguments),this._stateChanges=new Se.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return x.\u0275fac=function(){let B;return function(M){return(B||(B=y.n5z(x)))(M||x)}}(),x.\u0275cmp=y.Xpm({type:x,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[y._Bn([{provide:Ut,useExisting:x}]),y.qOj,y.TTD],ngContentSelectors:te,decls:1,vars:0,template:function(m,M){1&m&&(y.F$t(),y.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),x})(),un=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275dir=y.lG2({type:x,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),x})(),jn=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275dir=y.lG2({type:x,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),x})(),Ls=(()=>{class x extends Mt{constructor(m,M,X,he){super(),this._element=m,this._isInteractiveList=!1,this._destroyed=new Se.x,this._disabled=!1,this._isInteractiveList=!!(X||he&&"action-list"===he._getListType()),this._list=X||he;const kt=this._getHostElement();"button"===kt.nodeName.toLowerCase()&&!kt.hasAttribute("type")&&kt.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,ti.R)(this._destroyed)).subscribe(()=>{M.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(m){this._disabled=(0,ze.Ig)(m)}ngAfterContentInit(){(0,Be.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return x.\u0275fac=function(m){return new(m||x)(y.Y36(y.SBq),y.Y36(y.sBO),y.Y36(Ut,8),y.Y36(ut,8))},x.\u0275cmp=y.Xpm({type:x,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(m,M,X){if(1&m&&(y.Suo(X,un,5),y.Suo(X,jn,5),y.Suo(X,Be.X2,5)),2&m){let he;y.iGM(he=y.CRH())&&(M._avatar=he.first),y.iGM(he=y.CRH())&&(M._icon=he.first),y.iGM(he=y.CRH())&&(M._lines=he)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(m,M){2&m&&y.ekj("mat-list-item-disabled",M.disabled)("mat-list-item-avatar",M._avatar||M._icon)("mat-list-item-with-avatar",M._avatar||M._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[y.qOj],ngContentSelectors:yt,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(m,M){1&m&&(y.F$t(Ke),y.TgZ(0,"div",0),y._UZ(1,"div",1),y.Hsn(2),y.TgZ(3,"div",2),y.Hsn(4,1),y.qZA(),y.Hsn(5,2),y.qZA()),2&m&&(y.xp6(1),y.Q6J("matRippleTrigger",M._getHostElement())("matRippleDisabled",M._isRippleDisabled()))},directives:[Be.wG],encapsulation:2,changeDetection:0}),x})(),ii=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[Be.uc,Be.si,Be.BQ,Be.us,I.ez],Be.uc,Be.BQ,Be.us,be.t]}),x})();var gn=W(1125),Wn=W(2181);const fs=function(x){return["/","automation","loadexample",x]};function Zn(x,B){if(1&x&&(y.TgZ(0,"a",24),y.TgZ(1,"mat-icon"),y._uU(2," https "),y.qZA(),y._uU(3),y.qZA()),2&x){const m=B.index,M=B.$implicit;y.Q6J("routerLink",y.VKq(3,fs,M.id)),y.xp6(3),y.AsE(" ",m+1," ",M.description,"")}}function is(x,B){if(1&x){const m=y.EpF();y.TgZ(0,"button",26),y.NdJ("click",function(){return y.CHM(m),y.oxw(),y.MAs(2).toggle()}),y.TgZ(1,"mat-icon",27),y._uU(2,"menu"),y.qZA(),y.qZA()}}function Ss(x,B){if(1&x&&(y.TgZ(0,"span",28),y._uU(1),y.qZA()),2&x){const m=y.oxw();y.xp6(1),y.AsE(" ",m.version," => ",m.latestVersion," ")}}const ss=function(){return["/","automation","studio"]},_i=function(){return["/","automation","main"]};let ln=(()=>{class x{constructor(m,M,X){this.breakpointObserver=m,this.details=M,this.ta=X,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe(tt.u3.Handset).pipe((0,Oe.U)(he=>he.matches||!0),function(x,B,m){let he,kt=!1;return he=1/0,(0,it.B)({connector:()=>new dt(he,B,m),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:kt})}()),this.version=Re.version,this.latestVersion="",this.title="Blockly Automation",this.footer="",this.standalone=!1}ngOnInit(){var m,M,X,he,kt;this.latestVersion=null===(m=this.details.settings)||void 0===m?void 0:m.latestVersion,this.demoBlocks=this.details.demoBlocks.sort((hi,Li)=>hi.description.localeCompare(Li.description)),this.title=(null===(X=null===(M=this.details)||void 0===M?void 0:M.settings)||void 0===X?void 0:X.title)||"Blockly Automation",this.footer=(null===(kt=null===(he=this.details)||void 0===he?void 0:he.settings)||void 0===kt?void 0:kt.footer)||"",(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&(this.standalone=!0)}executeOnDisplayBlockly(m){this.ta.sendDataToServer("DisplayBlocklyComponent",m)}}return x.\u0275fac=function(m){return new(m||x)(y.Y36(tt.Yg),y.Y36(Wt.d),y.Y36(ge.v))},x.\u0275cmp=y.Xpm({type:x,selectors:[["app-primary-navig"]],decls:84,vars:27,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-mini-fab","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","",4,"ngIf"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip/","target","_blank"],["mat-list-item","","href","http://ba.serviciipeweb.ro/","target","_blank"],["mat-list-item","","href","https://www.microsoft.com/en-us/p/blocklyautomation/9mxnwjt6zpd0","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],[1,"main-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item",""]],template:function(m,M){if(1&m&&(y.TgZ(0,"mat-sidenav-container",0),y.TgZ(1,"mat-sidenav",1,2),y.ALo(3,"async"),y.ALo(4,"async"),y.ALo(5,"async"),y.TgZ(6,"mat-toolbar"),y.TgZ(7,"a",3),y._uU(8,"Menu"),y.qZA(),y.qZA(),y.TgZ(9,"mat-nav-list"),y.TgZ(10,"a",4),y.TgZ(11,"mat-icon"),y._uU(12," source "),y.qZA(),y._uU(13," Github"),y.qZA(),y._UZ(14,"mat-divider"),y.TgZ(15,"a",5),y.TgZ(16,"mat-icon"),y._uU(17," https "),y.qZA(),y._uU(18," Demo online"),y.qZA(),y._UZ(19,"mat-divider"),y.TgZ(20,"mat-expansion-panel"),y.TgZ(21,"mat-expansion-panel-header"),y.TgZ(22,"mat-panel-title"),y._uU(23),y.qZA(),y.qZA(),y.YNc(24,Zn,4,5,"a",6),y.qZA(),y.qZA(),y.qZA(),y.TgZ(25,"mat-sidenav-content"),y.TgZ(26,"mat-toolbar",7),y.YNc(27,is,3,0,"button",8),y.ALo(28,"async"),y.TgZ(29,"span",9),y._uU(30),y.qZA(),y._UZ(31,"span",10),y.TgZ(32,"button",11),y.NdJ("click",function(){return M.executeOnDisplayBlockly("createIntro")}),y.TgZ(33,"mat-icon"),y._uU(34," help_outline "),y.qZA(),y.qZA(),y.TgZ(35,"button",12),y.TgZ(36,"mat-icon"),y._uU(37," file_download "),y.qZA(),y.qZA(),y.TgZ(38,"mat-menu",null,13),y.YNc(40,Ss,2,2,"span",14),y.TgZ(41,"a",15),y._uU(42," Download HTML"),y.qZA(),y.TgZ(43,"a",16),y._uU(44," Download Linux"),y.qZA(),y.TgZ(45,"a",17),y._uU(46," Download Windows"),y.qZA(),y.TgZ(47,"a",18),y._uU(48," Download IIS"),y.qZA(),y.TgZ(49,"a",19),y._uU(50," Download LocalAPI"),y.qZA(),y.TgZ(51,"a",20),y._uU(52," Download WPF"),y.qZA(),y.TgZ(53,"a",21),y._uU(54," Store"),y.qZA(),y.qZA(),y.TgZ(55,"button",22),y.TgZ(56,"mat-icon"),y._uU(57," source "),y.qZA(),y.qZA(),y.TgZ(58,"mat-menu",null,23),y.TgZ(60,"a",24),y.TgZ(61,"mat-icon"),y._uU(62," star "),y.qZA(),y._uU(63,"Studio "),y.qZA(),y.TgZ(64,"a",24),y.TgZ(65,"mat-icon"),y._uU(66," star_half "),y.qZA(),y._uU(67,"Single "),y.qZA(),y.TgZ(68,"a",4),y.TgZ(69,"mat-icon"),y._uU(70," source "),y.qZA(),y._uU(71," Github"),y.qZA(),y._UZ(72,"mat-divider"),y.TgZ(73,"a",5),y.TgZ(74,"mat-icon"),y._uU(75," https "),y.qZA(),y._uU(76," Demo online"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(77,"div",25),y._UZ(78,"router-outlet"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(79,"footer"),y.TgZ(80,"small"),y._uU(81),y.qZA(),y.TgZ(82,"small"),y._uU(83),y.qZA(),y.qZA()),2&m){const X=y.MAs(39),he=y.MAs(59);y.xp6(1),y.Q6J("mode",y.lcZ(4,19,M.isHandset$)?"over":"side")("opened",!1===y.lcZ(5,21,M.isHandset$)),y.uIk("role",y.lcZ(3,17,M.isHandset$)?"dialog":"navigation"),y.xp6(22),y.hij(" Demos ",M.demoBlocks.length," "),y.xp6(1),y.Q6J("ngForOf",M.demoBlocks),y.xp6(3),y.Q6J("ngIf",y.lcZ(28,23,M.isHandset$)),y.xp6(2),y.s9C("title",M.version),y.xp6(1),y.Oqu(M.title),y.xp6(5),y.Q6J("matMenuTriggerFor",X),y.xp6(5),y.Q6J("ngIf",M.version!=M.latestVersion),y.xp6(15),y.Q6J("matMenuTriggerFor",he),y.xp6(5),y.Q6J("routerLink",y.DdM(25,ss)),y.xp6(4),y.Q6J("routerLink",y.DdM(26,_i)),y.xp6(17),y.Oqu(M.footer),y.xp6(2),y.lnq("",M.standalone?"standalone":"browser"," ",M.version," -> ",M.latestVersion,"")}},directives:[Ln,xi,$i,Ls,e.yS,ui,f.Hw,be.d,gn.ib,gn.yz,gn.yK,I.sg,sn,I.O5,a.lW,Wn.p6,Wn.VK,e.lC],pipes:[I.Ov],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),x})(),yn=(()=>{class x{constructor(m,M){var X,he;this.titleService=m,this.title="AutoBlocklyApp",console.log(null===(X=M.settings)||void 0===X?void 0:X.title),this.titleService.setTitle((null===(he=M.settings)||void 0===he?void 0:he.title)||"")}}return x.\u0275fac=function(m){return new(m||x)(y.Y36(O.Dx),y.Y36(Wt.d))},x.\u0275cmp=y.Xpm({type:x,selectors:[["app-root"]],decls:1,vars:0,template:function(m,M){1&m&&y._UZ(0,"app-primary-navig")},directives:[ln],styles:[""]}),x})();var Le=W(520),pt=W(1079);let En=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[Ne.rt,Be.BQ],Be.BQ]}),x})();var Sn=W(1314),dn=W(7429);let Vn=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[Sn.U8,Be.BQ,dn.eL],Be.BQ]}),x})(),Tr=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[Be.BQ,Be.si],Be.BQ]}),x})(),lr=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[Be.BQ],Be.BQ]}),x})();var ls=W(7144);let le=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({}),x})(),Tt=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[Be.si,Be.BQ,ls.Q8,le],Be.BQ,le]}),x})();var Jt=W(7322);const Bo=new y.OlP("mat-chips-default-options");let Q=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({providers:[Be.rD,{provide:Bo,useValue:{separatorKeyCodes:[St.K5]}}],imports:[[Be.BQ]]}),x})(),kn=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[Ve.vT]]}),x})(),sr=(()=>{class x{constructor(){this.changes=new Se.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return x.\u0275fac=function(m){return new(m||x)},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();const sl={provide:sr,deps:[[new y.FiY,new y.tp0,sr]],useFactory:function(x){return x||new sr}};let ia=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({providers:[sl,Be.rD],imports:[[Be.BQ,I.ez,dn.eL,a.ot,kn,f.Ps,Be.si],Be.BQ]}),x})();W(727);var Il=W(7531);let Lc=(()=>{class x{constructor(){this.changes=new Se.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(m,M){return`${m} \u2013 ${M}`}}return x.\u0275fac=function(m){return new(m||x)},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();const Qu={provide:new y.OlP("mat-datepicker-scroll-strategy"),deps:[Sn.aV],useFactory:function(x){return()=>x.scrollStrategies.reposition()}};let Fl=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({providers:[Lc,Qu],imports:[[I.ez,a.ot,Sn.U8,Ne.rt,dn.eL,Be.BQ],at.ZD]}),x})();var Fc=W(8966),Bl=W(3954);const xc={provide:new y.OlP("mat-select-scroll-strategy"),deps:[Sn.aV],useFactory:function(x){return()=>x.scrollStrategies.reposition()}};let yl=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({providers:[xc],imports:[[I.ez,Sn.U8,Be.Ng,Be.BQ],at.ZD,Jt.lN,Be.Ng,Be.BQ]}),x})();const Ma={provide:new y.OlP("mat-tooltip-scroll-strategy"),deps:[Sn.aV],useFactory:function(x){return()=>x.scrollStrategies.reposition({scrollThrottle:20})}};let Na=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({providers:[Ma],imports:[[Ne.rt,I.ez,Sn.U8,Be.BQ],Be.BQ,at.ZD]}),x})(),Fa=(()=>{class x{constructor(){this.changes=new Se.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(m,M,X)=>{if(0==X||0==M)return`0 of ${X}`;const he=m*M;return`${he+1} \u2013 ${he<(X=Math.max(X,0))?Math.min(he+M,X):he+M} of ${X}`}}}return x.\u0275fac=function(m){return new(m||x)},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();const vu={provide:Fa,deps:[[new y.FiY,new y.tp0,Fa]],useFactory:function(x){return x||new Fa}};let xe=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({providers:[vu],imports:[[I.ez,a.ot,yl,Na,Be.BQ]]}),x})(),Rn=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[I.ez,Be.BQ],Be.BQ]}),x})();var vn=W(773);let Pu=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[Be.si,Be.BQ],Be.BQ]}),x})(),dc=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[I.ez,Be.BQ],Be.BQ]}),x})(),wu=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({}),x})(),Vu=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[wu,Be.si,Be.BQ,ls.Q8],wu,Be.BQ]}),x})();var Er=W(7261);let Jl=(()=>{class x{constructor(){this.changes=new Se.x}}return x.\u0275fac=function(m){return new(m||x)},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();const Su={provide:Jl,deps:[[new y.FiY,new y.tp0,Jl]],useFactory:function(x){return x||new Jl}};let Bd=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({providers:[Su],imports:[[I.ez,Be.BQ]]}),x})();W(2076),W(1135),W(8306),W(576),W(9646);let cd=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[at.Cl]]}),x})(),ch=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[cd,Be.BQ],Be.BQ]}),x})(),md=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({}),x})(),Ao=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x}),x.\u0275inj=y.cJS({imports:[[md,Be.BQ],Be.BQ]}),x})();var bd=W(33);let hh=(()=>{class x{}return x.\u0275fac=function(m){return new(m||x)},x.\u0275mod=y.oAB({type:x,bootstrap:[yn]}),x.\u0275inj=y.cJS({providers:[Wt.d,ge.v,{provide:y.ip1,useFactory:Vh,deps:[Wt.d],multi:!0}],imports:[[O.b2,bd.k,Rt,t.u5,t.UX,vt.PW,dc,a.ot,Le.JF,pt.Bb,En,Vn,a.ot,Tr,lr,Tt,Q,ia,Fl,Fc.Is,be.t,gn.To,Bl.N6,f.Ps,Il.c,ii,Wn.Tx,Be.XK,xe,Rn,vn.Cq,Pu,Be.si,yl,Vi,dc,Vu,Er.ZX,Bd,ch,E.Nh,jt,Na,Ao,jt,a.ot,Vi,f.Ps,ii]]}),x})();function Vh(x){return()=>x.Init()}(0,y.G48)(),O.q6().bootstrapModule(hh).catch(x=>console.error(x))},1707:(li,ht,W)=>{"use strict";W.d(ht,{L:()=>t});var O=W(5861),y=W(6279);class t{constructor(n){this.swaggerUrl=n,this.GenerateBlocks=[],this.GenerateFunctions=[],this.fieldXMLObjects=[],this.fieldXMLFunctions=[],this.hasError=!0,this.paths=[],this.name="",this.operations=[],this.basePath="",this.tagsSwagger=[],this.openApiDocument=null,this.cacheCategSwaggerFromPaths=[]}ParseSwagger(){var n=this;return(0,O.Z)(function*(){var a,f=n;f.fieldXMLObjects.push(`<label text="${f.swaggerUrl}"></label>`),f.fieldXMLFunctions.push({id:"",gui:`<label text="${f.swaggerUrl}"></label>`});var E=null;try{var I=yield W(Object(function(){var Ae=new Error("Cannot find module 'swagger-client'");throw Ae.code="MODULE_NOT_FOUND",Ae}())).default(n.swaggerUrl);E=I.spec}catch(_e){return console.error(`parseSwagger ${n.swaggerUrl}`,_e),f.fieldXMLObjects.push("<label text='Error parsing!'></label>"),n}n.hasError=!1,n.basePath=E.basePath||"";var Y=null===(a=E.components)||void 0===a?void 0:a.schemas;return(null==Y||null==Y)&&(Y=E.definitions),Y?Object.keys(Y).sort().forEach(function(_e){var De=Y[_e],Ae=f.findProperties(De),Je=`<block type="${_e}">`;Ae.forEach(function(st){if(st.value&&st.value.type){var Ge=f.GenerateShadowField(st.value.type,st.key,null);Ge.length>0&&(Je+=`<value name="val_${st.key}">${Ge}</value>`)}}),f.fieldXMLObjects.push(Je+="</block>"),f.GenerateBlocks.push(f.GenerateBlock(De,_e))}):console.log("_A",E),E.paths&&Object.keys(E.paths).forEach(function(_e){var De=E.paths[_e];f.paths.push({id:_e,nrOps:Object.keys(De).length}),Object.keys(De).forEach(function(Ae){f.GenerateFunctions.push(f.GenerateFunction(De,_e,De[Ae],Ae))})}),f.openApiDocument=E,f})()}categSwagger(){var n=this.findHostNameRegular();(n=n.split(".").join("")).length>5&&n.substring(0,5);var E=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+E+'"></category><category name="AllApi" custom="AllApi_'+E+'"></category>'}GenerateBlock(n,a){var f=this,E=a,Y=f.findProperties(n);return function(ee,_e){ee[E]={init:function(){var De=!1,Ae=[];n.enum&&(De=!0,Ae=Object.keys(n.enum).map(n["x-enumNames"]?Ge=>[n["x-enumNames"][Ge],Ge]:Ge=>[n.enum[Ge],Ge]));var st=this.appendDummyInput().appendField(a);De?(Ae=Ae.map(Ge=>{var lt,Rt;return[null===(lt=Ge[0])||void 0===lt?void 0:lt.toString(),null===(Rt=Ge[1])||void 0===Rt?void 0:Rt.toString()]}),st.appendField(new y.FieldDropdown(Ae),`val_${a}`)):Y.forEach(Ge=>{var lt,Rt=Ge.key;if(Ge.value.nullable&&0==Ge.value.nullable&&(Rt+="*"),null===(lt=Ge.value)||void 0===lt?void 0:lt.type){var Wt=Ge.value.type||"";if("object"==Wt){var tt=Ge.value.$$ref||"";tt.length>0&&(Wt=tt.substring(tt.lastIndexOf("/")+1))}Rt+=":"+Wt}Ge.value.$ref&&(Rt+="->"+Ge.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${Ge.key}`).appendField(`${Rt}`)}),this.setOutput(!0,E)}},_e[E]=function(De){{var Ae=!1;n.enum&&(Ae=!0);var Je=f.findProperties(n);const Rt=99,Wt=0;var st="",Ge=[];return Je.forEach(tt=>{let Oe=_e.valueToCode(De,`val_${tt.key}`,Wt);""===Oe&&(Oe="null"),null==Oe&&(Oe="null"),Ge.push(`"${tt.key}":${Oe}`)}),st="{ "+Ge.join(",")+" }",Ae&&(st=De.getFieldValue(`val_${a}`)),[st,Rt]}}}}findRootSite(){var n,a,f="";if((null===(a=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===a?void 0:a.length)>0){var E=this.openApiDocument.host;f=Array.isArray(E)?this.openApiDocument.schemes[0]+"://"+E[0]:this.openApiDocument.schemes[0]+"://"+E}else f=this.swaggerUrl;var I="";if(f.startsWith("http://")||f.startsWith("https://")){var Y=new URL(f);I=Y.protocol+"//"+Y.hostname,Y.port.length>0&&(I+=":"+Y.port)}return I}GenerateShadowField(n,a,f){switch(n){case"integer":return`<block type='math_number'><field name='NUM'>${f||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${f||`please enter ${a}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${f||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateNameFunction(n,a,f,E){return E+"_"+a.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateFunction(n,a,f,E){var I=this,Y=I.GenerateNameFunction(n,a,f,E),_e=f,De=`<block type="text_print"> <value name="TEXT"><block type="${Y}">`;_e.parameters&&_e.parameters.forEach(Rt=>{if(Rt.type)(Wt=I.GenerateShadowField(Rt.type,Rt.name,null)).length>0&&(De+=`<value name="val_${Rt.name}">${Wt}</value>`);else if(Rt.schema&&Rt.schema.type){var Wt;(Wt=I.GenerateShadowField(Rt.schema.type,Rt.name,null)).length>0&&(De+=`<value name="val_${Rt.name}">${Wt}</value>`)}});var Ae="",Je="";try{var st=I.findRootSite();if((st||"").length>0){var Ge=new URL(st);Ae=Ge.hostname,Je=Ge.port}}catch(Rt){console.log("find root error",Rt)}var lt=I.GenerateShadowField("string","override_host",Ae=Ae||" ");return De+=`<value name="override_Host">${lt}</value>`,lt=I.GenerateShadowField("integer","override_port",Je=Je||"0"),De+=`<value name="override_Port">${lt}</value>`,De+="</block></value>",I.fieldXMLFunctions.push({id:a,gui:De+="</block>"}),function(Rt,Wt){Rt[Y]={init:function(){var tt=E;switch(E.toString().toLowerCase()){case"get":tt="",this.setColour(210);break;case"post":tt="",this.setColour(165);break;case"put":tt="",this.setColour(40);break;case"delete":tt="",this.setColour(10);break;default:console.log(`not found ${E}`),this.setColour(10)}for(var Oe=a,Se=I.findCategSwaggerFromPaths(),Qe=0;Qe<Se.length;Qe++){var dt="/"+Se[Qe]+"/",it=a.indexOf(dt);if(it>-1){var Pe=a.substring(it+dt.length);Pe.length<Oe.length&&(Oe=Pe)}}Oe.length>25&&(Oe=Oe.substring(0,25)+"..."),this.appendDummyInput().appendField(new y.FieldImage(`assets/httpImages/${E}.png`,90,20,E)).appendField(`${tt} ${Oe}`);var Re=I.findRootSite();if(_e.parameters&&_e.parameters.forEach(Be=>{var ze=Be.name;if(Be.required&&(ze+="*"),Be.type)ze+=":"+Be.type;else if(Be.schema)if(Be.schema.enum&&"$$ref"in Be.schema){var St=Be.schema.$$ref.split("/");ze+="=>"+St[St.length-1]}else if(Be.schema.type)if("object"==Be.schema.type){var wt=Be.schema.$$ref||"";wt.length>0&&(ze+=":"+(wt=wt.substring(wt.lastIndexOf("/")+1)))}else ze+=":"+Be.schema.type;this.appendValueInput(`val_${Be.name}`).appendField(ze)}),_e.requestBody){var ge="";if(_e.requestBody.content){var se=_e.requestBody.content["application/json"];if(se&&se.schema){var at=se.schema.$$ref;at&&(ge="=>"+at.substring(at.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+ge).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${E} ${Re}${a}`),this.setOutput(!0,"")}},Wt[Y]=function(tt){var dt=I.openApiDocument.paths[a][E],it=[];"parameters"in dt&&(it=dt.parameters);var Pe=!1,Re=it.filter(pi=>"body"==pi.in).length>0;(Re||"requestBody"in dt)&&(Pe=!0);var ge={},se={};Pe&&(ge.val_values=Wt.valueToCode(tt,"val_values",0),se.val_values=ge.val_values),it.forEach(pi=>{ge[`val_${pi.name}`]=Wt.valueToCode(tt,`val_${pi.name}`,0)});var at=it.map(pi=>pi.name);Pe&&!Re&&at.push("values"),at.push("extraData"),it.map(pi=>`\${obj['val_${pi.name}']},`);var ze="function(";ze+=at.join(","),ze+="){\n",ze+='var rootSite="'+I.findRootSite()+'";\n',ze+="if(extraData){\n",ze+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",ze+="rootSite =  changeHost(rootSite, extraData.url.host);\n",ze+="};\n",ze+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",ze+="rootSite  =changePort(rootSite , extraData.url.port);\n",ze+="};\n",ze+="};\n",ze+='var strUrl =rootSite +"'+I.basePath+a+'";\n';var St=it.filter(pi=>"query"==pi.in);if(St.length>0){ze+='strUrl+="?";\n;';var wt=St.map(pi=>`${pi.name}={`+pi.name+"}").join("&");ze+='strUrl += "'+wt+'";\n;'}var At=it.filter(pi=>"path"==pi.in||"query"==pi.in).map(pi=>`\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace("{${pi.name}}",${pi.name});\n          {\n            var replaceFInd = "{${pi.name}}";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${pi.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`);if(ze+=At.join("\n"),ze+=`\n{var res= ${E}Xhr(strUrl`,Pe){var $t="values";Re&&($t=it.filter(pi=>"body"==pi.in)[0].name),ze+=`,JSON.stringify(${$t})`}ze+=");\n",ze+="var resJS=JSON.parse(res);\n",ze+="if(resJS.statusOK) return resJS.text;\n",ze+="errHandler(res);\n}\n",ze+="}",ze+="(",it.forEach(pi=>{ze+=ge[`val_${pi.name}`]+","}),Pe&&!Re&&(ze+=se.val_values+",");var Xt="url:{notImportant:1",ti=Wt.valueToCode(tt,"override_Host",0);(ti=ti||"").length>0&&(Xt+=`,host:${ti}`);var Wi=Wt.valueToCode(tt,"override_Port",0);return(Wi=Wi||"").length>0&&(Xt+=`,port:${Wi}`),ze+=`{${Xt+="}"}}\n`,[ze+=")",99]}}}findProperties(n){var a=[];return n.properties&&Object.keys(n.properties).forEach(f=>{a.push({key:f,value:n.properties[f]})}),a}TranslateToBlocklyType(n){return"integer"==n?"Number":"string"==n?"String":"bool"==n?"Boolean":"array"==n?"Array":(console.error("not found TranslateToBlocklyType item"+n),"not found type"+n)}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}findHostNameRegular(){var n,a,f,E="";if((null===(a=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===a?void 0:a.length)>0){var I=this.openApiDocument.host;E=Array.isArray(I)?this.openApiDocument.schemes[0]+"://"+I[0]:this.openApiDocument.schemes[0]+"://"+I}else E=this.swaggerUrl;var Y="(localSite)";if(E.startsWith("http://")||E.startsWith("https://")){var ee=new URL(E),_e=null!==(f=ee.port)&&void 0!==f?f:80;Y=ee.hostname+_e}return Y.split(".").join("")}metaBlocks(){var n=this;return function(a,f){var E;a[E=`meta_swagger_controllers_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},f[E]=function(I){var ee=n.findCategSwaggerFromPaths().map(Ae=>({name:Ae}));return[JSON.stringify({name:n.name,categories:ee}),f.ORDER_NONE]},a[E=`meta_swagger_controllers_actions_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_actions"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},f[E]=function(I){var ee=n.findCategSwaggerFromPaths().map(Ae=>({name:Ae,ops:n.findfieldXMLFunctions(Ae).map(Je=>Je.id).filter(Je=>Je.length>0)}));return[JSON.stringify({name:n.name,categories:ee}),f.ORDER_NONE]}}}findCategsFromTags(){var n=this.openApiDocument.paths,a=Object.keys(n),f=this;a.forEach(function(E){var I=n[E];I&&Object.keys(I).forEach(function(ee){var _e=I[ee].tags;_e&&_e.length>0&&_e.forEach(function(De){f.cacheCategSwaggerFromPaths.includes(De)||f.cacheCategSwaggerFromPaths.push(De),f.operations.push({controller:De,id:E})})})})}findCategSwaggerFromPaths(){if(this.findCategsFromTags(),this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var n=this.paths.filter(f=>f&&f.id&&f.id.length>0).map(f=>{for(var E=f.id.length,I=f.id.indexOf("{");I>0;){var Y=f.id.indexOf("}",I);if(E-Y<2){f.id=f.id.substring(0,I);break}I=f.id.indexOf("{",Y)}return f}).map(f=>(f.id.lastIndexOf("/")!=f.id.length-1&&(f.id+="/"),f));this.operations=n.filter(f=>f.nrOps>1).map(f=>({arr:f.id.split("/").filter(I=>I.length>0),id:f.id})).map(f=>({controller:f.arr[f.arr.length-1],id:f.id}));var a=n.filter(f=>1==f.nrOps).map(f=>({arr:f.id.split("/").filter(E=>E.length>0),id:f.id})).map(f=>1==f.arr.length?{controller:f.arr[0],id:f.id}:{controller:f.arr[f.arr.length-2],id:f.id});return this.operations.push(...a),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(f=>f.controller))],this.cacheCategSwaggerFromPaths}findfieldXMLFunctions(n){Object.keys(this.openApiDocument.paths);var E=this.operations.filter(Y=>Y.controller==n);return this.fieldXMLFunctions.filter(Y=>{if(""==Y.id)return!0;var ee=Y.id+"/",_e=!1;return E.forEach(De=>{ee.startsWith(De.id)&&(_e=!0)}),!!_e||(E.forEach(De=>{var Ae=De.id.substring(0,De.id.lastIndexOf("/"))+"{";ee.startsWith(Ae)&&(_e=!0)}),_e)})}}},6931:function(li,ht,W){var y,t;y=[W(1069)],void 0!==(t=function(e){"use strict";return e}.apply(ht,y))&&(li.exports=t)},1069:function(li,ht){var y;void 0!==(y=function(){"use strict";var t={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return t.CONNECTING_SNAP_RADIUS=t.SNAP_RADIUS,t.CURRENT_CONNECTION_PREFERENCE=8,t.BUMP_DELAY=250,t.BUMP_RANDOMNESS=10,t.COLLAPSE_CHARS=30,t.LONGPRESS=750,t.SOUND_LIMIT=100,t.DRAG_STACK=!0,t.HSV_SATURATION=.45,t.HSV_VALUE=.65,t.SPRITE={width:96,height:124,url:"sprites.png"},t.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},t.DRAG_NONE=0,t.DRAG_STICKY=1,t.DRAG_BEGIN=1,t.DRAG_FREE=2,t.OPPOSITE_TYPE=[],t.OPPOSITE_TYPE[t.connectionTypes.INPUT_VALUE]=t.connectionTypes.OUTPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.OUTPUT_VALUE]=t.connectionTypes.INPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.NEXT_STATEMENT]=t.connectionTypes.PREVIOUS_STATEMENT,t.OPPOSITE_TYPE[t.connectionTypes.PREVIOUS_STATEMENT]=t.connectionTypes.NEXT_STATEMENT,t.VARIABLE_CATEGORY_NAME="VARIABLE",t.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",t.PROCEDURE_CATEGORY_NAME="PROCEDURE",t.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",t.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",t.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",t.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",t.utils={},t.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),t.Msg={},t.utils.global.Blockly||(t.utils.global.Blockly={}),t.utils.global.Blockly.Msg||(t.utils.global.Blockly.Msg=t.Msg),t.utils.colour={},t.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var n=t.utils.colour.names[e];if(n||(n="0x"==e.substring(0,2)?"#"+e.substring(2):e,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var a=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return a&&(e=Number(a[1]),n=Number(a[2]),a=Number(a[3]),0<=e&&256>e&&0<=n&&256>n&&0<=a&&256>a)?t.utils.colour.rgbToHex(e,n,a):null},t.utils.colour.rgbToHex=function(e,n,a){return n=e<<16|n<<8|a,16>e?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},t.utils.colour.hexToRgb=function(e){return(e=t.utils.colour.parse(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},t.utils.colour.hsvToHex=function(e,n,a){var f=0,E=0,I=0;if(0==n)I=E=f=a;else{var Y=Math.floor(e/60),ee=e/60-Y;e=a*(1-n);var _e=a*(1-n*ee);switch(n=a*(1-n*(1-ee)),Y){case 1:f=_e,E=a,I=e;break;case 2:f=e,E=a,I=n;break;case 3:f=e,E=_e,I=a;break;case 4:f=n,E=e,I=a;break;case 5:f=a,E=e,I=_e;break;case 6:case 0:f=a,E=n,I=e}}return t.utils.colour.rgbToHex(Math.floor(f),Math.floor(E),Math.floor(I))},t.utils.colour.blend=function(e,n,a){return(e=t.utils.colour.parse(e))&&(n=t.utils.colour.parse(n))?(e=t.utils.colour.hexToRgb(e),n=t.utils.colour.hexToRgb(n),t.utils.colour.rgbToHex(Math.round(n[0]+a*(e[0]-n[0])),Math.round(n[1]+a*(e[1]-n[1])),Math.round(n[2]+a*(e[2]-n[2])))):null},t.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},t.utils.Coordinate=function(e,n){this.x=e,this.y=n},t.utils.Coordinate.equals=function(e,n){return e==n||!(!e||!n)&&e.x==n.x&&e.y==n.y},t.utils.Coordinate.distance=function(e,n){var a=e.x-n.x;return e=e.y-n.y,Math.sqrt(a*a+e*e)},t.utils.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.utils.Coordinate.difference=function(e,n){return new t.utils.Coordinate(e.x-n.x,e.y-n.y)},t.utils.Coordinate.sum=function(e,n){return new t.utils.Coordinate(e.x+n.x,e.y+n.y)},t.utils.Coordinate.prototype.clone=function(){return new t.utils.Coordinate(this.x,this.y)},t.utils.Coordinate.prototype.scale=function(e){return this.x*=e,this.y*=e,this},t.utils.Coordinate.prototype.translate=function(e,n){return this.x+=e,this.y+=n,this},t.utils.Rect=function(e,n,a,f){this.top=e,this.bottom=n,this.left=a,this.right=f},t.utils.Rect.prototype.contains=function(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom},t.utils.Rect.prototype.intersects=function(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)},t.utils.string={},t.utils.string.startsWith=function(e,n){return 0==e.lastIndexOf(n,0)},t.utils.string.shortestStringLength=function(e){return e.length?e.reduce(function(n,a){return n.length<a.length?n:a}).length:0},t.utils.string.commonWordPrefix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var a=0;n=n||t.utils.string.shortestStringLength(e);for(var f=0;f<n;f++){for(var E=e[0][f],I=1;I<e.length;I++)if(E!=e[I][f])return a;" "==E&&(a=f+1)}for(I=1;I<e.length;I++)if((E=e[I][f])&&" "!=E)return a;return n},t.utils.string.commonWordSuffix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var a=0;n=n||t.utils.string.shortestStringLength(e);for(var f=0;f<n;f++){for(var E=e[0].substr(-f-1,1),I=1;I<e.length;I++)if(E!=e[I].substr(-f-1,1))return a;" "==E&&(a=f+1)}for(I=1;I<e.length;I++)if((E=e[I].charAt(e[I].length-f-1))&&" "!=E)return a;return n},t.utils.string.wrap=function(e,n){e=e.split("\n");for(var a=0;a<e.length;a++)e[a]=t.utils.string.wrapLine_(e[a],n);return e.join("\n")},t.utils.string.wrapLine_=function(e,n){if(e.length<=n)return e;for(var a=e.trim().split(/\s+/),f=0;f<a.length;f++)a[f].length>n&&(n=a[f].length);f=-1/0;var E=1;do{var I=f,Y=e;e=[];var ee=a.length/E,_e=1;for(f=0;f<a.length-1;f++)_e<(f+1.5)/ee?(_e++,e[f]=!0):e[f]=!1;e=t.utils.string.wrapMutate_(a,e,n),f=t.utils.string.wrapScore_(a,e,n),e=t.utils.string.wrapToText_(a,e),E++}while(f>I);return Y},t.utils.string.wrapScore_=function(e,n,a){for(var f=[0],E=[],I=0;I<e.length;I++)f[f.length-1]+=e[I].length,!0===n[I]?(f.push(0),E.push(e[I].charAt(e[I].length-1))):!1===n[I]&&f[f.length-1]++;for(e=Math.max.apply(Math,f),I=n=0;I<f.length;I++)n-=2*Math.pow(Math.abs(a-f[I]),1.5),n-=Math.pow(e-f[I],1.5),-1!=".?!".indexOf(E[I])?n+=a/3:-1!=",;)]}".indexOf(E[I])&&(n+=a/4);return 1<f.length&&f[f.length-1]<=f[f.length-2]&&(n+=.5),n},t.utils.string.wrapMutate_=function(e,n,a){for(var E,f=t.utils.string.wrapScore_(e,n,a),I=0;I<n.length-1;I++)if(n[I]!=n[I+1]){var Y=[].concat(n);Y[I]=!Y[I],Y[I+1]=!Y[I+1];var ee=t.utils.string.wrapScore_(e,Y,a);ee>f&&(f=ee,E=Y)}return E?t.utils.string.wrapMutate_(e,E,a):n},t.utils.string.wrapToText_=function(e,n){for(var a=[],f=0;f<e.length;f++)a.push(e[f]),void 0!==n[f]&&a.push(n[f]?"\n":" ");return a.join("")},t.utils.Size=function(e,n){this.width=e,this.height=n},t.utils.Size.equals=function(e,n){return e==n||!(!e||!n)&&e.width==n.width&&e.height==n.height},t.utils.style={},t.utils.style.getSize=function(e){if("none"!=t.utils.style.getStyle_(e,"display"))return t.utils.style.getSizeWithDisplay_(e);var n=e.style,a=n.display,f=n.visibility,E=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var I=e.offsetWidth;return e=e.offsetHeight,n.display=a,n.position=E,n.visibility=f,new t.utils.Size(I,e)},t.utils.style.getSizeWithDisplay_=function(e){return new t.utils.Size(e.offsetWidth,e.offsetHeight)},t.utils.style.getStyle_=function(e,n){return t.utils.style.getComputedStyle(e,n)||t.utils.style.getCascadedStyle(e,n)||e.style&&e.style[n]},t.utils.style.getComputedStyle=function(e,n){return document.defaultView&&document.defaultView.getComputedStyle&&(e=document.defaultView.getComputedStyle(e,null))&&(e[n]||e.getPropertyValue(n))||""},t.utils.style.getCascadedStyle=function(e,n){return e.currentStyle?e.currentStyle[n]:null},t.utils.style.getPageOffset=function(e){var n=new t.utils.Coordinate(0,0);e=e.getBoundingClientRect();var a=document.documentElement;return a=new t.utils.Coordinate(window.pageXOffset||a.scrollLeft,window.pageYOffset||a.scrollTop),n.x=e.left+a.x,n.y=e.top+a.y,n},t.utils.style.getViewportPageOffset=function(){var e=document.body,n=document.documentElement;return new t.utils.Coordinate(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},t.utils.style.setElementShown=function(e,n){e.style.display=n?"":"none"},t.utils.style.isRightToLeft=function(e){return"rtl"==t.utils.style.getStyle_(e,"direction")},t.utils.style.getBorderBox=function(e){var n=t.utils.style.getComputedStyle(e,"borderLeftWidth"),a=t.utils.style.getComputedStyle(e,"borderRightWidth"),f=t.utils.style.getComputedStyle(e,"borderTopWidth");return e=t.utils.style.getComputedStyle(e,"borderBottomWidth"),{top:parseFloat(f),right:parseFloat(a),bottom:parseFloat(e),left:parseFloat(n)}},t.utils.style.scrollIntoContainerView=function(e,n,a){e=t.utils.style.getContainerOffsetToScrollInto(e,n,a),n.scrollLeft=e.x,n.scrollTop=e.y},t.utils.style.getContainerOffsetToScrollInto=function(e,n,a){var f=t.utils.style.getPageOffset(e),E=t.utils.style.getPageOffset(n),I=t.utils.style.getBorderBox(n),Y=f.x-E.x-I.left;return f=f.y-E.y-I.top,E=t.utils.style.getSizeWithDisplay_(e),e=n.clientWidth-E.width,E=n.clientHeight-E.height,I=n.scrollLeft,n=n.scrollTop,a?(I+=Y-e/2,n+=f-E/2):(I+=Math.min(Y,Math.max(Y-e,0)),n+=Math.min(f,Math.max(f-E,0))),new t.utils.Coordinate(I,n)},t.utils.userAgent={},function(e){function n(f){return-1!=a.indexOf(f.toUpperCase())}t.utils.userAgent.raw=e;var a=t.utils.userAgent.raw.toUpperCase();t.utils.userAgent.IE=n("Trident")||n("MSIE"),t.utils.userAgent.EDGE=n("Edge"),t.utils.userAgent.JAVA_FX=n("JavaFX"),t.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!t.utils.userAgent.EDGE,t.utils.userAgent.WEBKIT=n("WebKit")&&!t.utils.userAgent.EDGE,t.utils.userAgent.GECKO=n("Gecko")&&!t.utils.userAgent.WEBKIT&&!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,t.utils.userAgent.ANDROID=n("Android"),e=t.utils.global.navigator&&t.utils.global.navigator.maxTouchPoints,t.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<e,t.utils.userAgent.IPOD=n("iPod"),t.utils.userAgent.IPHONE=n("iPhone")&&!t.utils.userAgent.IPAD&&!t.utils.userAgent.IPOD,t.utils.userAgent.MAC=n("Macintosh"),t.utils.userAgent.TABLET=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),t.utils.userAgent.MOBILE=!t.utils.userAgent.TABLET&&(t.utils.userAgent.IPOD||t.utils.userAgent.IPHONE||t.utils.userAgent.ANDROID||n("IEMobile"))}(t.utils.global.navigator&&t.utils.global.navigator.userAgent||""),t.utils.noEvent=function(e){e.preventDefault(),e.stopPropagation()},t.utils.isTargetInput=function(e){return"textarea"==e.target.type||"text"==e.target.type||"number"==e.target.type||"email"==e.target.type||"password"==e.target.type||"search"==e.target.type||"tel"==e.target.type||"url"==e.target.type||e.target.isContentEditable||e.target.dataset&&"true"==e.target.dataset.isTextInput},t.utils.getRelativeXY=function(e){var n=new t.utils.Coordinate(0,0),a=e.getAttribute("x");return a&&(n.x=parseInt(a,10)),(a=e.getAttribute("y"))&&(n.y=parseInt(a,10)),(a=(a=e.getAttribute("transform"))&&a.match(t.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(a[1]),a[3]&&(n.y+=Number(a[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(t.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},t.utils.getInjectionDivXY_=function(e){for(var n=0,a=0;e;){var f=t.utils.getRelativeXY(e);if(n+=f.x,a+=f.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new t.utils.Coordinate(n,a)},t.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,t.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,t.utils.isRightButton=function(e){return!(!e.ctrlKey||!t.utils.userAgent.MAC)||2==e.button},t.utils.mouseToSvg=function(e,n,a){var f=n.createSVGPoint();return f.x=e.clientX,f.y=e.clientY,a||(a=n.getScreenCTM().inverse()),f.matrixTransform(a)},t.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*t.LINE_MODE_MULTIPLIER,y:e.deltaY*t.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*t.PAGE_MODE_MULTIPLIER,y:e.deltaY*t.PAGE_MODE_MULTIPLIER}}},t.utils.tokenizeInterpolation=function(e){return t.utils.tokenizeInterpolation_(e,!0)},t.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=t.utils.tokenizeInterpolation_(e,!1)).length?String(e[0]):""},t.utils.checkMessageReferences=function(e){for(var n=!0,a=t.Msg,f=e.match(/%{BKY_[A-Z]\w*}/gi),E=0;E<f.length;E++)null==a[f[E].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+f[E]+" in "+e),n=!1);return n},t.utils.tokenizeInterpolation_=function(e,n){var a=[],f=e.split("");f.push("");var E=0;e=[];for(var I=null,Y=0;Y<f.length;Y++){var ee=f[Y];0==E?"%"==ee?((ee=e.join(""))&&a.push(ee),e.length=0,E=1):e.push(ee):1==E?"%"==ee?(e.push(ee),E=0):n&&"0"<=ee&&"9">=ee?(E=2,I=ee,(ee=e.join(""))&&a.push(ee),e.length=0):"{"==ee?E=3:(e.push("%",ee),E=0):2==E?"0"<=ee&&"9">=ee?I+=ee:(a.push(parseInt(I,10)),Y--,E=0):3==E&&(""==ee?(e.splice(0,0,"%{"),Y--,E=0):"}"!=ee?e.push(ee):(E=e.join(""),/[A-Z]\w*/i.test(E)?(ee=E.toUpperCase(),(ee=t.utils.string.startsWith(ee,"BKY_")?ee.substring(4):null)&&ee in t.Msg?"string"==typeof(E=t.Msg[ee])?Array.prototype.push.apply(a,t.utils.tokenizeInterpolation_(E,n)):a.push(n?String(E):E):a.push("%{"+E+"}")):a.push("%{"+E+"}"),E=e.length=0))}for((ee=e.join(""))&&a.push(ee),n=[],Y=e.length=0;Y<a.length;++Y)"string"==typeof a[Y]?e.push(a[Y]):((ee=e.join(""))&&n.push(ee),e.length=0,n.push(a[Y]));return(ee=e.join(""))&&n.push(ee),e.length=0,n},t.utils.genUid=function(){for(var e=t.utils.genUid.soup_.length,n=[],a=0;20>a;a++)n[a]=t.utils.genUid.soup_.charAt(Math.random()*e);return n.join("")},t.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t.utils.is3dSupported=function(){if(void 0!==t.utils.is3dSupported.cached_)return t.utils.is3dSupported.cached_;if(!t.utils.global.getComputedStyle)return!1;var e=document.createElement("p"),n="none",a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var f in document.body.insertBefore(e,null),a)if(void 0!==e.style[f]){if(e.style[f]="translate3d(1px,1px,1px)",!(n=t.utils.global.getComputedStyle(e)))return document.body.removeChild(e),!1;n=n.getPropertyValue(a[f])}return document.body.removeChild(e),t.utils.is3dSupported.cached_="none"!==n,t.utils.is3dSupported.cached_},t.utils.runAfterPageLoad=function(e){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)e();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),e())},10)},t.utils.getViewportBBox=function(){var e=t.utils.style.getViewportPageOffset();return new t.utils.Rect(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},t.utils.arrayRemove=function(e,n){return-1!=(n=e.indexOf(n))&&(e.splice(n,1),!0)},t.utils.getDocumentScroll=function(){var e=document.documentElement,n=window;return t.utils.userAgent.IE&&n.pageYOffset!=e.scrollTop?new t.utils.Coordinate(e.scrollLeft,e.scrollTop):new t.utils.Coordinate(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},t.utils.getBlockTypeCounts=function(e,n){var a=Object.create(null),f=e.getDescendants(!0);for(n&&(e=e.getNextBlock())&&(e=f.indexOf(e),f.splice(e,f.length-e)),e=0;n=f[e];e++)a[n.type]?a[n.type]++:a[n.type]=1;return a},t.utils.screenToWsCoordinates=function(e,n){var a=n.x;n=n.y;var f=e.getInjectionDiv().getBoundingClientRect();return a=new t.utils.Coordinate(a-f.left,n-f.top),n=e.getOriginOffsetInPixels(),t.utils.Coordinate.difference(a,n).scale(1/e.scale)},t.utils.parseBlockColour=function(e){var n="string"==typeof e?t.utils.replaceMessageReferences(e):e,a=Number(n);if(!isNaN(a)&&0<=a&&360>=a)return{hue:a,hex:t.utils.colour.hsvToHex(a,t.HSV_SATURATION,255*t.HSV_VALUE)};if(a=t.utils.colour.parse(n))return{hue:null,hex:a};throw a='Invalid colour: "'+n+'"',e!=n&&(a+=' (from "'+e+'")'),Error(a)},t.Touch={},t.Touch.TOUCH_ENABLED="ontouchstart"in t.utils.global||!!(t.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!t.utils.global.navigator||!t.utils.global.navigator.maxTouchPoints&&!t.utils.global.navigator.msMaxTouchPoints),t.Touch.touchIdentifier_=null,t.Touch.TOUCH_MAP={},t.utils.global.PointerEvent?t.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:t.Touch.TOUCH_ENABLED&&(t.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),t.longPid_=0,t.longStart=function(e,n){t.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(t.longPid_=setTimeout(function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),n&&n.handleRightClick(e)},t.LONGPRESS))},t.longStop_=function(){t.longPid_&&(clearTimeout(t.longPid_),t.longPid_=0)},t.Touch.clearTouchIdentifier=function(){t.Touch.touchIdentifier_=null},t.Touch.shouldHandleEvent=function(e){return!t.Touch.isMouseOrTouchEvent(e)||t.Touch.checkTouchIdentifier(e)},t.Touch.getTouchIdentifierFromEvent=function(e){return null!=e.pointerId?e.pointerId:e.changedTouches&&e.changedTouches[0]&&null!=e.changedTouches[0].identifier?e.changedTouches[0].identifier:"mouse"},t.Touch.checkTouchIdentifier=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);return null!=t.Touch.touchIdentifier_?t.Touch.touchIdentifier_==n:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(t.Touch.touchIdentifier_=n,!0)},t.Touch.setClientFromTouch=function(e){if(t.utils.string.startsWith(e.type,"touch")){var n=e.changedTouches[0];e.clientX=n.clientX,e.clientY=n.clientY}},t.Touch.isMouseOrTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"mouse")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.isTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.splitEventByTouches=function(e){var n=[];if(e.changedTouches)for(var a=0;a<e.changedTouches.length;a++)n[a]={type:e.type,changedTouches:[e.changedTouches[a]],target:e.target,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}};else n.push(e);return n},t.browserEvents={},t.browserEvents.conditionalBind=function(e,n,a,f,E,I){var Y=!1,ee=function(st){var Ge=!E;st=t.Touch.splitEventByTouches(st);for(var Rt,lt=0;Rt=st[lt];lt++)(!Ge||t.Touch.shouldHandleEvent(Rt))&&(t.Touch.setClientFromTouch(Rt),a?f.call(a,Rt):f(Rt),Y=!0)},_e=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var Ae,De=0;Ae=t.Touch.TOUCH_MAP[n][De];De++)e.addEventListener(Ae,ee,!1),_e.push([e,Ae,ee]);else if(e.addEventListener(n,ee,!1),_e.push([e,n,ee]),n in t.Touch.TOUCH_MAP){var Je=function(st){ee(st),Y&&!I&&st.preventDefault()};for(De=0;Ae=t.Touch.TOUCH_MAP[n][De];De++)e.addEventListener(Ae,Je,!1),_e.push([e,Ae,Je])}return _e},t.browserEvents.bind=function(e,n,a,f){var E=function(De){a?f.call(a,De):f(De)},I=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var ee,Y=0;ee=t.Touch.TOUCH_MAP[n][Y];Y++)e.addEventListener(ee,E,!1),I.push([e,ee,E]);else if(e.addEventListener(n,E,!1),I.push([e,n,E]),n in t.Touch.TOUCH_MAP){var _e=function(De){if(De.changedTouches&&1==De.changedTouches.length){var Ae=De.changedTouches[0];De.clientX=Ae.clientX,De.clientY=Ae.clientY}E(De),De.preventDefault()};for(Y=0;ee=t.Touch.TOUCH_MAP[n][Y];Y++)e.addEventListener(ee,_e,!1),I.push([e,ee,_e])}return I},t.browserEvents.unbind=function(e){for(;e.length;){var n=e.pop(),a=n[2];n[0].removeEventListener(n[1],a,!1)}return a},t.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},t.ComponentManager.prototype.addComponent=function(e,n){var a=e.component.id;if(!n&&this.componentData_[a])throw Error('Plugin "'+a+'" with capabilities "'+this.componentData_[a].capabilities+'" already added.');this.componentData_[a]=e,n=[];for(var f=0;f<e.capabilities.length;f++){var E=String(e.capabilities[f]).toLowerCase();n.push(E),void 0===this.capabilityToComponentIds_[E]?this.capabilityToComponentIds_[E]=[a]:this.capabilityToComponentIds_[E].push(a)}this.componentData_[a].capabilities=n},t.ComponentManager.prototype.removeComponent=function(e){var n=this.componentData_[e];if(n){for(var a=0;a<n.capabilities.length;a++){var f=String(n.capabilities[a]).toLowerCase();this.capabilityToComponentIds_[f].splice(this.capabilityToComponentIds_[f].indexOf(e),1)}delete this.componentData_[e]}},t.ComponentManager.prototype.addCapability=function(e,n){if(!this.getComponent(e))throw Error('Cannot add capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?console.warn('Plugin "'+e+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[e].capabilities.push(n),this.capabilityToComponentIds_[n].push(e))},t.ComponentManager.prototype.removeCapability=function(e,n){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?(n=String(n).toLowerCase(),this.componentData_[e].capabilities.splice(this.componentData_[e].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(e),1)):console.warn('Plugin "'+e+"doesn't have capability \""+n+'" to remove')},t.ComponentManager.prototype.hasCapability=function(e,n){return n=String(n).toLowerCase(),-1!==this.componentData_[e].capabilities.indexOf(n)},t.ComponentManager.prototype.getComponent=function(e){return this.componentData_[e]&&this.componentData_[e].component},t.ComponentManager.prototype.getComponents=function(e,n){if(e=String(e).toLowerCase(),!(e=this.capabilityToComponentIds_[e]))return[];var a=[];if(n){var f=[],E=this.componentData_;e.forEach(function(I){f.push(E[I])}),f.sort(function(I,Y){return I.weight-Y.weight}),f.forEach(function(I){a.push(I.component)})}else E=this.componentData_,e.forEach(function(I){a.push(E[I].component)});return a},t.ComponentManager.Capability=function(e){this.name_=e},t.ComponentManager.Capability.prototype.toString=function(){return this.name_},t.ComponentManager.Capability.POSITIONABLE=new t.ComponentManager.Capability("positionable"),t.ComponentManager.Capability.DRAG_TARGET=new t.ComponentManager.Capability("drag_target"),t.ComponentManager.Capability.DELETE_AREA=new t.ComponentManager.Capability("delete_area"),t.ComponentManager.Capability.AUTOHIDEABLE=new t.ComponentManager.Capability("autohideable"),t.utils.Svg=function(e){this.tagName_=e},t.utils.Svg.prototype.toString=function(){return this.tagName_},t.utils.Svg.ANIMATE=new t.utils.Svg("animate"),t.utils.Svg.CIRCLE=new t.utils.Svg("circle"),t.utils.Svg.CLIPPATH=new t.utils.Svg("clipPath"),t.utils.Svg.DEFS=new t.utils.Svg("defs"),t.utils.Svg.FECOMPOSITE=new t.utils.Svg("feComposite"),t.utils.Svg.FECOMPONENTTRANSFER=new t.utils.Svg("feComponentTransfer"),t.utils.Svg.FEFLOOD=new t.utils.Svg("feFlood"),t.utils.Svg.FEFUNCA=new t.utils.Svg("feFuncA"),t.utils.Svg.FEGAUSSIANBLUR=new t.utils.Svg("feGaussianBlur"),t.utils.Svg.FEPOINTLIGHT=new t.utils.Svg("fePointLight"),t.utils.Svg.FESPECULARLIGHTING=new t.utils.Svg("feSpecularLighting"),t.utils.Svg.FILTER=new t.utils.Svg("filter"),t.utils.Svg.FOREIGNOBJECT=new t.utils.Svg("foreignObject"),t.utils.Svg.G=new t.utils.Svg("g"),t.utils.Svg.IMAGE=new t.utils.Svg("image"),t.utils.Svg.LINE=new t.utils.Svg("line"),t.utils.Svg.PATH=new t.utils.Svg("path"),t.utils.Svg.PATTERN=new t.utils.Svg("pattern"),t.utils.Svg.POLYGON=new t.utils.Svg("polygon"),t.utils.Svg.RECT=new t.utils.Svg("rect"),t.utils.Svg.SVG=new t.utils.Svg("svg"),t.utils.Svg.TEXT=new t.utils.Svg("text"),t.utils.Svg.TSPAN=new t.utils.Svg("tspan"),t.utils.dom={},t.utils.dom.SVG_NS="http://www.w3.org/2000/svg",t.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",t.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",t.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},t.utils.dom.cacheWidths_=null,t.utils.dom.cacheReference_=0,t.utils.dom.canvasContext_=null,t.utils.dom.createSvgElement=function(e,n,a){for(var f in e=document.createElementNS(t.utils.dom.SVG_NS,String(e)),n)e.setAttribute(f,n[f]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),a&&a.appendChild(e),e},t.utils.dom.addClass=function(e,n){var a=e.getAttribute("class")||"";return-1==(" "+a+" ").indexOf(" "+n+" ")&&(a&&(a+=" "),e.setAttribute("class",a+n),!0)},t.utils.dom.removeClasses=function(e,n){n=n.split(" ");for(var a=0;a<n.length;a++)t.utils.dom.removeClass(e,n[a])},t.utils.dom.removeClass=function(e,n){var a=e.getAttribute("class");if(-1==(" "+a+" ").indexOf(" "+n+" "))return!1;a=a.split(/\s+/);for(var f=0;f<a.length;f++)a[f]&&a[f]!=n||(a.splice(f,1),f--);return a.length?e.setAttribute("class",a.join(" ")):e.removeAttribute("class"),!0},t.utils.dom.hasClass=function(e,n){return-1!=(" "+e.getAttribute("class")+" ").indexOf(" "+n+" ")},t.utils.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},t.utils.dom.insertAfter=function(e,n){var a=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");a?n.insertBefore(e,a):n.appendChild(e)},t.utils.dom.containsNode=function(e,n){return!!(e.compareDocumentPosition(n)&t.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},t.utils.dom.setCssTransform=function(e,n){e.style.transform=n,e.style["-webkit-transform"]=n},t.utils.dom.startTextWidthCache=function(){t.utils.dom.cacheReference_++,t.utils.dom.cacheWidths_||(t.utils.dom.cacheWidths_=Object.create(null))},t.utils.dom.stopTextWidthCache=function(){t.utils.dom.cacheReference_--,t.utils.dom.cacheReference_||(t.utils.dom.cacheWidths_=null)},t.utils.dom.getTextWidth=function(e){var a,n=e.textContent+"\n"+e.className.baseVal;if(t.utils.dom.cacheWidths_&&(a=t.utils.dom.cacheWidths_[n]))return a;try{a=t.utils.userAgent.IE||t.utils.userAgent.EDGE?e.getBBox().width:e.getComputedTextLength()}catch(f){return 8*e.textContent.length}return t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[n]=a),a},t.utils.dom.getFastTextWidth=function(e,n,a,f){return t.utils.dom.getFastTextWidthWithSizeString(e,n+"pt",a,f)},t.utils.dom.getFastTextWidthWithSizeString=function(e,n,a,f){var I,E=e.textContent;return e=E+"\n"+e.className.baseVal,t.utils.dom.cacheWidths_&&(I=t.utils.dom.cacheWidths_[e])||(t.utils.dom.canvasContext_||((I=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(I),t.utils.dom.canvasContext_=I.getContext("2d")),t.utils.dom.canvasContext_.font=a+" "+n+" "+f,I=t.utils.dom.canvasContext_.measureText(E).width,t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[e]=I)),I},t.utils.dom.measureFontMetrics=function(e,n,a,f){var E=document.createElement("span");E.style.font=a+" "+n+" "+f,E.textContent=e,(e=document.createElement("div")).style.width="1px",e.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(E),n.appendChild(e),document.body.appendChild(n);try{a={},n.style.alignItems="baseline",a.baseline=e.offsetTop-E.offsetTop,n.style.alignItems="flex-end",a.height=e.offsetTop-E.offsetTop}finally{document.body.removeChild(n)}return a},t.utils.math={},t.utils.math.toRadians=function(e){return e*Math.PI/180},t.utils.math.toDegrees=function(e){return 180*e/Math.PI},t.utils.math.clamp=function(e,n,a){if(a<e){var f=a;a=e,e=f}return Math.max(e,Math.min(n,a))},t.DropDownDiv=function(){},t.DropDownDiv.boundsElement_=null,t.DropDownDiv.owner_=null,t.DropDownDiv.positionToField_=null,t.DropDownDiv.ARROW_SIZE=16,t.DropDownDiv.BORDER_SIZE=1,t.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,t.DropDownDiv.PADDING_Y=16,t.DropDownDiv.ANIMATION_TIME=.25,t.DropDownDiv.animateOutTimer_=null,t.DropDownDiv.onHide_=null,t.DropDownDiv.rendererClassName_="",t.DropDownDiv.themeClassName_="",t.DropDownDiv.createDom=function(){if(!t.DropDownDiv.DIV_){var e=document.createElement("div");e.className="blocklyDropDownDiv",(t.parentContainer||document.body).appendChild(e),t.DropDownDiv.DIV_=e;var n=document.createElement("div");n.className="blocklyDropDownContent",e.appendChild(n),t.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",e.appendChild(n),t.DropDownDiv.arrow_=n,t.DropDownDiv.DIV_.style.opacity=0,t.DropDownDiv.DIV_.style.transition="transform "+t.DropDownDiv.ANIMATION_TIME+"s, opacity "+t.DropDownDiv.ANIMATION_TIME+"s",e.addEventListener("focusin",function(){t.utils.dom.addClass(e,"blocklyFocused")}),e.addEventListener("focusout",function(){t.utils.dom.removeClass(e,"blocklyFocused")})}},t.DropDownDiv.setBoundsElement=function(e){t.DropDownDiv.boundsElement_=e},t.DropDownDiv.getContentDiv=function(){return t.DropDownDiv.content_},t.DropDownDiv.clearContent=function(){t.DropDownDiv.content_.textContent="",t.DropDownDiv.content_.style.width=""},t.DropDownDiv.setColour=function(e,n){t.DropDownDiv.DIV_.style.backgroundColor=e,t.DropDownDiv.DIV_.style.borderColor=n},t.DropDownDiv.showPositionedByBlock=function(e,n,a,f){return t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfBlock_(n),e,a,f)},t.DropDownDiv.showPositionedByField=function(e,n,a){return t.DropDownDiv.positionToField_=!0,t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfField_(e),e,n,a)},t.DropDownDiv.getScaledBboxOfBlock_=function(e){var n=e.getSvgRoot(),a=n.getBBox(),f=e.workspace.scale;return e=a.height*f,a=a.width*f,n=t.utils.style.getPageOffset(n),new t.utils.Rect(n.y,n.y+e,n.x,n.x+a)},t.DropDownDiv.getScaledBboxOfField_=function(e){return e=e.getScaledBBox(),new t.utils.Rect(e.top,e.bottom,e.left,e.right)},t.DropDownDiv.showPositionedByRect_=function(e,n,a,f){var E=e.left+(e.right-e.left)/2,I=e.bottom;e=e.top,f&&(e+=f);for(var Y=(f=n.getSourceBlock()).workspace;Y.options.parentWorkspace;)Y=Y.options.parentWorkspace;return t.DropDownDiv.setBoundsElement(Y.getParentSvg().parentNode),t.DropDownDiv.show(n,f.RTL,E,I,E,e,a)},t.DropDownDiv.show=function(e,n,a,f,E,I,Y){return t.DropDownDiv.owner_=e,t.DropDownDiv.onHide_=Y||null,(e=t.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=t.getMainWorkspace(),t.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),t.DropDownDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.DropDownDiv.rendererClassName_),t.utils.dom.addClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.positionInternal_(a,f,E,I)},t.DropDownDiv.getBoundsInfo_=function(){var e=t.utils.style.getPageOffset(t.DropDownDiv.boundsElement_),n=t.utils.style.getSize(t.DropDownDiv.boundsElement_);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},t.DropDownDiv.getPositionMetrics_=function(e,n,a,f){var E=t.DropDownDiv.getBoundsInfo_(),I=t.utils.style.getSize(t.DropDownDiv.DIV_);return n+I.height<E.bottom?t.DropDownDiv.getPositionBelowMetrics_(e,n,E,I):f-I.height>E.top?t.DropDownDiv.getPositionAboveMetrics_(a,f,E,I):n+I.height<document.documentElement.clientHeight?t.DropDownDiv.getPositionBelowMetrics_(e,n,E,I):f-I.height>document.documentElement.clientTop?t.DropDownDiv.getPositionAboveMetrics_(a,f,E,I):t.DropDownDiv.getPositionTopOfPageMetrics_(e,E,I)},t.DropDownDiv.getPositionBelowMetrics_=function(e,n,a,f){return{initialX:(e=t.DropDownDiv.getPositionX(e,a.left,a.right,f.width)).divX,initialY:n,finalX:e.divX,finalY:n+t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(t.DropDownDiv.ARROW_SIZE/2+t.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},t.DropDownDiv.getPositionAboveMetrics_=function(e,n,a,f){return{initialX:(e=t.DropDownDiv.getPositionX(e,a.left,a.right,f.width)).divX,initialY:n-f.height,finalX:e.divX,finalY:n-f.height-t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:f.height-2*t.DropDownDiv.BORDER_SIZE-t.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},t.DropDownDiv.getPositionTopOfPageMetrics_=function(e,n,a){return{initialX:(e=t.DropDownDiv.getPositionX(e,n.left,n.right,a.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},t.DropDownDiv.getPositionX=function(e,n,a,f){var E=e;return e=t.utils.math.clamp(n,e-f/2,a-f),{arrowX:f=t.utils.math.clamp(n=t.DropDownDiv.ARROW_HORIZONTAL_PADDING,(E-=t.DropDownDiv.ARROW_SIZE/2)-e,f-n-t.DropDownDiv.ARROW_SIZE),divX:e}},t.DropDownDiv.isVisible=function(){return!!t.DropDownDiv.owner_},t.DropDownDiv.hideIfOwner=function(e,n){return t.DropDownDiv.owner_===e&&(n?t.DropDownDiv.hideWithoutAnimation():t.DropDownDiv.hide(),!0)},t.DropDownDiv.hide=function(){var e=t.DropDownDiv.DIV_;e.style.transform="translate(0, 0)",e.style.opacity=0,t.DropDownDiv.animateOutTimer_=setTimeout(function(){t.DropDownDiv.hideWithoutAnimation()},1e3*t.DropDownDiv.ANIMATION_TIME),t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null)},t.DropDownDiv.hideWithoutAnimation=function(){if(t.DropDownDiv.isVisible()){t.DropDownDiv.animateOutTimer_&&clearTimeout(t.DropDownDiv.animateOutTimer_);var e=t.DropDownDiv.DIV_;e.style.transform="",e.style.left="",e.style.top="",e.style.opacity=0,e.style.display="none",e.style.backgroundColor="",e.style.borderColor="",t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null),t.DropDownDiv.clearContent(),t.DropDownDiv.owner_=null,t.DropDownDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.rendererClassName_),t.DropDownDiv.rendererClassName_=""),t.DropDownDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.DropDownDiv.positionInternal_=function(e,n,a,f){(e=t.DropDownDiv.getPositionMetrics_(e,n,a,f)).arrowVisible?(t.DropDownDiv.arrow_.style.display="",t.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",t.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):t.DropDownDiv.arrow_.style.display="none",n=Math.floor(e.initialX),a=Math.floor(e.initialY),f=Math.floor(e.finalX);var E=Math.floor(e.finalY),I=t.DropDownDiv.DIV_;return I.style.left=n+"px",I.style.top=a+"px",I.style.display="block",I.style.opacity=1,I.style.transform="translate("+(f-n)+"px,"+(E-a)+"px)",!!e.arrowAtTop},t.DropDownDiv.repositionForWindowResize=function(){if(t.DropDownDiv.owner_){var e=t.DropDownDiv.owner_,n=e.getSourceBlock();e=t.DropDownDiv.positionToField_?t.DropDownDiv.getScaledBboxOfField_(e):t.DropDownDiv.getScaledBboxOfBlock_(n),t.DropDownDiv.positionInternal_(n=e.left+(e.right-e.left)/2,e.bottom,n,e.top)}else t.DropDownDiv.hide()},t.registry={},t.registry.typeMap_=Object.create(null),t.registry.DEFAULT="default",t.registry.Type=function(e){this.name_=e},t.registry.Type.prototype.toString=function(){return this.name_},t.registry.Type.CONNECTION_CHECKER=new t.registry.Type("connectionChecker"),t.registry.Type.CURSOR=new t.registry.Type("cursor"),t.registry.Type.EVENT=new t.registry.Type("event"),t.registry.Type.FIELD=new t.registry.Type("field"),t.registry.Type.RENDERER=new t.registry.Type("renderer"),t.registry.Type.TOOLBOX=new t.registry.Type("toolbox"),t.registry.Type.THEME=new t.registry.Type("theme"),t.registry.Type.TOOLBOX_ITEM=new t.registry.Type("toolboxItem"),t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new t.registry.Type("flyoutsVerticalToolbox"),t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new t.registry.Type("flyoutsHorizontalToolbox"),t.registry.Type.METRICS_MANAGER=new t.registry.Type("metricsManager"),t.registry.Type.BLOCK_DRAGGER=new t.registry.Type("blockDragger"),t.registry.register=function(e,n,a,f){if(!(e instanceof t.registry.Type)&&"string"!=typeof e||""==String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!a)throw Error("Can not register a null value");var E=t.registry.typeMap_[e];if(E||(E=t.registry.typeMap_[e]=Object.create(null)),t.registry.validate_(e,a),!f&&E[n])throw Error('Name "'+n+'" with type "'+e+'" already registered.');E[n]=a},t.registry.validate_=function(e,n){if(e===String(t.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+e+'" must have a fromJson function')},t.registry.unregister=function(e,n){e=String(e).toLowerCase(),n=n.toLowerCase();var a=t.registry.typeMap_[e];a&&a[n]?delete t.registry.typeMap_[e][n]:console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},t.registry.getItem_=function(e,n,a){e=String(e).toLowerCase(),n=n.toLowerCase();var f=t.registry.typeMap_[e];if(!f||!f[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",a)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return f[n]},t.registry.hasItem=function(e,n){return e=String(e).toLowerCase(),n=n.toLowerCase(),!!(e=t.registry.typeMap_[e])&&!!e[n]},t.registry.getClass=function(e,n,a){return t.registry.getItem_(e,n,a)},t.registry.getObject=function(e,n,a){return t.registry.getItem_(e,n,a)},t.registry.getClassFromOptions=function(e,n,a){return"function"==typeof(n=n.plugins[e.toString()]||t.registry.DEFAULT)?n:t.registry.getClass(e,n,a)},t.Events={},t.Events.group_="",t.Events.recordUndo=!0,t.Events.disabled_=0,t.Events.CREATE="create",t.Events.BLOCK_CREATE=t.Events.CREATE,t.Events.DELETE="delete",t.Events.BLOCK_DELETE=t.Events.DELETE,t.Events.CHANGE="change",t.Events.BLOCK_CHANGE=t.Events.CHANGE,t.Events.MOVE="move",t.Events.BLOCK_MOVE=t.Events.MOVE,t.Events.VAR_CREATE="var_create",t.Events.VAR_DELETE="var_delete",t.Events.VAR_RENAME="var_rename",t.Events.UI="ui",t.Events.BLOCK_DRAG="drag",t.Events.SELECTED="selected",t.Events.CLICK="click",t.Events.MARKER_MOVE="marker_move",t.Events.BUBBLE_OPEN="bubble_open",t.Events.TRASHCAN_OPEN="trashcan_open",t.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",t.Events.THEME_CHANGE="theme_change",t.Events.VIEWPORT_CHANGE="viewport_change",t.Events.COMMENT_CREATE="comment_create",t.Events.COMMENT_DELETE="comment_delete",t.Events.COMMENT_CHANGE="comment_change",t.Events.COMMENT_MOVE="comment_move",t.Events.FINISHED_LOADING="finished_loading",t.Events.BUMP_EVENTS=[t.Events.BLOCK_CREATE,t.Events.BLOCK_MOVE,t.Events.COMMENT_CREATE,t.Events.COMMENT_MOVE],t.Events.FIRE_QUEUE_=[],t.Events.fire=function(e){t.Events.isEnabled()&&(t.Events.FIRE_QUEUE_.length||setTimeout(t.Events.fireNow_,0),t.Events.FIRE_QUEUE_.push(e))},t.Events.fireNow_=function(){for(var a,e=t.Events.filter(t.Events.FIRE_QUEUE_,!0),n=t.Events.FIRE_QUEUE_.length=0;a=e[n];n++)if(a.workspaceId){var f=t.Workspace.getById(a.workspaceId);f&&f.fireChangeListener(a)}},t.Events.filter=function(e,n){e=e.slice(),n||e.reverse();for(var I,a=[],f=Object.create(null),E=0;I=e[E];E++)if(!I.isNull()){var Y=[I.isUiEvent?t.Events.UI:I.type,I.blockId,I.workspaceId].join(" "),ee=f[Y],_e=ee?ee.event:null;ee?I.type==t.Events.MOVE&&ee.index==E-1?(_e.newParentId=I.newParentId,_e.newInputName=I.newInputName,_e.newCoordinate=I.newCoordinate,ee.index=E):I.type==t.Events.CHANGE&&I.element==_e.element&&I.name==_e.name?_e.newValue=I.newValue:I.type==t.Events.VIEWPORT_CHANGE?(_e.viewTop=I.viewTop,_e.viewLeft=I.viewLeft,_e.scale=I.scale,_e.oldScale=I.oldScale):(I.type!=t.Events.CLICK||_e.type!=t.Events.BUBBLE_OPEN)&&(f[Y]={event:I,index:E},a.push(I)):(f[Y]={event:I,index:E},a.push(I))}for(e=a.filter(function(De){return!De.isNull()}),n||e.reverse(),E=1;I=e[E];E++)I.type==t.Events.CHANGE&&"mutation"==I.element&&e.unshift(e.splice(E,1)[0]);return e},t.Events.clearPendingUndo=function(){for(var n,e=0;n=t.Events.FIRE_QUEUE_[e];e++)n.recordUndo=!1},t.Events.disable=function(){t.Events.disabled_++},t.Events.enable=function(){t.Events.disabled_--},t.Events.isEnabled=function(){return 0==t.Events.disabled_},t.Events.getGroup=function(){return t.Events.group_},t.Events.setGroup=function(e){t.Events.group_="boolean"==typeof e?e?t.utils.genUid():"":e},t.Events.getDescendantIds=function(e){var n=[];e=e.getDescendants(!1);for(var f,a=0;f=e[a];a++)n[a]=f.id;return n},t.Events.fromJson=function(e,n){var a=t.Events.get(e.type);if(!a)throw Error("Unknown event type.");return(a=new a).fromJson(e),a.workspaceId=n.id,a},t.Events.get=function(e){return t.registry.getClass(t.registry.Type.EVENT,e)},t.Events.disableOrphans=function(e){if((e.type==t.Events.MOVE||e.type==t.Events.CREATE)&&e.workspaceId){var n=t.Workspace.getById(e.workspaceId),a=n.getBlockById(e.blockId);if(a){e=t.Events.recordUndo;try{t.Events.recordUndo=!1;var f=a.getParent();if(f&&f.isEnabled()){var I,E=a.getDescendants(!1);for(n=0;I=E[n];n++)I.setEnabled(!0)}else if((a.outputConnection||a.previousConnection)&&!n.isDragging())do{a.setEnabled(!1),a=a.getNextBlock()}while(a)}finally{t.Events.recordUndo=e}}}},t.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.Events.Abstract.prototype.isUiEvent=!1,t.Events.Abstract.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),e},t.Events.Abstract.prototype.fromJson=function(e){this.isBlank=!1,this.group=e.group},t.Events.Abstract.prototype.isNull=function(){return!1},t.Events.Abstract.prototype.run=function(e){},t.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var e=t.Workspace.getById(this.workspaceId);if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e},t.utils.object={},t.utils.object.inherits=function(e,n){e.superClass_=n.prototype,e.prototype=Object.create(n.prototype),e.prototype.constructor=e},t.utils.object.mixin=function(e,n){for(var a in n)e[a]=n[a]},t.utils.object.deepMerge=function(e,n){for(var a in n)e[a]=null!=n[a]&&"object"==typeof n[a]?t.utils.object.deepMerge(e[a]||Object.create(null),n[a]):n[a];return e},t.utils.object.values=function(e){return Object.values?Object.values(e):Object.keys(e).map(function(n){return e[n]})},t.utils.xml={},t.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",t.utils.xml.document=function(){return document},t.utils.xml.createElement=function(e){return t.utils.xml.document().createElementNS(t.utils.xml.NAME_SPACE,e)},t.utils.xml.createTextNode=function(e){return t.utils.xml.document().createTextNode(e)},t.utils.xml.textToDomDocument=function(e){return(new DOMParser).parseFromString(e,"text/xml")},t.utils.xml.domToText=function(e){return(new XMLSerializer).serializeToString(e)},t.inputTypes={VALUE:t.connectionTypes.INPUT_VALUE,STATEMENT:t.connectionTypes.NEXT_STATEMENT,DUMMY:5},t.Xml={},t.Xml.workspaceToDom=function(e,n){var a=t.utils.xml.createElement("xml"),f=t.Xml.variablesToDom(t.Variables.allUsedVarModels(e));f.hasChildNodes()&&a.appendChild(f);var I,E=e.getTopComments(!0);for(f=0;I=E[f];f++)a.appendChild(I.toXmlWithXY(n));for(e=e.getTopBlocks(!0),f=0;E=e[f];f++)a.appendChild(t.Xml.blockToDomWithXY(E,n));return a},t.Xml.variablesToDom=function(e){for(var f,n=t.utils.xml.createElement("variables"),a=0;f=e[a];a++){var E=t.utils.xml.createElement("variable");E.appendChild(t.utils.xml.createTextNode(f.name)),f.type&&E.setAttribute("type",f.type),E.id=f.getId(),n.appendChild(E)}return n},t.Xml.blockToDomWithXY=function(e,n){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;var a;e.workspace.RTL&&(a=e.workspace.getWidth()),n=t.Xml.blockToDom(e,n);var f=e.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(e.workspace.RTL?a-f.x:f.x)),n.setAttribute("y",Math.round(f.y)),n},t.Xml.fieldToDom_=function(e){if(e.isSerializable()){var n=t.utils.xml.createElement("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},t.Xml.allFieldsToDom_=function(e,n){for(var f,a=0;f=e.inputList[a];a++)for(var I,E=0;I=f.fieldRow[E];E++)(I=t.Xml.fieldToDom_(I))&&n.appendChild(I)},t.Xml.blockToDom=function(e,n){if(e.isInsertionMarker())return(e=e.getChildren(!1)[0])?t.Xml.blockToDom(e):new DocumentFragment;var a=t.utils.xml.createElement(e.isShadow()?"shadow":"block");if(a.setAttribute("type",e.type),n||a.setAttribute("id",e.id),e.mutationToDom){var f=e.mutationToDom();f&&(f.hasChildNodes()||f.hasAttributes())&&a.appendChild(f)}if(t.Xml.allFieldsToDom_(e,a),f=e.getCommentText()){var E=e.commentModel.size,I=e.commentModel.pinned,Y=t.utils.xml.createElement("comment");Y.appendChild(t.utils.xml.createTextNode(f)),Y.setAttribute("pinned",I),Y.setAttribute("h",E.height),Y.setAttribute("w",E.width),a.appendChild(Y)}for(e.data&&((f=t.utils.xml.createElement("data")).appendChild(t.utils.xml.createTextNode(e.data)),a.appendChild(f)),f=0;E=e.inputList[f];f++){var ee;if(I=!0,E.type!=t.inputTypes.DUMMY){var _e=E.connection.targetBlock();E.type==t.inputTypes.VALUE?ee=t.utils.xml.createElement("value"):E.type==t.inputTypes.STATEMENT&&(ee=t.utils.xml.createElement("statement")),!(Y=E.connection.getShadowDom())||_e&&_e.isShadow()||ee.appendChild(t.Xml.cloneShadow_(Y,n)),_e&&(Y=t.Xml.blockToDom(_e,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&(ee.appendChild(Y),I=!1),ee.setAttribute("name",E.name),I||a.appendChild(ee)}}return null!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&a.setAttribute("inline",e.inputsInline),e.isCollapsed()&&a.setAttribute("collapsed",!0),e.isEnabled()||a.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||a.setAttribute("deletable",!1),e.isMovable()||e.isShadow()||a.setAttribute("movable",!1),e.isEditable()||a.setAttribute("editable",!1),(f=e.getNextBlock())&&(Y=t.Xml.blockToDom(f,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&((ee=t.utils.xml.createElement("next")).appendChild(Y),a.appendChild(ee)),!(Y=e.nextConnection&&e.nextConnection.getShadowDom())||f&&f.isShadow()||ee.appendChild(t.Xml.cloneShadow_(Y,n)),a},t.Xml.cloneShadow_=function(e,n){for(var f,a=e=e.cloneNode(!0);a;)if(n&&"shadow"==a.nodeName&&a.removeAttribute("id"),a.firstChild)a=a.firstChild;else{for(;a&&!a.nextSibling;)f=a,a=a.parentNode,f.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==f.data.trim()&&a.firstChild!=f&&t.utils.dom.removeNode(f);a&&(f=a,a=a.nextSibling,f.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==f.data.trim()&&t.utils.dom.removeNode(f))}return e},t.Xml.domToText=function(e){return t.utils.xml.domToText(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},t.Xml.domToPrettyText=function(e){e=t.Xml.domToText(e).split("<");for(var n="",a=1;a<e.length;a++){var f=e[a];"/"==f[0]&&(n=n.substring(2)),e[a]=n+"<"+f,"/"!=f[0]&&"/>"!=f.slice(-2)&&(n+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},t.Xml.textToDom=function(e){var n=t.utils.xml.textToDomDocument(e);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return n.documentElement},t.Xml.clearWorkspaceAndLoadFromXml=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=t.Xml.domToWorkspace(e,n),n.setResizesEnabled(!0),e},t.Xml.domToWorkspace=function(e,n){if(e instanceof t.Workspace){var a=e;e=n,n=a,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var f;n.RTL&&(f=n.getWidth()),a=[],t.utils.dom.startTextWidthCache();var E=t.Events.getGroup();E||t.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var I=!0;try{for(var ee,Y=0;ee=e.childNodes[Y];Y++){var _e=ee.nodeName.toLowerCase(),De=ee;if("block"==_e||"shadow"==_e&&!t.Events.recordUndo){var Ae=t.Xml.domToBlock(De,n);a.push(Ae.id);var Je=De.hasAttribute("x")?parseInt(De.getAttribute("x"),10):10,st=De.hasAttribute("y")?parseInt(De.getAttribute("y"),10):10;isNaN(Je)||isNaN(st)||Ae.moveBy(n.RTL?f-Je:Je,st),I=!1}else{if("shadow"==_e)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==_e)n.rendered?t.WorkspaceCommentSvg?t.WorkspaceCommentSvg.fromXml(De,n,f):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):t.WorkspaceComment?t.WorkspaceComment.fromXml(De,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==_e){if(!I)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");t.Xml.domToVariables(De,n),I=!1}}}}finally{E||t.Events.setGroup(!1),t.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),t.Events.fire(new(t.Events.get(t.Events.FINISHED_LOADING))(n)),a},t.Xml.appendDomToWorkspace=function(e,n){var a;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(a=n.getBlocksBoundingBox()),e=t.Xml.domToWorkspace(e,n),a&&a.top!=a.bottom){var f=a.bottom,E=n.RTL?a.right:a.left,I=1/0,Y=-1/0,ee=1/0;for(a=0;a<e.length;a++){var _e=n.getBlockById(e[a]).getRelativeToSurfaceXY();_e.y<ee&&(ee=_e.y),_e.x<I&&(I=_e.x),_e.x>Y&&(Y=_e.x)}for(f=f-ee+10,E=n.RTL?E-Y:E-I,a=0;a<e.length;a++)n.getBlockById(e[a]).moveBy(E,f)}return e},t.Xml.domToBlock=function(e,n){if(e instanceof t.Workspace){var a=e;e=n,n=a,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}t.Events.disable(),a=n.getAllVariables();try{var f=t.Xml.domToBlockHeadless_(e,n),E=f.getDescendants(!1);if(n.rendered){f.setConnectionTracking(!1);for(var I=E.length-1;0<=I;I--)E[I].initSvg();for(I=E.length-1;0<=I;I--)E[I].render(!1);setTimeout(function(){f.disposed||f.setConnectionTracking(!0)},1),f.updateDisabled(),n.resizeContents()}else for(I=E.length-1;0<=I;I--)E[I].initModel()}finally{t.Events.enable()}if(t.Events.isEnabled()){for(e=t.Variables.getAddedVariables(n,a),I=0;I<e.length;I++)n=e[I],t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(n));t.Events.fire(new(t.Events.get(t.Events.CREATE))(f))}return f},t.Xml.domToVariables=function(e,n){for(var f,a=0;f=e.childNodes[a];a++)if(f.nodeType==t.utils.dom.NodeType.ELEMENT_NODE){var E=f.getAttribute("type"),I=f.getAttribute("id");n.createVariable(f.textContent,E,I)}},t.Xml.mapSupportedXmlTags_=function(e){for(var f,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},a=0;f=e.childNodes[a];a++)if(f.nodeType!=t.utils.dom.NodeType.TEXT_NODE)switch(f.nodeName.toLowerCase()){case"mutation":n.mutation.push(f);break;case"comment":if(!t.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(f);break;case"data":n.data.push(f);break;case"title":case"field":n.field.push(f);break;case"value":case"statement":n.input.push(f);break;case"next":n.next.push(f);break;default:console.warn("Ignoring unknown tag: "+f.nodeName)}return n},t.Xml.applyMutationTagNodes_=function(e,n){for(var E,a=!1,f=0;E=e[f];f++)n.domToMutation&&(n.domToMutation(E),n.initSvg&&(a=!0));return a},t.Xml.applyCommentTagNodes_=function(e,n){for(var f,a=0;f=e[a];a++){var E=f.textContent,I="true"==f.getAttribute("pinned"),Y=parseInt(f.getAttribute("w"),10);f=parseInt(f.getAttribute("h"),10),n.setCommentText(E),n.commentModel.pinned=I,isNaN(Y)||isNaN(f)||(n.commentModel.size=new t.utils.Size(Y,f)),I&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},t.Xml.applyDataTagNodes_=function(e,n){for(var f,a=0;f=e[a];a++)n.data=f.textContent},t.Xml.applyFieldTagNodes_=function(e,n){for(var f,a=0;f=e[a];a++){var E=f.getAttribute("name");t.Xml.domToField_(n,E,f)}},t.Xml.findChildBlocks_=function(e){for(var f,n={childBlockElement:null,childShadowElement:null},a=0;f=e.childNodes[a];a++)f.nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&("block"==f.nodeName.toLowerCase()?n.childBlockElement=f:"shadow"==f.nodeName.toLowerCase()&&(n.childShadowElement=f));return n},t.Xml.applyInputTagNodes_=function(e,n,a,f){for(var I,E=0;I=e[E];E++){var Y=I.getAttribute("name"),ee=a.getInput(Y);if(!ee){console.warn("Ignoring non-existent input "+Y+" in block "+f);break}if((I=t.Xml.findChildBlocks_(I)).childBlockElement){if(!ee.connection)throw TypeError("Input connection does not exist.");t.Xml.domToBlockHeadless_(I.childBlockElement,n,ee.connection,!1)}I.childShadowElement&&ee.connection.setShadowDom(I.childShadowElement)}},t.Xml.applyNextTagNodes_=function(e,n,a){for(var E,f=0;E=e[f];f++){if((E=t.Xml.findChildBlocks_(E)).childBlockElement){if(!a.nextConnection)throw TypeError("Next statement does not exist.");if(a.nextConnection.isConnected())throw TypeError("Next statement is already connected.");t.Xml.domToBlockHeadless_(E.childBlockElement,n,a.nextConnection,!0)}E.childShadowElement&&a.nextConnection&&a.nextConnection.setShadowDom(E.childShadowElement)}},t.Xml.domToBlockHeadless_=function(e,n,a,f){var E=e.getAttribute("type");if(!E)throw TypeError("Block type unspecified: "+e.outerHTML);var I=e.getAttribute("id");I=n.newBlock(E,I);var Y=t.Xml.mapSupportedXmlTags_(e),ee=t.Xml.applyMutationTagNodes_(Y.mutation,I);if(t.Xml.applyCommentTagNodes_(Y.comment,I),t.Xml.applyDataTagNodes_(Y.data,I),a)if(f){if(!I.previousConnection)throw TypeError("Next block does not have previous statement.");a.connect(I.previousConnection)}else if(I.outputConnection)a.connect(I.outputConnection);else{if(!I.previousConnection)throw TypeError("Child block does not have output or previous statement.");a.connect(I.previousConnection)}if(t.Xml.applyFieldTagNodes_(Y.field,I),t.Xml.applyInputTagNodes_(Y.input,n,I,E),t.Xml.applyNextTagNodes_(Y.next,n,I),ee&&I.initSvg(),(n=e.getAttribute("inline"))&&I.setInputsInline("true"==n),(n=e.getAttribute("disabled"))&&I.setEnabled("true"!=n&&"disabled"!=n),(n=e.getAttribute("deletable"))&&I.setDeletable("true"==n),(n=e.getAttribute("movable"))&&I.setMovable("true"==n),(n=e.getAttribute("editable"))&&I.setEditable("true"==n),(n=e.getAttribute("collapsed"))&&I.setCollapsed("true"==n),"shadow"==e.nodeName.toLowerCase()){for(e=I.getChildren(!1),n=0;a=e[n];n++)if(!a.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(I.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");I.setShadow(!0)}return I},t.Xml.domToField_=function(e,n,a){var f=e.getField(n);f?f.fromXml(a):console.warn("Ignoring non-existent field "+n+" in block "+e.type)},t.Xml.deleteNext=function(e){for(var a,n=0;a=e.childNodes[n];n++)if("next"==a.nodeName.toLowerCase()){e.removeChild(a);break}},t.Events.BlockBase=function(e){t.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.BlockBase,t.Events.Abstract),t.Events.BlockBase.prototype.toJson=function(){var e=t.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},t.Events.BlockBase.prototype.fromJson=function(e){t.Events.BlockBase.superClass_.fromJson.call(this,e),this.blockId=e.blockId},t.Events.BlockChange=function(e,n,a,f,E){t.Events.Change.superClass_.constructor.call(this,e),e&&(this.element=void 0===n?"":n,this.name=void 0===a?"":a,this.oldValue=void 0===f?"":f,this.newValue=void 0===E?"":E)},t.utils.object.inherits(t.Events.BlockChange,t.Events.BlockBase),t.Events.Change=t.Events.BlockChange,t.Events.BlockChange.prototype.type=t.Events.CHANGE,t.Events.BlockChange.prototype.toJson=function(){var e=t.Events.BlockChange.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.oldValue=this.oldValue,e.newValue=this.newValue,e},t.Events.BlockChange.prototype.fromJson=function(e){t.Events.BlockChange.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue},t.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},t.Events.BlockChange.prototype.run=function(e){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":n.setEnabled(!e);break;case"inline":n.setInputsInline(!!e);break;case"mutation":var a="";if(n.mutationToDom&&(a=(a=n.mutationToDom())&&t.Xml.domToText(a)),n.domToMutation){var f=t.Xml.textToDom(e||"<mutation/>");n.domToMutation(f)}t.Events.fire(new t.Events.BlockChange(n,"mutation",null,a,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},t.Events.Create=function(e){t.Events.Create.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e))},t.utils.object.inherits(t.Events.Create,t.Events.BlockBase),t.Events.BlockCreate=t.Events.Create,t.Events.Create.prototype.type=t.Events.CREATE,t.Events.Create.prototype.toJson=function(){var e=t.Events.Create.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Create.prototype.fromJson=function(e){t.Events.Create.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Create.prototype.run=function(e){var n=this.getEventWorkspace_();if(e)(e=t.utils.xml.createElement("xml")).appendChild(this.xml),t.Xml.domToWorkspace(e,n);else{e=0;for(var a;a=this.ids[e];e++){var f=n.getBlockById(a);f?f.dispose(!1):a==this.blockId&&console.warn("Can't uncreate non-existent block: "+a)}}},t.Events.Delete=function(e){if(t.Events.Delete.superClass_.constructor.call(this,e),e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e)}},t.utils.object.inherits(t.Events.Delete,t.Events.BlockBase),t.Events.BlockDelete=t.Events.Delete,t.Events.Delete.prototype.type=t.Events.DELETE,t.Events.Delete.prototype.toJson=function(){var e=t.Events.Delete.superClass_.toJson.call(this);return e.oldXml=t.Xml.domToText(this.oldXml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Delete.prototype.fromJson=function(e){t.Events.Delete.superClass_.fromJson.call(this,e),this.oldXml=t.Xml.textToDom(e.oldXml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Delete.prototype.run=function(e){var n=this.getEventWorkspace_();if(e){e=0;for(var a;a=this.ids[e];e++){var f=n.getBlockById(a);f?f.dispose(!1):a==this.blockId&&console.warn("Can't delete non-existent block: "+a)}}else(e=t.utils.xml.createElement("xml")).appendChild(this.oldXml),t.Xml.domToWorkspace(e,n)},t.Events.Move=function(e){t.Events.Move.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},t.utils.object.inherits(t.Events.Move,t.Events.BlockBase),t.Events.BlockMove=t.Events.Move,t.Events.Move.prototype.type=t.Events.MOVE,t.Events.Move.prototype.toJson=function(){var e=t.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Move.prototype.fromJson=function(e){if(t.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate){var n=e.newCoordinate.split(",");this.newCoordinate=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Move.prototype.recordNew=function(){var e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate},t.Events.Move.prototype.currentLocation_=function(){var e=this.getEventWorkspace_().getBlockById(this.blockId),n={},a=e.getParent();return a?(n.parentId=a.id,(e=a.getInputWithBlock(e))&&(n.inputName=e.name)):n.coordinate=e.getRelativeToSurfaceXY(),n},t.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&t.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},t.Events.Move.prototype.run=function(e){var n=this.getEventWorkspace_(),a=n.getBlockById(this.blockId);if(a){var f=e?this.newParentId:this.oldParentId,E=e?this.newInputName:this.oldInputName,I=e?this.newCoordinate:this.oldCoordinate;if(e=null,f&&!(e=n.getBlockById(f)))return void console.warn("Can't connect to non-existent block: "+f);if(a.getParent()&&a.unplug(),I)E=a.getRelativeToSurfaceXY(),a.moveBy(I.x-E.x,I.y-E.y);else{if(n=(a=a.outputConnection||a.previousConnection).type,E){if(e=e.getInput(E))var Y=e.connection}else n==t.connectionTypes.PREVIOUS_STATEMENT&&(Y=e.nextConnection);Y?a.connect(Y):console.warn("Can't connect to non-existent input: "+E)}}else console.warn("Can't move non-existent block: "+this.blockId)},t.registry.register(t.registry.Type.EVENT,t.Events.CREATE,t.Events.Create),t.registry.register(t.registry.Type.EVENT,t.Events.DELETE,t.Events.Delete),t.registry.register(t.registry.Type.EVENT,t.Events.CHANGE,t.Events.BlockChange),t.registry.register(t.registry.Type.EVENT,t.Events.MOVE,t.Events.Move),t.Events.FinishedLoading=function(e){this.isBlank=void 0===e,this.workspaceId=e?e.id:"",this.group=t.Events.getGroup(),this.recordUndo=!1},t.utils.object.inherits(t.Events.FinishedLoading,t.Events.Abstract),t.Events.FinishedLoading.prototype.type=t.Events.FINISHED_LOADING,t.Events.FinishedLoading.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),this.workspaceId&&(e.workspaceId=this.workspaceId),e},t.Events.FinishedLoading.prototype.fromJson=function(e){this.isBlank=!1,this.workspaceId=e.workspaceId,this.group=e.group},t.registry.register(t.registry.Type.EVENT,t.Events.FINISHED_LOADING,t.Events.FinishedLoading),t.Events.UiBase=function(e){t.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===e,this.workspaceId=e||"",this.recordUndo=!1},t.utils.object.inherits(t.Events.UiBase,t.Events.Abstract),t.Events.UiBase.prototype.isUiEvent=!0,t.Events.Ui=function(e,n,a,f){t.Events.Ui.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===a?"":a,this.newValue=void 0===f?"":f},t.utils.object.inherits(t.Events.Ui,t.Events.UiBase),t.Events.Ui.prototype.type=t.Events.UI,t.Events.Ui.prototype.toJson=function(){var e=t.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},t.Events.Ui.prototype.fromJson=function(e){t.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.UI,t.Events.Ui),t.Events.VarBase=function(e){t.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===e)?"":e.getId(),this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.VarBase,t.Events.Abstract),t.Events.VarBase.prototype.toJson=function(){var e=t.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},t.Events.VarBase.prototype.fromJson=function(e){t.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},t.Events.VarCreate=function(e){t.Events.VarCreate.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarCreate,t.Events.VarBase),t.Events.VarCreate.prototype.type=t.Events.VAR_CREATE,t.Events.VarCreate.prototype.toJson=function(){var e=t.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarCreate.prototype.fromJson=function(e){t.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarCreate.prototype.run=function(e){var n=this.getEventWorkspace_();e?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},t.Events.VarDelete=function(e){t.Events.VarDelete.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarDelete,t.Events.VarBase),t.Events.VarDelete.prototype.type=t.Events.VAR_DELETE,t.Events.VarDelete.prototype.toJson=function(){var e=t.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarDelete.prototype.fromJson=function(e){t.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarDelete.prototype.run=function(e){var n=this.getEventWorkspace_();e?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},t.Events.VarRename=function(e,n){t.Events.VarRename.superClass_.constructor.call(this,e),e&&(this.oldName=e.name,this.newName=void 0===n?"":n)},t.utils.object.inherits(t.Events.VarRename,t.Events.VarBase),t.Events.VarRename.prototype.type=t.Events.VAR_RENAME,t.Events.VarRename.prototype.toJson=function(){var e=t.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},t.Events.VarRename.prototype.fromJson=function(e){t.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},t.Events.VarRename.prototype.run=function(e){this.getEventWorkspace_().renameVariableById(this.varId,e?this.newName:this.oldName)},t.registry.register(t.registry.Type.EVENT,t.Events.VAR_CREATE,t.Events.VarCreate),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_DELETE,t.Events.VarDelete),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_RENAME,t.Events.VarRename),t.BlockDragSurfaceSvg=function(e){this.container_=e,this.createDom()},t.BlockDragSurfaceSvg.prototype.SVG_=null,t.BlockDragSurfaceSvg.prototype.dragGroup_=null,t.BlockDragSurfaceSvg.prototype.container_=null,t.BlockDragSurfaceSvg.prototype.scale_=1,t.BlockDragSurfaceSvg.prototype.surfaceXY_=null,t.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new t.utils.Coordinate(0,0),t.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.SVG_))},t.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new t.utils.Coordinate(0,0)},t.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(e,n,a){this.scale_=a,e=e.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(e,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+e+","+n+") scale("+a+")")},t.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,n=this.surfaceXY_.y;e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.BlockDragSurfaceSvg.prototype.translateBy=function(e,n){this.surfaceXY_=new t.utils.Coordinate(this.surfaceXY_.x+e,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.translateSurface=function(e,n){this.surfaceXY_=new t.utils.Coordinate(e*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=t.utils.getRelativeXY(this.SVG_);return new t.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)},t.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},t.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},t.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},t.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},t.BlockDragSurfaceSvg.prototype.clearAndHide=function(e){if(e?e.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},t.Css={},t.Css.injected_=!1,t.Css.register=function(e){if(t.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(t.Css.CONTENT,e),e.length=0},t.Css.inject=function(e,n){if(!t.Css.injected_){t.Css.injected_=!0;var a=t.Css.CONTENT.join("\n");t.Css.CONTENT.length=0,e&&(e=n.replace(/[\\/]$/,""),a=a.replace(/<<<PATH>>>/g,e),(e=document.createElement("style")).id="blockly-common-style",a=document.createTextNode(a),e.appendChild(a),document.head.insertBefore(e,document.head.firstChild))}},t.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],t.Grid=function(e,n){this.gridPattern_=e,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=e.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},t.Grid.prototype.scale_=1,t.Grid.prototype.dispose=function(){this.gridPattern_=null},t.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},t.Grid.prototype.getSpacing=function(){return this.spacing_},t.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},t.Grid.prototype.update=function(e){this.scale_=e;var n=this.spacing_*e||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var a=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,f=n+this.length_/2;this.setLineAttributes_(this.line1_,e,a*=e,f*=e,n*=e,n),this.setLineAttributes_(this.line2_,e,n,n,a,f)},t.Grid.prototype.setLineAttributes_=function(e,n,a,f,E,I){e&&(e.setAttribute("stroke-width",n),e.setAttribute("x1",a),e.setAttribute("y1",E),e.setAttribute("x2",f),e.setAttribute("y2",I))},t.Grid.prototype.moveTo=function(e,n){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",n),(t.utils.userAgent.IE||t.utils.userAgent.EDGE)&&this.update(this.scale_)},t.Grid.createDom=function(e,n,a){return e=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},a),0<n.length&&0<n.spacing?(t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e),1<n.length&&t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e)):t.utils.dom.createSvgElement(t.utils.Svg.LINE,{},e),e},t.Theme=function(e,n,a,f){this.name=e,this.blockStyles=n||Object.create(null),this.categoryStyles=a||Object.create(null),this.componentStyles=f||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,t.registry.register(t.registry.Type.THEME,e,this)},t.Theme.prototype.getClassName=function(){return this.name+"-theme"},t.Theme.prototype.setBlockStyle=function(e,n){this.blockStyles[e]=n},t.Theme.prototype.setCategoryStyle=function(e,n){this.categoryStyles[e]=n},t.Theme.prototype.getComponentStyle=function(e){return(e=this.componentStyles[e])&&"string"==typeof e&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null},t.Theme.prototype.setComponentStyle=function(e,n){this.componentStyles[e]=n},t.Theme.prototype.setFontStyle=function(e){this.fontStyle=e},t.Theme.prototype.setStartHats=function(e){this.startHats=e},t.Theme.defineTheme=function(e,n){var a=new t.Theme(e),f=n.base;return f&&("string"==typeof f&&(f=t.registry.getObject(t.registry.Type.THEME,f)),f instanceof t.Theme&&(t.utils.object.deepMerge(a,f),a.name=e)),t.utils.object.deepMerge(a.blockStyles,n.blockStyles),t.utils.object.deepMerge(a.categoryStyles,n.categoryStyles),t.utils.object.deepMerge(a.componentStyles,n.componentStyles),t.utils.object.deepMerge(a.fontStyle,n.fontStyle),null!=n.startHats&&(a.startHats=n.startHats),a},t.Themes={},t.Themes.Classic={},t.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},t.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},t.Themes.Classic=new t.Theme("classic",t.Themes.Classic.defaultBlockStyles,t.Themes.Classic.categoryStyles),t.utils.IdGenerator={},t.utils.IdGenerator.nextId_=0,t.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(t.utils.IdGenerator.nextId_++).toString(36)},t.utils.Metrics=function(){},t.utils.toolbox={},t.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",t.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",t.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},t.utils.toolbox.convertToolboxDefToJson=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=t.utils.toolbox.parseToolboxTree(e),e=t.utils.toolbox.convertToToolboxJson_(e)),t.utils.toolbox.validateToolbox_(e),e):null},t.utils.toolbox.validateToolbox_=function(e){var n=e.kind;if(e=e.contents,n&&n!=t.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=t.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+t.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+t.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!e)throw Error("Toolbox must have a contents attribute.")},t.utils.toolbox.convertFlyoutDefToJsonArray=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:t.utils.toolbox.xmlToJsonArray_(e):[]},t.utils.toolbox.hasCategories=function(e){if(!e)return!1;var n=e.kind;return n?n==t.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!e.contents.filter(function(a){return"CATEGORY"==a.kind.toUpperCase()}).length},t.utils.toolbox.isCategoryCollapsible=function(e){return!(!e||!e.contents||!e.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},t.utils.toolbox.convertToToolboxJson_=function(e){var n={contents:t.utils.toolbox.xmlToJsonArray_(e)};return e instanceof Node&&t.utils.toolbox.addAttributes_(e,n),n},t.utils.toolbox.xmlToJsonArray_=function(e){var f,n=[],a=e.childNodes;for(a||(a=e),e=0;f=a[e];e++)if(f.tagName){var E={},I=f.tagName.toUpperCase();E.kind=I,"BLOCK"==I?E.blockxml=f:f.childNodes&&0<f.childNodes.length&&(E.contents=t.utils.toolbox.xmlToJsonArray_(f)),t.utils.toolbox.addAttributes_(f,E),n.push(E)}return n},t.utils.toolbox.addAttributes_=function(e,n){for(var a=0;a<e.attributes.length;a++){var f=e.attributes[a];-1<f.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[f.nodeName.replace("css-","")]=f.value):n[f.nodeName]=f.value}},t.utils.toolbox.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(t.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=t.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e},t.Options=function(e){var n=!!e.readOnly;if(n)var a=null,f=!1,E=!1,I=!1,Y=!1,ee=!1,_e=!1;else{a=t.utils.toolbox.convertToolboxDefToJson(e.toolbox),f=t.utils.toolbox.hasCategories(a),void 0===(E=e.trashcan)&&(E=f);var De=e.maxTrashcanContents;E?void 0===De&&(De=32):De=0,void 0===(I=e.collapse)&&(I=f),void 0===(Y=e.comments)&&(Y=f),void 0===(ee=e.disable)&&(ee=f),void 0===(_e=e.sounds)&&(_e=!0)}var Ae=!!e.rtl,Je=e.horizontalLayout;void 0===Je&&(Je=!1);var st=e.toolboxPosition;st="end"!==st,st=Je?st?t.utils.toolbox.Position.TOP:t.utils.toolbox.Position.BOTTOM:st==Ae?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT;var Ge=e.css;void 0===Ge&&(Ge=!0);var lt="https://blockly-demo.appspot.com/static/media/";e.media?lt=e.media:e.path&&(lt=e.path+"media/");var Rt=void 0===e.oneBasedIndex||!!e.oneBasedIndex,Wt=e.renderer||"geras",tt=e.plugins||{};this.RTL=Ae,this.oneBasedIndex=Rt,this.collapse=I,this.comments=Y,this.disable=ee,this.readOnly=n,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=e.maxInstances,this.pathToMedia=lt,this.hasCategories=f,this.moveOptions=t.Options.parseMoveOptions_(e,f),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=E,this.maxTrashcanContents=De,this.hasSounds=_e,this.hasCss=Ge,this.horizontalLayout=Je,this.languageTree=a,this.gridOptions=t.Options.parseGridOptions_(e),this.zoomOptions=t.Options.parseZoomOptions_(e),this.toolboxPosition=st,this.theme=t.Options.parseThemeOptions_(e),this.renderer=Wt,this.rendererOverrides=e.rendererOverrides,this.gridPattern=null,this.parentWorkspace=e.parentWorkspace,this.plugins=tt},t.BlocklyOptions=function(){},t.Options.parseMoveOptions_=function(e,n){var a=e.move||{},f={};return void 0===a.scrollbars&&void 0===e.scrollbars?f.scrollbars=n:"object"==typeof a.scrollbars?(f.scrollbars={},f.scrollbars.horizontal=!!a.scrollbars.horizontal,f.scrollbars.vertical=!!a.scrollbars.vertical,f.scrollbars.horizontal&&f.scrollbars.vertical?f.scrollbars=!0:f.scrollbars.horizontal||f.scrollbars.vertical||(f.scrollbars=!1)):f.scrollbars=!!a.scrollbars||!!e.scrollbars,f.wheel=f.scrollbars&&void 0!==a.wheel?!!a.wheel:"object"==typeof f.scrollbars,f.drag=!(!f.scrollbars||void 0!==a.drag&&!a.drag),f},t.Options.parseZoomOptions_=function(e){var n={};return n.controls=void 0!==(e=e.zoom||{}).controls&&!!e.controls,n.wheel=void 0!==e.wheel&&!!e.wheel,n.startScale=void 0===e.startScale?1:Number(e.startScale),n.maxScale=void 0===e.maxScale?3:Number(e.maxScale),n.minScale=void 0===e.minScale?.3:Number(e.minScale),n.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed),n.pinch=void 0===e.pinch?n.wheel||n.controls:!!e.pinch,n},t.Options.parseGridOptions_=function(e){e=e.grid||{};var n={};return n.spacing=Number(e.spacing)||0,n.colour=e.colour||"#888",n.length=void 0===e.length?1:Number(e.length),n.snap=0<n.spacing&&!!e.snap,n},t.Options.parseThemeOptions_=function(e){return"string"==typeof(e=e.theme||t.Themes.Classic)?t.registry.getObject(t.registry.Type.THEME,e):e instanceof t.Theme?e:t.Theme.defineTheme(e.name||"builtin"+t.utils.IdGenerator.getNextUniqueId(),e)},t.Options.parseToolboxTree=function(e){return t.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),t.utils.toolbox.parseToolboxTree(e)},t.ScrollbarPair=function(e,n,a,f,E){this.workspace_=e,a=void 0===a||a;var I=(n=void 0===n||n)&&a;n&&(this.hScroll=new t.Scrollbar(e,!0,I,f,E)),a&&(this.vScroll=new t.Scrollbar(e,!1,I,f,E)),I&&(this.corner_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:t.Scrollbar.scrollbarThickness,width:t.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),t.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas())),this.oldHostMetrics_=null},t.ScrollbarPair.prototype.dispose=function(){t.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},t.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var n=!1,a=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==e.scrollWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.scrollLeft==e.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==e.scrollHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.scrollTop==e.scrollTop||(a=!0)):a=n=!0,n||a){try{t.Events.disable(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&a&&this.vScroll.resize(e)}finally{t.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=e}},t.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},t.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},t.ScrollbarPair.prototype.setOrigin=function(e,n){this.hScroll&&this.hScroll.setOrigin(e,n),this.vScroll&&this.vScroll.setOrigin(e,n)},t.ScrollbarPair.prototype.set=function(e,n,a){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(n,!1),(a||void 0===a)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(e))},t.ScrollbarPair.prototype.setX=function(e){this.hScroll&&this.hScroll.set(e,!0)},t.ScrollbarPair.prototype.setY=function(e){this.vScroll&&this.vScroll.set(e,!0)},t.ScrollbarPair.prototype.setContainerVisible=function(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)},t.ScrollbarPair.prototype.isVisible=function(){var e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e},t.ScrollbarPair.prototype.resizeContent=function(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)},t.ScrollbarPair.prototype.resizeView=function(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)},t.Scrollbar=function(e,n,a,f,E){this.workspace_=e,this.pair_=a||!1,this.horizontal_=n,this.margin_=void 0!==E?E:t.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(f),this.position=new t.utils.Coordinate(0,0),e=t.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=t.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},t.Scrollbar.prototype.origin_=new t.utils.Coordinate(0,0),t.Scrollbar.prototype.startDragMouse_=0,t.Scrollbar.prototype.scrollbarLength_=0,t.Scrollbar.prototype.handleLength_=0,t.Scrollbar.prototype.handlePosition_=0,t.Scrollbar.prototype.isVisible_=!0,t.Scrollbar.prototype.containerVisible_=!0,t.Scrollbar.scrollbarThickness=15,t.Touch.TOUCH_ENABLED&&(t.Scrollbar.scrollbarThickness=25),t.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,t.Scrollbar.metricsAreEquivalent_=function(e,n){return e.viewWidth==n.viewWidth&&e.viewHeight==n.viewHeight&&e.viewLeft==n.viewLeft&&e.viewTop==n.viewTop&&e.absoluteTop==n.absoluteTop&&e.absoluteLeft==n.absoluteLeft&&e.scrollWidth==n.scrollWidth&&e.scrollHeight==n.scrollHeight&&e.scrollLeft==n.scrollLeft&&e.scrollTop==n.scrollTop},t.Scrollbar.prototype.dispose=function(){this.cleanUp_(),t.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,t.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,t.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},t.Scrollbar.prototype.constrainHandleLength_=function(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength_)},t.Scrollbar.prototype.setHandleLength_=function(e){this.handleLength_=e,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},t.Scrollbar.prototype.constrainHandlePosition_=function(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength_-this.handleLength_)},t.Scrollbar.prototype.setHandlePosition=function(e){this.handlePosition_=e,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},t.Scrollbar.prototype.setScrollbarLength_=function(e){this.scrollbarLength_=e,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},t.Scrollbar.prototype.setPosition=function(e,n){this.position.x=e,this.position.y=n,t.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},t.Scrollbar.prototype.resize=function(e){!e&&!(e=this.workspace_.getMetrics())||this.oldHostMetrics_&&t.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.oldHostMetrics_=e,this.updateMetrics_())},t.Scrollbar.prototype.requiresViewResize_=function(e){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics_.absoluteTop!==e.absoluteTop},t.Scrollbar.prototype.resizeHorizontal_=function(e){this.requiresViewResize_(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeViewHorizontal=function(e){var n=e.viewWidth-2*this.margin_;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=e.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=t.Scrollbar.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-t.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeContentHorizontal=function(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*e.viewWidth/e.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var a=this.scrollbarLength_-this.handleLength_;e=this.constrainHandlePosition_(e=(e.viewLeft-e.scrollLeft)/(n=e.scrollWidth-e.viewWidth)*a),this.setHandlePosition(e),this.ratio=a/n}},t.Scrollbar.prototype.resizeVertical_=function(e){this.requiresViewResize_(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeViewVertical=function(e){var n=e.viewHeight-2*this.margin_;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?e.absoluteLeft+this.margin_:e.absoluteLeft+e.viewWidth-t.Scrollbar.scrollbarThickness-this.margin_,e.absoluteTop+this.margin_),this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeContentVertical=function(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*e.viewHeight/e.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var a=this.scrollbarLength_-this.handleLength_;e=this.constrainHandlePosition_(e=(e.viewTop-e.scrollTop)/(n=e.scrollHeight-e.viewHeight)*a),this.setHandlePosition(e),this.ratio=a/n}},t.Scrollbar.prototype.createDom_=function(e){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(n+=" "+e),this.outerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{class:n},null),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((t.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),t.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},t.Scrollbar.prototype.isVisible=function(){return this.isVisible_},t.Scrollbar.prototype.setContainerVisible=function(e){var n=e!=this.containerVisible_;this.containerVisible_=e,n&&this.updateDisplay_()},t.Scrollbar.prototype.setVisible=function(e){var n=e!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=e,n&&this.updateDisplay_()},t.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},t.Scrollbar.prototype.onMouseDownBar_=function(e){if(this.workspace_.markFocused(),t.Touch.clearTouchIdentifier(),this.cleanUp_(),t.utils.isRightButton(e))e.stopPropagation();else{var n=t.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var a=t.utils.getInjectionDivXY_(this.svgHandle_),f=this.handlePosition_,E=.95*this.handleLength_;n<=(a=this.horizontal_?a.x:a.y)?f-=E:n>=a+this.handleLength_&&(f+=E),this.setHandlePosition(this.constrainHandlePosition_(f)),this.updateMetrics_(),e.stopPropagation(),e.preventDefault()}},t.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),t.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,t.Scrollbar.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),t.Scrollbar.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),e.stopPropagation(),e.preventDefault())},t.Scrollbar.prototype.onMouseMoveHandle_=function(e){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?e.clientX:e.clientY)-this.startDragMouse_))),this.updateMetrics_()},t.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),t.Touch.clearTouchIdentifier(),this.cleanUp_()},t.Scrollbar.prototype.cleanUp_=function(){t.hideChaff(!0),t.Scrollbar.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseUpWrapper_),t.Scrollbar.onMouseUpWrapper_=null),t.Scrollbar.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseMoveWrapper_),t.Scrollbar.onMouseMoveWrapper_=null)},t.Scrollbar.prototype.getRatio_=function(){var e=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(e)&&(e=0),e},t.Scrollbar.prototype.updateMetrics_=function(){var e=this.getRatio_(),n={};this.horizontal_?n.x=e:n.y=e,this.workspace_.setMetrics(n)},t.Scrollbar.prototype.set=function(e,n){this.setHandlePosition(this.constrainHandlePosition_(e*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},t.Scrollbar.prototype.setOrigin=function(e,n){this.origin_=new t.utils.Coordinate(e,n)},t.Tooltip={},t.Tooltip.visible=!1,t.Tooltip.blocked_=!1,t.Tooltip.LIMIT=50,t.Tooltip.mouseOutPid_=0,t.Tooltip.showPid_=0,t.Tooltip.lastX_=0,t.Tooltip.lastY_=0,t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.OFFSET_X=0,t.Tooltip.OFFSET_Y=10,t.Tooltip.RADIUS_OK=10,t.Tooltip.HOVER_MS=750,t.Tooltip.MARGINS=5,t.Tooltip.DIV=null,t.Tooltip.getTooltipOfObject=function(e){if(e=t.Tooltip.getTargetObject_(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},t.Tooltip.getTargetObject_=function(e){for(;e&&e.tooltip;){if("string"==typeof e.tooltip||"function"==typeof e.tooltip)return e;e=e.tooltip}return null},t.Tooltip.createDom=function(){t.Tooltip.DIV||(t.Tooltip.DIV=document.createElement("div"),t.Tooltip.DIV.className="blocklyTooltipDiv",(t.parentContainer||document.body).appendChild(t.Tooltip.DIV))},t.Tooltip.bindMouseEvents=function(e){e.mouseOverWrapper_=t.browserEvents.bind(e,"mouseover",null,t.Tooltip.onMouseOver_),e.mouseOutWrapper_=t.browserEvents.bind(e,"mouseout",null,t.Tooltip.onMouseOut_),e.addEventListener("mousemove",t.Tooltip.onMouseMove_,!1)},t.Tooltip.unbindMouseEvents=function(e){e&&(t.browserEvents.unbind(e.mouseOverWrapper_),t.browserEvents.unbind(e.mouseOutWrapper_),e.removeEventListener("mousemove",t.Tooltip.onMouseMove_))},t.Tooltip.onMouseOver_=function(e){t.Tooltip.blocked_||(e=t.Tooltip.getTargetObject_(e.currentTarget),t.Tooltip.element_!=e&&(t.Tooltip.hide(),t.Tooltip.poisonedElement_=null,t.Tooltip.element_=e),clearTimeout(t.Tooltip.mouseOutPid_))},t.Tooltip.onMouseOut_=function(e){t.Tooltip.blocked_||(t.Tooltip.mouseOutPid_=setTimeout(function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},1),clearTimeout(t.Tooltip.showPid_))},t.Tooltip.onMouseMove_=function(e){if(t.Tooltip.element_&&t.Tooltip.element_.tooltip&&!t.Tooltip.blocked_)if(t.Tooltip.visible){var n=t.Tooltip.lastX_-e.pageX;e=t.Tooltip.lastY_-e.pageY,Math.sqrt(n*n+e*e)>t.Tooltip.RADIUS_OK&&t.Tooltip.hide()}else t.Tooltip.poisonedElement_!=t.Tooltip.element_&&(clearTimeout(t.Tooltip.showPid_),t.Tooltip.lastX_=e.pageX,t.Tooltip.lastY_=e.pageY,t.Tooltip.showPid_=setTimeout(t.Tooltip.show_,t.Tooltip.HOVER_MS))},t.Tooltip.dispose=function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},t.Tooltip.hide=function(){t.Tooltip.visible&&(t.Tooltip.visible=!1,t.Tooltip.DIV&&(t.Tooltip.DIV.style.display="none")),t.Tooltip.showPid_&&clearTimeout(t.Tooltip.showPid_)},t.Tooltip.block=function(){t.Tooltip.hide(),t.Tooltip.blocked_=!0},t.Tooltip.unblock=function(){t.Tooltip.blocked_=!1},t.Tooltip.show_=function(){if(!t.Tooltip.blocked_&&(t.Tooltip.poisonedElement_=t.Tooltip.element_,t.Tooltip.DIV)){t.Tooltip.DIV.textContent="";var e=t.Tooltip.getTooltipOfObject(t.Tooltip.element_);e=(e=t.utils.string.wrap(e,t.Tooltip.LIMIT)).split("\n");for(var n=0;n<e.length;n++){var a=document.createElement("div");a.appendChild(document.createTextNode(e[n])),t.Tooltip.DIV.appendChild(a)}e=t.Tooltip.element_.RTL,n=document.documentElement.clientWidth,a=document.documentElement.clientHeight,t.Tooltip.DIV.style.direction=e?"rtl":"ltr",t.Tooltip.DIV.style.display="block",t.Tooltip.visible=!0;var f=t.Tooltip.lastX_;f=e?f-(t.Tooltip.OFFSET_X+t.Tooltip.DIV.offsetWidth):f+t.Tooltip.OFFSET_X;var E=t.Tooltip.lastY_+t.Tooltip.OFFSET_Y;E+t.Tooltip.DIV.offsetHeight>a+window.scrollY&&(E-=t.Tooltip.DIV.offsetHeight+2*t.Tooltip.OFFSET_Y),e?f=Math.max(t.Tooltip.MARGINS-window.scrollX,f):f+t.Tooltip.DIV.offsetWidth>n+window.scrollX-2*t.Tooltip.MARGINS&&(f=n-t.Tooltip.DIV.offsetWidth-2*t.Tooltip.MARGINS),t.Tooltip.DIV.style.top=E+"px",t.Tooltip.DIV.style.left=f+"px"}},t.utils.aria={},t.utils.aria.ARIA_PREFIX_="aria-",t.utils.aria.ROLE_ATTRIBUTE_="role",t.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},t.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},t.utils.aria.setRole=function(e,n){e.setAttribute(t.utils.aria.ROLE_ATTRIBUTE_,n)},t.utils.aria.setState=function(e,n,a){Array.isArray(a)&&(a=a.join(" ")),e.setAttribute(t.utils.aria.ARIA_PREFIX_+n,a)},t.IASTNodeLocation=function(){},t.IASTNodeLocationSvg=function(){},t.IASTNodeLocationWithBlock=function(){},t.IKeyboardAccessible=function(){},t.utils.deprecation={},t.utils.deprecation.warn=function(e,n,a,f){e=e+" was deprecated on "+n+" and will be deleted on "+a+".",f&&(e+="\nUse "+f+" instead."),console.warn(e)},t.Connection=function(e,n){this.sourceBlock_=e,this.type=n},t.Connection.CAN_CONNECT=0,t.Connection.REASON_SELF_CONNECTION=1,t.Connection.REASON_WRONG_TYPE=2,t.Connection.REASON_TARGET_NULL=3,t.Connection.REASON_CHECKS_FAILED=4,t.Connection.REASON_DIFFERENT_WORKSPACES=5,t.Connection.REASON_SHADOW_PARENT=6,t.Connection.REASON_DRAG_CHECKS_FAILED=7,t.Connection.prototype.targetConnection=null,t.Connection.prototype.disposed=!1,t.Connection.prototype.check_=null,t.Connection.prototype.shadowDom_=null,t.Connection.prototype.x=0,t.Connection.prototype.y=0,t.Connection.prototype.connect_=function(e){var ee,n=t.connectionTypes.INPUT_VALUE,a=this.getSourceBlock(),f=e.getSourceBlock();if(e.isConnected()&&e.disconnect(),this.isConnected()){var E=this.getShadowDom(!0);this.shadowDom_=null;var I=this.targetBlock();if(I.isShadow())I.dispose(!1);else{this.disconnect();var Y=I}this.shadowDom_=E}t.Events.isEnabled()&&(ee=new(t.Events.get(t.Events.BLOCK_MOVE))(f)),t.Connection.connectReciprocally_(this,e),f.setParent(a),ee&&(ee.recordNew(),t.Events.fire(ee)),Y&&((f=t.Connection.getConnectionForOrphanedConnection(f,e=this.type===n?Y.outputConnection:Y.previousConnection))?e.connect(f):e.onFailedConnect(this))},t.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var e=this.targetBlock();e&&e.unplug()}this.disposed=!0},t.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Connection.prototype.isSuperior=function(){return this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.NEXT_STATEMENT},t.Connection.prototype.isConnected=function(){return!!this.targetConnection},t.Connection.prototype.canConnectWithReason=function(e){return t.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,e,!1)},t.Connection.prototype.checkConnection=function(e){t.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),a=n.canConnectWithReason(this,e,!1);if(a!=t.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(a,this,e))},t.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},t.Connection.prototype.isConnectionAllowed=function(e){return t.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!0)},t.Connection.prototype.onFailedConnect=function(e){},t.Connection.prototype.connect=function(e){if(this.targetConnection!=e&&this.getConnectionChecker().canConnect(this,e,!1)){var n=t.Events.getGroup();n||t.Events.setGroup(!0),this.isSuperior()?this.connect_(e):e.connect_(this),n||t.Events.setGroup(!1)}},t.Connection.connectReciprocally_=function(e,n){if(!e||!n)throw Error("Cannot connect null connections.");e.targetConnection=n,n.targetConnection=e},t.Connection.getSingleConnection_=function(e,n){for(var I,a=null,f=(n=n.outputConnection).getConnectionChecker(),E=0;I=e.inputList[E];E++)if((I=I.connection)&&f.canConnect(n,I,!1)){if(a)return null;a=I}return a},t.Connection.getConnectionForOrphanedOutput_=function(e,n){for(var a;a=t.Connection.getSingleConnection_(e,n);)if(!(e=a.targetBlock())||e.isShadow())return a;return null},t.Connection.getConnectionForOrphanedConnection=function(e,n){if(n.type===t.connectionTypes.OUTPUT_VALUE)return t.Connection.getConnectionForOrphanedOutput_(e,n.getSourceBlock());e=e.lastConnectionInStack(!0);var a=n.getConnectionChecker();return e&&a.canConnect(n,e,!1)?e:null},t.Connection.prototype.disconnect=function(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,a=e.getSourceBlock();e=this}else n=e.getSourceBlock(),a=this.sourceBlock_;var f=t.Events.getGroup();f||t.Events.setGroup(!0),this.disconnectInternal_(n,a),a.isShadow()||e.respawnShadow_(),f||t.Events.setGroup(!1)},t.Connection.prototype.disconnectInternal_=function(e,n){var a;t.Events.isEnabled()&&(a=new(t.Events.get(t.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),a&&(a.recordNew(),t.Events.fire(a))},t.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),n=this.getShadowDom();if(e.workspace&&n)if((e=t.Xml.domToBlock(n,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}},t.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},t.Connection.prototype.checkType=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!1)},t.Connection.prototype.checkType_=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(e)},t.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},t.Connection.prototype.setCheck=function(e){return e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this},t.Connection.prototype.getCheck=function(){return this.check_},t.Connection.prototype.setShadowDom=function(e){this.shadowDom_=e,(e=this.targetBlock())?e.isShadow()&&(e.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},t.Connection.prototype.getShadowDom=function(e){return e&&this.targetBlock().isShadow()?t.Xml.blockToDom(this.targetBlock()):this.shadowDom_},t.Connection.prototype.neighbours=function(e){return[]},t.Connection.prototype.getParentInput=function(){for(var e=null,n=this.sourceBlock_.inputList,a=0;a<n.length;a++)if(n[a].connection===this){e=n[a];break}return e},t.Connection.prototype.toString=function(){var e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection==this)var n="Output Connection of ";else if(e.previousConnection==this)n="Previous Connection of ";else if(e.nextConnection==this)n="Next Connection of ";else{n=null;for(var f,a=0;f=e.inputList[a];a++)if(f.connection==this){n=f;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+e.toDevString()},t.IConnectionChecker=function(){},t.ConnectionChecker=function(){},t.ConnectionChecker.prototype.canConnect=function(e,n,a,f){return this.canConnectWithReason(e,n,a,f)==t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.canConnectWithReason=function(e,n,a,f){var E=this.doSafetyChecks(e,n);return E!=t.Connection.CAN_CONNECT?E:this.doTypeChecks(e,n)?a&&!this.doDragChecks(e,n,f||0)?t.Connection.REASON_DRAG_CHECKS_FAILED:t.Connection.CAN_CONNECT:t.Connection.REASON_CHECKS_FAILED},t.ConnectionChecker.prototype.getErrorMessage=function(e,n,a){switch(e){case t.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case t.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case t.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case t.Connection.REASON_TARGET_NULL:return"Target connection is null.";case t.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+a.getCheck();case t.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case t.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},t.ConnectionChecker.prototype.doSafetyChecks=function(e,n){if(!e||!n)return t.Connection.REASON_TARGET_NULL;if(e.isSuperior())var a=e.getSourceBlock(),f=n.getSourceBlock();else f=e.getSourceBlock(),a=n.getSourceBlock();return a==f?t.Connection.REASON_SELF_CONNECTION:n.type!=t.OPPOSITE_TYPE[e.type]?t.Connection.REASON_WRONG_TYPE:a.workspace!==f.workspace?t.Connection.REASON_DIFFERENT_WORKSPACES:a.isShadow()&&!f.isShadow()?t.Connection.REASON_SHADOW_PARENT:t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.doTypeChecks=function(e,n){if(e=e.getCheck(),n=n.getCheck(),!e||!n)return!0;for(var a=0;a<e.length;a++)if(-1!=n.indexOf(e[a]))return!0;return!1},t.ConnectionChecker.prototype.doDragChecks=function(e,n,a){if(e.distanceFrom(n)>a||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case t.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case t.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case t.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case t.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==t.draggingConnections.indexOf(n)},t.ConnectionChecker.prototype.canConnectToPrevious_=function(e,n){return!(e.targetConnection||-1!=t.draggingConnections.indexOf(n)||n.targetConnection&&(!(e=n.targetBlock()).isInsertionMarker()||e.getPreviousBlock()))},t.registry.register(t.registry.Type.CONNECTION_CHECKER,t.registry.DEFAULT,t.ConnectionChecker),t.VariableMap=function(e){this.variableMap_=Object.create(null),this.workspace=e},t.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},t.VariableMap.prototype.renameVariable=function(e,n){var a=this.getVariable(n,e.type),f=this.workspace.getAllBlocks(!1);t.Events.setGroup(!0);try{a&&a.getId()!=e.getId()?this.renameVariableWithConflict_(e,n,a,f):this.renameVariableAndUses_(e,n,f)}finally{t.Events.setGroup(!1)}},t.VariableMap.prototype.renameVariableById=function(e,n){var a=this.getVariableById(e);if(!a)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(a,n)},t.VariableMap.prototype.renameVariableAndUses_=function(e,n,a){for(t.Events.fire(new(t.Events.get(t.Events.VAR_RENAME))(e,n)),e.name=n,n=0;n<a.length;n++)a[n].updateVarName(e)},t.VariableMap.prototype.renameVariableWithConflict_=function(e,n,a,f){var E=e.type;for(n!=a.name&&this.renameVariableAndUses_(a,n,f),n=0;n<f.length;n++)f[n].renameVarById(e.getId(),a.getId());t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e)),e=this.getVariablesOfType(E).indexOf(e),this.variableMap_[E].splice(e,1)},t.VariableMap.prototype.createVariable=function(e,n,a){var f=this.getVariable(e,n);if(f){if(a&&f.getId()!=a)throw Error('Variable "'+e+'" is already in use and its id is "'+f.getId()+'" which conflicts with the passed in id, "'+a+'".');return f}if(a&&this.getVariableById(a))throw Error('Variable id, "'+a+'", is already in use.');return f=a||t.utils.genUid(),f=new t.VariableModel(this.workspace,e,n=n||"",f),(e=this.variableMap_[n]||[]).push(f),delete this.variableMap_[n],this.variableMap_[n]=e,f},t.VariableMap.prototype.deleteVariable=function(e){for(var f,n=this.variableMap_[e.type],a=0;f=n[a];a++)if(f.getId()==e.getId()){n.splice(a,1),t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e));break}},t.VariableMap.prototype.deleteVariableById=function(e){var n=this.getVariableById(e);if(n){var E,a=n.name,f=this.getVariableUsesById(e);for(e=0;E=f[e];e++)if("procedures_defnoreturn"==E.type||"procedures_defreturn"==E.type)return e=E.getFieldValue("NAME"),a=t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",a).replace("%2",e),void t.alert(a);var I=this;1<f.length?(a=t.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(f.length)).replace("%2",a),t.confirm(a,function(Y){Y&&n&&I.deleteVariableInternal(n,f)})):I.deleteVariableInternal(n,f)}else console.warn("Can't delete non-existent variable: "+e)},t.VariableMap.prototype.deleteVariableInternal=function(e,n){var a=t.Events.getGroup();a||t.Events.setGroup(!0);try{for(var f=0;f<n.length;f++)n[f].dispose(!0);this.deleteVariable(e)}finally{a||t.Events.setGroup(!1)}},t.VariableMap.prototype.getVariable=function(e,n){if(n=this.variableMap_[n||""])for(var f,a=0;f=n[a];a++)if(t.Names.equals(f.name,e))return f;return null},t.VariableMap.prototype.getVariableById=function(e){for(var n=Object.keys(this.variableMap_),a=0;a<n.length;a++)for(var I,f=n[a],E=0;I=this.variableMap_[f][E];E++)if(I.getId()==e)return I;return null},t.VariableMap.prototype.getVariablesOfType=function(e){return(e=this.variableMap_[e||""])?e.slice():[]},t.VariableMap.prototype.getVariableTypes=function(e){var n={};t.utils.object.mixin(n,this.variableMap_),e&&e.getPotentialVariableMap()&&t.utils.object.mixin(n,e.getPotentialVariableMap().variableMap_),e=Object.keys(n),n=!1;for(var a=0;a<e.length;a++)""==e[a]&&(n=!0);return n||e.push(""),e},t.VariableMap.prototype.getAllVariables=function(){var n,e=[];for(n in this.variableMap_)e=e.concat(this.variableMap_[n]);return e},t.VariableMap.prototype.getAllVariableNames=function(){var n,e=[];for(n in this.variableMap_)for(var E,a=this.variableMap_[n],f=0;E=a[f];f++)e.push(E.name);return e},t.VariableMap.prototype.getVariableUsesById=function(e){for(var n=[],a=this.workspace.getAllBlocks(!1),f=0;f<a.length;f++){var E=a[f].getVarModels();if(E)for(var I=0;I<E.length;I++)E[I].getId()==e&&n.push(a[f])}return n},t.Workspace=function(e){this.id=t.utils.genUid(),t.Workspace.WorkspaceDB_[this.id]=this,this.options=e||new t.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(t.registry.getClassFromOptions(t.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new t.VariableMap(this),this.potentialVariableMap_=null},t.Workspace.prototype.rendered=!1,t.Workspace.prototype.isClearing=!1,t.Workspace.prototype.MAX_UNDO=1024,t.Workspace.prototype.connectionDBList=null,t.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete t.Workspace.WorkspaceDB_[this.id]},t.Workspace.SCAN_ANGLE=3,t.Workspace.prototype.sortObjects_=function(e,n){return e=e.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),e.y+t.Workspace.prototype.sortObjects_.offset*e.x-(n.y+t.Workspace.prototype.sortObjects_.offset*n.x)},t.Workspace.prototype.addTopBlock=function(e){this.topBlocks_.push(e)},t.Workspace.prototype.removeTopBlock=function(e){if(!t.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")},t.Workspace.prototype.getTopBlocks=function(e){var n=[].concat(this.topBlocks_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.addTypedBlock=function(e){this.typedBlocksDB_[e.type]||(this.typedBlocksDB_[e.type]=[]),this.typedBlocksDB_[e.type].push(e)},t.Workspace.prototype.removeTypedBlock=function(e){this.typedBlocksDB_[e.type].splice(this.typedBlocksDB_[e.type].indexOf(e),1),this.typedBlocksDB_[e.type].length||delete this.typedBlocksDB_[e.type]},t.Workspace.prototype.getBlocksByType=function(e,n){return this.typedBlocksDB_[e]?(e=this.typedBlocksDB_[e].slice(0),n&&1<e.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e):[]},t.Workspace.prototype.addTopComment=function(e){this.topComments_.push(e),this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB_[e.id]=e},t.Workspace.prototype.removeTopComment=function(e){if(!t.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]},t.Workspace.prototype.getTopComments=function(e){var n=[].concat(this.topComments_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.getAllBlocks=function(e){if(e){e=this.getTopBlocks(!0);for(var n=[],a=0;a<e.length;a++)n.push.apply(n,e[a].getDescendants(!0))}else for(n=this.getTopBlocks(!1),a=0;a<n.length;a++)n.push.apply(n,n[a].getChildren(!1));return n.filter(function(f){return!f.isInsertionMarker()})},t.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=t.Events.getGroup();for(e||t.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);e||t.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},t.Workspace.prototype.renameVariableById=function(e,n){this.variableMap_.renameVariableById(e,n)},t.Workspace.prototype.createVariable=function(e,n,a){return this.variableMap_.createVariable(e,n,a)},t.Workspace.prototype.getVariableUsesById=function(e){return this.variableMap_.getVariableUsesById(e)},t.Workspace.prototype.deleteVariableById=function(e){this.variableMap_.deleteVariableById(e)},t.Workspace.prototype.getVariable=function(e,n){return this.variableMap_.getVariable(e,n)},t.Workspace.prototype.getVariableById=function(e){return this.variableMap_.getVariableById(e)},t.Workspace.prototype.getVariablesOfType=function(e){return this.variableMap_.getVariablesOfType(e)},t.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},t.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},t.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},t.Workspace.prototype.getWidth=function(){return 0},t.Workspace.prototype.newBlock=function(e,n){return new t.Block(this,e,n)},t.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},t.Workspace.prototype.remainingCapacityOfType=function(e){return this.options.maxInstances?(void 0!==this.options.maxInstances[e]?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0},t.Workspace.prototype.isCapacityAvailable=function(e){if(!this.hasBlockLimits())return!0;var a,n=0;for(a in e){if(e[a]>this.remainingCapacityOfType(a))return!1;n+=e[a]}return!(n>this.remainingCapacity())},t.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},t.Workspace.prototype.getUndoStack=function(){return this.undoStack_},t.Workspace.prototype.getRedoStack=function(){return this.redoStack_},t.Workspace.prototype.undo=function(e){var n=e?this.redoStack_:this.undoStack_,a=e?this.undoStack_:this.redoStack_,f=n.pop();if(f){for(var E=[f];n.length&&f.group&&f.group==n[n.length-1].group;)E.push(n.pop());for(n=0;f=E[n];n++)a.push(f);E=t.Events.filter(E,e),t.Events.recordUndo=!1;try{for(n=0;f=E[n];n++)f.run(e)}finally{t.Events.recordUndo=!0}}},t.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,t.Events.clearPendingUndo()},t.Workspace.prototype.addChangeListener=function(e){return this.listeners_.push(e),e},t.Workspace.prototype.removeChangeListener=function(e){t.utils.arrayRemove(this.listeners_,e)},t.Workspace.prototype.fireChangeListener=function(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var a,n=0;a=this.listeners_[n];n++)a(e)},t.Workspace.prototype.getBlockById=function(e){return this.blockDB_[e]||null},t.Workspace.prototype.setBlockById=function(e,n){this.blockDB_[e]=n},t.Workspace.prototype.removeBlockById=function(e){delete this.blockDB_[e]},t.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null},t.Workspace.prototype.allInputsFilled=function(e){for(var f,n=this.getTopBlocks(!1),a=0;f=n[a];a++)if(!f.allInputsFilled(e))return!1;return!0},t.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},t.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new t.VariableMap(this)},t.Workspace.prototype.getVariableMap=function(){return this.variableMap_},t.Workspace.prototype.setVariableMap=function(e){this.variableMap_=e},t.Workspace.WorkspaceDB_=Object.create(null),t.Workspace.getById=function(e){return t.Workspace.WorkspaceDB_[e]||null},t.Workspace.getAll=function(){var n,e=[];for(n in t.Workspace.WorkspaceDB_)e.push(t.Workspace.WorkspaceDB_[n]);return e},t.WorkspaceDragSurfaceSvg=function(e){this.container_=e,this.createDom()},t.WorkspaceDragSurfaceSvg.prototype.SVG_=null,t.WorkspaceDragSurfaceSvg.prototype.container_=null,t.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},t.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,n){e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return t.utils.getRelativeXY(this.SVG_)},t.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],a=this.SVG_.childNodes[1];if(!(n&&a&&t.utils.dom.hasClass(n,"blocklyBlockCanvas")&&t.utils.dom.hasClass(a,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?t.utils.dom.insertAfter(n,this.previousSibling_):e.insertBefore(n,e.firstChild),t.utils.dom.insertAfter(a,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");t.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},t.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(e,n,a,f,E,I){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=a,e.setAttribute("transform","translate(0, 0) scale("+I+")"),n.setAttribute("transform","translate(0, 0) scale("+I+")"),this.SVG_.setAttribute("width",f),this.SVG_.setAttribute("height",E),this.SVG_.appendChild(e),this.SVG_.appendChild(n),this.SVG_.style.display="block"},t.blockRendering={},t.blockRendering.useDebugger=!1,t.blockRendering.register=function(e,n){t.registry.register(t.registry.Type.RENDERER,e,n)},t.blockRendering.unregister=function(e){t.registry.unregister(t.registry.Type.RENDERER,e)},t.blockRendering.startDebugger=function(){t.blockRendering.useDebugger=!0},t.blockRendering.stopDebugger=function(){t.blockRendering.useDebugger=!1},t.blockRendering.init=function(e,n,a){return(e=new(t.registry.getClass(t.registry.Type.RENDERER,e))(e)).init(n,a),e},t.ASTNode=function(e,n,a){if(!n)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=t.ASTNode.isConnectionType_(e),this.location_=n,this.wsCoordinate_=null,this.processParams_(a||null)},t.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},t.ASTNode.NAVIGATE_ALL_FIELDS=!1,t.ASTNode.DEFAULT_OFFSET_Y=-20,t.ASTNode.isConnectionType_=function(e){switch(e){case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:case t.ASTNode.types.INPUT:case t.ASTNode.types.OUTPUT:return!0}return!1},t.ASTNode.createFieldNode=function(e){return e?new t.ASTNode(t.ASTNode.types.FIELD,e):null},t.ASTNode.createConnectionNode=function(e){if(!e)return null;var n=e.type;return n==t.connectionTypes.INPUT_VALUE||n==t.connectionTypes.NEXT_STATEMENT&&e.getParentInput()?t.ASTNode.createInputNode(e.getParentInput()):n==t.connectionTypes.NEXT_STATEMENT?new t.ASTNode(t.ASTNode.types.NEXT,e):n==t.connectionTypes.OUTPUT_VALUE?new t.ASTNode(t.ASTNode.types.OUTPUT,e):n==t.connectionTypes.PREVIOUS_STATEMENT?new t.ASTNode(t.ASTNode.types.PREVIOUS,e):null},t.ASTNode.createInputNode=function(e){return e&&e.connection?new t.ASTNode(t.ASTNode.types.INPUT,e.connection):null},t.ASTNode.createBlockNode=function(e){return e?new t.ASTNode(t.ASTNode.types.BLOCK,e):null},t.ASTNode.createStackNode=function(e){return e?new t.ASTNode(t.ASTNode.types.STACK,e):null},t.ASTNode.createWorkspaceNode=function(e,n){return n&&e?new t.ASTNode(t.ASTNode.types.WORKSPACE,e,{wsCoordinate:n}):null},t.ASTNode.createTopNode=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.processParams_=function(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)},t.ASTNode.prototype.getLocation=function(){return this.location_},t.ASTNode.prototype.getType=function(){return this.type_},t.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},t.ASTNode.prototype.isConnection=function(){return this.isConnection_},t.ASTNode.prototype.findNextForInput_=function(){var a,e=this.location_.getParentInput(),n=e.getSourceBlock();for(e=n.inputList.indexOf(e)+1;a=n.inputList[e];e++){for(var I,f=a.fieldRow,E=0;I=f[E];E++)if(I.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(I);if(a.connection)return t.ASTNode.createInputNode(a)}return null},t.ASTNode.prototype.findNextForField_=function(){var e=this.location_,n=e.getParentInput(),a=e.getSourceBlock(),f=a.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)+1;n=a.inputList[f];f++){for(var E=n.fieldRow;e<E.length;){if(E[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(E[e]);e++}if(e=0,n.connection)return t.ASTNode.createInputNode(n)}return null},t.ASTNode.prototype.findPrevForInput_=function(){for(var f,e=this.location_.getParentInput(),n=e.getSourceBlock(),a=n.inputList.indexOf(e);f=n.inputList[a];a--){if(f.connection&&f!==e)return t.ASTNode.createInputNode(f);for(var I,E=(f=f.fieldRow).length-1;I=f[E];E--)if(I.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(I)}return null},t.ASTNode.prototype.findPrevForField_=function(){var E,e=this.location_,n=e.getParentInput(),a=e.getSourceBlock(),f=a.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)-1;E=a.inputList[f];f--){if(E.connection&&E!==n)return t.ASTNode.createInputNode(E);for(E=E.fieldRow;-1<e;){if(E[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(E[e]);e--}0<=f-1&&(e=a.inputList[f-1].fieldRow.length-1)}return null},t.ASTNode.prototype.navigateBetweenStacks_=function(e){var n=this.getLocation();if(n instanceof t.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var a=n.getRootBlock();n=a.workspace.getTopBlocks(!0);for(var E,f=0;E=n[f];f++)if(a.id==E.id)return-1==(e=f+(e?1:-1))||e==n.length?null:t.ASTNode.createStackNode(n[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")},t.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.getOutAstNodeForBlock_=function(e){if(!e)return null;var n=(e=e.getTopStackBlock()).previousConnection||e.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?t.ASTNode.createInputNode(n.targetConnection.getParentInput()):t.ASTNode.createStackNode(e)},t.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var a,n=0;a=e[n];n++){for(var I,f=a.fieldRow,E=0;I=f[E];E++)if(I.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(I);if(a.connection)return t.ASTNode.createInputNode(a)}return null},t.ASTNode.prototype.getSourceBlock=function(){return this.getType()===t.ASTNode.types.BLOCK||this.getType()===t.ASTNode.types.STACK?this.getLocation():this.getType()===t.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},t.ASTNode.prototype.next=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case t.ASTNode.types.OUTPUT:var e=this.location_;return t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return this.findNextForField_();case t.ASTNode.types.INPUT:return this.findNextForInput_();case t.ASTNode.types.BLOCK:return t.ASTNode.createConnectionNode(this.location_.nextConnection);case t.ASTNode.types.PREVIOUS:return t.ASTNode.createBlockNode((e=this.location_).getSourceBlock());case t.ASTNode.types.NEXT:return t.ASTNode.createConnectionNode((e=this.location_).targetConnection)}return null},t.ASTNode.prototype.in=function(){switch(this.type_){case t.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return t.ASTNode.createStackNode(e[0]);break;case t.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(e=this.location_);case t.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(e=this.location_);case t.ASTNode.types.INPUT:return t.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},t.ASTNode.prototype.prev=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case t.ASTNode.types.FIELD:return this.findPrevForField_();case t.ASTNode.types.INPUT:return this.findPrevForInput_();case t.ASTNode.types.BLOCK:var e=this.location_;return t.ASTNode.createConnectionNode(e.previousConnection||e.outputConnection);case t.ASTNode.types.PREVIOUS:if((e=(e=this.location_).targetConnection)&&!e.getParentInput())return t.ASTNode.createConnectionNode(e);break;case t.ASTNode.types.NEXT:return t.ASTNode.createBlockNode((e=this.location_).getSourceBlock())}return null},t.ASTNode.prototype.out=function(){switch(this.type_){case t.ASTNode.types.STACK:var e=this.location_,n=e.getRelativeToSurfaceXY();return n=new t.utils.Coordinate(n.x,n.y+t.ASTNode.DEFAULT_OFFSET_Y),t.ASTNode.createWorkspaceNode(e.workspace,n);case t.ASTNode.types.OUTPUT:return(n=(e=this.location_).targetConnection)?t.ASTNode.createConnectionNode(n):t.ASTNode.createStackNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return t.ASTNode.createBlockNode(this.location_.getSourceBlock());case t.ASTNode.types.INPUT:return t.ASTNode.createBlockNode((e=this.location_).getSourceBlock());case t.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(e=this.location_);case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((e=this.location_).getSourceBlock())}return null},t.Blocks=Object.create(null),t.Extensions={},t.Extensions.ALL_=Object.create(null),t.Extensions.register=function(e,n){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(t.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+e+'" must be a function');t.Extensions.ALL_[e]=n},t.Extensions.registerMixin=function(e,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+e+'" must be a object');t.Extensions.register(e,function(){this.mixin(n)})},t.Extensions.registerMutator=function(e,n,a,f){var E='Error when registering mutator "'+e+'": ';t.Extensions.checkHasFunction_(E,n.domToMutation,"domToMutation"),t.Extensions.checkHasFunction_(E,n.mutationToDom,"mutationToDom");var I=t.Extensions.checkMutatorDialog_(n,E);if(a&&"function"!=typeof a)throw Error('Extension "'+e+'" is not a function');t.Extensions.register(e,function(){if(I){if(!t.Mutator)throw Error(E+"Missing require for Blockly.Mutator");this.setMutator(new t.Mutator(f||[]))}this.mixin(n),a&&a.apply(this)})},t.Extensions.unregister=function(e){t.Extensions.ALL_[e]?delete t.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},t.Extensions.apply=function(e,n,a){var f=t.Extensions.ALL_[e];if("function"!=typeof f)throw Error('Error: Extension "'+e+'" not found.');if(a)t.Extensions.checkNoMutatorProperties_(e,n);else var E=t.Extensions.getMutatorProperties_(n);if(f.apply(n),a)t.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',n);else if(!t.Extensions.mutatorPropertiesMatch_(E,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},t.Extensions.checkHasFunction_=function(e,n,a){if(!n)throw Error(e+'missing required property "'+a+'"');if("function"!=typeof n)throw Error(e+'" required property "'+a+'" must be a function')},t.Extensions.checkNoMutatorProperties_=function(e,n){if(t.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},t.Extensions.checkMutatorDialog_=function(e,n){var a=void 0!==e.compose,f=void 0!==e.decompose;if(a&&f){if("function"!=typeof e.compose)throw Error(n+"compose must be a function.");if("function"!=typeof e.decompose)throw Error(n+"decompose must be a function.");return!0}if(!a&&!f)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},t.Extensions.checkBlockHasMutatorProperties_=function(e,n){if("function"!=typeof n.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');t.Extensions.checkMutatorDialog_(n,e)},t.Extensions.getMutatorProperties_=function(e){var n=[];return void 0!==e.domToMutation&&n.push(e.domToMutation),void 0!==e.mutationToDom&&n.push(e.mutationToDom),void 0!==e.compose&&n.push(e.compose),void 0!==e.decompose&&n.push(e.decompose),n},t.Extensions.mutatorPropertiesMatch_=function(e,n){if((n=t.Extensions.getMutatorProperties_(n)).length!=e.length)return!1;for(var a=0;a<n.length;a++)if(e[a]!=n[a])return!1;return!0},t.Extensions.buildTooltipForDropdown=function(e,n){var a=[];return"object"==typeof document&&t.utils.runAfterPageLoad(function(){for(var f in n)t.utils.checkMessageReferences(n[f])}),function(){this.type&&-1==a.indexOf(this.type)&&(t.Extensions.checkDropdownOptionsInTable_(this,e,n),a.push(this.type)),this.setTooltip(function(){var f=String(this.getFieldValue(e)),E=n[f];return null==E?-1==a.indexOf(this.type)&&(f="No tooltip mapping for value "+f+" of field "+e,null!=this.type&&(f+=" of block type "+this.type),console.warn(f+".")):E=t.utils.replaceMessageReferences(E),E}.bind(this))}},t.Extensions.checkDropdownOptionsInTable_=function(e,n,a){var f=e.getField(n);if(!f.isOptionListDynamic()){f=f.getOptions();for(var E=0;E<f.length;++E){var I=f[E][1];null==a[I]&&console.warn("No tooltip mapping for value "+I+" of field "+n+" of block type "+e.type)}}},t.Extensions.buildTooltipWithFieldText=function(e,n){return"object"==typeof document&&t.utils.runAfterPageLoad(function(){t.utils.checkMessageReferences(e)}),function(){this.setTooltip(function(){var a=this.getField(n);return t.utils.replaceMessageReferences(e).replace("%1",a?a.getText():"")}.bind(this))}},t.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||this.tooltipWhenNotConnected_}.bind(this))},t.Extensions.register("parent_tooltip_when_inline",t.Extensions.extensionParentTooltip_),t.fieldRegistry={},t.fieldRegistry.register=function(e,n){t.registry.register(t.registry.Type.FIELD,e,n)},t.fieldRegistry.unregister=function(e){t.registry.unregister(t.registry.Type.FIELD,e)},t.fieldRegistry.fromJson=function(e){var n=t.registry.getObject(t.registry.Type.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},t.IDeletable=function(){},t.blockAnimations={},t.blockAnimations.disconnectPid_=0,t.blockAnimations.disconnectGroup_=null,t.blockAnimations.disposeUiEffect=function(e){var n=e.workspace,a=e.getSvgRoot();n.getAudioManager().play("delete"),e=n.getSvgXY(a),(a=a.cloneNode(!0)).translateX_=e.x,a.translateY_=e.y,a.setAttribute("transform","translate("+e.x+","+e.y+")"),n.getParentSvg().appendChild(a),a.bBox_=a.getBBox(),t.blockAnimations.disposeUiStep_(a,n.RTL,new Date,n.scale)},t.blockAnimations.disposeUiStep_=function(e,n,a,f){var E=(new Date-a)/150;1<E?t.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(n?-1:1)*e.bBox_.width*f/2*E)+","+(e.translateY_+e.bBox_.height*f*E)+") scale("+(1-E)*f+")"),setTimeout(t.blockAnimations.disposeUiStep_,10,e,n,a,f))},t.blockAnimations.connectionUiEffect=function(e){var n=e.workspace,a=n.scale;if(n.getAudioManager().play("click"),!(1>a)){var f=n.getSvgXY(e.getSvgRoot());e.outputConnection?(f.x+=(e.RTL?3:-3)*a,f.y+=13*a):e.previousConnection&&(f.x+=(e.RTL?-23:23)*a,f.y+=3*a),e=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:f.x,cy:f.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),t.blockAnimations.connectionUiStep_(e,new Date,a)}},t.blockAnimations.connectionUiStep_=function(e,n,a){var f=(new Date-n)/150;1<f?t.utils.dom.removeNode(e):(e.setAttribute("r",25*f*a),e.style.opacity=1-f,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.connectionUiStep_,10,e,n,a))},t.blockAnimations.disconnectUiEffect=function(e){if(e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),t.blockAnimations.disconnectUiStep_(e.getSvgRoot(),n,new Date)}},t.blockAnimations.disconnectUiStep_=function(e,n,a){var f=(new Date-a)/200;1<f?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(f*Math.PI*3)*(1-f)*n)+")",t.blockAnimations.disconnectGroup_=e,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.disconnectUiStep_,10,e,n,a)),e.setAttribute("transform",e.translate_+e.skew_)},t.blockAnimations.disconnectUiStop=function(){if(t.blockAnimations.disconnectGroup_){clearTimeout(t.blockAnimations.disconnectPid_);var e=t.blockAnimations.disconnectGroup_;e.skew_="",e.setAttribute("transform",e.translate_),t.blockAnimations.disconnectGroup_=null}},t.Events.BlockDrag=function(e,n,a){t.Events.BlockDrag.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isStart=n,this.blocks=a},t.utils.object.inherits(t.Events.BlockDrag,t.Events.UiBase),t.Events.BlockDrag.prototype.type=t.Events.BLOCK_DRAG,t.Events.BlockDrag.prototype.toJson=function(){var e=t.Events.BlockDrag.superClass_.toJson.call(this);return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e},t.Events.BlockDrag.prototype.fromJson=function(e){t.Events.BlockDrag.superClass_.fromJson.call(this,e),this.isStart=e.isStart,this.blockId=e.blockId,this.blocks=e.blocks},t.registry.register(t.registry.Type.EVENT,t.Events.BLOCK_DRAG,t.Events.BlockDrag),t.IBlockDragger=function(){},t.InsertionMarkerManager=function(e){this.topBlock_=t.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},t.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",t.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,t.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{t.Events.enable()}},t.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},t.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},t.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(t.Events.disable(),this.hidePreview_(),t.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;t.blockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},t.InsertionMarkerManager.prototype.update=function(e,n){var a=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(a,n))||this.shouldUpdatePreviews_(a,e))&&(t.Events.disable(),this.maybeHidePreview_(a),this.maybeShowPreview_(a),t.Events.enable())},t.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var n=e.type;t.Events.disable();try{var a=this.workspace_.newBlock(n);if(a.setInsertionMarker(!0),e.mutationToDom){var f=e.mutationToDom();f&&a.domToMutation(f)}for(n=0;n<e.inputList.length;n++){var E=e.inputList[n];if(E.name!=t.constants.COLLAPSED_INPUT_NAME){var I=a.inputList[n];if(!I)throw Error(t.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(f=0;f<E.fieldRow.length;f++){var Y=E.fieldRow[f],ee=I.fieldRow[f];if(!ee)throw Error(t.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));ee.setValue(Y.getValue())}}}a.setCollapsed(e.isCollapsed()),a.setInputsInline(e.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden")}finally{t.Events.enable()}return a},t.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(e.push(n),this.lastOnStack_=n,this.lastMarker_){t.Events.disable();try{this.lastMarker_.dispose()}finally{t.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return e},t.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,n){var a=e.local,f=e.closest;return e=e.radius,a&&f?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==f&&this.localConnection_==a||(a=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(a*a+n*n),f&&e>n-t.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},t.InsertionMarkerManager.prototype.getCandidate_=function(e){for(var n=this.getStartRadius_(),a=null,f=null,E=0;E<this.availableConnections_.length;E++){var I=this.availableConnections_[E],Y=I.closest(n,e);Y.connection&&(a=Y.connection,f=I,n=Y.radius)}return{closest:a,local:f,radius:n}},t.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?t.CONNECTING_SNAP_RADIUS:t.SNAP_RADIUS},t.InsertionMarkerManager.prototype.shouldDelete_=function(e,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,t.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,e&&!!e.closest)},t.InsertionMarkerManager.prototype.maybeShowPreview_=function(e){if(!this.wouldDeleteBlock_){var n=e.closest;e=e.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=e,this.showPreview_()))}},t.InsertionMarkerManager.prototype.showPreview_=function(){var e=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(e,this.localConnection_,this.topBlock_)){case t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}e&&n.shouldHighlightConnection(e)&&e.highlight()},t.InsertionMarkerManager.prototype.maybeHidePreview_=function(e){if(e.closest){var n=this.closestConnection_!=e.closest;e=this.localConnection_!=e.local,this.closestConnection_&&this.localConnection_&&(n||e||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},t.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},t.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var e=this.localConnection_,n=this.closestConnection_,a=this.lastOnStack_&&e==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((e=a.getMatchingConnection(e.getSourceBlock(),e))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");a.render(),a.rendered=!0,a.getSvgRoot().setAttribute("visibility","visible"),e&&n&&a.positionNearConnection(e,n),n&&e.connect(n),this.markerConnection_=e},t.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,n=e.getSourceBlock(),a=n.nextConnection,f=n.previousConnection,E=n.outputConnection;if(E=e.type==t.connectionTypes.INPUT_VALUE&&!(E&&E.targetConnection),!(e!=a||f&&f.targetConnection)||E?e.targetBlock().unplug(!1):e.type==t.connectionTypes.NEXT_STATEMENT&&e!=a?((a=e.targetConnection).getSourceBlock().unplug(!1),f=f?f.targetConnection:null,n.unplug(!0),f&&f.connect(a)):n.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(e=n.getSvgRoot())&&e.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},t.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var e=this.closestConnection_;this.highlightedBlock_=e.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(e,!0)},t.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},t.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},t.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},t.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var e=[];return this.firstMarker_&&e.push(this.firstMarker_),this.lastMarker_&&e.push(this.lastMarker_),e},t.BlockDragger=function(e,n){this.draggingBlock_=e,this.workspace_=n,this.draggedConnectionManager_=new t.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=t.BlockDragger.initIconData_(e)},t.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},t.BlockDragger.initIconData_=function(e){var n=[];e=e.getDescendants(!1);for(var f,a=0;f=e[a];a++){f=f.getIcons();for(var E=0;E<f.length;E++){var I={location:f[E].getIconLocation(),icon:f[E]};n.push(I)}}return n},t.BlockDragger.prototype.startDrag=function(e,n){t.Events.getGroup()||t.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),t.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),t.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,e),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},t.BlockDragger.prototype.shouldDisconnect_=function(e){return!!(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},t.BlockDragger.prototype.disconnectBlock_=function(e,n){this.draggingBlock_.unplug(e),e=this.pixelsToWorkspaceUnits_(n),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),t.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},t.BlockDragger.prototype.fireDragStartEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.drag=function(e,n){n=this.pixelsToWorkspaceUnits_(n);var a=t.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(a),this.dragIcons_(n),a=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),this.draggedConnectionManager_.update(n,this.dragTarget_),e=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),e!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},t.BlockDragger.prototype.endDrag=function(e,n){if(this.drag(e,n),this.dragIconData_=[],this.fireDragEndEvent_(),t.utils.dom.stopTextWidthCache(),t.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))e=this.startXY_;else{var a=(e=this.getNewLocationAfterDrag_(n)).delta;e=e.newLocation}this.draggingBlock_.moveOffDragSurface(e),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),a?this.updateBlockAfterMove_(a):t.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),t.Events.setGroup(!1)},t.BlockDragger.prototype.getNewLocationAfterDrag_=function(e){var n={};return n.delta=this.pixelsToWorkspaceUnits_(e),n.newLocation=t.utils.Coordinate.sum(this.startXY_,n.delta),n},t.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),t.draggingConnections=[],!0)},t.BlockDragger.prototype.updateBlockAfterMove_=function(e){this.draggingBlock_.moveConnections(e.x,e.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},t.BlockDragger.prototype.fireDragEndEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.updateToolboxStyle_=function(e){var n=this.workspace_.getToolbox();if(n){var a=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e&&"function"==typeof n.removeStyle?n.removeStyle(a):e||"function"!=typeof n.addStyle||n.addStyle(a)}},t.BlockDragger.prototype.fireMoveEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_MOVE))(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),t.Events.fire(e)},t.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},t.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BlockDragger.prototype.dragIcons_=function(e){for(var n=0;n<this.dragIconData_.length;n++){var a=this.dragIconData_[n];a.icon.setIconLocation(t.utils.Coordinate.sum(a.location,e))}},t.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},t.registry.register(t.registry.Type.BLOCK_DRAGGER,t.registry.DEFAULT,t.BlockDragger),t.IContextMenu=function(){},t.IDraggable=function(){},t.IBubble=function(){},t.Bubble=function(e,n,a,f,E,I){this.workspace_=e,this.content_=n,this.shape_=a,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,a=t.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(a=-a),this.arrow_radians_=t.utils.math.toRadians(a),e.getBubbleCanvas().appendChild(this.createDom_(n,!(!E||!I))),this.setAnchorLocation(f),E&&I||(E=(e=this.content_.getBBox()).width+2*t.Bubble.BORDER_WIDTH,I=e.height+2*t.Bubble.BORDER_WIDTH),this.setBubbleSize(E,I),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},t.Bubble.BORDER_WIDTH=6,t.Bubble.ARROW_THICKNESS=5,t.Bubble.ARROW_ANGLE=20,t.Bubble.ARROW_BEND=4,t.Bubble.ANCHOR_RADIUS=8,t.Bubble.onMouseUpWrapper_=null,t.Bubble.onMouseMoveWrapper_=null,t.Bubble.unbindDragEvents_=function(){t.Bubble.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseUpWrapper_),t.Bubble.onMouseUpWrapper_=null),t.Bubble.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseMoveWrapper_),t.Bubble.onMouseMoveWrapper_=null)},t.Bubble.bubbleMouseUp_=function(e){t.Touch.clearTouchIdentifier(),t.Bubble.unbindDragEvents_()},t.Bubble.prototype.rendered_=!1,t.Bubble.prototype.anchorXY_=null,t.Bubble.prototype.relativeLeft_=0,t.Bubble.prototype.relativeTop_=0,t.Bubble.prototype.width_=0,t.Bubble.prototype.height_=0,t.Bubble.prototype.autoLayout_=!0,t.Bubble.prototype.createDom_=function(e,n){this.bubbleGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var a={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return t.utils.userAgent.JAVA_FX&&(a={}),a=t.utils.dom.createSvgElement(t.utils.Svg.G,a,this.bubbleGroup_),this.bubbleArrow_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{},a),this.bubbleBack_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH},a),n?(this.resizeGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),t.utils.dom.createSvgElement(t.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*t.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=t.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=t.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(e),this.bubbleGroup_},t.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},t.Bubble.prototype.setSvgId=function(e){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=e)},t.Bubble.prototype.bubbleMouseDown_=function(e){var n=this.workspace_.getGesture(e);n&&n.handleBubbleStart(e,this)},t.Bubble.prototype.showContextMenu=function(e){},t.Bubble.prototype.isDeletable=function(){return!1},t.Bubble.prototype.setDeleteStyle=function(e){},t.Bubble.prototype.resizeMouseDown_=function(e){this.promote(),t.Bubble.unbindDragEvents_(),t.utils.isRightButton(e)||(this.workspace_.startDrag(e,new t.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),t.Bubble.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,t.Bubble.bubbleMouseUp_),t.Bubble.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),t.hideChaff()),e.stopPropagation()},t.Bubble.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble_()},t.Bubble.prototype.registerResizeEvent=function(e){this.resizeCallback_=e},t.Bubble.prototype.registerMoveEvent=function(e){this.moveCallback_=e},t.Bubble.prototype.promote=function(){var e=this.bubbleGroup_.parentNode;return e.lastChild!==this.bubbleGroup_&&(e.appendChild(this.bubbleGroup_),!0)},t.Bubble.prototype.setAnchorLocation=function(e){this.anchorXY_=e,this.rendered_&&this.positionBubble_()},t.Bubble.prototype.layoutBubble_=function(){var e=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(e),a=this.getOptimalRelativeTop_(e),f=this.shape_.getBBox(),E={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},I={x:-this.width_-30,y:a};a={x:f.width,y:a};var Y={x:n,y:f.height};n=f.width<f.height?a:Y,f=f.width<f.height?Y:a,a=this.getOverlap_(E,e),Y=this.getOverlap_(I,e);var ee=this.getOverlap_(n,e);e=this.getOverlap_(f,e),a==(e=Math.max(a,Y,ee,e))?(this.relativeLeft_=E.x,this.relativeTop_=E.y):Y==e?(this.relativeLeft_=I.x,this.relativeTop_=I.y):ee==e?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=f.x,this.relativeTop_=f.y)},t.Bubble.prototype.getOverlap_=function(e,n){var a=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x+this.anchorXY_.x;return e=e.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(a+this.width_,n.left+n.width)-Math.max(a,n.left))*(Math.min(e+this.height_,n.top+n.height)-Math.max(e,n.top))/(this.width_*this.height_)))},t.Bubble.prototype.getOptimalRelativeLeft_=function(e){var n=-this.width_/4;if(this.width_>e.width)return n;if(this.workspace_.RTL)var a=this.anchorXY_.x-n,f=a-this.width_,E=e.left+e.width,I=e.left+t.Scrollbar.scrollbarThickness/this.workspace_.scale;else a=(f=n+this.anchorXY_.x)+this.width_,I=e.left,E=e.left+e.width-t.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?f<I?n=-(I-this.anchorXY_.x+this.width_):a>E&&(n=-(E-this.anchorXY_.x)):f<I?n=I-this.anchorXY_.x:a>E&&(n=E-this.anchorXY_.x-this.width_),n},t.Bubble.prototype.getOptimalRelativeTop_=function(e){var n=-this.height_/4;if(this.height_>e.height)return n;var a=this.anchorXY_.y+n,E=e.top;e=e.top+e.height-t.Scrollbar.scrollbarThickness/this.workspace_.scale;var I=this.anchorXY_.y;return a<E?n=E-I:a+this.height_>e&&(n=e-I-this.height_),n},t.Bubble.prototype.positionBubble_=function(){var e=this.anchorXY_.x;this.moveTo(e=this.workspace_.RTL?e-(this.relativeLeft_+this.width_):e+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},t.Bubble.prototype.moveTo=function(e,n){this.bubbleGroup_.setAttribute("transform","translate("+e+","+n+")")},t.Bubble.prototype.setDragging=function(e){!e&&this.moveCallback_&&this.moveCallback_()},t.Bubble.prototype.getBubbleSize=function(){return new t.utils.Size(this.width_,this.height_)},t.Bubble.prototype.setBubbleSize=function(e,n){var a=2*t.Bubble.BORDER_WIDTH;e=Math.max(e,a+45),n=Math.max(n,a+20),this.width_=e,this.height_=n,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*t.Bubble.BORDER_WIDTH+","+(n-a)+") scale(-1 1)":"translate("+(e-a)+","+(n-a)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},t.Bubble.prototype.renderArrow_=function(){var e=[],n=this.width_/2,a=this.height_/2,f=-this.relativeLeft_,E=-this.relativeTop_;if(n==f&&a==E)e.push("M "+n+","+a);else{E-=a,f-=n,this.workspace_.RTL&&(f*=-1);var I=Math.sqrt(E*E+f*f),Y=Math.acos(f/I);0>E&&(Y=2*Math.PI-Y);var ee=Y+Math.PI/2;ee>2*Math.PI&&(ee-=2*Math.PI);var _e=Math.sin(ee),De=Math.cos(ee),Ae=this.getBubbleSize();ee=(Ae.width+Ae.height)/t.Bubble.ARROW_THICKNESS,ee=Math.min(ee,Ae.width,Ae.height)/4,f=n+(Ae=1-t.Bubble.ANCHOR_RADIUS/I)*f,E=a+Ae*E,Ae=n+ee*De;var Je=a+ee*_e;n-=ee*De,a-=ee*_e,(_e=Y+this.arrow_radians_)>2*Math.PI&&(_e-=2*Math.PI),Y=Math.sin(_e)*I/t.Bubble.ARROW_BEND,I=Math.cos(_e)*I/t.Bubble.ARROW_BEND,e.push("M"+Ae+","+Je),e.push("C"+(Ae+I)+","+(Je+Y)+" "+f+","+E+" "+f+","+E),e.push("C"+f+","+E+" "+(n+I)+","+(a+Y)+" "+n+","+a)}e.push("z"),this.bubbleArrow_.setAttribute("d",e.join(" "))},t.Bubble.prototype.setColour=function(e){this.bubbleBack_.setAttribute("fill",e),this.bubbleArrow_.setAttribute("fill",e)},t.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&t.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&t.browserEvents.unbind(this.onMouseDownResizeWrapper_),t.Bubble.unbindDragEvents_(),t.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},t.Bubble.prototype.moveDuringDrag=function(e,n){e?e.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},t.Bubble.prototype.getRelativeToSurfaceXY=function(){return new t.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},t.Bubble.prototype.setAutoLayout=function(e){this.autoLayout_=e},t.Bubble.textToDom=function(e){var n=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:t.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var a=0;a<e.length;a++){var f=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{dy:"1em",x:t.Bubble.BORDER_WIDTH},n),E=document.createTextNode(e[a]);f.appendChild(E)}return n},t.Bubble.createNonEditableBubble=function(e,n,a){if((a=new t.Bubble(n.workspace,e,n.pathObject.svgPath,a,null,null)).setSvgId(n.id),n.RTL){n=e.getBBox().width;for(var E,f=0;E=e.childNodes[f];f++)E.setAttribute("text-anchor","end"),E.setAttribute("x",n+t.Bubble.BORDER_WIDTH)}return a},t.Events.CommentBase=function(e){this.commentId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.utils.object.inherits(t.Events.CommentBase,t.Events.Abstract),t.Events.CommentBase.prototype.toJson=function(){var e=t.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(e.commentId=this.commentId),e},t.Events.CommentBase.prototype.fromJson=function(e){t.Events.CommentBase.superClass_.fromJson.call(this,e),this.commentId=e.commentId},t.Events.CommentChange=function(e,n,a){t.Events.CommentChange.superClass_.constructor.call(this,e),e&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===a?"":a)},t.utils.object.inherits(t.Events.CommentChange,t.Events.CommentBase),t.Events.CommentChange.prototype.type=t.Events.COMMENT_CHANGE,t.Events.CommentChange.prototype.toJson=function(){var e=t.Events.CommentChange.superClass_.toJson.call(this);return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e},t.Events.CommentChange.prototype.fromJson=function(e){t.Events.CommentChange.superClass_.fromJson.call(this,e),this.oldContents_=e.oldContents,this.newContents_=e.newContents},t.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},t.Events.CommentChange.prototype.run=function(e){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(e?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},t.Events.CommentCreate=function(e){t.Events.CommentCreate.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentCreate,t.Events.CommentBase),t.Events.CommentCreate.prototype.type=t.Events.COMMENT_CREATE,t.Events.CommentCreate.prototype.toJson=function(){var e=t.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e},t.Events.CommentCreate.prototype.fromJson=function(e){t.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml)},t.Events.CommentCreate.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,e)},t.Events.CommentCreateDeleteHelper=function(e,n){var a=e.getEventWorkspace_();n?((n=t.utils.xml.createElement("xml")).appendChild(e.xml),t.Xml.domToWorkspace(n,a)):(a=a.getCommentById(e.commentId))?a.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+e.commentId)},t.Events.CommentDelete=function(e){t.Events.CommentDelete.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentDelete,t.Events.CommentBase),t.Events.CommentDelete.prototype.type=t.Events.COMMENT_DELETE,t.Events.CommentDelete.prototype.toJson=function(){return t.Events.CommentDelete.superClass_.toJson.call(this)},t.Events.CommentDelete.prototype.fromJson=function(e){t.Events.CommentDelete.superClass_.fromJson.call(this,e)},t.Events.CommentDelete.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,!e)},t.Events.CommentMove=function(e){t.Events.CommentMove.superClass_.constructor.call(this,e),e&&(this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)},t.utils.object.inherits(t.Events.CommentMove,t.Events.CommentBase),t.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},t.Events.CommentMove.prototype.type=t.Events.COMMENT_MOVE,t.Events.CommentMove.prototype.setOldCoordinate=function(e){this.oldCoordinate_=e},t.Events.CommentMove.prototype.toJson=function(){var e=t.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(e.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},t.Events.CommentMove.prototype.fromJson=function(e){if(t.Events.CommentMove.superClass_.fromJson.call(this,e),e.oldCoordinate){var n=e.oldCoordinate.split(",");this.oldCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}e.newCoordinate&&(n=e.newCoordinate.split(","),this.newCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1])))},t.Events.CommentMove.prototype.isNull=function(){return t.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},t.Events.CommentMove.prototype.run=function(e){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){e=e?this.newCoordinate_:this.oldCoordinate_;var a=n.getXY();n.moveBy(e.x-a.x,e.y-a.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CREATE,t.Events.CommentCreate),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CHANGE,t.Events.CommentChange),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_MOVE,t.Events.CommentMove),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_DELETE,t.Events.CommentDelete),t.BubbleDragger=function(e,n){this.draggingBubble_=e,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=t.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},t.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},t.BubbleDragger.prototype.startBubbleDrag=function(){t.Events.getGroup()||t.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},t.BubbleDragger.prototype.dragBubble=function(e,n){n=this.pixelsToWorkspaceUnits_(n),n=t.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),e=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),e!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},t.BubbleDragger.prototype.shouldDelete_=function(e){return!(!e||!this.workspace_.getComponentManager().hasCapability(e.id,t.ComponentManager.Capability.DELETE_AREA))&&e.wouldDelete(this.draggingBubble_,!1)},t.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},t.BubbleDragger.prototype.endBubbleDrag=function(e,n){this.dragBubble(e,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?e=this.startXY_:(e=this.pixelsToWorkspaceUnits_(n),e=t.utils.Coordinate.sum(this.startXY_,e)),this.draggingBubble_.moveTo(e.x,e.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),t.Events.setGroup(!1)},t.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new(t.Events.get(t.Events.COMMENT_MOVE))(this.draggingBubble_);e.setOldCoordinate(this.startXY_),e.recordNew(),t.Events.fire(e)}},t.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},t.Events.Click=function(e,n,a){t.Events.Click.superClass_.constructor.call(this,e?e.workspace.id:n),this.blockId=e?e.id:null,this.targetType=a},t.utils.object.inherits(t.Events.Click,t.Events.UiBase),t.Events.Click.prototype.type=t.Events.CLICK,t.Events.Click.prototype.toJson=function(){var e=t.Events.Click.superClass_.toJson.call(this);return e.targetType=this.targetType,this.blockId&&(e.blockId=this.blockId),e},t.Events.Click.prototype.fromJson=function(e){t.Events.Click.superClass_.fromJson.call(this,e),this.targetType=e.targetType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.CLICK,t.Events.Click),t.WorkspaceDragger=function(e){this.workspace_=e,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new t.utils.Coordinate(e.scrollX,e.scrollY)},t.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},t.WorkspaceDragger.prototype.startDrag=function(){t.selected&&t.selected.unselect(),this.workspace_.setupDragSurface()},t.WorkspaceDragger.prototype.endDrag=function(e){this.drag(e),this.workspace_.resetDragSurface()},t.WorkspaceDragger.prototype.drag=function(e){if(e=t.utils.Coordinate.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(e.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,e.y)}},t.Gesture=function(e,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new t.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!t.DRAG_STACK},t.Gesture.prototype.dispose=function(){t.Touch.clearTouchIdentifier(),t.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&t.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&t.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},t.Gesture.prototype.updateFromEvent_=function(e){var n=new t.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),t.longStop_()),this.mostRecentEvent_=e},t.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=t.utils.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=t.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?t.FLYOUT_DRAG_RADIUS:t.DRAG_RADIUS))},t.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.Events.getGroup()||t.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},t.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},t.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},t.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new t.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},t.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},t.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(t.registry.getClassFromOptions(t.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new t.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.doStart=function(e){t.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,t.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),t.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,t.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),t.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||t.longStart(e,this),this.mouseDownXY_=new t.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},t.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleMove=function(e){this.updateFromEvent_(e),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),t.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())},t.Gesture.prototype.cancel=function(){this.isEnding_||(t.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},t.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),t.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(t.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},t.Gesture.prototype.handleWsStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=e,this.doStart(e)},t.Gesture.prototype.fireWorkspaceClick_=function(e){t.Events.fire(new(t.Events.get(t.Events.CLICK))(null,e.id,"workspace"))},t.Gesture.prototype.handleFlyoutStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(e,n.getWorkspace())},t.Gesture.prototype.handleBlockStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=e},t.Gesture.prototype.handleBubbleStart=function(e,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=e},t.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},t.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},t.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(t.Events.getGroup()||t.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var e=new(t.Events.get(t.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");t.Events.fire(e)}this.bringBlockToFront_(),t.Events.setGroup(!1)},t.Gesture.prototype.doWorkspaceClick_=function(e){e=this.creatorWorkspace_,t.selected&&t.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)},t.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},t.Gesture.prototype.setStartField=function(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)},t.Gesture.prototype.setStartBubble=function(e){this.startBubble_||(this.startBubble_=e)},t.Gesture.prototype.setStartBlock=function(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,e.isInFlyout&&e!=e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))},t.Gesture.prototype.setTargetBlock_=function(e){e.isShadow()?this.setTargetBlock_(e.getParent()):this.targetBlock_=e},t.Gesture.prototype.setStartWorkspace_=function(e){this.startWorkspace_||(this.startWorkspace_=e)},t.Gesture.prototype.setStartFlyout_=function(e){this.flyout_||(this.flyout_=e)},t.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},t.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},t.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},t.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},t.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},t.Gesture.prototype.hasStarted=function(){return this.hasStarted_},t.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},t.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},t.Gesture.inProgress=function(){for(var a,e=t.Workspace.getAll(),n=0;a=e[n];n++)if(a.currentGesture_)return!0;return!1},t.IRegistrable=function(){},t.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},t.Marker.prototype.setDrawer=function(e){this.drawer_=e},t.Marker.prototype.getDrawer=function(){return this.drawer_},t.Marker.prototype.getCurNode=function(){return this.curNode_},t.Marker.prototype.setCurNode=function(e){var n=this.curNode_;this.curNode_=e,this.drawer_&&this.drawer_.draw(n,this.curNode_)},t.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},t.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},t.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},t.Cursor=function(){t.Cursor.superClass_.constructor.call(this),this.type="cursor"},t.utils.object.inherits(t.Cursor,t.Marker),t.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e},t.Cursor.prototype.in=function(){var e=this.getCurNode();return e?((e.getType()==t.ASTNode.types.PREVIOUS||e.getType()==t.ASTNode.types.OUTPUT)&&(e=e.next()),(e=e.in())&&this.setCurNode(e),e):null},t.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e},t.Cursor.prototype.out=function(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()==t.ASTNode.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null},t.registry.register(t.registry.Type.CURSOR,t.registry.DEFAULT,t.Cursor),t.MarkerManager=function(e){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=e},t.MarkerManager.LOCAL_MARKER="local_marker_1",t.MarkerManager.prototype.registerMarker=function(e,n){this.markers_[e]&&this.unregisterMarker(e),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[e]=n},t.MarkerManager.prototype.unregisterMarker=function(e){var n=this.markers_[e];if(!n)throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[e]},t.MarkerManager.prototype.getCursor=function(){return this.cursor_},t.MarkerManager.prototype.getMarker=function(e){return this.markers_[e]||null},t.MarkerManager.prototype.setCursor=function(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},t.MarkerManager.prototype.setCursorSvg=function(e){e?(this.workspace_.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},t.MarkerManager.prototype.setMarkerSvg=function(e){e?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(e)):this.markerSvg_=null},t.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},t.MarkerManager.prototype.dispose=function(){for(var a,e=Object.keys(this.markers_),n=0;a=e[n];n++)this.unregisterMarker(a);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},t.WidgetDiv={},t.WidgetDiv.owner_=null,t.WidgetDiv.dispose_=null,t.WidgetDiv.rendererClassName_="",t.WidgetDiv.themeClassName_="",t.WidgetDiv.createDom=function(){t.WidgetDiv.DIV||(t.WidgetDiv.DIV=document.createElement("div"),t.WidgetDiv.DIV.className="blocklyWidgetDiv",(t.parentContainer||document.body).appendChild(t.WidgetDiv.DIV))},t.WidgetDiv.show=function(e,n,a){t.WidgetDiv.hide(),t.WidgetDiv.owner_=e,t.WidgetDiv.dispose_=a,(e=t.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",e.style.display="block",n=t.getMainWorkspace(),t.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),t.WidgetDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.WidgetDiv.rendererClassName_),t.utils.dom.addClass(e,t.WidgetDiv.themeClassName_)},t.WidgetDiv.hide=function(){if(t.WidgetDiv.isVisible()){t.WidgetDiv.owner_=null;var e=t.WidgetDiv.DIV;e.style.display="none",e.style.left="",e.style.top="",t.WidgetDiv.dispose_&&t.WidgetDiv.dispose_(),t.WidgetDiv.dispose_=null,e.textContent="",t.WidgetDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.rendererClassName_),t.WidgetDiv.rendererClassName_=""),t.WidgetDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.themeClassName_),t.WidgetDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.WidgetDiv.isVisible=function(){return!!t.WidgetDiv.owner_},t.WidgetDiv.hideIfOwner=function(e){t.WidgetDiv.owner_==e&&t.WidgetDiv.hide()},t.WidgetDiv.positionInternal_=function(e,n,a){t.WidgetDiv.DIV.style.left=e+"px",t.WidgetDiv.DIV.style.top=n+"px",t.WidgetDiv.DIV.style.height=a+"px"},t.WidgetDiv.positionWithAnchor=function(e,n,a,f){var E=t.WidgetDiv.calculateY_(e,n,a);e=t.WidgetDiv.calculateX_(e,n,a,f),0>E?t.WidgetDiv.positionInternal_(e,0,a.height+E):t.WidgetDiv.positionInternal_(e,E,a.height)},t.WidgetDiv.calculateX_=function(e,n,a,f){return f?(n=Math.max(n.right-a.width,e.left),Math.min(n,e.right-a.width)):(n=Math.min(n.left,e.right-a.width),Math.max(n,e.left))},t.WidgetDiv.calculateY_=function(e,n,a){return n.bottom+a.height>=e.bottom?n.top-a.height:n.bottom},t.Field=function(e,n,a){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new t.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,a&&this.configure_(a),this.setValue(e),n&&this.setValidator(n)},t.Field.prototype.DEFAULT_VALUE=null,t.Field.prototype.name=void 0,t.Field.prototype.disposed=!1,t.Field.prototype.maxDisplayLength=50,t.Field.prototype.sourceBlock_=null,t.Field.prototype.isDirty_=!0,t.Field.prototype.visible_=!0,t.Field.prototype.clickTarget_=null,t.Field.NBSP="\xa0",t.Field.prototype.EDITABLE=!0,t.Field.prototype.SERIALIZABLE=!1,t.Field.prototype.configure_=function(e){var n=e.tooltip;"string"==typeof n&&(n=t.utils.replaceMessageReferences(e.tooltip)),n&&this.setTooltip(n)},t.Field.prototype.setSourceBlock=function(e){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=e},t.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},t.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},t.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},t.Field.prototype.initModel=function(){},t.Field.prototype.createBorderRect_=function(){this.borderRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},t.Field.prototype.createTextElement_=function(){this.textElement_=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},t.Field.prototype.bindEvents_=function(){t.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=t.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},t.Field.prototype.fromXml=function(e){this.setValue(e.textContent)},t.Field.prototype.toXml=function(e){return e.textContent=this.getValue(),e},t.Field.prototype.dispose=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hideIfOwner(this),t.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&t.browserEvents.unbind(this.mouseDownWrapper_),t.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},t.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(t.utils.dom.addClass(e,"blocklyEditableText"),t.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(t.utils.dom.addClass(e,"blocklyNonEditableText"),t.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))},t.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},t.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},t.Field.prototype.isSerializable=function(){var e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e},t.Field.prototype.isVisible=function(){return this.visible_},t.Field.prototype.setVisible=function(e){if(this.visible_!=e){this.visible_=e;var n=this.getSvgRoot();n&&(n.style.display=e?"block":"none")}},t.Field.prototype.setValidator=function(e){this.validator_=e},t.Field.prototype.getValidator=function(){return this.validator_},t.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},t.Field.prototype.applyColour=function(){},t.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},t.Field.prototype.showEditor=function(e){this.isClickable()&&this.showEditor_(e)},t.Field.prototype.updateSize_=function(e){var n=this.getConstants(),a=2*(e=null!=e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),f=n.FIELD_TEXT_HEIGHT,E=0;this.textElement_&&(a+=E=t.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(f=Math.max(f,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=f,this.size_.width=a,this.positionTextElement_(e,E),this.positionBorderRect_()},t.Field.prototype.positionTextElement_=function(e,n){if(this.textElement_){var a=this.getConstants(),f=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-e:e),this.textElement_.setAttribute("y",a.FIELD_TEXT_BASELINE_CENTER?f:f-a.FIELD_TEXT_HEIGHT/2+a.FIELD_TEXT_BASELINE)}},t.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},t.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new t.utils.Size(0,0)},t.Field.prototype.getScaledBBox=function(){if(this.borderRect_)e=this.borderRect_.getBoundingClientRect(),a=t.utils.style.getPageOffset(this.borderRect_),f=e.width,e=e.height;else{var e=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,a=this.getAbsoluteXY_(),f=e.width*n;e=e.height*n,t.utils.userAgent.GECKO?(a.x+=1.5*n,a.y+=1.5*n):t.utils.userAgent.EDGE||t.utils.userAgent.IE||(a.x-=.5*n,a.y-=.5*n),f+=1*n,e+=1*n}return new t.utils.Rect(a.y,a.y+e,a.x,a.x+f)},t.Field.prototype.getDisplayText_=function(){var e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"\u2026"),e=e.replace(/\s/g,t.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="\u200f"),e):t.Field.NBSP},t.Field.prototype.getText=function(){if(this.getText_){var e=this.getText_.call(this);if(null!==e)return String(e)}return String(this.getValue())},t.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},t.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},t.Field.prototype.setValue=function(e){if(null!==e){var n=this.doClassValidation_(e);if(!((e=this.processValidation_(e,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,e),(e=this.processValidation_(e,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var a=this.getValue();a===e?this.doValueUpdate_(e):(n&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(n,"field",this.name||null,a,e)),this.doValueUpdate_(e),this.isDirty_&&this.forceRerender())}}}},t.Field.prototype.processValidation_=function(e,n){return null===n?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(e=n),e)},t.Field.prototype.getValue=function(){return this.value_},t.Field.prototype.doClassValidation_=function(e){return null==e?null:e},t.Field.prototype.doValueUpdate_=function(e){this.value_=e,this.isDirty_=!0},t.Field.prototype.doValueInvalid_=function(e){},t.Field.prototype.onMouseDown_=function(e){this.sourceBlock_&&this.sourceBlock_.workspace&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)},t.Field.prototype.setTooltip=function(e){e||""===e||(e=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=e:this.tooltip_=e},t.Field.prototype.getTooltip=function(){var e=this.getClickTarget_();return t.Tooltip.getTooltipOfObject(e||{tooltip:this.tooltip_})},t.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},t.Field.prototype.getAbsoluteXY_=function(){return t.utils.style.getPageOffset(this.getClickTarget_())},t.Field.prototype.referencesVariables=function(){return!1},t.Field.prototype.getParentInput=function(){for(var e=null,n=this.sourceBlock_,a=n.inputList,f=0;f<n.inputList.length;f++)for(var E=a[f],I=E.fieldRow,Y=0;Y<I.length;Y++)if(I[Y]===this){e=E;break}return e},t.Field.prototype.getFlipRtl=function(){return!1},t.Field.prototype.isTabNavigable=function(){return!1},t.Field.prototype.onShortcut=function(e){return!1},t.Field.prototype.setCursorSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},t.Field.prototype.setMarkerSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null},t.Field.prototype.updateMarkers_=function(){var e=this.sourceBlock_.workspace;e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.FieldLabel=function(e,n,a){this.class_=null,t.FieldLabel.superClass_.constructor.call(this,e,null,a),a||(this.class_=n||null)},t.utils.object.inherits(t.FieldLabel,t.Field),t.FieldLabel.prototype.DEFAULT_VALUE="",t.FieldLabel.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabel(n,void 0,e)},t.FieldLabel.prototype.EDITABLE=!1,t.FieldLabel.prototype.configure_=function(e){t.FieldLabel.superClass_.configure_.call(this,e),this.class_=e.class},t.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&t.utils.dom.addClass(this.textElement_,this.class_)},t.FieldLabel.prototype.doClassValidation_=function(e){return null==e?null:String(e)},t.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&t.utils.dom.removeClass(this.textElement_,this.class_),e&&t.utils.dom.addClass(this.textElement_,e)),this.class_=e},t.fieldRegistry.register("field_label",t.FieldLabel),t.Input=function(e,n,a,f){if(e!=t.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e,this.name=n,this.sourceBlock_=a,this.connection=f,this.fieldRow=[]},t.Input.prototype.align=t.constants.ALIGN.LEFT,t.Input.prototype.visible_=!0,t.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Input.prototype.appendField=function(e,n){return this.insertFieldAt(this.fieldRow.length,e,n),this},t.Input.prototype.insertFieldAt=function(e,n,a){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(n||""==n&&a)&&("string"==typeof n&&(n=t.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=a,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),++e,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),e},t.Input.prototype.removeField=function(e,n){for(var f,a=0;f=this.fieldRow[a];a++)if(f.name===e)return f.dispose(),this.fieldRow.splice(a,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+e+'" not found.')},t.Input.prototype.isVisible=function(){return this.visible_},t.Input.prototype.setVisible=function(e){var n=[];if(this.visible_==e)return n;this.visible_=e;for(var f,a=0;f=this.fieldRow[a];a++)f.setVisible(e);return this.connection&&(this.connection=this.connection,e?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),a=this.connection.targetBlock())&&(a.getSvgRoot().style.display=e?"block":"none"),n},t.Input.prototype.markDirty=function(){for(var n,e=0;n=this.fieldRow[e];e++)n.markDirty()},t.Input.prototype.setCheck=function(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this},t.Input.prototype.setAlign=function(e){return this.align=e,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},t.Input.prototype.setShadowDom=function(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this},t.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},t.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()},t.Input.prototype.dispose=function(){for(var n,e=0;n=this.fieldRow[e];e++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},t.Block=function(e,n,a){if(t.Generator&&void 0!==t.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=a&&!e.getBlockById(a)?a:t.utils.genUid(),e.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new t.utils.Size(160,80)},this.xy_=new t.utils.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(a=t.Blocks[n])||"object"!=typeof a)throw TypeError("Unknown block type: "+n);t.utils.object.mixin(this,a)}e.addTopBlock(this),e.addTypedBlock(this),(e=t.Events.getGroup())||t.Events.setGroup(!0),n=t.Events.recordUndo;try{"function"==typeof this.init&&(t.Events.recordUndo=!1,this.init(),t.Events.recordUndo=n),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(this))}finally{e||t.Events.setGroup(!1),t.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},t.Block.COLLAPSED_INPUT_NAME=t.constants.COLLAPSED_INPUT_NAME,t.Block.COLLAPSED_FIELD_NAME=t.constants.COLLAPSED_FIELD_NAME,t.Block.prototype.data=null,t.Block.prototype.disposed=!1,t.Block.prototype.hue_=null,t.Block.prototype.colour_="#000000",t.Block.prototype.styleName_="",t.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_DELETE))(this)),t.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),t.selected==this&&(t.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var a;a=this.inputList[n];n++)a.dispose();this.inputList.length=0;var E,f=this.getConnections_(!0);for(n=0;E=f[n];n++)E.dispose()}finally{t.Events.enable(),this.disposed=!0}}},t.Block.prototype.initModel=function(){for(var n,e=0;n=this.inputList[e];e++)for(var f,a=0;f=n.fieldRow[a];a++)f.initModel&&f.initModel()},t.Block.prototype.unplug=function(e){this.outputConnection?this.unplugFromRow_(e):this.previousConnection&&this.unplugFromStack_(e)},t.Block.prototype.unplugFromRow_=function(e){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&((e=e.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(e,n,!1)?n.connect(e):e.onFailedConnect(n))},t.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,n=0;n<this.inputList.length;n++){var a=this.inputList[n].connection;if(a&&a.type==t.connectionTypes.INPUT_VALUE&&a.targetConnection){if(e)return null;e=a}}return e},t.Block.prototype.unplugFromStack_=function(e){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var a=this.getNextBlock();e&&a&&!a.isShadow()&&((e=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,e,!1)&&n.connect(e))},t.Block.prototype.getConnections_=function(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(var a,n=0;a=this.inputList[n];n++)a.connection&&e.push(a.connection);return e},t.Block.prototype.lastConnectionInStack=function(e){for(var n=this.nextConnection;n;){var a=n.targetBlock();if(!a||e&&a.isShadow())return n;n=a.nextConnection}return null},t.Block.prototype.bumpNeighbours=function(){},t.Block.prototype.getParent=function(){return this.parentBlock_},t.Block.prototype.getInputWithBlock=function(e){for(var a,n=0;a=this.inputList[n];n++)if(a.connection&&a.connection.targetBlock()==e)return a;return null},t.Block.prototype.getSurroundParent=function(){var e=this;do{var n=e;if(!(e=e.getParent()))return null}while(e.getNextBlock()==n);return e},t.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},t.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},t.Block.prototype.getFirstStatementConnection=function(){for(var n,e=0;n=this.inputList[e];e++)if(n.connection&&n.connection.type==t.connectionTypes.NEXT_STATEMENT)return n.connection;return null},t.Block.prototype.getRootBlock=function(){var e=this;do{var n=e;e=n.parentBlock_}while(e);return n},t.Block.prototype.getTopStackBlock=function(){var e=this;do{var n=e.getPreviousBlock()}while(n&&n.getNextBlock()==e&&(e=n));return e},t.Block.prototype.getChildren=function(e){if(!e)return this.childBlocks_;e=[];for(var a,n=0;a=this.inputList[n];n++)a.connection&&(a=a.connection.targetBlock())&&e.push(a);return(n=this.getNextBlock())&&e.push(n),e},t.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(t.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},t.Block.prototype.getDescendants=function(e){for(var f,n=[this],a=this.getChildren(e),E=0;f=a[E];E++)n.push.apply(n,f.getDescendants(e));return n},t.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setDeletable=function(e){this.deletable_=e},t.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setMovable=function(e){this.movable_=e},t.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(t.utils.getBlockTypeCounts(this,!0))},t.Block.prototype.isShadow=function(){return this.isShadow_},t.Block.prototype.setShadow=function(e){this.isShadow_=e},t.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},t.Block.prototype.setInsertionMarker=function(e){this.isInsertionMarker_=e},t.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setEditable=function(e){this.editable_=e,e=0;for(var n;n=this.inputList[e];e++)for(var f,a=0;f=n.fieldRow[a];a++)f.updateEditable()},t.Block.prototype.isDisposed=function(){return this.disposed},t.Block.prototype.getMatchingConnection=function(e,n){var a=this.getConnections_(!0);if(e=e.getConnections_(!0),a.length!=e.length)throw Error("Connection lists did not match in length.");for(var f=0;f<e.length;f++)if(e[f]==n)return a[f];return null},t.Block.prototype.setHelpUrl=function(e){this.helpUrl=e},t.Block.prototype.setTooltip=function(e){this.tooltip=e},t.Block.prototype.getTooltip=function(){return t.Tooltip.getTooltipOfObject(this)},t.Block.prototype.getColour=function(){return this.colour_},t.Block.prototype.getStyleName=function(){return this.styleName_},t.Block.prototype.getHue=function(){return this.hue_},t.Block.prototype.setColour=function(e){e=t.utils.parseBlockColour(e),this.hue_=e.hue,this.colour_=e.hex},t.Block.prototype.setStyle=function(e){this.styleName_=e},t.Block.prototype.setOnChange=function(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=e)&&(this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},t.Block.prototype.getField=function(e){if("string"!=typeof e)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===e?"nothing":e+" of type "+typeof e)+" instead");for(var a,n=0;a=this.inputList[n];n++)for(var E,f=0;E=a.fieldRow[f];f++)if(E.name===e)return E;return null},t.Block.prototype.getVars=function(){for(var a,e=[],n=0;a=this.inputList[n];n++)for(var E,f=0;E=a.fieldRow[f];f++)E.referencesVariables()&&e.push(E.getValue());return e},t.Block.prototype.getVarModels=function(){for(var a,e=[],n=0;a=this.inputList[n];n++)for(var E,f=0;E=a.fieldRow[f];f++)E.referencesVariables()&&(E=this.workspace.getVariableById(E.getValue()))&&e.push(E);return e},t.Block.prototype.updateVarName=function(e){for(var a,n=0;a=this.inputList[n];n++)for(var E,f=0;E=a.fieldRow[f];f++)E.referencesVariables()&&e.getId()==E.getValue()&&E.refreshVariableName()},t.Block.prototype.renameVarById=function(e,n){for(var f,a=0;f=this.inputList[a];a++)for(var I,E=0;I=f.fieldRow[E];E++)I.referencesVariables()&&e==I.getValue()&&I.setValue(n)},t.Block.prototype.getFieldValue=function(e){return(e=this.getField(e))?e.getValue():null},t.Block.prototype.setFieldValue=function(e,n){var a=this.getField(n);if(!a)throw Error('Field "'+n+'" not found.');a.setValue(e)},t.Block.prototype.setPreviousStatement=function(e,n){if(e){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(t.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},t.Block.prototype.setNextStatement=function(e,n){if(e)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(t.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},t.Block.prototype.setOutput=function(e,n){if(e){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(t.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},t.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},t.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.DUMMY&&this.inputList[e].type==t.inputTypes.DUMMY)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.VALUE&&this.inputList[e].type==t.inputTypes.DUMMY)return!0;return!1},t.Block.prototype.setOutputShape=function(e){this.outputShape_=e},t.Block.prototype.getOutputShape=function(){return this.outputShape_},t.Block.prototype.isEnabled=function(){return!this.disabled},t.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!e)),this.disabled=!e)},t.Block.prototype.getInheritedDisabled=function(){for(var e=this.getSurroundParent();e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1},t.Block.prototype.isCollapsed=function(){return this.collapsed_},t.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},t.Block.prototype.toString=function(e,n){function a(De){var Ae=De.getCheck();return!Ae&&De.targetConnection&&(Ae=De.targetConnection.getCheck()),!!Ae&&(-1!=Ae.indexOf("Boolean")||-1!=Ae.indexOf("Number"))}function f(){Y&&Y.getType()==ee.getType()&&Y.getLocation()==ee.getLocation()&&(Y=null)}var E=[];n=n||"?";var I=t.ASTNode.NAVIGATE_ALL_FIELDS;t.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var Y=t.ASTNode.createBlockNode(this),ee=Y;Y;){switch(Y.getType()){case t.ASTNode.types.INPUT:var _e=Y.getLocation();Y.in()?a(_e)&&E.push("("):E.push(n);break;case t.ASTNode.types.FIELD:(_e=Y.getLocation()).name!=t.constants.COLLAPSED_FIELD_NAME&&E.push(_e.getText())}if(!(Y=(_e=Y).in()||_e.next())){for(Y=_e.out(),f();Y&&!Y.next();)Y=Y.out(),f(),Y&&Y.getType()==t.ASTNode.types.INPUT&&a(Y.getLocation())&&E.push(")");Y&&(Y=Y.next())}}for(t.ASTNode.NAVIGATE_ALL_FIELDS=I,n=2;n<E.length;n++)"("==E[n-2]&&")"==E[n]&&(E[n-2]=E[n-1],E.splice(n-1,2));return E=(E=E.reduce(function(De,Ae){return De+("("==De.substr(-1)||")"==Ae?"":" ")+Ae},"")).trim()||"???",e&&E.length>e&&(E=E.substring(0,e-3)+"..."),E},t.Block.prototype.appendValueInput=function(e){return this.appendInput_(t.inputTypes.VALUE,e)},t.Block.prototype.appendStatementInput=function(e){return this.appendInput_(t.inputTypes.STATEMENT,e)},t.Block.prototype.appendDummyInput=function(e){return this.appendInput_(t.inputTypes.DUMMY,e||"")},t.Block.prototype.jsonInit=function(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,n):this.jsonInitColour_(e,n);for(var a=0;void 0!==e["message"+a];)this.interpolate_(e["message"+a],e["args"+a]||[],e["lastDummyAlign"+a],n),a++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(a=t.utils.replaceMessageReferences(a=e.tooltip),this.setTooltip(a)),void 0!==e.enableContextMenu&&(this.contextMenu=!!(a=e.enableContextMenu)),void 0!==e.helpUrl&&(a=t.utils.replaceMessageReferences(a=e.helpUrl),this.setHelpUrl(a)),"string"==typeof e.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&t.Extensions.apply(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(n=0;n<e.length;++n)t.Extensions.apply(e[n],this,!1)},t.Block.prototype.jsonInitColour_=function(e,n){if("colour"in e)if(void 0===e.colour)console.warn(n+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch(a){console.warn(n+"Illegal colour value: ",e)}}},t.Block.prototype.jsonInitStyle_=function(e,n){e=e.style;try{this.setStyle(e)}catch(a){console.warn(n+"Style does not exist: ",e)}},t.Block.prototype.mixin=function(e,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var a in n=[],e)void 0!==this[a]&&n.push(a);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}t.utils.object.mixin(this,e)},t.Block.prototype.interpolate_=function(e,n,a,f){e=t.utils.tokenizeInterpolation(e),this.validateTokens_(e,n.length),n=this.interpolateArguments_(e,n,a),a=[],e=0;for(var E;E=n[e];e++)if(this.isInputKeyword_(E.type)){if(E=this.inputFromJson_(E,f)){for(var Y,I=0;Y=a[I];I++)E.appendField(Y[0],Y[1]);a.length=0}}else(I=this.fieldFromJson_(E))&&a.push([I,E.name])},t.Block.prototype.validateTokens_=function(e,n){for(var a=[],f=0,E=0;E<e.length;E++){var I=e[E];if("number"==typeof I){if(1>I||I>n)throw Error('Block "'+this.type+'": Message index %'+I+" out of range.");if(a[I])throw Error('Block "'+this.type+'": Message index %'+I+" duplicated.");a[I]=!0,f++}}if(f!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},t.Block.prototype.interpolateArguments_=function(e,n,a){for(var f=[],E=0;E<e.length;E++){var I=e[E];"number"==typeof I&&(I=n[I-1]),("string"!=typeof I||(I=this.stringToFieldJson_(I)))&&f.push(I)}return(e=f.length)&&!this.isInputKeyword_(f[e-1].type)&&(e={type:"input_dummy"},a&&(e.align=a),f.push(e)),f},t.Block.prototype.fieldFromJson_=function(e){var n=t.fieldRegistry.fromJson(e);return!n&&e.alt?"string"==typeof e.alt?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):n},t.Block.prototype.inputFromJson_=function(e,n){var a={LEFT:t.constants.ALIGN.LEFT,RIGHT:t.constants.ALIGN.RIGHT,CENTRE:t.constants.ALIGN.CENTRE,CENTER:t.constants.ALIGN.CENTRE},f=null;switch(e.type){case"input_value":f=this.appendValueInput(e.name);break;case"input_statement":f=this.appendStatementInput(e.name);break;case"input_dummy":f=this.appendDummyInput(e.name)}return f?(e.check&&f.setCheck(e.check),e.align&&(void 0===(a=a[e.align.toUpperCase()])?console.warn(n+"Illegal align value: ",e.align):f.setAlign(a)),f):null},t.Block.prototype.isInputKeyword_=function(e){return"input_value"==e||"input_statement"==e||"input_dummy"==e},t.Block.prototype.stringToFieldJson_=function(e){return(e=e.trim())?{type:"field_label",text:e}:null},t.Block.prototype.appendInput_=function(e,n){var a=null;return(e==t.inputTypes.VALUE||e==t.inputTypes.STATEMENT)&&(a=this.makeConnection_(e)),e==t.inputTypes.STATEMENT&&this.statementInputCount++,e=new t.Input(e,n,this,a),this.inputList.push(e),e},t.Block.prototype.moveInputBefore=function(e,n){if(e!=n){for(var I,a=-1,f=n?-1:this.inputList.length,E=0;I=this.inputList[E];E++)if(I.name==e){if(a=E,-1!=f)break}else if(n&&I.name==n&&(f=E,-1!=a))break;if(-1==a)throw Error('Named input "'+e+'" not found.');if(-1==f)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(a,f)}},t.Block.prototype.moveNumberedInputBefore=function(e,n){if(e==n)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var a=this.inputList[e];this.inputList.splice(e,1),e<n&&n--,this.inputList.splice(n,0,a)},t.Block.prototype.removeInput=function(e,n){for(var f,a=0;f=this.inputList[a];a++)if(f.name==e)return f.type==t.inputTypes.STATEMENT&&this.statementInputCount--,f.dispose(),this.inputList.splice(a,1),!0;if(n)return!1;throw Error("Input not found: "+e)},t.Block.prototype.getInput=function(e){for(var a,n=0;a=this.inputList[n];n++)if(a.name==e)return a;return null},t.Block.prototype.getInputTargetBlock=function(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()},t.Block.prototype.getCommentText=function(){return this.commentModel.text},t.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)},t.Block.prototype.setWarningText=function(e,n){},t.Block.prototype.setMutator=function(e){},t.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},t.Block.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var a=new(t.Events.get(t.Events.BLOCK_MOVE))(this);this.xy_.translate(e,n),a.recordNew(),t.Events.fire(a)},t.Block.prototype.makeConnection_=function(e){return new t.Connection(this,e)},t.Block.prototype.allInputsFilled=function(e){if(void 0===e&&(e=!0),!e&&this.isShadow())return!1;for(var a,n=0;a=this.inputList[n];n++)if(a.connection&&(!(a=a.connection.targetBlock())||!a.allInputsFilled(e)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(e)},t.Block.prototype.toDevString=function(){var e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e},t.blockRendering.IPathObject=function(e,n){},t.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},t.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},t.Menu.prototype.addChild=function(e){this.menuItems_.push(e)},t.Menu.prototype.render=function(e){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&t.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var f,a=0;f=this.menuItems_[a];a++)n.appendChild(f.createDom());this.mouseOverHandler_=t.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=t.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=t.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=t.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=t.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),e.appendChild(n)},t.Menu.prototype.getElement=function(){return this.element_},t.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus({preventScroll:!0}),t.utils.dom.addClass(e,"blocklyFocused"))},t.Menu.prototype.blur_=function(){var e=this.getElement();e&&(e.blur(),t.utils.dom.removeClass(e,"blocklyFocused"))},t.Menu.prototype.setRole=function(e){this.roleName_=e},t.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(t.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(t.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(t.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(t.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(t.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,e=0;n=this.menuItems_[e];e++)n.dispose();this.element_=null},t.Menu.prototype.getMenuItem_=function(e){for(var n=this.getElement();e&&e!=n;){if(t.utils.dom.hasClass(e,"blocklyMenuItem"))for(var f,a=0;f=this.menuItems_[a];a++)if(f.getElement()==e)return f;e=e.parentElement}return null},t.Menu.prototype.setHighlighted=function(e){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),e&&(e.setHighlighted(!0),this.highlightedItem_=e,n=this.getElement(),t.utils.style.scrollIntoContainerView(e.getElement(),n),t.utils.aria.setState(n,t.utils.aria.State.ACTIVEDESCENDANT,e.getId()))},t.Menu.prototype.highlightNext=function(){var e=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(e,1)},t.Menu.prototype.highlightPrevious=function(){var e=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>e?this.menuItems_.length:e,-1)},t.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},t.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},t.Menu.prototype.highlightHelper_=function(e,n){e+=n;for(var a;a=this.menuItems_[e];){if(a.isEnabled()){this.setHighlighted(a);break}e+=n}},t.Menu.prototype.handleMouseOver_=function(e){(e=this.getMenuItem_(e.target))&&(e.isEnabled()?this.highlightedItem_!=e&&this.setHighlighted(e):this.setHighlighted(null))},t.Menu.prototype.handleClick_=function(e){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof e.clientX){var a=new t.utils.Coordinate(e.clientX,e.clientY);if(1>t.utils.Coordinate.distance(n,a))return}(e=this.getMenuItem_(e.target))&&e.performAction()},t.Menu.prototype.handleMouseEnter_=function(e){this.focus()},t.Menu.prototype.handleMouseLeave_=function(e){this.getElement()&&(this.blur_(),this.setHighlighted(null))},t.Menu.prototype.handleKeyEvent_=function(e){if(this.menuItems_.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem_;switch(e.keyCode){case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:n&&n.performAction();break;case t.utils.KeyCodes.UP:this.highlightPrevious();break;case t.utils.KeyCodes.DOWN:this.highlightNext();break;case t.utils.KeyCodes.PAGE_UP:case t.utils.KeyCodes.HOME:this.highlightFirst_();break;case t.utils.KeyCodes.PAGE_DOWN:case t.utils.KeyCodes.END:this.highlightLast_();break;default:return}e.preventDefault(),e.stopPropagation()}},t.Menu.prototype.getSize=function(){var e=this.getElement(),n=t.utils.style.getSize(e);return n.height=e.scrollHeight,n},t.MenuItem=function(e,n){this.content_=e,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},t.MenuItem.prototype.createDom=function(){var e=document.createElement("div");e.id=t.utils.IdGenerator.getNextUniqueId(),this.element_=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var a=document.createElement("div");a.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(a)}return a=this.content_,"string"==typeof this.content_&&(a=document.createTextNode(this.content_)),n.appendChild(a),e.appendChild(n),this.roleName_&&t.utils.aria.setRole(e,this.roleName_),t.utils.aria.setState(e,t.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),t.utils.aria.setState(e,t.utils.aria.State.DISABLED,!this.enabled_),e},t.MenuItem.prototype.dispose=function(){this.element_=null},t.MenuItem.prototype.getElement=function(){return this.element_},t.MenuItem.prototype.getId=function(){return this.element_.id},t.MenuItem.prototype.getValue=function(){return this.value_},t.MenuItem.prototype.setRightToLeft=function(e){this.rightToLeft_=e},t.MenuItem.prototype.setRole=function(e){this.roleName_=e},t.MenuItem.prototype.setCheckable=function(e){this.checkable_=e},t.MenuItem.prototype.setChecked=function(e){this.checked_=e},t.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var n=this.getElement();n&&this.isEnabled()&&(e?(t.utils.dom.addClass(n,"blocklyMenuItemHighlight"),t.utils.dom.addClass(n,"goog-menuitem-highlight")):(t.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),t.utils.dom.removeClass(n,"goog-menuitem-highlight")))},t.MenuItem.prototype.isEnabled=function(){return this.enabled_},t.MenuItem.prototype.setEnabled=function(e){this.enabled_=e},t.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},t.MenuItem.prototype.onAction=function(e,n){this.actionHandler_=e.bind(n)},t.ContextMenu={},t.ContextMenu.currentBlock=null,t.ContextMenu.menu_=null,t.ContextMenu.show=function(e,n,a){if(t.WidgetDiv.show(t.ContextMenu,a,t.ContextMenu.dispose),n.length){var f=t.ContextMenu.populate_(n,a);t.ContextMenu.menu_=f,t.ContextMenu.position_(f,e,a),setTimeout(function(){f.focus()},1),t.ContextMenu.currentBlock=null}else t.ContextMenu.hide()},t.ContextMenu.populate_=function(e,n){var a=new t.Menu;a.setRole(t.utils.aria.Role.MENU);for(var E,f=0;E=e[f];f++){var I=new t.MenuItem(E.text);I.setRightToLeft(n),I.setRole(t.utils.aria.Role.MENUITEM),a.addChild(I),I.setEnabled(E.enabled),E.enabled&&I.onAction(function(Y){t.ContextMenu.hide(),this.callback(this.scope)},E)}return a},t.ContextMenu.position_=function(e,n,a){var f=t.utils.getViewportBBox();n=new t.utils.Rect(n.clientY+f.top,n.clientY+f.top,n.clientX+f.left,n.clientX+f.left),t.ContextMenu.createWidget_(e);var E=e.getSize();a&&(n.left+=E.width,n.right+=E.width,f.left+=E.width,f.right+=E.width),t.WidgetDiv.positionWithAnchor(f,n,E,a),e.focus()},t.ContextMenu.createWidget_=function(e){e.render(t.WidgetDiv.DIV);var n=e.getElement();t.utils.dom.addClass(n,"blocklyContextMenu"),t.browserEvents.conditionalBind(n,"contextmenu",null,t.utils.noEvent),e.focus()},t.ContextMenu.hide=function(){t.WidgetDiv.hideIfOwner(t.ContextMenu),t.ContextMenu.currentBlock=null},t.ContextMenu.dispose=function(){t.ContextMenu.menu_&&(t.ContextMenu.menu_.dispose(),t.ContextMenu.menu_=null)},t.ContextMenu.callbackFactory=function(e,n){return function(){t.Events.disable();try{var a=t.Xml.domToBlock(n,e.workspace),f=e.getRelativeToSurfaceXY();f.x=e.RTL?f.x-t.SNAP_RADIUS:f.x+t.SNAP_RADIUS,f.y+=2*t.SNAP_RADIUS,a.moveBy(f.x,f.y)}finally{t.Events.enable()}t.Events.isEnabled()&&!a.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(a)),a.select()}},t.ContextMenu.commentDeleteOption=function(e){return{text:t.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.Events.setGroup(!0),e.dispose(!0,!0),t.Events.setGroup(!1)}}},t.ContextMenu.commentDuplicateOption=function(e){return{text:t.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){t.duplicate(e)}}},t.ContextMenu.workspaceCommentOption=function(e,n){if(!t.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var a={enabled:!t.utils.userAgent.IE};return a.text=t.Msg.ADD_COMMENT,a.callback=function(){var f=new t.WorkspaceCommentSvg(e,t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,t.WorkspaceCommentSvg.DEFAULT_SIZE,t.WorkspaceCommentSvg.DEFAULT_SIZE),E=e.getInjectionDiv().getBoundingClientRect();E=new t.utils.Coordinate(n.clientX-E.left,n.clientY-E.top);var I=e.getOriginOffsetInPixels();(E=t.utils.Coordinate.difference(E,I)).scale(1/e.scale),f.moveBy(E.x,E.y),e.rendered&&(f.initSvg(),f.render(),f.select())},a},t.ContextMenuRegistry=function(){t.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},t.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},t.ContextMenuRegistry.registry=null,t.ContextMenuRegistry.prototype.register=function(e){if(this.registry_[e.id])throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_[e.id]=e},t.ContextMenuRegistry.prototype.unregister=function(e){if(!this.registry_[e])throw Error('Menu item with ID "'+e+'" not found.');delete this.registry_[e]},t.ContextMenuRegistry.prototype.getItem=function(e){return this.registry_[e]||null},t.ContextMenuRegistry.prototype.getContextMenuOptions=function(e,n){var a=[],f=this.registry_;return Object.keys(f).forEach(function(E){if(e==(E=f[E]).scopeType){var I=E.preconditionFn(n);"hidden"!=I&&(E={text:"function"==typeof E.displayText?E.displayText(n):E.displayText,enabled:"enabled"==I,callback:E.callback,scope:n,weight:E.weight},a.push(E))}}),a.sort(function(E,I){return E.weight-I.weight}),a},new t.ContextMenuRegistry,t.Events.Selected=function(e,n,a){t.Events.Selected.superClass_.constructor.call(this,a),this.oldElementId=e,this.newElementId=n},t.utils.object.inherits(t.Events.Selected,t.Events.UiBase),t.Events.Selected.prototype.type=t.Events.SELECTED,t.Events.Selected.prototype.toJson=function(){var e=t.Events.Selected.superClass_.toJson.call(this);return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e},t.Events.Selected.prototype.fromJson=function(e){t.Events.Selected.superClass_.fromJson.call(this,e),this.oldElementId=e.oldElementId,this.newElementId=e.newElementId},t.registry.register(t.registry.Type.EVENT,t.Events.SELECTED,t.Events.Selected),t.IBoundedElement=function(){},t.ICopyable=function(){},t.RenderedConnection=function(e,n){t.RenderedConnection.superClass_.constructor.call(this,e,n),this.db_=e.workspace.connectionDBList[n],this.dbOpposite_=e.workspace.connectionDBList[t.OPPOSITE_TYPE[n]],this.offsetInBlock_=new t.utils.Coordinate(0,0),this.trackedState_=t.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},t.utils.object.inherits(t.RenderedConnection,t.Connection),t.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},t.RenderedConnection.prototype.dispose=function(){t.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},t.RenderedConnection.prototype.getSourceBlock=function(){return t.RenderedConnection.superClass_.getSourceBlock.call(this)},t.RenderedConnection.prototype.targetBlock=function(){return t.RenderedConnection.superClass_.targetBlock.call(this)},t.RenderedConnection.prototype.distanceFrom=function(e){var n=this.x-e.x;return e=this.y-e.y,Math.sqrt(n*n+e*e)},t.RenderedConnection.prototype.bumpAwayFrom=function(e){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var a=!1;if(!n.isMovable()){if(!(n=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,a=!0}var f=t.selected==n;f||n.addSelect();var E=e.x+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x,I=e.y+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.y;a&&(I=-I),n.RTL&&(E=e.x-t.SNAP_RADIUS-Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x),n.moveBy(E,I),f||n.removeSelect()}}},t.RenderedConnection.prototype.moveTo=function(e,n){this.trackedState_==t.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=e,this.y=n},t.RenderedConnection.prototype.moveBy=function(e,n){this.moveTo(this.x+e,this.y+n)},t.RenderedConnection.prototype.moveToOffset=function(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)},t.RenderedConnection.prototype.setOffsetInBlock=function(e,n){this.offsetInBlock_.x=e,this.offsetInBlock_.y=n},t.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},t.RenderedConnection.prototype.tighten=function(){var e=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=e||0!=n){var a=this.targetBlock(),f=a.getSvgRoot();if(!f)throw Error("block is not rendered.");f=t.utils.getRelativeXY(f),a.getSvgRoot().setAttribute("transform","translate("+(f.x-e)+","+(f.y-n)+")"),a.moveConnections(-e,-n)}},t.RenderedConnection.prototype.closest=function(e,n){return this.dbOpposite_.searchForClosest(this,e,n)},t.RenderedConnection.prototype.highlight=function(){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),n=e.shapeFor(this);n=this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.OUTPUT_VALUE?t.utils.svgPaths.moveBy(0,-(e=e.TAB_OFFSET_FROM_TOP))+t.utils.svgPaths.lineOnAxis("v",e)+n.pathDown+t.utils.svgPaths.lineOnAxis("v",e):t.utils.svgPaths.moveBy(-(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS),0)+t.utils.svgPaths.lineOnAxis("h",e)+n.pathLeft+t.utils.svgPaths.lineOnAxis("h",e),e=this.sourceBlock_.getRelativeToSurfaceXY(),t.Connection.highlightedPath_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},t.RenderedConnection.prototype.unhighlight=function(){t.utils.dom.removeNode(t.Connection.highlightedPath_),delete t.Connection.highlightedPath_},t.RenderedConnection.prototype.setTracking=function(e){e&&this.trackedState_==t.RenderedConnection.TrackedState.TRACKED||!e&&this.trackedState_==t.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.UNTRACKED))},t.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var e=this.targetBlock().getDescendants(!1),n=0;n<e.length;n++){for(var a=e[n],f=a.getConnections_(!0),E=0;E<f.length;E++)f[E].setTracking(!1);for(a=a.getIcons(),E=0;E<a.length;E++)a[E].setVisible(!1)}},t.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var e=[];if(this.type!=t.connectionTypes.INPUT_VALUE&&this.type!=t.connectionTypes.NEXT_STATEMENT)return e;var n=this.targetBlock();if(n){if(n.isCollapsed()){var a=[];n.outputConnection&&a.push(n.outputConnection),n.nextConnection&&a.push(n.nextConnection),n.previousConnection&&a.push(n.previousConnection)}else a=n.getConnections_(!0);for(var f=0;f<a.length;f++)e.push.apply(e,a[f].startTrackingAll());e.length||(e[0]=n)}return e},t.RenderedConnection.prototype.isConnectionAllowed=function(e,n){return t.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(e)>n)&&t.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},t.RenderedConnection.prototype.onFailedConnect=function(e){var n=this.getSourceBlock();if(t.Events.recordUndo){var a=t.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(t.Events.setGroup(a),this.bumpAwayFrom(e),t.Events.setGroup(!1))}.bind(this),t.BUMP_DELAY)}},t.RenderedConnection.prototype.disconnectInternal_=function(e,n){t.RenderedConnection.superClass_.disconnectInternal_.call(this,e,n),e.rendered&&e.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},t.RenderedConnection.prototype.respawnShadow_=function(){t.RenderedConnection.superClass_.respawnShadow_.call(this);var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())},t.RenderedConnection.prototype.neighbours=function(e){return this.dbOpposite_.getNeighbours(this,e)},t.RenderedConnection.prototype.connect_=function(e){t.RenderedConnection.superClass_.connect_.call(this,e);var n=this.getSourceBlock();e=e.getSourceBlock();var a=n.rendered,f=e.rendered;a&&n.updateDisabled(),f&&e.updateDisabled(),a&&f&&(this.type==t.connectionTypes.NEXT_STATEMENT||this.type==t.connectionTypes.PREVIOUS_STATEMENT?e.render():n.render()),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")},t.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},t.BasicCursor=function(){t.BasicCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.BasicCursor,t.Cursor),t.BasicCursor.registrationName="basicCursor",t.BasicCursor.prototype.next=function(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null},t.BasicCursor.prototype.in=function(){return this.next()},t.BasicCursor.prototype.prev=function(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null},t.BasicCursor.prototype.out=function(){return this.prev()},t.BasicCursor.prototype.getNextNode_=function(e,n){if(!e)return null;var a=e.in()||e.next();return n(a)?a:a?this.getNextNode_(a,n):n(e=this.findSiblingOrParent_(e.out()))?e:e?this.getNextNode_(e,n):null},t.BasicCursor.prototype.getPreviousNode_=function(e,n){if(!e)return null;var a=e.prev();return n(a=a?this.getRightMostChild_(a):e.out())?a:a?this.getPreviousNode_(a,n):null},t.BasicCursor.prototype.validNode_=function(e){var n=!1;return((e=e&&e.getType())==t.ASTNode.types.OUTPUT||e==t.ASTNode.types.INPUT||e==t.ASTNode.types.FIELD||e==t.ASTNode.types.NEXT||e==t.ASTNode.types.PREVIOUS||e==t.ASTNode.types.WORKSPACE)&&(n=!0),n},t.BasicCursor.prototype.findSiblingOrParent_=function(e){return e?e.next()||this.findSiblingOrParent_(e.out()):null},t.BasicCursor.prototype.getRightMostChild_=function(e){if(!e.in())return e;for(e=e.in();e.next();)e=e.next();return this.getRightMostChild_(e)},t.registry.register(t.registry.Type.CURSOR,t.BasicCursor.registrationName,t.BasicCursor),t.TabNavigateCursor=function(){t.TabNavigateCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.TabNavigateCursor,t.BasicCursor),t.TabNavigateCursor.prototype.validNode_=function(e){var n=!1,a=e&&e.getType();return e&&(e=e.getLocation(),a==t.ASTNode.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(n=!0)),n},t.BlockSvg=function(e,n,a){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=t.utils.is3dSupported()&&!!e.getBlockDragSurface();var f=this.pathObject.svgPath;f.tooltip=this,t.Tooltip.bindMouseEvents(f),t.BlockSvg.superClass_.constructor.call(this,e,n,a),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:t.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},t.utils.object.inherits(t.BlockSvg,t.Block),t.BlockSvg.prototype.height=0,t.BlockSvg.prototype.width=0,t.BlockSvg.prototype.warningTextDb_=null,t.BlockSvg.INLINE=-1,t.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",t.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,e=0;n=this.inputList[e];e++)n.init();for(n=this.getIcons(),e=0;e<n.length;e++)n[e].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),e=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!e||t.browserEvents.conditionalBind(e,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,e.parentNode||this.workspace.getCanvas().appendChild(e)},t.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},t.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},t.BlockSvg.prototype.getColourShadow=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},t.BlockSvg.prototype.getColourBorder=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},t.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(t.selected!=this){var e=null;if(t.selected){e=t.selected.id,t.Events.disable();try{t.selected.unselect()}finally{t.Events.enable()}}e=new(t.Events.get(t.Events.SELECTED))(e,this.id,this.workspace.id),t.Events.fire(e),t.selected=this,this.addSelect()}},t.BlockSvg.prototype.unselect=function(){if(t.selected==this){var e=new(t.Events.get(t.Events.SELECTED))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,t.Events.fire(e),t.selected=null,this.removeSelect()}},t.BlockSvg.prototype.mutator=null,t.BlockSvg.prototype.comment=null,t.BlockSvg.prototype.commentIcon_=null,t.BlockSvg.prototype.warning=null,t.BlockSvg.prototype.getIcons=function(){var e=[];return this.mutator&&e.push(this.mutator),this.commentIcon_&&e.push(this.commentIcon_),this.warning&&e.push(this.warning),e},t.BlockSvg.prototype.setParent=function(e){var n=this.parentBlock_;if(e!=n){t.utils.dom.startTextWidthCache(),t.BlockSvg.superClass_.setParent.call(this,e),t.utils.dom.stopTextWidthCache();var a=this.getSvgRoot();if(!this.workspace.isClearing&&a){var f=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(a),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-f.x,e.y-f.y)):n&&(this.workspace.getCanvas().appendChild(a),this.translate(f.x,f.y)),this.applyColour()}}},t.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,n=0,a=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,f=this.getSvgRoot();if(f)do{var E=t.utils.getRelativeXY(f);e+=E.x,n+=E.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==f&&(e+=(E=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=E.y),f=f.parentNode}while(f&&f!=this.workspace.getCanvas()&&f!=a);return new t.utils.Coordinate(e,n)},t.BlockSvg.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var a=t.Events.isEnabled();if(a)var f=new(t.Events.get(t.Events.BLOCK_MOVE))(this);var E=this.getRelativeToSurfaceXY();this.translate(E.x+e,E.y+n),this.moveConnections(e,n),a&&(f.recordNew(),t.Events.fire(f)),this.workspace.resizeContents()},t.BlockSvg.prototype.translate=function(e,n){this.getSvgRoot().setAttribute("transform","translate("+e+","+n+")")},t.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),(e=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(e)}},t.BlockSvg.prototype.moveTo=function(e){var n=this.getRelativeToSurfaceXY();this.moveBy(e.x-n.x,e.y-n.y)},t.BlockSvg.prototype.moveOffDragSurface=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},t.BlockSvg.prototype.moveDuringDrag=function(e){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},t.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},t.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var n=e.getSpacing(),a=n/2,f=this.getRelativeToSurfaceXY();e=Math.round((f.x-a)/n)*n+a-f.x,n=Math.round((f.y-a)/n)*n+a-f.y,e=Math.round(e),n=Math.round(n),0==e&&0==n||this.moveBy(e,n)}}},t.BlockSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var a=e.x-n.width,f=e.x;else a=e.x,f=e.x+n.width;return new t.utils.Rect(e.y,e.y+n.height,a,f)},t.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,e=0;n=this.inputList[e];e++)n.markDirty()},t.BlockSvg.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.BlockSvg.superClass_.setCollapsed.call(this,e),e?this.rendered&&this.render():this.updateCollapsed_())},t.BlockSvg.prototype.updateCollapsed_=function(){for(var E,e=this.isCollapsed(),n=t.constants.COLLAPSED_INPUT_NAME,a=t.constants.COLLAPSED_FIELD_NAME,f=0;E=this.inputList[f];f++)E.name!=n&&E.setVisible(!e);if(e){for(E=this.getIcons(),f=0;e=E[f];f++)e.setVisible(!1);f=this.toString(t.COLLAPSE_CHARS),(E=this.getField(a))?E.setValue(f):(E=this.getInput(n)||this.appendDummyInput(n)).appendField(new t.FieldLabel(f),a)}else this.updateDisabled(),this.removeInput(n)},t.BlockSvg.prototype.tab=function(e,n){var a=new t.TabNavigateCursor;a.setCurNode(t.ASTNode.createFieldNode(e)),e=a.getCurNode(),n?a.next():a.prev(),(n=a.getCurNode())&&n!==e&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},t.BlockSvg.prototype.onMouseDown_=function(e){var n=this.workspace&&this.workspace.getGesture(e);n&&n.handleBlockStart(e,this)},t.BlockSvg.prototype.showHelp=function(){var e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&window.open(e)},t.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var e=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e},t.BlockSvg.prototype.showContextMenu=function(e){var n=this.generateContextMenu();n&&n.length&&(t.ContextMenu.show(e,n,this.RTL),t.ContextMenu.currentBlock=this)},t.BlockSvg.prototype.moveConnections=function(e,n){if(this.rendered){for(var a=this.getConnections_(!1),f=0;f<a.length;f++)a[f].moveBy(e,n);for(a=this.getIcons(),f=0;f<a.length;f++)a[f].computeIconLocation();for(f=0;f<this.childBlocks_.length;f++)this.childBlocks_[f].moveConnections(e,n)}},t.BlockSvg.prototype.setDragging=function(e){if(e){var n=this.getSvgRoot();n.translate_="",n.skew_="",t.draggingConnections=t.draggingConnections.concat(this.getConnections_(!0)),t.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else t.draggingConnections=[],t.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)},t.BlockSvg.prototype.setMovable=function(e){t.BlockSvg.superClass_.setMovable.call(this,e),this.pathObject.updateMovable(e)},t.BlockSvg.prototype.setEditable=function(e){t.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var n=0;n<e.length;n++)e[n].updateEditable()},t.BlockSvg.prototype.setShadow=function(e){t.BlockSvg.superClass_.setShadow.call(this,e),this.applyColour()},t.BlockSvg.prototype.setInsertionMarker=function(e){this.isInsertionMarker_!=e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},t.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.BlockSvg.prototype.dispose=function(e,n){if(this.workspace){t.Tooltip.dispose(),t.Tooltip.unbindMouseEvents(this.pathObject.svgPath),t.utils.dom.startTextWidthCache();var a=this.workspace;if(t.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),t.ContextMenu.currentBlock==this&&t.ContextMenu.hide(),n&&this.rendered&&(this.unplug(e),t.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var f in this.warningTextDb_)clearTimeout(this.warningTextDb_[f]);this.warningTextDb_=null}for(n=this.getIcons(),f=0;f<n.length;f++)n[f].dispose();t.BlockSvg.superClass_.dispose.call(this,!!e),t.utils.dom.removeNode(this.svgGroup_),a.resizeContents(),this.svgGroup_=null,t.utils.dom.stopTextWidthCache()}},t.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var e=t.Xml.blockToDom(this,!0);t.Xml.deleteNext(e);var n=this.getRelativeToSurfaceXY();return e.setAttribute("x",this.RTL?-n.x:n.x),e.setAttribute("y",n.y),{xml:e,source:this.workspace,typeCounts:t.utils.getBlockTypeCounts(this,!0)}},t.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var e=this.getIcons(),n=0;n<e.length;n++)e[n].applyColour();for(e=0;n=this.inputList[e];e++)for(var f,a=0;f=n.fieldRow[a];a++)f.applyColour()},t.BlockSvg.prototype.updateDisabled=function(){var e=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var a,n=0;a=e[n];n++)a.rendered&&a.updateDisabled()},t.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},t.BlockSvg.prototype.setCommentText=function(e){if(!t.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(t.BlockSvg.superClass_.setCommentText.call(this,e),!!this.commentIcon_==(e=null!=e)?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new t.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},t.BlockSvg.prototype.setWarningText=function(e,n){if(!t.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var a=n||"";if(a)this.warningTextDb_[a]&&(clearTimeout(this.warningTextDb_[a]),delete this.warningTextDb_[a]);else for(var f in this.warningTextDb_)clearTimeout(this.warningTextDb_[f]),delete this.warningTextDb_[f];if(this.workspace.isDragging()){var E=this;this.warningTextDb_[a]=setTimeout(function(){E.workspace&&(delete E.warningTextDb_[a],E.setWarningText(e,a))},100)}else{if(this.isInFlyout&&(e=null),n=!1,"string"==typeof e){f=this.getSurroundParent();for(var I=null;f;)f.isCollapsed()&&(I=f),f=f.getSurroundParent();I&&I.setWarningText(t.Msg.COLLAPSED_WARNINGS_WARNING,t.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new t.Warning(this),n=!0),this.warning.setText(e,a)}else this.warning&&!a?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",a),(f=this.warning.getText())||this.warning.dispose(),n=n!=f);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},t.BlockSvg.prototype.setMutator=function(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&(e.setBlock(this),this.mutator=e,e.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},t.BlockSvg.prototype.setHighlighted=function(e){this.rendered&&this.pathObject.updateHighlighted(e)},t.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},t.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},t.BlockSvg.prototype.setDeleteStyle=function(e){this.pathObject.updateDraggingDelete(e)},t.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},t.BlockSvg.prototype.setColour=function(e){t.BlockSvg.superClass_.setColour.call(this,e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()},t.BlockSvg.prototype.setStyle=function(e){var n=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,!n)throw Error("Invalid style name: "+e);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},t.BlockSvg.prototype.bringToFront=function(){var e=this;do{var n=e.getSvgRoot(),a=n.parentNode,f=a.childNodes;f[f.length-1]!==n&&a.appendChild(n),e=e.getParent()}while(e)},t.BlockSvg.prototype.setPreviousStatement=function(e,n){t.BlockSvg.superClass_.setPreviousStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setNextStatement=function(e,n){t.BlockSvg.superClass_.setNextStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setOutput=function(e,n){t.BlockSvg.superClass_.setOutput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setInputsInline=function(e){t.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.removeInput=function(e,n){return e=t.BlockSvg.superClass_.removeInput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.moveNumberedInputBefore=function(e,n){t.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.appendInput_=function(e,n){return e=t.BlockSvg.superClass_.appendInput_.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.setConnectionTracking=function(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(e)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var a=this.inputList[n].connection;a&&(a.setTracking(e),(a=a.targetBlock())&&a.setConnectionTracking(e))}},t.BlockSvg.prototype.getConnections_=function(e){var n=[];if((e||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_)){e=0;for(var a;a=this.inputList[e];e++)a.connection&&n.push(a.connection)}return n},t.BlockSvg.prototype.lastConnectionInStack=function(e){return t.BlockSvg.superClass_.lastConnectionInStack.call(this,e)},t.BlockSvg.prototype.getMatchingConnection=function(e,n){return t.BlockSvg.superClass_.getMatchingConnection.call(this,e,n)},t.BlockSvg.prototype.makeConnection_=function(e){return new t.RenderedConnection(this,e)},t.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var f,n=this.getConnections_(!1),a=0;f=n[a];a++){f.isConnected()&&f.isSuperior()&&f.targetBlock().bumpNeighbours();for(var Y,E=f.neighbours(t.SNAP_RADIUS),I=0;Y=E[I];I++)f.isConnected()&&Y.isConnected()||Y.getSourceBlock().getRootBlock()!=e&&(f.isSuperior()?Y.bumpAwayFrom(f):f.bumpAwayFrom(Y))}}},t.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,n=t.Events.getGroup();setTimeout(function(){t.Events.setGroup(n),e.snapToGrid(),t.Events.setGroup(!1)},t.BUMP_DELAY/2),setTimeout(function(){t.Events.setGroup(n),e.bumpNeighbours(),t.Events.setGroup(!1)},t.BUMP_DELAY)},t.BlockSvg.prototype.positionNearConnection=function(e,n){e.type!=t.connectionTypes.NEXT_STATEMENT&&e.type!=t.connectionTypes.INPUT_VALUE||this.moveBy(n.x-e.x,n.y-e.y)},t.BlockSvg.prototype.getParent=function(){return t.BlockSvg.superClass_.getParent.call(this)},t.BlockSvg.prototype.getRootBlock=function(){return t.BlockSvg.superClass_.getRootBlock.call(this)},t.BlockSvg.prototype.render=function(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,t.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}t.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},t.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.BlockSvg.prototype.updateConnectionLocations_=function(){var e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(var n=0;n<this.inputList.length;n++){var a=this.inputList[n].connection;a&&(a.moveToOffset(e),a.isConnected()&&a.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten())},t.BlockSvg.prototype.setCursorSvg=function(e){this.pathObject.setCursorSvg(e)},t.BlockSvg.prototype.setMarkerSvg=function(e){this.pathObject.setMarkerSvg(e)},t.BlockSvg.prototype.getHeightWidth=function(){var e=this.height,n=this.width,a=this.getNextBlock();if(a){a=a.getHeightWidth();var f=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=a.height-f,n=Math.max(n,a.width)}return{height:e,width:n}},t.BlockSvg.prototype.fadeForReplacement=function(e){this.pathObject.updateReplacementFade(e)},t.BlockSvg.prototype.highlightShapeForInput=function(e,n){this.pathObject.updateShapeForInputHighlight(e,n)},t.ConnectionDB=function(e){this.connections_=[],this.connectionChecker_=e},t.ConnectionDB.prototype.addConnection=function(e,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,e)},t.ConnectionDB.prototype.findIndexOfConnection_=function(e,n){if(!this.connections_.length)return-1;var a=this.calculateIndexForYPos_(n);if(a>=this.connections_.length)return-1;n=e.y;for(var f=a;0<=f&&this.connections_[f].y==n;){if(this.connections_[f]==e)return f;f--}for(f=a;f<this.connections_.length&&this.connections_[f].y==n;){if(this.connections_[f]==e)return f;f++}return-1},t.ConnectionDB.prototype.calculateIndexForYPos_=function(e){if(!this.connections_.length)return 0;for(var n=0,a=this.connections_.length;n<a;){var f=Math.floor((n+a)/2);if(this.connections_[f].y<e)n=f+1;else{if(!(this.connections_[f].y>e)){n=f;break}a=f}}return n},t.ConnectionDB.prototype.removeConnection=function(e,n){if(-1==(e=this.findIndexOfConnection_(e,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(e,1)},t.ConnectionDB.prototype.getNeighbours=function(e,n){function a(De){var Ae=E-f[De].x,Je=I-f[De].y;return Math.sqrt(Ae*Ae+Je*Je)<=n&&_e.push(f[De]),Je<n}var f=this.connections_,E=e.x,I=e.y;e=0;for(var Y=f.length-2,ee=Y;e<ee;)f[ee].y<I?e=ee:Y=ee,ee=Math.floor((e+Y)/2);var _e=[];if(Y=e=ee,f.length){for(;0<=e&&a(e);)e--;do{Y++}while(Y<f.length&&a(Y))}return _e},t.ConnectionDB.prototype.isInYRange_=function(e,n,a){return Math.abs(this.connections_[e].y-n)<=a},t.ConnectionDB.prototype.searchForClosest=function(e,n,a){if(!this.connections_.length)return{connection:null,radius:n};var f=e.y,E=e.x;e.x=E+a.x,e.y=f+a.y;var I=this.calculateIndexForYPos_(e.y);a=null;for(var ee,Y=n,_e=I-1;0<=_e&&this.isInYRange_(_e,e.y,n);)this.connectionChecker_.canConnect(e,ee=this.connections_[_e],!0,Y)&&(a=ee,Y=ee.distanceFrom(e)),_e--;for(;I<this.connections_.length&&this.isInYRange_(I,e.y,n);)this.connectionChecker_.canConnect(e,ee=this.connections_[I],!0,Y)&&(a=ee,Y=ee.distanceFrom(e)),I++;return e.x=E,e.y=f,{connection:a,radius:Y}},t.ConnectionDB.init=function(e){var n=[];return n[t.connectionTypes.INPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.OUTPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.NEXT_STATEMENT]=new t.ConnectionDB(e),n[t.connectionTypes.PREVIOUS_STATEMENT]=new t.ConnectionDB(e),n},t.Events.ThemeChange=function(e,n){t.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=e},t.utils.object.inherits(t.Events.ThemeChange,t.Events.UiBase),t.Events.ThemeChange.prototype.type=t.Events.THEME_CHANGE,t.Events.ThemeChange.prototype.toJson=function(){var e=t.Events.ThemeChange.superClass_.toJson.call(this);return e.themeName=this.themeName,e},t.Events.ThemeChange.prototype.fromJson=function(e){t.Events.ThemeChange.superClass_.fromJson.call(this,e),this.themeName=e.themeName},t.registry.register(t.registry.Type.EVENT,t.Events.THEME_CHANGE,t.Events.ThemeChange),t.Events.ViewportChange=function(e,n,a,f,E){t.Events.ViewportChange.superClass_.constructor.call(this,f),this.viewTop=e,this.viewLeft=n,this.scale=a,this.oldScale=E},t.utils.object.inherits(t.Events.ViewportChange,t.Events.UiBase),t.Events.ViewportChange.prototype.type=t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange.prototype.toJson=function(){var e=t.Events.ViewportChange.superClass_.toJson.call(this);return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e},t.Events.ViewportChange.prototype.fromJson=function(e){t.Events.ViewportChange.superClass_.fromJson.call(this,e),this.viewTop=e.viewTop,this.viewLeft=e.viewLeft,this.scale=e.scale,this.oldScale=e.oldScale},t.registry.register(t.registry.Type.EVENT,t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange),t.IMetricsManager=function(){},t.MetricsManager=function(e){this.workspace_=e},t.MetricsManager.prototype.getDimensionsPx_=function(e){var n=0,a=0;return e&&(n=e.getWidth(),a=e.getHeight()),new t.utils.Size(n,a)},t.MetricsManager.prototype.getFlyoutMetrics=function(e){return{width:(e=this.getDimensionsPx_(this.workspace_.getFlyout(e))).width,height:e.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getToolboxMetrics=function(){var e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},t.MetricsManager.prototype.getAbsoluteMetrics=function(){var e=0,n=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),f=!!this.workspace_.getToolbox(),E=!!this.workspace_.getFlyout(!0),I=f?n.position:a.position,Y=I==t.utils.toolbox.Position.LEFT;return I=I==t.utils.toolbox.Position.TOP,f&&Y?e=n.width:E&&Y&&(e=a.width),Y=0,f&&I?Y=n.height:E&&I&&(Y=a.height),{top:Y,left:e}},t.MetricsManager.prototype.getViewMetrics=function(e){e=e?this.workspace_.scale:1;var n=this.getSvgMetrics(),a=this.getToolboxMetrics(),f=this.getFlyoutMetrics(!0),E=this.workspace_.getToolbox()?a.position:f.position;return this.workspace_.getToolbox()?E==t.utils.toolbox.Position.TOP||E==t.utils.toolbox.Position.BOTTOM?n.height-=a.height:(E==t.utils.toolbox.Position.LEFT||E==t.utils.toolbox.Position.RIGHT)&&(n.width-=a.width):this.workspace_.getFlyout(!0)&&(E==t.utils.toolbox.Position.TOP||E==t.utils.toolbox.Position.BOTTOM?n.height-=f.height:(E==t.utils.toolbox.Position.LEFT||E==t.utils.toolbox.Position.RIGHT)&&(n.width-=f.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}},t.MetricsManager.prototype.getContentMetrics=function(e){e=e?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*e,width:(n.right-n.left)*e,top:n.top*e,left:n.left*e}},t.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},t.MetricsManager.prototype.getComputedFixedEdges_=function(e){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),a=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);var f={};return a||(f.top=e.top,f.bottom=e.top+e.height),n||(f.left=e.left,f.right=e.left+e.width),f},t.MetricsManager.prototype.getPaddedContent_=function(e,n){var a=n.top+n.height,f=n.left+n.width,E=e.width,I=E/2,Y=(e=e.height)/2;return{top:Math.min(n.top-Y,a-e),bottom:Math.max(a+Y,n.top+e),left:Math.min(n.left-I,f-E),right:Math.max(f+I,n.left+E)}},t.MetricsManager.prototype.getScrollMetrics=function(e,n,a){e=e?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var f=a||this.getContentMetrics();a=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,f);var E=void 0!==a.left?a.left:n.left;return{top:(f=void 0!==a.top?a.top:n.top)/e,left:E/e,width:((void 0!==a.right?a.right:n.right)-E)/e,height:((void 0!==a.bottom?a.bottom:n.bottom)-f)/e}},t.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},t.MetricsManager.prototype.getMetrics=function(){var e=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),a=this.getSvgMetrics(),f=this.getAbsoluteMetrics(),E=this.getViewMetrics(),I=this.getContentMetrics(),Y=this.getScrollMetrics(!1,E,I);return{contentHeight:I.height,contentWidth:I.width,contentTop:I.top,contentLeft:I.left,scrollHeight:Y.height,scrollWidth:Y.width,scrollTop:Y.top,scrollLeft:Y.left,viewHeight:E.height,viewWidth:E.width,viewTop:E.top,viewLeft:E.left,absoluteTop:f.top,absoluteLeft:f.left,svgHeight:a.height,svgWidth:a.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:n.width,flyoutHeight:n.height}},t.registry.register(t.registry.Type.METRICS_MANAGER,t.registry.DEFAULT,t.MetricsManager),t.FlyoutMetricsManager=function(e,n){this.flyout_=n,t.FlyoutMetricsManager.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.FlyoutMetricsManager,t.MetricsManager),t.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var e=this.workspace_.getCanvas().getBBox()}catch(n){e={height:0,y:0,width:0,x:0}}return e},t.FlyoutMetricsManager.prototype.getContentMetrics=function(e){var n=this.getBoundingBox_();return{height:n.height*(e=e?1:this.workspace_.scale),width:n.width*e,top:n.y*e,left:n.x*e}},t.FlyoutMetricsManager.prototype.getScrollMetrics=function(e,n,a){return{height:((n=a||this.getContentMetrics()).height+2*(a=this.flyout_.MARGIN*this.workspace_.scale))/(e=e?this.workspace_.scale:1),width:(n.width+n.left+a)/e,top:0,left:0}},t.ThemeManager=function(e,n){this.workspace_=e,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},t.ThemeManager.prototype.getTheme=function(){return this.theme_},t.ThemeManager.prototype.setTheme=function(e){var a,n=this.theme_;for(this.theme_=e,(e=this.workspace_.getInjectionDiv())&&(n&&t.utils.dom.removeClass(e,n.getClassName()),t.utils.dom.addClass(e,this.theme_.getClassName())),n=0;e=this.subscribedWorkspaces_[n];n++)e.refreshTheme();for(n=0,e=Object.keys(this.componentDB_);a=e[n];n++)for(var E,f=0;E=this.componentDB_[a][f];f++){var I=E.element;E=E.propertyName;var Y=this.theme_&&this.theme_.getComponentStyle(a);I.style[E]=Y||""}t.hideChaff()},t.ThemeManager.prototype.subscribeWorkspace=function(e){this.subscribedWorkspaces_.push(e)},t.ThemeManager.prototype.unsubscribeWorkspace=function(e){if(0>(e=this.subscribedWorkspaces_.indexOf(e)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(e,1)},t.ThemeManager.prototype.subscribe=function(e,n,a){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:e,propertyName:a}),n=this.theme_&&this.theme_.getComponentStyle(n),e.style[a]=n||""},t.ThemeManager.prototype.unsubscribe=function(e){if(e)for(var f,n=Object.keys(this.componentDB_),a=0;f=n[a];a++){for(var E=this.componentDB_[f],I=E.length-1;0<=I;I--)E[I].element===e&&E.splice(I,1);this.componentDB_[f].length||delete this.componentDB_[f]}},t.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},t.TouchGesture=function(e,n){t.TouchGesture.superClass_.constructor.call(this,e,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},t.utils.object.inherits(t.TouchGesture,t.Gesture),t.TouchGesture.ZOOM_IN_MULTIPLIER=5,t.TouchGesture.ZOOM_OUT_MULTIPLIER=6,t.TouchGesture.prototype.doStart=function(e){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,t.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&t.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},t.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=t.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},t.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&t.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&t.longStop_())},t.TouchGesture.prototype.handleMove=function(e){this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(t.Touch.isTouchEvent(e)&&this.handleTouchMove(e),t.longStop_()):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handleUp=function(e){t.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},t.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},t.TouchGesture.prototype.dispose=function(){t.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&t.browserEvents.unbind(this.onStartWrapper_)},t.TouchGesture.prototype.handleTouchStart=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,e.preventDefault())},t.TouchGesture.prototype.handleTouchMove=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(e):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handlePinch_=function(e){var n=Object.keys(this.cachedPoints_);if(n=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var a=n-this.previousScale_;a=0<a?a*t.TouchGesture.ZOOM_IN_MULTIPLIER:a*t.TouchGesture.ZOOM_OUT_MULTIPLIER;var f=this.startWorkspace_,E=t.utils.mouseToSvg(e,f.getParentSvg(),f.getInverseScreenCTM());f.zoom(E.x,E.y,a)}this.previousScale_=n,e.preventDefault()},t.TouchGesture.prototype.handleTouchEnd=function(e){e=t.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},t.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new t.utils.Coordinate(e.pageX?e.pageX:e.changedTouches[0].pageX,e.pageY?e.pageY:e.changedTouches[0].pageY):null},t.WorkspaceAudio=function(e){this.parentWorkspace_=e,this.SOUNDS_=Object.create(null)},t.WorkspaceAudio.prototype.lastSound_=null,t.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},t.WorkspaceAudio.prototype.load=function(e,n){if(e.length){try{var a=new t.utils.global.Audio}catch(ee){return}for(var f,E=0;E<e.length;E++){var I=e[E],Y=I.match(/\.(\w+)$/);if(Y&&a.canPlayType("audio/"+Y[1])){f=new t.utils.global.Audio(I);break}}f&&f.play&&(this.SOUNDS_[n]=f)}},t.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var n=this.SOUNDS_[e];n.volume=.01;var a=n.play();if(void 0!==a?a.then(n.pause).catch(function(){}):n.pause(),t.utils.userAgent.IPAD||t.utils.userAgent.IPHONE)break}},t.WorkspaceAudio.prototype.play=function(e,n){var a=this.SOUNDS_[e];a?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<t.SOUND_LIMIT||(this.lastSound_=e,(a=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID?a:a.cloneNode()).volume=void 0===n?1:n,a.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,n)},t.WorkspaceSvg=function(e,n,a){t.WorkspaceSvg.superClass_.constructor.call(this,e),this.metricsManager_=new(t.registry.getClassFromOptions(t.registry.Type.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=e.setMetrics||t.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new t.ComponentManager,this.connectionDBList=t.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),a&&(this.workspaceDragSurface_=a),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&t.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new t.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new t.Grid(this.options.gridPattern,e.gridOptions):null,this.markerManager_=new t.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),t.Variables&&t.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_CATEGORY_NAME,t.Variables.flyoutCategory),t.VariablesDynamic&&t.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_DYNAMIC_CATEGORY_NAME,t.VariablesDynamic.flyoutCategory),t.Procedures&&t.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(t.PROCEDURE_CATEGORY_NAME,t.Procedures.flyoutCategory),this.addChangeListener(t.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new t.ThemeManager(this,this.options.theme||t.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=t.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new t.utils.Size(0,0)},t.utils.object.inherits(t.WorkspaceSvg,t.Workspace),t.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,t.WorkspaceSvg.prototype.rendered=!0,t.WorkspaceSvg.prototype.isVisible_=!0,t.WorkspaceSvg.prototype.isFlyout=!1,t.WorkspaceSvg.prototype.isMutator=!1,t.WorkspaceSvg.prototype.resizesEnabled_=!0,t.WorkspaceSvg.prototype.scrollX=0,t.WorkspaceSvg.prototype.scrollY=0,t.WorkspaceSvg.prototype.startScrollX=0,t.WorkspaceSvg.prototype.startScrollY=0,t.WorkspaceSvg.prototype.dragDeltaXY_=null,t.WorkspaceSvg.prototype.scale=1,t.WorkspaceSvg.prototype.oldScale_=1,t.WorkspaceSvg.prototype.oldTop_=0,t.WorkspaceSvg.prototype.oldLeft_=0,t.WorkspaceSvg.prototype.trashcan=null,t.WorkspaceSvg.prototype.scrollbar=null,t.WorkspaceSvg.prototype.flyout_=null,t.WorkspaceSvg.prototype.toolbox_=null,t.WorkspaceSvg.prototype.currentGesture_=null,t.WorkspaceSvg.prototype.blockDragSurface_=null,t.WorkspaceSvg.prototype.workspaceDragSurface_=null,t.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,t.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,t.WorkspaceSvg.prototype.injectionDiv_=null,t.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,t.WorkspaceSvg.prototype.targetWorkspace=null,t.WorkspaceSvg.prototype.inverseScreenCTM_=null,t.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,t.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},t.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},t.WorkspaceSvg.prototype.setMetricsManager=function(e){this.metricsManager_=e,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},t.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},t.WorkspaceSvg.prototype.setCursorSvg=function(e){this.markerManager_.setCursorSvg(e)},t.WorkspaceSvg.prototype.setMarkerSvg=function(e){this.markerManager_.setMarkerSvg(e)},t.WorkspaceSvg.prototype.getMarker=function(e){return this.markerManager_?this.markerManager_.getMarker(e):null},t.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},t.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},t.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},t.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},t.WorkspaceSvg.prototype.setTheme=function(e){e||(e=t.Themes.Classic),this.themeManager_.setTheme(e)},t.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var e=new(t.Events.get(t.Events.THEME_CHANGE))(this.getTheme().name,this.id);t.Events.fire(e)},t.WorkspaceSvg.prototype.updateBlockStyles_=function(e){for(var a,n=0;a=e[n];n++){var f=a.getStyleName();f&&(a.setStyle(f),a.mutator&&a.mutator.updateBlockStyle())}},t.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM_=e.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},t.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},t.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},t.WorkspaceSvg.prototype.getSvgXY=function(e){var n=0,a=0,f=1;(t.utils.dom.containsNode(this.getCanvas(),e)||t.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(f=this.scale);do{var E=t.utils.getRelativeXY(e);(e==this.getCanvas()||e==this.getBubbleCanvas())&&(f=1),n+=E.x*f,a+=E.y*f,e=e.parentNode}while(e&&e!=this.getParentSvg());return new t.utils.Coordinate(n,a)},t.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var e=this.cachedParentSvgSize_;return new t.utils.Size(e.width,e.height)},t.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return t.utils.getInjectionDivXY_(this.getCanvas())},t.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var e=this.svgGroup_;e;){if(-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=e;break}e=e.parentNode}return this.injectionDiv_},t.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(e){this.resizeHandlerWrapper_=e},t.WorkspaceSvg.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(t.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(t.registry.getClassFromOptions(t.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(e=t.registry.getClassFromOptions(t.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new e),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},t.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),t.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var e=this.getParentSvg();e&&e.parentNode&&t.utils.dom.removeNode(e.parentNode)}this.resizeHandlerWrapper_&&(t.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},t.WorkspaceSvg.prototype.newBlock=function(e,n){return new t.BlockSvg(this,e,n)},t.WorkspaceSvg.prototype.addTrashcan=function(){if(!t.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new t.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)},t.WorkspaceSvg.prototype.addZoomControls=function(){if(!t.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new t.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)},t.WorkspaceSvg.prototype.addFlyout=function(e){var n=new t.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(e)},t.WorkspaceSvg.prototype.getFlyout=function(e){return this.flyout_||e?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},t.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},t.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},t.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},t.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var E,e=this.componentManager_.getComponents(t.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),a=[],f=0;E=e[f];f++)E.position(n,a),(E=E.getBoundingRectangle())&&a.push(E);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},t.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=t.utils.getDocumentScroll();t.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},t.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setCachedParentSvgSize=function(e,n){var a=this.getParentSvg();e&&(this.cachedParentSvgSize_.width=e,a.cachedWidth_=e),n&&(this.cachedParentSvgSize_.height=n,a.cachedHeight_=n)},t.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},t.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var e=this.svgGroup_;e;){if("svg"==e.tagName){this.cachedParentSvg_=e;break}e=e.parentNode}return this.cachedParentSvg_},t.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(t.Events.isEnabled()){var e=this.scale,n=-this.scrollY,a=-this.scrollX;if(!(e==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(a-this.oldLeft_))){var f=new(t.Events.get(t.Events.VIEWPORT_CHANGE))(n,a,e,this.id,this.oldScale_);this.oldScale_=e,this.oldTop_=n,this.oldLeft_=a,t.Events.fire(f)}}},t.WorkspaceSvg.prototype.translate=function(e,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(e,n);else{var a="translate("+e+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",a),this.svgBubbleCanvas_.setAttribute("transform",a)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(e,n,this.scale),this.grid_&&this.grid_.moveTo(e,n),this.maybeFireViewportChangeEvent()},t.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var e=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",e="translate("+e.x+","+e.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",e)}},t.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),a=parseInt(this.getParentSvg().getAttribute("height"),10),f=t.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,n,a,this.scale),this.workspaceDragSurface_.translateSurface(f.x,f.y)}},t.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},t.WorkspaceSvg.prototype.getWidth=function(){var e=this.getMetrics();return e?e.viewWidth/this.scale:0},t.WorkspaceSvg.prototype.setVisible=function(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(var n=(e=this.getAllBlocks(!1)).length-1;0<=n;n--)e[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else t.hideChaff(!0)},t.WorkspaceSvg.prototype.render=function(){for(var e=this.getAllBlocks(!1),n=e.length-1;0<=n;n--)e[n].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),n=0;n<e.length;n++)e[n].render(!1);this.markerManager_.updateMarkers()},t.WorkspaceSvg.prototype.highlightBlock=function(e,n){if(void 0===n){for(var f,a=0;f=this.highlightedBlocks_[a];a++)f.setHighlighted(!1);this.highlightedBlocks_.length=0}(f=e?this.getBlockById(e):null)&&((e=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(f)&&this.highlightedBlocks_.push(f):t.utils.arrayRemove(this.highlightedBlocks_,f),f.setHighlighted(e))},t.WorkspaceSvg.prototype.paste=function(e){!this.rendered||!e.tagName||e.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e))},t.WorkspaceSvg.prototype.pasteBlock_=function(e){t.Events.disable();try{var n=t.Xml.domToBlock(e,this),a=parseInt(e.getAttribute("x"),10),f=parseInt(e.getAttribute("y"),10);if(!isNaN(a)&&!isNaN(f)){this.RTL&&(a=-a);do{e=!1;for(var Y,E=this.getAllBlocks(!1),I=0;Y=E[I];I++){var ee=Y.getRelativeToSurfaceXY();if(1>=Math.abs(a-ee.x)&&1>=Math.abs(f-ee.y)){e=!0;break}}if(!e){var De,_e=n.getConnections_(!1);for(I=0;De=_e[I];I++)if(De.closest(t.SNAP_RADIUS,new t.utils.Coordinate(a,f)).connection){e=!0;break}}e&&(a=this.RTL?a-t.SNAP_RADIUS:a+t.SNAP_RADIUS,f+=2*t.SNAP_RADIUS)}while(e);n.moveBy(a,f)}}finally{t.Events.enable()}t.Events.isEnabled()&&!n.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n)),n.select()},t.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){t.Events.disable();try{var n=t.WorkspaceCommentSvg.fromXml(e,this),a=parseInt(e.getAttribute("x"),10),f=parseInt(e.getAttribute("y"),10);isNaN(a)||isNaN(f)||(this.RTL&&(a=-a),n.moveBy(a+50,f+50))}finally{t.Events.enable()}t.Events.isEnabled()&&t.WorkspaceComment.fireCreateEvent(n),n.select()},t.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()},t.WorkspaceSvg.prototype.renameVariableById=function(e,n){t.WorkspaceSvg.superClass_.renameVariableById.call(this,e,n),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.deleteVariableById=function(e){t.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.createVariable=function(e,n,a){return e=t.WorkspaceSvg.superClass_.createVariable.call(this,e,n,a),this.refreshToolboxSelection(),e},t.WorkspaceSvg.prototype.recordDeleteAreas=function(){t.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},t.WorkspaceSvg.prototype.recordDragTargets=function(){var e=this.componentManager_.getComponents(t.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var a,n=0;a=e[n];n++){var f=a.getClientRect();f&&this.dragTargetAreas_.push({component:a,clientRect:f})}},t.WorkspaceSvg.prototype.getDragTarget=function(e){for(var a,n=0;a=this.dragTargetAreas_[n];n++)if(a.clientRect.contains(e.clientX,e.clientY))return a.component;return null},t.WorkspaceSvg.prototype.onMouseDown_=function(e){var n=this.getGesture(e);n&&n.handleWsStart(e,this)},t.WorkspaceSvg.prototype.startDrag=function(e,n){(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY_=t.utils.Coordinate.difference(n,e)},t.WorkspaceSvg.prototype.moveDrag=function(e){return(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,t.utils.Coordinate.sum(this.dragDeltaXY_,e)},t.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},t.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},t.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},t.WorkspaceSvg.prototype.isMovableHorizontally=function(){var e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())},t.WorkspaceSvg.prototype.isMovableVertically=function(){var e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())},t.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(t.Gesture.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,a=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||a){var f=t.utils.getScrollDeltaPixels(e);!n||!e.ctrlKey&&a?(n=this.scrollX-f.x,a=this.scrollY-f.y,e.shiftKey&&!f.x&&(n=this.scrollX-f.y,a=this.scrollY),this.scroll(n,a)):(f=-f.y/50,n=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,f)),e.preventDefault()}}},t.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBoundedElements();if(!e.length)return new t.utils.Rect(0,0,0,0);for(var n=e[0].getBoundingRectangle(),a=1;a<e.length;a++){var f=e[a];f.isInsertionMarker&&f.isInsertionMarker()||((f=f.getBoundingRectangle()).top<n.top&&(n.top=f.top),f.bottom>n.bottom&&(n.bottom=f.bottom),f.left<n.left&&(n.left=f.left),f.right>n.right&&(n.right=f.right))}return n},t.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),t.Events.setGroup(!0);for(var f,e=this.getTopBlocks(!0),n=0,a=0;f=e[a];a++)if(f.isMovable()){var E=f.getRelativeToSurfaceXY();f.moveBy(-E.x,n-E.y),f.snapToGrid(),n=f.getRelativeToSurfaceXY().y+f.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}t.Events.setGroup(!1),this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.showContextMenu=function(e){if(!this.options.readOnly&&!this.isFlyout){var n=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,e),t.ContextMenu.show(e,n,this.RTL)}},t.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=t.utils.toolbox.convertToolboxDefToJson(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(t.utils.toolbox.hasCategories(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout_.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},t.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(t.mainWorkspace=this,this.setBrowserFocus())},t.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(e){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},t.WorkspaceSvg.prototype.zoom=function(e,n,a){a=Math.pow(this.options.zoomOptions.scaleSpeed,a);var f=this.scale*a;if(this.scale!=f){f>this.options.zoomOptions.maxScale?a=this.options.zoomOptions.maxScale/this.scale:f<this.options.zoomOptions.minScale&&(a=this.options.zoomOptions.minScale/this.scale);var E=this.getCanvas().getCTM(),I=this.getParentSvg().createSVGPoint();I.x=e,I.y=n,I=I.matrixTransform(E.inverse()),E=E.translate((e=I.x)*(1-a),(n=I.y)*(1-a)).scale(a),this.scrollX=E.e,this.scrollY=E.f,this.setScale(f)}},t.WorkspaceSvg.prototype.zoomCenter=function(e){var n=this.getMetrics();if(this.flyout_){var a=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else a=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(a,n,e)},t.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var a=this.getBlocksBoundingBox(),f=a.right-a.left;if(a=a.bottom-a.top,f){this.flyout_&&(this.horizontalLayout?(e+=this.flyout_.getHeight(),a+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),f+=this.flyout_.getWidth()/this.scale)),n/=f,e/=a,t.Events.disable();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{t.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.beginCanvasTransition=function(){t.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.endCanvasTransition=function(){t.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var e=this.getMetrics(),n=(e.scrollWidth-e.viewWidth)/2,a=(e.scrollHeight-e.viewHeight)/2;this.scroll(n=-n-e.scrollLeft,a=-a-e.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.centerOnBlock=function(e){if(this.isMovable()){if(e=e?this.getBlockById(e):null){var n=e.getRelativeToSurfaceXY(),a=e.getHeightWidth(),f=this.scale;e=(n.x+(this.RTL?-1:1)*a.width/2)*f,n=(n.y+a.height/2)*f,a=this.getMetrics(),this.scroll(-(e-a.viewWidth/2),-(n-a.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,t.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))},t.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},t.WorkspaceSvg.prototype.scroll=function(e,n){t.hideChaff(!0);var a=this.getMetrics();e=Math.min(e,-a.scrollLeft),n=Math.min(n,-a.scrollTop);var f=a.scrollTop+Math.max(0,a.scrollHeight-a.viewHeight);e=Math.max(e,-(a.scrollLeft+Math.max(0,a.scrollWidth-a.viewWidth))),n=Math.max(n,-f),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+a.scrollLeft),-(n+a.scrollTop),!1),this.translate(e+=a.absoluteLeft,n+=a.absoluteTop)},t.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(e){var n=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*e.x)),"number"==typeof e.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*e.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},t.WorkspaceSvg.prototype.getBlockById=function(e){return t.WorkspaceSvg.superClass_.getBlockById.call(this,e)},t.WorkspaceSvg.prototype.getTopBlocks=function(e){return t.WorkspaceSvg.superClass_.getTopBlocks.call(this,e)},t.WorkspaceSvg.prototype.addTopBlock=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopBlock.call(this,e)},t.WorkspaceSvg.prototype.removeTopBlock=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopBlock.call(this,e)},t.WorkspaceSvg.prototype.addTopComment=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopComment.call(this,e)},t.WorkspaceSvg.prototype.removeTopComment=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopComment.call(this,e)},t.WorkspaceSvg.prototype.addTopBoundedElement=function(e){this.topBoundedElements_.push(e)},t.WorkspaceSvg.prototype.removeTopBoundedElement=function(e){t.utils.arrayRemove(this.topBoundedElements_,e)},t.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},t.WorkspaceSvg.prototype.setResizesEnabled=function(e){var n=!this.resizesEnabled_&&e;this.resizesEnabled_=e,n&&this.resizeContents()},t.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),t.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.registerButtonCallback=function(e,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[e]=n},t.WorkspaceSvg.prototype.getButtonCallback=function(e){return(e=this.flyoutButtonCallbacks_[e])?e:null},t.WorkspaceSvg.prototype.removeButtonCallback=function(e){this.flyoutButtonCallbacks_[e]=null},t.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(e,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[e]=n},t.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(e){return this.toolboxCategoryCallbacks_[e]||null},t.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(e){this.toolboxCategoryCallbacks_[e]=null},t.WorkspaceSvg.prototype.getGesture=function(e){var n="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,a=this.currentGesture_;return a?n&&a.hasStarted()?(console.warn("Tried to start the same gesture twice."),a.cancel(),null):a:n?this.currentGesture_=new t.TouchGesture(e,this):null},t.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},t.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},t.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},t.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},t.inject=function(e,n){if(t.checkBlockColourConstants(),"string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!t.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");n=new t.Options(n||{});var a=document.createElement("div");a.className="injectionDiv",a.tabIndex=0,t.utils.aria.setState(a,t.utils.aria.State.LABEL,t.Msg.WORKSPACE_ARIA_LABEL),e.appendChild(a),e=t.createDom_(a,n);var f=new t.BlockDragSurfaceSvg(a),E=new t.WorkspaceDragSurfaceSvg(a),I=t.createMainWorkspace_(e,n,f,E);return t.init_(I),t.mainWorkspace=I,t.svgResize(I),a.addEventListener("focusin",function(){t.mainWorkspace=I}),I},t.createDom_=function(e,n){e.setAttribute("dir","LTR"),t.Css.inject(n.hasCss,n.pathToMedia),e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},e);var a=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),f=String(Math.random()).substring(2);return n.gridPattern=t.Grid.createDom(f,n.gridOptions,a),e},t.createMainWorkspace_=function(e,n,a,f){return n.parentWorkspace=null,(n=new t.WorkspaceSvg(n,a,f)).scale=(a=n.options).zoomOptions.startScale,e.appendChild(n.createDom("blocklyMainBackground")),t.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),t.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!a.hasCategories&&a.languageTree&&(f=n.addFlyout(t.utils.Svg.SVG),t.utils.dom.insertAfter(f,e)),a.hasTrashcan&&n.addTrashcan(),a.zoomOptions&&a.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(t.bumpIntoBoundsHandler_(n)),t.svgResize(n),t.WidgetDiv.createDom(),t.DropDownDiv.createDom(),t.Tooltip.createDom(),n},t.extractObjectFromEvent_=function(e,n){var a=null;switch(n.type){case t.Events.BLOCK_CREATE:case t.Events.BLOCK_MOVE:(a=e.getBlockById(n.blockId))&&(a=a.getRootBlock());break;case t.Events.COMMENT_CREATE:case t.Events.COMMENT_MOVE:a=e.getCommentById(n.commentId)}return a},t.bumpTopObjectsIntoBounds_=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);for(var E,a=e.getTopBoundedElements(),f=0;E=a[f];f++)t.bumpObjectIntoBounds_(e,n,E)}},t.bumpIntoBoundsHandler_=function(e){return function(n){var a=e.getMetricsManager();if(a.hasFixedEdges()&&!e.isDragging())if(-1!==t.Events.BUMP_EVENTS.indexOf(n.type)){a=a.getScrollMetrics(!0);var f=t.extractObjectFromEvent_(e,n);if(f){var E=t.Events.getGroup();t.Events.setGroup(n.group),t.bumpObjectIntoBounds_(e,a,f)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==E&&t.Events.setGroup(E)}}else n.type===t.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&t.bumpTopObjectsIntoBounds_(e)}},t.bumpObjectIntoBounds_=function(e,n,a){var f=a.getBoundingRectangle(),E=f.right-f.left,I=t.utils.math.clamp(n.top,f.top,n.top+n.height-(f.bottom-f.top))-f.top,Y=n.left;return n=n.left+n.width-E,e.RTL?Y=Math.min(n,Y):n=Math.max(Y,n),!(!(e=t.utils.math.clamp(Y,f.left,n)-f.left)&&!I||(a.moveBy(e,I),0))},t.init_=function(e){var n=e.options,a=e.getParentSvg();if(t.browserEvents.conditionalBind(a.parentNode,"contextmenu",null,function(E){t.utils.isTargetInput(E)||E.preventDefault()}),a=t.browserEvents.conditionalBind(window,"resize",null,function(){t.hideChaff(!0),t.svgResize(e),t.bumpTopObjectsIntoBounds_(e)}),e.setResizeHandlerWrapper(a),t.inject.bindDocumentEvents_(),n.languageTree){a=e.getToolbox();var f=e.getFlyout(!0);a?a.init():f&&(f.init(e),f.show(n.languageTree),"function"==typeof f.scrollToStart&&f.scrollToStart())}n.hasTrashcan&&e.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new t.ScrollbarPair(e,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&t.inject.loadSounds_(n.pathToMedia,e)},t.inject.bindDocumentEvents_=function(){t.documentEventsBound_||(t.browserEvents.conditionalBind(document,"scroll",null,function(){for(var a,e=t.Workspace.getAll(),n=0;a=e[n];n++)a.updateInverseScreenCTM&&a.updateInverseScreenCTM()}),t.browserEvents.conditionalBind(document,"keydown",null,t.onKeyDown),t.browserEvents.bind(document,"touchend",null,t.longStop_),t.browserEvents.bind(document,"touchcancel",null,t.longStop_),t.utils.userAgent.IPAD&&t.browserEvents.conditionalBind(window,"orientationchange",document,function(){t.svgResize(t.getMainWorkspace())})),t.documentEventsBound_=!0},t.inject.loadSounds_=function(e,n){var a=n.getAudioManager();a.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),a.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),a.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var f=[];e=function(){for(;f.length;)t.browserEvents.unbind(f.pop());a.preload()},f.push(t.browserEvents.conditionalBind(document,"mousemove",null,e,!0)),f.push(t.browserEvents.conditionalBind(document,"touchstart",null,e,!0))},t.Names=function(e,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),e)for(e=e.split(","),n=0;n<e.length;n++)this.reservedDict_[e[n]]=!0;this.reset()},t.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",t.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},t.Names.prototype.setVariableMap=function(e){this.variableMap_=e},t.Names.prototype.getNameForUserVariable_=function(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},t.Names.prototype.populateVariables=function(e){e=t.Variables.allUsedVarModels(e);for(var n=0;n<e.length;n++)this.getName(e[n].getId(),t.VARIABLE_CATEGORY_NAME)},t.Names.prototype.populateProcedures=function(e){e=(e=t.Procedures.allProcedures(e))[0].concat(e[1]);for(var n=0;n<e.length;n++)this.getName(e[n][0],t.PROCEDURE_CATEGORY_NAME)},t.Names.prototype.getName=function(e,n){var a=e;n==t.VARIABLE_CATEGORY_NAME&&(e=this.getNameForUserVariable_(e))&&(a=e),e=a.toLowerCase();var f=n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var E=this.db_[n];return e in E?f+E[e]:(n=this.getDistinctName(a,n),E[e]=n.substr(f.length),n)},t.Names.prototype.getUserNames=function(e){return Object.keys(this.db_[e]||{})},t.Names.prototype.getDistinctName=function(e,n){e=this.safeName_(e);for(var a="";this.dbReverse_[e+a]||e+a in this.reservedDict_;)a=a?a+1:2;return this.dbReverse_[e+=a]=!0,(n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e},t.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=t.Msg.UNNAMED_KEY||"unnamed",e},t.Names.equals=function(e,n){return e.toLowerCase()==n.toLowerCase()},t.Procedures={},t.Procedures.NAME_TYPE=t.PROCEDURE_CATEGORY_NAME,t.Procedures.DEFAULT_ARG="x",t.Procedures.allProcedures=function(e){var n=e.getBlocksByType("procedures_defnoreturn",!1).map(function(a){return a.getProcedureDef()});return e=e.getBlocksByType("procedures_defreturn",!1).map(function(a){return a.getProcedureDef()}),n.sort(t.Procedures.procTupleComparator_),e.sort(t.Procedures.procTupleComparator_),[n,e]},t.Procedures.procTupleComparator_=function(e,n){return e[0].localeCompare(n[0],void 0,{sensitivity:"base"})},t.Procedures.findLegalName=function(e,n){if(n.isInFlyout)return e;for(e=e||t.Msg.UNNAMED_KEY||"unnamed";!t.Procedures.isLegalName_(e,n.workspace,n);){var a=e.match(/^(.*?)(\d+)$/);e=a?a[1]+(parseInt(a[2],10)+1):e+"2"}return e},t.Procedures.isLegalName_=function(e,n,a){return!t.Procedures.isNameUsed(e,n,a)},t.Procedures.isNameUsed=function(e,n,a){n=n.getAllBlocks(!1);for(var f=0;f<n.length;f++)if(n[f]!=a&&n[f].getProcedureDef){var E=n[f].getProcedureDef();if(t.Names.equals(E[0],e))return!0}return!1},t.Procedures.rename=function(e){e=e.trim();var n=t.Procedures.findLegalName(e,this.getSourceBlock()),a=this.getValue();if(a!=e&&a!=n){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var f=0;f<e.length;f++)e[f].renameProcedure&&e[f].renameProcedure(a,n)}return n},t.Procedures.flyoutCategory=function(e){function n(I,Y){for(var ee=0;ee<I.length;ee++){var _e=I[ee][0],De=I[ee][1],Ae=t.utils.xml.createElement("block");Ae.setAttribute("type",Y),Ae.setAttribute("gap",16);var Je=t.utils.xml.createElement("mutation");for(Je.setAttribute("name",_e),Ae.appendChild(Je),_e=0;_e<De.length;_e++){var st=t.utils.xml.createElement("arg");st.setAttribute("name",De[_e]),Je.appendChild(st)}a.push(Ae)}}var a=[];if(t.Blocks.procedures_defnoreturn){var f=t.utils.xml.createElement("block");f.setAttribute("type","procedures_defnoreturn"),f.setAttribute("gap",16);var E=t.utils.xml.createElement("field");E.setAttribute("name","NAME"),E.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),f.appendChild(E),a.push(f)}return t.Blocks.procedures_defreturn&&((f=t.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),f.setAttribute("gap",16),(E=t.utils.xml.createElement("field")).setAttribute("name","NAME"),E.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),f.appendChild(E),a.push(f)),t.Blocks.procedures_ifreturn&&((f=t.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),f.setAttribute("gap",16),a.push(f)),a.length&&a[a.length-1].setAttribute("gap",24),n((e=t.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),a},t.Procedures.updateMutatorFlyout_=function(e){for(var E,n=[],a=e.getBlocksByType("procedures_mutatorarg",!1),f=0;E=a[f];f++)n.push(E.getFieldValue("NAME"));a=t.utils.xml.createElement("xml"),(f=t.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(E=t.utils.xml.createElement("field")).setAttribute("name","NAME"),n=t.Variables.generateUniqueNameFromOptions(t.Procedures.DEFAULT_ARG,n),n=t.utils.xml.createTextNode(n),E.appendChild(n),f.appendChild(E),a.appendChild(f),e.updateToolbox(a)},t.Procedures.mutatorOpenListener=function(e){if(e.type==t.Events.BUBBLE_OPEN&&"mutator"===e.bubbleType&&e.isOpen){var n=(e=t.Workspace.getById(e.workspaceId).getBlockById(e.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(e=e.mutator.getWorkspace(),t.Procedures.updateMutatorFlyout_(e),e.addChangeListener(t.Procedures.mutatorChangeListener_))}},t.Procedures.mutatorChangeListener_=function(e){(e.type==t.Events.BLOCK_CREATE||e.type==t.Events.BLOCK_DELETE||e.type==t.Events.BLOCK_CHANGE)&&(e=t.Workspace.getById(e.workspaceId),t.Procedures.updateMutatorFlyout_(e))},t.Procedures.getCallers=function(e,n){var a=[];n=n.getAllBlocks(!1);for(var f=0;f<n.length;f++)if(n[f].getProcedureCall){var E=n[f].getProcedureCall();E&&t.Names.equals(E,e)&&a.push(n[f])}return a},t.Procedures.mutateCallers=function(e){var E,n=t.Events.recordUndo,a=e.getProcedureDef()[0],f=e.mutationToDom(!0);for(e=t.Procedures.getCallers(a,e.workspace),a=0;E=e[a];a++){var I=E.mutationToDom();I=I&&t.Xml.domToText(I),E.domToMutation(f);var Y=E.mutationToDom();I!=(Y=Y&&t.Xml.domToText(Y))&&(t.Events.recordUndo=!1,t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(E,"mutation",null,I,Y)),t.Events.recordUndo=n)}},t.Procedures.getDefinition=function(e,n){n=n.getAllBlocks(!1);for(var a=0;a<n.length;a++)if(n[a].getProcedureDef){var f=n[a].getProcedureDef();if(f&&t.Names.equals(f[0],e))return n[a]}return null},t.ShortcutRegistry=function(){t.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},t.ShortcutRegistry.modifierKeys={Shift:t.utils.KeyCodes.SHIFT,Control:t.utils.KeyCodes.CTRL,Alt:t.utils.KeyCodes.ALT,Meta:t.utils.KeyCodes.META},t.ShortcutRegistry.prototype.register=function(e,n){if(this.registry_[e.name]&&!n)throw Error('Shortcut with name "'+e.name+'" already exists.');this.registry_[e.name]=e},t.ShortcutRegistry.prototype.unregister=function(e){return this.registry_[e]?(this.removeAllKeyMappings(e),delete this.registry_[e],!0):(console.warn('Keyboard shortcut with name "'+e+'" not found.'),!1)},t.ShortcutRegistry.prototype.addKeyMapping=function(e,n,a){e=String(e);var f=this.keyMap_[e];if(f&&!a)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+f.toString());f&&a?f.unshift(n):this.keyMap_[e]=[n]},t.ShortcutRegistry.prototype.removeKeyMapping=function(e,n,a){var f=this.keyMap_[e];if(!f&&!a)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+e+'"'),!1;var E=f.indexOf(n);return-1<E?(f.splice(E,1),0==f.length&&delete this.keyMap_[e],!0):(a||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+e+'"'),!1)},t.ShortcutRegistry.prototype.removeAllKeyMappings=function(e){for(var n in this.keyMap_)this.removeKeyMapping(n,e,!0)},t.ShortcutRegistry.prototype.setKeyMap=function(e){this.keyMap_=e},t.ShortcutRegistry.prototype.getKeyMap=function(){return t.utils.object.deepMerge(Object.create(null),this.keyMap_)},t.ShortcutRegistry.prototype.getRegistry=function(){return t.utils.object.deepMerge(Object.create(null),this.registry_)},t.ShortcutRegistry.prototype.onKeyDown=function(e,n){var a=this.serializeKeyEvent_(n);if(!(a=this.getShortcutNamesByKeyCode(a)))return!1;for(var E,f=0;E=a[f];f++)if((!(E=this.registry_[E]).preconditionFn||E.preconditionFn(e))&&E.callback&&E.callback(e,n,E))return!0;return!1},t.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(e){return this.keyMap_[e]||[]},t.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(e){var a,n=[];for(a in this.keyMap_)-1<this.keyMap_[a].indexOf(e)&&n.push(a);return n},t.ShortcutRegistry.prototype.serializeKeyEvent_=function(e){var a,n="";for(a in t.ShortcutRegistry.modifierKeys)e.getModifierState(a)&&(""!=n&&(n+="+"),n+=a);return""!=n&&e.keyCode?n=n+"+"+e.keyCode:e.keyCode&&(n=e.keyCode.toString()),n},t.ShortcutRegistry.prototype.checkModifiers_=function(e){for(var f,n=t.utils.object.values(t.ShortcutRegistry.modifierKeys),a=0;f=e[a];a++)if(0>n.indexOf(f))throw Error(f+" is not a valid modifier key.")},t.ShortcutRegistry.prototype.createSerializedKey=function(e,n){var a="";if(n)for(var f in this.checkModifiers_(n),t.ShortcutRegistry.modifierKeys)-1<n.indexOf(t.ShortcutRegistry.modifierKeys[f])&&(""!=a&&(a+="+"),a+=f);return""!=a&&e?a=a+"+"+e:e&&(a=e.toString()),a},new t.ShortcutRegistry,t.VariableModel=function(e,n,a,f){this.workspace=e,this.name=n,this.type=a||"",this.id_=f||t.utils.genUid(),t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(this))},t.VariableModel.prototype.getId=function(){return this.id_},t.VariableModel.compareByName=function(e,n){return e.name.localeCompare(n.name,void 0,{sensitivity:"base"})},t.Variables={},t.Variables.NAME_TYPE=t.VARIABLE_CATEGORY_NAME,t.Variables.allUsedVarModels=function(e){var n=e.getAllBlocks(!1);e=Object.create(null);for(var a=0;a<n.length;a++){var f=n[a].getVarModels();if(f)for(var E=0;E<f.length;E++){var I=f[E],Y=I.getId();Y&&(e[Y]=I)}}for(Y in n=[],e)n.push(e[Y]);return n},t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},t.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var f,n=Object.create(null),a=0;f=e[a];a++){var E=f.getDeveloperVariables;if(!E&&f.getDeveloperVars&&(E=f.getDeveloperVars,t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[f.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+f.type+"')"),t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[f.type]=!0)),E)for(f=E(),E=0;E<f.length;E++)n[f[E]]=!0}return Object.keys(n)},t.Variables.flyoutCategory=function(e){var n=[],a=document.createElement("button");return a.setAttribute("text","%{BKY_NEW_VARIABLE}"),a.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(f){t.Variables.createVariableButtonHandler(f.getTargetWorkspace())}),n.push(a),e=t.Variables.flyoutCategoryBlocks(e),n.concat(e)},t.Variables.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getVariablesOfType("")).length){var a=e[e.length-1];if(t.Blocks.variables_set){var f=t.utils.xml.createElement("block");f.setAttribute("type","variables_set"),f.setAttribute("gap",t.Blocks.math_change?8:24),f.appendChild(t.Variables.generateVariableFieldDom(a)),n.push(f)}if(t.Blocks.math_change&&((f=t.utils.xml.createElement("block")).setAttribute("type","math_change"),f.setAttribute("gap",t.Blocks.variables_get?20:8),f.appendChild(t.Variables.generateVariableFieldDom(a)),a=t.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),f.appendChild(a),n.push(f)),t.Blocks.variables_get){e.sort(t.VariableModel.compareByName),a=0;for(var E;E=e[a];a++)(f=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),f.setAttribute("gap",8),f.appendChild(t.Variables.generateVariableFieldDom(E)),n.push(f)}}return n},t.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",t.Variables.generateUniqueName=function(e){return t.Variables.generateUniqueNameFromOptions(t.Variables.VAR_LETTER_OPTIONS.charAt(0),e.getAllVariableNames())},t.Variables.generateUniqueNameFromOptions=function(e,n){if(!n.length)return e;for(var a=t.Variables.VAR_LETTER_OPTIONS,f="",E=a.indexOf(e);;){for(var I=!1,Y=0;Y<n.length;Y++)if(n[Y].toLowerCase()==e){I=!0;break}if(!I)return e;++E==a.length&&(E=0,f=Number(f)+1),e=a.charAt(E)+f}},t.Variables.createVariableButtonHandler=function(e,n,a){var f=a||"",E=function(I){t.Variables.promptName(t.Msg.NEW_VARIABLE_TITLE,I,function(Y){if(Y){var ee=t.Variables.nameUsedWithAnyType(Y,e);if(ee){if(ee.type==f)var _e=t.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",ee.name);else _e=(_e=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",ee.name).replace("%2",ee.type);t.alert(_e,function(){E(Y)})}else e.createVariable(Y,f),n&&n(Y)}else n&&n(null)})};E("")},t.Variables.createVariable=t.Variables.createVariableButtonHandler,t.Variables.renameVariable=function(e,n,a){var f=function(E){var I=t.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);t.Variables.promptName(I,E,function(Y){if(Y){var ee=t.Variables.nameUsedWithOtherType_(Y,n.type,e);ee?(ee=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",ee.name).replace("%2",ee.type),t.alert(ee,function(){f(Y)})):(e.renameVariableById(n.getId(),Y),a&&a(Y))}else a&&a(null)})};f("")},t.Variables.promptName=function(e,n,a){t.prompt(e,n,function(f){f&&((f=f.replace(/[\s\xa0]+/g," ").trim())==t.Msg.RENAME_VARIABLE||f==t.Msg.NEW_VARIABLE)&&(f=null),a(f)})},t.Variables.nameUsedWithOtherType_=function(e,n,a){a=a.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var E,f=0;E=a[f];f++)if(E.name.toLowerCase()==e&&E.type!=n)return E;return null},t.Variables.nameUsedWithAnyType=function(e,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var f,a=0;f=n[a];a++)if(f.name.toLowerCase()==e)return f;return null},t.Variables.generateVariableFieldDom=function(e){var n=t.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.type),e=t.utils.xml.createTextNode(e.name),n.appendChild(e),n},t.Variables.getOrCreateVariablePackage=function(e,n,a,f){var E=t.Variables.getVariable(e,n,a,f);return E||(E=t.Variables.createVariable_(e,n,a,f)),E},t.Variables.getVariable=function(e,n,a,f){var E=e.getPotentialVariableMap(),I=null;if(n&&(!(I=e.getVariableById(n))&&E&&(I=E.getVariableById(n)),I))return I;if(a){if(null==f)throw Error("Tried to look up a variable by name without a type");!(I=e.getVariable(a,f))&&E&&(I=E.getVariable(a,f))}return I},t.Variables.createVariable_=function(e,n,a,f){var E=e.getPotentialVariableMap();return a||(a=t.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e)),E?E.createVariable(a,f,n):e.createVariable(a,f,n)},t.Variables.getAddedVariables=function(e,n){e=e.getAllVariables();var a=[];if(n.length!=e.length)for(var f=0;f<e.length;f++){var E=e[f];-1==n.indexOf(E)&&a.push(E)}return a},t.VERSION="6.20210701.0",t.mainWorkspace=null,t.selected=null,t.draggingConnections=[],t.clipboardXml_=null,t.clipboardSource_=null,t.clipboardTypeCounts_=null,t.cache3dSupported_=null,t.parentContainer=null,t.svgSize=function(e){return t.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new t.utils.Size(e.cachedWidth_,e.cachedHeight_)},t.resizeSvgContents=function(e){e.resizeContents()},t.svgResize=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;var n=e.getParentSvg(),a=e.getCachedParentSvgSize(),f=n.parentNode;if(f){var E=f.offsetWidth;f=f.offsetHeight,a.width!=E&&(n.setAttribute("width",E+"px"),e.setCachedParentSvgSize(E,null)),a.height!=f&&(n.setAttribute("height",f+"px"),e.setCachedParentSvgSize(null,f)),e.resize()}},t.onKeyDown=function(e){var n=t.mainWorkspace;n&&!(t.utils.isTargetInput(e)||n.rendered&&!n.isVisible())&&t.ShortcutRegistry.registry.onKeyDown(n,e)},t.deleteBlock=function(e){e.workspace.isFlyout||(t.Events.setGroup(!0),t.hideChaff(),e.dispose(!e.outputConnection,!0),t.Events.setGroup(!1))},t.copy=function(e){(e=e.toCopyData())&&(t.clipboardXml_=e.xml,t.clipboardSource_=e.source,t.clipboardTypeCounts_=e.typeCounts)},t.paste=function(){if(!t.clipboardXml_)return!1;var e=t.clipboardSource_;return e.isFlyout&&(e=e.targetWorkspace),!(!t.clipboardTypeCounts_||!e.isCapacityAvailable(t.clipboardTypeCounts_)||(t.Events.setGroup(!0),e.paste(t.clipboardXml_),t.Events.setGroup(!1),0))},t.duplicate=function(e){var n=t.clipboardXml_,a=t.clipboardSource_;t.copy(e),e.workspace.paste(t.clipboardXml_),t.clipboardXml_=n,t.clipboardSource_=a},t.onContextMenu_=function(e){t.utils.isTargetInput(e)||e.preventDefault()},t.hideChaff=function(e){t.Tooltip.hide(),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation();var n=!!e;t.getMainWorkspace().getComponentManager().getComponents(t.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(a){a.autoHide(n)})},t.getMainWorkspace=function(){return t.mainWorkspace},t.alert=function(e,n){alert(e),n&&n()},t.confirm=function(e,n){n(confirm(e))},t.prompt=function(e,n,a){a(prompt(e,n))},t.jsonInitFactory_=function(e){return function(){this.jsonInit(e)}},t.defineBlocksWithJsonArray=function(e){for(var n=0;n<e.length;n++){var a=e[n];if(a){var f=a.type;null==f||""===f?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(t.Blocks[f]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+f+'".'),t.Blocks[f]={init:t.jsonInitFactory_(a)})}else console.warn("Block definition #"+n+" in JSON array is "+a+". Skipping.")}},t.isNumber=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},t.hueToHex=function(e){return t.utils.colour.hsvToHex(e,t.HSV_SATURATION,255*t.HSV_VALUE)},t.checkBlockColourConstants=function(){t.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),t.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),t.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),t.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),t.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),t.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),t.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),t.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),t.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),t.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),t.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),t.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),t.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),t.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),t.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),t.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},t.checkBlockColourConstant_=function(e,n,a){for(var f="Blockly",E=t,I=0;I<n.length;++I)f+="."+n[I],E&&(E=E[n[I]]);E&&E!==a&&(e=(void 0===a?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",f).replace("%2",e),console.warn(e))},t.setParentContainer=function(e){t.parentContainer=e},t.bindEvent_=t.browserEvents.bind,t.unbindEvent_=t.browserEvents.unbind,t.bindEventWithChecks_=t.browserEvents.conditionalBind,t.ALIGN_LEFT=t.constants.ALIGN.LEFT,t.ALIGN_CENTRE=t.constants.ALIGN.CENTRE,t.ALIGN_RIGHT=t.constants.ALIGN.RIGHT,t.INPUT_VALUE=t.connectionTypes.INPUT_VALUE,t.OUTPUT_VALUE=t.connectionTypes.OUTPUT_VALUE,t.NEXT_STATEMENT=t.connectionTypes.NEXT_STATEMENT,t.PREVIOUS_STATEMENT=t.connectionTypes.PREVIOUS_STATEMENT,t.DUMMY_INPUT=t.inputTypes.DUMMY,t.TOOLBOX_AT_TOP=t.utils.toolbox.Position.TOP,t.TOOLBOX_AT_BOTTOM=t.utils.toolbox.Position.BOTTOM,t.TOOLBOX_AT_LEFT=t.utils.toolbox.Position.LEFT,t.TOOLBOX_AT_RIGHT=t.utils.toolbox.Position.RIGHT,t.Events.BubbleOpen=function(e,n,a){t.Events.BubbleOpen.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isOpen=n,this.bubbleType=a},t.utils.object.inherits(t.Events.BubbleOpen,t.Events.UiBase),t.Events.BubbleOpen.prototype.type=t.Events.BUBBLE_OPEN,t.Events.BubbleOpen.prototype.toJson=function(){var e=t.Events.BubbleOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId,e},t.Events.BubbleOpen.prototype.fromJson=function(e){t.Events.BubbleOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen,this.bubbleType=e.bubbleType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.BUBBLE_OPEN,t.Events.BubbleOpen),t.Icon=function(e){this.block_=e,this.iconGroup_=null},t.Icon.prototype.collapseHidden=!0,t.Icon.prototype.SIZE=17,t.Icon.prototype.bubble_=null,t.Icon.prototype.iconXY_=null,t.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),t.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},t.Icon.prototype.dispose=function(){t.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},t.Icon.prototype.updateEditable=function(){},t.Icon.prototype.isVisible=function(){return!!this.bubble_},t.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||t.utils.isRightButton(e)||this.setVisible(!this.isVisible())},t.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},t.Icon.prototype.setIconLocation=function(e){this.iconXY_=e,this.isVisible()&&this.bubble_.setAnchorLocation(e)},t.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),n=t.utils.getRelativeXY(this.iconGroup_);e=new t.utils.Coordinate(e.x+n.x+this.SIZE/2,e.y+n.y+this.SIZE/2),t.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},t.Icon.prototype.getIconLocation=function(){return this.iconXY_},t.Icon.prototype.getCorrectedSize=function(){return new t.utils.Size(t.Icon.prototype.SIZE,t.Icon.prototype.SIZE-2)},t.Warning=function(e){t.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_=Object.create(null)},t.utils.object.inherits(t.Warning,t.Icon),t.Warning.prototype.collapseHidden=!1,t.Warning.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},t.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"warning")),e?this.createBubble_():this.disposeBubble_())},t.Warning.prototype.createBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.getText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},t.Warning.prototype.setText=function(e,n){this.text_[n]!=e&&(e?this.text_[n]=e:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},t.Warning.prototype.getText=function(){var n,e=[];for(n in this.text_)e.push(this.text_[n]);return e.join("\n")},t.Warning.prototype.dispose=function(){this.block_.warning=null,t.Icon.prototype.dispose.call(this)},t.Comment=function(e){t.Comment.superClass_.constructor.call(this,e),this.model_=e.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},t.utils.object.inherits(t.Comment,t.Icon),t.Comment.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)},t.Comment.prototype.createEditor_=function(){this.foreignObject_=t.utils.dom.createSvgElement(t.utils.Svg.FOREIGNOBJECT,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null);var e=document.createElementNS(t.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",t.utils.dom.HTML_NS),e.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(t.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),e.appendChild(n),this.foreignObject_.appendChild(e),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=t.browserEvents.conditionalBind(n,"wheel",this,function(a){a.stopPropagation()}),this.onChangeWrapper_=t.browserEvents.conditionalBind(n,"change",this,function(a){this.cachedText_!=this.model_.text&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=t.browserEvents.conditionalBind(n,"input",this,function(a){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},t.Comment.prototype.updateEditable=function(){t.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},t.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},t.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,n=2*t.Bubble.BORDER_WIDTH,a=e.width-n;e=e.height-n,this.foreignObject_.setAttribute("width",a),this.foreignObject_.setAttribute("height",e),this.textarea_.style.width=a-4+"px",this.textarea_.style.height=e-4+"px"},t.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"comment")),(this.model_.pinned=e)?this.createBubble_():this.disposeBubble_())},t.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||t.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},t.Comment.prototype.createEditableBubble_=function(){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},t.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(t.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(t.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(t.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(t.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},t.Comment.prototype.startEdit_=function(e){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},t.Comment.prototype.getBubbleSize=function(){return this.model_.size},t.Comment.prototype.setBubbleSize=function(e,n){this.bubble_?this.bubble_.setBubbleSize(e,n):(this.model_.size.width=e,this.model_.size.height=n)},t.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},t.Comment.prototype.dispose=function(){this.block_.comment=null,t.Icon.prototype.dispose.call(this)},t.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),t.IComponent=function(){},t.IDragTarget=function(){},t.DragTarget=function(){},t.DragTarget.prototype.onDragEnter=function(e){},t.DragTarget.prototype.onDragOver=function(e){},t.DragTarget.prototype.onDragExit=function(e){},t.DragTarget.prototype.onDrop=function(e){},t.DragTarget.prototype.shouldPreventMove=function(e){return!1},t.IDeleteArea=function(){},t.DeleteArea=function(){t.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},t.utils.object.inherits(t.DeleteArea,t.DragTarget),t.DeleteArea.prototype.wouldDelete=function(e,n){return e instanceof t.BlockSvg?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e&&!n)):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_},t.DeleteArea.prototype.updateWouldDelete_=function(e){this.wouldDelete_=e},t.IFlyout=function(){},t.Flyout=function(e){t.Flyout.superClass_.constructor.call(this),e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new t.WorkspaceSvg(e),this.workspace_.setMetricsManager(new t.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=t.utils.genUid(),this.RTL=!!e.RTL,this.horizontalLayout=!1,this.toolboxPosition_=e.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},t.utils.object.inherits(t.Flyout,t.DeleteArea),t.Flyout.prototype.autoClose=!0,t.Flyout.prototype.isVisible_=!1,t.Flyout.prototype.containerVisible_=!0,t.Flyout.prototype.CORNER_RADIUS=8,t.Flyout.prototype.MARGIN=t.Flyout.prototype.CORNER_RADIUS,t.Flyout.prototype.GAP_X=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.GAP_Y=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.SCROLLBAR_MARGIN=2.5,t.Flyout.prototype.width_=0,t.Flyout.prototype.height_=0,t.Flyout.prototype.dragAngleRange_=70,t.Flyout.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},t.Flyout.prototype.init=function(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new t.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[t.ComponentManager.Capability.DELETE_AREA,t.ComponentManager.Capability.DRAG_TARGET]})},t.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),t.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},t.Flyout.prototype.getWidth=function(){return this.width_},t.Flyout.prototype.getHeight=function(){return this.height_},t.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},t.Flyout.prototype.getWorkspace=function(){return this.workspace_},t.Flyout.prototype.isVisible=function(){return this.isVisible_},t.Flyout.prototype.setVisible=function(e){var n=e!=this.isVisible();this.isVisible_=e,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},t.Flyout.prototype.setContainerVisible=function(e){var n=e!=this.containerVisible_;this.containerVisible_=e,n&&this.updateDisplay_()},t.Flyout.prototype.updateDisplay_=function(){var e=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=e?"block":"none",this.workspace_.scrollbar.setContainerVisible(e)},t.Flyout.prototype.positionAt_=function(e,n,a,f){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(e,n),"svg"==this.svgGroup_.tagName?t.utils.dom.setCssTransform(this.svgGroup_,"translate("+a+"px,"+f+"px)"):this.svgGroup_.setAttribute("transform","translate("+a+","+f+")"),(e=this.workspace_.scrollbar)&&(e.setOrigin(a,f),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))},t.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,e=0;n=this.listeners_[e];e++)t.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},t.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=t.utils.toolbox.convertFlyoutDefToJsonArray(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(t.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var f,n=this.workspace_.getTopBlocks(!1),a=0;f=n[a];a++)f.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.createFlyoutInfo_=function(e){var n=[],a=[];this.permanentlyDisabled_.length=0;for(var I,f=this.horizontalLayout?this.GAP_X:this.GAP_Y,E=0;I=e[E];E++)switch(I.custom&&(I=this.getDynamicCategoryContents_(I.custom),I=t.utils.toolbox.convertFlyoutDefToJsonArray(I),e.splice.apply(e,[E,1].concat(I)),I=e[E]),I.kind.toUpperCase()){case"BLOCK":var Y=I,ee=this.getBlockXml_(Y);I=this.createBlock_(ee),Y=parseInt(Y.gap||ee.getAttribute("gap"),10),a.push(isNaN(Y)?f:Y),n.push({type:"block",block:I});break;case"SEP":this.addSeparatorGap_(I,a,f);break;case"LABEL":I=this.createButton_(I,!0),n.push({type:"button",button:I}),a.push(f);break;case"BUTTON":I=this.createButton_(I,!1),n.push({type:"button",button:I}),a.push(f)}return{contents:n,gaps:a}},t.Flyout.prototype.getDynamicCategoryContents_=function(e){if("function"!=typeof(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(e=e(this.workspace_.targetWorkspace),!Array.isArray(e))throw new TypeError("Result of toolbox category callback must be an array.");return e},t.Flyout.prototype.createButton_=function(e,n){if(!t.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new t.FlyoutButton(this.workspace_,this.targetWorkspace,e,n)},t.Flyout.prototype.createBlock_=function(e){return(e=t.Xml.domToBlock(e,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(e),e},t.Flyout.prototype.getBlockXml_=function(e){var n=null,a=e.blockxml;if(a&&"string"!=typeof a?n=a:a&&"string"==typeof a?(n=t.Xml.textToDom(a),e.blockxml=n):e.type&&((n=t.utils.xml.createElement("xml")).setAttribute("type",e.type),n.setAttribute("disabled",e.disabled),e.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},t.Flyout.prototype.addSeparatorGap_=function(e,n,a){e=parseInt(e.gap,10),!isNaN(e)&&0<n.length?n[n.length-1]=e:n.push(a)},t.Flyout.prototype.clearOldBlocks_=function(){for(var a,e=this.workspace_.getTopBlocks(!1),n=0;a=e[n];n++)a.workspace==this.workspace_&&a.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(e=this.mats_[n])&&(t.Tooltip.unbindMouseEvents(e),t.utils.dom.removeNode(e));for(n=this.mats_.length=0;e=this.buttons_[n];n++)e.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},t.Flyout.prototype.addBlockListeners_=function(e,n,a){this.listeners_.push(t.browserEvents.conditionalBind(e,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.conditionalBind(a,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.bind(e,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(e,"mouseleave",n,n.removeSelect)),this.listeners_.push(t.browserEvents.bind(a,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(a,"mouseleave",n,n.removeSelect))},t.Flyout.prototype.blockMouseDown_=function(e){var n=this;return function(a){var f=n.targetWorkspace.getGesture(a);f&&(f.setStartBlock(e),f.handleFlyoutStart(a,n))}},t.Flyout.prototype.onMouseDown_=function(e){var n=this.targetWorkspace.getGesture(e);n&&n.handleFlyoutStart(e,this)},t.Flyout.prototype.isBlockCreatable_=function(e){return e.isEnabled()},t.Flyout.prototype.createBlock=function(e){var n=null;t.Events.disable();var a=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(e)}finally{t.Events.enable()}if(t.hideChaff(),e=t.Variables.getAddedVariables(this.targetWorkspace,a),t.Events.isEnabled()){for(t.Events.setGroup(!0),a=0;a<e.length;a++){var f=e[a];t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(f))}t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},t.Flyout.prototype.initFlyoutButton_=function(e,n,a){var f=e.createDom();e.moveTo(n,a),e.show(),this.listeners_.push(t.browserEvents.conditionalBind(f,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},t.Flyout.prototype.createRect_=function(e,n,a,f,E){return(n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{"fill-opacity":0,x:n,y:a,height:f.height,width:f.width},null)).tooltip=e,t.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,e.getSvgRoot()),e.flyoutRect_=n,this.mats_[E]=n},t.Flyout.prototype.moveRectToBlock_=function(e,n){var a=n.getHeightWidth();e.setAttribute("width",a.width),e.setAttribute("height",a.height),n=n.getRelativeToSurfaceXY(),e.setAttribute("y",n.y),e.setAttribute("x",this.RTL?n.x-a.width:n.x)},t.Flyout.prototype.filterForCapacity_=function(){for(var a,e=this.workspace_.getTopBlocks(!1),n=0;a=e[n];n++)if(-1==this.permanentlyDisabled_.indexOf(a))for(var f=this.targetWorkspace.isCapacityAvailable(t.utils.getBlockTypeCounts(a));a;)a.setEnabled(f),a=a.getNextBlock()},t.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},t.Flyout.prototype.placeNewBlock_=function(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");var a=t.Xml.blockToDom(e,!0);if(n.setResizesEnabled(!1),!(a=t.Xml.domToBlock(a,n)).getSvgRoot())throw Error("block is not rendered.");var f=n.getOriginOffsetInPixels(),E=this.workspace_.getOriginOffsetInPixels();return(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),e=t.utils.Coordinate.sum(E,e),(f=t.utils.Coordinate.difference(e,f)).scale(1/n.scale),a.moveBy(f.x,f.y),a},t.HorizontalFlyout=function(e){t.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout=!0},t.utils.object.inherits(t.HorizontalFlyout,t.Flyout),t.HorizontalFlyout.prototype.setMetrics_=function(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),a=n.getScrollMetrics(),f=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof e.x&&(this.workspace_.scrollX=-(a.left+(a.width-f.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},t.HorizontalFlyout.prototype.getX=function(){return 0},t.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),a=e.getViewMetrics();e=e.getToolboxMetrics();var f=this.toolboxPosition_==t.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?f?e.height:a.height-this.height_:f?0:a.height:f?0:a.height+n.top-this.height_},t.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath_(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}},t.HorizontalFlyout.prototype.setBackgroundPath_=function(e,n){var a=this.toolboxPosition_==t.utils.toolbox.Position.TOP,f=["M 0,"+(a?0:this.CORNER_RADIUS)];a?(f.push("h",e+2*this.CORNER_RADIUS),f.push("v",n),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),f.push("h",-e),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),f.push("h",e),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),f.push("v",n),f.push("h",-e-2*this.CORNER_RADIUS)),f.push("z"),this.svgBackground_.setAttribute("d",f.join(" "))},t.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},t.HorizontalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n=n.x||n.y){var a=this.workspace_.getMetricsManager(),f=a.getScrollMetrics();n=a.getViewMetrics().left-f.left+n,this.workspace_.scrollbar.setX(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.HorizontalFlyout.prototype.layout_=function(e,n){this.workspace_.scale=this.targetWorkspace.scale;var a=this.MARGIN,f=a+this.tabWidth_;this.RTL&&(e=e.reverse());for(var I,E=0;I=e[E];E++)if("block"==I.type){for(var _e,Y=(I=I.block).getDescendants(!1),ee=0;_e=Y[ee];ee++)_e.isInFlyout=!0;I.render(),Y=I.getSvgRoot(),ee=I.getHeightWidth(),_e=I.outputConnection?this.tabWidth_:0,I.moveBy(_e=this.RTL?f+ee.width:f-_e,a),_e=this.createRect_(I,_e,a,ee,E),f+=ee.width+n[E],this.addBlockListeners_(Y,I,_e)}else"button"==I.type&&(this.initFlyoutButton_(I.button,f,a),f+=I.button.width+n[E])},t.HorizontalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var n=this.dragAngleRange_;return e<90+n&&e>90-n||e>-90-n&&e<-90+n},t.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e9,n+e.height,-1e9,1e9):new t.utils.Rect(n,1e9,-1e9,1e9)},t.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var f,e=0,n=this.workspace_.getTopBlocks(!1),a=0;f=n[a];a++)e=Math.max(e,f.getHeightWidth().height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,this.height_!=(e+=t.Scrollbar.scrollbarThickness)){for(a=0;f=n[a];a++)f.flyoutRect_&&this.moveRectToBlock_(f.flyoutRect_,f);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.recordDragTargets()}},t.registry.register(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,t.registry.DEFAULT,t.HorizontalFlyout),t.VerticalFlyout=function(e){t.VerticalFlyout.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.VerticalFlyout,t.Flyout),t.VerticalFlyout.registryName="verticalFlyout",t.VerticalFlyout.prototype.setMetrics_=function(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),a=n.getScrollMetrics(),f=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof e.y&&(this.workspace_.scrollY=-(a.top+(a.height-f.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},t.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),a=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==t.utils.toolbox.Position.LEFT?e.width:a.width-this.width_:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:a.width:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:a.width+n.left-this.width_},t.VerticalFlyout.prototype.getY=function(){return 0},t.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}},t.VerticalFlyout.prototype.setBackgroundPath_=function(e,n){var a=this.toolboxPosition_==t.utils.toolbox.Position.RIGHT,f=e+this.CORNER_RADIUS;(f=["M "+(a?f:0)+",0"]).push("h",a?-e:e),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,a?0:1,a?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),f.push("v",Math.max(0,n)),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,a?0:1,a?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),f.push("h",a?e:-e),f.push("z"),this.svgBackground_.setAttribute("d",f.join(" "))},t.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},t.VerticalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n.y){var a=this.workspace_.getMetricsManager(),f=a.getScrollMetrics();n=a.getViewMetrics().top-f.top+n.y,this.workspace_.scrollbar.setY(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.VerticalFlyout.prototype.layout_=function(e,n){this.workspace_.scale=this.targetWorkspace.scale;for(var I,a=this.MARGIN,f=this.RTL?a:a+this.tabWidth_,E=0;I=e[E];E++)if("block"==I.type){for(var _e,Y=(I=I.block).getDescendants(!1),ee=0;_e=Y[ee];ee++)_e.isInFlyout=!0;I.render(),Y=I.getSvgRoot(),ee=I.getHeightWidth(),I.moveBy(_e=I.outputConnection?f-this.tabWidth_:f,a),_e=this.createRect_(I,this.RTL?_e-ee.width:_e,a,ee,E),this.addBlockListeners_(Y,I,_e),a+=ee.height+n[E]}else"button"==I.type&&(this.initFlyoutButton_(I.button,f,a),a+=I.button.height+n[E])},t.VerticalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var n=this.dragAngleRange_;return e<n&&e>-n||e<-180+n||e>180-n},t.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e9,1e9,-1e9,n+e.width):new t.utils.Rect(-1e9,1e9,n,1e9)},t.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var f,e=0,n=this.workspace_.getTopBlocks(!1),a=0;f=n[a];a++){var E=f.getHeightWidth().width;f.outputConnection&&(E-=this.tabWidth_),e=Math.max(e,E)}for(a=0;f=this.buttons_[a];a++)e=Math.max(e,f.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,this.width_!=(e+=t.Scrollbar.scrollbarThickness)){for(a=0;f=n[a];a++){if(this.RTL){E=f.getRelativeToSurfaceXY().x;var I=e/this.workspace_.scale-this.MARGIN;f.outputConnection||(I-=this.tabWidth_),f.moveBy(I-E,0)}f.flyoutRect_&&this.moveRectToBlock_(f.flyoutRect_,f)}if(this.RTL)for(a=0;f=this.buttons_[a];a++)n=f.getPosition().y,f.moveTo(e/this.workspace_.scale-f.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.recordDragTargets()}},t.registry.register(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.registry.DEFAULT,t.VerticalFlyout),t.FlyoutButton=function(e,n,a,f){this.workspace_=e,this.targetWorkspace_=n,this.text_=a.text,this.position_=new t.utils.Coordinate(0,0),this.isLabel_=f,this.callbackKey_=a.callbackKey||a.callbackkey,this.cssClass_=a["web-class"]||null,this.onMouseUpWrapper_=null,this.info=a},t.FlyoutButton.MARGIN_X=5,t.FlyoutButton.MARGIN_Y=2,t.FlyoutButton.prototype.width=0,t.FlyoutButton.prototype.height=0,t.FlyoutButton.prototype.createDom=function(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},this.workspace_.getCanvas()),!this.isLabel_)var n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);e=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var a=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),f=t.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(f+="\u200f"),a.textContent=f,this.isLabel_&&(this.svgText_=a,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var E=t.utils.style.getComputedStyle(a,"fontSize"),I=t.utils.style.getComputedStyle(a,"fontWeight"),Y=t.utils.style.getComputedStyle(a,"fontFamily");return this.width=t.utils.dom.getFastTextWidthWithSizeString(a,E,I,Y),f=t.utils.dom.measureFontMetrics(f,E,I,Y),this.height=f.height,this.isLabel_||(this.width+=2*t.FlyoutButton.MARGIN_X,this.height+=2*t.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),e.setAttribute("width",this.width),e.setAttribute("height",this.height),a.setAttribute("x",this.width/2),a.setAttribute("y",this.height/2-f.height/2+f.baseline),this.updateTransform_(),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},t.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},t.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},t.FlyoutButton.prototype.moveTo=function(e,n){this.position_.x=e,this.position_.y=n,this.updateTransform_()},t.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},t.FlyoutButton.prototype.getPosition=function(){return this.position_},t.FlyoutButton.prototype.getButtonText=function(){return this.text_},t.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},t.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&t.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},t.FlyoutButton.prototype.onMouseUp_=function(e){(e=this.targetWorkspace_.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},t.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),t.Generator=function(e){this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},t.Generator.prototype.INFINITE_LOOP_TRAP=null,t.Generator.prototype.STATEMENT_PREFIX=null,t.Generator.prototype.STATEMENT_SUFFIX=null,t.Generator.prototype.INDENT="  ",t.Generator.prototype.COMMENT_WRAP=60,t.Generator.prototype.ORDER_OVERRIDES=[],t.Generator.prototype.isInitialized=null,t.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=t.getMainWorkspace());var n=[];this.init(e),e=e.getTopBlocks(!0);for(var f,a=0;f=e[a];a++){var E=this.blockToCode(f);Array.isArray(E)&&(E=E[0]),E&&(f.outputConnection&&(E=this.scrubNakedValue(E),this.STATEMENT_PREFIX&&!f.suppressPrefixSuffix&&(E=this.injectId(this.STATEMENT_PREFIX,f)+E),this.STATEMENT_SUFFIX&&!f.suppressPrefixSuffix&&(E+=this.injectId(this.STATEMENT_SUFFIX,f))),n.push(E))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},t.Generator.prototype.prefixLines=function(e,n){return n+e.replace(/(?!\n$)\n/g,"\n"+n)},t.Generator.prototype.allNestedComments=function(e){var n=[];e=e.getDescendants(!0);for(var a=0;a<e.length;a++){var f=e[a].getCommentText();f&&n.push(f)}return n.length&&n.push(""),n.join("\n")},t.Generator.prototype.blockToCode=function(e,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return n?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return n?"":this.blockToCode(e.getChildren(!1)[0]);var a=this[e.type];if("function"!=typeof a)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+e.type+'".');if(a=a.call(e,e),Array.isArray(a)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,a[0],n),a[1]]}if("string"==typeof a)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(a=this.injectId(this.STATEMENT_PREFIX,e)+a),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(a+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,a,n);if(null===a)return"";throw SyntaxError("Invalid code generated: "+a)},t.Generator.prototype.valueToCode=function(e,n,a){if(isNaN(a))throw TypeError("Expecting valid order from block: "+e.type);var f=e.getInputTargetBlock(n);if(!f||""===(n=this.blockToCode(f)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+f.type);if(e=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+f.type);if(!e)return"";f=!1;var E=Math.floor(a),I=Math.floor(n);if(E<=I&&(E!=I||0!=E&&99!=E))for(f=!0,E=0;E<this.ORDER_OVERRIDES.length;E++)if(this.ORDER_OVERRIDES[E][0]==a&&this.ORDER_OVERRIDES[E][1]==n){f=!1;break}return f&&(e="("+e+")"),e},t.Generator.prototype.statementToCode=function(e,n){if(e=e.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(e)))throw TypeError("Expecting code from statement block: "+(e&&e.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},t.Generator.prototype.addLoopTrap=function(e,n){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),e},t.Generator.prototype.injectId=function(e,n){return n=n.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+n+"'")},t.Generator.prototype.RESERVED_WORDS_="",t.Generator.prototype.addReservedWords=function(e){this.RESERVED_WORDS_+=e+","},t.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(t.Generator.prototype,"variableDB_",{get:function(){return t.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(e){t.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=e}}),t.Generator.prototype.provideFunction_=function(e,n){if(!this.definitions_[e]){var f,a=this.nameDB_.getDistinctName(e,t.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[e]=a,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,a);f!=n;)f=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]},t.Generator.prototype.init=function(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},t.Generator.prototype.scrub_=function(e,n,a){return n},t.Generator.prototype.finish=function(e){return delete this.definitions_,delete this.functionNames_,e},t.Generator.prototype.scrubNakedValue=function(e){return e},t.IToolboxItem=function(){},t.ISelectableToolboxItem=function(){},t.ICollapsibleToolboxItem=function(){},t.ToolboxItem=function(e,n,a){this.id_=e.toolboxitemid||t.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=a||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},t.ToolboxItem.prototype.init=function(){},t.ToolboxItem.prototype.getDiv=function(){return null},t.ToolboxItem.prototype.getId=function(){return this.id_},t.ToolboxItem.prototype.getParent=function(){return null},t.ToolboxItem.prototype.getLevel=function(){return this.level_},t.ToolboxItem.prototype.isSelectable=function(){return!1},t.ToolboxItem.prototype.isCollapsible=function(){return!1},t.ToolboxItem.prototype.dispose=function(){},t.ToolboxCategory=function(e,n,a){t.ToolboxCategory.superClass_.constructor.call(this,e,n,a),this.name_=t.utils.replaceMessageReferences(e.name),this.colour_=this.getColour_(e),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(e)},t.utils.object.inherits(t.ToolboxCategory,t.ToolboxItem),t.ToolboxCategory.registrationName="category",t.ToolboxCategory.nestedPadding=19,t.ToolboxCategory.borderWidth=8,t.ToolboxCategory.defaultBackgroundColour="#57e",t.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},t.ToolboxCategory.prototype.parseContents_=function(e){var n=e.contents;if(e.custom)this.flyoutItems_=e.custom;else if(n){e=0;for(var a;a=n[e];e++)this.flyoutItems_.push(a)}},t.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},t.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),t.utils.aria.setRole(this.htmlDiv_,t.utils.aria.Role.TREEITEM),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,!1),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),t.utils.aria.setRole(this.iconDom_,t.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},t.ToolboxCategory.prototype.createContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),e},t.ToolboxCategory.prototype.createRowContainer_=function(){var e=document.createElement("div");t.utils.dom.addClass(e,this.cssConfig_.row);var n=t.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e},t.ToolboxCategory.prototype.createRowContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.rowcontentcontainer),e},t.ToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.display="inline-block",e},t.ToolboxCategory.prototype.createLabelDom_=function(e){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,t.utils.dom.addClass(n,this.cssConfig_.label),n},t.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},t.ToolboxCategory.prototype.addColourBorder_=function(e){e&&(e=t.ToolboxCategory.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)},t.ToolboxCategory.prototype.getColour_=function(e){var n=e.categorystyle||e.categoryStyle;return(e=e.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(e)},t.ToolboxCategory.prototype.getColourfromStyle_=function(e){var n=this.workspace_.getTheme();if(e&&n){if((n=n.categoryStyles[e])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""},t.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},t.ToolboxCategory.prototype.parseColour_=function(e){if(null==(e=t.utils.replaceMessageReferences(e))||""===e)return"";var n=Number(e);return isNaN(n)?(n=t.utils.colour.parse(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):t.hueToHex(n)},t.ToolboxCategory.prototype.openIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.closedicon),t.utils.dom.addClass(e,this.cssConfig_.openicon))},t.ToolboxCategory.prototype.closeIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.openicon),t.utils.dom.addClass(e,this.cssConfig_.closedicon))},t.ToolboxCategory.prototype.setVisible_=function(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},t.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},t.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},t.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var e=this;e.getParent();)if(!(e=e.getParent()).isExpanded())return!1;return!0},t.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},t.ToolboxCategory.prototype.onClick=function(e){},t.ToolboxCategory.prototype.setSelected=function(e){if(e){var n=this.parseColour_(t.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,t.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",t.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,e)},t.ToolboxCategory.prototype.setDisabled=function(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",e),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},t.ToolboxCategory.prototype.getName=function(){return this.name_},t.ToolboxCategory.prototype.getParent=function(){return this.parent_},t.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},t.ToolboxCategory.prototype.updateFlyoutContents=function(e){this.flyoutItems_=[],"string"==typeof e?this.toolboxItemDef_.custom=e:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=t.utils.toolbox.convertFlyoutDefToJsonArray(e)),this.parseContents_(this.toolboxItemDef_)},t.ToolboxCategory.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxCategory.registrationName,t.ToolboxCategory),t.ToolboxSeparator=function(e,n){t.ToolboxSeparator.superClass_.constructor.call(this,e,n),this.cssConfig_={container:"blocklyTreeSeparator"},t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig)},t.utils.object.inherits(t.ToolboxSeparator,t.ToolboxItem),t.ToolboxSeparator.registrationName="sep",t.ToolboxSeparator.prototype.init=function(){this.createDom_()},t.ToolboxSeparator.prototype.createDom_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),this.htmlDiv_=e},t.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxSeparator.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxSeparator.registrationName,t.ToolboxSeparator),t.CollapsibleToolboxCategory=function(e,n,a){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],t.CollapsibleToolboxCategory.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.CollapsibleToolboxCategory,t.ToolboxCategory),t.CollapsibleToolboxCategory.registrationName="collapsibleCategory",t.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var e=t.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return e.contents="blocklyToolboxContents",e},t.CollapsibleToolboxCategory.prototype.parseContents_=function(e){var n=e.contents,a=!0;if(e.custom)this.flyoutItems_=e.custom;else if(n){e=0;for(var f;f=n[e];e++)!t.registry.hasItem(t.registry.Type.TOOLBOX_ITEM,f.kind)||f.kind.toLowerCase()==t.ToolboxSeparator.registrationName&&a?(this.flyoutItems_.push(f),a=!0):(this.createToolboxItem_(f),a=!1)}},t.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(e){var n=e.kind;"CATEGORY"==n.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(n=t.CollapsibleToolboxCategory.registrationName),e=new(t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)},t.CollapsibleToolboxCategory.prototype.init=function(){t.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},t.CollapsibleToolboxCategory.prototype.createDom_=function(){t.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),t.utils.aria.setRole(this.subcategoriesDiv_,t.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||(t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.visibility="visible"),e.style.display="inline-block",e},t.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(e){var n=document.createElement("div");t.utils.dom.addClass(n,this.cssConfig_.contents);for(var a=0;a<e.length;a++){var f=e[a];f.init();var E=f.getDiv();n.appendChild(E),f.getClickTarget&&f.getClickTarget().setAttribute("id",f.getId())}return n},t.CollapsibleToolboxCategory.prototype.setExpanded=function(e){this.expanded_!=e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())},t.CollapsibleToolboxCategory.prototype.setVisible_=function(e){this.htmlDiv_.style.display=e?"block":"none";for(var a,n=0;a=this.getChildToolboxItems()[n];n++)a.setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},t.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},t.CollapsibleToolboxCategory.prototype.onClick=function(e){this.toggleExpanded()},t.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},t.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.CollapsibleToolboxCategory.registrationName,t.CollapsibleToolboxCategory),t.Events.ToolboxItemSelect=function(e,n,a){t.Events.ToolboxItemSelect.superClass_.constructor.call(this,a),this.oldItem=e,this.newItem=n},t.utils.object.inherits(t.Events.ToolboxItemSelect,t.Events.UiBase),t.Events.ToolboxItemSelect.prototype.type=t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect.prototype.toJson=function(){var e=t.Events.ToolboxItemSelect.superClass_.toJson.call(this);return e.oldItem=this.oldItem,e.newItem=this.newItem,e},t.Events.ToolboxItemSelect.prototype.fromJson=function(e){t.Events.ToolboxItemSelect.superClass_.fromJson.call(this,e),this.oldItem=e.oldItem,this.newItem=e.newItem},t.registry.register(t.registry.Type.EVENT,t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect),t.IAutoHideable=function(){},t.IStyleable=function(){},t.IToolbox=function(){},t.Toolbox=function(e){t.Toolbox.superClass_.constructor.call(this),this.workspace_=e,this.id="toolbox",this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=e.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},t.utils.object.inherits(t.Toolbox,t.DeleteArea),t.Toolbox.prototype.onShortcut=function(e){return!1},t.Toolbox.prototype.init=function(){var e=this.workspace_,n=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),t.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[t.ComponentManager.Capability.AUTOHIDEABLE,t.ComponentManager.Capability.DELETE_AREA,t.ComponentManager.Capability.DRAG_TARGET]})},t.Toolbox.prototype.createDom_=function(e){e=e.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,t.utils.aria.setRole(this.contentsDiv_,t.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n},t.Toolbox.prototype.createContainer_=function(){var e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),t.utils.dom.addClass(e,"blocklyToolboxDiv"),t.utils.dom.addClass(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e},t.Toolbox.prototype.createContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e},t.Toolbox.prototype.attachEvents_=function(e,n){e=t.browserEvents.conditionalBind(e,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(e),n=t.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},t.Toolbox.prototype.onClick_=function(e){if(t.utils.isRightButton(e)||e.target==this.HtmlDiv)t.hideChaff(!1);else{var n=e.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(e)),t.hideChaff(!0)}t.Touch.clearTouchIdentifier()},t.Toolbox.prototype.onKeyDown_=function(e){var n=!1;switch(e.keyCode){case t.utils.KeyCodes.DOWN:n=this.selectNext_();break;case t.utils.KeyCodes.UP:n=this.selectPrevious_();break;case t.utils.KeyCodes.LEFT:n=this.selectParent_();break;case t.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(e)),n&&e.preventDefault()},t.Toolbox.prototype.createFlyout_=function(){var e=this.workspace_,n=new t.Options({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=e.options.toolboxPosition,new(t.registry.getClassFromOptions(e.horizontalLayout?t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)},t.Toolbox.prototype.render=function(e){this.toolboxDef_=e;for(var n=0;n<this.contents_.length;n++){var a=this.contents_[n];a&&a.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()},t.Toolbox.prototype.renderContents_=function(e){for(var f,n=document.createDocumentFragment(),a=0;f=e[a];a++)this.createToolboxItem_(f,n);this.contentsDiv_.appendChild(n)},t.Toolbox.prototype.createToolboxItem_=function(e,n){var a=e.kind;"CATEGORY"==a.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(a=t.CollapsibleToolboxCategory.registrationName),(a=t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,a.toLowerCase()))&&(e=new a(e,this),this.addToolboxItem_(e),e.init(),(a=e.getDiv())&&n.appendChild(a),e.getClickTarget&&e.getClickTarget().setAttribute("id",e.getId()))},t.Toolbox.prototype.addToolboxItem_=function(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible())for(var a,n=0;a=e.getChildToolboxItems()[n];n++)this.addToolboxItem_(a)},t.Toolbox.prototype.getToolboxItems=function(){return this.contents_},t.Toolbox.prototype.addStyle=function(e){t.utils.dom.addClass(this.HtmlDiv,e)},t.Toolbox.prototype.removeStyle=function(e){t.utils.dom.removeClass(this.HtmlDiv,e)},t.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect(),n=e.top,a=n+e.height,f=e.left;return e=f+e.width,this.toolboxPosition==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e7,a,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.BOTTOM?new t.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e7,1e7,-1e7,e):new t.utils.Rect(-1e7,1e7,f,1e7)},t.Toolbox.prototype.wouldDelete=function(e,n){return this.updateWouldDelete_(e instanceof t.BlockSvg?!e.getParent()&&e.isDeletable():e.isDeletable()),this.wouldDelete_},t.Toolbox.prototype.onDragEnter=function(e){this.updateCursorDeleteStyle_(!0)},t.Toolbox.prototype.onDragExit=function(e){this.updateCursorDeleteStyle_(!1)},t.Toolbox.prototype.onDrop=function(e){this.updateCursorDeleteStyle_(!1)},t.Toolbox.prototype.updateWouldDelete_=function(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))},t.Toolbox.prototype.updateCursorDeleteStyle_=function(e){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(n):this.removeStyle(n)},t.Toolbox.prototype.getToolboxItemById=function(e){return this.contentMap_[e]||null},t.Toolbox.prototype.getWidth=function(){return this.width_},t.Toolbox.prototype.getHeight=function(){return this.height_},t.Toolbox.prototype.getFlyout=function(){return this.flyout_},t.Toolbox.prototype.getWorkspace=function(){return this.workspace_},t.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},t.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},t.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},t.Toolbox.prototype.position=function(){var e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition==t.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==t.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())},t.Toolbox.prototype.handleToolboxItemResize=function(){var e=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition==t.utils.toolbox.Position.LEFT?e.scrollX+n.width:e.scrollX,this.toolboxPosition==t.utils.toolbox.Position.TOP?e.scrollY+n.height:e.scrollY),t.svgResize(e)},t.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},t.Toolbox.prototype.refreshTheme=function(){for(var e=0;e<this.contents_.length;e++){var n=this.contents_[e];n.refreshTheme&&n.refreshTheme()}},t.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},t.Toolbox.prototype.setVisible=function(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())},t.Toolbox.prototype.autoHide=function(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},t.Toolbox.prototype.setSelectedItem=function(e){var n=this.selectedItem_;!e&&!n||e&&!e.isSelectable()||(this.shouldDeselectItem_(n,e)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,e)&&null!=e&&this.selectItem_(n,e),this.updateFlyout_(n,e),this.fireSelectEvent_(n,e))},t.Toolbox.prototype.shouldDeselectItem_=function(e,n){return null!=e&&(!e.isCollapsible()||e!=n)},t.Toolbox.prototype.shouldSelectItem_=function(e,n){return null!=n&&n!=e},t.Toolbox.prototype.deselectItem_=function(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,"")},t.Toolbox.prototype.selectItem_=function(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,n.getId())},t.Toolbox.prototype.selectItemByPosition=function(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e]).isSelectable()&&this.setSelectedItem(e)},t.Toolbox.prototype.updateFlyout_=function(e,n){(e!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},t.Toolbox.prototype.fireSelectEvent_=function(e,n){var a=e&&e.getName(),f=n&&n.getName();e==n&&(f=null),e=new(t.Events.get(t.Events.TOOLBOX_ITEM_SELECT))(a,f,this.workspace_.id),t.Events.fire(e)},t.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},t.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.setExpanded(!0),!0},t.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){for(var n=this.contents_[e];n&&!n.isSelectable();)n=this.contents_[++e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},t.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){for(var n=this.contents_[e];n&&!n.isSelectable();)n=this.contents_[--e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},t.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)t.browserEvents.unbind(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),t.utils.dom.removeNode(this.HtmlDiv)},t.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),t.registry.register(t.registry.Type.TOOLBOX,t.registry.DEFAULT,t.Toolbox),t.Events.TrashcanOpen=function(e,n){t.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=e},t.utils.object.inherits(t.Events.TrashcanOpen,t.Events.UiBase),t.Events.TrashcanOpen.prototype.type=t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen.prototype.toJson=function(){var e=t.Events.TrashcanOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e},t.Events.TrashcanOpen.prototype.fromJson=function(e){t.Events.TrashcanOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen},t.registry.register(t.registry.Type.EVENT,t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen),t.IPositionable=function(){},t.uiPosition={},t.uiPosition.verticalPosition={TOP:0,BOTTOM:1},t.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},t.uiPosition.bumpDirection={UP:0,DOWN:1},t.uiPosition.getStartPositionRect=function(e,n,a,f,E,I){var Y=I.scrollbar&&I.scrollbar.canScrollVertically();return e.horizontal===t.uiPosition.horizontalPosition.LEFT?(a=E.absoluteMetrics.left+a,Y&&I.RTL&&(a+=t.Scrollbar.scrollbarThickness)):(a=E.absoluteMetrics.left+E.viewMetrics.width-n.width-a,Y&&!I.RTL&&(a-=t.Scrollbar.scrollbarThickness)),e.vertical===t.uiPosition.verticalPosition.TOP?e=E.absoluteMetrics.top+f:(e=E.absoluteMetrics.top+E.viewMetrics.height-n.height-f,I.scrollbar&&I.scrollbar.canScrollHorizontally()&&(e-=t.Scrollbar.scrollbarThickness)),new t.utils.Rect(e,e+n.height,a,a+n.width)},t.uiPosition.getCornerOppositeToolbox=function(e,n){return{horizontal:n.toolboxMetrics.position===t.utils.toolbox.Position.LEFT||e.horizontalLayout&&!e.RTL?t.uiPosition.horizontalPosition.RIGHT:t.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===t.utils.toolbox.Position.BOTTOM?t.uiPosition.verticalPosition.TOP:t.uiPosition.verticalPosition.BOTTOM}},t.uiPosition.bumpPositionRect=function(e,n,a,f){for(var _e,E=e.left,I=e.right-e.left,Y=e.bottom-e.top,ee=0;_e=f[ee];ee++)e.intersects(_e)&&(e=new t.utils.Rect(e=a===t.uiPosition.bumpDirection.UP?_e.top-Y-n:_e.bottom+n,e+Y,E,E+I),ee=-1);return e},t.Trashcan=function(e){t.Trashcan.superClass_.constructor.call(this),this.workspace_=e,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(e=new t.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.TOP?t.utils.toolbox.Position.BOTTOM:t.utils.toolbox.Position.TOP,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(e)):(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT?t.utils.toolbox.Position.LEFT:t.utils.toolbox.Position.RIGHT,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(e)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},t.utils.object.inherits(t.Trashcan,t.DeleteArea),t.Trashcan.prototype.WIDTH_=47,t.Trashcan.prototype.BODY_HEIGHT_=44,t.Trashcan.prototype.LID_HEIGHT_=16,t.Trashcan.prototype.MARGIN_VERTICAL_=20,t.Trashcan.prototype.MARGIN_HORIZONTAL_=20,t.Trashcan.prototype.MARGIN_HOTSPOT_=10,t.Trashcan.prototype.SPRITE_LEFT_=0,t.Trashcan.prototype.SPRITE_TOP_=32,t.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,t.Trashcan.ANIMATION_LENGTH_=80,t.Trashcan.ANIMATION_FRAMES_=4,t.Trashcan.OPACITY_MIN_=.4,t.Trashcan.OPACITY_MAX_=.8,t.Trashcan.MAX_LID_ANGLE_=45,t.Trashcan.prototype.isLidOpen=!1,t.Trashcan.prototype.minOpenness_=0,t.Trashcan.prototype.svgGroup_=null,t.Trashcan.prototype.svgLid_=null,t.Trashcan.prototype.lidTask_=0,t.Trashcan.prototype.lidOpen_=0,t.Trashcan.prototype.left_=0,t.Trashcan.prototype.top_=0,t.Trashcan.prototype.initialized_=!1,t.Trashcan.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var a=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_);return a.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),t.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),t.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),t.browserEvents.bind(a,"mouseover",this,this.mouseOver_),t.browserEvents.bind(a,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},t.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(t.utils.dom.insertAfter(this.flyout.createDom(t.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[t.ComponentManager.Capability.AUTOHIDEABLE,t.ComponentManager.Capability.DELETE_AREA,t.ComponentManager.Capability.DRAG_TARGET,t.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},t.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},t.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},t.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},t.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var e=this.contents_.map(t.Xml.textToDom);this.flyout.show(e),this.fireUiEvent_(!0)}},t.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},t.Trashcan.prototype.autoHide=function(e){!e&&this.flyout&&this.closeFlyout()},t.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},t.Trashcan.prototype.position=function(e,n){if(this.initialized_){var a=t.uiPosition.getCornerOppositeToolbox(this.workspace_,e);e=t.uiPosition.getStartPositionRect(a,new t.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,e,this.workspace_),n=t.uiPosition.bumpPositionRect(e,this.MARGIN_VERTICAL_,a.vertical===t.uiPosition.verticalPosition.TOP?t.uiPosition.bumpDirection.DOWN:t.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.Trashcan.prototype.getBoundingRectangle=function(){return new t.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},t.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new t.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,e=e.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,e+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},t.Trashcan.prototype.onDragOver=function(e){this.setLidOpen(this.wouldDelete_)},t.Trashcan.prototype.onDragExit=function(e){this.setLidOpen(!1)},t.Trashcan.prototype.onDrop=function(e){setTimeout(this.setLidOpen.bind(this,!1),100)},t.Trashcan.prototype.setLidOpen=function(e){this.isLidOpen!=e&&(clearTimeout(this.lidTask_),this.isLidOpen=e,this.animateLid_())},t.Trashcan.prototype.animateLid_=function(){var e=t.Trashcan.ANIMATION_FRAMES_,n=1/(e+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*t.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=t.Trashcan.OPACITY_MIN_)+this.lidOpen_*(t.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),t.Trashcan.ANIMATION_LENGTH_/e))},t.Trashcan.prototype.setLidAngle_=function(e){var n=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},t.Trashcan.prototype.setMinOpenness_=function(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*t.Trashcan.MAX_LID_ANGLE_)},t.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},t.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},t.Trashcan.prototype.fireUiEvent_=function(e){e=new(t.Events.get(t.Events.TRASHCAN_OPEN))(e,this.workspace_.id),t.Events.fire(e)},t.Trashcan.prototype.blockMouseDownWhenOpenable_=function(e){!this.contentsIsOpen()&&this.hasContents_()&&e.stopPropagation()},t.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},t.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},t.Trashcan.prototype.onDelete_=function(e){if(!(0>=this.workspace_.options.maxTrashcanContents)&&e.type==t.Events.BLOCK_DELETE&&e.oldXml.tagName&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},t.Trashcan.prototype.cleanBlockXML_=function(e){for(var n=e=e.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var a=n.firstChild||n.nextSibling;if(!a)for(a=n.parentNode;a;){if(a.nextSibling){a=a.nextSibling;break}a=a.parentNode}n=a}return t.Xml.domToText(e)},t.VariablesDynamic={},t.VariablesDynamic.onCreateVariableButtonClick_String=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"String")},t.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Number")},t.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Colour")},t.VariablesDynamic.flyoutCategory=function(e){var n=[],a=document.createElement("button");return a.setAttribute("text",t.Msg.NEW_STRING_VARIABLE),a.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(a),(a=document.createElement("button")).setAttribute("text",t.Msg.NEW_NUMBER_VARIABLE),a.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(a),(a=document.createElement("button")).setAttribute("text",t.Msg.NEW_COLOUR_VARIABLE),a.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(a),e.registerButtonCallback("CREATE_VARIABLE_STRING",t.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",t.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",t.VariablesDynamic.onCreateVariableButtonClick_Colour),e=t.VariablesDynamic.flyoutCategoryBlocks(e),n.concat(e)},t.VariablesDynamic.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getAllVariables()).length){if(t.Blocks.variables_set_dynamic){var a=e[e.length-1],f=t.utils.xml.createElement("block");f.setAttribute("type","variables_set_dynamic"),f.setAttribute("gap",24),f.appendChild(t.Variables.generateVariableFieldDom(a)),n.push(f)}if(t.Blocks.variables_get_dynamic){e.sort(t.VariableModel.compareByName),a=0;for(var E;E=e[a];a++)(f=t.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),f.setAttribute("gap",8),f.appendChild(t.Variables.generateVariableFieldDom(E)),n.push(f)}}return n},t.ZoomControls=function(e){this.workspace_=e,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},t.ZoomControls.prototype.WIDTH_=32,t.ZoomControls.prototype.HEIGHT_=32,t.ZoomControls.prototype.SMALL_SPACING_=2,t.ZoomControls.prototype.LARGE_SPACING_=11,t.ZoomControls.prototype.MARGIN_VERTICAL_=20,t.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,t.ZoomControls.prototype.svgGroup_=null,t.ZoomControls.prototype.left_=0,t.ZoomControls.prototype.top_=0,t.ZoomControls.prototype.initialized_=!1,t.ZoomControls.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var e=String(Math.random()).substring(2);return this.createZoomOutSvg_(e),this.createZoomInSvg_(e),this.workspace_.isMovable()&&this.createZoomResetSvg_(e),this.svgGroup_},t.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[t.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},t.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&t.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&t.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&t.browserEvents.unbind(this.onZoomOutWrapper_)},t.ZoomControls.prototype.getBoundingRectangle=function(){var e=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(e+=this.LARGE_SPACING_+this.HEIGHT_),new t.utils.Rect(this.top_,this.top_+e,this.left_,this.left_+this.WIDTH_)},t.ZoomControls.prototype.position=function(e,n){if(this.initialized_){var a=t.uiPosition.getCornerOppositeToolbox(this.workspace_,e),f=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(f+=this.LARGE_SPACING_+this.HEIGHT_),e=t.uiPosition.getStartPositionRect(a,new t.utils.Size(this.WIDTH_,f),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,e,this.workspace_),n=t.uiPosition.bumpPositionRect(e,this.MARGIN_VERTICAL_,(a=a.vertical)===t.uiPosition.verticalPosition.TOP?t.uiPosition.bumpDirection.DOWN:t.uiPosition.bumpDirection.UP,n),a===t.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(a=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(a+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(a=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(a+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.ZoomControls.prototype.createZoomOutSvg_=function(e){this.zoomOutGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomOutWrapper_=t.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},t.ZoomControls.prototype.createZoomInSvg_=function(e){this.zoomInGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomInWrapper_=t.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},t.ZoomControls.prototype.zoom_=function(e,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(e),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},t.ZoomControls.prototype.createZoomResetSvg_=function(e){this.zoomResetGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomResetWrapper_=t.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},t.ZoomControls.prototype.resetZoom_=function(e){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},t.ZoomControls.prototype.fireZoomEvent_=function(){var e=new(t.Events.get(t.Events.CLICK))(null,this.workspace_.id,"zoom_controls");t.Events.fire(e)},t.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),t.ShortcutItems={},t.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},t.ShortcutItems.registerEscape=function(){var e={name:t.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return t.hideChaff(),!0}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.ESC,e.name)},t.ShortcutItems.registerDelete=function(){var e={name:t.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&t.selected&&t.selected.isDeletable()},callback:function(n,a){return a.preventDefault(),!t.Gesture.inProgress()&&(t.deleteBlock(t.selected),!0)}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.DELETE,e.name),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.BACKSPACE,e.name)},t.ShortcutItems.registerCopy=function(){var e={name:t.ShortcutItems.names.COPY,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()},callback:function(a,f){return f.preventDefault(),t.hideChaff(),t.copy(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerCut=function(){var e={name:t.ShortcutItems.names.CUT,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()&&!t.selected.workspace.isFlyout},callback:function(){return t.copy(t.selected),t.deleteBlock(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerPaste=function(){var e={name:t.ShortcutItems.names.PASTE,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()},callback:function(){return t.paste()}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerUndo=function(){var e={name:t.ShortcutItems.names.UNDO,preconditionFn:function(a){return!a.options.readOnly&&!t.Gesture.inProgress()},callback:function(a){return t.hideChaff(),a.undo(!1),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerRedo=function(){var e={name:t.ShortcutItems.names.REDO,preconditionFn:function(a){return!t.Gesture.inProgress()&&!a.options.readOnly},callback:function(a){return t.hideChaff(),a.undo(!0),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Y,[t.utils.KeyCodes.CTRL]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerDefaultShortcuts=function(){t.ShortcutItems.registerEscape(),t.ShortcutItems.registerDelete(),t.ShortcutItems.registerCopy(),t.ShortcutItems.registerCut(),t.ShortcutItems.registerPaste(),t.ShortcutItems.registerUndo(),t.ShortcutItems.registerRedo()},t.ShortcutItems.registerDefaultShortcuts(),t.ContextMenuItems={},t.ContextMenuItems.registerUndo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.UNDO},preconditionFn:function(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(e){e.workspace.undo(!1)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},t.ContextMenuItems.registerRedo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.REDO},preconditionFn:function(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(e){e.workspace.undo(!0)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},t.ContextMenuItems.registerCleanup=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.CLEAN_UP},preconditionFn:function(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(e){e.workspace.cleanUp()},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},t.ContextMenuItems.toggleOption_=function(e,n){for(var a=0,f=0;f<n.length;f++)for(var E=n[f];E;)setTimeout(E.setCollapsed.bind(E,e),a),E=E.getNextBlock(),a+=10},t.ContextMenuItems.registerCollapse=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.COLLAPSE_ALL},preconditionFn:function(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(var n=0;n<e.length;n++)for(var a=e[n];a;){if(!a.isCollapsed())return"enabled";a=a.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!0,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},t.ContextMenuItems.registerExpand=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.EXPAND_ALL},preconditionFn:function(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(var n=0;n<e.length;n++)for(var a=e[n];a;){if(a.isCollapsed())return"enabled";a=a.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!1,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},t.ContextMenuItems.addDeletableBlocks_=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(var a=0;a<e.length;a++)t.ContextMenuItems.addDeletableBlocks_(e[a],n)}},t.ContextMenuItems.getDeletableBlocks_=function(e){var n=[];e=e.getTopBlocks(!0);for(var a=0;a<e.length;a++)t.ContextMenuItems.addDeletableBlocks_(e[a],n);return n},t.ContextMenuItems.deleteNext_=function(e,n){t.Events.setGroup(n);var a=e.shift();a&&(a.workspace?(a.dispose(!1,!0),setTimeout(t.ContextMenuItems.deleteNext_,10,e,n)):t.ContextMenuItems.deleteNext_(e,n)),t.Events.setGroup(!1)},t.ContextMenuItems.registerDeleteAll=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){if(e.workspace)return 1==(e=t.ContextMenuItems.getDeletableBlocks_(e.workspace).length)?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){if(e.workspace)return 0<t.ContextMenuItems.getDeletableBlocks_(e.workspace).length?"enabled":"disabled"},callback:function(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=t.ContextMenuItems.getDeletableBlocks_(e.workspace),a=t.utils.genUid();2>n.length?t.ContextMenuItems.deleteNext_(n,a):t.confirm(t.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(f){f&&t.ContextMenuItems.deleteNext_(n,a)})}},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},t.ContextMenuItems.registerWorkspaceOptions_=function(){t.ContextMenuItems.registerUndo(),t.ContextMenuItems.registerRedo(),t.ContextMenuItems.registerCleanup(),t.ContextMenuItems.registerCollapse(),t.ContextMenuItems.registerExpand(),t.ContextMenuItems.registerDeleteAll()},t.ContextMenuItems.registerDuplicate=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.DUPLICATE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(e){e.block&&t.duplicate(e.block)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},t.ContextMenuItems.registerComment=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getCommentIcon()?t.Msg.REMOVE_COMMENT:t.Msg.ADD_COMMENT},preconditionFn:function(e){return e=e.block,t.utils.userAgent.IE||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()?"hidden":"enabled"},callback:function(e){(e=e.block).getCommentIcon()?e.setCommentText(null):e.setCommentText("")},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},t.ContextMenuItems.registerInline=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getInputsInline()?t.Msg.EXTERNAL_INPUTS:t.Msg.INLINE_INPUTS},preconditionFn:function(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(var n=1;n<e.inputList.length;n++)if(e.inputList[n-1].type!=t.inputTypes.STATEMENT&&e.inputList[n].type!=t.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},t.ContextMenuItems.registerCollapseExpandBlock=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isCollapsed()?t.Msg.EXPAND_BLOCK:t.Msg.COLLAPSE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback:function(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},t.ContextMenuItems.registerDisable=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isEnabled()?t.Msg.DISABLE_BLOCK:t.Msg.ENABLE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.workspace.options.disable&&e.isEditable()?e.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(e){e=e.block;var n=t.Events.getGroup();n||t.Events.setGroup(!0),e.setEnabled(!e.isEnabled()),n||t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},t.ContextMenuItems.registerDelete=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),1==e?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback:function(e){t.Events.setGroup(!0),e.block&&t.deleteBlock(e.block),t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},t.ContextMenuItems.registerHelp=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.HELP},preconditionFn:function(e){return("function"==typeof(e=e.block).helpUrl?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback:function(e){e.block.showHelp()},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},t.ContextMenuItems.registerBlockOptions_=function(){t.ContextMenuItems.registerDuplicate(),t.ContextMenuItems.registerComment(),t.ContextMenuItems.registerInline(),t.ContextMenuItems.registerCollapseExpandBlock(),t.ContextMenuItems.registerDisable(),t.ContextMenuItems.registerDelete(),t.ContextMenuItems.registerHelp()},t.ContextMenuItems.registerDefaultOptions=function(){t.ContextMenuItems.registerWorkspaceOptions_(),t.ContextMenuItems.registerBlockOptions_()},t.ContextMenuItems.registerDefaultOptions(),t.Mutator=function(e){t.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},t.utils.object.inherits(t.Mutator,t.Icon),t.Mutator.prototype.workspace_=null,t.Mutator.prototype.workspaceWidth_=0,t.Mutator.prototype.workspaceHeight_=0,t.Mutator.prototype.setBlock=function(e){this.block_=e},t.Mutator.prototype.getWorkspace=function(){return this.workspace_},t.Mutator.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},t.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&t.Icon.prototype.iconClick_.call(this,e)},t.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var a,e=t.utils.xml.createElement("xml"),n=0;a=this.quarkNames_[n];n++){var f=t.utils.xml.createElement("block");f.setAttribute("type",a),e.appendChild(f)}else e=null;return(n=new t.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT,(a=!!e)&&(n.languageTree=t.utils.toolbox.convertToolboxDefToJson(e)),this.workspace_=new t.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(t.Events.disableOrphans),e=a?this.workspace_.addFlyout(t.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),e&&n.insertBefore(e,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},t.Mutator.prototype.updateEditable=function(){t.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&t.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},t.Mutator.prototype.resizeBubble_=function(){var e=2*t.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),a=n.width+n.x,f=n.height+3*e,E=this.workspace_.getFlyout();if(E){var I=E.getWorkspace().getMetricsManager().getScrollMetrics();f=Math.max(f,I.height+20),a+=E.getWidth()}this.block_.RTL&&(a=-n.x),a+=3*e,(Math.abs(this.workspaceWidth_-a)>e||Math.abs(this.workspaceHeight_-f)>e)&&(this.workspaceWidth_=a,this.workspaceHeight_=f,this.bubble_.setBubbleSize(a+e,f+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},t.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},t.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"mutator")),e){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;e=this.workspace_.getFlyout(),n&&(e.init(this.workspace_),e.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var f,a=0;f=n[a];a++)f.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),e?(n=2*e.CORNER_RADIUS,e=this.rootBlock_.RTL?e.getWidth()+n:n):e=n=16,this.block_.RTL&&(e=-e),this.rootBlock_.moveBy(e,n),this.block_.saveConnections){var E=this,I=this.block_;I.saveConnections(this.rootBlock_),this.sourceListener_=function(){I.saveConnections(E.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},t.Mutator.prototype.workspaceChanged_=function(e){if(!(e.isUiEvent||e.type==t.Events.CHANGE&&"disabled"==e.element)){if(!this.workspace_.isDragging()){e=this.workspace_.getTopBlocks(!1);for(var a,n=0;a=e[n];n++){var f=a.getRelativeToSurfaceXY();if(20>f.y&&a.moveBy(0,20-f.y),a.RTL){var E=-20,I=this.workspace_.getFlyout();I&&(E-=I.getWidth()),f.x>E&&a.moveBy(E-f.x,0)}else 20>f.x&&a.moveBy(20-f.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(t.Events.setGroup(!0),e=(e=(a=this.block_).mutationToDom())&&t.Xml.domToText(e),n=a.rendered,a.rendered=!1,a.compose(this.rootBlock_),a.rendered=n,a.initSvg(),a.rendered&&a.render(),e!=(n=(n=a.mutationToDom())&&t.Xml.domToText(n))){t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(a,"mutation",null,e,n));var Y=t.Events.getGroup();setTimeout(function(){t.Events.setGroup(Y),a.bumpNeighbours(),t.Events.setGroup(!1)},t.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),t.Events.setGroup(!1)}}},t.Mutator.prototype.dispose=function(){this.block_.mutator=null,t.Icon.prototype.dispose.call(this)},t.Mutator.prototype.updateBlockStyle=function(){var e=this.workspace_;if(e&&e.getAllBlocks(!1)){for(var f,n=e.getAllBlocks(!1),a=0;f=n[a];a++)f.setStyle(f.getStyleName());if(a=e.getFlyout())for(e=a.workspace_.getAllBlocks(!1),a=0;f=e[a];a++)f.setStyle(f.getStyleName())}},t.Mutator.reconnect=function(e,n,a){if(!e||!e.getSourceBlock().workspace)return!1;a=n.getInput(a).connection;var f=e.targetBlock();return!(f&&f!=n||a.targetConnection==e||(a.isConnected()&&a.disconnect(),a.connect(e),0))},t.Mutator.findParentWs=function(e){var n=null;if(e&&e.options){var a=e.options.parentWorkspace;e.isFlyout?a&&a.options&&(n=a.options.parentWorkspace):a&&(n=a)}return n},t.FieldTextInput=function(e,n,a){this.spellcheck_=!0,t.FieldTextInput.superClass_.constructor.call(this,e,n,a),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},t.utils.object.inherits(t.FieldTextInput,t.Field),t.FieldTextInput.prototype.DEFAULT_VALUE="",t.FieldTextInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldTextInput(n,void 0,e)},t.FieldTextInput.prototype.SERIALIZABLE=!0,t.FieldTextInput.BORDERRADIUS=4,t.FieldTextInput.prototype.CURSOR="text",t.FieldTextInput.prototype.configure_=function(e){t.FieldTextInput.superClass_.configure_.call(this,e),"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)},t.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var f,e=0,n=0,a=0;f=this.sourceBlock_.inputList[a];a++){for(var E=0;f.fieldRow[E];E++)e++;f.connection&&n++}this.fullBlockClickTarget_=1>=e&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},t.FieldTextInput.prototype.doClassValidation_=function(e){return null==e?null:String(e)},t.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))},t.FieldTextInput.prototype.doValueUpdate_=function(e){this.isTextValid_=!0,this.value_=e,this.isBeingEdited_||(this.isDirty_=!0)},t.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},t.FieldTextInput.prototype.render_=function(){if(t.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var e=this.htmlInput_;this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0))}},t.FieldTextInput.prototype.setSpellcheck=function(e){e!=this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},t.FieldTextInput.prototype.showEditor_=function(e,n){this.workspace_=this.sourceBlock_.workspace,!(e=n||!1)&&(t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e)},t.FieldTextInput.prototype.showPromptEditor_=function(){t.prompt(t.Msg.CHANGE_VALUE_TITLE,this.getText(),function(e){this.setValue(this.getValueFromEditorText_(e))}.bind(this))},t.FieldTextInput.prototype.showInlineEditor_=function(e){t.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},t.FieldTextInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV;t.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var a=this.workspace_.getScale(),f=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";if(e.style.fontSize=f,n.style.fontSize=f,f=t.FieldTextInput.BORDERRADIUS*a+"px",this.fullBlockClickTarget_){f=((f=this.getScaledBBox()).bottom-f.top)/2+"px";var E=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*a+"px solid "+E,e.style.borderRadius=f,e.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(e.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*a+"px")}return n.style.borderRadius=f,e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},t.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var e=t.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,t.utils.dom.removeClass(this.getClickTarget_(),"editing")},t.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=t.browserEvents.conditionalBind(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=t.browserEvents.conditionalBind(e,"input",this,this.onHtmlInputChange_)},t.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(t.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},t.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==t.utils.KeyCodes.ENTER?(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.TAB&&(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},t.FieldTextInput.prototype.onHtmlInputChange_=function(e){(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,t.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),this.resizeEditor_(),t.Events.setGroup(!1))},t.FieldTextInput.prototype.setEditorValue_=function(e){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e)},t.FieldTextInput.prototype.resizeEditor_=function(){var e=t.WidgetDiv.DIV,n=this.getScaledBBox();e.style.width=n.right-n.left+"px",e.style.height=n.bottom-n.top+"px",n=new t.utils.Coordinate(this.sourceBlock_.RTL?n.right-e.offsetWidth:n.left,n.top),e.style.left=n.x+"px",e.style.top=n.y+"px"},t.FieldTextInput.prototype.isTabNavigable=function(){return!0},t.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},t.FieldTextInput.prototype.getEditorText_=function(e){return String(e)},t.FieldTextInput.prototype.getValueFromEditorText_=function(e){return e},t.fieldRegistry.register("field_input",t.FieldTextInput),t.FieldAngle=function(e,n,a){this.clockwise_=t.FieldAngle.CLOCKWISE,this.offset_=t.FieldAngle.OFFSET,this.wrap_=t.FieldAngle.WRAP,this.round_=t.FieldAngle.ROUND,t.FieldAngle.superClass_.constructor.call(this,e,n,a),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},t.utils.object.inherits(t.FieldAngle,t.FieldTextInput),t.FieldAngle.prototype.DEFAULT_VALUE=0,t.FieldAngle.fromJson=function(e){return new t.FieldAngle(e.angle,void 0,e)},t.FieldAngle.prototype.SERIALIZABLE=!0,t.FieldAngle.ROUND=15,t.FieldAngle.HALF=50,t.FieldAngle.CLOCKWISE=!1,t.FieldAngle.OFFSET=0,t.FieldAngle.WRAP=360,t.FieldAngle.RADIUS=t.FieldAngle.HALF-1,t.FieldAngle.prototype.configure_=function(e){switch(t.FieldAngle.superClass_.configure_.call(this,e),e.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=e.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=e.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=e.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))},t.FieldAngle.prototype.initView=function(){t.FieldAngle.superClass_.initView.call(this),this.symbol_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},t.FieldAngle.prototype.render_=function(){t.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},t.FieldAngle.prototype.showEditor_=function(e){t.FieldAngle.superClass_.showEditor_.call(this,e,t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD),this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.editor_),t.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},t.FieldAngle.prototype.dropdownCreate_=function(){var e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",height:2*t.FieldAngle.HALF+"px",width:2*t.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:t.FieldAngle.HALF,cy:t.FieldAngle.HALF,r:t.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyAngleGauge"},e),this.line_=t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF,y1:t.FieldAngle.HALF,class:"blocklyAngleLine"},e);for(var a=0;360>a;a+=15)t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF+t.FieldAngle.RADIUS,y1:t.FieldAngle.HALF,x2:t.FieldAngle.HALF+t.FieldAngle.RADIUS-(a%45==0?10:5),y2:t.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+a+","+t.FieldAngle.HALF+","+t.FieldAngle.HALF+")"},e);this.clickWrapper_=t.browserEvents.conditionalBind(e,"click",this,this.hide_),this.clickSurfaceWrapper_=t.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=t.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=e},t.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(t.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(t.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(t.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},t.FieldAngle.prototype.hide_=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hide()},t.FieldAngle.prototype.onMouseMove_=function(e){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),a=e.clientX-n.left-t.FieldAngle.HALF;e=e.clientY-n.top-t.FieldAngle.HALF,n=Math.atan(-e/a),isNaN(n)||(n=t.utils.math.toDegrees(n),0>a?n+=180:0<e&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},t.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(e){this.round_&&(e=Math.round(e/this.round_)*this.round_),(e=this.wrapValue_(e))!=this.value_&&this.setEditorValue_(e)},t.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())+this.offset_,n=t.utils.math.toRadians(e%360);e=["M ",t.FieldAngle.HALF,",",t.FieldAngle.HALF];var a=t.FieldAngle.HALF,f=t.FieldAngle.HALF;if(!isNaN(n)){var E=Number(this.clockwise_),I=t.utils.math.toRadians(this.offset_),Y=Math.cos(I)*t.FieldAngle.RADIUS,ee=Math.sin(I)*-t.FieldAngle.RADIUS;E&&(n=2*I-n),a+=Math.cos(n)*t.FieldAngle.RADIUS,f-=Math.sin(n)*t.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-I)/Math.PI)%2),E&&(n=1-n),e.push(" l ",Y,",",ee," A ",t.FieldAngle.RADIUS,",",t.FieldAngle.RADIUS," 0 ",n," ",E," ",a,",",f," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",a),this.line_.setAttribute("y2",f)}},t.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){var n;if(t.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e),e.keyCode===t.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:e.keyCode===t.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:e.keyCode===t.utils.KeyCodes.DOWN?n=-1:e.keyCode===t.utils.KeyCodes.UP&&(n=1),n){var a=this.getValue();this.displayMouseOrKeyboardValue_(a+n*this.round_),e.preventDefault(),e.stopPropagation()}},t.FieldAngle.prototype.doClassValidation_=function(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)},t.FieldAngle.prototype.wrapValue_=function(e){return 0>(e%=360)&&(e+=360),e>this.wrap_&&(e-=360),e},t.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),t.fieldRegistry.register("field_angle",t.FieldAngle),t.FieldCheckbox=function(e,n,a){this.checkChar_=null,t.FieldCheckbox.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.FieldCheckbox,t.Field),t.FieldCheckbox.prototype.DEFAULT_VALUE=!1,t.FieldCheckbox.fromJson=function(e){return new t.FieldCheckbox(e.checked,void 0,e)},t.FieldCheckbox.CHECK_CHAR="\u2713",t.FieldCheckbox.prototype.SERIALIZABLE=!0,t.FieldCheckbox.prototype.CURSOR="default",t.FieldCheckbox.prototype.configure_=function(e){t.FieldCheckbox.superClass_.configure_.call(this,e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)},t.FieldCheckbox.prototype.initView=function(){t.FieldCheckbox.superClass_.initView.call(this),t.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},t.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},t.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||t.FieldCheckbox.CHECK_CHAR},t.FieldCheckbox.prototype.setCheckCharacter=function(e){this.checkChar_=e,this.forceRerender()},t.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},t.FieldCheckbox.prototype.doClassValidation_=function(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null},t.FieldCheckbox.prototype.doValueUpdate_=function(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},t.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},t.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},t.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},t.FieldCheckbox.prototype.convertValueToBool_=function(e){return"string"==typeof e?"TRUE"==e:!!e},t.fieldRegistry.register("field_checkbox",t.FieldCheckbox),t.FieldColour=function(e,n,a){t.FieldColour.superClass_.constructor.call(this,e,n,a),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},t.utils.object.inherits(t.FieldColour,t.Field),t.FieldColour.fromJson=function(e){return new t.FieldColour(e.colour,void 0,e)},t.FieldColour.prototype.SERIALIZABLE=!0,t.FieldColour.prototype.CURSOR="default",t.FieldColour.prototype.isDirty_=!1,t.FieldColour.prototype.colours_=null,t.FieldColour.prototype.titles_=null,t.FieldColour.prototype.columns_=0,t.FieldColour.prototype.configure_=function(e){t.FieldColour.superClass_.configure_.call(this,e),e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)},t.FieldColour.prototype.initView=function(){this.size_=new t.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},t.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},t.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:t.utils.colour.parse(e)},t.FieldColour.prototype.doValueUpdate_=function(e){this.value_=e,this.borderRect_?this.borderRect_.style.fill=e:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},t.FieldColour.prototype.getText=function(){var e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e},t.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),t.FieldColour.prototype.DEFAULT_VALUE=t.FieldColour.COLOURS[0],t.FieldColour.TITLES=[],t.FieldColour.COLUMNS=7,t.FieldColour.prototype.setColours=function(e,n){return this.colours_=e,n&&(this.titles_=n),this},t.FieldColour.prototype.setColumns=function(e){return this.columns_=e,this},t.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.picker_),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),t.DropDownDiv.hideIfOwner(this))},t.FieldColour.prototype.onKeyDown_=function(e){var n=!1;e.keyCode===t.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):e.keyCode===t.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):e.keyCode===t.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):e.keyCode===t.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):e.keyCode===t.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),t.DropDownDiv.hideWithoutAnimation(),n=!0),n&&e.stopPropagation()},t.FieldColour.prototype.moveHighlightBy_=function(e,n){var a=this.colours_||t.FieldColour.COLOURS,f=this.columns_||t.FieldColour.COLUMNS,E=this.highlightedIndex_%f,I=Math.floor(this.highlightedIndex_/f);E+=e,I+=n,0>e?0>E&&0<I?(E=f-1,I--):0>E&&(E=0):0<e?E>f-1&&I<Math.floor(a.length/f)-1?(E=0,I++):E>f-1&&E--:0>n?0>I&&(I=0):0<n&&I>Math.floor(a.length/f)-1&&(I=Math.floor(a.length/f)-1),this.setHighlightedCell_(this.picker_.childNodes[I].childNodes[E],I*f+E)},t.FieldColour.prototype.onMouseMove_=function(e){var n=(e=e.target)&&Number(e.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(e,n)},t.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&t.utils.dom.removeClass(e,"blocklyColourHighlighted")},t.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return n?n.childNodes[this.highlightedIndex_%e]:null},t.FieldColour.prototype.setHighlightedCell_=function(e,n){var a=this.getHighlighted_();a&&t.utils.dom.removeClass(a,"blocklyColourHighlighted"),t.utils.dom.addClass(e,"blocklyColourHighlighted"),this.highlightedIndex_=n,t.utils.aria.setState(this.picker_,t.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))},t.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.colours_||t.FieldColour.COLOURS,a=this.titles_||t.FieldColour.TITLES,f=this.getValue(),E=document.createElement("table");E.className="blocklyColourTable",E.tabIndex=0,E.dir="ltr",t.utils.aria.setRole(E,t.utils.aria.Role.GRID),t.utils.aria.setState(E,t.utils.aria.State.EXPANDED,!0),t.utils.aria.setState(E,t.utils.aria.State.ROWCOUNT,Math.floor(n.length/e)),t.utils.aria.setState(E,t.utils.aria.State.COLCOUNT,e);for(var I,Y=0;Y<n.length;Y++){Y%e==0&&(I=document.createElement("tr"),t.utils.aria.setRole(I,t.utils.aria.Role.ROW),E.appendChild(I));var ee=document.createElement("td");I.appendChild(ee),ee.label=n[Y],ee.title=a[Y]||n[Y],ee.id=t.utils.IdGenerator.getNextUniqueId(),ee.setAttribute("data-index",Y),t.utils.aria.setRole(ee,t.utils.aria.Role.GRIDCELL),t.utils.aria.setState(ee,t.utils.aria.State.LABEL,n[Y]),t.utils.aria.setState(ee,t.utils.aria.State.SELECTED,n[Y]==f),ee.style.backgroundColor=n[Y],n[Y]==f&&(ee.className="blocklyColourSelected",this.highlightedIndex_=Y)}this.onClickWrapper_=t.browserEvents.conditionalBind(E,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=t.browserEvents.conditionalBind(E,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=t.browserEvents.conditionalBind(E,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=t.browserEvents.conditionalBind(E,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=t.browserEvents.conditionalBind(E,"keydown",this,this.onKeyDown_),this.picker_=E},t.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(t.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(t.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(t.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(t.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},t.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),t.fieldRegistry.register("field_colour",t.FieldColour),t.FieldDropdown=function(e,n,a){"function"!=typeof e&&t.FieldDropdown.validateOptions_(e),this.menuGenerator_=e,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],t.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,a),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},t.utils.object.inherits(t.FieldDropdown,t.Field),t.FieldDropdown.fromJson=function(e){return new t.FieldDropdown(e.options,void 0,e)},t.FieldDropdown.prototype.fromXml=function(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)},t.FieldDropdown.prototype.SERIALIZABLE=!0,t.FieldDropdown.CHECKMARK_OVERHANG=25,t.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,t.FieldDropdown.IMAGE_Y_OFFSET=5,t.FieldDropdown.IMAGE_Y_PADDING=2*t.FieldDropdown.IMAGE_Y_OFFSET,t.FieldDropdown.ARROW_CHAR=t.utils.userAgent.ANDROID?"\u25bc":"\u25be",t.FieldDropdown.prototype.CURSOR="default",t.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&t.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},t.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},t.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?t.FieldDropdown.ARROW_CHAR+" ":" "+t.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},t.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},t.FieldDropdown.prototype.showEditor_=function(e){if(this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new t.utils.Coordinate(e.clientX,e.clientY):null,this.menu_.render(t.DropDownDiv.getContentDiv()),e=this.menu_.getElement(),t.utils.dom.addClass(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;t.DropDownDiv.setColour(e,n)}t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},t.FieldDropdown.prototype.dropdownCreate_=function(){var e=new t.Menu;e.setRole(t.utils.aria.Role.LISTBOX),this.menu_=e;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var a=0;a<n.length;a++){var f=n[a][0],E=n[a][1];if("object"==typeof f){var I=new Image(f.width,f.height);I.src=f.src,I.alt=f.alt||"",f=I}(f=new t.MenuItem(f,E)).setRole(t.utils.aria.Role.OPTION),f.setRightToLeft(this.sourceBlock_.RTL),f.setCheckable(!0),e.addChild(f),f.setChecked(E==this.value_),E==this.value_&&(this.selectedMenuItem_=f),f.onAction(this.handleMenuActionEvent_,this)}},t.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},t.FieldDropdown.prototype.handleMenuActionEvent_=function(e){t.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,e)},t.FieldDropdown.prototype.onItemSelected_=function(e,n){this.setValue(n.getValue())},t.FieldDropdown.prototype.trimOptions_=function(){var e=this.menuGenerator_;if(Array.isArray(e)){for(var n=!1,a=0;a<e.length;a++){var f=e[a][0];"string"==typeof f?e[a][0]=t.utils.replaceMessageReferences(f):(null!=f.alt&&(e[a][0].alt=t.utils.replaceMessageReferences(f.alt)),n=!0)}if(!(n||2>e.length)){for(n=[],a=0;a<e.length;a++)n.push(e[a][0]);a=t.utils.string.shortestStringLength(n),f=t.utils.string.commonWordPrefix(n,a);var E=t.utils.string.commonWordSuffix(n,a);!f&&!E||a<=f+E||(f&&(this.prefixField=n[0].substring(0,f-1)),E&&(this.suffixField=n[0].substr(1-E)),this.menuGenerator_=t.FieldDropdown.applyTrim_(e,f,E))}}},t.FieldDropdown.applyTrim_=function(e,n,a){for(var f=[],E=0;E<e.length;E++){var I=e[E][0],Y=e[E][1];I=I.substring(n,I.length-a),f[E]=[I,Y]}return f},t.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},t.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),t.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},t.FieldDropdown.prototype.doClassValidation_=function(e){for(var E,n=!1,a=this.getOptions(!0),f=0;E=a[f];f++)if(E[1]==e){n=!0;break}return n?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)},t.FieldDropdown.prototype.doValueUpdate_=function(e){t.FieldDropdown.superClass_.doValueUpdate_.call(this,e),e=this.getOptions(!0);for(var a,n=0;a=e[n];n++)a[1]==this.value_&&(this.selectedOption_=a)},t.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},t.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var e=this.selectedOption_&&this.selectedOption_[0];e&&"object"==typeof e?this.renderSelectedImage_(e):this.renderSelectedText_(),this.positionBorderRect_()},t.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",e.src),this.imageElement_.setAttribute("height",e.height),this.imageElement_.setAttribute("width",e.width);var n=Number(e.height);e=Number(e.width);var a=!!this.borderRect_,f=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+t.FieldDropdown.IMAGE_Y_PADDING);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var E=this.svgArrow_?this.positionSVGArrow_(e+a,f/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):t.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=e+E+2*a,this.size_.height=f;var I=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",a+E):(I=e+E,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",a)),this.imageElement_.setAttribute("y",f/2-n/2),this.positionTextElement_(I+a,e+E)},t.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),t.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var e=!!this.borderRect_,n=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),a=t.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var f=0;this.svgArrow_&&(f=this.positionSVGArrow_(a+e,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=a+f+2*e,this.size_.height=n,this.positionTextElement_(e,a)},t.FieldDropdown.prototype.positionSVGArrow_=function(e,n){if(!this.svgArrow_)return 0;var a=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,f=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,E=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?a:e+f)+","+n+")"),E+f},t.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var e=this.selectedOption_[0];return"object"==typeof e?e.alt:e},t.FieldDropdown.validateOptions_=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,a=0;a<e.length;++a){var f=e[a];Array.isArray(f)?"string"!=typeof f[1]?(n=!0,console.error("Invalid option["+a+"]: Each FieldDropdown option id must be a string. Found "+f[1]+" in: ",f)):f[0]&&"string"!=typeof f[0]&&"string"!=typeof f[0].src&&(n=!0,console.error("Invalid option["+a+"]: Each FieldDropdown option must have a string label or image description. Found"+f[0]+" in: ",f)):(n=!0,console.error("Invalid option["+a+"]: Each FieldDropdown option must be an array. Found: ",f))}if(n)throw TypeError("Found invalid FieldDropdown options.")},t.fieldRegistry.register("field_dropdown",t.FieldDropdown),t.FieldLabelSerializable=function(e,n,a){t.FieldLabelSerializable.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.FieldLabelSerializable,t.FieldLabel),t.FieldLabelSerializable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabelSerializable(n,void 0,e)},t.FieldLabelSerializable.prototype.EDITABLE=!1,t.FieldLabelSerializable.prototype.SERIALIZABLE=!0,t.fieldRegistry.register("field_label_serializable",t.FieldLabelSerializable),t.FieldImage=function(e,n,a,f,E,I,Y){if(!e)throw Error("Src value of an image field is required");if(e=t.utils.replaceMessageReferences(e),a=Number(t.utils.replaceMessageReferences(a)),n=Number(t.utils.replaceMessageReferences(n)),isNaN(a)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=a||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",t.FieldImage.superClass_.constructor.call(this,e,null,Y),Y||(this.flipRtl_=!!I,this.altText_=t.utils.replaceMessageReferences(f)||""),this.size_=new t.utils.Size(n,a+t.FieldImage.Y_PADDING),this.imageHeight_=a,this.clickHandler_=null,"function"==typeof E&&(this.clickHandler_=E),this.imageElement_=null},t.utils.object.inherits(t.FieldImage,t.Field),t.FieldImage.prototype.DEFAULT_VALUE="",t.FieldImage.fromJson=function(e){return new t.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)},t.FieldImage.Y_PADDING=1,t.FieldImage.prototype.EDITABLE=!1,t.FieldImage.prototype.isDirty_=!1,t.FieldImage.prototype.configure_=function(e){t.FieldImage.superClass_.configure_.call(this,e),this.flipRtl_=!!e.flipRtl,this.altText_=t.utils.replaceMessageReferences(e.alt)||""},t.FieldImage.prototype.initView=function(){this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},t.FieldImage.prototype.updateSize_=function(){},t.FieldImage.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:e},t.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},t.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},t.FieldImage.prototype.setAlt=function(e){e!=this.altText_&&(this.altText_=e||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},t.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},t.FieldImage.prototype.setOnClickHandler=function(e){this.clickHandler_=e},t.FieldImage.prototype.getText_=function(){return this.altText_},t.fieldRegistry.register("field_image",t.FieldImage),t.FieldMultilineInput=function(e,n,a){t.FieldMultilineInput.superClass_.constructor.call(this,e,n,a),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},t.utils.object.inherits(t.FieldMultilineInput,t.FieldTextInput),t.FieldMultilineInput.prototype.configure_=function(e){t.FieldMultilineInput.superClass_.configure_.call(this,e),e.maxLines&&this.setMaxLines(e.maxLines)},t.FieldMultilineInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldMultilineInput(n,void 0,e)},t.FieldMultilineInput.prototype.toXml=function(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e},t.FieldMultilineInput.prototype.fromXml=function(e){this.setValue(e.textContent.replace(/&#10;/g,"\n"))},t.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},t.FieldMultilineInput.prototype.getDisplayText_=function(){var e=this.getText();if(!e)return t.Field.NBSP;var n=e.split("\n");e="";for(var a=this.isOverflowedY_?this.maxLines_:n.length,f=0;f<a;f++){var E=n[f];E.length>this.maxDisplayLength?E=E.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&f===a-1&&(E=E.substring(0,E.length-3)+"..."),e+=E=E.replace(/\s/g,t.Field.NBSP),f!==a-1&&(e+="\n")}return this.sourceBlock_.RTL&&(e+="\u200f"),e},t.FieldMultilineInput.prototype.doValueUpdate_=function(e){t.FieldMultilineInput.superClass_.doValueUpdate_.call(this,e),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},t.FieldMultilineInput.prototype.render_=function(){for(var e;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");for(var n=0,a=0;a<e.length;a++){var f=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(e[a])),n+=f}this.isBeingEdited_&&(e=this.htmlInput_,this.isOverflowedY_?t.utils.dom.addClass(e,"blocklyHtmlTextAreaInputOverflowedY"):t.utils.dom.removeClass(e,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0)))},t.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,n=0,a=0,f=0;f<e.length;f++){var E=t.utils.dom.getTextWidth(e[f]);E>n&&(n=E),a+=this.getConstants().FIELD_TEXT_HEIGHT+(0<f?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){e=this.value_.split("\n"),E=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var I=this.getConstants().FIELD_TEXT_FONTSIZE,Y=this.getConstants().FIELD_TEXT_FONTWEIGHT,ee=this.getConstants().FIELD_TEXT_FONTFAMILY;for(f=0;f<e.length;f++){e[f].length>this.maxDisplayLength&&(e[f]=e[f].substring(0,this.maxDisplayLength)),E.textContent=e[f];var _e=t.utils.dom.getFastTextWidth(E,I,Y,ee);_e>n&&(n=_e)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(a+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",a)),this.size_.width=n,this.size_.height=a,this.positionBorderRect_()},t.FieldMultilineInput.prototype.showEditor_=function(e,n){t.FieldMultilineInput.superClass_.showEditor_.call(this,e,n),this.forceRerender()},t.FieldMultilineInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV,n=this.workspace_.getScale(),a=document.createElement("textarea");a.className="blocklyHtmlInput blocklyHtmlTextAreaInput",a.setAttribute("spellcheck",this.spellcheck_);var f=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";e.style.fontSize=f,a.style.fontSize=f,a.style.borderRadius=t.FieldTextInput.BORDERRADIUS*n+"px",f=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var E=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return a.style.padding=E+"px "+f+"px "+E+"px "+f+"px",f=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,a.style.lineHeight=f*n+"px",e.appendChild(a),a.value=a.defaultValue=this.getEditorText_(this.value_),a.untypedDefaultValue_=this.value_,a.oldValue_=null,t.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(a),a},t.FieldMultilineInput.prototype.setMaxLines=function(e){"number"==typeof e&&0<e&&e!==this.maxLines_&&(this.maxLines_=e,this.forceRerender())},t.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},t.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==t.utils.KeyCodes.ENTER&&t.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)},t.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),t.fieldRegistry.register("field_multilinetext",t.FieldMultilineInput),t.FieldNumber=function(e,n,a,f,E,I){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,t.FieldNumber.superClass_.constructor.call(this,e,E,I),I||this.setConstraints(n,a,f)},t.utils.object.inherits(t.FieldNumber,t.FieldTextInput),t.FieldNumber.prototype.DEFAULT_VALUE=0,t.FieldNumber.fromJson=function(e){return new t.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)},t.FieldNumber.prototype.SERIALIZABLE=!0,t.FieldNumber.prototype.configure_=function(e){t.FieldNumber.superClass_.configure_.call(this,e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)},t.FieldNumber.prototype.setConstraints=function(e,n,a){this.setMinInternal_(e),this.setMaxInternal_(n),this.setPrecisionInternal_(a),this.setValue(this.getValue())},t.FieldNumber.prototype.setMin=function(e){this.setMinInternal_(e),this.setValue(this.getValue())},t.FieldNumber.prototype.setMinInternal_=function(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))},t.FieldNumber.prototype.getMin=function(){return this.min_},t.FieldNumber.prototype.setMax=function(e){this.setMaxInternal_(e),this.setValue(this.getValue())},t.FieldNumber.prototype.setMaxInternal_=function(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))},t.FieldNumber.prototype.getMax=function(){return this.max_},t.FieldNumber.prototype.setPrecision=function(e){this.setPrecisionInternal_(e),this.setValue(this.getValue())},t.FieldNumber.prototype.setPrecisionInternal_=function(e){this.precision_=Number(e)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var a=n.indexOf(".");this.decimalPlaces_=-1==a?e?0:null:n.length-a-1},t.FieldNumber.prototype.getPrecision=function(){return this.precision_},t.FieldNumber.prototype.doClassValidation_=function(e){return null===e||(e=(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(e=Number(e.toFixed(this.decimalPlaces_))),e)},t.FieldNumber.prototype.widgetCreate_=function(){var e=t.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMAX,this.max_),e},t.fieldRegistry.register("field_number",t.FieldNumber),t.FieldVariable=function(e,n,a,f,E){this.menuGenerator_=t.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof e?e:"",this.size_=new t.utils.Size(0,0),E&&this.configure_(E),n&&this.setValidator(n),E||this.setTypes_(a,f)},t.utils.object.inherits(t.FieldVariable,t.FieldDropdown),t.FieldVariable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.variable);return new t.FieldVariable(n,void 0,void 0,void 0,e)},t.FieldVariable.prototype.SERIALIZABLE=!0,t.FieldVariable.prototype.configure_=function(e){t.FieldVariable.superClass_.configure_.call(this,e),this.setTypes_(e.variableTypes,e.defaultType)},t.FieldVariable.prototype.initModel=function(){if(!this.variable_){var e=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(e.getId())}},t.FieldVariable.prototype.shouldAddBorderRect_=function(){return t.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},t.FieldVariable.prototype.fromXml=function(e){var n=e.getAttribute("id"),a=e.textContent,f=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,a,f),null!=f&&f!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+t.Xml.domToText(e)+".");this.setValue(n.getId())},t.FieldVariable.prototype.toXml=function(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e},t.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");t.FieldVariable.superClass_.setSourceBlock.call(this,e)},t.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},t.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},t.FieldVariable.prototype.getVariable=function(){return this.variable_},t.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},t.FieldVariable.prototype.doClassValidation_=function(e){if(null===e)return null;var n=t.Variables.getVariable(this.sourceBlock_.workspace,e);return n?this.typeIsAllowed_(n=n.type)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},t.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=t.Variables.getVariable(this.sourceBlock_.workspace,e),t.FieldVariable.superClass_.doValueUpdate_.call(this,e)},t.FieldVariable.prototype.typeIsAllowed_=function(e){var n=this.getVariableTypes_();if(!n)return!0;for(var a=0;a<n.length;a++)if(e==n[a])return!0;return!1},t.FieldVariable.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},t.FieldVariable.prototype.setTypes_=function(e,n){if(n=n||"",null==e||null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var a=!1,f=0;f<e.length;f++)e[f]==n&&(a=!0);if(!a)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=e},t.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},t.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var a=this.getVariableTypes_(),f=0;f<a.length;f++){var E=this.sourceBlock_.workspace.getVariablesOfType(a[f]);n=n.concat(E)}for(n.sort(t.VariableModel.compareByName),a=[],f=0;f<n.length;f++)a[f]=[n[f].name,n[f].getId()];return a.push([t.Msg.RENAME_VARIABLE,t.RENAME_VARIABLE_ID]),t.Msg.DELETE_VARIABLE&&a.push([t.Msg.DELETE_VARIABLE.replace("%1",e),t.DELETE_VARIABLE_ID]),a},t.FieldVariable.prototype.onItemSelected_=function(e,n){if(e=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(e==t.RENAME_VARIABLE_ID)return void t.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(e==t.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(e)},t.FieldVariable.prototype.referencesVariables=function(){return!0},t.fieldRegistry.register("field_variable",t.FieldVariable),t.utils.svgPaths={},t.utils.svgPaths.point=function(e,n){return" "+e+","+n+" "},t.utils.svgPaths.curve=function(e,n){return" "+e+n.join("")},t.utils.svgPaths.moveTo=function(e,n){return" M "+e+","+n+" "},t.utils.svgPaths.moveBy=function(e,n){return" m "+e+","+n+" "},t.utils.svgPaths.lineTo=function(e,n){return" l "+e+","+n+" "},t.utils.svgPaths.line=function(e){return" l"+e.join("")},t.utils.svgPaths.lineOnAxis=function(e,n){return" "+e+" "+n+" "},t.utils.svgPaths.arc=function(e,n,a,f){return e+" "+a+" "+a+" "+n+f},t.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=t.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},t.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},t.blockRendering.ConstantProvider.prototype.setTheme=function(e){this.blockStyles=Object.create(null);var a,n=e.blockStyles;for(a in n)this.blockStyles[a]=this.validatedBlockStyle_(n[a]);this.setDynamicProperties_(e)},t.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=null!=e.startHats?e.startHats:this.ADD_START_HATS},t.blockRendering.ConstantProvider.prototype.setFontConstants_=function(e){this.FIELD_TEXT_FONTFAMILY=e.fontStyle&&null!=e.fontStyle.family?e.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=e.fontStyle&&null!=e.fontStyle.weight?e.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=e.fontStyle&&null!=e.fontStyle.size?e.fontStyle.size:this.FIELD_TEXT_FONTSIZE,e=t.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline},t.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},t.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(e){var n="auto_"+e;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(e)),{style:this.blockStyles[n],name:n}},t.blockRendering.ConstantProvider.prototype.getBlockStyle=function(e){return this.blockStyles[e||""]||(e&&0==e.indexOf("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))},t.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(e){return this.validatedBlockStyle_({colourPrimary:e})},t.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(e){var n={};return e&&t.utils.object.mixin(n,e),e=t.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?t.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?t.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},t.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#fff",e,.6)||e},t.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#fff",e,.3)||e},t.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&t.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&t.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&t.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},t.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.line([t.utils.svgPaths.point(n,e/4),t.utils.svgPaths.point(2*-n,e/2),t.utils.svgPaths.point(n,e/4)])}},t.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(30,-e),t.utils.svgPaths.point(70,-e),t.utils.svgPaths.point(n,0)])}},t.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(I){var Y=-(I=I?-1:1),ee=a/2,_e=ee+2.5,De=ee+.5,Ae=t.utils.svgPaths.point(-n,I*ee);return ee=t.utils.svgPaths.point(n,I*ee),t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(0,I*_e),t.utils.svgPaths.point(-n,Y*De),Ae])+t.utils.svgPaths.curve("s",[t.utils.svgPaths.point(n,2.5*Y),ee])}var n=this.TAB_WIDTH,a=this.TAB_HEIGHT,f=e(!0),E=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:a,pathDown:E,pathUp:f}},t.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(Y){return t.utils.svgPaths.line([t.utils.svgPaths.point(Y*f,a),t.utils.svgPaths.point(3*Y,0),t.utils.svgPaths.point(Y*f,-a)])}var n=this.NOTCH_WIDTH,a=this.NOTCH_HEIGHT,f=(n-3)/2,E=e(1),I=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:a,pathLeft:E,pathRight:I}},t.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e))}},t.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.moveBy(0,e)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,-e)),a=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e)),f=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,-e));return{topLeft:n,topRight:a,bottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e)),bottomLeft:f,rightHeight:e}},t.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},t.blockRendering.ConstantProvider.prototype.createDom=function(e,n,a){this.injectCSS_(n,a),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),a=t.utils.dom.createSvgElement(t.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,t.blockRendering.Debug&&(e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e)},t.blockRendering.ConstantProvider.prototype.injectCSS_=function(e,n){n=this.getCSS_(n),e="blockly-renderer-style-"+e,this.cssNode_=document.getElementById(e);var a=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=a:((n=document.createElement("style")).id=e,e=document.createTextNode(a),n.appendChild(e),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},t.blockRendering.ConstantProvider.prototype.getCSS_=function(e){return[e+" .blocklyText, ",e+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",e+" .blocklyText {","fill: #fff;","}",e+" .blocklyNonEditableText>rect,",e+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text {","fill: #000;","}",e+" .blocklyFlyoutLabelText {","fill: #000;","}",e+" .blocklyText.blocklyBubbleText {","fill: #000;","}",e+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",e+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",e+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",e+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",e+" .blocklyReplaceable .blocklyPathLight,",e+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",e+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},t.blockRendering.Types.LEFT_CORNER=t.blockRendering.Types.LEFT_SQUARE_CORNER|t.blockRendering.Types.LEFT_ROUND_CORNER,t.blockRendering.Types.RIGHT_CORNER=t.blockRendering.Types.RIGHT_SQUARE_CORNER|t.blockRendering.Types.RIGHT_ROUND_CORNER,t.blockRendering.Types.nextTypeValue_=16777216,t.blockRendering.Types.getType=function(e){return Object.prototype.hasOwnProperty.call(t.blockRendering.Types,e)||(t.blockRendering.Types[e]=t.blockRendering.Types.nextTypeValue_,t.blockRendering.Types.nextTypeValue_<<=1),t.blockRendering.Types[e]},t.blockRendering.Types.isField=function(e){return e.type&t.blockRendering.Types.FIELD},t.blockRendering.Types.isHat=function(e){return e.type&t.blockRendering.Types.HAT},t.blockRendering.Types.isIcon=function(e){return e.type&t.blockRendering.Types.ICON},t.blockRendering.Types.isSpacer=function(e){return e.type&t.blockRendering.Types.SPACER},t.blockRendering.Types.isInRowSpacer=function(e){return e.type&t.blockRendering.Types.IN_ROW_SPACER},t.blockRendering.Types.isInput=function(e){return e.type&t.blockRendering.Types.INPUT},t.blockRendering.Types.isExternalInput=function(e){return e.type&t.blockRendering.Types.EXTERNAL_VALUE_INPUT},t.blockRendering.Types.isInlineInput=function(e){return e.type&t.blockRendering.Types.INLINE_INPUT},t.blockRendering.Types.isStatementInput=function(e){return e.type&t.blockRendering.Types.STATEMENT_INPUT},t.blockRendering.Types.isPreviousConnection=function(e){return e.type&t.blockRendering.Types.PREVIOUS_CONNECTION},t.blockRendering.Types.isNextConnection=function(e){return e.type&t.blockRendering.Types.NEXT_CONNECTION},t.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(t.blockRendering.Types.PREVIOUS_CONNECTION|t.blockRendering.Types.NEXT_CONNECTION)},t.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&t.blockRendering.Types.LEFT_ROUND_CORNER},t.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_ROUND_CORNER},t.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&t.blockRendering.Types.LEFT_SQUARE_CORNER},t.blockRendering.Types.isRightSquareCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_SQUARE_CORNER},t.blockRendering.Types.isCorner=function(e){return e.type&t.blockRendering.Types.CORNER},t.blockRendering.Types.isJaggedEdge=function(e){return e.type&t.blockRendering.Types.JAGGED_EDGE},t.blockRendering.Types.isRow=function(e){return e.type&t.blockRendering.Types.ROW},t.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&t.blockRendering.Types.BETWEEN_ROW_SPACER},t.blockRendering.Types.isTopRow=function(e){return e.type&t.blockRendering.Types.TOP_ROW},t.blockRendering.Types.isBottomRow=function(e){return e.type&t.blockRendering.Types.BOTTOM_ROW},t.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(t.blockRendering.Types.TOP_ROW|t.blockRendering.Types.BOTTOM_ROW)},t.blockRendering.Types.isInputRow=function(e){return e.type&t.blockRendering.Types.INPUT_ROW},t.blockRendering.Measurable=function(e){this.height=this.width=0,this.type=t.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},t.blockRendering.Connection=function(e,n){t.blockRendering.Connection.superClass_.constructor.call(this,e),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=t.blockRendering.Types.CONNECTION},t.utils.object.inherits(t.blockRendering.Connection,t.blockRendering.Measurable),t.blockRendering.OutputConnection=function(e,n){t.blockRendering.OutputConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.OutputConnection,t.blockRendering.Connection),t.blockRendering.PreviousConnection=function(e,n){t.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.PreviousConnection,t.blockRendering.Connection),t.blockRendering.NextConnection=function(e,n){t.blockRendering.NextConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.NextConnection,t.blockRendering.Connection),t.blockRendering.InputConnection=function(e,n){t.blockRendering.InputConnection.superClass_.constructor.call(this,e,n.connection),this.type|=t.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.InputConnection,t.blockRendering.Connection),t.blockRendering.InlineInput=function(e,n){t.blockRendering.InlineInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},t.utils.object.inherits(t.blockRendering.InlineInput,t.blockRendering.InputConnection),t.blockRendering.StatementInput=function(e,n){t.blockRendering.StatementInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},t.utils.object.inherits(t.blockRendering.StatementInput,t.blockRendering.InputConnection),t.blockRendering.ExternalValueInput=function(e,n){t.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},t.utils.object.inherits(t.blockRendering.ExternalValueInput,t.blockRendering.InputConnection),t.blockRendering.Icon=function(e,n){t.blockRendering.Icon.superClass_.constructor.call(this,e),this.icon=n,this.isVisible=n.isVisible(),this.type|=t.blockRendering.Types.ICON,e=n.getCorrectedSize(),this.height=e.height,this.width=e.width},t.utils.object.inherits(t.blockRendering.Icon,t.blockRendering.Measurable),t.blockRendering.JaggedEdge=function(e){t.blockRendering.JaggedEdge.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},t.utils.object.inherits(t.blockRendering.JaggedEdge,t.blockRendering.Measurable),t.blockRendering.Field=function(e,n,a){t.blockRendering.Field.superClass_.constructor.call(this,e),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=t.blockRendering.Types.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width,this.parentInput=a},t.utils.object.inherits(t.blockRendering.Field,t.blockRendering.Measurable),t.blockRendering.Hat=function(e){t.blockRendering.Hat.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},t.utils.object.inherits(t.blockRendering.Hat,t.blockRendering.Measurable),t.blockRendering.SquareCorner=function(e,n){t.blockRendering.SquareCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_SQUARE_CORNER:t.blockRendering.Types.LEFT_SQUARE_CORNER)|t.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},t.utils.object.inherits(t.blockRendering.SquareCorner,t.blockRendering.Measurable),t.blockRendering.RoundCorner=function(e,n){t.blockRendering.RoundCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_ROUND_CORNER:t.blockRendering.Types.LEFT_ROUND_CORNER)|t.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},t.utils.object.inherits(t.blockRendering.RoundCorner,t.blockRendering.Measurable),t.blockRendering.InRowSpacer=function(e,n){t.blockRendering.InRowSpacer.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},t.utils.object.inherits(t.blockRendering.InRowSpacer,t.blockRendering.Measurable),t.blockRendering.Row=function(e){this.type=t.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},t.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},t.blockRendering.Row.prototype.getLastInput=function(){for(var n,e=this.elements.length-1;n=this.elements[e];e--)if(t.blockRendering.Types.isInput(n))return n;return null},t.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,e=0;n=this.elements[e];e++)if(t.blockRendering.Types.isSpacer(n))return n;return null},t.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,e=this.elements.length-1;n=this.elements[e];e--)if(t.blockRendering.Types.isSpacer(n))return n;return null},t.blockRendering.TopRow=function(e){t.blockRendering.TopRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},t.utils.object.inherits(t.blockRendering.TopRow,t.blockRendering.Row),t.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(e){var n=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,a=e.getPreviousBlock();return!!e.outputConnection||n||!!a&&a.getNextBlock()==e},t.blockRendering.TopRow.prototype.hasRightSquareCorner=function(e){return!0},t.blockRendering.TopRow.prototype.measure=function(){for(var E,e=0,n=0,a=0,f=0;E=this.elements[f];f++)n+=E.width,t.blockRendering.Types.isSpacer(E)||(t.blockRendering.Types.isHat(E)?a=Math.max(a,E.ascenderHeight):e=Math.max(e,E.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+a,this.capline=this.ascenderHeight=a,this.widthWithConnectedBlocks=this.width},t.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow=function(e){t.blockRendering.BottomRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},t.utils.object.inherits(t.blockRendering.BottomRow,t.blockRendering.Row),t.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||!!e.getNextBlock()},t.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(e){return!0},t.blockRendering.BottomRow.prototype.measure=function(){for(var E,e=0,n=0,a=0,f=0;E=this.elements[f];f++)n+=E.width,t.blockRendering.Types.isSpacer(E)||(t.blockRendering.Types.isNextConnection(E)?a=Math.max(a,E.height):e=Math.max(e,E.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+a,this.descenderHeight=a,this.widthWithConnectedBlocks=this.width},t.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.SpacerRow=function(e,n,a){t.blockRendering.SpacerRow.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=a,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new t.blockRendering.InRowSpacer(this.constants_,a)]},t.utils.object.inherits(t.blockRendering.SpacerRow,t.blockRendering.Row),t.blockRendering.SpacerRow.prototype.measure=function(){},t.blockRendering.InputRow=function(e){t.blockRendering.InputRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},t.utils.object.inherits(t.blockRendering.InputRow,t.blockRendering.Row),t.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var a,e=0,n=0;a=this.elements[n];n++)this.width+=a.width,t.blockRendering.Types.isInput(a)&&(t.blockRendering.Types.isStatementInput(a)?e+=a.connectedBlockWidth:t.blockRendering.Types.isExternalInput(a)&&0!=a.connectedBlockWidth&&(e+=a.connectedBlockWidth-a.connectionWidth)),t.blockRendering.Types.isSpacer(a)||(this.height=Math.max(this.height,a.height));this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e},t.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},t.blockRendering.RenderInfo=function(e,n){this.block_=n,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new t.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new t.blockRendering.TopRow(this.constants_),this.bottomRow=new t.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},t.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var e=new t.blockRendering.InputRow(this.constants_);this.inputRows.push(e);for(var f,n=this.block_.getIcons(),a=0;f=n[a];a++){var E=new t.blockRendering.Icon(this.constants_,f);this.isCollapsed&&f.collapseHidden?this.hiddenIcons.push(E):e.elements.push(E)}for(f=null,a=0;n=this.block_.inputList[a];a++)if(n.isVisible()){for(this.shouldStartNewRow_(n,f)&&(this.rows.push(e),e=new t.blockRendering.InputRow(this.constants_),this.inputRows.push(e)),f=0;E=n.fieldRow[f];f++)e.elements.push(new t.blockRendering.Field(this.constants_,E,n));this.addInput_(n,e),f=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new t.blockRendering.JaggedEdge(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)},t.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e,a=this.topRow.hasLeftSquareCorner(this.block_)?t.blockRendering.SquareCorner:t.blockRendering.RoundCorner;this.topRow.elements.push(new a(this.constants_)),n?(e=new t.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new t.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==t.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,a=this.topRow.hasRightSquareCorner(this.block_)?t.blockRendering.SquareCorner:t.blockRendering.RoundCorner,this.topRow.elements.push(new a(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new t.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.blockRendering.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=e.align)},t.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!(!n||e.type!=t.inputTypes.STATEMENT&&n.type!=t.inputTypes.STATEMENT&&(e.type!=t.inputTypes.VALUE&&e.type!=t.inputTypes.DUMMY||this.isInline))},t.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,e=0;n=this.rows[e];e++){var a=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(var f=0;f<a.length-1;f++){n.elements.push(a[f]);var E=this.getInRowSpacing_(a[f],a[f+1]);n.elements.push(new t.blockRendering.InRowSpacer(this.constants_,E))}n.elements.push(a[a.length-1]),n.endsWithElemSpacer()&&n.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(a[a.length-1],null)))}}},t.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e&&n&&t.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var E,e=0,n=0,a=0,f=0;E=this.rows[f];f++){if(E.measure(),n=Math.max(n,E.width),E.hasStatement){var I=E.getLastInput();e=Math.max(e,E.width-I.width)}a=Math.max(a,E.widthWithConnectedBlocks)}for(this.statementEdge=e,this.width=n,f=0;E=this.rows[f];f++)E.hasStatement&&(E.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,a),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},t.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,e=0;n=this.rows[e];e++)if(n.hasStatement)this.alignStatementRow_(n);else{var a=n.width;0<(a=this.getDesiredRowWidth_(n)-a)&&this.addAlignmentPadding_(n,a),t.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},t.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,n){var a=e.getFirstSpacer(),f=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align==t.constants.ALIGN.LEFT?f.width+=n:e.align==t.constants.ALIGN.CENTRE?(a.width+=n/2,f.width+=n/2):e.align==t.constants.ALIGN.RIGHT?a.width+=n:f.width+=n,e.width+=n},t.blockRendering.RenderInfo.prototype.alignStatementRow_=function(e){var n=e.getLastInput(),a=e.width-n.width,f=this.statementEdge;0<(a=f-a)&&this.addAlignmentPadding_(e,a),a=e.width,f=this.getDesiredRowWidth_(e),n.width+=f-a,n.height=Math.max(n.height,e.height),e.width+=f-a,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)},t.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var e=this.rows;this.rows=[];for(var n=0;n<e.length;n++)this.rows.push(e[n]),n!=e.length-1&&this.rows.push(this.makeSpacerRow_(e[n],e[n+1]))},t.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,n){var a=this.getSpacerRowHeight_(e,n),f=this.getSpacerRowWidth_(e,n);return a=new t.blockRendering.SpacerRow(this.constants_,a,f),e.hasStatement&&(a.followsStatement=!0),n.hasStatement&&(a.precedesStatement=!0),a},t.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(e,n){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,n){return t.blockRendering.Types.isSpacer(n)?e.yPos+n.height/2:t.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2):t.blockRendering.Types.isTopRow(e)?t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2},t.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var f,n=e.xPos,a=0;f=e.elements[a];a++)t.blockRendering.Types.isSpacer(f)&&(f.height=e.height),f.xPos=n,f.centerline=this.getElemCenterline_(e,f),n+=f.width},t.blockRendering.RenderInfo.prototype.finalize_=function(){for(var f,e=0,n=0,a=0;f=this.rows[a];a++)f.yPos=n,f.xPos=this.startX,n+=f.height,e=Math.max(e,f.widthWithConnectedBlocks),this.recordElemPositions_(f);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},t.blockRendering.Debug=function(e){this.debugElements_=[],this.svgRoot_=null,this.constants_=e},t.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},t.blockRendering.Debug.prototype.clearElems=function(){for(var n,e=0;n=this.debugElements_[e];e++)t.utils.dom.removeNode(n);this.debugElements_=[]},t.blockRendering.Debug.prototype.drawSpacerRow=function(e,n,a){if(t.blockRendering.Debug.config.rowSpacers){var f=Math.abs(e.height),E=0>e.height;E&&(n-=f),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:a?-(e.xPos+e.width):e.xPos,y:n,width:e.width,height:f,stroke:E?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawSpacerElem=function(e,n,a){if(t.blockRendering.Debug.config.elemSpacers){n=Math.abs(e.width);var f=0>e.width,E=f?e.xPos-n:e.xPos;a&&(E=-(E+n)),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:E,y:e.centerline-e.height/2,width:n,height:e.height,stroke:"pink",fill:f?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedElem=function(e,n){if(t.blockRendering.Debug.config.elems){var a=e.xPos;n&&(a=-(a+e.width)),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:a,y:n=e.centerline-e.height/2,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isField(e)&&e.field instanceof t.FieldLabel&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:a,y:n+this.constants_.FIELD_TEXT_BASELINE,width:e.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}t.blockRendering.Types.isInput(e)&&t.blockRendering.Debug.config.connections&&this.drawConnection(e.connectionModel)},t.blockRendering.Debug.prototype.drawConnection=function(e){if(t.blockRendering.Debug.config.connections){if(e.type==t.connectionTypes.INPUT_VALUE)var n=4,a="magenta",f="none";else e.type==t.connectionTypes.OUTPUT_VALUE?(n=2,f=a="magenta"):e.type==t.connectionTypes.NEXT_STATEMENT?(n=4,a="goldenrod",f="none"):e.type==t.connectionTypes.PREVIOUS_STATEMENT&&(n=2,f=a="goldenrod");this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:e.offsetInBlock_.x,cy:e.offsetInBlock_.y,r:n,fill:f,stroke:a},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedRow=function(e,n,a){t.blockRendering.Debug.config.rows&&(this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:a?-(e.xPos+e.width):e.xPos,y:e.yPos,width:e.width,height:e.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isTopOrBottomRow(e)||t.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:a?-(e.xPos+e.widthWithConnectedBlocks):e.xPos,y:e.yPos,width:e.widthWithConnectedBlocks,height:e.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},t.blockRendering.Debug.prototype.drawRowWithElements=function(e,n,a){for(var f=0,E=e.elements.length;f<E;f++){var I=e.elements[f];I?t.blockRendering.Types.isSpacer(I)?this.drawSpacerElem(I,e.height,a):this.drawRenderedElem(I,a):console.warn("A row has an undefined or null element.",e,I)}this.drawRenderedRow(e,n,a)},t.blockRendering.Debug.prototype.drawBoundingBox=function(e){if(t.blockRendering.Debug.config.blockBounds){var n=e.RTL?-e.width:0;this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),t.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockRenderDebug",x:n=e.RTL?-e.widthWithChildren:0,y:0,width:e.widthWithChildren,height:e.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawDebug=function(e,n){this.clearElems(),this.svgRoot_=e.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var E,a=0,f=0;E=n.rows[f];f++)t.blockRendering.Types.isBetweenRowSpacer(E)?this.drawSpacerRow(E,a,n.RTL):this.drawRowWithElements(E,a,n.RTL),a+=E.height;e.previousConnection&&this.drawConnection(e.previousConnection),e.nextConnection&&this.drawConnection(e.nextConnection),e.outputConnection&&this.drawConnection(e.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(e.pathObject.svgPath)},t.blockRendering.Debug.prototype.drawRender=function(e){t.blockRendering.Debug.config.render&&(e.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){e.setAttribute("filter","")},100))},t.blockRendering.Drawer=function(e,n){this.block_=e,this.info_=n,this.topLeft_=e.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},t.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},t.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,e=0;n=this.info_.hiddenIcons[e];e++)n.icon.iconGroup_.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var e=1;e<this.info_.rows.length-1;e++){var n=this.info_.rows[e];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},t.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var f,a=0;f=n[a];a++)t.blockRendering.Types.isLeftRoundedCorner(f)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:t.blockRendering.Types.isRightRoundedCorner(f)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:t.blockRendering.Types.isPreviousConnection(f)?this.outlinePath_+=f.shape.pathLeft:t.blockRendering.Types.isHat(f)?this.outlinePath_+=this.constants_.START_HAT.path:t.blockRendering.Types.isSpacer(f)&&(this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",f.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("v",e.height)},t.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+t.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)},t.blockRendering.Drawer.prototype.drawValueInput_=function(e){var n=e.getLastInput();this.positionExternalValueConnection_(e);var a="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+a+t.utils.svgPaths.lineOnAxis("v",e.height-n.connectionHeight)},t.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),a=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var f=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",a)+n+t.utils.svgPaths.lineOnAxis("v",f)+this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();for(var I,a=0,f="",E=n.length-1;I=n[E];E--)t.blockRendering.Types.isNextConnection(I)?f+=I.shape.pathRight:t.blockRendering.Types.isLeftSquareCorner(I)?f+=t.utils.svgPaths.lineOnAxis("H",e.xPos):t.blockRendering.Types.isLeftRoundedCorner(I)?f+=this.constants_.OUTSIDE_CORNERS.bottomLeft:t.blockRendering.Types.isRightRoundedCorner(I)?(f+=this.constants_.OUTSIDE_CORNERS.bottomRight,a=this.constants_.OUTSIDE_CORNERS.rightHeight):t.blockRendering.Types.isSpacer(I)&&(f+=t.utils.svgPaths.lineOnAxis("h",-1*I.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-a),this.outlinePath_+=f},t.blockRendering.Drawer.prototype.drawLeft_=function(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){var n=e.connectionOffsetY+e.height;e="function"==typeof e.shape.pathUp?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",n)+e}this.outlinePath_+="z"},t.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,e=0;n=this.info_.rows[e];e++)for(var f,a=0;f=n.elements[a];a++)t.blockRendering.Types.isInlineInput(f)?this.drawInlineInput_(f):(t.blockRendering.Types.isIcon(f)||t.blockRendering.Types.isField(f))&&this.layoutField_(f)},t.blockRendering.Drawer.prototype.layoutField_=function(e){if(t.blockRendering.Types.isField(e))var n=e.field.getSvgRoot();else t.blockRendering.Types.isIcon(e)&&(n=e.icon.iconGroup_);var a=e.centerline-e.height/2,f=e.xPos,E="";this.info_.RTL&&(f=-(f+e.width),e.flipRtl&&(f+=e.width,E="scale(-1 1)")),t.blockRendering.Types.isIcon(e)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+f+","+a+")"),e.icon.computeIconLocation()):n.setAttribute("transform","translate("+f+","+a+")"+E),this.info_.isInsertionMarker&&n.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var n=e.width,a=e.height,f=e.connectionOffsetY,E=e.connectionHeight+f;this.inlinePath_+=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-a/2)+t.utils.svgPaths.lineOnAxis("v",f)+e.shape.pathDown+t.utils.svgPaths.lineOnAxis("v",a-E)+t.utils.svgPaths.lineOnAxis("h",n-e.connectionWidth)+t.utils.svgPaths.lineOnAxis("v",-a)+"z",this.positionInlineInputConnection_(e)},t.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(e){if(e.connectionModel){var a=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(a*=-1),e.connectionModel.setOffsetInBlock(a,e.centerline-e.height/2+e.connectionOffsetY)}},t.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.statementEdge+n.notchOffset;this.info_.RTL&&(a*=-1),n.connectionModel.setOffsetInBlock(a,e.yPos)}},t.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.width;this.info_.RTL&&(a*=-1),n.connectionModel.setOffsetInBlock(a,e.yPos)}},t.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var e=this.info_.topRow;if(e.connection){var n=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},t.blockRendering.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var n=e.connection,a=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,e.baseline)}},t.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}},t.Events.MarkerMove=function(e,n,a,f){var E=e?e.workspace.id:void 0;f&&f.getType()==t.ASTNode.types.WORKSPACE&&(E=f.getLocation().id),t.Events.MarkerMove.superClass_.constructor.call(this,E),this.blockId=e?e.id:null,this.oldNode=a,this.newNode=f,this.isCursor=n},t.utils.object.inherits(t.Events.MarkerMove,t.Events.UiBase),t.Events.MarkerMove.prototype.type=t.Events.MARKER_MOVE,t.Events.MarkerMove.prototype.toJson=function(){var e=t.Events.MarkerMove.superClass_.toJson.call(this);return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e},t.Events.MarkerMove.prototype.fromJson=function(e){t.Events.MarkerMove.superClass_.fromJson.call(this,e),this.isCursor=e.isCursor,this.blockId=e.blockId,this.oldNode=e.oldNode,this.newNode=e.newNode},t.registry.register(t.registry.Type.EVENT,t.Events.MARKER_MOVE,t.Events.MarkerMove),t.blockRendering.MarkerSvg=function(e,n,a){this.workspace_=e,this.marker_=a,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=a.colour||e},t.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",t.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,t.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},t.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},t.blockRendering.MarkerSvg.prototype.createDom=function(){var e=this.isCursor()?t.blockRendering.MarkerSvg.CURSOR_CLASS:t.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},null),this.createDomInternal_(),this.svgGroup_},t.blockRendering.MarkerSvg.prototype.setParent_=function(e){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent_=e},t.blockRendering.MarkerSvg.prototype.draw=function(e,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var a=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||a,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(e,n),void 0!==(e=this.currentMarkerSvg.childNodes[0])&&e.beginElement&&e.beginElement()}else this.hide()},t.blockRendering.MarkerSvg.prototype.showAtLocation_=function(e){var n=e.getLocation().type;e.getType()==t.ASTNode.types.BLOCK?this.showWithBlock_(e):e.getType()==t.ASTNode.types.OUTPUT?this.showWithOutput_(e):n==t.connectionTypes.INPUT_VALUE?this.showWithInput_(e):n==t.connectionTypes.NEXT_STATEMENT?this.showWithNext_(e):e.getType()==t.ASTNode.types.PREVIOUS?this.showWithPrevious_(e):e.getType()==t.ASTNode.types.FIELD?this.showWithField_(e):e.getType()==t.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()==t.ASTNode.types.STACK&&this.showWithStack_(e)},t.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(e){var n=(e=e.getSourceBlock()).width,a=e.height,f=a*t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,E=this.constants_.CURSOR_BLOCK_PADDING;if(e.previousConnection){var I=this.constants_.shapeFor(e.previousConnection);this.positionPrevious_(n,E,f,I)}else e.outputConnection?(I=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(n,a,I)):this.positionBlock_(n,E,f);this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithBlock_=function(e){this.showWithBlockPrevOutput_(e)},t.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(e){this.showWithBlockPrevOutput_(e)},t.blockRendering.MarkerSvg.prototype.showWithOutput_=function(e){this.showWithBlockPrevOutput_(e)},t.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(e){var n=e.getWsCoordinate();e=n.x,this.workspace_.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithField_=function(e){var n=(e=e.getLocation()).getSize().width,a=e.getSize().height;this.positionRect_(0,0,n,a),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithInput_=function(e){var n=(e=e.getLocation()).getSourceBlock();this.positionInput_(e),this.setParent_(n),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithNext_=function(e){var n=e.getLocation();e=n.getSourceBlock();var a=0;n=n.getOffsetInBlock().y;var f=e.getHeightWidth().width;this.workspace_.RTL&&(a=-f),this.positionLine_(a,n,f),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithStack_=function(e){var n=(e=e.getLocation()).getHeightWidth(),a=n.width+this.constants_.CURSOR_STACK_PADDING,f=-this.constants_.CURSOR_STACK_PADDING/2,I=f;this.workspace_.RTL&&(I=-(a+f)),this.positionRect_(I,-this.constants_.CURSOR_STACK_PADDING/2,a,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},t.blockRendering.MarkerSvg.prototype.positionBlock_=function(e,n,a){e=t.utils.svgPaths.moveBy(-n,a)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",a),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionInput_=function(e){var n=e.getOffsetInBlock().x,a=e.getOffsetInBlock().y;e=t.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+n+","+a+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},t.blockRendering.MarkerSvg.prototype.positionLine_=function(e,n,a){this.markerSvgLine_.setAttribute("x",e),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",a),this.currentMarkerSvg=this.markerSvgLine_},t.blockRendering.MarkerSvg.prototype.positionOutput_=function(e,n,a){e=t.utils.svgPaths.moveBy(e,0)+t.utils.svgPaths.lineOnAxis("h",-(e-a.width))+t.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+a.pathDown+t.utils.svgPaths.lineOnAxis("V",n)+t.utils.svgPaths.lineOnAxis("H",e),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionPrevious_=function(e,n,a,f){e=t.utils.svgPaths.moveBy(-n,a)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+f.pathLeft+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",a),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionRect_=function(e,n,a,f){this.markerSvgRect_.setAttribute("x",e),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",a),this.markerSvgRect_.setAttribute("height",f),this.currentMarkerSvg=this.markerSvgRect_},t.blockRendering.MarkerSvg.prototype.flipRtl_=function(e){e.setAttribute("transform","scale(-1 1)")},t.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},t.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(e,n){var a=n.getSourceBlock();e=new(t.Events.get(t.Events.MARKER_MOVE))(a,this.isCursor(),e,n),t.Events.fire(e)},t.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},t.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerSvgLine_),t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerInput_),e.attributeName="stroke",t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerBlock_)}return this.markerSvg_},t.blockRendering.MarkerSvg.prototype.applyColour_=function(e){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",e=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",e),this.markerBlock_.firstChild.setAttribute("values",e))},t.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_)},t.blockRendering.PathObject=function(e,n,a){this.constants=a,this.svgRoot=e,this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},t.blockRendering.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e)},t.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},t.blockRendering.PathObject.prototype.setCursorSvg=function(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null},t.blockRendering.PathObject.prototype.setMarkerSvg=function(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null},t.blockRendering.PathObject.prototype.applyColour=function(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())},t.blockRendering.PathObject.prototype.setStyle=function(e){this.style=e},t.blockRendering.PathObject.prototype.setClass_=function(e,n){n?t.utils.dom.addClass(this.svgRoot,e):t.utils.dom.removeClass(this.svgRoot,e)},t.blockRendering.PathObject.prototype.updateHighlighted=function(e){this.svgPath.setAttribute("filter",e?"url(#"+this.constants.embossFilterId+")":"none")},t.blockRendering.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.blockRendering.PathObject.prototype.updateDisabled_=function(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},t.blockRendering.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e)},t.blockRendering.PathObject.prototype.updateDraggingDelete=function(e){this.setClass_("blocklyDraggingDelete",e)},t.blockRendering.PathObject.prototype.updateInsertionMarker=function(e){this.setClass_("blocklyInsertionMarker",e)},t.blockRendering.PathObject.prototype.updateMovable=function(e){this.setClass_("blocklyDraggable",e)},t.blockRendering.PathObject.prototype.updateReplacementFade=function(e){this.setClass_("blocklyReplaceable",e)},t.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(e,n){},t.blockRendering.Renderer=function(e){this.name=e,this.overrides=this.constants_=null},t.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},t.blockRendering.Renderer.prototype.init=function(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,t.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()},t.blockRendering.Renderer.prototype.createDom=function(e,n){this.constants_.createDom(e,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},t.blockRendering.Renderer.prototype.refreshDom=function(e,n){var a=this.getConstants();a.dispose(),this.constants_=this.makeConstants_(),this.overrides&&t.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=a.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n)},t.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},t.blockRendering.Renderer.prototype.makeConstants_=function(){return new t.blockRendering.ConstantProvider},t.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new t.blockRendering.RenderInfo(this,e)},t.blockRendering.Renderer.prototype.makeDrawer_=function(e,n){return new t.blockRendering.Drawer(e,n)},t.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!t.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new t.blockRendering.Debug(this.getConstants())},t.blockRendering.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.blockRendering.MarkerSvg(e,this.getConstants(),n)},t.blockRendering.Renderer.prototype.makePathObject=function(e,n){return new t.blockRendering.PathObject(e,n,this.constants_)},t.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},t.blockRendering.Renderer.prototype.shouldHighlightConnection=function(e){return!0},t.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(e,n,a){return!!t.Connection.getConnectionForOrphanedConnection(e,a===t.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},t.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(e,n,a){return n.type==t.connectionTypes.OUTPUT_VALUE||n.type==t.connectionTypes.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(a,e.targetBlock(),n.type)?t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},t.blockRendering.Renderer.prototype.render=function(e){t.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()},t.geras={},t.geras.ConstantProvider=function(){t.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},t.utils.object.inherits(t.geras.ConstantProvider,t.blockRendering.ConstantProvider),t.geras.ConstantProvider.prototype.getCSS_=function(e){return t.geras.ConstantProvider.superClass_.getCSS_.call(this,e).concat([e+" .blocklyInsertionMarker>.blocklyPathLight,",e+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},t.geras.Highlighter=function(e){this.info_=e,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},t.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},t.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var a,n=0;a=e.elements[n];n++)t.blockRendering.Types.isLeftSquareCorner(a)?this.steps_+=this.highlightConstants_.START_POINT:t.blockRendering.Types.isLeftRoundedCorner(a)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):t.blockRendering.Types.isPreviousConnection(a)?this.steps_+=this.notchPaths_.pathLeft:t.blockRendering.Types.isHat(a)?this.steps_+=this.startPaths_.path(this.RTL_):t.blockRendering.Types.isSpacer(a)&&0!=a.width&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",a.xPos+a.width-this.highlightOffset_));this.steps_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)},t.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+t.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},t.geras.Highlighter.prototype.drawValueInput=function(e){var n=e.getLastInput();if(this.RTL_){var a=e.height-n.connectionHeight;this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",a)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.Highlighter.prototype.drawStatementInput=function(e){var n=e.getLastInput();if(this.RTL_){var a=e.height-2*this.insideCornerPaths_.height;this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",a)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)},t.geras.Highlighter.prototype.drawRightSideRow=function(e){var n=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n),e.height>this.highlightOffset_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_)))},t.geras.Highlighter.prototype.drawBottomRow=function(e){if(this.RTL_)this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];t.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=t.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):t.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=t.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},t.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=t.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(t.blockRendering.Types.isLeftRoundedCorner((e=this.info_.topRow).elements[0])?this.steps_+=t.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))},t.geras.Highlighter.prototype.drawInlineInput=function(e){var n=this.highlightOffset_,a=e.xPos+e.connectionWidth,f=e.centerline-e.height/2,E=e.width-e.connectionWidth,I=f+n;this.RTL_?(f=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=t.utils.svgPaths.moveTo(a-n,I)+t.utils.svgPaths.lineOnAxis("v",f)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",e)+t.utils.svgPaths.lineOnAxis("h",E)):this.inlineSteps_+=t.utils.svgPaths.moveTo(e.xPos+e.width+n,I)+t.utils.svgPaths.lineOnAxis("v",e.height)+t.utils.svgPaths.lineOnAxis("h",-E)+t.utils.svgPaths.moveTo(a,f+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.InlineInput=function(e,n){t.geras.InlineInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.InlineInput,t.blockRendering.InlineInput),t.geras.StatementInput=function(e,n){t.geras.StatementInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.StatementInput,t.blockRendering.StatementInput),t.geras.RenderInfo=function(e,n){t.geras.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.geras.RenderInfo,t.blockRendering.RenderInfo),t.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.geras.RenderInfo.prototype.populateBottomRow_=function(){t.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},t.geras.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.geras.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.geras.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=e.align)},t.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var a,e=!1,n=0;a=this.rows[n];n++)a.hasExternalInput&&(e=!0);for(n=0;a=this.rows[n];n++){var f=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,f[0]))),f.length){for(var E=0;E<f.length-1;E++){a.elements.push(f[E]);var I=this.getInRowSpacing_(f[E],f[E+1]);a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,I))}a.elements.push(f[f.length-1]),a.endsWithElemSpacer()&&(I=this.getInRowSpacing_(f[f.length-1],null),e&&a.hasDummyInput&&(I+=this.constants_.TAB_WIDTH),a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,I)))}}},t.geras.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&(!n||t.blockRendering.Types.isStatementInput(n)))return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(t.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(t.blockRendering.Types.isLeftRoundedCorner(e)&&n){if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(t.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var a=e.yPos;return t.blockRendering.Types.isField(n)||t.blockRendering.Types.isIcon(n)?(a+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(a+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):a=t.blockRendering.Types.isInlineInput(n)?a+n.height/2:a+e.height/2,a},t.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var f,e=0,n=null,a=this.rows.length-1;f=this.rows[a];a--)f.nextRightEdge=e,t.blockRendering.Types.isInputRow(f)&&(f.hasStatement&&this.alignStatementRow_(f),n&&n.hasStatement&&f.width<n.width?f.nextRightEdge=n.width:e=f.width,n=f);for(a=e=0;f=this.rows[a];a++)f.hasStatement?e=this.getDesiredRowWidth_(f):t.blockRendering.Types.isSpacer(f)?f.width=Math.max(e,f.nextRightEdge):(0<(e=Math.max(e,f.nextRightEdge)-f.width)&&this.addAlignmentPadding_(f,e),e=f.width)}else t.geras.RenderInfo.superClass_.alignRowElements_.call(this)},t.geras.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:t.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.geras.RenderInfo.prototype.finalize_=function(){for(var f,e=0,n=0,a=0;f=this.rows[a];a++){f.yPos=n,f.xPos=this.startX,n+=f.height,e=Math.max(e,f.widthWithConnectedBlocks);var E=n-this.topRow.ascenderHeight;f==this.bottomRow&&E<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=E=this.constants_.MIN_BLOCK_HEIGHT-E,n+=E),this.recordElemPositions_(f)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},t.geras.Drawer=function(e,n){t.geras.Drawer.superClass_.constructor.call(this,e,n),this.highlighter_=new t.geras.Highlighter(n)},t.utils.object.inherits(t.geras.Drawer,t.blockRendering.Drawer),t.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),t.geras.Drawer.superClass_.drawTop_.call(this)},t.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e),t.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)},t.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e),t.geras.Drawer.superClass_.drawValueInput_.call(this,e)},t.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e),t.geras.Drawer.superClass_.drawStatementInput_.call(this,e)},t.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),t.geras.Drawer.superClass_.drawBottom_.call(this)},t.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),t.geras.Drawer.superClass_.drawLeft_.call(this)},t.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e),t.geras.Drawer.superClass_.drawInlineInput_.call(this,e)},t.geras.Drawer.prototype.positionInlineInputConnection_=function(e){if(e.connectionModel){var a=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(a*=-1),e.connectionModel.setOffsetInBlock(a,e.centerline-e.height/2+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionStatementInputConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(a=this.info_.RTL?-1*a:a+this.constants_.DARK_PATH_OFFSET,e.yPos+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionExternalValueConnection_=function(e){var n=e.getLastInput();if(n.connectionModel){var a=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(a*=-1),n.connectionModel.setOffsetInBlock(a,e.yPos)}},t.geras.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var n=e.connection,a=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-a:a)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}},t.geras.HighlightConstantProvider=function(e){this.constantProvider=e,this.OFFSET=.5,this.START_POINT=t.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},t.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},t.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,a=(1-Math.SQRT1_2)*(e+n)-n,f=t.utils.svgPaths.moveBy(a,a)+t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-a-n,e-a)),E=t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e+n,e+n)),I=t.utils.svgPaths.moveBy(a,-a)+t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e-a,a+n));return{width:e+n,height:e,pathTop:function(Y){return Y?f:""},pathBottom:function(Y){return Y?E:I}}},t.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,a=(1-Math.SQRT1_2)*(e-n)+n,f=t.utils.svgPaths.moveBy(a,a)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e-a,-a+n)),E=t.utils.svgPaths.moveBy(n,e)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e,-e+n)),I=-a,Y=t.utils.svgPaths.moveBy(a,I)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(-a+n,-I-e));return{height:e,topLeft:function(ee){return ee?f:E},bottomLeft:function(){return Y}}},t.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,a=t.utils.svgPaths.moveBy(-2,3.4-n)+t.utils.svgPaths.lineTo(-.45*e,-2.1),f=t.utils.svgPaths.lineOnAxis("v",2.5)+t.utils.svgPaths.moveBy(.97*-e,2.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(.05*-e,10),t.utils.svgPaths.point(.3*e,9.5)])+t.utils.svgPaths.moveBy(.67*e,-1.9)+t.utils.svgPaths.lineOnAxis("v",2.5),E=t.utils.svgPaths.lineOnAxis("v",-1.5)+t.utils.svgPaths.moveBy(-.92*e,-.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(-.19*e,-5.5),t.utils.svgPaths.point(0,-11)])+t.utils.svgPaths.moveBy(.92*e,1),I=t.utils.svgPaths.moveBy(-5,n-.7)+t.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:n,pathUp:function(Y){return Y?a:E},pathDown:function(Y){return Y?f:I}}},t.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:t.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},t.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:t.utils.svgPaths.lineTo(5.1,2.6)+t.utils.svgPaths.moveBy(-10.2,6.8)+t.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},t.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,n=t.utils.svgPaths.moveBy(25,-8.7)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(29.7,-6.2),t.utils.svgPaths.point(57.2,-.5),t.utils.svgPaths.point(75,8.7)]),a=t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(17.8,-9.2),t.utils.svgPaths.point(45.3,-14.9),t.utils.svgPaths.point(75,-8.7)])+t.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(f){return f?n:a}}},t.geras.PathObject=function(e,n,a){this.constants=a,this.svgRoot=e,this.svgPathDark=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},t.utils.object.inherits(t.geras.PathObject,t.blockRendering.PathObject),t.geras.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)},t.geras.PathObject.prototype.setHighlightPath=function(e){this.svgPathLight.setAttribute("d",e)},t.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},t.geras.PathObject.prototype.applyColour=function(e){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),t.geras.PathObject.superClass_.applyColour.call(this,e),this.svgPath.setAttribute("stroke","none")},t.geras.PathObject.prototype.setStyle=function(e){this.style=e,this.colourDark=t.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},t.geras.PathObject.prototype.updateHighlighted=function(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},t.geras.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.geras.PathObject.prototype.updateDisabled_=function(e){t.geras.PathObject.superClass_.updateDisabled_.call(this,e),e&&this.svgPath.setAttribute("stroke","none")},t.geras.Renderer=function(e){t.geras.Renderer.superClass_.constructor.call(this,e),this.highlightConstants_=null},t.utils.object.inherits(t.geras.Renderer,t.blockRendering.Renderer),t.geras.Renderer.prototype.init=function(e,n){t.geras.Renderer.superClass_.init.call(this,e,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},t.geras.Renderer.prototype.refreshDom=function(e,n){t.geras.Renderer.superClass_.refreshDom.call(this,e,n),this.getHighlightConstants().init()},t.geras.Renderer.prototype.makeConstants_=function(){return new t.geras.ConstantProvider},t.geras.Renderer.prototype.makeRenderInfo_=function(e){return new t.geras.RenderInfo(this,e)},t.geras.Renderer.prototype.makeDrawer_=function(e,n){return new t.geras.Drawer(e,n)},t.geras.Renderer.prototype.makePathObject=function(e,n){return new t.geras.PathObject(e,n,this.getConstants())},t.geras.Renderer.prototype.makeHighlightConstants_=function(){return new t.geras.HighlightConstantProvider(this.getConstants())},t.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},t.blockRendering.register("geras",t.geras.Renderer),t.thrasos={},t.thrasos.RenderInfo=function(e,n){t.thrasos.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.thrasos.RenderInfo,t.blockRendering.RenderInfo),t.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var a,e=!1,n=0;a=this.rows[n];n++)a.hasExternalInput&&(e=!0);for(n=0;a=this.rows[n];n++){var f=a.elements;a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,f[0])));for(var E=0;E<f.length-1;E++){a.elements.push(f[E]);var I=this.getInRowSpacing_(f[E],f[E+1]);a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,I))}a.elements.push(f[f.length-1]),a.endsWithElemSpacer()&&(I=this.getInRowSpacing_(f[f.length-1],null),e&&a.hasDummyInput&&(I+=this.constants_.TAB_WIDTH),a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,I)))}},t.thrasos.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&!n)return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))return n.notchOffset}return t.blockRendering.Types.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var a=e.yPos;return t.blockRendering.Types.isField(n)&&e.hasStatement?a+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):a+e.height/2},t.thrasos.RenderInfo.prototype.finalize_=function(){for(var f,e=0,n=0,a=0;f=this.rows[a];a++){f.yPos=n,f.xPos=this.startX,n+=f.height,e=Math.max(e,f.widthWithConnectedBlocks);var E=n-this.topRow.ascenderHeight;f==this.bottomRow&&E<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=E=this.constants_.MIN_BLOCK_HEIGHT-E,n+=E),this.recordElemPositions_(f)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline},t.thrasos.Renderer=function(e){t.thrasos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.thrasos.Renderer,t.blockRendering.Renderer),t.thrasos.Renderer.prototype.makeRenderInfo_=function(e){return new t.thrasos.RenderInfo(this,e)},t.blockRendering.register("thrasos",t.thrasos.Renderer),t.zelos={},t.zelos.ConstantProvider=function(){t.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},t.utils.object.inherits(t.zelos.ConstantProvider,t.blockRendering.ConstantProvider),t.zelos.ConstantProvider.prototype.setFontConstants_=function(e){t.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},t.zelos.ConstantProvider.prototype.init=function(){t.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},t.zelos.ConstantProvider.prototype.setDynamicProperties_=function(e){t.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE},t.zelos.ConstantProvider.prototype.dispose=function(){t.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&t.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&t.utils.dom.removeNode(this.replacementGlowFilter_)},t.zelos.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(25,-e),t.utils.svgPaths.point(71,-e),t.utils.svgPaths.point(n,0)])}},t.zelos.ConstantProvider.prototype.makeHexagonal=function(){function e(a,f,E){var I=a/2;return t.utils.svgPaths.lineTo(-(E=E?-1:1)*(I=I>n?n:I),a=(f?-1:1)*a/2)+t.utils.svgPaths.lineTo(E*I,a)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(a){return(a/=2)>n?n:a},height:function(a){return a},connectionOffsetY:function(a){return a/2},connectionOffsetX:function(a){return-a},pathDown:function(a){return e(a,!1,!1)},pathUp:function(a){return e(a,!0,!1)},pathRightDown:function(a){return e(a,!1,!0)},pathRightUp:function(a){return e(a,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeRounded=function(){function e(f,E,I){var Y=f>a?f-a:0;return t.utils.svgPaths.arc("a","0 0,1",f=(f>a?a:f)/2,t.utils.svgPaths.point((E?-1:1)*f,(E?-1:1)*f))+t.utils.svgPaths.lineOnAxis("v",(I?1:-1)*Y)+t.utils.svgPaths.arc("a","0 0,1",f,t.utils.svgPaths.point((E?1:-1)*f,(E?-1:1)*f))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,a=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(f){return(f/=2)>n?n:f},height:function(f){return f},connectionOffsetY:function(f){return f/2},connectionOffsetX:function(f){return-f},pathDown:function(f){return e(f,!1,!1)},pathUp:function(f){return e(f,!0,!1)},pathRightDown:function(f){return e(f,!1,!0)},pathRightUp:function(f){return e(f,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeSquared=function(){function e(a,f,E){return a-=2*n,t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((f?-1:1)*n,(f?-1:1)*n))+t.utils.svgPaths.lineOnAxis("v",(E?1:-1)*a)+t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((f?1:-1)*n,(f?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(a){return n},height:function(a){return a},connectionOffsetY:function(a){return a/2},connectionOffsetX:function(a){return-a},pathDown:function(a){return e(a,!1,!1)},pathUp:function(a){return e(a,!0,!1)},pathRightDown:function(a){return e(a,!1,!0)},pathRightUp:function(a){return e(a,!1,!0)}}},t.zelos.ConstantProvider.prototype.shapeFor=function(e){var n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:if(null!=(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},t.zelos.ConstantProvider.prototype.makeNotch=function(){function e(De){return t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(De*E/2,0),t.utils.svgPaths.point(De*E*3/4,Y/2),t.utils.svgPaths.point(De*E,Y)])+t.utils.svgPaths.line([t.utils.svgPaths.point(De*E,I)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(De*E/4,Y/2),t.utils.svgPaths.point(De*E/2,Y),t.utils.svgPaths.point(De*E,Y)])+t.utils.svgPaths.lineOnAxis("h",De*f)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(De*E/2,0),t.utils.svgPaths.point(De*E*3/4,-Y/2),t.utils.svgPaths.point(De*E,-Y)])+t.utils.svgPaths.line([t.utils.svgPaths.point(De*E,-I)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(De*E/4,-Y/2),t.utils.svgPaths.point(De*E/2,-Y),t.utils.svgPaths.point(De*E,-Y)])}var n=this.NOTCH_WIDTH,a=this.NOTCH_HEIGHT,f=n/3,E=f/3,I=a/2,Y=I/2,ee=e(1),_e=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:a,pathLeft:ee,pathRight:_e}},t.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),a=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e));return{width:e,height:e,pathTop:n,pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e)),rightWidth:e,rightHeight:e,pathTopRight:a,pathBottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e))}},t.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#000",e,.15)||e},t.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#000",e,.25)||e},t.zelos.ConstantProvider.prototype.createDom=function(e,n,a){t.zelos.ConstantProvider.superClass_.createDom.call(this,e,n,a),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),a=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e},t.zelos.ConstantProvider.prototype.getCSS_=function(e){return[e+" .blocklyText,",e+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",e+" .blocklyText {","fill: #fff;","}",e+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",e+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text,",e+" .blocklyNonEditableText>g>text,",e+" .blocklyEditableText>g>text {","fill: #575E75;","}",e+" .blocklyFlyoutLabelText {","fill: #575E75;","}",e+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",e+" .blocklyDropdownText {","fill: #fff !important;","}",e+".blocklyWidgetDiv .goog-menuitem,",e+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",e+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",e+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",e+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",e+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.zelos.TopRow=function(e){t.zelos.TopRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.TopRow,t.blockRendering.TopRow),t.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.TopRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection},t.zelos.TopRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection},t.zelos.BottomRow=function(e){t.zelos.BottomRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.BottomRow,t.blockRendering.BottomRow),t.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection},t.zelos.BottomRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection},t.zelos.RightConnectionShape=function(e){t.zelos.RightConnectionShape.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},t.utils.object.inherits(t.zelos.RightConnectionShape,t.blockRendering.Measurable),t.zelos.RenderInfo=function(e,n){t.zelos.RenderInfo.superClass_.constructor.call(this,e,n),this.topRow=new t.zelos.TopRow(this.constants_),this.bottomRow=new t.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new t.zelos.RightConnectionShape(this.constants_):null},t.utils.object.inherits(t.zelos.RenderInfo,t.blockRendering.RenderInfo),t.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.zelos.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!!n&&(e.type==t.inputTypes.STATEMENT||n.type==t.inputTypes.STATEMENT||(e.type==t.inputTypes.VALUE||e.type==t.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},t.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):t.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.zelos.RenderInfo.prototype.getInRowSpacing_=function(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&t.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){if(t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var a=t.blockRendering.Types.isInputRow(e)&&e.hasStatement,f=t.blockRendering.Types.isInputRow(n)&&n.hasStatement;return f||a?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),f&&a?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):t.blockRendering.Types.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):t.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(e,n){var a=this.width-this.startX;return t.blockRendering.Types.isInputRow(e)&&e.hasStatement||t.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(a,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):a},t.zelos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(e.hasStatement&&!t.blockRendering.Types.isSpacer(n)&&!t.blockRendering.Types.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(t.blockRendering.Types.isInlineInput(n)){var a=n.connectedBlock;if(a&&a.outputConnection&&a.nextConnection)return e.yPos+a.height/2}return t.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,e,n)},t.zelos.RenderInfo.prototype.addInput_=function(e,n){e.type==t.inputTypes.DUMMY&&n.hasDummyInput&&n.align==t.constants.ALIGN.LEFT&&e.align==t.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=e),t.zelos.RenderInfo.superClass_.addInput_.call(this,e,n)},t.zelos.RenderInfo.prototype.addAlignmentPadding_=function(e,n){if(e.rightAlignedDummyInput){for(var a,E,f=0;(E=e.elements[f])&&(t.blockRendering.Types.isSpacer(E)&&(a=E),!t.blockRendering.Types.isField(E)||E.parentInput!=e.rightAlignedDummyInput);f++);if(a)return a.width+=n,void(e.width+=n)}t.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,e,n)},t.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=e,a=2;a<this.rows.length-1;a+=2){var f=this.rows[a-1],E=this.rows[a],I=this.rows[a+1];if(f=2==a?!!this.topRow.hasPreviousConnection:!!f.followsStatement,I=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!I.precedesStatement,t.blockRendering.Types.isInputRow(E)&&E.hasStatement)E.measure(),n=E.width-E.getLastInput().width+e;else if(f&&(2==a||I)&&t.blockRendering.Types.isInputRow(E)&&!E.hasStatement){I=E.xPos,f=null;for(var ee,Y=0;ee=E.elements[Y];Y++)t.blockRendering.Types.isSpacer(ee)&&(f=ee),!(f&&(t.blockRendering.Types.isField(ee)||t.blockRendering.Types.isInput(ee))&&I<n)||t.blockRendering.Types.isField(ee)&&(ee.field instanceof t.FieldLabel||ee.field instanceof t.FieldImage)||(f.width+=n-I),I+=ee.width}}},t.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var a,e=0,n=0;a=this.rows[n];n++)a.yPos=e,e+=a.height;this.height=e,e=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=e,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(e),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),a=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(a=n,this.rightSide.height=e,this.rightSide.width=a,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+a),this.startX=n,this.width+=n+a,this.widthWithChildren+=n+a}},t.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var a,e=0,n=0;a=this.rows[n];n++)if(t.blockRendering.Types.isInputRow(a)){e=a.elements[a.elements.length-2];var f=this.getNegativeSpacing_(a.elements[1]),E=this.getNegativeSpacing_(e),I=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(e=f+E)<I&&(f=(e=this.width-I)/2,E=e/2),a.elements.unshift(new t.blockRendering.InRowSpacer(this.constants_,-f)),a.elements.push(new t.blockRendering.InRowSpacer(this.constants_,-E))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,n=0;a=this.rows[n];n++)t.blockRendering.Types.isTopOrBottomRow(a)&&(a.elements[1].width-=e,a.elements[1].widthWithConnectedBlocks-=e),a.width-=e,a.widthWithConnectedBlocks-=e}},t.zelos.RenderInfo.prototype.getNegativeSpacing_=function(e){if(!e)return 0;var n=this.outputConnection.width,a=this.outputConnection.shape.type,f=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return a===f.SHAPES.ROUND?n-(a=this.height/2>(a=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?a:this.height/2)*(1-Math.sin(Math.acos((a-this.constants_.SMALL_PADDING)/a))):0;if(t.blockRendering.Types.isInlineInput(e)){var E=e.connectedBlock;return e=E?E.pathObject.outputShapeType:e.shape.type,E&&E.outputConnection&&(E.statementInputCount||E.nextConnection)||a==f.SHAPES.HEXAGONAL&&a!=e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[a][e]}return t.blockRendering.Types.isField(e)?a==f.SHAPES.ROUND&&e.field instanceof t.FieldTextInput?n-2.75*f.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[a][0]:t.blockRendering.Types.isIcon(e)?this.constants_.SMALL_PADDING:0},t.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var e=2;e<this.rows.length-1;e+=2){var n=this.rows[e-1],a=this.rows[e],f=this.rows[e+1],E=2==e,I=e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!f.precedesStatement;if(E?this.topRow.hasPreviousConnection:n.followsStatement){var Y=3==a.elements.length&&(a.elements[1].field instanceof t.FieldLabel||a.elements[1].field instanceof t.FieldImage);if(!E&&Y)n.height-=this.constants_.SMALL_PADDING,f.height-=this.constants_.SMALL_PADDING,a.height-=this.constants_.MEDIUM_PADDING;else if(E||I){if(I){for(E=!1,I=0;Y=a.elements[I];I++)if(t.blockRendering.Types.isInlineInput(Y)&&Y.connectedBlock&&!Y.connectedBlock.isShadow()&&40<=Y.connectedBlock.getHeightWidth().height){E=!0;break}E&&(n.height-=this.constants_.SMALL_PADDING,f.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},t.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),t.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},t.zelos.Drawer=function(e,n){t.zelos.Drawer.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.zelos.Drawer,t.blockRendering.Drawer),t.zelos.Drawer.prototype.draw=function(){var e=this.block_.pathObject;e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()},t.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):t.zelos.Drawer.superClass_.drawOutline_.call(this)},t.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():t.zelos.Drawer.superClass_.drawLeft_.call(this)},t.zelos.Drawer.prototype.drawRightSideRow_=function(e){if(!(0>=e.height))if(e.precedesStatement||e.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=e.height-(e.precedesStatement?n:0))?t.utils.svgPaths.lineOnAxis("V",e.yPos+n):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},t.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},t.zelos.Drawer.prototype.drawFlatTop_=function(){var e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",e.width)},t.zelos.Drawer.prototype.drawFlatBottom_=function(){var e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",-e.width)},t.zelos.Drawer.prototype.drawInlineInput_=function(e){this.positionInlineInputConnection_(e);var n=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var a=e.width-2*e.connectionWidth;e=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-e.height/2)+t.utils.svgPaths.lineOnAxis("h",a)+e.shape.pathRightDown(e.height)+t.utils.svgPaths.lineOnAxis("h",-a)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(n,e)}},t.zelos.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),a=n.xPos+n.notchOffset+n.shape.width,f=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,E=e.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",a)+f+t.utils.svgPaths.lineOnAxis("v",E)+n+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.zelos.MarkerSvg=function(e,n,a){t.zelos.MarkerSvg.superClass_.constructor.call(this,e,n,a)},t.utils.object.inherits(t.zelos.MarkerSvg,t.blockRendering.MarkerSvg),t.zelos.MarkerSvg.prototype.showWithInputOutput_=function(e){var n=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle_(e.x,e.y),this.setParent_(n),this.showCurrent_()},t.zelos.MarkerSvg.prototype.showWithOutput_=function(e){this.showWithInputOutput_(e)},t.zelos.MarkerSvg.prototype.showWithInput_=function(e){this.showWithInputOutput_(e)},t.zelos.MarkerSvg.prototype.showWithBlock_=function(e){var n=(e=e.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(e),this.showCurrent_()},t.zelos.MarkerSvg.prototype.positionCircle_=function(e,n){this.markerCircle_.setAttribute("cx",e),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},t.zelos.MarkerSvg.prototype.hide=function(){t.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},t.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(t.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerCircle_)}return this.markerSvg_},t.zelos.MarkerSvg.prototype.applyColour_=function(e){t.zelos.MarkerSvg.superClass_.applyColour_.call(this,e),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},t.zelos.PathObject=function(e,n,a){t.zelos.PathObject.superClass_.constructor.call(this,e,n,a),this.constants=a,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},t.utils.object.inherits(t.zelos.PathObject,t.blockRendering.PathObject),t.zelos.PathObject.prototype.setPath=function(e){t.zelos.PathObject.superClass_.setPath.call(this,e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)},t.zelos.PathObject.prototype.applyColour=function(e){for(var n in t.zelos.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&this.svgPath.setAttribute("stroke",e.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.flipRTL=function(){for(var e in t.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[e].setAttribute("transform","scale(-1 1)")},t.zelos.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},t.zelos.PathObject.prototype.updateReplacementFade=function(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},t.zelos.PathObject.prototype.updateShapeForInputHighlight=function(e,n){e=e.getParentInput().name,(e=this.getOutlinePath_(e))&&(n?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))},t.zelos.PathObject.prototype.beginDrawing=function(){for(var e in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[e]=1},t.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var e in this.remainingOutlines_)this.removeOutlinePath_(e);this.remainingOutlines_=null},t.zelos.PathObject.prototype.setOutlinePath=function(e,n){(e=this.getOutlinePath_(e)).setAttribute("d",n),e.setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.getOutlinePath_=function(e){return this.outlines_[e]||(this.outlines_[e]=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[e],this.outlines_[e]},t.zelos.PathObject.prototype.removeOutlinePath_=function(e){this.outlines_[e].parentNode.removeChild(this.outlines_[e]),delete this.outlines_[e]},t.zelos.Renderer=function(e){t.zelos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.Renderer,t.blockRendering.Renderer),t.zelos.Renderer.prototype.makeConstants_=function(){return new t.zelos.ConstantProvider},t.zelos.Renderer.prototype.makeRenderInfo_=function(e){return new t.zelos.RenderInfo(this,e)},t.zelos.Renderer.prototype.makeDrawer_=function(e,n){return new t.zelos.Drawer(e,n)},t.zelos.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.zelos.MarkerSvg(e,this.getConstants(),n)},t.zelos.Renderer.prototype.makePathObject=function(e,n){return new t.zelos.PathObject(e,n,this.getConstants())},t.zelos.Renderer.prototype.shouldHighlightConnection=function(e){return e.type!=t.connectionTypes.INPUT_VALUE&&e.type!==t.connectionTypes.OUTPUT_VALUE},t.zelos.Renderer.prototype.getConnectionPreviewMethod=function(e,n,a){return n.type==t.connectionTypes.OUTPUT_VALUE?e.isConnected()?t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:t.zelos.Renderer.superClass_.getConnectionPreviewMethod(e,n,a)},t.blockRendering.register("zelos",t.zelos.Renderer),t.Themes.Dark=t.Theme.defineTheme("dark",{base:t.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),t.Themes.Deuteranopia={},t.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},t.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},t.Themes.Deuteranopia=new t.Theme("deuteranopia",t.Themes.Deuteranopia.defaultBlockStyles,t.Themes.Deuteranopia.categoryStyles),t.Themes.HighContrast={},t.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},t.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},t.Themes.HighContrast=new t.Theme("highcontrast",t.Themes.HighContrast.defaultBlockStyles,t.Themes.HighContrast.categoryStyles),t.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),t.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),t.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),t.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),t.Themes.Tritanopia={},t.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},t.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},t.Themes.Tritanopia=new t.Theme("tritanopia",t.Themes.Tritanopia.defaultBlockStyles,t.Themes.Tritanopia.categoryStyles),t.requires={},t}.apply(ht,[]))&&(li.exports=y)},8783:function(li,ht,W){var y,t;y=[W(5484)],void 0!==(t=function(e){"use strict";return e.Blocks={},e.Blocks}.apply(ht,y))&&(li.exports=t)},5484:function(li,ht,W){var y,t;y=[W(1069)],void 0!==(t=function(e){"use strict";return e.Blocks.colour={},e.Constants={},e.Constants.Colour={},e.Constants.Colour.HUE=20,e.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),e.Constants.Lists={},e.Constants.Lists.HUE=260,e.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),e.Blocks.lists_create_with={init:function(){this.setHelpUrl(e.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new e.Mutator(["lists_create_with_item"])),this.setTooltip(e.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var a=n.newBlock("lists_create_with_container");a.initSvg();for(var f=a.getInput("STACK").connection,E=0;E<this.itemCount_;E++){var I=n.newBlock("lists_create_with_item");I.initSvg(),f.connect(I.previousConnection),f=I.nextConnection}return a},compose:function(n){var a=n.getInputTargetBlock("STACK");for(n=[];a&&!a.isInsertionMarker();)n.push(a.valueConnection_),a=a.nextConnection&&a.nextConnection.targetBlock();for(a=0;a<this.itemCount_;a++){var f=this.getInput("ADD"+a).connection.targetConnection;f&&-1==n.indexOf(f)&&f.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),a=0;a<this.itemCount_;a++)e.Mutator.reconnect(n[a],this,"ADD"+a)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var a=0;n;){var f=this.getInput("ADD"+a);n.valueConnection_=f&&f.connection.targetConnection,a++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(e.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var a=this.appendValueInput("ADD"+n).setAlign(e.ALIGN_RIGHT);0==n&&a.appendField(e.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},e.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_indexOf={init:function(){var n=[[e.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[e.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(e.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new e.FieldDropdown(n),"END"),this.setInputsInline(!0);var a=this;this.setTooltip(function(){return e.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",a.workspace.options.oneBasedIndex?"0":"-1")})}},e.Blocks.lists_getIndex={init:function(){var n=[[e.Msg.LISTS_GET_INDEX_GET,"GET"],[e.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[e.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new e.FieldDropdown(n,function(f){f="REMOVE"==f,this.getSourceBlock().updateStatement_(f)}),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),e.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var a=this;this.setTooltip(function(){var f=a.getFieldValue("MODE"),E=a.getFieldValue("WHERE"),I="";switch(f+" "+E){case"GET FROM_START":case"GET FROM_END":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":I=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==E||"FROM_END"==E)&&(I+="  "+("FROM_START"==E?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",a.workspace.options.oneBasedIndex?"#1":"#0")),I})},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var a=this.getInput("AT").type==e.INPUT_VALUE;return n.setAttribute("at",a),n},domToMutation:function(n){var a="true"==n.getAttribute("statement");this.updateStatement_(a),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var a=new e.FieldDropdown(this.WHERE_OPTIONS,function(f){var E="FROM_START"==f||"FROM_END"==f;if(E!=n){var I=this.getSourceBlock();return I.updateAt_(E),I.setFieldValue(f,"WHERE"),null}});this.getInput("AT").appendField(a,"WHERE"),e.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_setIndex={init:function(){var n=[[e.Msg.LISTS_SET_INDEX_SET,"SET"],[e.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new e.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(e.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var a=this;this.setTooltip(function(){var f=a.getFieldValue("MODE"),E=a.getFieldValue("WHERE"),I="";switch(f+" "+E){case"SET FROM_START":case"SET FROM_END":I=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":I=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":I=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":I=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":I=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":I=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":I=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":I=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==E||"FROM_END"==E)&&(I+="  "+e.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",a.workspace.options.oneBasedIndex?"#1":"#0")),I})},mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a=this.getInput("AT").type==e.INPUT_VALUE;return n.setAttribute("at",a),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var a=new e.FieldDropdown(this.WHERE_OPTIONS,function(f){var E="FROM_START"==f||"FROM_END"==f;if(E!=n){var I=this.getSourceBlock();return I.updateAt_(E),I.setFieldValue(f,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(a,"WHERE")}},e.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a=this.getInput("AT1").type==e.INPUT_VALUE;return n.setAttribute("at1",a),a=this.getInput("AT2").type==e.INPUT_VALUE,n.setAttribute("at2",a),n},domToMutation:function(n){var a="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,a),this.updateAt_(2,n)},updateAt_:function(n,a){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),a?(this.appendValueInput("AT"+n).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var f=new e.FieldDropdown(this["WHERE_OPTIONS_"+n],function(E){var I="FROM_START"==E||"FROM_END"==E;if(I!=a){var Y=this.getSourceBlock();return Y.updateAt_(n,I),Y.setFieldValue(E,"WHERE"+n),null}});this.getInput("AT"+n).appendField(f,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_sort={init:function(){this.jsonInit({message0:e.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[e.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[e.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[e.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[e.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[e.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:e.Msg.LISTS_SORT_TOOLTIP,helpUrl:e.Msg.LISTS_SORT_HELPURL})}},e.Blocks.lists_split={init:function(){var n=this,a=new e.FieldDropdown([[e.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[e.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(f){n.updateType_(f)});this.setHelpUrl(e.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(a,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(e.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var f=n.getFieldValue("MODE");if("SPLIT"==f)return e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==f)return e.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+f)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var a=this.getInput("INPUT").connection;a.setShadowDom(null);var f=a.targetBlock();f&&(a.disconnect(),f.isShadow()?f.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},e.Blocks.logic={},e.Constants.Logic={},e.Constants.Logic.HUE=210,e.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),e.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),e.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},e.Extensions.register("logic_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Logic.TOOLTIPS_BY_OP)),e.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=e.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var a=n.newBlock("controls_if_if");a.initSvg();for(var f=a.nextConnection,E=1;E<=this.elseifCount_;E++){var I=n.newBlock("controls_if_elseif");I.initSvg(),f.connect(I.previousConnection),f=I.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),f.connect(n.previousConnection)),a},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var a=[null],f=[null],E=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,a.push(n.valueConnection_),f.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,E=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(a,f,E)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var a=1;n;){switch(n.type){case"controls_if_elseif":var f=this.getInput("IF"+a),E=this.getInput("DO"+a);n.valueConnection_=f&&f.connection.targetConnection,n.statementConnection_=E&&E.connection.targetConnection,a++;break;case"controls_if_else":E=this.getInput("ELSE"),n.statementConnection_=E&&E.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],a=[null],f=null;this.getInput("ELSE")&&(f=this.getInput("ELSE").connection.targetConnection);for(var E=1;this.getInput("IF"+E);){var I=this.getInput("IF"+E),Y=this.getInput("DO"+E);n.push(I.connection.targetConnection),a.push(Y.connection.targetConnection),E++}this.updateShape_(),this.reconnectChildBlocks_(n,a,f)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(e.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(e.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,a,f){for(var E=1;E<=this.elseifCount_;E++)e.Mutator.reconnect(n[E],this,"IF"+E),e.Mutator.reconnect(a[E],this,"DO"+E);e.Mutator.reconnect(f,this,"ELSE")}},e.Extensions.registerMutator("controls_if_mutator",e.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_4:"":e.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},e.Extensions.register("controls_if_tooltip",e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var a=this.getInputTargetBlock("A"),f=this.getInputTargetBlock("B");a&&f&&!this.workspace.connectionChecker.doTypeChecks(a.outputConnection,f.outputConnection)&&(e.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==a&&(a.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(a=this.prevBlocks_[1])!==f&&(f.unplug(),!a||a.isDisposed()||a.isShadow()||this.getInput("B").connection.connect(a.outputConnection)),this.bumpNeighbours(),e.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},e.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},e.Extensions.register("logic_compare",e.Constants.Logic.LOGIC_COMPARE_EXTENSION),e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var a=this.getInputTargetBlock("THEN"),f=this.getInputTargetBlock("ELSE"),E=this.outputConnection.targetConnection;if((a||f)&&E)for(var I=0;2>I;I++){var Y=1==I?a:f;Y&&!Y.workspace.connectionChecker.doTypeChecks(Y.outputConnection,E)&&(e.Events.setGroup(n.group),E===this.prevParentConnection_?(this.unplug(),E.getSourceBlock().bumpNeighbours()):(Y.unplug(),Y.bumpNeighbours()),e.Events.setGroup(!1))}this.prevParentConnection_=E}},e.Extensions.registerMixin("logic_ternary",e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),e.Blocks.loops={},e.Constants.Loops={},e.Constants.Loops.HUE=120,e.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),e.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},e.Extensions.register("controls_whileUntil_tooltip",e.Extensions.buildTooltipForDropdown("MODE",e.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},e.Extensions.register("controls_flow_tooltip",e.Extensions.buildTooltipForDropdown("FLOW",e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var a=this.getField("VAR").getVariable(),f=a.name;if(!this.isCollapsed()&&null!=f){var E={enabled:!0};E.text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",f),a=e.Variables.generateVariableFieldDom(a),(f=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),f.appendChild(a),E.callback=e.ContextMenu.callbackFactory(this,f),n.push(E)}}}},e.Extensions.registerMixin("contextMenu_newGetVariableBlock",e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),e.Extensions.register("controls_for_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),e.Extensions.register("controls_forEach_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==e.Events.BLOCK_MOVE){var a=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(a?null:e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var f=e.Events.getGroup();e.Events.setGroup(n.group),this.setEnabled(a),e.Events.setGroup(f)}}}},e.Extensions.registerMixin("controls_flow_in_loop_check",e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),e.Blocks.math={},e.Constants.Math={},e.Constants.Math.HUE=230,e.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),e.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},e.Extensions.register("math_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Math.TOOLTIPS_BY_OP)),e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",a),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var a=this.getInput("DIVISOR");n?a||this.appendValueInput("DIVISOR").setCheck("Number"):a&&this.removeInput("DIVISOR")}},e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},e.Extensions.registerMutator("math_is_divisibleby_mutator",e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),e.Extensions.register("math_change_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),e.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},e.Extensions.registerMutator("math_modes_of_list_mutator",e.Constants.Math.LIST_MODES_MUTATOR_MIXIN,e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),e.Blocks.procedures={},e.Blocks.procedures_defnoreturn={init:function(){var n=e.Procedures.findLegalName("",this);(n=new e.FieldTextInput(n,e.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(e.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=e.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),e.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{e.Events.enable()}},mutationToDom:function(n){var a=e.utils.xml.createElement("mutation");n&&a.setAttribute("name",this.getFieldValue("NAME"));for(var f=0;f<this.argumentVarModels_.length;f++){var E=e.utils.xml.createElement("arg"),I=this.argumentVarModels_[f];E.setAttribute("name",I.name),E.setAttribute("varid",I.getId()),n&&this.paramIds_&&E.setAttribute("paramId",this.paramIds_[f]),a.appendChild(E)}return this.hasStatements_||a.setAttribute("statements","false"),a},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var f,a=0;f=n.childNodes[a];a++)if("arg"==f.nodeName.toLowerCase()){var E=f.getAttribute("name");f=f.getAttribute("varid")||f.getAttribute("varId"),this.arguments_.push(E),null!=(f=e.Variables.getOrCreateVariablePackage(this.workspace,f,E,""))?this.argumentVarModels_.push(f):console.log("Failed to create a variable with name "+E+", ignoring.")}this.updateParams_(),e.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var a=e.utils.xml.createElement("block");a.setAttribute("type","procedures_mutatorcontainer");var f=e.utils.xml.createElement("statement");f.setAttribute("name","STACK"),a.appendChild(f);for(var E=0;E<this.arguments_.length;E++){var I=e.utils.xml.createElement("block");I.setAttribute("type","procedures_mutatorarg");var Y=e.utils.xml.createElement("field");Y.setAttribute("name","NAME");var ee=e.utils.xml.createTextNode(this.arguments_[E]);Y.appendChild(ee),I.appendChild(Y),Y=e.utils.xml.createElement("next"),I.appendChild(Y),f.appendChild(I),f=Y}return n=e.Xml.domToBlock(a,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),e.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var a=n.getInputTargetBlock("STACK");a&&!a.isInsertionMarker();){var f=a.getFieldValue("NAME");this.arguments_.push(f),f=this.workspace.getVariable(f,""),this.argumentVarModels_.push(f),this.paramIds_.push(a.id),a=a.nextConnection&&a.nextConnection.targetBlock()}this.updateParams_(),e.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),e.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,a){var f=this.workspace.getVariableById(n);if(""==f.type){f=f.name,a=this.workspace.getVariableById(a);for(var E=!1,I=0;I<this.argumentVarModels_.length;I++)this.argumentVarModels_[I].getId()==n&&(this.arguments_[I]=a.name,this.argumentVarModels_[I]=a,E=!0);E&&(this.displayRenamedVar_(f,a.name),e.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var a=n.name,f=!1,E=0;E<this.argumentVarModels_.length;E++)if(this.argumentVarModels_[E].getId()==n.getId()){var I=this.arguments_[E];this.arguments_[E]=a,f=!0}f&&(this.displayRenamedVar_(I,a),e.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,a){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var I,f=this.mutator.workspace_.getAllBlocks(!1),E=0;I=f[E];E++)"procedures_mutatorarg"==I.type&&e.Names.equals(n,I.getFieldValue("NAME"))&&I.setFieldValue(a,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var a={enabled:!0},f=this.getFieldValue("NAME");a.text=e.Msg.PROCEDURES_CREATE_DO.replace("%1",f);var E=e.utils.xml.createElement("mutation");for(E.setAttribute("name",f),f=0;f<this.arguments_.length;f++){var I=e.utils.xml.createElement("arg");I.setAttribute("name",this.arguments_[f]),E.appendChild(I)}if((f=e.utils.xml.createElement("block")).setAttribute("type",this.callType_),f.appendChild(E),a.callback=e.ContextMenu.callbackFactory(this,f),n.push(a),!this.isCollapsed())for(f=0;f<this.argumentVarModels_.length;f++)(a={enabled:!0}).text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(E=this.argumentVarModels_[f]).name),E=e.Variables.generateVariableFieldDom(E),(I=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),I.appendChild(E),a.callback=e.ContextMenu.callbackFactory(this,I),n.push(a)}},callType_:"procedures_callnoreturn"},e.Blocks.procedures_defreturn={init:function(){var n=e.Procedures.findLegalName("",this);(n=new e.FieldTextInput(n,e.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(e.ALIGN_RIGHT).appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:e.Blocks.procedures_defnoreturn.setStatements_,updateParams_:e.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:e.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_defnoreturn.domToMutation,decompose:e.Blocks.procedures_defnoreturn.decompose,compose:e.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:e.Blocks.procedures_defnoreturn.getVars,getVarModels:e.Blocks.procedures_defnoreturn.getVarModels,renameVarById:e.Blocks.procedures_defnoreturn.renameVarById,updateVarName:e.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:e.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:e.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},e.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(e.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new e.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},e.Blocks.procedures_mutatorarg={init:function(){var n=new e.FieldTextInput(e.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var a=this.getSourceBlock(),f=e.Mutator.findParentWs(a.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var E=(a.workspace.targetWorkspace||a.workspace).getAllBlocks(!1),I=n.toLowerCase(),Y=0;Y<E.length;Y++)if(E[Y].id!=this.getSourceBlock().id){var ee=E[Y].getFieldValue("NAME");if(ee&&ee.toLowerCase()==I)return null}return a.isInFlyout||((a=f.getVariable(n,""))&&a.name!=n&&f.renameVariableById(a.getId(),n),a||(a=f.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(a)),n},deleteIntermediateVars_:function(n){var a=e.Mutator.findParentWs(this.getSourceBlock().workspace);if(a)for(var f=0;f<this.createdVariables_.length;f++){var E=this.createdVariables_[f];E.name!=n&&a.deleteVariableById(E.getId())}}},e.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,a){e.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(a,"NAME"),this.setTooltip((this.outputConnection?e.Msg.PROCEDURES_CALLRETURN_TOOLTIP:e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",a)))},setProcedureParameters_:function(n,a){var f=e.Procedures.getDefinition(this.getProcedureCall(),this.workspace),E=f&&f.mutator&&f.mutator.isVisible();if(E||(this.quarkConnections_={},this.quarkIds_=null),a)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=a;else{if(a.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),f=this.rendered,this.rendered=!1;for(var I=0;I<this.arguments_.length;I++){var Y=this.getInput("ARG"+I);Y&&(this.quarkConnections_[this.quarkIds_[I]]=Y=Y.connection.targetConnection,E&&Y&&-1==a.indexOf(this.quarkIds_[I])&&(Y.disconnect(),Y.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],I=0;I<this.arguments_.length;I++)n=e.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[I],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=a)for(I=0;I<this.arguments_.length;I++)(a=this.quarkIds_[I])in this.quarkConnections_&&(e.Mutator.reconnect(Y=this.quarkConnections_[a],this,"ARG"+I)||delete this.quarkConnections_[a]);(this.rendered=f)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var a=this.getField("ARGNAME"+n);if(a){e.Events.disable();try{a.setValue(this.arguments_[n])}finally{e.Events.enable()}}else a=new e.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(e.ALIGN_RIGHT).appendField(a,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(e.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var a=0;a<this.arguments_.length;a++){var f=e.utils.xml.createElement("arg");f.setAttribute("name",this.arguments_[a]),n.appendChild(f)}return n},domToMutation:function(n){var a=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),a),a=[];for(var I,f=[],E=0;I=n.childNodes[E];E++)"arg"==I.nodeName.toLowerCase()&&(a.push(I.getAttribute("name")),f.push(I.getAttribute("paramId")));this.setProcedureParameters_(a,f)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==e.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var a=this.getProcedureCall();if(!(a=e.Procedures.getDefinition(a,this.workspace))||a.type==this.defType_&&JSON.stringify(a.getVars())==JSON.stringify(this.arguments_)||(a=null),!a){e.Events.setGroup(n.group),n=e.utils.xml.createElement("xml"),(a=e.utils.xml.createElement("block")).setAttribute("type",this.defType_);var f=this.getRelativeToSurfaceXY(),E=f.y+2*e.SNAP_RADIUS;a.setAttribute("x",f.x+e.SNAP_RADIUS*(this.RTL?-1:1)),a.setAttribute("y",E),f=this.mutationToDom(),a.appendChild(f),(f=e.utils.xml.createElement("field")).setAttribute("name","NAME"),(E=this.getProcedureCall())||(E=e.Procedures.findLegalName("",this),this.renameProcedure("",E)),f.appendChild(e.utils.xml.createTextNode(E)),a.appendChild(f),n.appendChild(a),e.Xml.domToWorkspace(n,this.workspace),e.Events.setGroup(!1)}}else n.type==e.Events.BLOCK_DELETE?(a=this.getProcedureCall(),(a=e.Procedures.getDefinition(a,this.workspace))||(e.Events.setGroup(n.group),this.dispose(!0),e.Events.setGroup(!1))):n.type==e.Events.CHANGE&&"disabled"==n.element&&(a=this.getProcedureCall(),(a=e.Procedures.getDefinition(a,this.workspace))&&a.id==n.blockId&&((a=e.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),e.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),e.Events.setGroup(a)))},customContextMenu:function(n){if(this.workspace.isMovable()){var a={enabled:!0};a.text=e.Msg.PROCEDURES_HIGHLIGHT_DEF;var f=this.getProcedureCall(),E=this.workspace;a.callback=function(){var I=e.Procedures.getDefinition(f,E);I&&(E.centerOnBlock(I.id),I.select())},n.push(a)}},defType_:"procedures_defnoreturn"},e.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:e.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:e.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:e.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:e.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:e.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_callnoreturn.domToMutation,getVars:e.Blocks.procedures_callnoreturn.getVars,getVarModels:e.Blocks.procedures_callnoreturn.getVarModels,onchange:e.Blocks.procedures_callnoreturn.onchange,customContextMenu:e.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},e.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var a=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(a.type)){n=!0;break}a=a.getSurroundParent()}while(a);n?("procedures_defnoreturn"==a.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=a.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(e.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},e.Blocks.texts={},e.Constants.Text={},e.Constants.Text.HUE=160,e.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),e.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=e.utils.xml.createElement("mutation"),a=this.getInput("AT1").type==e.INPUT_VALUE;return n.setAttribute("at1",a),a=this.getInput("AT2").type==e.INPUT_VALUE,n.setAttribute("at2",a),n},domToMutation:function(n){var a="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,a),this.updateAt_(2,n)},updateAt_:function(n,a){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),a?(this.appendValueInput("AT"+n).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&e.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL));var f=new e.FieldDropdown(this["WHERE_OPTIONS_"+n],function(E){var I="FROM_START"==E||"FROM_END"==E;if(I!=a){var Y=this.getSourceBlock();return Y.updateAt_(n,I),Y.setFieldValue(E,"WHERE"+n),null}});this.getInput("AT"+n).appendField(f,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},e.Blocks.text_changeCase={init:function(){var n=[[e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(e.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg.TEXT_CHANGECASE_TOOLTIP)}},e.Blocks.text_trim={init:function(){var n=[[e.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[e.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[e.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(e.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg.TEXT_TRIM_TOOLTIP)}},e.Blocks.text_print={init:function(){this.jsonInit({message0:e.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:e.Msg.TEXT_PRINT_TOOLTIP,helpUrl:e.Msg.TEXT_PRINT_HELPURL})}},e.Blocks.text_prompt_ext={init:function(){var n=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var a=this;n=new e.FieldDropdown(n,function(f){a.updateType_(f)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==a.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},e.Blocks.text_prompt={init:function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],a=this;this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new e.FieldDropdown(n,function(f){a.updateType_(f)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new e.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==a.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:e.Blocks.text_prompt_ext.updateType_,mutationToDom:e.Blocks.text_prompt_ext.mutationToDom,domToMutation:e.Blocks.text_prompt_ext.domToMutation},e.Blocks.text_count={init:function(){this.jsonInit({message0:e.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_COUNT_TOOLTIP,helpUrl:e.Msg.TEXT_COUNT_HELPURL})}},e.Blocks.text_replace={init:function(){this.jsonInit({message0:e.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:e.Msg.TEXT_REPLACE_HELPURL})}},e.Blocks.text_reverse={init:function(){this.jsonInit({message0:e.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:e.Msg.TEXT_REVERSE_HELPURL})}},e.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var f,a=0;f=this.inputList[a];a++)for(var I,E=0;I=f.fieldRow[E];E++)if(n==I.name)return f.insertFieldAt(E,this.newQuote_(!0)),void f.insertFieldAt(E+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new e.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},e.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var a=n.newBlock("text_create_join_container");a.initSvg();for(var f=a.getInput("STACK").connection,E=0;E<this.itemCount_;E++){var I=n.newBlock("text_create_join_item");I.initSvg(),f.connect(I.previousConnection),f=I.nextConnection}return a},compose:function(n){var a=n.getInputTargetBlock("STACK");for(n=[];a&&!a.isInsertionMarker();)n.push(a.valueConnection_),a=a.nextConnection&&a.nextConnection.targetBlock();for(a=0;a<this.itemCount_;a++){var f=this.getInput("ADD"+a).connection.targetConnection;f&&-1==n.indexOf(f)&&f.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),a=0;a<this.itemCount_;a++)e.Mutator.reconnect(n[a],this,"ADD"+a)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var a=0;n;){var f=this.getInput("ADD"+a);n.valueConnection_=f&&f.connection.targetConnection,a++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var a=this.appendValueInput("ADD"+n).setAlign(e.ALIGN_RIGHT);0==n&&a.appendField(e.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},e.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new e.Mutator(["text_create_join_item"]))},e.Extensions.register("text_append_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return e.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=e.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)),e.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},e.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(a){(a="FROM_START"==a||"FROM_END"==a)!=this.isAt_&&this.getSourceBlock().updateAt_(a)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var a=n.getFieldValue("WHERE"),f=e.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==a||"FROM_END"==a)&&(a="FROM_START"==a?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(f+="  "+a.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),f})},e.Extensions.register("text_indexOf_tooltip",e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),e.Extensions.register("text_quotes",e.Constants.Text.TEXT_QUOTES_EXTENSION),e.Extensions.registerMutator("text_join_mutator",e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,e.Constants.Text.TEXT_JOIN_EXTENSION),e.Extensions.registerMutator("text_charAt_mutator",e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,e.Constants.Text.TEXT_CHARAT_EXTENSION),e.Blocks.variables={},e.Constants.Variables={},e.Constants.Variables.HUE=330,e.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(a={text:e.Msg.RENAME_VARIABLE,enabled:!0,callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},I=this.getField("VAR").getText(),E={text:e.Msg.DELETE_VARIABLE.replace("%1",I),enabled:!0,callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(a),n.unshift(E));else{if("variables_get"==this.type)var a="variables_set",f=e.Msg.VARIABLES_GET_CREATE_SET;else a="variables_get",f=e.Msg.VARIABLES_SET_CREATE_GET;var E={enabled:0<this.workspace.remainingCapacity()},I=this.getField("VAR").getText();E.text=f.replace("%1",I),(f=e.utils.xml.createElement("field")).setAttribute("name","VAR"),f.appendChild(e.utils.xml.createTextNode(I)),(I=e.utils.xml.createElement("block")).setAttribute("type",a),I.appendChild(f),E.callback=e.ContextMenu.callbackFactory(this,I),n.push(E)}}},e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,f=n.getField("VAR").getVariable();e.Variables.renameVariable(a,f)}},e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,f=n.getField("VAR").getVariable();a.deleteVariableById(f.getId()),a.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableSetterGetter",e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Constants.VariablesDynamic={},e.Constants.VariablesDynamic.HUE=310,e.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(a={text:e.Msg.RENAME_VARIABLE,enabled:!0,callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},Y=this.getField("VAR").getText(),I={text:e.Msg.DELETE_VARIABLE.replace("%1",Y),enabled:!0,callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(a),n.unshift(I));else{var a=this.getFieldValue("VAR"),f=this.workspace.getVariableById(a).type;if("variables_get_dynamic"==this.type){a="variables_set_dynamic";var E=e.Msg.VARIABLES_GET_CREATE_SET}else a="variables_get_dynamic",E=e.Msg.VARIABLES_SET_CREATE_GET;var I={enabled:0<this.workspace.remainingCapacity()},Y=this.getField("VAR").getText();I.text=E.replace("%1",Y),(E=e.utils.xml.createElement("field")).setAttribute("name","VAR"),E.setAttribute("variabletype",f),E.appendChild(e.utils.xml.createTextNode(Y)),(Y=e.utils.xml.createElement("block")).setAttribute("type",a),Y.appendChild(E),I.callback=e.ContextMenu.callbackFactory(this,Y),n.push(I)}},onchange:function(n){n=this.getFieldValue("VAR"),n=e.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},e.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,f=n.getField("VAR").getVariable();e.Variables.renameVariable(a,f)}},e.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var a=n.workspace,f=n.getField("VAR").getVariable();a.deleteVariableById(f.getId()),a.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Blocks}.apply(ht,y))&&(li.exports=t)},5552:function(li,ht,W){var y,t;y=[W(8210),W(3266),W(8783),W(69)],void 0!==(t=function(e,n,a,f){"use strict";return e.setLocale(n),e.Blocks=e.Blocks||{},Object.keys(a).forEach(function(E){e.Blocks[E]=a[E]}),e.JavaScript=f,e}.apply(ht,y))&&(li.exports=t)},8210:function(li,ht,W){var y,t;y=[W(6931)],void 0!==(t=function(e){"use strict";return e.setLocale=function(n){e.Msg=e.Msg||{},Object.keys(n).forEach(function(a){e.Msg[a]=n[a]})},e}.apply(ht,y))&&(li.exports=t)},6279:function(li,ht,W){var y,t;y=[W(5552)],void 0!==(t=function(e){"use strict";return e}.apply(ht,y))&&(li.exports=t)},69:function(li,ht,W){var y,t;y=[W(8210),W(9957)],void 0!==(t=function(e,n){"use strict";return e.JavaScript=n,n}.apply(ht,y))&&(li.exports=t)},9957:function(li,ht,W){var y,t;y=[W(1069)],void 0!==(t=function(e){"use strict";return e.JavaScript=new e.Generator("JavaScript"),e.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(e.utils.global).join(",")),e.JavaScript.ORDER_ATOMIC=0,e.JavaScript.ORDER_NEW=1.1,e.JavaScript.ORDER_MEMBER=1.2,e.JavaScript.ORDER_FUNCTION_CALL=2,e.JavaScript.ORDER_INCREMENT=3,e.JavaScript.ORDER_DECREMENT=3,e.JavaScript.ORDER_BITWISE_NOT=4.1,e.JavaScript.ORDER_UNARY_PLUS=4.2,e.JavaScript.ORDER_UNARY_NEGATION=4.3,e.JavaScript.ORDER_LOGICAL_NOT=4.4,e.JavaScript.ORDER_TYPEOF=4.5,e.JavaScript.ORDER_VOID=4.6,e.JavaScript.ORDER_DELETE=4.7,e.JavaScript.ORDER_AWAIT=4.8,e.JavaScript.ORDER_EXPONENTIATION=5,e.JavaScript.ORDER_MULTIPLICATION=5.1,e.JavaScript.ORDER_DIVISION=5.2,e.JavaScript.ORDER_MODULUS=5.3,e.JavaScript.ORDER_SUBTRACTION=6.1,e.JavaScript.ORDER_ADDITION=6.2,e.JavaScript.ORDER_BITWISE_SHIFT=7,e.JavaScript.ORDER_RELATIONAL=8,e.JavaScript.ORDER_IN=8,e.JavaScript.ORDER_INSTANCEOF=8,e.JavaScript.ORDER_EQUALITY=9,e.JavaScript.ORDER_BITWISE_AND=10,e.JavaScript.ORDER_BITWISE_XOR=11,e.JavaScript.ORDER_BITWISE_OR=12,e.JavaScript.ORDER_LOGICAL_AND=13,e.JavaScript.ORDER_LOGICAL_OR=14,e.JavaScript.ORDER_CONDITIONAL=15,e.JavaScript.ORDER_ASSIGNMENT=16,e.JavaScript.ORDER_YIELD=17,e.JavaScript.ORDER_COMMA=18,e.JavaScript.ORDER_NONE=99,e.JavaScript.ORDER_OVERRIDES=[[e.JavaScript.ORDER_FUNCTION_CALL,e.JavaScript.ORDER_MEMBER],[e.JavaScript.ORDER_FUNCTION_CALL,e.JavaScript.ORDER_FUNCTION_CALL],[e.JavaScript.ORDER_MEMBER,e.JavaScript.ORDER_MEMBER],[e.JavaScript.ORDER_MEMBER,e.JavaScript.ORDER_FUNCTION_CALL],[e.JavaScript.ORDER_LOGICAL_NOT,e.JavaScript.ORDER_LOGICAL_NOT],[e.JavaScript.ORDER_MULTIPLICATION,e.JavaScript.ORDER_MULTIPLICATION],[e.JavaScript.ORDER_ADDITION,e.JavaScript.ORDER_ADDITION],[e.JavaScript.ORDER_LOGICAL_AND,e.JavaScript.ORDER_LOGICAL_AND],[e.JavaScript.ORDER_LOGICAL_OR,e.JavaScript.ORDER_LOGICAL_OR]],e.JavaScript.isInitialized=!1,e.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new e.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var a=[],f=e.Variables.allDeveloperVariables(n),E=0;E<f.length;E++)a.push(this.nameDB_.getName(f[E],e.Names.DEVELOPER_VARIABLE_TYPE));for(n=e.Variables.allUsedVarModels(n),E=0;E<n.length;E++)a.push(this.nameDB_.getName(n[E].getId(),e.VARIABLE_CATEGORY_NAME));a.length&&(this.definitions_.variables="var "+a.join(", ")+";"),this.isInitialized=!0},e.JavaScript.finish=function(n){var a=e.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),a.join("\n\n")+"\n\n\n"+n},e.JavaScript.scrubNakedValue=function(n){return n+";\n"},e.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},e.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},e.JavaScript.scrub_=function(n,a,f){var E="";if(!n.outputConnection||!n.outputConnection.targetConnection){var I=n.getCommentText();I&&(I=e.utils.string.wrap(I,this.COMMENT_WRAP-3),E+=this.prefixLines(I+"\n","// "));for(var Y=0;Y<n.inputList.length;Y++)n.inputList[Y].type==e.inputTypes.VALUE&&(I=n.inputList[Y].connection.targetBlock())&&(I=this.allNestedComments(I))&&(E+=this.prefixLines(I,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),E+a+(f?"":this.blockToCode(n))},e.JavaScript.getAdjusted=function(n,a,f,E,I){f=f||0,I=I||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&f--;var Y=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<f?this.valueToCode(n,a,this.ORDER_ADDITION)||Y:0>f?this.valueToCode(n,a,this.ORDER_SUBTRACTION)||Y:E?this.valueToCode(n,a,this.ORDER_UNARY_NEGATION)||Y:this.valueToCode(n,a,I)||Y,e.isNumber(n))n=Number(n)+f,E&&(n=-n);else{if(0<f){n=n+" + "+f;var ee=this.ORDER_ADDITION}else 0>f&&(n=n+" - "+-f,ee=this.ORDER_SUBTRACTION);E&&(n=f?"-("+n+")":"-"+n,ee=this.ORDER_UNARY_NEGATION),ee=Math.floor(ee),I=Math.floor(I),ee&&I>=ee&&(n="("+n+")")}return n},e.JavaScript.colour={},e.JavaScript.colour_picker=function(n){return[e.JavaScript.quote_(n.getFieldValue("COLOUR")),e.JavaScript.ORDER_ATOMIC]},e.JavaScript.colour_random=function(n){return[e.JavaScript.provideFunction_("colourRandom",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.colour_rgb=function(n){var a=e.JavaScript.valueToCode(n,"RED",e.JavaScript.ORDER_NONE)||0,f=e.JavaScript.valueToCode(n,"GREEN",e.JavaScript.ORDER_NONE)||0;return n=e.JavaScript.valueToCode(n,"BLUE",e.JavaScript.ORDER_NONE)||0,[e.JavaScript.provideFunction_("colourRgb",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+a+", "+f+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.colour_blend=function(n){var a=e.JavaScript.valueToCode(n,"COLOUR1",e.JavaScript.ORDER_NONE)||"'#000000'",f=e.JavaScript.valueToCode(n,"COLOUR2",e.JavaScript.ORDER_NONE)||"'#000000'";return n=e.JavaScript.valueToCode(n,"RATIO",e.JavaScript.ORDER_NONE)||.5,[e.JavaScript.provideFunction_("colourBlend",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+a+", "+f+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists={},e.JavaScript.lists_create_empty=function(n){return["[]",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.lists_create_with=function(n){for(var a=Array(n.itemCount_),f=0;f<n.itemCount_;f++)a[f]=e.JavaScript.valueToCode(n,"ADD"+f,e.JavaScript.ORDER_NONE)||"null";return["["+a.join(", ")+"]",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.lists_repeat=function(n){return[e.JavaScript.provideFunction_("listsRepeat",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(e.JavaScript.valueToCode(n,"ITEM",e.JavaScript.ORDER_NONE)||"null")+", "+(n=e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_NONE)||"0")+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_length=function(n){return[(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"[]")+".length",e.JavaScript.ORDER_MEMBER]},e.JavaScript.lists_isEmpty=function(n){return["!"+(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"[]")+".length",e.JavaScript.ORDER_LOGICAL_NOT]},e.JavaScript.lists_indexOf=function(n){var a="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",f=e.JavaScript.valueToCode(n,"FIND",e.JavaScript.ORDER_NONE)||"''";return a=(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"[]")+"."+a+"("+f+")",n.workspace.options.oneBasedIndex?[a+" + 1",e.JavaScript.ORDER_ADDITION]:[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_getIndex=function(n){var a=n.getFieldValue("MODE")||"GET",f=n.getFieldValue("WHERE")||"FROM_START",E=e.JavaScript.valueToCode(n,"VALUE","RANDOM"==f?e.JavaScript.ORDER_NONE:e.JavaScript.ORDER_MEMBER)||"[]";switch(f){case"FIRST":if("GET"==a)return[E+"[0]",e.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==a)return[E+".shift()",e.JavaScript.ORDER_MEMBER];if("REMOVE"==a)return E+".shift();\n";break;case"LAST":if("GET"==a)return[E+".slice(-1)[0]",e.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==a)return[E+".pop()",e.JavaScript.ORDER_MEMBER];if("REMOVE"==a)return E+".pop();\n";break;case"FROM_START":if(n=e.JavaScript.getAdjusted(n,"AT"),"GET"==a)return[E+"["+n+"]",e.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==a)return[E+".splice("+n+", 1)[0]",e.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==a)return E+".splice("+n+", 1);\n";break;case"FROM_END":if(n=e.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==a)return[E+".slice("+n+")[0]",e.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==a)return[E+".splice("+n+", 1)[0]",e.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==a)return E+".splice("+n+", 1);";break;case"RANDOM":if(E=e.JavaScript.provideFunction_("listsGetRandomItem",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+E+", "+("GET"!=a)+")","GET"==a||"GET_REMOVE"==a)return[E,e.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==a)return E+";\n"}throw Error("Unhandled combination (lists_getIndex).")},e.JavaScript.lists_setIndex=function(n){function a(){if(f.match(/^\w+$/))return"";var ee=e.JavaScript.nameDB_.getDistinctName("tmpList",e.VARIABLE_CATEGORY_NAME),_e="var "+ee+" = "+f+";\n";return f=ee,_e}var f=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_MEMBER)||"[]",E=n.getFieldValue("MODE")||"GET",I=n.getFieldValue("WHERE")||"FROM_START",Y=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_ASSIGNMENT)||"null";switch(I){case"FIRST":if("SET"==E)return f+"[0] = "+Y+";\n";if("INSERT"==E)return f+".unshift("+Y+");\n";break;case"LAST":if("SET"==E)return(n=a())+(f+"[")+f+".length - 1] = "+Y+";\n";if("INSERT"==E)return f+".push("+Y+");\n";break;case"FROM_START":if(I=e.JavaScript.getAdjusted(n,"AT"),"SET"==E)return f+"["+I+"] = "+Y+";\n";if("INSERT"==E)return f+".splice("+I+", 0, "+Y+");\n";break;case"FROM_END":if(I=e.JavaScript.getAdjusted(n,"AT",1,!1,e.JavaScript.ORDER_SUBTRACTION),n=a(),"SET"==E)return n+(f+"[")+f+".length - "+I+"] = "+Y+";\n";if("INSERT"==E)return n+(f+".splice(")+f+".length - "+I+", 0, "+Y+");\n";break;case"RANDOM":if(n=a(),n+="var "+(I=e.JavaScript.nameDB_.getDistinctName("tmpX",e.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+f+".length);\n","SET"==E)return n+(f+"[")+I+"] = "+Y+";\n";if("INSERT"==E)return n+(f+".splice(")+I+", 0, "+Y+");\n"}throw Error("Unhandled combination (lists_setIndex).")},e.JavaScript.lists.getIndex_=function(n,a,f){return"FIRST"==a?"0":"FROM_END"==a?n+".length - 1 - "+f:"LAST"==a?n+".length - 1":f},e.JavaScript.lists_getSublist=function(n){var a=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_MEMBER)||"[]",f=n.getFieldValue("WHERE1"),E=n.getFieldValue("WHERE2");if("FIRST"==f&&"LAST"==E)a+=".slice(0)";else if(a.match(/^\w+$/)||"FROM_END"!=f&&"FROM_START"==E){switch(f){case"FROM_START":var I=e.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":I=a+".length - "+(I=e.JavaScript.getAdjusted(n,"AT1",1,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":I="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(E){case"FROM_START":n=e.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=a+".length - "+(n=e.JavaScript.getAdjusted(n,"AT2",0,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=a+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}a=a+".slice("+I+", "+n+")"}else{I=e.JavaScript.getAdjusted(n,"AT1"),n=e.JavaScript.getAdjusted(n,"AT2");var Y=e.JavaScript.lists.getIndex_,ee={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};a=e.JavaScript.provideFunction_("subsequence"+ee[f]+ee[E],["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==f||"FROM_START"==f?", at1":"")+("FROM_END"==E||"FROM_START"==E?", at2":"")+") {","  var start = "+Y("sequence",f,"at1")+";","  var end = "+Y("sequence",E,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+a+("FROM_END"==f||"FROM_START"==f?", "+I:"")+("FROM_END"==E||"FROM_START"==E?", "+n:"")+")"}return[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_sort=function(n){var a=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_FUNCTION_CALL)||"[]",f="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[a+".slice().sort("+e.JavaScript.provideFunction_("listsGetSortCompare",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+f+"))",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_split=function(n){var a=e.JavaScript.valueToCode(n,"INPUT",e.JavaScript.ORDER_MEMBER),f=e.JavaScript.valueToCode(n,"DELIM",e.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))a||(a="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);a||(a="[]"),n="join"}return[a+"."+n+"("+f+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.lists_reverse=function(n){return[(e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.logic={},e.JavaScript.controls_if=function(n){var a=0,f="";e.JavaScript.STATEMENT_PREFIX&&(f+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,n));do{var E=e.JavaScript.valueToCode(n,"IF"+a,e.JavaScript.ORDER_NONE)||"false",I=e.JavaScript.statementToCode(n,"DO"+a);e.JavaScript.STATEMENT_SUFFIX&&(I=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n),e.JavaScript.INDENT)+I),f+=(0<a?" else ":"")+"if ("+E+") {\n"+I+"}",++a}while(n.getInput("IF"+a));return(n.getInput("ELSE")||e.JavaScript.STATEMENT_SUFFIX)&&(I=e.JavaScript.statementToCode(n,"ELSE"),e.JavaScript.STATEMENT_SUFFIX&&(I=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n),e.JavaScript.INDENT)+I),f+=" else {\n"+I+"}"),f+"\n"},e.JavaScript.controls_ifelse=e.JavaScript.controls_if,e.JavaScript.logic_compare=function(n){var a={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],f="=="==a||"!="==a?e.JavaScript.ORDER_EQUALITY:e.JavaScript.ORDER_RELATIONAL;return[(e.JavaScript.valueToCode(n,"A",f)||"0")+" "+a+" "+(n=e.JavaScript.valueToCode(n,"B",f)||"0"),f]},e.JavaScript.logic_operation=function(n){var a="AND"==n.getFieldValue("OP")?"&&":"||",f="&&"==a?e.JavaScript.ORDER_LOGICAL_AND:e.JavaScript.ORDER_LOGICAL_OR,E=e.JavaScript.valueToCode(n,"A",f);if(n=e.JavaScript.valueToCode(n,"B",f),E||n){var I="&&"==a?"true":"false";E||(E=I),n||(n=I)}else n=E="false";return[E+" "+a+" "+n,f]},e.JavaScript.logic_negate=function(n){var a=e.JavaScript.ORDER_LOGICAL_NOT;return["!"+(e.JavaScript.valueToCode(n,"BOOL",a)||"true"),a]},e.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.logic_null=function(n){return["null",e.JavaScript.ORDER_ATOMIC]},e.JavaScript.logic_ternary=function(n){return[(e.JavaScript.valueToCode(n,"IF",e.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(e.JavaScript.valueToCode(n,"THEN",e.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=e.JavaScript.valueToCode(n,"ELSE",e.JavaScript.ORDER_CONDITIONAL)||"null"),e.JavaScript.ORDER_CONDITIONAL]},e.JavaScript.loops={},e.JavaScript.controls_repeat_ext=function(n){var a=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):e.JavaScript.valueToCode(n,"TIMES",e.JavaScript.ORDER_ASSIGNMENT)||"0",f=e.JavaScript.statementToCode(n,"DO");f=e.JavaScript.addLoopTrap(f,n),n="";var E=e.JavaScript.nameDB_.getDistinctName("count",e.VARIABLE_CATEGORY_NAME),I=a;return a.match(/^\w+$/)||e.isNumber(a)||(n+="var "+(I=e.JavaScript.nameDB_.getDistinctName("repeat_end",e.VARIABLE_CATEGORY_NAME))+" = "+a+";\n"),n+"for (var "+E+" = 0; "+E+" < "+I+"; "+E+"++) {\n"+f+"}\n"},e.JavaScript.controls_repeat=e.JavaScript.controls_repeat_ext,e.JavaScript.controls_whileUntil=function(n){var a="UNTIL"==n.getFieldValue("MODE"),f=e.JavaScript.valueToCode(n,"BOOL",a?e.JavaScript.ORDER_LOGICAL_NOT:e.JavaScript.ORDER_NONE)||"false",E=e.JavaScript.statementToCode(n,"DO");return a&&(f="!"+f),"while ("+f+") {\n"+(E=e.JavaScript.addLoopTrap(E,n))+"}\n"},e.JavaScript.controls_for=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME),f=e.JavaScript.valueToCode(n,"FROM",e.JavaScript.ORDER_ASSIGNMENT)||"0",E=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_ASSIGNMENT)||"0",I=e.JavaScript.valueToCode(n,"BY",e.JavaScript.ORDER_ASSIGNMENT)||"1",Y=e.JavaScript.statementToCode(n,"DO");if(Y=e.JavaScript.addLoopTrap(Y,n),e.isNumber(f)&&e.isNumber(E)&&e.isNumber(I)){var ee=Number(f)<=Number(E);n="for ("+a+" = "+f+"; "+a+(ee?" <= ":" >= ")+E+"; "+a,n=(1==(a=Math.abs(Number(I)))?n+(ee?"++":"--"):n+(ee?" += ":" -= ")+a)+") {\n"+Y+"}\n"}else n="",ee=f,f.match(/^\w+$/)||e.isNumber(f)||(n+="var "+(ee=e.JavaScript.nameDB_.getDistinctName(a+"_start",e.VARIABLE_CATEGORY_NAME))+" = "+f+";\n"),f=E,E.match(/^\w+$/)||e.isNumber(E)||(n+="var "+(f=e.JavaScript.nameDB_.getDistinctName(a+"_end",e.VARIABLE_CATEGORY_NAME))+" = "+E+";\n"),n+="var "+(E=e.JavaScript.nameDB_.getDistinctName(a+"_inc",e.VARIABLE_CATEGORY_NAME))+" = ",n=(n=e.isNumber(I)?n+(Math.abs(I)+";\n"):n+"Math.abs("+I+");\n")+"if ("+ee+" > "+f+") {\n"+(e.JavaScript.INDENT+E)+" = -"+E+";\n",n+="}\n",n+="for ("+a+" = "+ee+"; "+E+" >= 0 ? "+a+" <= "+f+" : "+a+" >= "+f+"; "+a+" += "+E+") {\n"+Y+"}\n";return n},e.JavaScript.controls_forEach=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME),f=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_ASSIGNMENT)||"[]",E=e.JavaScript.statementToCode(n,"DO");E=e.JavaScript.addLoopTrap(E,n),n="";var I=f;return f.match(/^\w+$/)||(n+="var "+(I=e.JavaScript.nameDB_.getDistinctName(a+"_list",e.VARIABLE_CATEGORY_NAME))+" = "+f+";\n"),n+"for (var "+(f=e.JavaScript.nameDB_.getDistinctName(a+"_index",e.VARIABLE_CATEGORY_NAME))+" in "+I+") {\n"+(E=e.JavaScript.INDENT+a+" = "+I+"["+f+"];\n"+E)+"}\n"},e.JavaScript.controls_flow_statements=function(n){var a="";if(e.JavaScript.STATEMENT_PREFIX&&(a+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,n)),e.JavaScript.STATEMENT_SUFFIX&&(a+=e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n)),e.JavaScript.STATEMENT_PREFIX){var f=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);f&&!f.suppressPrefixSuffix&&(a+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,f))}switch(n.getFieldValue("FLOW")){case"BREAK":return a+"break;\n";case"CONTINUE":return a+"continue;\n"}throw Error("Unknown flow statement.")},e.JavaScript.math={},e.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?e.JavaScript.ORDER_ATOMIC:e.JavaScript.ORDER_UNARY_NEGATION]},e.JavaScript.math_arithmetic=function(n){var a={ADD:[" + ",e.JavaScript.ORDER_ADDITION],MINUS:[" - ",e.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",e.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",e.JavaScript.ORDER_DIVISION],POWER:[null,e.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],f=a[0],E=e.JavaScript.valueToCode(n,"A",a=a[1])||"0";return n=e.JavaScript.valueToCode(n,"B",a)||"0",f?[E+f+n,a]:["Math.pow("+E+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_single=function(n){var a=n.getFieldValue("OP");if("NEG"==a)return"-"==(n=e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,e.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==a||"COS"==a||"TAN"==a?e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_DIVISION)||"0":e.JavaScript.valueToCode(n,"NUM",e.JavaScript.ORDER_NONE)||"0",a){case"ABS":var f="Math.abs("+n+")";break;case"ROOT":f="Math.sqrt("+n+")";break;case"LN":f="Math.log("+n+")";break;case"EXP":f="Math.exp("+n+")";break;case"POW10":f="Math.pow(10,"+n+")";break;case"ROUND":f="Math.round("+n+")";break;case"ROUNDUP":f="Math.ceil("+n+")";break;case"ROUNDDOWN":f="Math.floor("+n+")";break;case"SIN":f="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":f="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":f="Math.tan("+n+" / 180 * Math.PI)"}if(f)return[f,e.JavaScript.ORDER_FUNCTION_CALL];switch(a){case"LOG10":f="Math.log("+n+") / Math.log(10)";break;case"ASIN":f="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":f="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":f="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+a)}return[f,e.JavaScript.ORDER_DIVISION]},e.JavaScript.math_constant=function(n){return{PI:["Math.PI",e.JavaScript.ORDER_MEMBER],E:["Math.E",e.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",e.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",e.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",e.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",e.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},e.JavaScript.math_number_property=function(n){var a=e.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",e.JavaScript.ORDER_MODULUS)||"0",f=n.getFieldValue("PROPERTY");if("PRIME"==f)return[e.JavaScript.provideFunction_("mathIsPrime",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+a+")",e.JavaScript.ORDER_FUNCTION_CALL];switch(f){case"EVEN":var E=a+" % 2 == 0";break;case"ODD":E=a+" % 2 == 1";break;case"WHOLE":E=a+" % 1 == 0";break;case"POSITIVE":E=a+" > 0";break;case"NEGATIVE":E=a+" < 0";break;case"DIVISIBLE_BY":E=a+" % "+(n=e.JavaScript.valueToCode(n,"DIVISOR",e.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[E,e.JavaScript.ORDER_EQUALITY]},e.JavaScript.math_change=function(n){var a=e.JavaScript.valueToCode(n,"DELTA",e.JavaScript.ORDER_ADDITION)||"0";return(n=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+a+";\n"},e.JavaScript.math_round=e.JavaScript.math_single,e.JavaScript.math_trig=e.JavaScript.math_single,e.JavaScript.math_on_list=function(n){var a=n.getFieldValue("OP");switch(a){case"SUM":n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(a=e.JavaScript.provideFunction_("mathMean",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(a=e.JavaScript.provideFunction_("mathMedian",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(a=e.JavaScript.provideFunction_("mathModes",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(a=e.JavaScript.provideFunction_("mathStandardDeviation",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(a=e.JavaScript.provideFunction_("mathRandomList",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=e.JavaScript.valueToCode(n,"LIST",e.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+a)}return[n,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_modulo=function(n){return[(e.JavaScript.valueToCode(n,"DIVIDEND",e.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=e.JavaScript.valueToCode(n,"DIVISOR",e.JavaScript.ORDER_MODULUS)||"0"),e.JavaScript.ORDER_MODULUS]},e.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_NONE)||"0")+", "+(e.JavaScript.valueToCode(n,"LOW",e.JavaScript.ORDER_NONE)||"0")+"), "+(n=e.JavaScript.valueToCode(n,"HIGH",e.JavaScript.ORDER_NONE)||"Infinity")+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_random_int=function(n){var a=e.JavaScript.valueToCode(n,"FROM",e.JavaScript.ORDER_NONE)||"0";return n=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_NONE)||"0",[e.JavaScript.provideFunction_("mathRandomInt",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+a+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_random_float=function(n){return["Math.random()",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.math_atan2=function(n){var a=e.JavaScript.valueToCode(n,"X",e.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(e.JavaScript.valueToCode(n,"Y",e.JavaScript.ORDER_NONE)||"0")+", "+a+") / Math.PI * 180",e.JavaScript.ORDER_DIVISION]},e.JavaScript.procedures={},e.JavaScript.procedures_defreturn=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),e.PROCEDURE_CATEGORY_NAME),f="";e.JavaScript.STATEMENT_PREFIX&&(f+=e.JavaScript.injectId(e.JavaScript.STATEMENT_PREFIX,n)),e.JavaScript.STATEMENT_SUFFIX&&(f+=e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n)),f&&(f=e.JavaScript.prefixLines(f,e.JavaScript.INDENT));var E="";e.JavaScript.INFINITE_LOOP_TRAP&&(E=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.INFINITE_LOOP_TRAP,n),e.JavaScript.INDENT));var I=e.JavaScript.statementToCode(n,"STACK"),Y=e.JavaScript.valueToCode(n,"RETURN",e.JavaScript.ORDER_NONE)||"",ee="";I&&Y&&(ee=f),Y&&(Y=e.JavaScript.INDENT+"return "+Y+";\n");for(var _e=[],De=n.getVars(),Ae=0;Ae<De.length;Ae++)_e[Ae]=e.JavaScript.nameDB_.getName(De[Ae],e.VARIABLE_CATEGORY_NAME);return f="function "+a+"("+_e.join(", ")+") {\n"+f+E+I+ee+Y+"}",f=e.JavaScript.scrub_(n,f),e.JavaScript.definitions_["%"+a]=f,null},e.JavaScript.procedures_defnoreturn=e.JavaScript.procedures_defreturn,e.JavaScript.procedures_callreturn=function(n){for(var a=e.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),e.PROCEDURE_CATEGORY_NAME),f=[],E=n.getVars(),I=0;I<E.length;I++)f[I]=e.JavaScript.valueToCode(n,"ARG"+I,e.JavaScript.ORDER_NONE)||"null";return[a+"("+f.join(", ")+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.procedures_callnoreturn=function(n){return e.JavaScript.procedures_callreturn(n)[0]+";\n"},e.JavaScript.procedures_ifreturn=function(n){var a="if ("+(e.JavaScript.valueToCode(n,"CONDITION",e.JavaScript.ORDER_NONE)||"false")+") {\n";return e.JavaScript.STATEMENT_SUFFIX&&(a+=e.JavaScript.prefixLines(e.JavaScript.injectId(e.JavaScript.STATEMENT_SUFFIX,n),e.JavaScript.INDENT)),n.hasReturnValue_?(n=e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_NONE)||"null",a+=e.JavaScript.INDENT+"return "+n+";\n"):a+=e.JavaScript.INDENT+"return;\n",a+"}\n"},e.JavaScript.texts={},e.JavaScript.text=function(n){return[e.JavaScript.quote_(n.getFieldValue("TEXT")),e.JavaScript.ORDER_ATOMIC]},e.JavaScript.text_multiline=function(n){var a=-1!=(n=e.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?e.JavaScript.ORDER_ADDITION:e.JavaScript.ORDER_ATOMIC;return[n,a]},e.JavaScript.text.forceString_=function(n){return e.JavaScript.text.forceString_.strRegExp.test(n)?[n,e.JavaScript.ORDER_ATOMIC]:["String("+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,e.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",e.JavaScript.ORDER_ATOMIC];case 1:return n=e.JavaScript.valueToCode(n,"ADD0",e.JavaScript.ORDER_NONE)||"''",e.JavaScript.text.forceString_(n);case 2:var a=e.JavaScript.valueToCode(n,"ADD0",e.JavaScript.ORDER_NONE)||"''";return n=e.JavaScript.valueToCode(n,"ADD1",e.JavaScript.ORDER_NONE)||"''",[n=e.JavaScript.text.forceString_(a)[0]+" + "+e.JavaScript.text.forceString_(n)[0],e.JavaScript.ORDER_ADDITION];default:a=Array(n.itemCount_);for(var f=0;f<n.itemCount_;f++)a[f]=e.JavaScript.valueToCode(n,"ADD"+f,e.JavaScript.ORDER_NONE)||"''";return[n="["+a.join(",")+"].join('')",e.JavaScript.ORDER_FUNCTION_CALL]}},e.JavaScript.text_append=function(n){var a=e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME);return n=e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''",a+" += "+e.JavaScript.text.forceString_(n)[0]+";\n"},e.JavaScript.text_length=function(n){return[(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"''")+".length",e.JavaScript.ORDER_MEMBER]},e.JavaScript.text_isEmpty=function(n){return["!"+(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"''")+".length",e.JavaScript.ORDER_LOGICAL_NOT]},e.JavaScript.text_indexOf=function(n){var a="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",f=e.JavaScript.valueToCode(n,"FIND",e.JavaScript.ORDER_NONE)||"''";return a=(e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_MEMBER)||"''")+"."+a+"("+f+")",n.workspace.options.oneBasedIndex?[a+" + 1",e.JavaScript.ORDER_ADDITION]:[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_charAt=function(n){var a=n.getFieldValue("WHERE")||"FROM_START",f=e.JavaScript.valueToCode(n,"VALUE","RANDOM"==a?e.JavaScript.ORDER_NONE:e.JavaScript.ORDER_MEMBER)||"''";switch(a){case"FIRST":return[f+".charAt(0)",e.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[f+".slice(-1)",e.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[f+".charAt("+(n=e.JavaScript.getAdjusted(n,"AT"))+")",e.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[f+".slice("+(n=e.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",e.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[e.JavaScript.provideFunction_("textRandomLetter",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+f+")",e.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},e.JavaScript.text.getIndex_=function(n,a,f){return"FIRST"==a?"0":"FROM_END"==a?n+".length - 1 - "+f:"LAST"==a?n+".length - 1":f},e.JavaScript.text_getSubstring=function(n){var a=n.getFieldValue("WHERE1"),f=n.getFieldValue("WHERE2"),E="FROM_END"!=a&&"LAST"!=a&&"FROM_END"!=f&&"LAST"!=f,I=e.JavaScript.valueToCode(n,"STRING",E?e.JavaScript.ORDER_MEMBER:e.JavaScript.ORDER_NONE)||"''";if("FIRST"==a&&"LAST"==f)return[I,e.JavaScript.ORDER_NONE];if(I.match(/^'?\w+'?$/)||E){switch(a){case"FROM_START":E=e.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":E=I+".length - "+(E=e.JavaScript.getAdjusted(n,"AT1",1,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":E="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(f){case"FROM_START":n=e.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=I+".length - "+(n=e.JavaScript.getAdjusted(n,"AT2",0,!1,e.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=I+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}a=I+".slice("+E+", "+n+")"}else{E=e.JavaScript.getAdjusted(n,"AT1"),n=e.JavaScript.getAdjusted(n,"AT2");var Y=e.JavaScript.text.getIndex_,ee={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};a=e.JavaScript.provideFunction_("subsequence"+ee[a]+ee[f],["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==a||"FROM_START"==a?", at1":"")+("FROM_END"==f||"FROM_START"==f?", at2":"")+") {","  var start = "+Y("sequence",a,"at1")+";","  var end = "+Y("sequence",f,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+I+("FROM_END"==a||"FROM_START"==a?", "+E:"")+("FROM_END"==f||"FROM_START"==f?", "+n:"")+")"}return[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_changeCase=function(n){var a={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=e.JavaScript.valueToCode(n,"TEXT",a?e.JavaScript.ORDER_MEMBER:e.JavaScript.ORDER_NONE)||"''",[a?n+a:e.JavaScript.provideFunction_("textToTitleCase",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_trim=function(n){var a={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_MEMBER)||"''")+a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_print=function(n){return"window.alert("+(e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''")+");\n"},e.JavaScript.text_prompt_ext=function(n){var a="window.prompt("+(n.getField("TEXT")?e.JavaScript.quote_(n.getFieldValue("TEXT")):e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(a="Number("+a+")"),[a,e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_prompt=e.JavaScript.text_prompt_ext,e.JavaScript.text_count=function(n){var a=e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''";return n=e.JavaScript.valueToCode(n,"SUB",e.JavaScript.ORDER_NONE)||"''",[e.JavaScript.provideFunction_("textCount",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+a+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_replace=function(n){var a=e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_NONE)||"''",f=e.JavaScript.valueToCode(n,"FROM",e.JavaScript.ORDER_NONE)||"''";return n=e.JavaScript.valueToCode(n,"TO",e.JavaScript.ORDER_NONE)||"''",[e.JavaScript.provideFunction_("textReplace",["function "+e.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+a+", "+f+", "+n+")",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.text_reverse=function(n){return[(e.JavaScript.valueToCode(n,"TEXT",e.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",e.JavaScript.ORDER_FUNCTION_CALL]},e.JavaScript.variables={},e.JavaScript.variables_get=function(n){return[e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME),e.JavaScript.ORDER_ATOMIC]},e.JavaScript.variables_set=function(n){var a=e.JavaScript.valueToCode(n,"VALUE",e.JavaScript.ORDER_ASSIGNMENT)||"0";return e.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),e.VARIABLE_CATEGORY_NAME)+" = "+a+";\n"},e.JavaScript.variablesDynamic={},e.JavaScript.variables_get_dynamic=e.JavaScript.variables_get,e.JavaScript.variables_set_dynamic=e.JavaScript.variables_set,e.JavaScript}.apply(ht,y))&&(li.exports=t)},3266:function(li,ht,W){var y,t;y=[W(8210)],void 0!==(t=function(e){return(e={Msg:{}}).Msg.ADD_COMMENT="Add Comment",e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",e.Msg.CHANGE_VALUE_TITLE="Change value:",e.Msg.CLEAN_UP="Clean up Blocks",e.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",e.Msg.COLLAPSE_ALL="Collapse Blocks",e.Msg.COLLAPSE_BLOCK="Collapse Block",e.Msg.COLOUR_BLEND_COLOUR1="colour 1",e.Msg.COLOUR_BLEND_COLOUR2="colour 2",e.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",e.Msg.COLOUR_BLEND_RATIO="ratio",e.Msg.COLOUR_BLEND_TITLE="blend",e.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",e.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",e.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",e.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",e.Msg.COLOUR_RANDOM_TITLE="random colour",e.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",e.Msg.COLOUR_RGB_BLUE="blue",e.Msg.COLOUR_RGB_GREEN="green",e.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",e.Msg.COLOUR_RGB_RED="red",e.Msg.COLOUR_RGB_TITLE="colour with",e.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",e.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",e.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",e.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",e.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",e.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",e.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",e.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",e.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",e.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",e.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",e.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",e.Msg.CONTROLS_IF_MSG_ELSE="else",e.Msg.CONTROLS_IF_MSG_ELSEIF="else if",e.Msg.CONTROLS_IF_MSG_IF="if",e.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",e.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",e.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",e.Msg.CONTROLS_REPEAT_INPUT_DO="do",e.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",e.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",e.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",e.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",e.Msg.DELETE_BLOCK="Delete Block",e.Msg.DELETE_VARIABLE="Delete the '%1' variable",e.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",e.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",e.Msg.DISABLE_BLOCK="Disable Block",e.Msg.DUPLICATE_BLOCK="Duplicate",e.Msg.DUPLICATE_COMMENT="Duplicate Comment",e.Msg.ENABLE_BLOCK="Enable Block",e.Msg.EXPAND_ALL="Expand Blocks",e.Msg.EXPAND_BLOCK="Expand Block",e.Msg.EXTERNAL_INPUTS="External Inputs",e.Msg.HELP="Help",e.Msg.INLINE_INPUTS="Inline Inputs",e.Msg.IOS_CANCEL="Cancel",e.Msg.IOS_ERROR="Error",e.Msg.IOS_OK="OK",e.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",e.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",e.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",e.Msg.IOS_PROCEDURES_INPUTS="INPUTS",e.Msg.IOS_VARIABLES_ADD_BUTTON="Add",e.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",e.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",e.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",e.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",e.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",e.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",e.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",e.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",e.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",e.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",e.Msg.LISTS_GET_INDEX_FIRST="first",e.Msg.LISTS_GET_INDEX_FROM_END="# from end",e.Msg.LISTS_GET_INDEX_FROM_START="#",e.Msg.LISTS_GET_INDEX_GET="get",e.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",e.Msg.LISTS_GET_INDEX_LAST="last",e.Msg.LISTS_GET_INDEX_RANDOM="random",e.Msg.LISTS_GET_INDEX_REMOVE="remove",e.Msg.LISTS_GET_INDEX_TAIL="",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",e.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",e.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",e.Msg.LISTS_GET_SUBLIST_END_LAST="to last",e.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",e.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",e.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",e.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",e.Msg.LISTS_GET_SUBLIST_TAIL="",e.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",e.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",e.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",e.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",e.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",e.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",e.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",e.Msg.LISTS_INLIST="in list",e.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",e.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",e.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",e.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",e.Msg.LISTS_LENGTH_TITLE="length of %1",e.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",e.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",e.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",e.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",e.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",e.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",e.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",e.Msg.LISTS_SET_INDEX_INPUT_TO="as",e.Msg.LISTS_SET_INDEX_INSERT="insert at",e.Msg.LISTS_SET_INDEX_SET="set",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",e.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",e.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",e.Msg.LISTS_SORT_ORDER_DESCENDING="descending",e.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",e.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",e.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",e.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",e.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",e.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",e.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",e.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",e.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",e.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",e.Msg.LOGIC_BOOLEAN_FALSE="false",e.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",e.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",e.Msg.LOGIC_BOOLEAN_TRUE="true",e.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",e.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",e.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",e.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",e.Msg.LOGIC_NEGATE_TITLE="not %1",e.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",e.Msg.LOGIC_NULL="null",e.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",e.Msg.LOGIC_NULL_TOOLTIP="Returns null.",e.Msg.LOGIC_OPERATION_AND="and",e.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",e.Msg.LOGIC_OPERATION_OR="or",e.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",e.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",e.Msg.LOGIC_TERNARY_CONDITION="test",e.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",e.Msg.LOGIC_TERNARY_IF_FALSE="if false",e.Msg.LOGIC_TERNARY_IF_TRUE="if true",e.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",e.Msg.MATH_ADDITION_SYMBOL="+",e.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",e.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",e.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",e.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",e.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",e.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",e.Msg.MATH_CHANGE_TITLE="change %1 by %2",e.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",e.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",e.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",e.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",e.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",e.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",e.Msg.MATH_DIVISION_SYMBOL="\xf7",e.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",e.Msg.MATH_IS_EVEN="is even",e.Msg.MATH_IS_NEGATIVE="is negative",e.Msg.MATH_IS_ODD="is odd",e.Msg.MATH_IS_POSITIVE="is positive",e.Msg.MATH_IS_PRIME="is prime",e.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",e.Msg.MATH_IS_WHOLE="is whole",e.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",e.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",e.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",e.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",e.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",e.Msg.MATH_NUMBER_TOOLTIP="A number.",e.Msg.MATH_ONLIST_HELPURL="",e.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",e.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",e.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",e.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",e.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",e.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",e.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",e.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",e.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",e.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",e.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",e.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",e.Msg.MATH_POWER_SYMBOL="^",e.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",e.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",e.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",e.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",e.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",e.Msg.MATH_ROUND_OPERATOR_ROUND="round",e.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",e.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",e.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",e.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",e.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",e.Msg.MATH_SINGLE_OP_ROOT="square root",e.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",e.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",e.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",e.Msg.MATH_SUBTRACTION_SYMBOL="-",e.Msg.MATH_TRIG_ACOS="acos",e.Msg.MATH_TRIG_ASIN="asin",e.Msg.MATH_TRIG_ATAN="atan",e.Msg.MATH_TRIG_COS="cos",e.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",e.Msg.MATH_TRIG_SIN="sin",e.Msg.MATH_TRIG_TAN="tan",e.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",e.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",e.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",e.Msg.NEW_NUMBER_VARIABLE="Create number variable...",e.Msg.NEW_STRING_VARIABLE="Create string variable...",e.Msg.NEW_VARIABLE="Create variable...",e.Msg.NEW_VARIABLE_TITLE="New variable name:",e.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",e.Msg.ORDINAL_NUMBER_SUFFIX="",e.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",e.Msg.PROCEDURES_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",e.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",e.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CREATE_DO="Create '%1'",e.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",e.Msg.PROCEDURES_DEFNORETURN_DO="",e.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",e.Msg.PROCEDURES_DEFNORETURN_TITLE="to",e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",e.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFRETURN_RETURN="return",e.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",e.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",e.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",e.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",e.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",e.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",e.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",e.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",e.Msg.REDO="Redo",e.Msg.REMOVE_COMMENT="Remove Comment",e.Msg.RENAME_VARIABLE="Rename variable...",e.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",e.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_APPEND_TITLE="to %1 append text %2",e.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",e.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",e.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",e.Msg.TEXT_CHARAT_FIRST="get first letter",e.Msg.TEXT_CHARAT_FROM_END="get letter # from end",e.Msg.TEXT_CHARAT_FROM_START="get letter #",e.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",e.Msg.TEXT_CHARAT_LAST="get last letter",e.Msg.TEXT_CHARAT_RANDOM="get random letter",e.Msg.TEXT_CHARAT_TAIL="",e.Msg.TEXT_CHARAT_TITLE="in text %1 %2",e.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",e.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",e.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",e.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",e.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",e.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",e.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",e.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",e.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",e.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",e.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",e.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",e.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",e.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",e.Msg.TEXT_GET_SUBSTRING_TAIL="",e.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",e.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",e.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",e.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",e.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",e.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",e.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",e.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",e.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",e.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",e.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",e.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",e.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_LENGTH_TITLE="length of %1",e.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",e.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",e.Msg.TEXT_PRINT_TITLE="print %1",e.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",e.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",e.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",e.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",e.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",e.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",e.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",e.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",e.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",e.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",e.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",e.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",e.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",e.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",e.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",e.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",e.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",e.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",e.Msg.TODAY="Today",e.Msg.UNDO="Undo",e.Msg.UNNAMED_KEY="unnamed",e.Msg.VARIABLES_DEFAULT_NAME="item",e.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",e.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",e.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",e.Msg.VARIABLES_SET="set %1 to %2",e.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",e.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",e.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",e.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",e.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",e.Msg.CONTROLS_FOREACH_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOR_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=e.Msg.CONTROLS_IF_MSG_ELSEIF,e.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=e.Msg.CONTROLS_IF_MSG_ELSE,e.Msg.CONTROLS_IF_IF_TITLE_IF=e.Msg.CONTROLS_IF_MSG_IF,e.Msg.CONTROLS_IF_MSG_THEN=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.LISTS_CREATE_WITH_ITEM_TITLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LISTS_GET_INDEX_HELPURL=e.Msg.LISTS_INDEX_OF_HELPURL,e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.MATH_CHANGE_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.PROCEDURES_DEFRETURN_COMMENT=e.Msg.PROCEDURES_DEFNORETURN_COMMENT,e.Msg.PROCEDURES_DEFRETURN_DO=e.Msg.PROCEDURES_DEFNORETURN_DO,e.Msg.PROCEDURES_DEFRETURN_PROCEDURE=e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,e.Msg.PROCEDURES_DEFRETURN_TITLE=e.Msg.PROCEDURES_DEFNORETURN_TITLE,e.Msg.TEXT_APPEND_VARIABLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.MATH_HUE="230",e.Msg.LOOPS_HUE="120",e.Msg.LISTS_HUE="260",e.Msg.LOGIC_HUE="210",e.Msg.VARIABLES_HUE="330",e.Msg.TEXTS_HUE="160",e.Msg.PROCEDURES_HUE="290",e.Msg.COLOUR_HUE="20",e.Msg.VARIABLES_DYNAMIC_HUE="310",e.Msg}.apply(ht,y))&&(li.exports=t)},8266:function(li){li.exports=function(){"use strict";var ht=navigator.userAgent,W=navigator.platform,O=/gecko\/\d/i.test(ht),y=/MSIE \d/.test(ht),t=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ht),e=/Edge\/(\d+)/.exec(ht),n=y||t||e,a=n&&(y?document.documentMode||6:+(e||t)[1]),f=!e&&/WebKit\//.test(ht),E=f&&/Qt\/\d+\.\d+/.test(ht),I=!e&&/Chrome\//.test(ht),Y=/Opera\//.test(ht),ee=/Apple Computer/.test(navigator.vendor),_e=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ht),De=/PhantomJS/.test(ht),Ae=ee&&(/Mobile\/\w+/.test(ht)||navigator.maxTouchPoints>2),Je=/Android/.test(ht),st=Ae||Je||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ht),Ge=Ae||/Mac/.test(W),lt=/\bCrOS\b/.test(ht),Rt=/win/i.test(W),Wt=Y&&ht.match(/Version\/(\d*\.\d*)/);Wt&&(Wt=Number(Wt[1])),Wt&&Wt>=15&&(Y=!1,f=!0);var tt=Ge&&(E||Y&&(null==Wt||Wt<12.11)),Oe=O||n&&a>=9;function Se(d){return new RegExp("(^|\\s)"+d+"(?:$|\\s)\\s*")}var ge,Qe=function(d,v){var w=d.className,T=Se(v).exec(w);if(T){var R=w.slice(T.index+T[0].length);d.className=w.slice(0,T.index)+(R?T[1]+R:"")}};function dt(d){for(var v=d.childNodes.length;v>0;--v)d.removeChild(d.firstChild);return d}function it(d,v){return dt(d).appendChild(v)}function Pe(d,v,w,T){var R=document.createElement(d);if(w&&(R.className=w),T&&(R.style.cssText=T),"string"==typeof v)R.appendChild(document.createTextNode(v));else if(v)for(var H=0;H<v.length;++H)R.appendChild(v[H]);return R}function Re(d,v,w,T){var R=Pe(d,v,w,T);return R.setAttribute("role","presentation"),R}function se(d,v){if(3==v.nodeType&&(v=v.parentNode),d.contains)return d.contains(v);do{if(11==v.nodeType&&(v=v.host),v==d)return!0}while(v=v.parentNode)}function at(){var d;try{d=document.activeElement}catch(v){d=document.body||null}for(;d&&d.shadowRoot&&d.shadowRoot.activeElement;)d=d.shadowRoot.activeElement;return d}function Be(d,v){var w=d.className;Se(v).test(w)||(d.className+=(w?" ":"")+v)}function ze(d,v){for(var w=d.split(" "),T=0;T<w.length;T++)w[T]&&!Se(w[T]).test(v)&&(v+=" "+w[T]);return v}ge=document.createRange?function(d,v,w,T){var R=document.createRange();return R.setEnd(T||d,w),R.setStart(d,v),R}:function(d,v,w){var T=document.body.createTextRange();try{T.moveToElementText(d.parentNode)}catch(R){return T}return T.collapse(!0),T.moveEnd("character",w),T.moveStart("character",v),T};var St=function(d){d.select()};function wt(d){var v=Array.prototype.slice.call(arguments,1);return function(){return d.apply(null,v)}}function At(d,v,w){for(var T in v||(v={}),d)d.hasOwnProperty(T)&&(!1!==w||!v.hasOwnProperty(T))&&(v[T]=d[T]);return v}function $t(d,v,w,T,R){null==v&&-1==(v=d.search(/[^\s\u00a0]/))&&(v=d.length);for(var H=T||0,J=R||0;;){var oe=d.indexOf("\t",H);if(oe<0||oe>=v)return J+(v-H);J+=oe-H,J+=w-J%w,H=oe+1}}Ae?St=function(d){d.selectionStart=0,d.selectionEnd=d.value.length}:n&&(St=function(d){try{d.select()}catch(v){}});var Xt=function(){this.id=null,this.f=null,this.time=0,this.handler=wt(this.onTimeout,this)};function ti(d,v){for(var w=0;w<d.length;++w)if(d[w]==v)return w;return-1}Xt.prototype.onTimeout=function(d){d.id=0,d.time<=+new Date?d.f():setTimeout(d.handler,d.time-+new Date)},Xt.prototype.set=function(d,v){this.f=v;var w=+new Date+d;(!this.id||w<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,d),this.time=w)};var pi={toString:function(){return"CodeMirror.Pass"}},Lt={scroll:!1},yi={origin:"*mouse"},Ce={origin:"+move"};function vt(d,v,w){for(var T=0,R=0;;){var H=d.indexOf("\t",T);-1==H&&(H=d.length);var J=H-T;if(H==d.length||R+J>=v)return T+Math.min(J,v-R);if(R+=H-T,T=H+1,(R+=w-R%w)>=v)return T}}var Ne=[""];function Ve(d){for(;Ne.length<=d;)Ne.push(de(Ne)+" ");return Ne[d]}function de(d){return d[d.length-1]}function Te(d,v){for(var w=[],T=0;T<d.length;T++)w[T]=v(d[T],T);return w}function Kt(){}function Ft(d,v){var w;return Object.create?w=Object.create(d):(Kt.prototype=d,w=new Kt),v&&At(v,w),w}var ke=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function We(d){return/\w/.test(d)||d>"\x80"&&(d.toUpperCase()!=d.toLowerCase()||ke.test(d))}function _t(d,v){return v?!!(v.source.indexOf("\\w")>-1&&We(d))||v.test(d):We(d)}function Ue(d){for(var v in d)if(d.hasOwnProperty(v)&&d[v])return!1;return!0}var Ye=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function et(d){return d.charCodeAt(0)>=768&&Ye.test(d)}function Ie(d,v,w){for(;(w<0?v>0:v<d.length)&&et(d.charAt(v));)v+=w;return v}function Xe(d,v,w){for(var T=v>w?-1:1;;){if(v==w)return v;var R=(v+w)/2,H=T<0?Math.ceil(R):Math.floor(R);if(H==v)return d(H)?v:w;d(H)?w=H:v=H+T}}var Vt=null;function bi(d,v,w){var T;Vt=null;for(var R=0;R<d.length;++R){var H=d[R];if(H.from<v&&H.to>v)return R;H.to==v&&(H.from!=H.to&&"before"==w?T=R:Vt=R),H.from==v&&(H.from!=H.to&&"before"!=w?T=R:Vt=R)}return null!=T?T:Vt}var si=function(){function w(Ee){return Ee<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(Ee):1424<=Ee&&Ee<=1524?"R":1536<=Ee&&Ee<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(Ee-1536):1774<=Ee&&Ee<=2220?"r":8192<=Ee&&Ee<=8203?"w":8204==Ee?"b":"L"}var T=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,R=/[stwN]/,H=/[LRr]/,J=/[Lb1n]/,oe=/[1n]/;function pe(Ee,rt,Et){this.level=Ee,this.from=rt,this.to=Et}return function(Ee,rt){var Et="ltr"==rt?"L":"R";if(0==Ee.length||"ltr"==rt&&!T.test(Ee))return!1;for(var Yt=Ee.length,Ht=[],di=0;di<Yt;++di)Ht.push(w(Ee.charCodeAt(di)));for(var Ei=0,Ii=Et;Ei<Yt;++Ei){var Gi=Ht[Ei];"m"==Gi?Ht[Ei]=Ii:Ii=Gi}for(var Qi=0,Pi=Et;Qi<Yt;++Qi){var qi=Ht[Qi];"1"==qi&&"r"==Pi?Ht[Qi]="n":H.test(qi)&&(Pi=qi,"r"==qi&&(Ht[Qi]="R"))}for(var bn=1,wn=Ht[0];bn<Yt-1;++bn){var Qn=Ht[bn];"+"==Qn&&"1"==wn&&"1"==Ht[bn+1]?Ht[bn]="1":","==Qn&&wn==Ht[bn+1]&&("1"==wn||"n"==wn)&&(Ht[bn]=wn),wn=Qn}for(var Os=0;Os<Yt;++Os){var No=Ht[Os];if(","==No)Ht[Os]="N";else if("%"==No){var ro=void 0;for(ro=Os+1;ro<Yt&&"%"==Ht[ro];++ro);for(var la=Os&&"!"==Ht[Os-1]||ro<Yt&&"1"==Ht[ro]?"1":"N",ca=Os;ca<ro;++ca)Ht[ca]=la;Os=ro-1}}for(var Xo=0,jr=Et;Xo<Yt;++Xo){var ar=Ht[Xo];"L"==jr&&"1"==ar?Ht[Xo]="L":H.test(ar)&&(jr=ar)}for(var Ko=0;Ko<Yt;++Ko)if(R.test(Ht[Ko])){var Fo=void 0;for(Fo=Ko+1;Fo<Yt&&R.test(Ht[Fo]);++Fo);for(var xo="L"==(Ko?Ht[Ko-1]:Et),Sl=xo==("L"==(Fo<Yt?Ht[Fo]:Et))?xo?"L":"R":Et,Ca=Ko;Ca<Fo;++Ca)Ht[Ca]=Sl;Ko=Fo-1}for(var io,Ks=[],Io=0;Io<Yt;)if(J.test(Ht[Io])){var fc=Io;for(++Io;Io<Yt&&J.test(Ht[Io]);++Io);Ks.push(new pe(0,fc,Io))}else{var xa=Io,Oc=Ks.length,Ga="rtl"==rt?1:0;for(++Io;Io<Yt&&"L"!=Ht[Io];++Io);for(var Go=xa;Go<Io;)if(oe.test(Ht[Go])){xa<Go&&(Ks.splice(Oc,0,new pe(1,xa,Go)),Oc+=Ga);var Ql=Go;for(++Go;Go<Io&&oe.test(Ht[Go]);++Go);Ks.splice(Oc,0,new pe(2,Ql,Go)),Oc+=Ga,xa=Go}else++Go;xa<Io&&Ks.splice(Oc,0,new pe(1,xa,Io))}return"ltr"==rt&&(1==Ks[0].level&&(io=Ee.match(/^\s+/))&&(Ks[0].from=io[0].length,Ks.unshift(new pe(0,0,io[0].length))),1==de(Ks).level&&(io=Ee.match(/\s+$/))&&(de(Ks).to-=io[0].length,Ks.push(new pe(0,Yt-io[0].length,Yt)))),"rtl"==rt?Ks.reverse():Ks}}();function ni(d,v){var w=d.order;return null==w&&(w=d.order=si(d.text,v)),w}var sn=[],xi=function(d,v,w){if(d.addEventListener)d.addEventListener(v,w,!1);else if(d.attachEvent)d.attachEvent("on"+v,w);else{var T=d._handlers||(d._handlers={});T[v]=(T[v]||sn).concat(w)}};function Ln(d,v){return d._handlers&&d._handlers[v]||sn}function Vi(d,v,w){if(d.removeEventListener)d.removeEventListener(v,w,!1);else if(d.detachEvent)d.detachEvent("on"+v,w);else{var T=d._handlers,R=T&&T[v];if(R){var H=ti(R,w);H>-1&&(T[v]=R.slice(0,H).concat(R.slice(H+1)))}}}function Ni(d,v){var w=Ln(d,v);if(w.length)for(var T=Array.prototype.slice.call(arguments,2),R=0;R<w.length;++R)w[R].apply(null,T)}function Zi(d,v,w){return"string"==typeof v&&(v={type:v,preventDefault:function(){this.defaultPrevented=!0}}),Ni(d,w||v.type,d,v),qe(v)||v.codemirrorIgnore}function Mi(d){var v=d._handlers&&d._handlers.cursorActivity;if(v)for(var w=d.curOp.cursorActivityHandlers||(d.curOp.cursorActivityHandlers=[]),T=0;T<v.length;++T)-1==ti(w,v[T])&&w.push(v[T])}function fn(d,v){return Ln(d,v).length>0}function $i(d){d.prototype.on=function(v,w){xi(this,v,w)},d.prototype.off=function(v,w){Vi(this,v,w)}}function Tn(d){d.preventDefault?d.preventDefault():d.returnValue=!1}function jt(d){d.stopPropagation?d.stopPropagation():d.cancelBubble=!0}function qe(d){return null!=d.defaultPrevented?d.defaultPrevented:0==d.returnValue}function be(d){Tn(d),jt(d)}function te(d){return d.target||d.srcElement}function me(d){var v=d.which;return null==v&&(1&d.button?v=1:2&d.button?v=3:4&d.button&&(v=2)),Ge&&d.ctrlKey&&1==v&&(v=3),v}var yt,zi,Ke=function(){if(n&&a<9)return!1;var d=Pe("div");return"draggable"in d||"dragDrop"in d}();function Si(d){if(null==yt){var v=Pe("span","\u200b");it(d,Pe("span",[v,document.createTextNode("x")])),0!=d.firstChild.offsetHeight&&(yt=v.offsetWidth<=1&&v.offsetHeight>2&&!(n&&a<8))}var w=yt?Pe("span","\u200b"):Pe("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return w.setAttribute("cm-text",""),w}function mn(d){if(null!=zi)return zi;var v=it(d,document.createTextNode("A\u062eA")),w=ge(v,0,1).getBoundingClientRect(),T=ge(v,1,2).getBoundingClientRect();return dt(d),!(!w||w.left==w.right)&&(zi=T.right-w.right<3)}var d,$n=3!="\n\nb".split(/\n/).length?function(d){for(var v=0,w=[],T=d.length;v<=T;){var R=d.indexOf("\n",v);-1==R&&(R=d.length);var H=d.slice(v,"\r"==d.charAt(R-1)?R-1:R),J=H.indexOf("\r");-1!=J?(w.push(H.slice(0,J)),v+=J+1):(w.push(H),v=R+1)}return w}:function(d){return d.split(/\r\n?|\n/)},Gt=window.getSelection?function(d){try{return d.selectionStart!=d.selectionEnd}catch(v){return!1}}:function(d){var v;try{v=d.ownerDocument.selection.createRange()}catch(w){}return!(!v||v.parentElement()!=d)&&0!=v.compareEndPoints("StartToEnd",v)},Mt="oncopy"in(d=Pe("div"))||(d.setAttribute("oncopy","return;"),"function"==typeof d.oncopy),ut=null;var ui={},Yi={};function un(d,v){arguments.length>2&&(v.dependencies=Array.prototype.slice.call(arguments,2)),ui[d]=v}function as(d){if("string"==typeof d&&Yi.hasOwnProperty(d))d=Yi[d];else if(d&&"string"==typeof d.name&&Yi.hasOwnProperty(d.name)){var v=Yi[d.name];"string"==typeof v&&(v={name:v}),(d=Ft(v,d)).name=v.name}else{if("string"==typeof d&&/^[\w\-]+\/[\w\-]+\+xml$/.test(d))return as("application/xml");if("string"==typeof d&&/^[\w\-]+\/[\w\-]+\+json$/.test(d))return as("application/json")}return"string"==typeof d?{name:d}:d||{name:"null"}}function Ls(d,v){v=as(v);var w=ui[v.name];if(!w)return Ls(d,"text/plain");var T=w(d,v);if(js.hasOwnProperty(v.name)){var R=js[v.name];for(var H in R)!R.hasOwnProperty(H)||(T.hasOwnProperty(H)&&(T["_"+H]=T[H]),T[H]=R[H])}if(T.name=v.name,v.helperType&&(T.helperType=v.helperType),v.modeProps)for(var J in v.modeProps)T[J]=v.modeProps[J];return T}var js={};function Co(d,v){At(v,js.hasOwnProperty(d)?js[d]:js[d]={})}function Ms(d,v){if(!0===v)return v;if(d.copyState)return d.copyState(v);var w={};for(var T in v){var R=v[T];R instanceof Array&&(R=R.concat([])),w[T]=R}return w}function Jn(d,v){for(var w;d.innerMode&&(w=d.innerMode(v))&&w.mode!=d;)v=w.state,d=w.mode;return w||{mode:d,state:v}}function _o(d,v,w){return!d.startState||d.startState(v,w)}var Pn=function(d,v,w){this.pos=this.start=0,this.string=d,this.tabSize=v||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=w};function ii(d,v){if((v-=d.first)<0||v>=d.size)throw new Error("There is no line "+(v+d.first)+" in the document.");for(var w=d;!w.lines;)for(var T=0;;++T){var R=w.children[T],H=R.chunkSize();if(v<H){w=R;break}v-=H}return w.lines[v]}function gn(d,v,w){var T=[],R=v.line;return d.iter(v.line,w.line+1,function(H){var J=H.text;R==w.line&&(J=J.slice(0,w.ch)),R==v.line&&(J=J.slice(v.ch)),T.push(J),++R}),T}function Wn(d,v,w){var T=[];return d.iter(v,w,function(R){T.push(R.text)}),T}function fs(d,v){var w=v-d.height;if(w)for(var T=d;T;T=T.parent)T.height+=w}function Zn(d){if(null==d.parent)return null;for(var v=d.parent,w=ti(v.lines,d),T=v.parent;T;v=T,T=T.parent)for(var R=0;T.children[R]!=v;++R)w+=T.children[R].chunkSize();return w+v.first}function is(d,v){var w=d.first;e:do{for(var T=0;T<d.children.length;++T){var R=d.children[T],H=R.height;if(v<H){d=R;continue e}v-=H,w+=R.chunkSize()}return w}while(!d.lines);for(var J=0;J<d.lines.length;++J){var pe=d.lines[J].height;if(v<pe)break;v-=pe}return w+J}function Ss(d,v){return v>=d.first&&v<d.first+d.size}function ss(d,v){return String(d.lineNumberFormatter(v+d.firstLineNumber))}function _i(d,v,w){if(void 0===w&&(w=null),!(this instanceof _i))return new _i(d,v,w);this.line=d,this.ch=v,this.sticky=w}function ln(d,v){return d.line-v.line||d.ch-v.ch}function yn(d,v){return d.sticky==v.sticky&&0==ln(d,v)}function Le(d){return _i(d.line,d.ch)}function pt(d,v){return ln(d,v)<0?v:d}function ri(d,v){return ln(d,v)<0?d:v}function Di(d,v){return Math.max(d.first,Math.min(v,d.first+d.size-1))}function Ti(d,v){if(v.line<d.first)return _i(d.first,0);var w=d.first+d.size-1;return v.line>w?_i(w,ii(d,w).text.length):function(d,v){var w=d.ch;return null==w||w>v?_i(d.line,v):w<0?_i(d.line,0):d}(v,ii(d,v.line).text.length)}function En(d,v){for(var w=[],T=0;T<v.length;T++)w[T]=Ti(d,v[T]);return w}Pn.prototype.eol=function(){return this.pos>=this.string.length},Pn.prototype.sol=function(){return this.pos==this.lineStart},Pn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Pn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Pn.prototype.eat=function(d){var v=this.string.charAt(this.pos);if("string"==typeof d?v==d:v&&(d.test?d.test(v):d(v)))return++this.pos,v},Pn.prototype.eatWhile=function(d){for(var v=this.pos;this.eat(d););return this.pos>v},Pn.prototype.eatSpace=function(){for(var d=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>d},Pn.prototype.skipToEnd=function(){this.pos=this.string.length},Pn.prototype.skipTo=function(d){var v=this.string.indexOf(d,this.pos);if(v>-1)return this.pos=v,!0},Pn.prototype.backUp=function(d){this.pos-=d},Pn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=$t(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?$t(this.string,this.lineStart,this.tabSize):0)},Pn.prototype.indentation=function(){return $t(this.string,null,this.tabSize)-(this.lineStart?$t(this.string,this.lineStart,this.tabSize):0)},Pn.prototype.match=function(d,v,w){if("string"!=typeof d){var H=this.string.slice(this.pos).match(d);return H&&H.index>0?null:(H&&!1!==v&&(this.pos+=H[0].length),H)}var T=function(J){return w?J.toLowerCase():J};if(T(this.string.substr(this.pos,d.length))==T(d))return!1!==v&&(this.pos+=d.length),!0},Pn.prototype.current=function(){return this.string.slice(this.start,this.pos)},Pn.prototype.hideFirstChars=function(d,v){this.lineStart+=d;try{return v()}finally{this.lineStart-=d}},Pn.prototype.lookAhead=function(d){var v=this.lineOracle;return v&&v.lookAhead(d)},Pn.prototype.baseToken=function(){var d=this.lineOracle;return d&&d.baseToken(this.pos)};var Sn=function(d,v){this.state=d,this.lookAhead=v},dn=function(d,v,w,T){this.state=v,this.doc=d,this.line=w,this.maxLookAhead=T||0,this.baseTokens=null,this.baseTokenPos=1};function Qs(d,v,w,T){var R=[d.state.modeGen],H={};Jo(d,v.text,d.doc.mode,w,function(Ee,rt){return R.push(Ee,rt)},H,T);for(var J=w.state,oe=function(Ee){w.baseTokens=R;var rt=d.state.overlays[Ee],Et=1,Yt=0;w.state=!0,Jo(d,v.text,rt.mode,w,function(Ht,di){for(var Ei=Et;Yt<Ht;){var Ii=R[Et];Ii>Ht&&R.splice(Et,1,Ht,R[Et+1],Ii),Et+=2,Yt=Math.min(Ht,Ii)}if(di)if(rt.opaque)R.splice(Ei,Et-Ei,Ht,"overlay "+di),Et=Ei+2;else for(;Ei<Et;Ei+=2){var Gi=R[Ei+1];R[Ei+1]=(Gi?Gi+" ":"")+"overlay "+di}},H),w.state=J,w.baseTokens=null,w.baseTokenPos=1},pe=0;pe<d.state.overlays.length;++pe)oe(pe);return{styles:R,classes:H.bgClass||H.textClass?H:null}}function Eo(d,v,w){if(!v.styles||v.styles[0]!=d.state.modeGen){var T=Bs(d,Zn(v)),R=v.text.length>d.options.maxHighlightLength&&Ms(d.doc.mode,T.state),H=Qs(d,v,T);R&&(T.state=R),v.stateAfter=T.save(!R),v.styles=H.styles,H.classes?v.styleClasses=H.classes:v.styleClasses&&(v.styleClasses=null),w===d.doc.highlightFrontier&&(d.doc.modeFrontier=Math.max(d.doc.modeFrontier,++d.doc.highlightFrontier))}return v.styles}function Bs(d,v,w){var T=d.doc,R=d.display;if(!T.mode.startState)return new dn(T,!0,v);var H=function(d,v,w){for(var T,R,H=d.doc,J=w?-1:v-(d.doc.mode.innerMode?1e3:100),oe=v;oe>J;--oe){if(oe<=H.first)return H.first;var pe=ii(H,oe-1),Ee=pe.stateAfter;if(Ee&&(!w||oe+(Ee instanceof Sn?Ee.lookAhead:0)<=H.modeFrontier))return oe;var rt=$t(pe.text,null,d.options.tabSize);(null==R||T>rt)&&(R=oe-1,T=rt)}return R}(d,v,w),J=H>T.first&&ii(T,H-1).stateAfter,oe=J?dn.fromSaved(T,J,H):new dn(T,_o(T.mode),H);return T.iter(H,v,function(pe){Hs(d,pe.text,oe);var Ee=oe.line;pe.stateAfter=Ee==v-1||Ee%5==0||Ee>=R.viewFrom&&Ee<R.viewTo?oe.save():null,oe.nextLine()}),w&&(T.modeFrontier=oe.line),oe}function Hs(d,v,w,T){var R=d.doc.mode,H=new Pn(v,d.options.tabSize,w);for(H.start=H.pos=T||0,""==v&&pr(R,w.state);!H.eol();)Vn(R,H,w.state),H.start=H.pos}function pr(d,v){if(d.blankLine)return d.blankLine(v);if(d.innerMode){var w=Jn(d,v);if(w.mode.blankLine)return w.mode.blankLine(w.state)}}function Vn(d,v,w,T){for(var R=0;R<10;R++){T&&(T[0]=Jn(d,w).mode);var H=d.token(v,w);if(v.pos>v.start)return H}throw new Error("Mode "+d.name+" failed to advance stream.")}dn.prototype.lookAhead=function(d){var v=this.doc.getLine(this.line+d);return null!=v&&d>this.maxLookAhead&&(this.maxLookAhead=d),v},dn.prototype.baseToken=function(d){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=d;)this.baseTokenPos+=2;var v=this.baseTokens[this.baseTokenPos+1];return{type:v&&v.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-d}},dn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},dn.fromSaved=function(d,v,w){return v instanceof Sn?new dn(d,Ms(d.mode,v.state),w,v.lookAhead):new dn(d,Ms(d.mode,v),w)},dn.prototype.save=function(d){var v=!1!==d?Ms(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Sn(v,this.maxLookAhead):v};var To=function(d,v,w){this.start=d.start,this.end=d.pos,this.string=d.current(),this.type=v||null,this.state=w};function Rs(d,v,w,T){var J,rt,R=d.doc,H=R.mode,oe=ii(R,(v=Ti(R,v)).line),pe=Bs(d,v.line,w),Ee=new Pn(oe.text,d.options.tabSize,pe);for(T&&(rt=[]);(T||Ee.pos<v.ch)&&!Ee.eol();)Ee.start=Ee.pos,J=Vn(H,Ee,pe.state),T&&rt.push(new To(Ee,J,Ms(R.mode,pe.state)));return T?rt:new To(Ee,J,pe.state)}function $o(d,v){if(d)for(;;){var w=d.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!w)break;d=d.slice(0,w.index)+d.slice(w.index+w[0].length);var T=w[1]?"bgClass":"textClass";null==v[T]?v[T]=w[2]:new RegExp("(?:^|\\s)"+w[2]+"(?:$|\\s)").test(v[T])||(v[T]+=" "+w[2])}return d}function Jo(d,v,w,T,R,H,J){var oe=w.flattenSpans;null==oe&&(oe=d.options.flattenSpans);var Et,pe=0,Ee=null,rt=new Pn(v,d.options.tabSize,T),Yt=d.options.addModeClass&&[null];for(""==v&&$o(pr(w,T.state),H);!rt.eol();){if(rt.pos>d.options.maxHighlightLength?(oe=!1,J&&Hs(d,v,T,rt.pos),rt.pos=v.length,Et=null):Et=$o(Vn(w,rt,T.state,Yt),H),Yt){var Ht=Yt[0].name;Ht&&(Et="m-"+(Et?Ht+" "+Et:Ht))}if(!oe||Ee!=Et){for(;pe<rt.start;)R(pe=Math.min(rt.start,pe+5e3),Ee);Ee=Et}rt.start=rt.pos}for(;pe<rt.pos;){var di=Math.min(rt.pos,pe+5e3);R(di,Ee),pe=di}}var vo=!1,Js=!1;function Kr(d,v,w){this.marker=d,this.from=v,this.to=w}function bo(d,v){if(d)for(var w=0;w<d.length;++w){var T=d[w];if(T.marker==v)return T}}function fr(d,v){for(var w,T=0;T<d.length;++T)d[T]!=v&&(w||(w=[])).push(d[T]);return w}function Oa(d,v){if(v.full)return null;var w=Ss(d,v.from.line)&&ii(d,v.from.line).markedSpans,T=Ss(d,v.to.line)&&ii(d,v.to.line).markedSpans;if(!w&&!T)return null;var R=v.from.ch,H=v.to.ch,J=0==ln(v.from,v.to),oe=function(d,v,w){var T;if(d)for(var R=0;R<d.length;++R){var H=d[R],J=H.marker;null!=H.from&&!(J.inclusiveLeft?H.from<=v:H.from<v)&&(H.from!=v||"bookmark"!=J.type||w&&H.marker.insertLeft)||(T||(T=[])).push(new Kr(J,H.from,null==H.to||(J.inclusiveRight?H.to>=v:H.to>v)?null:H.to))}return T}(w,R,J),pe=function(d,v,w){var T;if(d)for(var R=0;R<d.length;++R){var H=d[R],J=H.marker;(null==H.to||(J.inclusiveRight?H.to>=v:H.to>v)||H.from==v&&"bookmark"==J.type&&(!w||H.marker.insertLeft))&&(T||(T=[])).push(new Kr(J,null==H.from||(J.inclusiveLeft?H.from<=v:H.from<v)?null:H.from-v,null==H.to?null:H.to-v))}return T}(T,H,J),Ee=1==v.text.length,rt=de(v.text).length+(Ee?R:0);if(oe)for(var Et=0;Et<oe.length;++Et){var Yt=oe[Et];if(null==Yt.to){var Ht=bo(pe,Yt.marker);Ht?Ee&&(Yt.to=null==Ht.to?null:Ht.to+rt):Yt.to=R}}if(pe)for(var di=0;di<pe.length;++di){var Ei=pe[di];null!=Ei.to&&(Ei.to+=rt),null==Ei.from?bo(oe,Ei.marker)||(Ei.from=rt,Ee&&(oe||(oe=[])).push(Ei)):(Ei.from+=rt,Ee&&(oe||(oe=[])).push(Ei))}oe&&(oe=gr(oe)),pe&&pe!=oe&&(pe=gr(pe));var Gi=[oe];if(!Ee){var Pi,Qi=v.text.length-2;if(Qi>0&&oe)for(var qi=0;qi<oe.length;++qi)null==oe[qi].to&&(Pi||(Pi=[])).push(new Kr(oe[qi].marker,null,null));for(var bn=0;bn<Qi;++bn)Gi.push(Pi);Gi.push(pe)}return Gi}function gr(d){for(var v=0;v<d.length;++v){var w=d[v];null!=w.from&&w.from==w.to&&!1!==w.marker.clearWhenEmpty&&d.splice(v--,1)}return d.length?d:null}function $r(d){var v=d.markedSpans;if(v){for(var w=0;w<v.length;++w)v[w].marker.detachLine(d);d.markedSpans=null}}function Jr(d,v){if(v){for(var w=0;w<v.length;++w)v[w].marker.attachLine(d);d.markedSpans=v}}function ao(d){return d.inclusiveLeft?-1:0}function ys(d){return d.inclusiveRight?1:0}function Vs(d,v){var w=d.lines.length-v.lines.length;if(0!=w)return w;var T=d.find(),R=v.find(),H=ln(T.from,R.from)||ao(d)-ao(v);return H?-H:ln(T.to,R.to)||ys(d)-ys(v)||v.id-d.id}function Ys(d,v){var T,w=Js&&d.markedSpans;if(w)for(var R=void 0,H=0;H<w.length;++H)(R=w[H]).marker.collapsed&&null==(v?R.from:R.to)&&(!T||Vs(T,R.marker)<0)&&(T=R.marker);return T}function Zo(d){return Ys(d,!0)}function lo(d){return Ys(d,!1)}function qo(d,v){var T,w=Js&&d.markedSpans;if(w)for(var R=0;R<w.length;++R){var H=w[R];H.marker.collapsed&&(null==H.from||H.from<v)&&(null==H.to||H.to>v)&&(!T||Vs(T,H.marker)<0)&&(T=H.marker)}return T}function co(d,v,w,T,R){var H=ii(d,v),J=Js&&H.markedSpans;if(J)for(var oe=0;oe<J.length;++oe){var pe=J[oe];if(pe.marker.collapsed){var Ee=pe.marker.find(0),rt=ln(Ee.from,w)||ao(pe.marker)-ao(R),Et=ln(Ee.to,T)||ys(pe.marker)-ys(R);if(!(rt>=0&&Et<=0||rt<=0&&Et>=0)&&(rt<=0&&(pe.marker.inclusiveRight&&R.inclusiveLeft?ln(Ee.to,w)>=0:ln(Ee.to,w)>0)||rt>=0&&(pe.marker.inclusiveRight&&R.inclusiveLeft?ln(Ee.from,T)<=0:ln(Ee.from,T)<0)))return!0}}}function so(d){for(var v;v=Zo(d);)d=v.find(-1,!0).line;return d}function Qo(d,v){var w=ii(d,v),T=so(w);return w==T?v:Zn(T)}function wr(d,v){if(v>d.lastLine())return v;var T,w=ii(d,v);if(!ps(d,w))return v;for(;T=lo(w);)w=T.find(1,!0).line;return Zn(w)+1}function ps(d,v){var w=Js&&v.markedSpans;if(w)for(var T=void 0,R=0;R<w.length;++R)if((T=w[R]).marker.collapsed){if(null==T.from)return!0;if(!T.marker.widgetNode&&0==T.from&&T.marker.inclusiveLeft&&lr(d,v,T))return!0}}function lr(d,v,w){if(null==w.to){var T=w.marker.find(1,!0);return lr(d,T.line,bo(T.line.markedSpans,w.marker))}if(w.marker.inclusiveRight&&w.to==v.text.length)return!0;for(var R=void 0,H=0;H<v.markedSpans.length;++H)if((R=v.markedSpans[H]).marker.collapsed&&!R.marker.widgetNode&&R.from==w.to&&(null==R.to||R.to!=w.from)&&(R.marker.inclusiveLeft||w.marker.inclusiveRight)&&lr(d,v,R))return!0}function ls(d){for(var v=0,w=(d=so(d)).parent,T=0;T<w.lines.length;++T){var R=w.lines[T];if(R==d)break;v+=R.height}for(var H=w.parent;H;H=(w=H).parent)for(var J=0;J<H.children.length;++J){var oe=H.children[J];if(oe==w)break;v+=oe.height}return v}function mr(d){if(0==d.height)return 0;for(var w,v=d.text.length,T=d;w=Zo(T);){var R=w.find(0,!0);T=R.from.line,v+=R.from.ch-R.to.ch}for(T=d;w=lo(T);){var H=w.find(0,!0);v-=T.text.length-H.from.ch,v+=(T=H.to.line).text.length-H.to.ch}return v}function Ta(d){var v=d.display,w=d.doc;v.maxLine=ii(w,w.first),v.maxLineLength=mr(v.maxLine),v.maxLineChanged=!0,w.iter(function(T){var R=mr(T);R>v.maxLineLength&&(v.maxLineLength=R,v.maxLine=T)})}var ko=function(d,v,w){this.text=d,Jr(this,v),this.height=w?w(this):1};function _r(d){d.parent=null,$r(d)}ko.prototype.lineNo=function(){return Zn(this)},$i(ko);var ka={},gs={};function Sr(d,v){if(!d||/^\s*$/.test(d))return null;var w=v.addModeClass?gs:ka;return w[d]||(w[d]=d.replace(/\S+/g,"cm-$&"))}function pa(d,v){var w=Re("span",null,null,f?"padding-right: .1px":null),T={pre:Re("pre",[w],"CodeMirror-line"),content:w,col:0,pos:0,cm:d,trailingSpace:!1,splitSpaces:d.getOption("lineWrapping")};v.measure={};for(var R=0;R<=(v.rest?v.rest.length:0);R++){var H=R?v.rest[R-1]:v.line,J=void 0;T.pos=0,T.addToken=z,mn(d.display.measure)&&(J=ni(H,d.doc.direction))&&(T.addToken=F(T.addToken,J)),T.map=[],Tt(H,T,Eo(d,H,v!=d.display.externalMeasured&&Zn(H))),H.styleClasses&&(H.styleClasses.bgClass&&(T.bgClass=ze(H.styleClasses.bgClass,T.bgClass||"")),H.styleClasses.textClass&&(T.textClass=ze(H.styleClasses.textClass,T.textClass||""))),0==T.map.length&&T.map.push(0,0,T.content.appendChild(Si(d.display.measure))),0==R?(v.measure.map=T.map,v.measure.cache={}):((v.measure.maps||(v.measure.maps=[])).push(T.map),(v.measure.caches||(v.measure.caches=[])).push({}))}if(f){var pe=T.content.lastChild;(/\bcm-tab\b/.test(pe.className)||pe.querySelector&&pe.querySelector(".cm-tab"))&&(T.content.className="cm-tab-wrap-hack")}return Ni(d,"renderLine",d,v.line,T.pre),T.pre.className&&(T.textClass=ze(T.pre.className,T.textClass||"")),T}function ce(d){var v=Pe("span","\u2022","cm-invalidchar");return v.title="\\u"+d.charCodeAt(0).toString(16),v.setAttribute("aria-label",v.title),v}function z(d,v,w,T,R,H,J){if(v){var rt,oe=d.splitSpaces?function(d,v){if(d.length>1&&!/  /.test(d))return d;for(var w=v,T="",R=0;R<d.length;R++){var H=d.charAt(R);" "==H&&w&&(R==d.length-1||32==d.charCodeAt(R+1))&&(H="\xa0"),T+=H,w=" "==H}return T}(v,d.trailingSpace):v,pe=d.cm.state.specialChars,Ee=!1;if(pe.test(v)){rt=document.createDocumentFragment();for(var Et=0;;){pe.lastIndex=Et;var Yt=pe.exec(v),Ht=Yt?Yt.index-Et:v.length-Et;if(Ht){var di=document.createTextNode(oe.slice(Et,Et+Ht));rt.appendChild(n&&a<9?Pe("span",[di]):di),d.map.push(d.pos,d.pos+Ht,di),d.col+=Ht,d.pos+=Ht}if(!Yt)break;Et+=Ht+1;var Ei=void 0;if("\t"==Yt[0]){var Ii=d.cm.options.tabSize,Gi=Ii-d.col%Ii;(Ei=rt.appendChild(Pe("span",Ve(Gi),"cm-tab"))).setAttribute("role","presentation"),Ei.setAttribute("cm-text","\t"),d.col+=Gi}else"\r"==Yt[0]||"\n"==Yt[0]?((Ei=rt.appendChild(Pe("span","\r"==Yt[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",Yt[0]),d.col+=1):((Ei=d.cm.options.specialCharPlaceholder(Yt[0])).setAttribute("cm-text",Yt[0]),rt.appendChild(n&&a<9?Pe("span",[Ei]):Ei),d.col+=1);d.map.push(d.pos,d.pos+1,Ei),d.pos++}}else d.col+=v.length,rt=document.createTextNode(oe),d.map.push(d.pos,d.pos+v.length,rt),n&&a<9&&(Ee=!0),d.pos+=v.length;if(d.trailingSpace=32==oe.charCodeAt(v.length-1),w||T||R||Ee||H||J){var Qi=w||"";T&&(Qi+=T),R&&(Qi+=R);var Pi=Pe("span",[rt],Qi,H);if(J)for(var qi in J)J.hasOwnProperty(qi)&&"style"!=qi&&"class"!=qi&&Pi.setAttribute(qi,J[qi]);return d.content.appendChild(Pi)}d.content.appendChild(rt)}}function F(d,v){return function(w,T,R,H,J,oe,pe){R=R?R+" cm-force-border":"cm-force-border";for(var Ee=w.pos,rt=Ee+T.length;;){for(var Et=void 0,Yt=0;Yt<v.length&&!((Et=v[Yt]).to>Ee&&Et.from<=Ee);Yt++);if(Et.to>=rt)return d(w,T,R,H,J,oe,pe);d(w,T.slice(0,Et.to-Ee),R,H,null,oe,pe),H=null,T=T.slice(Et.to-Ee),Ee=Et.to}}}function le(d,v,w,T){var R=!T&&w.widgetNode;R&&d.map.push(d.pos,d.pos+v,R),!T&&d.cm.display.input.needsContentAttribute&&(R||(R=d.content.appendChild(document.createElement("span"))),R.setAttribute("cm-marker",w.id)),R&&(d.cm.display.input.setUneditable(R),d.content.appendChild(R)),d.pos+=v,d.trailingSpace=!1}function Tt(d,v,w){var T=d.markedSpans,R=d.text,H=0;if(T)for(var Et,Yt,di,Ei,Ii,Gi,Qi,oe=R.length,pe=0,Ee=1,rt="",Ht=0;;){if(Ht==pe){di=Ei=Ii=Yt="",Qi=null,Gi=null,Ht=1/0;for(var Pi=[],qi=void 0,bn=0;bn<T.length;++bn){var wn=T[bn],Qn=wn.marker;if("bookmark"==Qn.type&&wn.from==pe&&Qn.widgetNode)Pi.push(Qn);else if(wn.from<=pe&&(null==wn.to||wn.to>pe||Qn.collapsed&&wn.to==pe&&wn.from==pe)){if(null!=wn.to&&wn.to!=pe&&Ht>wn.to&&(Ht=wn.to,Ei=""),Qn.className&&(di+=" "+Qn.className),Qn.css&&(Yt=(Yt?Yt+";":"")+Qn.css),Qn.startStyle&&wn.from==pe&&(Ii+=" "+Qn.startStyle),Qn.endStyle&&wn.to==Ht&&(qi||(qi=[])).push(Qn.endStyle,wn.to),Qn.title&&((Qi||(Qi={})).title=Qn.title),Qn.attributes)for(var Os in Qn.attributes)(Qi||(Qi={}))[Os]=Qn.attributes[Os];Qn.collapsed&&(!Gi||Vs(Gi.marker,Qn)<0)&&(Gi=wn)}else wn.from>pe&&Ht>wn.from&&(Ht=wn.from)}if(qi)for(var No=0;No<qi.length;No+=2)qi[No+1]==Ht&&(Ei+=" "+qi[No]);if(!Gi||Gi.from==pe)for(var ro=0;ro<Pi.length;++ro)le(v,0,Pi[ro]);if(Gi&&(Gi.from||0)==pe){if(le(v,(null==Gi.to?oe+1:Gi.to)-pe,Gi.marker,null==Gi.from),null==Gi.to)return;Gi.to==pe&&(Gi=!1)}}if(pe>=oe)break;for(var la=Math.min(oe,Ht);;){if(rt){var ca=pe+rt.length;if(!Gi){var Xo=ca>la?rt.slice(0,la-pe):rt;v.addToken(v,Xo,Et?Et+di:di,Ii,pe+Xo.length==Ht?Ei:"",Yt,Qi)}if(ca>=la){rt=rt.slice(la-pe),pe=la;break}pe=ca,Ii=""}rt=R.slice(H,H=w[Ee++]),Et=Sr(w[Ee++],v.cm.options)}}else for(var J=1;J<w.length;J+=2)v.addToken(v,R.slice(H,H=w[J]),Sr(w[J+1],v.cm.options))}function Jt(d,v,w){this.line=v,this.rest=function(d){for(var v,w;v=lo(d);)d=v.find(1,!0).line,(w||(w=[])).push(d);return w}(v),this.size=this.rest?Zn(de(this.rest))-w+1:1,this.node=this.text=null,this.hidden=ps(d,v)}function Fi(d,v,w){for(var R,T=[],H=v;H<w;H=R){var J=new Jt(d.doc,ii(d.doc,H),H);R=H+J.size,T.push(J)}return T}var Dn=null;var Ds=null;function zn(d,v){var w=Ln(d,v);if(w.length){var R,T=Array.prototype.slice.call(arguments,2);Dn?R=Dn.delayedCallbacks:Ds?R=Ds:(R=Ds=[],setTimeout(ho,0));for(var H=function(oe){R.push(function(){return w[oe].apply(null,T)})},J=0;J<w.length;++J)H(J)}}function ho(){var d=Ds;Ds=null;for(var v=0;v<d.length;++v)d[v]()}function _n(d,v,w,T){for(var R=0;R<v.changes.length;R++){var H=v.changes[R];"text"==H?fa(d,v):"gutter"==H?tr(d,v,w,T):"class"==H?er(d,v):"widget"==H&&ic(d,v,T)}v.changes=null}function Lo(d){return d.node==d.text&&(d.node=Pe("div",null,null,"position: relative"),d.text.parentNode&&d.text.parentNode.replaceChild(d.node,d.text),d.node.appendChild(d.text),n&&a<8&&(d.node.style.zIndex=2)),d.node}function Bo(d,v){var w=d.display.externalMeasured;return w&&w.line==v.line?(d.display.externalMeasured=null,v.measure=w.measure,w.built):pa(d,v)}function fa(d,v){var w=v.text.className,T=Bo(d,v);v.text==v.node&&(v.node=T.pre),v.text.parentNode.replaceChild(T.pre,v.text),v.text=T.pre,T.bgClass!=v.bgClass||T.textClass!=v.textClass?(v.bgClass=T.bgClass,v.textClass=T.textClass,er(d,v)):w&&(v.text.className=w)}function er(d,v){(function(d,v){var w=v.bgClass?v.bgClass+" "+(v.line.bgClass||""):v.line.bgClass;if(w&&(w+=" CodeMirror-linebackground"),v.background)w?v.background.className=w:(v.background.parentNode.removeChild(v.background),v.background=null);else if(w){var T=Lo(v);v.background=T.insertBefore(Pe("div",null,w),T.firstChild),d.display.input.setUneditable(v.background)}})(d,v),v.line.wrapClass?Lo(v).className=v.line.wrapClass:v.node!=v.text&&(v.node.className=""),v.text.className=(v.textClass?v.textClass+" "+(v.line.textClass||""):v.line.textClass)||""}function tr(d,v,w,T){if(v.gutter&&(v.node.removeChild(v.gutter),v.gutter=null),v.gutterBackground&&(v.node.removeChild(v.gutterBackground),v.gutterBackground=null),v.line.gutterClass){var R=Lo(v);v.gutterBackground=Pe("div",null,"CodeMirror-gutter-background "+v.line.gutterClass,"left: "+(d.options.fixedGutter?T.fixedPos:-T.gutterTotalWidth)+"px; width: "+T.gutterTotalWidth+"px"),d.display.input.setUneditable(v.gutterBackground),R.insertBefore(v.gutterBackground,v.text)}var H=v.line.gutterMarkers;if(d.options.lineNumbers||H){var J=Lo(v),oe=v.gutter=Pe("div",null,"CodeMirror-gutter-wrapper","left: "+(d.options.fixedGutter?T.fixedPos:-T.gutterTotalWidth)+"px");if(oe.setAttribute("aria-hidden","true"),d.display.input.setUneditable(oe),J.insertBefore(oe,v.text),v.line.gutterClass&&(oe.className+=" "+v.line.gutterClass),d.options.lineNumbers&&(!H||!H["CodeMirror-linenumbers"])&&(v.lineNumber=oe.appendChild(Pe("div",ss(d.options,w),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+T.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+d.display.lineNumInnerWidth+"px"))),H)for(var pe=0;pe<d.display.gutterSpecs.length;++pe){var Ee=d.display.gutterSpecs[pe].className,rt=H.hasOwnProperty(Ee)&&H[Ee];rt&&oe.appendChild(Pe("div",[rt],"CodeMirror-gutter-elt","left: "+T.gutterLeft[Ee]+"px; width: "+T.gutterWidth[Ee]+"px"))}}}function ic(d,v,w){v.alignable&&(v.alignable=null);for(var T=Se("CodeMirror-linewidget"),R=v.node.firstChild,H=void 0;R;R=H)H=R.nextSibling,T.test(R.className)&&v.node.removeChild(R);N(d,v,w)}function fe(d,v,w,T){var R=Bo(d,v);return v.text=v.node=R.pre,R.bgClass&&(v.bgClass=R.bgClass),R.textClass&&(v.textClass=R.textClass),er(d,v),tr(d,v,w,T),N(d,v,T),v.node}function N(d,v,w){if(G(d,v.line,v,w,!0),v.rest)for(var T=0;T<v.rest.length;T++)G(d,v.rest[T],v,w,!1)}function G(d,v,w,T,R){if(v.widgets)for(var H=Lo(w),J=0,oe=v.widgets;J<oe.length;++J){var pe=oe[J],Ee=Pe("div",[pe.node],"CodeMirror-linewidget"+(pe.className?" "+pe.className:""));pe.handleMouseEvents||Ee.setAttribute("cm-ignore-events","true"),Q(pe,Ee,w,T),d.display.input.setUneditable(Ee),R&&pe.above?H.insertBefore(Ee,w.gutter||w.text):H.appendChild(Ee),zn(pe,"redraw")}}function Q(d,v,w,T){if(d.noHScroll){(w.alignable||(w.alignable=[])).push(v);var R=T.wrapperWidth;v.style.left=T.fixedPos+"px",d.coverGutter||(R-=T.gutterTotalWidth,v.style.paddingLeft=T.gutterTotalWidth+"px"),v.style.width=R+"px"}d.coverGutter&&(v.style.zIndex=5,v.style.position="relative",d.noHScroll||(v.style.marginLeft=-T.gutterTotalWidth+"px"))}function Me(d){if(null!=d.height)return d.height;var v=d.doc.cm;if(!v)return 0;if(!se(document.body,d.node)){var w="position: relative;";d.coverGutter&&(w+="margin-left: -"+v.display.gutters.offsetWidth+"px;"),d.noHScroll&&(w+="width: "+v.display.wrapper.clientWidth+"px;"),it(v.display.measure,Pe("div",[d.node],null,w))}return d.height=d.node.parentNode.offsetHeight}function $e(d,v){for(var w=te(v);w!=d.wrapper;w=w.parentNode)if(!w||1==w.nodeType&&"true"==w.getAttribute("cm-ignore-events")||w.parentNode==d.sizer&&w!=d.mover)return!0}function Ct(d){return d.lineSpace.offsetTop}function It(d){return d.mover.offsetHeight-d.lineSpace.offsetHeight}function Zt(d){if(d.cachedPaddingH)return d.cachedPaddingH;var v=it(d.measure,Pe("pre","x","CodeMirror-line-like")),w=window.getComputedStyle?window.getComputedStyle(v):v.currentStyle,T={left:parseInt(w.paddingLeft),right:parseInt(w.paddingRight)};return!isNaN(T.left)&&!isNaN(T.right)&&(d.cachedPaddingH=T),T}function gi(d){return 50-d.display.nativeBarWidth}function Bi(d){return d.display.scroller.clientWidth-gi(d)-d.display.barWidth}function nn(d){return d.display.scroller.clientHeight-gi(d)-d.display.barHeight}function An(d,v,w){if(d.line==v)return{map:d.measure.map,cache:d.measure.cache};if(d.rest){for(var T=0;T<d.rest.length;T++)if(d.rest[T]==v)return{map:d.measure.maps[T],cache:d.measure.caches[T]};for(var R=0;R<d.rest.length;R++)if(Zn(d.rest[R])>w)return{map:d.measure.maps[R],cache:d.measure.caches[R],before:!0}}}function On(d,v,w,T){return Cs(d,rs(d,v),w,T)}function kn(d,v){if(v>=d.display.viewFrom&&v<d.display.viewTo)return d.display.view[jo(d,v)];var w=d.display.externalMeasured;return w&&v>=w.lineN&&v<w.lineN+w.size?w:void 0}function rs(d,v){var w=Zn(v),T=kn(d,w);T&&!T.text?T=null:T&&T.changes&&(_n(d,T,w,or(d)),d.curOp.forceUpdate=!0),T||(T=function(d,v){var w=Zn(v=so(v)),T=d.display.externalMeasured=new Jt(d.doc,v,w);T.lineN=w;var R=T.built=pa(d,T);return T.text=R.pre,it(d.display.lineMeasure,R.pre),T}(d,v));var R=An(T,v,w);return{line:v,view:T,rect:null,map:R.map,cache:R.cache,before:R.before,hasHeights:!1}}function Cs(d,v,w,T,R){v.before&&(w=-1);var J,H=w+(T||"");return v.cache.hasOwnProperty(H)?J=v.cache[H]:(v.rect||(v.rect=v.view.text.getBoundingClientRect()),v.hasHeights||(function(d,v,w){var T=d.options.lineWrapping,R=T&&Bi(d);if(!v.measure.heights||T&&v.measure.width!=R){var H=v.measure.heights=[];if(T){v.measure.width=R;for(var J=v.text.firstChild.getClientRects(),oe=0;oe<J.length-1;oe++){var pe=J[oe],Ee=J[oe+1];Math.abs(pe.bottom-Ee.bottom)>2&&H.push((pe.bottom+Ee.top)/2-w.top)}}H.push(w.bottom-w.top)}}(d,v.view,v.rect),v.hasHeights=!0),(J=function(d,v,w,T){var Ee,R=oo(v.map,w,T),H=R.node,J=R.start,oe=R.end,pe=R.collapse;if(3==H.nodeType){for(var rt=0;rt<4;rt++){for(;J&&et(v.line.text.charAt(R.coverStart+J));)--J;for(;R.coverStart+oe<R.coverEnd&&et(v.line.text.charAt(R.coverStart+oe));)++oe;if((Ee=n&&a<9&&0==J&&oe==R.coverEnd-R.coverStart?H.parentNode.getBoundingClientRect():Qr(ge(H,J,oe).getClientRects(),T)).left||Ee.right||0==J)break;oe=J,J-=1,pe="right"}n&&a<11&&(Ee=function(d,v){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(d){if(null!=ut)return ut;var v=it(d,Pe("span","x")),w=v.getBoundingClientRect(),T=ge(v,0,1).getBoundingClientRect();return ut=Math.abs(w.left-T.left)>1}(d))return v;var w=screen.logicalXDPI/screen.deviceXDPI,T=screen.logicalYDPI/screen.deviceYDPI;return{left:v.left*w,right:v.right*w,top:v.top*T,bottom:v.bottom*T}}(d.display.measure,Ee))}else{var Et;J>0&&(pe=T="right"),Ee=d.options.lineWrapping&&(Et=H.getClientRects()).length>1?Et["right"==T?Et.length-1:0]:H.getBoundingClientRect()}if(n&&a<9&&!J&&(!Ee||!Ee.left&&!Ee.right)){var Yt=H.parentNode.getClientRects()[0];Ee=Yt?{left:Yt.left,right:Yt.left+Ho(d.display),top:Yt.top,bottom:Yt.bottom}:Us}for(var Ht=Ee.top-v.rect.top,di=Ee.bottom-v.rect.top,Ei=(Ht+di)/2,Ii=v.view.measure.heights,Gi=0;Gi<Ii.length-1&&!(Ei<Ii[Gi]);Gi++);var qi={left:("right"==pe?Ee.right:Ee.left)-v.rect.left,right:("left"==pe?Ee.left:Ee.right)-v.rect.left,top:Gi?Ii[Gi-1]:0,bottom:Ii[Gi]};return!Ee.left&&!Ee.right&&(qi.bogus=!0),d.options.singleCursorHeightPerLine||(qi.rtop=Ht,qi.rbottom=di),qi}(d,v,w,T)).bogus||(v.cache[H]=J)),{left:J.left,right:J.right,top:R?J.rtop:J.top,bottom:R?J.rbottom:J.bottom}}var _s,Us={left:0,right:0,top:0,bottom:0};function oo(d,v,w){for(var T,R,H,J,oe,pe,Ee=0;Ee<d.length;Ee+=3)if(pe=d[Ee+1],v<(oe=d[Ee])?(R=0,H=1,J="left"):v<pe?H=1+(R=v-oe):(Ee==d.length-3||v==pe&&d[Ee+3]>v)&&(R=(H=pe-oe)-1,v>=pe&&(J="right")),null!=R){if(T=d[Ee+2],oe==pe&&w==(T.insertLeft?"left":"right")&&(J=w),"left"==w&&0==R)for(;Ee&&d[Ee-2]==d[Ee-3]&&d[Ee-1].insertLeft;)T=d[2+(Ee-=3)],J="left";if("right"==w&&R==pe-oe)for(;Ee<d.length-3&&d[Ee+3]==d[Ee+4]&&!d[Ee+5].insertLeft;)T=d[(Ee+=3)+2],J="right";break}return{node:T,start:R,end:H,collapse:J,coverStart:oe,coverEnd:pe}}function Qr(d,v){var w=Us;if("left"==v)for(var T=0;T<d.length&&(w=d[T]).left==w.right;T++);else for(var R=d.length-1;R>=0&&(w=d[R]).left==w.right;R--);return w}function vr(d){if(d.measure&&(d.measure.cache={},d.measure.heights=null,d.rest))for(var v=0;v<d.rest.length;v++)d.measure.caches[v]={}}function zo(d){d.display.externalMeasure=null,dt(d.display.lineMeasure);for(var v=0;v<d.display.view.length;v++)vr(d.display.view[v])}function nr(d){zo(d),d.display.cachedCharWidth=d.display.cachedTextHeight=d.display.cachedPaddingH=null,d.options.lineWrapping||(d.display.maxLineChanged=!0),d.display.lineNumChars=null}function La(){return I&&Je?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ea(){return I&&Je?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function br(d){var v=0;if(d.widgets)for(var w=0;w<d.widgets.length;++w)d.widgets[w].above&&(v+=Me(d.widgets[w]));return v}function kr(d,v,w,T,R){if(!R){var H=br(v);w.top+=H,w.bottom+=H}if("line"==T)return w;T||(T="local");var J=ls(v);if("local"==T?J+=Ct(d.display):J-=d.display.viewOffset,"page"==T||"window"==T){var oe=d.display.lineSpace.getBoundingClientRect();J+=oe.top+("window"==T?0:ea());var pe=oe.left+("window"==T?0:La());w.left+=pe,w.right+=pe}return w.top+=J,w.bottom+=J,w}function ta(d,v,w){if("div"==w)return v;var T=v.left,R=v.top;if("page"==w)T-=La(),R-=ea();else if("local"==w||!w){var H=d.display.sizer.getBoundingClientRect();T+=H.left,R+=H.top}var J=d.display.lineSpace.getBoundingClientRect();return{left:T-J.left,top:R-J.top}}function on(d,v,w,T,R){return T||(T=ii(d.doc,v.line)),kr(d,T,On(d,T,v.ch,R),w)}function an(d,v,w,T,R,H){function J(di,Ei){var Ii=Cs(d,R,di,Ei?"right":"left",H);return Ei?Ii.left=Ii.right:Ii.right=Ii.left,kr(d,T,Ii,w)}T=T||ii(d.doc,v.line),R||(R=rs(d,T));var oe=ni(T,d.doc.direction),pe=v.ch,Ee=v.sticky;if(pe>=T.text.length?(pe=T.text.length,Ee="before"):pe<=0&&(pe=0,Ee="after"),!oe)return J("before"==Ee?pe-1:pe,"before"==Ee);function rt(di,Ei,Ii){return J(Ii?di-1:di,1==oe[Ei].level!=Ii)}var Et=bi(oe,pe,Ee),Yt=Vt,Ht=rt(pe,Et,"before"==Ee);return null!=Yt&&(Ht.other=rt(pe,Yt,"before"!=Ee)),Ht}function Fn(d,v){var w=0;v=Ti(d.doc,v),d.options.lineWrapping||(w=Ho(d.display)*v.ch);var T=ii(d.doc,v.line),R=ls(T)+Ct(d.display);return{left:w,right:w,top:R,bottom:R+T.height}}function Un(d,v,w,T,R){var H=_i(d,v,w);return H.xRel=R,T&&(H.outside=T),H}function us(d,v,w){var T=d.doc;if((w+=d.display.viewOffset)<0)return Un(T.first,0,null,-1,-1);var R=is(T,w),H=T.first+T.size-1;if(R>H)return Un(T.first+T.size-1,ii(T,H).text.length,null,1,1);v<0&&(v=0);for(var J=ii(T,R);;){var oe=Gs(d,J,R,v,w),pe=qo(J,oe.ch+(oe.xRel>0||oe.outside>0?1:0));if(!pe)return oe;var Ee=pe.find(1);if(Ee.line==R)return Ee;J=ii(T,R=Ee.line)}}function wo(d,v,w,T){T-=br(v);var R=v.text.length,H=Xe(function(J){return Cs(d,w,J-1).bottom<=T},R,0);return{begin:H,end:R=Xe(function(J){return Cs(d,w,J).top>T},H,R)}}function ds(d,v,w,T){return w||(w=rs(d,v)),wo(d,v,w,kr(d,v,Cs(d,w,T),"line").top)}function sr(d,v,w,T){return!(d.bottom<=w)&&(d.top>w||(T?d.left:d.right)>v)}function Gs(d,v,w,T,R){R-=ls(v);var H=rs(d,v),J=br(v),oe=0,pe=v.text.length,Ee=!0,rt=ni(v,d.doc.direction);if(rt){var Et=(d.options.lineWrapping?ol:sl)(d,v,w,H,rt,T,R);oe=(Ee=1!=Et.level)?Et.from:Et.to-1,pe=Ee?Et.to:Et.from-1}var Ei,Ii,Yt=null,Ht=null,di=Xe(function(bn){var wn=Cs(d,H,bn);return wn.top+=J,wn.bottom+=J,!!sr(wn,T,R,!1)&&(wn.top<=R&&wn.left<=T&&(Yt=bn,Ht=wn),!0)},oe,pe),Gi=!1;if(Ht){var Qi=T-Ht.left<Ht.right-T,Pi=Qi==Ee;di=Yt+(Pi?0:1),Ii=Pi?"after":"before",Ei=Qi?Ht.left:Ht.right}else{!Ee&&(di==pe||di==oe)&&di++,Ii=0==di?"after":di==v.text.length?"before":Cs(d,H,di-(Ee?1:0)).bottom+J<=R==Ee?"after":"before";var qi=an(d,_i(w,di,Ii),"line",v,H);Ei=qi.left,Gi=R<qi.top?-1:R>=qi.bottom?1:0}return Un(w,di=Ie(v.text,di,1),Ii,Gi,T-Ei)}function sl(d,v,w,T,R,H,J){var oe=Xe(function(Et){var Yt=R[Et],Ht=1!=Yt.level;return sr(an(d,_i(w,Ht?Yt.to:Yt.from,Ht?"before":"after"),"line",v,T),H,J,!0)},0,R.length-1),pe=R[oe];if(oe>0){var Ee=1!=pe.level,rt=an(d,_i(w,Ee?pe.from:pe.to,Ee?"after":"before"),"line",v,T);sr(rt,H,J,!0)&&rt.top>J&&(pe=R[oe-1])}return pe}function ol(d,v,w,T,R,H,J){var oe=wo(d,v,T,J),pe=oe.begin,Ee=oe.end;/\s/.test(v.text.charAt(Ee-1))&&Ee--;for(var rt=null,Et=null,Yt=0;Yt<R.length;Yt++){var Ht=R[Yt];if(!(Ht.from>=Ee||Ht.to<=pe)){var Ei=Cs(d,T,1!=Ht.level?Math.min(Ee,Ht.to)-1:Math.max(pe,Ht.from)).right,Ii=Ei<H?H-Ei+1e9:Ei-H;(!rt||Et>Ii)&&(rt=Ht,Et=Ii)}}return rt||(rt=R[R.length-1]),rt.from<pe&&(rt={from:pe,to:rt.to,level:rt.level}),rt.to>Ee&&(rt={from:rt.from,to:Ee,level:rt.level}),rt}function Dr(d){if(null!=d.cachedTextHeight)return d.cachedTextHeight;if(null==_s){_s=Pe("pre",null,"CodeMirror-line-like");for(var v=0;v<49;++v)_s.appendChild(document.createTextNode("x")),_s.appendChild(Pe("br"));_s.appendChild(document.createTextNode("x"))}it(d.measure,_s);var w=_s.offsetHeight/50;return w>3&&(d.cachedTextHeight=w),dt(d.measure),w||1}function Ho(d){if(null!=d.cachedCharWidth)return d.cachedCharWidth;var v=Pe("span","xxxxxxxxxx"),w=Pe("pre",[v],"CodeMirror-line-like");it(d.measure,w);var T=v.getBoundingClientRect(),R=(T.right-T.left)/10;return R>2&&(d.cachedCharWidth=R),R||10}function or(d){for(var v=d.display,w={},T={},R=v.gutters.clientLeft,H=v.gutters.firstChild,J=0;H;H=H.nextSibling,++J){var oe=d.display.gutterSpecs[J].className;w[oe]=H.offsetLeft+H.clientLeft+R,T[oe]=H.clientWidth}return{fixedPos:Mr(v),gutterTotalWidth:v.gutters.offsetWidth,gutterLeft:w,gutterWidth:T,wrapperWidth:v.wrapper.clientWidth}}function Mr(d){return d.scroller.getBoundingClientRect().left-d.sizer.getBoundingClientRect().left}function Lr(d){var v=Dr(d.display),w=d.options.lineWrapping,T=w&&Math.max(5,d.display.scroller.clientWidth/Ho(d.display)-3);return function(R){if(ps(d.doc,R))return 0;var H=0;if(R.widgets)for(var J=0;J<R.widgets.length;J++)R.widgets[J].height&&(H+=R.widgets[J].height);return w?H+(Math.ceil(R.text.length/T)||1)*v:H+v}}function rl(d){var v=d.doc,w=Lr(d);v.iter(function(T){var R=w(T);R!=T.height&&fs(T,R)})}function za(d,v,w,T){var R=d.display;if(!w&&"true"==te(v).getAttribute("cm-not-content"))return null;var H,J,oe=R.lineSpace.getBoundingClientRect();try{H=v.clientX-oe.left,J=v.clientY-oe.top}catch(Et){return null}var Ee,pe=us(d,H,J);if(T&&pe.xRel>0&&(Ee=ii(d.doc,pe.line).text).length==pe.ch){var rt=$t(Ee,Ee.length,d.options.tabSize)-Ee.length;pe=_i(pe.line,Math.max(0,Math.round((H-Zt(d.display).left)/Ho(d.display))-rt))}return pe}function jo(d,v){if(v>=d.display.viewTo||(v-=d.display.viewFrom)<0)return null;for(var w=d.display.view,T=0;T<w.length;T++)if((v-=w[T].size)<0)return T}function So(d,v,w,T){null==v&&(v=d.doc.first),null==w&&(w=d.doc.first+d.doc.size),T||(T=0);var R=d.display;if(T&&w<R.viewTo&&(null==R.updateLineNumbers||R.updateLineNumbers>v)&&(R.updateLineNumbers=v),d.curOp.viewChanged=!0,v>=R.viewTo)Js&&Qo(d.doc,v)<R.viewTo&&ia(d);else if(w<=R.viewFrom)Js&&wr(d.doc,w+T)>R.viewFrom?ia(d):(R.viewFrom+=T,R.viewTo+=T);else if(v<=R.viewFrom&&w>=R.viewTo)ia(d);else if(v<=R.viewFrom){var H=cr(d,w,w+T,1);H?(R.view=R.view.slice(H.index),R.viewFrom=H.lineN,R.viewTo+=T):ia(d)}else if(w>=R.viewTo){var J=cr(d,v,v,-1);J?(R.view=R.view.slice(0,J.index),R.viewTo=J.lineN):ia(d)}else{var oe=cr(d,v,v,-1),pe=cr(d,w,w+T,1);oe&&pe?(R.view=R.view.slice(0,oe.index).concat(Fi(d,oe.lineN,pe.lineN)).concat(R.view.slice(pe.index)),R.viewTo+=T):ia(d)}var Ee=R.externalMeasured;Ee&&(w<Ee.lineN?Ee.lineN+=T:v<Ee.lineN+Ee.size&&(R.externalMeasured=null))}function wa(d,v,w){d.curOp.viewChanged=!0;var T=d.display,R=d.display.externalMeasured;if(R&&v>=R.lineN&&v<R.lineN+R.size&&(T.externalMeasured=null),!(v<T.viewFrom||v>=T.viewTo)){var H=T.view[jo(d,v)];if(null!=H.node){var J=H.changes||(H.changes=[]);-1==ti(J,w)&&J.push(w)}}}function ia(d){d.display.viewFrom=d.display.viewTo=d.doc.first,d.display.view=[],d.display.viewOffset=0}function cr(d,v,w,T){var H,R=jo(d,v),J=d.display.view;if(!Js||w==d.doc.first+d.doc.size)return{index:R,lineN:w};for(var oe=d.display.viewFrom,pe=0;pe<R;pe++)oe+=J[pe].size;if(oe!=v){if(T>0){if(R==J.length-1)return null;H=oe+J[R].size-v,R++}else H=oe-v;v+=H,w+=H}for(;Qo(d.doc,w)!=w;){if(R==(T<0?0:J.length-1))return null;w+=T*J[R-(T<0?1:0)].size,R+=T}return{index:R,lineN:w}}function ga(d){for(var v=d.display.view,w=0,T=0;T<v.length;T++){var R=v[T];!R.hidden&&(!R.node||R.changes)&&++w}return w}function al(d){d.display.input.showSelection(d.display.input.prepareSelection())}function ll(d,v){void 0===v&&(v=!0);var w=d.doc,T={},R=T.cursors=document.createDocumentFragment(),H=T.selection=document.createDocumentFragment(),J=d.options.$customCursor;J&&(v=!0);for(var oe=0;oe<w.sel.ranges.length;oe++)if(v||oe!=w.sel.primIndex){var pe=w.sel.ranges[oe];if(!(pe.from().line>=d.display.viewTo||pe.to().line<d.display.viewFrom)){var Ee=pe.empty();if(J){var rt=J(d,pe);rt&&Pr(d,rt,R)}else(Ee||d.options.showCursorWhenSelecting)&&Pr(d,pe.head,R);Ee||Ec(d,pe,H)}}return T}function Pr(d,v,w){var T=an(d,v,"div",null,null,!d.options.singleCursorHeightPerLine),R=w.appendChild(Pe("div","\xa0","CodeMirror-cursor"));if(R.style.left=T.left+"px",R.style.top=T.top+"px",R.style.height=Math.max(0,T.bottom-T.top)*d.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(d.getWrapperElement().className)){var H=on(d,v,"div",null,null),J=H.right-H.left;R.style.width=(J>0?J:d.defaultCharWidth())+"px"}if(T.other){var oe=w.appendChild(Pe("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));oe.style.display="",oe.style.left=T.other.left+"px",oe.style.top=T.other.top+"px",oe.style.height=.85*(T.other.bottom-T.other.top)+"px"}}function ma(d,v){return d.top-v.top||d.left-v.left}function Ec(d,v,w){var T=d.display,R=d.doc,H=document.createDocumentFragment(),J=Zt(d.display),oe=J.left,pe=Math.max(T.sizerWidth,Bi(d)-T.sizer.offsetLeft)-J.right,Ee="ltr"==R.direction;function rt(Pi,qi,bn,wn){qi<0&&(qi=0),qi=Math.round(qi),wn=Math.round(wn),H.appendChild(Pe("div",null,"CodeMirror-selected","position: absolute; left: "+Pi+"px;\n                             top: "+qi+"px; width: "+(null==bn?pe-Pi:bn)+"px;\n                             height: "+(wn-qi)+"px"))}function Et(Pi,qi,bn){var Os,No,wn=ii(R,Pi),Qn=wn.text.length;function ro(Xo,jr){return on(d,_i(Pi,Xo),"div",wn,jr)}function la(Xo,jr,ar){var Ko=ds(d,wn,null,Xo),Fo="ltr"==jr==("after"==ar)?"left":"right";return ro("after"==ar?Ko.begin:Ko.end-(/\s/.test(wn.text.charAt(Ko.end-1))?2:1),Fo)[Fo]}var ca=ni(wn,R.direction);return function(d,v,w,T){if(!d)return T(v,w,"ltr",0);for(var R=!1,H=0;H<d.length;++H){var J=d[H];(J.from<w&&J.to>v||v==w&&J.to==v)&&(T(Math.max(J.from,v),Math.min(J.to,w),1==J.level?"rtl":"ltr",H),R=!0)}R||T(v,w,"ltr")}(ca,qi||0,null==bn?Qn:bn,function(Xo,jr,ar,Ko){var Fo="ltr"==ar,xo=ro(Xo,Fo?"left":"right"),ua=ro(jr-1,Fo?"right":"left"),Sl=null==qi&&0==Xo,Ca=null==bn&&jr==Qn,Ks=0==Ko,io=!ca||Ko==ca.length-1;if(ua.top-xo.top<=3){var xa=(Ee?Sl:Ca)&&Ks?oe:(Fo?xo:ua).left;rt(xa,xo.top,((Ee?Ca:Sl)&&io?pe:(Fo?ua:xo).right)-xa,xo.bottom)}else{var Ga,Go,Ql,eu;Fo?(Ga=Ee&&Sl&&Ks?oe:xo.left,Go=Ee?pe:la(Xo,ar,"before"),Ql=Ee?oe:la(jr,ar,"after"),eu=Ee&&Ca&&io?pe:ua.right):(Ga=Ee?la(Xo,ar,"before"):oe,Go=!Ee&&Sl&&Ks?pe:xo.right,Ql=!Ee&&Ca&&io?oe:ua.left,eu=Ee?la(jr,ar,"after"):pe),rt(Ga,xo.top,Go-Ga,xo.bottom),xo.bottom<ua.top&&rt(oe,xo.bottom,null,ua.top),rt(Ql,ua.top,eu-Ql,ua.bottom)}(!Os||ma(xo,Os)<0)&&(Os=xo),ma(ua,Os)<0&&(Os=ua),(!No||ma(xo,No)<0)&&(No=xo),ma(ua,No)<0&&(No=ua)}),{start:Os,end:No}}var Yt=v.from(),Ht=v.to();if(Yt.line==Ht.line)Et(Yt.line,Yt.ch,Ht.ch);else{var di=ii(R,Yt.line),Ei=ii(R,Ht.line),Ii=so(di)==so(Ei),Gi=Et(Yt.line,Yt.ch,Ii?di.text.length+1:null).end,Qi=Et(Ht.line,Ii?0:null,Ht.ch).start;Ii&&(Gi.top<Qi.top-2?(rt(Gi.right,Gi.top,null,Gi.bottom),rt(oe,Qi.top,Qi.left,Qi.bottom)):rt(Gi.right,Gi.top,Qi.left-Gi.right,Gi.bottom)),Gi.bottom<Qi.top&&rt(oe,Gi.bottom,null,Qi.top)}w.appendChild(H)}function cl(d){if(d.state.focused){var v=d.display;clearInterval(v.blinker);var w=!0;v.cursorDiv.style.visibility="",d.options.cursorBlinkRate>0?v.blinker=setInterval(function(){d.hasFocus()||na(d),v.cursorDiv.style.visibility=(w=!w)?"":"hidden"},d.options.cursorBlinkRate):d.options.cursorBlinkRate<0&&(v.cursorDiv.style.visibility="hidden")}}function Rr(d){d.hasFocus()||(d.display.input.focus(),d.state.focused||Pa(d))}function _a(d){d.state.delayingBlurEvent=!0,setTimeout(function(){d.state.delayingBlurEvent&&(d.state.delayingBlurEvent=!1,d.state.focused&&na(d))},100)}function Pa(d,v){d.state.delayingBlurEvent&&!d.state.draggingText&&(d.state.delayingBlurEvent=!1),"nocursor"!=d.options.readOnly&&(d.state.focused||(Ni(d,"focus",d,v),d.state.focused=!0,Be(d.display.wrapper,"CodeMirror-focused"),!d.curOp&&d.display.selForContextMenu!=d.doc.sel&&(d.display.input.reset(),f&&setTimeout(function(){return d.display.input.reset(!0)},20)),d.display.input.receivedFocus()),cl(d))}function na(d,v){d.state.delayingBlurEvent||(d.state.focused&&(Ni(d,"blur",d,v),d.state.focused=!1,Qe(d.display.wrapper,"CodeMirror-focused")),clearInterval(d.display.blinker),setTimeout(function(){d.state.focused||(d.display.shift=!1)},150))}function xr(d){for(var v=d.display,w=v.lineDiv.offsetTop,T=Math.max(0,v.scroller.getBoundingClientRect().top),R=v.lineDiv.getBoundingClientRect().top,H=0,J=0;J<v.view.length;J++){var oe=v.view[J],pe=d.options.lineWrapping,Ee=void 0,rt=0;if(!oe.hidden){if(R+=oe.line.height,n&&a<8){var Et=oe.node.offsetTop+oe.node.offsetHeight;Ee=Et-w,w=Et}else{var Yt=oe.node.getBoundingClientRect();Ee=Yt.bottom-Yt.top,!pe&&oe.text.firstChild&&(rt=oe.text.firstChild.getBoundingClientRect().right-Yt.left-1)}var Ht=oe.line.height-Ee;if((Ht>.005||Ht<-.005)&&(R<T&&(H-=Ht),fs(oe.line,Ee),sa(oe.line),oe.rest))for(var di=0;di<oe.rest.length;di++)sa(oe.rest[di]);if(rt>d.display.sizerWidth){var Ei=Math.ceil(rt/Ho(d.display));Ei>d.display.maxLineLength&&(d.display.maxLineLength=Ei,d.display.maxLine=oe.line,d.display.maxLineChanged=!0)}}}Math.abs(H)>2&&(v.scroller.scrollTop+=H)}function sa(d){if(d.widgets)for(var v=0;v<d.widgets.length;++v){var w=d.widgets[v],T=w.node.parentNode;T&&(w.height=T.offsetHeight)}}function ja(d,v,w){var T=w&&null!=w.top?Math.max(0,w.top):d.scroller.scrollTop;T=Math.floor(T-Ct(d));var R=w&&null!=w.bottom?w.bottom:T+d.wrapper.clientHeight,H=is(v,T),J=is(v,R);if(w&&w.ensure){var oe=w.ensure.from.line,pe=w.ensure.to.line;oe<H?(H=oe,J=is(v,ls(ii(v,oe))+d.wrapper.clientHeight)):Math.min(pe,v.lastLine())>=J&&(H=is(v,ls(ii(v,pe))-d.wrapper.clientHeight),J=pe)}return{from:H,to:Math.max(J,H+1)}}function Tc(d,v){var w=d.display,T=Dr(d.display);v.top<0&&(v.top=0);var R=d.curOp&&null!=d.curOp.scrollTop?d.curOp.scrollTop:w.scroller.scrollTop,H=nn(d),J={};v.bottom-v.top>H&&(v.bottom=v.top+H);var oe=d.doc.height+It(w),Ee=v.bottom>oe-T;if(v.top<R)J.scrollTop=v.top<T?0:v.top;else if(v.bottom>R+H){var rt=Math.min(v.top,(Ee?oe:v.bottom)-H);rt!=R&&(J.scrollTop=rt)}var Et=d.options.fixedGutter?0:w.gutters.offsetWidth,Yt=d.curOp&&null!=d.curOp.scrollLeft?d.curOp.scrollLeft:w.scroller.scrollLeft-Et,Ht=Bi(d)-w.gutters.offsetWidth,di=v.right-v.left>Ht;return di&&(v.right=v.left+Ht),v.left<10?J.scrollLeft=0:v.left<Yt?J.scrollLeft=Math.max(0,v.left+Et-(di?0:10)):v.right>Ht+Yt-3&&(J.scrollLeft=v.right+(di?0:10)-Ht),J}function q(d,v){null!=v&&(ve(d),d.curOp.scrollTop=(null==d.curOp.scrollTop?d.doc.scrollTop:d.curOp.scrollTop)+v)}function K(d){ve(d);var v=d.getCursor();d.curOp.scrollToPos={from:v,to:v,margin:d.options.cursorScrollMargin}}function j(d,v,w){(null!=v||null!=w)&&ve(d),null!=v&&(d.curOp.scrollLeft=v),null!=w&&(d.curOp.scrollTop=w)}function ve(d){var v=d.curOp.scrollToPos;v&&(d.curOp.scrollToPos=null,je(d,Fn(d,v.from),Fn(d,v.to),v.margin))}function je(d,v,w,T){var R=Tc(d,{left:Math.min(v.left,w.left),top:Math.min(v.top,w.top)-T,right:Math.max(v.right,w.right),bottom:Math.max(v.bottom,w.bottom)+T});j(d,R.scrollLeft,R.scrollTop)}function ft(d,v){Math.abs(d.doc.scrollTop-v)<2||(O||uu(d,{top:v}),Ot(d,v,!0),O&&uu(d),Ll(d,100))}function Ot(d,v,w){v=Math.max(0,Math.min(d.display.scroller.scrollHeight-d.display.scroller.clientHeight,v)),(d.display.scroller.scrollTop!=v||w)&&(d.doc.scrollTop=v,d.display.scrollbars.setScrollTop(v),d.display.scroller.scrollTop!=v&&(d.display.scroller.scrollTop=v))}function ai(d,v,w,T){v=Math.max(0,Math.min(v,d.display.scroller.scrollWidth-d.display.scroller.clientWidth)),(!(w?v==d.doc.scrollLeft:Math.abs(d.doc.scrollLeft-v)<2)||T)&&(d.doc.scrollLeft=v,Vo(d),d.display.scroller.scrollLeft!=v&&(d.display.scroller.scrollLeft=v),d.display.scrollbars.setScrollLeft(v))}function Xi(d){var v=d.display,w=v.gutters.offsetWidth,T=Math.round(d.doc.height+It(d.display));return{clientHeight:v.scroller.clientHeight,viewHeight:v.wrapper.clientHeight,scrollWidth:v.scroller.scrollWidth,clientWidth:v.scroller.clientWidth,viewWidth:v.wrapper.clientWidth,barLeft:d.options.fixedGutter?w:0,docHeight:T,scrollHeight:T+gi(d)+v.barHeight,nativeBarWidth:v.nativeBarWidth,gutterWidth:w}}var qn=function(d,v,w){this.cm=w;var T=this.vert=Pe("div",[Pe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),R=this.horiz=Pe("div",[Pe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");T.tabIndex=R.tabIndex=-1,d(T),d(R),xi(T,"scroll",function(){T.clientHeight&&v(T.scrollTop,"vertical")}),xi(R,"scroll",function(){R.clientWidth&&v(R.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,n&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};qn.prototype.update=function(d){var v=d.scrollWidth>d.clientWidth+1,w=d.scrollHeight>d.clientHeight+1,T=d.nativeBarWidth;return w?(this.vert.style.display="block",this.vert.style.bottom=v?T+"px":"0",this.vert.firstChild.style.height=Math.max(0,d.scrollHeight-d.clientHeight+(d.viewHeight-(v?T:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),v?(this.horiz.style.display="block",this.horiz.style.right=w?T+"px":"0",this.horiz.style.left=d.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,d.scrollWidth-d.clientWidth+(d.viewWidth-d.barLeft-(w?T:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&d.clientHeight>0&&(0==T&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:w?T:0,bottom:v?T:0}},qn.prototype.setScrollLeft=function(d){this.horiz.scrollLeft!=d&&(this.horiz.scrollLeft=d),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},qn.prototype.setScrollTop=function(d){this.vert.scrollTop!=d&&(this.vert.scrollTop=d),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},qn.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Ge&&!_e?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Xt,this.disableVert=new Xt},qn.prototype.enableZeroWidthBar=function(d,v,w){d.style.pointerEvents="auto",v.set(1e3,function T(){var R=d.getBoundingClientRect();("vert"==w?document.elementFromPoint(R.right-1,(R.top+R.bottom)/2):document.elementFromPoint((R.right+R.left)/2,R.bottom-1))!=d?d.style.pointerEvents="none":v.set(1e3,T)})},qn.prototype.clear=function(){var d=this.horiz.parentNode;d.removeChild(this.horiz),d.removeChild(this.vert)};var Cn=function(){};function vs(d,v){v||(v=Xi(d));var w=d.display.barWidth,T=d.display.barHeight;Ps(d,v);for(var R=0;R<4&&w!=d.display.barWidth||T!=d.display.barHeight;R++)w!=d.display.barWidth&&d.options.lineWrapping&&xr(d),Ps(d,Xi(d)),w=d.display.barWidth,T=d.display.barHeight}function Ps(d,v){var w=d.display,T=w.scrollbars.update(v);w.sizer.style.paddingRight=(w.barWidth=T.right)+"px",w.sizer.style.paddingBottom=(w.barHeight=T.bottom)+"px",w.heightForcer.style.borderBottom=T.bottom+"px solid transparent",T.right&&T.bottom?(w.scrollbarFiller.style.display="block",w.scrollbarFiller.style.height=T.bottom+"px",w.scrollbarFiller.style.width=T.right+"px"):w.scrollbarFiller.style.display="",T.bottom&&d.options.coverGutterNextToScrollbar&&d.options.fixedGutter?(w.gutterFiller.style.display="block",w.gutterFiller.style.height=T.bottom+"px",w.gutterFiller.style.width=v.gutterWidth+"px"):w.gutterFiller.style.display=""}Cn.prototype.update=function(){return{bottom:0,right:0}},Cn.prototype.setScrollLeft=function(){},Cn.prototype.setScrollTop=function(){},Cn.prototype.clear=function(){};var Sa={native:qn,null:Cn};function ur(d){d.display.scrollbars&&(d.display.scrollbars.clear(),d.display.scrollbars.addClass&&Qe(d.display.wrapper,d.display.scrollbars.addClass)),d.display.scrollbars=new Sa[d.options.scrollbarStyle](function(v){d.display.wrapper.insertBefore(v,d.display.scrollbarFiller),xi(v,"mousedown",function(){d.state.focused&&setTimeout(function(){return d.display.input.focus()},0)}),v.setAttribute("cm-not-content","true")},function(v,w){"horizontal"==w?ai(d,v):ft(d,v)},d),d.display.scrollbars.addClass&&Be(d.display.wrapper,d.display.scrollbars.addClass)}var oa=0;function po(d){d.curOp={cm:d,viewChanged:!1,startHeight:d.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++oa,markArrays:null},function(d){Dn?Dn.ops.push(d):d.ownsGroup=Dn={ops:[d],delayedCallbacks:[]}}(d.curOp)}function ra(d){var v=d.curOp;v&&function(d,v){var w=d.ownsGroup;if(w)try{!function(d){var v=d.delayedCallbacks,w=0;do{for(;w<v.length;w++)v[w].call(null);for(var T=0;T<d.ops.length;T++){var R=d.ops[T];if(R.cursorActivityHandlers)for(;R.cursorActivityCalled<R.cursorActivityHandlers.length;)R.cursorActivityHandlers[R.cursorActivityCalled++].call(null,R.cm)}}while(w<v.length)}(w)}finally{Dn=null,v(w)}}(v,function(w){for(var T=0;T<w.ops.length;T++)w.ops[T].cm.curOp=null;!function(d){for(var v=d.ops,w=0;w<v.length;w++)Nr(v[w]);for(var T=0;T<v.length;T++)oc(v[T]);for(var R=0;R<v.length;R++)Ol(v[R]);for(var H=0;H<v.length;H++)ul(v[H]);for(var J=0;J<v.length;J++)kl(v[J])}(w)})}function Nr(d){var v=d.cm,w=v.display;(function(d){var v=d.display;!v.scrollbarsClipped&&v.scroller.offsetWidth&&(v.nativeBarWidth=v.scroller.offsetWidth-v.scroller.clientWidth,v.heightForcer.style.height=gi(d)+"px",v.sizer.style.marginBottom=-v.nativeBarWidth+"px",v.sizer.style.borderRightWidth=gi(d)+"px",v.scrollbarsClipped=!0)})(v),d.updateMaxLine&&Ta(v),d.mustUpdate=d.viewChanged||d.forceUpdate||null!=d.scrollTop||d.scrollToPos&&(d.scrollToPos.from.line<w.viewFrom||d.scrollToPos.to.line>=w.viewTo)||w.maxLineChanged&&v.options.lineWrapping,d.update=d.mustUpdate&&new eo(v,d.mustUpdate&&{top:d.scrollTop,ensure:d.scrollToPos},d.forceUpdate)}function oc(d){d.updatedDisplay=d.mustUpdate&&Nc(d.cm,d.update)}function Ol(d){var v=d.cm,w=v.display;d.updatedDisplay&&xr(v),d.barMeasure=Xi(v),w.maxLineChanged&&!v.options.lineWrapping&&(d.adjustWidthTo=On(v,w.maxLine,w.maxLine.text.length).left+3,v.display.sizerWidth=d.adjustWidthTo,d.barMeasure.scrollWidth=Math.max(w.scroller.clientWidth,w.sizer.offsetLeft+d.adjustWidthTo+gi(v)+v.display.barWidth),d.maxScrollLeft=Math.max(0,w.sizer.offsetLeft+d.adjustWidthTo-Bi(v))),(d.updatedDisplay||d.selectionChanged)&&(d.preparedSelection=w.input.prepareSelection())}function ul(d){var v=d.cm;null!=d.adjustWidthTo&&(v.display.sizer.style.minWidth=d.adjustWidthTo+"px",d.maxScrollLeft<v.doc.scrollLeft&&ai(v,Math.min(v.display.scroller.scrollLeft,d.maxScrollLeft),!0),v.display.maxLineChanged=!1);var w=d.focus&&d.focus==at();d.preparedSelection&&v.display.input.showSelection(d.preparedSelection,w),(d.updatedDisplay||d.startHeight!=v.doc.height)&&vs(v,d.barMeasure),d.updatedDisplay&&du(v,d.barMeasure),d.selectionChanged&&cl(v),v.state.focused&&d.updateInput&&v.display.input.reset(d.typing),w&&Rr(d.cm)}function kl(d){var v=d.cm,w=v.display,T=v.doc;d.updatedDisplay&&Ou(v,d.update),null!=w.wheelStartX&&(null!=d.scrollTop||null!=d.scrollLeft||d.scrollToPos)&&(w.wheelStartX=w.wheelStartY=null),null!=d.scrollTop&&Ot(v,d.scrollTop,d.forceScroll),null!=d.scrollLeft&&ai(v,d.scrollLeft,!0,!0),d.scrollToPos&&function(d,v){if(!Zi(d,"scrollCursorIntoView")){var w=d.display,T=w.sizer.getBoundingClientRect(),R=null;if(v.top+T.top<0?R=!0:v.bottom+T.top>(window.innerHeight||document.documentElement.clientHeight)&&(R=!1),null!=R&&!De){var H=Pe("div","\u200b",null,"position: absolute;\n                         top: "+(v.top-w.viewOffset-Ct(d.display))+"px;\n                         height: "+(v.bottom-v.top+gi(d)+w.barHeight)+"px;\n                         left: "+v.left+"px; width: "+Math.max(2,v.right-v.left)+"px;");d.display.lineSpace.appendChild(H),H.scrollIntoView(R),d.display.lineSpace.removeChild(H)}}}(v,function(d,v,w,T){var R;null==T&&(T=0),!d.options.lineWrapping&&v==w&&(w="before"==v.sticky?_i(v.line,v.ch+1,"before"):v,v=v.ch?_i(v.line,"before"==v.sticky?v.ch-1:v.ch,"after"):v);for(var H=0;H<5;H++){var J=!1,oe=an(d,v),pe=w&&w!=v?an(d,w):oe,Ee=Tc(d,R={left:Math.min(oe.left,pe.left),top:Math.min(oe.top,pe.top)-T,right:Math.max(oe.left,pe.left),bottom:Math.max(oe.bottom,pe.bottom)+T}),rt=d.doc.scrollTop,Et=d.doc.scrollLeft;if(null!=Ee.scrollTop&&(ft(d,Ee.scrollTop),Math.abs(d.doc.scrollTop-rt)>1&&(J=!0)),null!=Ee.scrollLeft&&(ai(d,Ee.scrollLeft),Math.abs(d.doc.scrollLeft-Et)>1&&(J=!0)),!J)break}return R}(v,Ti(T,d.scrollToPos.from),Ti(T,d.scrollToPos.to),d.scrollToPos.margin));var H=d.maybeHiddenMarkers,J=d.maybeUnhiddenMarkers;if(H)for(var oe=0;oe<H.length;++oe)H[oe].lines.length||Ni(H[oe],"hide");if(J)for(var pe=0;pe<J.length;++pe)J[pe].lines.length&&Ni(J[pe],"unhide");w.wrapper.offsetHeight&&(T.scrollTop=v.display.scroller.scrollTop),d.changeObjs&&Ni(v,"changes",v,d.changeObjs),d.update&&d.update.finish()}function Po(d,v){if(d.curOp)return v();po(d);try{return v()}finally{ra(d)}}function Do(d,v){return function(){if(d.curOp)return v.apply(d,arguments);po(d);try{return v.apply(d,arguments)}finally{ra(d)}}}function qs(d){return function(){if(this.curOp)return d.apply(this,arguments);po(this);try{return d.apply(this,arguments)}finally{ra(this)}}}function Es(d){return function(){var v=this.cm;if(!v||v.curOp)return d.apply(this,arguments);po(v);try{return d.apply(this,arguments)}finally{ra(v)}}}function Ll(d,v){d.doc.highlightFrontier<d.display.viewTo&&d.state.highlight.set(v,wt(Lc,d))}function Lc(d){var v=d.doc;if(!(v.highlightFrontier>=d.display.viewTo)){var w=+new Date+d.options.workTime,T=Bs(d,v.highlightFrontier),R=[];v.iter(T.line,Math.min(v.first+v.size,d.display.viewTo+500),function(H){if(T.line>=d.display.viewFrom){var J=H.styles,oe=H.text.length>d.options.maxHighlightLength?Ms(v.mode,T.state):null,pe=Qs(d,H,T,!0);oe&&(T.state=oe),H.styles=pe.styles;var Ee=H.styleClasses,rt=pe.classes;rt?H.styleClasses=rt:Ee&&(H.styleClasses=null);for(var Et=!J||J.length!=H.styles.length||Ee!=rt&&(!Ee||!rt||Ee.bgClass!=rt.bgClass||Ee.textClass!=rt.textClass),Yt=0;!Et&&Yt<J.length;++Yt)Et=J[Yt]!=H.styles[Yt];Et&&R.push(T.line),H.stateAfter=T.save(),T.nextLine()}else H.text.length<=d.options.maxHighlightLength&&Hs(d,H.text,T),H.stateAfter=T.line%5==0?T.save():null,T.nextLine();if(+new Date>w)return Ll(d,d.options.workDelay),!0}),v.highlightFrontier=T.line,v.modeFrontier=Math.max(v.modeFrontier,T.line),R.length&&Po(d,function(){for(var H=0;H<R.length;H++)wa(d,R[H],"text")})}}var eo=function(d,v,w){var T=d.display;this.viewport=v,this.visible=ja(T,d.doc,v),this.editorIsHidden=!T.wrapper.offsetWidth,this.wrapperHeight=T.wrapper.clientHeight,this.wrapperWidth=T.wrapper.clientWidth,this.oldDisplayWidth=Bi(d),this.force=w,this.dims=or(d),this.events=[]};function Nc(d,v){var w=d.display,T=d.doc;if(v.editorIsHidden)return ia(d),!1;if(!v.force&&v.visible.from>=w.viewFrom&&v.visible.to<=w.viewTo&&(null==w.updateLineNumbers||w.updateLineNumbers>=w.viewTo)&&w.renderedView==w.view&&0==ga(d))return!1;Sc(d)&&(ia(d),v.dims=or(d));var R=T.first+T.size,H=Math.max(v.visible.from-d.options.viewportMargin,T.first),J=Math.min(R,v.visible.to+d.options.viewportMargin);w.viewFrom<H&&H-w.viewFrom<20&&(H=Math.max(T.first,w.viewFrom)),w.viewTo>J&&w.viewTo-J<20&&(J=Math.min(R,w.viewTo)),Js&&(H=Qo(d.doc,H),J=wr(d.doc,J));var oe=H!=w.viewFrom||J!=w.viewTo||w.lastWrapHeight!=v.wrapperHeight||w.lastWrapWidth!=v.wrapperWidth;(function(d,v,w){var T=d.display;0==T.view.length||v>=T.viewTo||w<=T.viewFrom?(T.view=Fi(d,v,w),T.viewFrom=v):(T.viewFrom>v?T.view=Fi(d,v,T.viewFrom).concat(T.view):T.viewFrom<v&&(T.view=T.view.slice(jo(d,v))),T.viewFrom=v,T.viewTo<w?T.view=T.view.concat(Fi(d,T.viewTo,w)):T.viewTo>w&&(T.view=T.view.slice(0,jo(d,w)))),T.viewTo=w})(d,H,J),w.viewOffset=ls(ii(d.doc,w.viewFrom)),d.display.mover.style.top=w.viewOffset+"px";var pe=ga(d);if(!oe&&0==pe&&!v.force&&w.renderedView==w.view&&(null==w.updateLineNumbers||w.updateLineNumbers>=w.viewTo))return!1;var Ee=function(d){if(d.hasFocus())return null;var v=at();if(!v||!se(d.display.lineDiv,v))return null;var w={activeElt:v};if(window.getSelection){var T=window.getSelection();T.anchorNode&&T.extend&&se(d.display.lineDiv,T.anchorNode)&&(w.anchorNode=T.anchorNode,w.anchorOffset=T.anchorOffset,w.focusNode=T.focusNode,w.focusOffset=T.focusOffset)}return w}(d);return pe>4&&(w.lineDiv.style.display="none"),function(d,v,w){var T=d.display,R=d.options.lineNumbers,H=T.lineDiv,J=H.firstChild;function oe(di){var Ei=di.nextSibling;return f&&Ge&&d.display.currentWheelTarget==di?di.style.display="none":di.parentNode.removeChild(di),Ei}for(var pe=T.view,Ee=T.viewFrom,rt=0;rt<pe.length;rt++){var Et=pe[rt];if(!Et.hidden)if(Et.node&&Et.node.parentNode==H){for(;J!=Et.node;)J=oe(J);var Ht=R&&null!=v&&v<=Ee&&Et.lineNumber;Et.changes&&(ti(Et.changes,"gutter")>-1&&(Ht=!1),_n(d,Et,Ee,w)),Ht&&(dt(Et.lineNumber),Et.lineNumber.appendChild(document.createTextNode(ss(d.options,Ee)))),J=Et.node.nextSibling}else{var Yt=fe(d,Et,Ee,w);H.insertBefore(Yt,J)}Ee+=Et.size}for(;J;)J=oe(J)}(d,w.updateLineNumbers,v.dims),pe>4&&(w.lineDiv.style.display=""),w.renderedView=w.view,function(d){if(d&&d.activeElt&&d.activeElt!=at()&&(d.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(d.activeElt.nodeName)&&d.anchorNode&&se(document.body,d.anchorNode)&&se(document.body,d.focusNode))){var v=window.getSelection(),w=document.createRange();w.setEnd(d.anchorNode,d.anchorOffset),w.collapse(!1),v.removeAllRanges(),v.addRange(w),v.extend(d.focusNode,d.focusOffset)}}(Ee),dt(w.cursorDiv),dt(w.selectionDiv),w.gutters.style.height=w.sizer.style.minHeight=0,oe&&(w.lastWrapHeight=v.wrapperHeight,w.lastWrapWidth=v.wrapperWidth,Ll(d,400)),w.updateLineNumbers=null,!0}function Ou(d,v){for(var w=v.viewport,T=!0;;T=!1){if(T&&d.options.lineWrapping&&v.oldDisplayWidth!=Bi(d))T&&(v.visible=ja(d.display,d.doc,w));else if(w&&null!=w.top&&(w={top:Math.min(d.doc.height+It(d.display)-nn(d),w.top)}),v.visible=ja(d.display,d.doc,w),v.visible.from>=d.display.viewFrom&&v.visible.to<=d.display.viewTo)break;if(!Nc(d,v))break;xr(d);var R=Xi(d);al(d),vs(d,R),du(d,R),v.force=!1}v.signal(d,"update",d),(d.display.viewFrom!=d.display.reportedViewFrom||d.display.viewTo!=d.display.reportedViewTo)&&(v.signal(d,"viewportChange",d,d.display.viewFrom,d.display.viewTo),d.display.reportedViewFrom=d.display.viewFrom,d.display.reportedViewTo=d.display.viewTo)}function uu(d,v){var w=new eo(d,v);if(Nc(d,w)){xr(d),Ou(d,w);var T=Xi(d);al(d),vs(d,T),du(d,T),w.finish()}}function dl(d){d.sizer.style.marginLeft=d.gutters.offsetWidth+"px",zn(d,"gutterChanged",d)}function du(d,v){d.display.sizer.style.minHeight=v.docHeight+"px",d.display.heightForcer.style.top=v.docHeight+"px",d.display.gutters.style.height=v.docHeight+d.display.barHeight+gi(d)+"px"}function Vo(d){var v=d.display,w=v.view;if(v.alignWidgets||v.gutters.firstChild&&d.options.fixedGutter){for(var T=Mr(v)-v.scroller.scrollLeft+d.doc.scrollLeft,R=v.gutters.offsetWidth,H=T+"px",J=0;J<w.length;J++)if(!w[J].hidden){d.options.fixedGutter&&(w[J].gutter&&(w[J].gutter.style.left=H),w[J].gutterBackground&&(w[J].gutterBackground.style.left=H));var oe=w[J].alignable;if(oe)for(var pe=0;pe<oe.length;pe++)oe[pe].style.left=H}d.options.fixedGutter&&(v.gutters.style.left=T+R+"px")}}function Sc(d){if(!d.options.lineNumbers)return!1;var v=d.doc,w=ss(d.options,v.first+v.size-1),T=d.display;if(w.length!=T.lineNumChars){var R=T.measure.appendChild(Pe("div",[Pe("div",w)],"CodeMirror-linenumber CodeMirror-gutter-elt")),H=R.firstChild.offsetWidth,J=R.offsetWidth-H;return T.lineGutter.style.width="",T.lineNumInnerWidth=Math.max(H,T.lineGutter.offsetWidth-J)+1,T.lineNumWidth=T.lineNumInnerWidth+J,T.lineNumChars=T.lineNumInnerWidth?w.length:-1,T.lineGutter.style.width=T.lineNumWidth+"px",dl(d.display),!0}return!1}function Da(d,v){for(var w=[],T=!1,R=0;R<d.length;R++){var H=d[R],J=null;if("string"!=typeof H&&(J=H.style,H=H.className),"CodeMirror-linenumbers"==H){if(!v)continue;T=!0}w.push({className:H,style:J})}return v&&!T&&w.push({className:"CodeMirror-linenumbers",style:null}),w}function rc(d){var v=d.gutters,w=d.gutterSpecs;dt(v),d.lineGutter=null;for(var T=0;T<w.length;++T){var R=w[T],H=R.className,J=R.style,oe=v.appendChild(Pe("div",null,"CodeMirror-gutter "+H));J&&(oe.style.cssText=J),"CodeMirror-linenumbers"==H&&(d.lineGutter=oe,oe.style.width=(d.lineNumWidth||1)+"px")}v.style.display=w.length?"":"none",dl(d)}function Ya(d){rc(d.display),So(d),Vo(d)}function Ir(d,v,w,T){var R=this;this.input=w,R.scrollbarFiller=Pe("div",null,"CodeMirror-scrollbar-filler"),R.scrollbarFiller.setAttribute("cm-not-content","true"),R.gutterFiller=Pe("div",null,"CodeMirror-gutter-filler"),R.gutterFiller.setAttribute("cm-not-content","true"),R.lineDiv=Re("div",null,"CodeMirror-code"),R.selectionDiv=Pe("div",null,null,"position: relative; z-index: 1"),R.cursorDiv=Pe("div",null,"CodeMirror-cursors"),R.measure=Pe("div",null,"CodeMirror-measure"),R.lineMeasure=Pe("div",null,"CodeMirror-measure"),R.lineSpace=Re("div",[R.measure,R.lineMeasure,R.selectionDiv,R.cursorDiv,R.lineDiv],null,"position: relative; outline: none");var H=Re("div",[R.lineSpace],"CodeMirror-lines");R.mover=Pe("div",[H],null,"position: relative"),R.sizer=Pe("div",[R.mover],"CodeMirror-sizer"),R.sizerWidth=null,R.heightForcer=Pe("div",null,null,"position: absolute; height: 50px; width: 1px;"),R.gutters=Pe("div",null,"CodeMirror-gutters"),R.lineGutter=null,R.scroller=Pe("div",[R.sizer,R.heightForcer,R.gutters],"CodeMirror-scroll"),R.scroller.setAttribute("tabIndex","-1"),R.wrapper=Pe("div",[R.scrollbarFiller,R.gutterFiller,R.scroller],"CodeMirror"),R.wrapper.setAttribute("translate","no"),n&&a<8&&(R.gutters.style.zIndex=-1,R.scroller.style.paddingRight=0),!f&&!(O&&st)&&(R.scroller.draggable=!0),d&&(d.appendChild?d.appendChild(R.wrapper):d(R.wrapper)),R.viewFrom=R.viewTo=v.first,R.reportedViewFrom=R.reportedViewTo=v.first,R.view=[],R.renderedView=null,R.externalMeasured=null,R.viewOffset=0,R.lastWrapHeight=R.lastWrapWidth=0,R.updateLineNumbers=null,R.nativeBarWidth=R.barHeight=R.barWidth=0,R.scrollbarsClipped=!1,R.lineNumWidth=R.lineNumInnerWidth=R.lineNumChars=null,R.alignWidgets=!1,R.cachedCharWidth=R.cachedTextHeight=R.cachedPaddingH=null,R.maxLine=null,R.maxLineLength=0,R.maxLineChanged=!1,R.wheelDX=R.wheelDY=R.wheelStartX=R.wheelStartY=null,R.shift=!1,R.selForContextMenu=null,R.activeTouch=null,R.gutterSpecs=Da(T.gutters,T.lineNumbers),rc(R),w.init(R)}eo.prototype.signal=function(d,v){fn(d,v)&&this.events.push(arguments)},eo.prototype.finish=function(){for(var d=0;d<this.events.length;d++)Ni.apply(null,this.events[d])};var Ws=0,Fr=null;function va(d){var v=d.wheelDeltaX,w=d.wheelDeltaY;return null==v&&d.detail&&d.axis==d.HORIZONTAL_AXIS&&(v=d.detail),null==w&&d.detail&&d.axis==d.VERTICAL_AXIS?w=d.detail:null==w&&(w=d.wheelDelta),{x:v,y:w}}function hl(d){var v=va(d);return v.x*=Fr,v.y*=Fr,v}function hu(d,v){var w=va(v),T=w.x,R=w.y,H=Fr;0===v.deltaMode&&(T=v.deltaX,R=v.deltaY,H=1);var J=d.display,oe=J.scroller,Ee=oe.scrollHeight>oe.clientHeight;if(T&&oe.scrollWidth>oe.clientWidth||R&&Ee){if(R&&Ge&&f)e:for(var rt=v.target,Et=J.view;rt!=oe;rt=rt.parentNode)for(var Yt=0;Yt<Et.length;Yt++)if(Et[Yt].node==rt){d.display.currentWheelTarget=rt;break e}if(T&&!O&&!Y&&null!=H)return R&&Ee&&ft(d,Math.max(0,oe.scrollTop+R*H)),ai(d,Math.max(0,oe.scrollLeft+T*H)),(!R||R&&Ee)&&Tn(v),void(J.wheelStartX=null);if(R&&null!=H){var Ht=R*H,di=d.doc.scrollTop,Ei=di+J.wrapper.clientHeight;Ht<0?di=Math.max(0,di+Ht-50):Ei=Math.min(d.doc.height,Ei+Ht+50),uu(d,{top:di,bottom:Ei})}Ws<20&&0!==v.deltaMode&&(null==J.wheelStartX?(J.wheelStartX=oe.scrollLeft,J.wheelStartY=oe.scrollTop,J.wheelDX=T,J.wheelDY=R,setTimeout(function(){if(null!=J.wheelStartX){var Ii=oe.scrollLeft-J.wheelStartX,Gi=oe.scrollTop-J.wheelStartY,Qi=Gi&&J.wheelDY&&Gi/J.wheelDY||Ii&&J.wheelDX&&Ii/J.wheelDX;J.wheelStartX=J.wheelStartY=null,Qi&&(Fr=(Fr*Ws+Qi)/(Ws+1),++Ws)}},200)):(J.wheelDX+=T,J.wheelDY+=R))}}n?Fr=-.53:O?Fr=15:I?Fr=-.7:ee&&(Fr=-1/3);var Br=function(d,v){this.ranges=d,this.primIndex=v};Br.prototype.primary=function(){return this.ranges[this.primIndex]},Br.prototype.equals=function(d){if(d==this)return!0;if(d.primIndex!=this.primIndex||d.ranges.length!=this.ranges.length)return!1;for(var v=0;v<this.ranges.length;v++){var w=this.ranges[v],T=d.ranges[v];if(!yn(w.anchor,T.anchor)||!yn(w.head,T.head))return!1}return!0},Br.prototype.deepCopy=function(){for(var d=[],v=0;v<this.ranges.length;v++)d[v]=new Ts(Le(this.ranges[v].anchor),Le(this.ranges[v].head));return new Br(d,this.primIndex)},Br.prototype.somethingSelected=function(){for(var d=0;d<this.ranges.length;d++)if(!this.ranges[d].empty())return!0;return!1},Br.prototype.contains=function(d,v){v||(v=d);for(var w=0;w<this.ranges.length;w++){var T=this.ranges[w];if(ln(v,T.from())>=0&&ln(d,T.to())<=0)return w}return-1};var Ts=function(d,v){this.anchor=d,this.head=v};function Hr(d,v,w){var T=d&&d.options.selectionsMayTouch,R=v[w];v.sort(function(Yt,Ht){return ln(Yt.from(),Ht.from())}),w=ti(v,R);for(var H=1;H<v.length;H++){var J=v[H],oe=v[H-1],pe=ln(oe.to(),J.from());if(T&&!J.empty()?pe>0:pe>=0){var Ee=ri(oe.from(),J.from()),rt=pt(oe.to(),J.to()),Et=oe.empty()?J.from()==J.head:oe.from()==oe.head;H<=w&&--w,v.splice(--H,2,new Ts(Et?rt:Ee,Et?Ee:rt))}}return new Br(v,w)}function Pl(d,v){return new Br([new Ts(d,v||d)],0)}function Xa(d){return d.text?_i(d.from.line+d.text.length-1,de(d.text).length+(1==d.text.length?d.from.ch:0)):d.to}function Vr(d,v){if(ln(d,v.from)<0)return d;if(ln(d,v.to)<=0)return Xa(v);var w=d.line+v.text.length-(v.to.line-v.from.line)-1,T=d.ch;return d.line==v.to.line&&(T+=Xa(v).ch-v.to.ch),_i(w,T)}function pl(d,v){for(var w=[],T=0;T<d.sel.ranges.length;T++){var R=d.sel.ranges[T];w.push(new Ts(Vr(R.anchor,v),Vr(R.head,v)))}return Hr(d.cm,w,d.sel.primIndex)}function Nl(d,v,w){return d.line==v.line?_i(w.line,d.ch-v.ch+w.ch):_i(w.line+(d.line-v.line),d.ch)}function Ur(d){d.doc.mode=Ls(d.options,d.doc.modeOption),Fl(d)}function Fl(d){d.doc.iter(function(v){v.stateAfter&&(v.stateAfter=null),v.styles&&(v.styles=null)}),d.doc.modeFrontier=d.doc.highlightFrontier=d.doc.first,Ll(d,100),d.state.modeGen++,d.curOp&&So(d)}function Fc(d,v){return 0==v.from.ch&&0==v.to.ch&&""==de(v.text)&&(!d.cm||d.cm.options.wholeLineUpdateBefore)}function Bl(d,v,w,T){function R(Qi){return w?w[Qi]:null}function H(Qi,Pi,qi){(function(d,v,w,T){d.text=v,d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null),null!=d.order&&(d.order=null),$r(d),Jr(d,w);var R=T?T(d):1;R!=d.height&&fs(d,R)})(Qi,Pi,qi,T),zn(Qi,"change",Qi,v)}function J(Qi,Pi){for(var qi=[],bn=Qi;bn<Pi;++bn)qi.push(new ko(Ee[bn],R(bn),T));return qi}var oe=v.from,pe=v.to,Ee=v.text,rt=ii(d,oe.line),Et=ii(d,pe.line),Yt=de(Ee),Ht=R(Ee.length-1),di=pe.line-oe.line;if(v.full)d.insert(0,J(0,Ee.length)),d.remove(Ee.length,d.size-Ee.length);else if(Fc(d,v)){var Ei=J(0,Ee.length-1);H(Et,Et.text,Ht),di&&d.remove(oe.line,di),Ei.length&&d.insert(oe.line,Ei)}else if(rt==Et)if(1==Ee.length)H(rt,rt.text.slice(0,oe.ch)+Yt+rt.text.slice(pe.ch),Ht);else{var Ii=J(1,Ee.length-1);Ii.push(new ko(Yt+rt.text.slice(pe.ch),Ht,T)),H(rt,rt.text.slice(0,oe.ch)+Ee[0],R(0)),d.insert(oe.line+1,Ii)}else if(1==Ee.length)H(rt,rt.text.slice(0,oe.ch)+Ee[0]+Et.text.slice(pe.ch),R(0)),d.remove(oe.line+1,di);else{H(rt,rt.text.slice(0,oe.ch)+Ee[0],R(0)),H(Et,Yt+Et.text.slice(pe.ch),Ht);var Gi=J(1,Ee.length-1);di>1&&d.remove(oe.line+1,di-1),d.insert(oe.line+1,Gi)}zn(d,"change",d,v)}function Ka(d,v,w){!function T(R,H,J){if(R.linked)for(var oe=0;oe<R.linked.length;++oe){var pe=R.linked[oe];if(pe.doc!=H){var Ee=J&&pe.sharedHist;w&&!Ee||(v(pe.doc,Ee),T(pe.doc,R,Ee))}}}(d,null,!0)}function xs(d,v){if(v.cm)throw new Error("This document is already in use.");d.doc=v,v.cm=d,rl(d),Ur(d),ac(d),d.options.direction=v.direction,d.options.lineWrapping||Ta(d),d.options.mode=v.modeOption,So(d)}function ac(d){("rtl"==d.doc.direction?Be:Qe)(d.display.lineDiv,"CodeMirror-rtl")}function fl(d){this.done=[],this.undone=[],this.undoDepth=d?d.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=d?d.maxGeneration:1}function pu(d,v){var w={from:Le(v.from),to:Xa(v),text:gn(d,v.from,v.to)};return fu(d,w,v.from.line,v.to.line+1),Ka(d,function(T){return fu(T,w,v.from.line,v.to.line+1)},!0),w}function yr(d){for(;d.length&&de(d).ranges;)d.pop()}function Dc(d,v,w,T){var R=d.history;R.undone.length=0;var J,oe,H=+new Date;if((R.lastOp==T||R.lastOrigin==v.origin&&v.origin&&("+"==v.origin.charAt(0)&&R.lastModTime>H-(d.cm?d.cm.options.historyEventDelay:500)||"*"==v.origin.charAt(0)))&&(J=function(d,v){return v?(yr(d.done),de(d.done)):d.done.length&&!de(d.done).ranges?de(d.done):d.done.length>1&&!d.done[d.done.length-2].ranges?(d.done.pop(),de(d.done)):void 0}(R,R.lastOp==T)))oe=de(J.changes),0==ln(v.from,v.to)&&0==ln(v.from,oe.to)?oe.to=Xa(v):J.changes.push(pu(d,v));else{var pe=de(R.done);for((!pe||!pe.ranges)&&Hc(d.sel,R.done),J={changes:[pu(d,v)],generation:R.generation},R.done.push(J);R.done.length>R.undoDepth;)R.done.shift(),R.done[0].ranges||R.done.shift()}R.done.push(w),R.generation=++R.maxGeneration,R.lastModTime=R.lastSelTime=H,R.lastOp=R.lastSelOp=T,R.lastOrigin=R.lastSelOrigin=v.origin,oe||Ni(d,"historyAdded")}function ku(d,v,w,T){var R=d.history,H=T&&T.origin;w==R.lastSelOp||H&&R.lastSelOrigin==H&&(R.lastModTime==R.lastSelTime&&R.lastOrigin==H||function(d,v,w,T){var R=v.charAt(0);return"*"==R||"+"==R&&w.ranges.length==T.ranges.length&&w.somethingSelected()==T.somethingSelected()&&new Date-d.history.lastSelTime<=(d.cm?d.cm.options.historyEventDelay:500)}(d,H,de(R.done),v))?R.done[R.done.length-1]=v:Hc(v,R.done),R.lastSelTime=+new Date,R.lastSelOrigin=H,R.lastSelOp=w,T&&!1!==T.clearRedo&&yr(R.undone)}function Hc(d,v){var w=de(v);w&&w.ranges&&w.equals(d)||v.push(d)}function fu(d,v,w,T){var R=v["spans_"+d.id],H=0;d.iter(Math.max(d.first,w),Math.min(d.first+d.size,T),function(J){J.markedSpans&&((R||(R=v["spans_"+d.id]={}))[H]=J.markedSpans),++H})}function Vl(d){if(!d)return null;for(var v,w=0;w<d.length;++w)d[w].marker.explicitlyCleared?v||(v=d.slice(0,w)):v&&v.push(d[w]);return v?v.length?v:null:d}function ml(d,v){var w=function(d,v){var w=v["spans_"+d.id];if(!w)return null;for(var T=[],R=0;R<v.text.length;++R)T.push(Vl(w[R]));return T}(d,v),T=Oa(d,v);if(!w)return T;if(!T)return w;for(var R=0;R<w.length;++R){var H=w[R],J=T[R];if(H&&J)e:for(var oe=0;oe<J.length;++oe){for(var pe=J[oe],Ee=0;Ee<H.length;++Ee)if(H[Ee].marker==pe.marker)continue e;H.push(pe)}else J&&(w[R]=J)}return w}function Ul(d,v,w){for(var T=[],R=0;R<d.length;++R){var H=d[R];if(H.ranges)T.push(w?Br.prototype.deepCopy.call(H):H);else{var J=H.changes,oe=[];T.push({changes:oe});for(var pe=0;pe<J.length;++pe){var Ee=J[pe],rt=void 0;if(oe.push({from:Ee.from,to:Ee.to,text:Ee.text}),v)for(var Et in Ee)(rt=Et.match(/^spans_(\d+)$/))&&ti(v,Number(rt[1]))>-1&&(de(oe)[Et]=Ee[Et],delete Ee[Et])}}}return T}function Mo(d,v,w,T){if(T){var R=d.anchor;if(w){var H=ln(v,R)<0;H!=ln(w,R)<0?(R=v,v=w):H!=ln(v,w)<0&&(v=w)}return new Ts(R,v)}return new Ts(w||v,v)}function lc(d,v,w,T,R){null==R&&(R=d.cm&&(d.cm.display.shift||d.extend)),dr(d,new Br([Mo(d.sel.primary(),v,w,R)],0),T)}function _l(d,v,w){for(var T=[],R=d.cm&&(d.cm.display.shift||d.extend),H=0;H<d.sel.ranges.length;H++)T[H]=Mo(d.sel.ranges[H],v[H],null,R);dr(d,Hr(d.cm,T,d.sel.primIndex),w)}function vl(d,v,w,T){var R=d.sel.ranges.slice(0);R[v]=w,dr(d,Hr(d.cm,R,d.sel.primIndex),T)}function Gl(d,v,w,T){dr(d,Pl(v,w),T)}function xc(d,v,w){var T=d.history.done,R=de(T);R&&R.ranges?(T[T.length-1]=v,$a(d,v,w)):dr(d,v,w)}function dr(d,v,w){$a(d,v,w),ku(d,d.sel,d.cm?d.cm.curOp.id:NaN,w)}function $a(d,v,w){(fn(d,"beforeSelectionChange")||d.cm&&fn(d.cm,"beforeSelectionChange"))&&(v=function(d,v,w){var T={ranges:v.ranges,update:function(R){this.ranges=[];for(var H=0;H<R.length;H++)this.ranges[H]=new Ts(Ti(d,R[H].anchor),Ti(d,R[H].head))},origin:w&&w.origin};return Ni(d,"beforeSelectionChange",d,T),d.cm&&Ni(d.cm,"beforeSelectionChange",d.cm,T),T.ranges!=v.ranges?Hr(d.cm,T.ranges,T.ranges.length-1):v}(d,v,w));var T=w&&w.bias||(ln(v.primary().head,d.sel.primary().head)<0?-1:1);bl(d,Gr(d,v,T,!0)),(!w||!1!==w.scroll)&&d.cm&&"nocursor"!=d.cm.getOption("readOnly")&&K(d.cm)}function bl(d,v){v.equals(d.sel)||(d.sel=v,d.cm&&(d.cm.curOp.updateInput=1,d.cm.curOp.selectionChanged=!0,Mi(d.cm)),zn(d,"cursorActivity",d))}function Vc(d){bl(d,Gr(d,d.sel,null,!1))}function Gr(d,v,w,T){for(var R,H=0;H<v.ranges.length;H++){var J=v.ranges[H],oe=v.ranges.length==d.sel.ranges.length&&d.sel.ranges[H],pe=yl(d,J.anchor,oe&&oe.anchor,w,T),Ee=yl(d,J.head,oe&&oe.head,w,T);(R||pe!=J.anchor||Ee!=J.head)&&(R||(R=v.ranges.slice(0,H)),R[H]=new Ts(pe,Ee))}return R?Hr(d.cm,R,v.primIndex):v}function ba(d,v,w,T,R){var H=ii(d,v.line);if(H.markedSpans)for(var J=0;J<H.markedSpans.length;++J){var oe=H.markedSpans[J],pe=oe.marker,Ee="selectLeft"in pe?!pe.selectLeft:pe.inclusiveLeft,rt="selectRight"in pe?!pe.selectRight:pe.inclusiveRight;if((null==oe.from||(Ee?oe.from<=v.ch:oe.from<v.ch))&&(null==oe.to||(rt?oe.to>=v.ch:oe.to>v.ch))){if(R&&(Ni(pe,"beforeCursorEnter"),pe.explicitlyCleared)){if(H.markedSpans){--J;continue}break}if(!pe.atomic)continue;if(w){var Et=pe.find(T<0?1:-1),Yt=void 0;if((T<0?rt:Ee)&&(Et=Wl(d,Et,-T,Et&&Et.line==v.line?H:null)),Et&&Et.line==v.line&&(Yt=ln(Et,w))&&(T<0?Yt<0:Yt>0))return ba(d,Et,v,T,R)}var Ht=pe.find(T<0?-1:1);return(T<0?Ee:rt)&&(Ht=Wl(d,Ht,T,Ht.line==v.line?H:null)),Ht?ba(d,Ht,v,T,R):null}}return v}function yl(d,v,w,T,R){var H=T||1;return ba(d,v,w,H,R)||!R&&ba(d,v,w,H,!0)||ba(d,v,w,-H,R)||!R&&ba(d,v,w,-H,!0)||(d.cantEdit=!0,_i(d.first,0))}function Wl(d,v,w,T){return w<0&&0==v.ch?v.line>d.first?Ti(d,_i(v.line-1)):null:w>0&&v.ch==(T||ii(d,v.line)).text.length?v.line<d.first+d.size-1?_i(v.line+1,0):null:new _i(v.line,v.ch+w)}function cc(d){d.setSelection(_i(d.firstLine(),0),_i(d.lastLine()),Lt)}function Ic(d,v,w){var T={canceled:!1,from:v.from,to:v.to,text:v.text,origin:v.origin,cancel:function(){return T.canceled=!0}};return w&&(T.update=function(R,H,J,oe){R&&(T.from=Ti(d,R)),H&&(T.to=Ti(d,H)),J&&(T.text=J),void 0!==oe&&(T.origin=oe)}),Ni(d,"beforeChange",d,T),d.cm&&Ni(d.cm,"beforeChange",d.cm,T),T.canceled?(d.cm&&(d.cm.curOp.updateInput=2),null):{from:T.from,to:T.to,text:T.text,origin:T.origin}}function Wr(d,v,w){if(d.cm){if(!d.cm.curOp)return Do(d.cm,Wr)(d,v,w);if(d.cm.state.suppressEdits)return}if(!(fn(d,"beforeChange")||d.cm&&fn(d.cm,"beforeChange"))||(v=Ic(d,v,!0))){var T=vo&&!w&&function(d,v,w){var T=null;if(d.iter(v.line,w.line+1,function(Ht){if(Ht.markedSpans)for(var di=0;di<Ht.markedSpans.length;++di){var Ei=Ht.markedSpans[di].marker;Ei.readOnly&&(!T||-1==ti(T,Ei))&&(T||(T=[])).push(Ei)}}),!T)return null;for(var R=[{from:v,to:w}],H=0;H<T.length;++H)for(var J=T[H],oe=J.find(0),pe=0;pe<R.length;++pe){var Ee=R[pe];if(!(ln(Ee.to,oe.from)<0||ln(Ee.from,oe.to)>0)){var rt=[pe,1],Et=ln(Ee.from,oe.from),Yt=ln(Ee.to,oe.to);(Et<0||!J.inclusiveLeft&&!Et)&&rt.push({from:Ee.from,to:oe.from}),(Yt>0||!J.inclusiveRight&&!Yt)&&rt.push({from:oe.to,to:Ee.to}),R.splice.apply(R,rt),pe+=rt.length-3}}return R}(d,v.from,v.to);if(T)for(var R=T.length-1;R>=0;--R)Lu(d,{from:T[R].from,to:T[R].to,text:R?[""]:v.text,origin:v.origin});else Lu(d,v)}}function Lu(d,v){if(1!=v.text.length||""!=v.text[0]||0!=ln(v.from,v.to)){var w=pl(d,v);Dc(d,v,w,d.cm?d.cm.curOp.id:NaN),jl(d,v,w,Oa(d,v));var T=[];Ka(d,function(R,H){!H&&-1==ti(T,R.history)&&(mu(R.history,v),T.push(R.history)),jl(R,v,null,Oa(R,v))})}}function Ja(d,v,w){var T=d.cm&&d.cm.state.suppressEdits;if(!T||w){for(var H,R=d.history,J=d.sel,oe="undo"==v?R.done:R.undone,pe="undo"==v?R.undone:R.done,Ee=0;Ee<oe.length&&(H=oe[Ee],!(w?H.ranges&&!H.equals(d.sel):!H.ranges));Ee++);if(Ee!=oe.length){for(R.lastOrigin=R.lastSelOrigin=null;;){if(!(H=oe.pop()).ranges){if(T)return void oe.push(H);break}if(Hc(H,pe),w&&!H.equals(d.sel))return void dr(d,H,{clearRedo:!1});J=H}var rt=[];Hc(J,pe),pe.push({changes:rt,generation:R.generation}),R.generation=H.generation||++R.maxGeneration;for(var Et=fn(d,"beforeChange")||d.cm&&fn(d.cm,"beforeChange"),Yt=function(Ei){var Ii=H.changes[Ei];if(Ii.origin=v,Et&&!Ic(d,Ii,!1))return oe.length=0,{};rt.push(pu(d,Ii));var Gi=Ei?pl(d,Ii):de(oe);jl(d,Ii,Gi,ml(d,Ii)),!Ei&&d.cm&&d.cm.scrollIntoView({from:Ii.from,to:Xa(Ii)});var Qi=[];Ka(d,function(Pi,qi){!qi&&-1==ti(Qi,Pi.history)&&(mu(Pi.history,Ii),Qi.push(Pi.history)),jl(Pi,Ii,null,ml(Pi,Ii))})},Ht=H.changes.length-1;Ht>=0;--Ht){var di=Yt(Ht);if(di)return di.v}}}}function zl(d,v){if(0!=v&&(d.first+=v,d.sel=new Br(Te(d.sel.ranges,function(R){return new Ts(_i(R.anchor.line+v,R.anchor.ch),_i(R.head.line+v,R.head.ch))}),d.sel.primIndex),d.cm)){So(d.cm,d.first,d.first-v,v);for(var w=d.cm.display,T=w.viewFrom;T<w.viewTo;T++)wa(d.cm,T,"gutter")}}function jl(d,v,w,T){if(d.cm&&!d.cm.curOp)return Do(d.cm,jl)(d,v,w,T);if(v.to.line<d.first)zl(d,v.text.length-1-(v.to.line-v.from.line));else if(!(v.from.line>d.lastLine())){if(v.from.line<d.first){var R=v.text.length-1-(d.first-v.from.line);zl(d,R),v={from:_i(d.first,0),to:_i(v.to.line+R,v.to.ch),text:[de(v.text)],origin:v.origin}}var H=d.lastLine();v.to.line>H&&(v={from:v.from,to:_i(H,ii(d,H).text.length),text:[v.text[0]],origin:v.origin}),v.removed=gn(d,v.from,v.to),w||(w=pl(d,v)),d.cm?function(d,v,w){var T=d.doc,R=d.display,H=v.from,J=v.to,oe=!1,pe=H.line;d.options.lineWrapping||(pe=Zn(so(ii(T,H.line))),T.iter(pe,J.line+1,function(Ht){if(Ht==R.maxLine)return oe=!0,!0})),T.sel.contains(v.from,v.to)>-1&&Mi(d),Bl(T,v,w,Lr(d)),d.options.lineWrapping||(T.iter(pe,H.line+v.text.length,function(Ht){var di=mr(Ht);di>R.maxLineLength&&(R.maxLine=Ht,R.maxLineLength=di,R.maxLineChanged=!0,oe=!1)}),oe&&(d.curOp.updateMaxLine=!0)),function(d,v){if(d.modeFrontier=Math.min(d.modeFrontier,v),!(d.highlightFrontier<v-10)){for(var w=d.first,T=v-1;T>w;T--){var R=ii(d,T).stateAfter;if(R&&(!(R instanceof Sn)||T+R.lookAhead<v)){w=T+1;break}}d.highlightFrontier=Math.min(d.highlightFrontier,w)}}(T,H.line),Ll(d,400);var Ee=v.text.length-(J.line-H.line)-1;v.full?So(d):H.line!=J.line||1!=v.text.length||Fc(d.doc,v)?So(d,H.line,J.line+1,Ee):wa(d,H.line,"text");var rt=fn(d,"changes"),Et=fn(d,"change");if(Et||rt){var Yt={from:H,to:J,text:v.text,removed:v.removed,origin:v.origin};Et&&zn(d,"change",d,Yt),rt&&(d.curOp.changeObjs||(d.curOp.changeObjs=[])).push(Yt)}d.display.selForContextMenu=null}(d.cm,v,T):Bl(d,v,T),$a(d,w,Lt),d.cantEdit&&yl(d,_i(d.firstLine(),0))&&(d.cantEdit=!1)}}function Ma(d,v,w,T,R){var H;T||(T=w),ln(T,w)<0&&(w=(H=[T,w])[0],T=H[1]),"string"==typeof v&&(v=d.splitLines(v)),Wr(d,{from:w,to:T,text:v,origin:R})}function gu(d,v,w,T){w<d.line?d.line+=T:v<d.line&&(d.line=v,d.ch=0)}function Za(d,v,w,T){for(var R=0;R<d.length;++R){var H=d[R],J=!0;if(H.ranges){H.copied||((H=d[R]=H.deepCopy()).copied=!0);for(var oe=0;oe<H.ranges.length;oe++)gu(H.ranges[oe].anchor,v,w,T),gu(H.ranges[oe].head,v,w,T)}else{for(var pe=0;pe<H.changes.length;++pe){var Ee=H.changes[pe];if(w<Ee.from.line)Ee.from=_i(Ee.from.line+T,Ee.from.ch),Ee.to=_i(Ee.to.line+T,Ee.to.ch);else if(v<=Ee.to.line){J=!1;break}}J||(d.splice(0,R+1),R=0)}}}function mu(d,v){var w=v.from.line,T=v.to.line,R=v.text.length-(T-w)-1;Za(d.done,w,T,R),Za(d.undone,w,T,R)}function Yl(d,v,w,T){var R=v,H=v;return"number"==typeof v?H=ii(d,Di(d,v)):R=Zn(v),null==R?null:(T(H,R)&&d.cm&&wa(d.cm,R,w),H)}function Ac(d){this.lines=d,this.parent=null;for(var v=0,w=0;w<d.length;++w)d[w].parent=this,v+=d[w].height;this.height=v}function qa(d){this.children=d;for(var v=0,w=0,T=0;T<d.length;++T){var R=d[T];v+=R.chunkSize(),w+=R.height,R.parent=this}this.size=v,this.height=w,this.parent=null}Ts.prototype.from=function(){return ri(this.anchor,this.head)},Ts.prototype.to=function(){return pt(this.anchor,this.head)},Ts.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ac.prototype={chunkSize:function(){return this.lines.length},removeInner:function(d,v){for(var w=d,T=d+v;w<T;++w){var R=this.lines[w];this.height-=R.height,_r(R),zn(R,"delete")}this.lines.splice(d,v)},collapse:function(d){d.push.apply(d,this.lines)},insertInner:function(d,v,w){this.height+=w,this.lines=this.lines.slice(0,d).concat(v).concat(this.lines.slice(d));for(var T=0;T<v.length;++T)v[T].parent=this},iterN:function(d,v,w){for(var T=d+v;d<T;++d)if(w(this.lines[d]))return!0}},qa.prototype={chunkSize:function(){return this.size},removeInner:function(d,v){this.size-=v;for(var w=0;w<this.children.length;++w){var T=this.children[w],R=T.chunkSize();if(d<R){var H=Math.min(v,R-d),J=T.height;if(T.removeInner(d,H),this.height-=J-T.height,R==H&&(this.children.splice(w--,1),T.parent=null),0==(v-=H))break;d=0}else d-=R}if(this.size-v<25&&(this.children.length>1||!(this.children[0]instanceof Ac))){var oe=[];this.collapse(oe),this.children=[new Ac(oe)],this.children[0].parent=this}},collapse:function(d){for(var v=0;v<this.children.length;++v)this.children[v].collapse(d)},insertInner:function(d,v,w){this.size+=v.length,this.height+=w;for(var T=0;T<this.children.length;++T){var R=this.children[T],H=R.chunkSize();if(d<=H){if(R.insertInner(d,v,w),R.lines&&R.lines.length>50){for(var J=R.lines.length%25+25,oe=J;oe<R.lines.length;){var pe=new Ac(R.lines.slice(oe,oe+=25));R.height-=pe.height,this.children.splice(++T,0,pe),pe.parent=this}R.lines=R.lines.slice(0,J),this.maybeSpill()}break}d-=H}},maybeSpill:function(){if(!(this.children.length<=10)){var d=this;do{var w=new qa(d.children.splice(d.children.length-5,5));if(d.parent){d.size-=w.size,d.height-=w.height;var R=ti(d.parent.children,d);d.parent.children.splice(R+1,0,w)}else{var T=new qa(d.children);T.parent=d,d.children=[T,w],d=T}w.parent=d.parent}while(d.children.length>10);d.parent.maybeSpill()}},iterN:function(d,v,w){for(var T=0;T<this.children.length;++T){var R=this.children[T],H=R.chunkSize();if(d<H){var J=Math.min(v,H-d);if(R.iterN(d,J,w))return!0;if(0==(v-=J))break;d=0}else d-=H}}};var Na=function(d,v,w){if(w)for(var T in w)w.hasOwnProperty(T)&&(this[T]=w[T]);this.doc=d,this.node=v};function Qa(d,v,w){ls(v)<(d.curOp&&d.curOp.scrollTop||d.doc.scrollTop)&&q(d,w)}Na.prototype.clear=function(){var d=this.doc.cm,v=this.line.widgets,w=this.line,T=Zn(w);if(null!=T&&v){for(var R=0;R<v.length;++R)v[R]==this&&v.splice(R--,1);v.length||(w.widgets=null);var H=Me(this);fs(w,Math.max(0,w.height-H)),d&&(Po(d,function(){Qa(d,w,-H),wa(d,T,"widget")}),zn(d,"lineWidgetCleared",d,this,T))}},Na.prototype.changed=function(){var d=this,v=this.height,w=this.doc.cm,T=this.line;this.height=null;var R=Me(this)-v;!R||(ps(this.doc,T)||fs(T,T.height+R),w&&Po(w,function(){w.curOp.forceUpdate=!0,Qa(w,T,R),zn(w,"lineWidgetChanged",w,d,Zn(T))}))},$i(Na);var Uc=0,Ra=function(d,v){this.lines=[],this.type=v,this.doc=d,this.id=++Uc};function zr(d,v,w,T,R){if(T&&T.shared)return function(d,v,w,T,R){(T=At(T)).shared=!1;var H=[zr(d,v,w,T,R)],J=H[0],oe=T.widgetNode;return Ka(d,function(pe){oe&&(T.widgetNode=oe.cloneNode(!0)),H.push(zr(pe,Ti(pe,v),Ti(pe,w),T,R));for(var Ee=0;Ee<pe.linked.length;++Ee)if(pe.linked[Ee].isParent)return;J=de(H)}),new Cl(H,J)}(d,v,w,T,R);if(d.cm&&!d.cm.curOp)return Do(d.cm,zr)(d,v,w,T,R);var H=new Ra(d,R),J=ln(v,w);if(T&&At(T,H,!1),J>0||0==J&&!1!==H.clearWhenEmpty)return H;if(H.replacedWith&&(H.collapsed=!0,H.widgetNode=Re("span",[H.replacedWith],"CodeMirror-widget"),T.handleMouseEvents||H.widgetNode.setAttribute("cm-ignore-events","true"),T.insertLeft&&(H.widgetNode.insertLeft=!0)),H.collapsed){if(co(d,v.line,v,w,H)||v.line!=w.line&&co(d,w.line,v,w,H))throw new Error("Inserting collapsed marker partially overlapping an existing one");Js=!0}H.addToHistory&&Dc(d,{from:v,to:w,origin:"markText"},d.sel,NaN);var Ee,oe=v.line,pe=d.cm;if(d.iter(oe,w.line+1,function(Et){pe&&H.collapsed&&!pe.options.lineWrapping&&so(Et)==pe.display.maxLine&&(Ee=!0),H.collapsed&&oe!=v.line&&fs(Et,0),function(d,v,w){var T=w&&window.WeakSet&&(w.markedSpans||(w.markedSpans=new WeakSet));T&&T.has(d.markedSpans)?d.markedSpans.push(v):(d.markedSpans=d.markedSpans?d.markedSpans.concat([v]):[v],T&&T.add(d.markedSpans)),v.marker.attachLine(d)}(Et,new Kr(H,oe==v.line?v.ch:null,oe==w.line?w.ch:null),d.cm&&d.cm.curOp),++oe}),H.collapsed&&d.iter(v.line,w.line+1,function(Et){ps(d,Et)&&fs(Et,0)}),H.clearOnEnter&&xi(H,"beforeCursorEnter",function(){return H.clear()}),H.readOnly&&(vo=!0,(d.history.done.length||d.history.undone.length)&&d.clearHistory()),H.collapsed&&(H.id=++Uc,H.atomic=!0),pe){if(Ee&&(pe.curOp.updateMaxLine=!0),H.collapsed)So(pe,v.line,w.line+1);else if(H.className||H.startStyle||H.endStyle||H.css||H.attributes||H.title)for(var rt=v.line;rt<=w.line;rt++)wa(pe,rt,"text");H.atomic&&Vc(pe.doc),zn(pe,"markerAdded",pe,H)}return H}Ra.prototype.clear=function(){if(!this.explicitlyCleared){var d=this.doc.cm,v=d&&!d.curOp;if(v&&po(d),fn(this,"clear")){var w=this.find();w&&zn(this,"clear",w.from,w.to)}for(var T=null,R=null,H=0;H<this.lines.length;++H){var J=this.lines[H],oe=bo(J.markedSpans,this);d&&!this.collapsed?wa(d,Zn(J),"text"):d&&(null!=oe.to&&(R=Zn(J)),null!=oe.from&&(T=Zn(J))),J.markedSpans=fr(J.markedSpans,oe),null==oe.from&&this.collapsed&&!ps(this.doc,J)&&d&&fs(J,Dr(d.display))}if(d&&this.collapsed&&!d.options.lineWrapping)for(var pe=0;pe<this.lines.length;++pe){var Ee=so(this.lines[pe]),rt=mr(Ee);rt>d.display.maxLineLength&&(d.display.maxLine=Ee,d.display.maxLineLength=rt,d.display.maxLineChanged=!0)}null!=T&&d&&this.collapsed&&So(d,T,R+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,d&&Vc(d.doc)),d&&zn(d,"markerCleared",d,this,T,R),v&&ra(d),this.parent&&this.parent.clear()}},Ra.prototype.find=function(d,v){null==d&&"bookmark"==this.type&&(d=1);for(var w,T,R=0;R<this.lines.length;++R){var H=this.lines[R],J=bo(H.markedSpans,this);if(null!=J.from&&(w=_i(v?H:Zn(H),J.from),-1==d))return w;if(null!=J.to&&(T=_i(v?H:Zn(H),J.to),1==d))return T}return w&&{from:w,to:T}},Ra.prototype.changed=function(){var d=this,v=this.find(-1,!0),w=this,T=this.doc.cm;!v||!T||Po(T,function(){var R=v.line,H=Zn(v.line),J=kn(T,H);if(J&&(vr(J),T.curOp.selectionChanged=T.curOp.forceUpdate=!0),T.curOp.updateMaxLine=!0,!ps(w.doc,R)&&null!=w.height){var oe=w.height;w.height=null;var pe=Me(w)-oe;pe&&fs(R,R.height+pe)}zn(T,"markerChanged",T,d)})},Ra.prototype.attachLine=function(d){if(!this.lines.length&&this.doc.cm){var v=this.doc.cm.curOp;(!v.maybeHiddenMarkers||-1==ti(v.maybeHiddenMarkers,this))&&(v.maybeUnhiddenMarkers||(v.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(d)},Ra.prototype.detachLine=function(d){if(this.lines.splice(ti(this.lines,d),1),!this.lines.length&&this.doc.cm){var v=this.doc.cm.curOp;(v.maybeHiddenMarkers||(v.maybeHiddenMarkers=[])).push(this)}},$i(Ra);var Cl=function(d,v){this.markers=d,this.primary=v;for(var w=0;w<d.length;++w)d[w].parent=this};function Ba(d){return d.findMarks(_i(d.first,0),d.clipPos(_i(d.lastLine())),function(v){return v.parent})}function Xl(d){for(var v=function(T){var R=d[T],H=[R.primary.doc];Ka(R.primary.doc,function(pe){return H.push(pe)});for(var J=0;J<R.markers.length;J++){var oe=R.markers[J];-1==ti(H,oe.doc)&&(oe.parent=null,R.markers.splice(J--,1))}},w=0;w<d.length;w++)v(w)}Cl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var d=0;d<this.markers.length;++d)this.markers[d].clear();zn(this,"clear")}},Cl.prototype.find=function(d,v){return this.primary.find(d,v)},$i(Cl);var td=0,Uo=function(d,v,w,T,R){if(!(this instanceof Uo))return new Uo(d,v,w,T,R);null==w&&(w=0),qa.call(this,[new Ac([new ko("",null)])]),this.first=w,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=w;var H=_i(w,0);this.sel=Pl(H),this.history=new fl(null),this.id=++td,this.modeOption=v,this.lineSep=T,this.direction="rtl"==R?"rtl":"ltr",this.extend=!1,"string"==typeof d&&(d=this.splitLines(d)),Bl(this,{from:H,to:H,text:d}),dr(this,Pl(H),Lt)};Uo.prototype=Ft(qa.prototype,{constructor:Uo,iter:function(d,v,w){w?this.iterN(d-this.first,v-d,w):this.iterN(this.first,this.first+this.size,d)},insert:function(d,v){for(var w=0,T=0;T<v.length;++T)w+=v[T].height;this.insertInner(d-this.first,v,w)},remove:function(d,v){this.removeInner(d-this.first,v)},getValue:function(d){var v=Wn(this,this.first,this.first+this.size);return!1===d?v:v.join(d||this.lineSeparator())},setValue:Es(function(d){var v=_i(this.first,0),w=this.first+this.size-1;Wr(this,{from:v,to:_i(w,ii(this,w).text.length),text:this.splitLines(d),origin:"setValue",full:!0},!0),this.cm&&j(this.cm,0,0),dr(this,Pl(v),Lt)}),replaceRange:function(d,v,w,T){Ma(this,d,v=Ti(this,v),w=w?Ti(this,w):v,T)},getRange:function(d,v,w){var T=gn(this,Ti(this,d),Ti(this,v));return!1===w?T:T.join(""===w?"":w||this.lineSeparator())},getLine:function(d){var v=this.getLineHandle(d);return v&&v.text},getLineHandle:function(d){if(Ss(this,d))return ii(this,d)},getLineNumber:function(d){return Zn(d)},getLineHandleVisualStart:function(d){return"number"==typeof d&&(d=ii(this,d)),so(d)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(d){return Ti(this,d)},getCursor:function(d){var v=this.sel.primary();return null==d||"head"==d?v.head:"anchor"==d?v.anchor:"end"==d||"to"==d||!1===d?v.to():v.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Es(function(d,v,w){Gl(this,Ti(this,"number"==typeof d?_i(d,v||0):d),null,w)}),setSelection:Es(function(d,v,w){Gl(this,Ti(this,d),Ti(this,v||d),w)}),extendSelection:Es(function(d,v,w){lc(this,Ti(this,d),v&&Ti(this,v),w)}),extendSelections:Es(function(d,v){_l(this,En(this,d),v)}),extendSelectionsBy:Es(function(d,v){_l(this,En(this,Te(this.sel.ranges,d)),v)}),setSelections:Es(function(d,v,w){if(d.length){for(var T=[],R=0;R<d.length;R++)T[R]=new Ts(Ti(this,d[R].anchor),Ti(this,d[R].head||d[R].anchor));null==v&&(v=Math.min(d.length-1,this.sel.primIndex)),dr(this,Hr(this.cm,T,v),w)}}),addSelection:Es(function(d,v,w){var T=this.sel.ranges.slice(0);T.push(new Ts(Ti(this,d),Ti(this,v||d))),dr(this,Hr(this.cm,T,T.length-1),w)}),getSelection:function(d){for(var w,v=this.sel.ranges,T=0;T<v.length;T++){var R=gn(this,v[T].from(),v[T].to());w=w?w.concat(R):R}return!1===d?w:w.join(d||this.lineSeparator())},getSelections:function(d){for(var v=[],w=this.sel.ranges,T=0;T<w.length;T++){var R=gn(this,w[T].from(),w[T].to());!1!==d&&(R=R.join(d||this.lineSeparator())),v[T]=R}return v},replaceSelection:function(d,v,w){for(var T=[],R=0;R<this.sel.ranges.length;R++)T[R]=d;this.replaceSelections(T,v,w||"+input")},replaceSelections:Es(function(d,v,w){for(var T=[],R=this.sel,H=0;H<R.ranges.length;H++){var J=R.ranges[H];T[H]={from:J.from(),to:J.to(),text:this.splitLines(d[H]),origin:w}}for(var oe=v&&"end"!=v&&function(d,v,w){for(var T=[],R=_i(d.first,0),H=R,J=0;J<v.length;J++){var oe=v[J],pe=Nl(oe.from,R,H),Ee=Nl(Xa(oe),R,H);if(R=oe.to,H=Ee,"around"==w){var rt=d.sel.ranges[J],Et=ln(rt.head,rt.anchor)<0;T[J]=new Ts(Et?Ee:pe,Et?pe:Ee)}else T[J]=new Ts(pe,pe)}return new Br(T,d.sel.primIndex)}(this,T,v),pe=T.length-1;pe>=0;pe--)Wr(this,T[pe]);oe?xc(this,oe):this.cm&&K(this.cm)}),undo:Es(function(){Ja(this,"undo")}),redo:Es(function(){Ja(this,"redo")}),undoSelection:Es(function(){Ja(this,"undo",!0)}),redoSelection:Es(function(){Ja(this,"redo",!0)}),setExtending:function(d){this.extend=d},getExtending:function(){return this.extend},historySize:function(){for(var d=this.history,v=0,w=0,T=0;T<d.done.length;T++)d.done[T].ranges||++v;for(var R=0;R<d.undone.length;R++)d.undone[R].ranges||++w;return{undo:v,redo:w}},clearHistory:function(){var d=this;this.history=new fl(this.history),Ka(this,function(v){return v.history=d.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(d){return d&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(d){return this.history.generation==(d||this.cleanGeneration)},getHistory:function(){return{done:Ul(this.history.done),undone:Ul(this.history.undone)}},setHistory:function(d){var v=this.history=new fl(this.history);v.done=Ul(d.done.slice(0),null,!0),v.undone=Ul(d.undone.slice(0),null,!0)},setGutterMarker:Es(function(d,v,w){return Yl(this,d,"gutter",function(T){var R=T.gutterMarkers||(T.gutterMarkers={});return R[v]=w,!w&&Ue(R)&&(T.gutterMarkers=null),!0})}),clearGutter:Es(function(d){var v=this;this.iter(function(w){w.gutterMarkers&&w.gutterMarkers[d]&&Yl(v,w,"gutter",function(){return w.gutterMarkers[d]=null,Ue(w.gutterMarkers)&&(w.gutterMarkers=null),!0})})}),lineInfo:function(d){var v;if("number"==typeof d){if(!(Ss(this,d)&&(v=d,d=ii(this,d))))return null}else if(null==(v=Zn(d)))return null;return{line:v,handle:d,text:d.text,gutterMarkers:d.gutterMarkers,textClass:d.textClass,bgClass:d.bgClass,wrapClass:d.wrapClass,widgets:d.widgets}},addLineClass:Es(function(d,v,w){return Yl(this,d,"gutter"==v?"gutter":"class",function(T){var R="text"==v?"textClass":"background"==v?"bgClass":"gutter"==v?"gutterClass":"wrapClass";if(T[R]){if(Se(w).test(T[R]))return!1;T[R]+=" "+w}else T[R]=w;return!0})}),removeLineClass:Es(function(d,v,w){return Yl(this,d,"gutter"==v?"gutter":"class",function(T){var R="text"==v?"textClass":"background"==v?"bgClass":"gutter"==v?"gutterClass":"wrapClass",H=T[R];if(!H)return!1;if(null==w)T[R]=null;else{var J=H.match(Se(w));if(!J)return!1;var oe=J.index+J[0].length;T[R]=H.slice(0,J.index)+(J.index&&oe!=H.length?" ":"")+H.slice(oe)||null}return!0})}),addLineWidget:Es(function(d,v,w){return function(d,v,w,T){var R=new Na(d,w,T),H=d.cm;return H&&R.noHScroll&&(H.display.alignWidgets=!0),Yl(d,v,"widget",function(J){var oe=J.widgets||(J.widgets=[]);if(null==R.insertAt?oe.push(R):oe.splice(Math.min(oe.length,Math.max(0,R.insertAt)),0,R),R.line=J,H&&!ps(d,J)){var pe=ls(J)<d.scrollTop;fs(J,J.height+Me(R)),pe&&q(H,R.height),H.curOp.forceUpdate=!0}return!0}),H&&zn(H,"lineWidgetAdded",H,R,"number"==typeof v?v:Zn(v)),R}(this,d,v,w)}),removeLineWidget:function(d){d.clear()},markText:function(d,v,w){return zr(this,Ti(this,d),Ti(this,v),w,w&&w.type||"range")},setBookmark:function(d,v){var w={replacedWith:v&&(null==v.nodeType?v.widget:v),insertLeft:v&&v.insertLeft,clearWhenEmpty:!1,shared:v&&v.shared,handleMouseEvents:v&&v.handleMouseEvents};return zr(this,d=Ti(this,d),d,w,"bookmark")},findMarksAt:function(d){var v=[],w=ii(this,(d=Ti(this,d)).line).markedSpans;if(w)for(var T=0;T<w.length;++T){var R=w[T];(null==R.from||R.from<=d.ch)&&(null==R.to||R.to>=d.ch)&&v.push(R.marker.parent||R.marker)}return v},findMarks:function(d,v,w){d=Ti(this,d),v=Ti(this,v);var T=[],R=d.line;return this.iter(d.line,v.line+1,function(H){var J=H.markedSpans;if(J)for(var oe=0;oe<J.length;oe++){var pe=J[oe];!(null!=pe.to&&R==d.line&&d.ch>=pe.to||null==pe.from&&R!=d.line||null!=pe.from&&R==v.line&&pe.from>=v.ch)&&(!w||w(pe.marker))&&T.push(pe.marker.parent||pe.marker)}++R}),T},getAllMarks:function(){var d=[];return this.iter(function(v){var w=v.markedSpans;if(w)for(var T=0;T<w.length;++T)null!=w[T].from&&d.push(w[T].marker)}),d},posFromIndex:function(d){var v,w=this.first,T=this.lineSeparator().length;return this.iter(function(R){var H=R.text.length+T;if(H>d)return v=d,!0;d-=H,++w}),Ti(this,_i(w,v))},indexFromPos:function(d){var v=(d=Ti(this,d)).ch;if(d.line<this.first||d.ch<0)return 0;var w=this.lineSeparator().length;return this.iter(this.first,d.line,function(T){v+=T.text.length+w}),v},copy:function(d){var v=new Uo(Wn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return v.scrollTop=this.scrollTop,v.scrollLeft=this.scrollLeft,v.sel=this.sel,v.extend=!1,d&&(v.history.undoDepth=this.history.undoDepth,v.setHistory(this.getHistory())),v},linkedDoc:function(d){d||(d={});var v=this.first,w=this.first+this.size;null!=d.from&&d.from>v&&(v=d.from),null!=d.to&&d.to<w&&(w=d.to);var T=new Uo(Wn(this,v,w),d.mode||this.modeOption,v,this.lineSep,this.direction);return d.sharedHist&&(T.history=this.history),(this.linked||(this.linked=[])).push({doc:T,sharedHist:d.sharedHist}),T.linked=[{doc:this,isParent:!0,sharedHist:d.sharedHist}],function(d,v){for(var w=0;w<v.length;w++){var T=v[w],R=T.find(),H=d.clipPos(R.from),J=d.clipPos(R.to);if(ln(H,J)){var oe=zr(d,H,J,T.primary,T.primary.type);T.markers.push(oe),oe.parent=T}}}(T,Ba(this)),T},unlinkDoc:function(d){if(d instanceof go&&(d=d.doc),this.linked)for(var v=0;v<this.linked.length;++v)if(this.linked[v].doc==d){this.linked.splice(v,1),d.unlinkDoc(this),Xl(Ba(this));break}if(d.history==this.history){var T=[d.id];Ka(d,function(R){return T.push(R.id)},!0),d.history=new fl(null),d.history.done=Ul(this.history.done,T),d.history.undone=Ul(this.history.undone,T)}},iterLinkedDocs:function(d){Ka(this,d)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(d){return this.lineSep?d.split(this.lineSep):$n(d)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Es(function(d){"rtl"!=d&&(d="ltr"),d!=this.direction&&(this.direction=d,this.iter(function(v){return v.order=null}),this.cm&&function(d){Po(d,function(){ac(d),So(d)})}(this.cm))})}),Uo.prototype.eachLine=Uo.prototype.iter;var uc=0;function ie(d){var v=this;if(nt(v),!Zi(v,d)&&!$e(v.display,d)){Tn(d),n&&(uc=+new Date);var w=za(v,d,!0),T=d.dataTransfer.files;if(w&&!v.isReadOnly())if(T&&T.length&&window.FileReader&&window.File)for(var R=T.length,H=Array(R),J=0,oe=function(){++J==R&&Do(v,function(){var Ht={from:w=Ti(v.doc,w),to:w,text:v.doc.splitLines(H.filter(function(di){return null!=di}).join(v.doc.lineSeparator())),origin:"paste"};Wr(v.doc,Ht),xc(v.doc,Pl(Ti(v.doc,w),Ti(v.doc,Xa(Ht))))})()},pe=function(Ht,di){if(v.options.allowDropFileTypes&&-1==ti(v.options.allowDropFileTypes,Ht.type))oe();else{var Ei=new FileReader;Ei.onerror=function(){return oe()},Ei.onload=function(){var Ii=Ei.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Ii)||(H[di]=Ii),oe()},Ei.readAsText(Ht)}},Ee=0;Ee<T.length;Ee++)pe(T[Ee],Ee);else{if(v.state.draggingText&&v.doc.sel.contains(w)>-1)return v.state.draggingText(d),void setTimeout(function(){return v.display.input.focus()},20);try{var rt=d.dataTransfer.getData("Text");if(rt){var Et;if(v.state.draggingText&&!v.state.draggingText.copy&&(Et=v.listSelections()),$a(v.doc,Pl(w,w)),Et)for(var Yt=0;Yt<Et.length;++Yt)Ma(v.doc,"",Et[Yt].anchor,Et[Yt].head,"drag");v.replaceSelection(rt,"around","paste"),v.display.input.focus()}}catch(Ht){}}}}function nt(d){d.display.dragCursor&&(d.display.lineSpace.removeChild(d.display.dragCursor),d.display.dragCursor=null)}function gt(d){if(document.getElementsByClassName){for(var v=document.getElementsByClassName("CodeMirror"),w=[],T=0;T<v.length;T++){var R=v[T].CodeMirror;R&&w.push(R)}w.length&&w[0].operation(function(){for(var H=0;H<w.length;H++)d(w[H])})}}var zt=!1;function Dt(){zt||(function(){var d;xi(window,"resize",function(){null==d&&(d=setTimeout(function(){d=null,gt(ci)},100))}),xi(window,"blur",function(){return gt(na)})}(),zt=!0)}function ci(d){var v=d.display;v.cachedCharWidth=v.cachedTextHeight=v.cachedPaddingH=null,v.scrollbarsClipped=!1,d.setSize()}for(var oi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},vi=0;vi<10;vi++)oi[vi+48]=oi[vi+96]=String(vi);for(var Rn=65;Rn<=90;Rn++)oi[Rn]=String.fromCharCode(Rn);for(var vn=1;vn<=12;vn++)oi[vn+111]=oi[vn+63235]="F"+vn;var In={};function fo(d){var v=d.split(/-(?!$)/);d=v[v.length-1];for(var w,T,R,H,J=0;J<v.length-1;J++){var oe=v[J];if(/^(cmd|meta|m)$/i.test(oe))H=!0;else if(/^a(lt)?$/i.test(oe))w=!0;else if(/^(c|ctrl|control)$/i.test(oe))T=!0;else{if(!/^s(hift)?$/i.test(oe))throw new Error("Unrecognized modifier name: "+oe);R=!0}}return w&&(d="Alt-"+d),T&&(d="Ctrl-"+d),H&&(d="Cmd-"+d),R&&(d="Shift-"+d),d}function Xs(d){var v={};for(var w in d)if(d.hasOwnProperty(w)){var T=d[w];if(/^(name|fallthrough|(de|at)tach)$/.test(w))continue;if("..."==T){delete d[w];continue}for(var R=Te(w.split(" "),fo),H=0;H<R.length;H++){var J=void 0,oe=void 0;H==R.length-1?(oe=R.join(" "),J=T):(oe=R.slice(0,H+1).join(" "),J="...");var pe=v[oe];if(pe){if(pe!=J)throw new Error("Inconsistent bindings for "+oe)}else v[oe]=J}delete d[w]}for(var Ee in v)d[Ee]=v[Ee];return d}function ws(d,v,w,T){var R=(v=Yo(v)).call?v.call(d,T):v[d];if(!1===R)return"nothing";if("..."===R)return"multi";if(null!=R&&w(R))return"handled";if(v.fallthrough){if("[object Array]"!=Object.prototype.toString.call(v.fallthrough))return ws(d,v.fallthrough,w,T);for(var H=0;H<v.fallthrough.length;H++){var J=ws(d,v.fallthrough[H],w,T);if(J)return J}}}function Is(d){var v="string"==typeof d?d:oi[d.keyCode];return"Ctrl"==v||"Alt"==v||"Shift"==v||"Mod"==v}function to(d,v,w){var T=d;return v.altKey&&"Alt"!=T&&(d="Alt-"+d),(tt?v.metaKey:v.ctrlKey)&&"Ctrl"!=T&&(d="Ctrl-"+d),(tt?v.ctrlKey:v.metaKey)&&"Mod"!=T&&(d="Cmd-"+d),!w&&v.shiftKey&&"Shift"!=T&&(d="Shift-"+d),d}function As(d,v){if(Y&&34==d.keyCode&&d.char)return!1;var w=oi[d.keyCode];return null!=w&&!d.altGraphKey&&(3==d.keyCode&&d.code&&(w=d.code),to(w,d,v))}function Yo(d){return"string"==typeof d?In[d]:d}function hr(d,v){for(var w=d.doc.sel.ranges,T=[],R=0;R<w.length;R++){for(var H=v(w[R]);T.length&&ln(H.from,de(T).to)<=0;){var J=T.pop();if(ln(J.from,H.from)<0){H.from=J.from;break}}T.push(H)}Po(d,function(){for(var oe=T.length-1;oe>=0;oe--)Ma(d.doc,"",T[oe].from,T[oe].to,"+delete");K(d)})}function ya(d,v,w){var T=Ie(d.text,v+w,w);return T<0||T>d.text.length?null:T}function Ha(d,v,w){var T=ya(d,v.ch,w);return null==T?null:new _i(v.line,T,w<0?"after":"before")}function Gc(d,v,w,T,R){if(d){"rtl"==v.doc.direction&&(R=-R);var H=ni(w,v.doc.direction);if(H){var Ee,J=R<0?de(H):H[0],pe=R<0==(1==J.level)?"after":"before";if(J.level>0||"rtl"==v.doc.direction){var rt=rs(v,w),Et=Cs(v,rt,Ee=R<0?w.text.length-1:0).top;Ee=Xe(function(Yt){return Cs(v,rt,Yt).top==Et},R<0==(1==J.level)?J.from:J.to-1,Ee),"before"==pe&&(Ee=ya(w,Ee,1))}else Ee=R<0?J.to:J.from;return new _i(T,Ee,pe)}}return new _i(T,R<0?w.text.length:0,R<0?"before":"after")}In.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},In.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},In.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},In.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},In.default=Ge?In.macDefault:In.pcDefault;var bu={selectAll:cc,singleSelection:function(d){return d.setSelection(d.getCursor("anchor"),d.getCursor("head"),Lt)},killLine:function(d){return hr(d,function(v){if(v.empty()){var w=ii(d.doc,v.head.line).text.length;return v.head.ch==w&&v.head.line<d.lastLine()?{from:v.head,to:_i(v.head.line+1,0)}:{from:v.head,to:_i(v.head.line,w)}}return{from:v.from(),to:v.to()}})},deleteLine:function(d){return hr(d,function(v){return{from:_i(v.from().line,0),to:Ti(d.doc,_i(v.to().line+1,0))}})},delLineLeft:function(d){return hr(d,function(v){return{from:_i(v.from().line,0),to:v.from()}})},delWrappedLineLeft:function(d){return hr(d,function(v){var w=d.charCoords(v.head,"div").top+5;return{from:d.coordsChar({left:0,top:w},"div"),to:v.from()}})},delWrappedLineRight:function(d){return hr(d,function(v){var w=d.charCoords(v.head,"div").top+5,T=d.coordsChar({left:d.display.lineDiv.offsetWidth+100,top:w},"div");return{from:v.from(),to:T}})},undo:function(d){return d.undo()},redo:function(d){return d.redo()},undoSelection:function(d){return d.undoSelection()},redoSelection:function(d){return d.redoSelection()},goDocStart:function(d){return d.extendSelection(_i(d.firstLine(),0))},goDocEnd:function(d){return d.extendSelection(_i(d.lastLine()))},goLineStart:function(d){return d.extendSelectionsBy(function(v){return yu(d,v.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(d){return d.extendSelectionsBy(function(v){return Cu(d,v.head)},{origin:"+move",bias:1})},goLineEnd:function(d){return d.extendSelectionsBy(function(v){return function(d,v){var w=ii(d.doc,v),T=function(d){for(var v;v=lo(d);)d=v.find(1,!0).line;return d}(w);return T!=w&&(v=Zn(T)),Gc(!0,d,w,v,-1)}(d,v.head.line)},{origin:"+move",bias:-1})},goLineRight:function(d){return d.extendSelectionsBy(function(v){var w=d.cursorCoords(v.head,"div").top+5;return d.coordsChar({left:d.display.lineDiv.offsetWidth+100,top:w},"div")},Ce)},goLineLeft:function(d){return d.extendSelectionsBy(function(v){var w=d.cursorCoords(v.head,"div").top+5;return d.coordsChar({left:0,top:w},"div")},Ce)},goLineLeftSmart:function(d){return d.extendSelectionsBy(function(v){var w=d.cursorCoords(v.head,"div").top+5,T=d.coordsChar({left:0,top:w},"div");return T.ch<d.getLine(T.line).search(/\S/)?Cu(d,v.head):T},Ce)},goLineUp:function(d){return d.moveV(-1,"line")},goLineDown:function(d){return d.moveV(1,"line")},goPageUp:function(d){return d.moveV(-1,"page")},goPageDown:function(d){return d.moveV(1,"page")},goCharLeft:function(d){return d.moveH(-1,"char")},goCharRight:function(d){return d.moveH(1,"char")},goColumnLeft:function(d){return d.moveH(-1,"column")},goColumnRight:function(d){return d.moveH(1,"column")},goWordLeft:function(d){return d.moveH(-1,"word")},goGroupRight:function(d){return d.moveH(1,"group")},goGroupLeft:function(d){return d.moveH(-1,"group")},goWordRight:function(d){return d.moveH(1,"word")},delCharBefore:function(d){return d.deleteH(-1,"codepoint")},delCharAfter:function(d){return d.deleteH(1,"char")},delWordBefore:function(d){return d.deleteH(-1,"word")},delWordAfter:function(d){return d.deleteH(1,"word")},delGroupBefore:function(d){return d.deleteH(-1,"group")},delGroupAfter:function(d){return d.deleteH(1,"group")},indentAuto:function(d){return d.indentSelection("smart")},indentMore:function(d){return d.indentSelection("add")},indentLess:function(d){return d.indentSelection("subtract")},insertTab:function(d){return d.replaceSelection("\t")},insertSoftTab:function(d){for(var v=[],w=d.listSelections(),T=d.options.tabSize,R=0;R<w.length;R++){var H=w[R].from(),J=$t(d.getLine(H.line),H.ch,T);v.push(Ve(T-J%T))}d.replaceSelections(v)},defaultTab:function(d){d.somethingSelected()?d.indentSelection("add"):d.execCommand("insertTab")},transposeChars:function(d){return Po(d,function(){for(var v=d.listSelections(),w=[],T=0;T<v.length;T++)if(v[T].empty()){var R=v[T].head,H=ii(d.doc,R.line).text;if(H)if(R.ch==H.length&&(R=new _i(R.line,R.ch-1)),R.ch>0)R=new _i(R.line,R.ch+1),d.replaceRange(H.charAt(R.ch-1)+H.charAt(R.ch-2),_i(R.line,R.ch-2),R,"+transpose");else if(R.line>d.doc.first){var J=ii(d.doc,R.line-1).text;J&&(R=new _i(R.line,1),d.replaceRange(H.charAt(0)+d.doc.lineSeparator()+J.charAt(J.length-1),_i(R.line-1,J.length-1),R,"+transpose"))}w.push(new Ts(R,R))}d.setSelections(w)})},newlineAndIndent:function(d){return Po(d,function(){for(var v=d.listSelections(),w=v.length-1;w>=0;w--)d.replaceRange(d.doc.lineSeparator(),v[w].anchor,v[w].head,"+input");v=d.listSelections();for(var T=0;T<v.length;T++)d.indentLine(v[T].from().line,null,!0);K(d)})},openLine:function(d){return d.replaceSelection("\n","start")},toggleOverwrite:function(d){return d.toggleOverwrite()}};function yu(d,v){var w=ii(d.doc,v),T=so(w);return T!=w&&(v=Zn(T)),Gc(!0,d,T,v,1)}function Cu(d,v){var w=yu(d,v.line),T=ii(d.doc,w.line),R=ni(T,d.doc.direction);if(!R||0==R[0].level){var H=Math.max(w.ch,T.text.search(/\S/));return _i(w.line,v.line==w.line&&v.ch<=H&&v.ch?0:H,w.sticky)}return w}function aa(d,v,w){if("string"==typeof v&&!(v=bu[v]))return!1;d.display.input.ensurePolled();var T=d.display.shift,R=!1;try{d.isReadOnly()&&(d.state.suppressEdits=!0),w&&(d.display.shift=!1),R=v(d)!=pi}finally{d.display.shift=T,d.state.suppressEdits=!1}return R}var Fu=new Xt;function Wc(d,v,w,T){var R=d.state.keySeq;if(R){if(Is(v))return"handled";if(/\'$/.test(v)?d.state.keySeq=null:Fu.set(50,function(){d.state.keySeq==R&&(d.state.keySeq=null,d.display.input.reset())}),Bu(d,R+" "+v,w,T))return!0}return Bu(d,v,w,T)}function Bu(d,v,w,T){var R=function(d,v,w){for(var T=0;T<d.state.keyMaps.length;T++){var R=ws(v,d.state.keyMaps[T],w,d);if(R)return R}return d.options.extraKeys&&ws(v,d.options.extraKeys,w,d)||ws(v,d.options.keyMap,w,d)}(d,v,T);return"multi"==R&&(d.state.keySeq=v),"handled"==R&&zn(d,"keyHandled",d,v,w),("handled"==R||"multi"==R)&&(Tn(w),cl(d)),!!R}function El(d,v){var w=As(v,!0);return!!w&&(v.shiftKey&&!d.state.keySeq?Wc(d,"Shift-"+w,v,function(T){return aa(d,T,!0)})||Wc(d,w,v,function(T){if("string"==typeof T?/^go[A-Z]/.test(T):T.motion)return aa(d,T)}):Wc(d,w,v,function(T){return aa(d,T)}))}var Eu=null;function zc(d){var v=this;if(!(d.target&&d.target!=v.display.input.getField()||(v.curOp.focus=at(),Zi(v,d)))){n&&a<11&&27==d.keyCode&&(d.returnValue=!1);var w=d.keyCode;v.display.shift=16==w||d.shiftKey;var T=El(v,d);Y&&(Eu=T?w:null,!T&&88==w&&!Mt&&(Ge?d.metaKey:d.ctrlKey)&&v.replaceSelection("",null,"cut")),O&&!Ge&&!T&&46==w&&d.shiftKey&&!d.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==w&&!/\bCodeMirror-crosshair\b/.test(v.display.lineDiv.className)&&function(d){var v=d.display.lineDiv;function w(T){(18==T.keyCode||!T.altKey)&&(Qe(v,"CodeMirror-crosshair"),Vi(document,"keyup",w),Vi(document,"mouseover",w))}Be(v,"CodeMirror-crosshair"),xi(document,"keyup",w),xi(document,"mouseover",w)}(v)}}function jc(d){16==d.keyCode&&(this.doc.sel.shift=!1),Zi(this,d)}function Tu(d){var v=this;if(!(d.target&&d.target!=v.display.input.getField()||$e(v.display,d)||Zi(v,d)||d.ctrlKey&&!d.altKey||Ge&&d.metaKey)){var w=d.keyCode,T=d.charCode;if(Y&&w==Eu)return Eu=null,void Tn(d);if(!Y||d.which&&!(d.which<10)||!El(v,d)){var R=String.fromCharCode(null==T?w:T);"\b"!=R&&(function(d,v,w){return Wc(d,"'"+w+"'",v,function(T){return aa(d,T,!0)})}(v,d,R)||v.display.input.onKeyPress(d))}}}var Yc,hc,dc=function(d,v,w){this.time=d,this.pos=v,this.button=w};function Hu(d){var v=this,w=v.display;if(!(Zi(v,d)||w.activeTouch&&w.input.supportsTouch())){if(w.input.ensurePolled(),w.shift=d.shiftKey,$e(w,d))return void(f||(w.scroller.draggable=!1,setTimeout(function(){return w.scroller.draggable=!0},100)));if(!Kc(v,d)){var T=za(v,d),R=me(d),H=T?function(d,v){var w=+new Date;return hc&&hc.compare(w,d,v)?(Yc=hc=null,"triple"):Yc&&Yc.compare(w,d,v)?(hc=new dc(w,d,v),Yc=null,"double"):(Yc=new dc(w,d,v),hc=null,"single")}(T,R):"single";window.focus(),1==R&&v.state.selectingText&&v.state.selectingText(d),(!T||!function(d,v,w,T,R){var H="Click";return"double"==T?H="Double"+H:"triple"==T&&(H="Triple"+H),Wc(d,to(H=(1==v?"Left":2==v?"Middle":"Right")+H,R),R,function(J){if("string"==typeof J&&(J=bu[J]),!J)return!1;var oe=!1;try{d.isReadOnly()&&(d.state.suppressEdits=!0),oe=J(d,w)!=pi}finally{d.state.suppressEdits=!1}return oe})}(v,R,T,H,d))&&(1==R?T?function(d,v,w,T){n?setTimeout(wt(Rr,d),0):d.curOp.focus=at();var J,R=function(d,v,w){var T=d.getOption("configureMouse"),R=T?T(d,v,w):{};return null==R.unit&&(R.unit=(lt?w.shiftKey&&w.metaKey:w.altKey)?"rectangle":"single"==v?"char":"double"==v?"word":"line"),(null==R.extend||d.doc.extend)&&(R.extend=d.doc.extend||w.shiftKey),null==R.addNew&&(R.addNew=Ge?w.metaKey:w.ctrlKey),null==R.moveOnDrag&&(R.moveOnDrag=!(Ge?w.altKey:w.ctrlKey)),R}(d,w,T),H=d.doc.sel;d.options.dragDrop&&Ke&&!d.isReadOnly()&&"single"==w&&(J=H.contains(v))>-1&&(ln((J=H.ranges[J]).from(),v)<0||v.xRel>0)&&(ln(J.to(),v)>0||v.xRel<0)?function(d,v,w,T){var R=d.display,H=!1,J=Do(d,function(Ee){f&&(R.scroller.draggable=!1),d.state.draggingText=!1,d.state.delayingBlurEvent&&(d.hasFocus()?d.state.delayingBlurEvent=!1:_a(d)),Vi(R.wrapper.ownerDocument,"mouseup",J),Vi(R.wrapper.ownerDocument,"mousemove",oe),Vi(R.scroller,"dragstart",pe),Vi(R.scroller,"drop",J),H||(Tn(Ee),T.addNew||lc(d.doc,w,null,null,T.extend),f&&!ee||n&&9==a?setTimeout(function(){R.wrapper.ownerDocument.body.focus({preventScroll:!0}),R.input.focus()},20):R.input.focus())}),oe=function(Ee){H=H||Math.abs(v.clientX-Ee.clientX)+Math.abs(v.clientY-Ee.clientY)>=10},pe=function(){return H=!0};f&&(R.scroller.draggable=!0),d.state.draggingText=J,J.copy=!T.moveOnDrag,xi(R.wrapper.ownerDocument,"mouseup",J),xi(R.wrapper.ownerDocument,"mousemove",oe),xi(R.scroller,"dragstart",pe),xi(R.scroller,"drop",J),d.state.delayingBlurEvent=!0,setTimeout(function(){return R.input.focus()},20),R.scroller.dragDrop&&R.scroller.dragDrop()}(d,T,v,R):function(d,v,w,T){n&&_a(d);var R=d.display,H=d.doc;Tn(v);var J,oe,pe=H.sel,Ee=pe.ranges;if(T.addNew&&!T.extend?(oe=H.sel.contains(w),J=oe>-1?Ee[oe]:new Ts(w,w)):(J=H.sel.primary(),oe=H.sel.primIndex),"rectangle"==T.unit)T.addNew||(J=new Ts(w,w)),w=za(d,v,!0,!0),oe=-1;else{var rt=kd(d,w,T.unit);J=T.extend?Mo(J,rt.anchor,rt.head,T.extend):rt}T.addNew?-1==oe?(oe=Ee.length,dr(H,Hr(d,Ee.concat([J]),oe),{scroll:!1,origin:"*mouse"})):Ee.length>1&&Ee[oe].empty()&&"char"==T.unit&&!T.extend?(dr(H,Hr(d,Ee.slice(0,oe).concat(Ee.slice(oe+1)),0),{scroll:!1,origin:"*mouse"}),pe=H.sel):vl(H,oe,J,yi):(oe=0,dr(H,new Br([J],0),yi),pe=H.sel);var Et=w;function Yt(Pi){if(0!=ln(Et,Pi))if(Et=Pi,"rectangle"==T.unit){for(var qi=[],bn=d.options.tabSize,wn=$t(ii(H,w.line).text,w.ch,bn),Qn=$t(ii(H,Pi.line).text,Pi.ch,bn),Os=Math.min(wn,Qn),No=Math.max(wn,Qn),ro=Math.min(w.line,Pi.line),la=Math.min(d.lastLine(),Math.max(w.line,Pi.line));ro<=la;ro++){var ca=ii(H,ro).text,Xo=vt(ca,Os,bn);Os==No?qi.push(new Ts(_i(ro,Xo),_i(ro,Xo))):ca.length>Xo&&qi.push(new Ts(_i(ro,Xo),_i(ro,vt(ca,No,bn))))}qi.length||qi.push(new Ts(w,w)),dr(H,Hr(d,pe.ranges.slice(0,oe).concat(qi),oe),{origin:"*mouse",scroll:!1}),d.scrollIntoView(Pi)}else{var Fo,jr=J,ar=kd(d,Pi,T.unit),Ko=jr.anchor;ln(ar.anchor,Ko)>0?(Fo=ar.head,Ko=ri(jr.from(),ar.anchor)):(Fo=ar.anchor,Ko=pt(jr.to(),ar.head));var xo=pe.ranges.slice(0);xo[oe]=function(d,v){var w=v.anchor,T=v.head,R=ii(d.doc,w.line);if(0==ln(w,T)&&w.sticky==T.sticky)return v;var H=ni(R);if(!H)return v;var J=bi(H,w.ch,w.sticky),oe=H[J];if(oe.from!=w.ch&&oe.to!=w.ch)return v;var Ee,pe=J+(oe.from==w.ch==(1!=oe.level)?0:1);if(0==pe||pe==H.length)return v;if(T.line!=w.line)Ee=(T.line-w.line)*("ltr"==d.doc.direction?1:-1)>0;else{var rt=bi(H,T.ch,T.sticky),Et=rt-J||(T.ch-w.ch)*(1==oe.level?-1:1);Ee=rt==pe-1||rt==pe?Et<0:Et>0}var Yt=H[pe+(Ee?-1:0)],Ht=Ee==(1==Yt.level),di=Ht?Yt.from:Yt.to,Ei=Ht?"after":"before";return w.ch==di&&w.sticky==Ei?v:new Ts(new _i(w.line,di,Ei),T)}(d,new Ts(Ti(H,Ko),Fo)),dr(H,Hr(d,xo,oe),yi)}}var Ht=R.wrapper.getBoundingClientRect(),di=0;function Ei(Pi){var qi=++di,bn=za(d,Pi,!0,"rectangle"==T.unit);if(bn)if(0!=ln(bn,Et)){d.curOp.focus=at(),Yt(bn);var wn=ja(R,H);(bn.line>=wn.to||bn.line<wn.from)&&setTimeout(Do(d,function(){di==qi&&Ei(Pi)}),150)}else{var Qn=Pi.clientY<Ht.top?-20:Pi.clientY>Ht.bottom?20:0;Qn&&setTimeout(Do(d,function(){di==qi&&(R.scroller.scrollTop+=Qn,Ei(Pi))}),50)}}function Ii(Pi){d.state.selectingText=!1,di=1/0,Pi&&(Tn(Pi),R.input.focus()),Vi(R.wrapper.ownerDocument,"mousemove",Gi),Vi(R.wrapper.ownerDocument,"mouseup",Qi),H.history.lastSelOrigin=null}var Gi=Do(d,function(Pi){0!==Pi.buttons&&me(Pi)?Ei(Pi):Ii(Pi)}),Qi=Do(d,Ii);d.state.selectingText=Qi,xi(R.wrapper.ownerDocument,"mousemove",Gi),xi(R.wrapper.ownerDocument,"mouseup",Qi)}(d,T,v,R)}(v,T,H,d):te(d)==w.scroller&&Tn(d):2==R?(T&&lc(v.doc,T),setTimeout(function(){return w.input.focus()},20)):3==R&&(Oe?v.display.input.onContextMenu(d):_a(v)))}}}function kd(d,v,w){if("char"==w)return new Ts(v,v);if("word"==w)return d.findWordAt(v);if("line"==w)return new Ts(_i(v.line,0),Ti(d.doc,_i(v.line+1,0)));var T=w(d,v);return new Ts(T.from,T.to)}function Cr(d,v,w,T){var R,H;if(v.touches)R=v.touches[0].clientX,H=v.touches[0].clientY;else try{R=v.clientX,H=v.clientY}catch(Yt){return!1}if(R>=Math.floor(d.display.gutters.getBoundingClientRect().right))return!1;T&&Tn(v);var J=d.display,oe=J.lineDiv.getBoundingClientRect();if(H>oe.bottom||!fn(d,w))return qe(v);H-=oe.top-J.viewOffset;for(var pe=0;pe<d.display.gutterSpecs.length;++pe){var Ee=J.gutters.childNodes[pe];if(Ee&&Ee.getBoundingClientRect().right>=R)return Ni(d,w,d,is(d.doc,H),d.display.gutterSpecs[pe].className,v),qe(v)}}function Kc(d,v){return Cr(d,v,"gutterClick",!0)}function wu(d,v){$e(d.display,v)||function(d,v){return!!fn(d,"gutterContextMenu")&&Cr(d,v,"gutterContextMenu",!1)}(d,v)||Zi(d,v,"contextmenu")||Oe||d.display.input.onContextMenu(v)}function Er(d){d.display.wrapper.className=d.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+d.options.theme.replace(/(^|\s)\s*/g," cm-s-"),nr(d)}dc.prototype.compare=function(d,v,w){return this.time+400>d&&0==ln(v,this.pos)&&w==this.button};var Tl={toString:function(){return"CodeMirror.Init"}},Uu={},Gu={};function Ld(d,v,w){if(!v!=!(w&&w!=Tl)){var R=d.display.dragFunctions,H=v?xi:Vi;H(d.display.scroller,"dragstart",R.start),H(d.display.scroller,"dragenter",R.enter),H(d.display.scroller,"dragover",R.over),H(d.display.scroller,"dragleave",R.leave),H(d.display.scroller,"drop",R.drop)}}function Pd(d){d.options.lineWrapping?(Be(d.display.wrapper,"CodeMirror-wrap"),d.display.sizer.style.minWidth="",d.display.sizerWidth=null):(Qe(d.display.wrapper,"CodeMirror-wrap"),Ta(d)),rl(d),So(d),nr(d),setTimeout(function(){return vs(d)},100)}function go(d,v){var w=this;if(!(this instanceof go))return new go(d,v);this.options=v=v?At(v):{},At(Uu,v,!1);var T=v.value;"string"==typeof T?T=new Uo(T,v.mode,null,v.lineSeparator,v.direction):v.mode&&(T.modeOption=v.mode),this.doc=T;var R=new go.inputStyles[v.inputStyle](this),H=this.display=new Ir(d,T,R,v);for(var J in H.wrapper.CodeMirror=this,Er(this),v.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ur(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Xt,keySeq:null,specialChars:null},v.autofocus&&!st&&H.input.focus(),n&&a<11&&setTimeout(function(){return w.display.input.reset(!0)},20),function(d){var v=d.display;xi(v.scroller,"mousedown",Do(d,Hu)),xi(v.scroller,"dblclick",n&&a<11?Do(d,function(pe){if(!Zi(d,pe)){var Ee=za(d,pe);if(Ee&&!Kc(d,pe)&&!$e(d.display,pe)){Tn(pe);var rt=d.findWordAt(Ee);lc(d.doc,rt.anchor,rt.head)}}}):function(pe){return Zi(d,pe)||Tn(pe)}),xi(v.scroller,"contextmenu",function(pe){return wu(d,pe)}),xi(v.input.getField(),"contextmenu",function(pe){v.scroller.contains(pe.target)||wu(d,pe)});var w,T={end:0};function R(){v.activeTouch&&(w=setTimeout(function(){return v.activeTouch=null},1e3),(T=v.activeTouch).end=+new Date)}function H(pe){if(1!=pe.touches.length)return!1;var Ee=pe.touches[0];return Ee.radiusX<=1&&Ee.radiusY<=1}function J(pe,Ee){if(null==Ee.left)return!0;var rt=Ee.left-pe.left,Et=Ee.top-pe.top;return rt*rt+Et*Et>400}xi(v.scroller,"touchstart",function(pe){if(!Zi(d,pe)&&!H(pe)&&!Kc(d,pe)){v.input.ensurePolled(),clearTimeout(w);var Ee=+new Date;v.activeTouch={start:Ee,moved:!1,prev:Ee-T.end<=300?T:null},1==pe.touches.length&&(v.activeTouch.left=pe.touches[0].pageX,v.activeTouch.top=pe.touches[0].pageY)}}),xi(v.scroller,"touchmove",function(){v.activeTouch&&(v.activeTouch.moved=!0)}),xi(v.scroller,"touchend",function(pe){var Ee=v.activeTouch;if(Ee&&!$e(v,pe)&&null!=Ee.left&&!Ee.moved&&new Date-Ee.start<300){var Et,rt=d.coordsChar(v.activeTouch,"page");Et=!Ee.prev||J(Ee,Ee.prev)?new Ts(rt,rt):!Ee.prev.prev||J(Ee,Ee.prev.prev)?d.findWordAt(rt):new Ts(_i(rt.line,0),Ti(d.doc,_i(rt.line+1,0))),d.setSelection(Et.anchor,Et.head),d.focus(),Tn(pe)}R()}),xi(v.scroller,"touchcancel",R),xi(v.scroller,"scroll",function(){v.scroller.clientHeight&&(ft(d,v.scroller.scrollTop),ai(d,v.scroller.scrollLeft,!0),Ni(d,"scroll",d))}),xi(v.scroller,"mousewheel",function(pe){return hu(d,pe)}),xi(v.scroller,"DOMMouseScroll",function(pe){return hu(d,pe)}),xi(v.wrapper,"scroll",function(){return v.wrapper.scrollTop=v.wrapper.scrollLeft=0}),v.dragFunctions={enter:function(pe){Zi(d,pe)||be(pe)},over:function(pe){Zi(d,pe)||(function(d,v){var w=za(d,v);if(w){var T=document.createDocumentFragment();Pr(d,w,T),d.display.dragCursor||(d.display.dragCursor=Pe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),d.display.lineSpace.insertBefore(d.display.dragCursor,d.display.cursorDiv)),it(d.display.dragCursor,T)}}(d,pe),be(pe))},start:function(pe){return function(d,v){if(n&&(!d.state.draggingText||+new Date-uc<100))be(v);else if(!Zi(d,v)&&!$e(d.display,v)&&(v.dataTransfer.setData("Text",d.getSelection()),v.dataTransfer.effectAllowed="copyMove",v.dataTransfer.setDragImage&&!ee)){var w=Pe("img",null,null,"position: fixed; left: 0; top: 0;");w.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Y&&(w.width=w.height=1,d.display.wrapper.appendChild(w),w._top=w.offsetTop),v.dataTransfer.setDragImage(w,0,0),Y&&w.parentNode.removeChild(w)}}(d,pe)},drop:Do(d,ie),leave:function(pe){Zi(d,pe)||nt(d)}};var oe=v.input.getField();xi(oe,"keyup",function(pe){return jc.call(d,pe)}),xi(oe,"keydown",Do(d,zc)),xi(oe,"keypress",Do(d,Tu)),xi(oe,"focus",function(pe){return Pa(d,pe)}),xi(oe,"blur",function(pe){return na(d,pe)})}(this),Dt(),po(this),this.curOp.forceUpdate=!0,xs(this,T),v.autofocus&&!st||this.hasFocus()?setTimeout(function(){w.hasFocus()&&!w.state.focused&&Pa(w)},20):na(this),Gu)Gu.hasOwnProperty(J)&&Gu[J](this,v[J],Tl);Sc(this),v.finishInit&&v.finishInit(this);for(var oe=0;oe<$c.length;++oe)$c[oe](this);ra(this),f&&v.lineWrapping&&"optimizelegibility"==getComputedStyle(H.lineDiv).textRendering&&(H.lineDiv.style.textRendering="auto")}go.defaults=Uu,go.optionHandlers=Gu;var $c=[];function Jl(d,v,w,T){var H,R=d.doc;null==w&&(w="add"),"smart"==w&&(R.mode.indent?H=Bs(d,v).state:w="prev");var J=d.options.tabSize,oe=ii(R,v),pe=$t(oe.text,null,J);oe.stateAfter&&(oe.stateAfter=null);var rt,Ee=oe.text.match(/^\s*/)[0];if(T||/\S/.test(oe.text)){if("smart"==w&&((rt=R.mode.indent(H,oe.text.slice(Ee.length),oe.text))==pi||rt>150)){if(!T)return;w="prev"}}else rt=0,w="not";"prev"==w?rt=v>R.first?$t(ii(R,v-1).text,null,J):0:"add"==w?rt=pe+d.options.indentUnit:"subtract"==w?rt=pe-d.options.indentUnit:"number"==typeof w&&(rt=pe+w),rt=Math.max(0,rt);var Et="",Yt=0;if(d.options.indentWithTabs)for(var Ht=Math.floor(rt/J);Ht;--Ht)Yt+=J,Et+="\t";if(Yt<rt&&(Et+=Ve(rt-Yt)),Et!=Ee)return Ma(R,Et,_i(v,0),_i(v,Ee.length),"+input"),oe.stateAfter=null,!0;for(var di=0;di<R.sel.ranges.length;di++){var Ei=R.sel.ranges[di];if(Ei.head.line==v&&Ei.head.ch<Ee.length){var Ii=_i(v,Ee.length);vl(R,di,new Ts(Ii,Ii));break}}}go.defineInitHook=function(d){return $c.push(d)};var Va=null;function Su(d){Va=d}function Jc(d,v,w,T,R){var H=d.doc;d.display.shift=!1,T||(T=H.sel);var J=+new Date-200,oe="paste"==R||d.state.pasteIncoming>J,pe=$n(v),Ee=null;if(oe&&T.ranges.length>1)if(Va&&Va.text.join("\n")==v){if(T.ranges.length%Va.text.length==0){Ee=[];for(var rt=0;rt<Va.text.length;rt++)Ee.push(H.splitLines(Va.text[rt]))}}else pe.length==T.ranges.length&&d.options.pasteLinesPerSelection&&(Ee=Te(pe,function(Gi){return[Gi]}));for(var Et=d.curOp.updateInput,Yt=T.ranges.length-1;Yt>=0;Yt--){var Ht=T.ranges[Yt],di=Ht.from(),Ei=Ht.to();Ht.empty()&&(w&&w>0?di=_i(di.line,di.ch-w):d.state.overwrite&&!oe?Ei=_i(Ei.line,Math.min(ii(H,Ei.line).text.length,Ei.ch+de(pe).length)):oe&&Va&&Va.lineWise&&Va.text.join("\n")==pe.join("\n")&&(di=Ei=_i(di.line,0)));var Ii={from:di,to:Ei,text:Ee?Ee[Yt%Ee.length]:pe,origin:R||(oe?"paste":d.state.cutIncoming>J?"cut":"+input")};Wr(d.doc,Ii),zn(d,"inputRead",d,Ii)}v&&!oe&&Fd(d,v),K(d),d.curOp.updateInput<2&&(d.curOp.updateInput=Et),d.curOp.typing=!0,d.state.pasteIncoming=d.state.cutIncoming=-1}function od(d,v){var w=d.clipboardData&&d.clipboardData.getData("Text");if(w)return d.preventDefault(),!v.isReadOnly()&&!v.options.disableInput&&Po(v,function(){return Jc(v,w,0,null,"paste")}),!0}function Fd(d,v){if(d.options.electricChars&&d.options.smartIndent)for(var w=d.doc.sel,T=w.ranges.length-1;T>=0;T--){var R=w.ranges[T];if(!(R.head.ch>100||T&&w.ranges[T-1].head.line==R.head.line)){var H=d.getModeAt(R.head),J=!1;if(H.electricChars){for(var oe=0;oe<H.electricChars.length;oe++)if(v.indexOf(H.electricChars.charAt(oe))>-1){J=Jl(d,R.head.line,"smart");break}}else H.electricInput&&H.electricInput.test(ii(d.doc,R.head.line).text.slice(0,R.head.ch))&&(J=Jl(d,R.head.line,"smart"));J&&zn(d,"electricInput",d,R.head.line)}}}function rd(d){for(var v=[],w=[],T=0;T<d.doc.sel.ranges.length;T++){var R=d.doc.sel.ranges[T].head.line,H={anchor:_i(R,0),head:_i(R+1,0)};w.push(H),v.push(d.getRange(H.anchor,H.head))}return{text:v,ranges:w}}function Wu(d,v,w,T){d.setAttribute("autocorrect",w?"":"off"),d.setAttribute("autocapitalize",T?"":"off"),d.setAttribute("spellcheck",!!v)}function ad(){var d=Pe("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),v=Pe("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return f?d.style.width="1000px":d.setAttribute("wrap","off"),Ae&&(d.style.border="1px solid black"),Wu(d),v}function Zl(d,v,w,T,R){var H=v,J=w,oe=ii(d,v.line),pe=R&&"rtl"==d.direction?-w:w;function rt(Qi){var Pi;if("codepoint"==T){var qi=oe.text.charCodeAt(v.ch+(w>0?0:-1));Pi=isNaN(qi)?null:new _i(v.line,Math.max(0,Math.min(oe.text.length,v.ch+w*((w>0?qi>=55296&&qi<56320:qi>=56320&&qi<57343)?2:1))),-w)}else Pi=R?function(d,v,w,T){var R=ni(v,d.doc.direction);if(!R)return Ha(v,w,T);w.ch>=v.text.length?(w.ch=v.text.length,w.sticky="before"):w.ch<=0&&(w.ch=0,w.sticky="after");var H=bi(R,w.ch,w.sticky),J=R[H];if("ltr"==d.doc.direction&&J.level%2==0&&(T>0?J.to>w.ch:J.from<w.ch))return Ha(v,w,T);var pe,oe=function(Gi,Qi){return ya(v,Gi instanceof _i?Gi.ch:Gi,Qi)},Ee=function(Gi){return d.options.lineWrapping?(pe=pe||rs(d,v),ds(d,v,pe,Gi)):{begin:0,end:v.text.length}},rt=Ee("before"==w.sticky?oe(w,-1):w.ch);if("rtl"==d.doc.direction||1==J.level){var Et=1==J.level==T<0,Yt=oe(w,Et?1:-1);if(null!=Yt&&(Et?Yt<=J.to&&Yt<=rt.end:Yt>=J.from&&Yt>=rt.begin))return new _i(w.line,Yt,Et?"before":"after")}var di=function(Gi,Qi,Pi){for(;Gi>=0&&Gi<R.length;Gi+=Qi){var bn=R[Gi],wn=Qi>0==(1!=bn.level),Qn=wn?Pi.begin:oe(Pi.end,-1);if(bn.from<=Qn&&Qn<bn.to||(Qn=wn?bn.from:oe(bn.to,-1),Pi.begin<=Qn&&Qn<Pi.end))return Os=Qn,wn?new _i(w.line,oe(Os,1),"before"):new _i(w.line,Os,"after")}var Os},Ei=di(H+T,T,rt);if(Ei)return Ei;var Ii=T>0?rt.end:oe(rt.begin,-1);return null==Ii||T>0&&Ii==v.text.length||!(Ei=di(T>0?0:R.length-1,T,Ee(Ii)))?null:Ei}(d.cm,oe,v,w):Ha(oe,v,w);if(null==Pi){if(Qi||!function(){var Qi=v.line+pe;return!(Qi<d.first||Qi>=d.first+d.size)&&(v=new _i(Qi,v.ch,v.sticky),oe=ii(d,Qi))}())return!1;v=Gc(R,d.cm,oe,v.line,pe)}else v=Pi;return!0}if("char"==T||"codepoint"==T)rt();else if("column"==T)rt(!0);else if("word"==T||"group"==T)for(var Et=null,Yt="group"==T,Ht=d.cm&&d.cm.getHelper(v,"wordChars"),di=!0;!(w<0)||rt(!di);di=!1){var Ei=oe.text.charAt(v.ch)||"\n",Ii=_t(Ei,Ht)?"w":Yt&&"\n"==Ei?"n":!Yt||/\s/.test(Ei)?null:"p";if(Yt&&!di&&!Ii&&(Ii="s"),Et&&Et!=Ii){w<0&&(w=1,rt(),v.sticky="after");break}if(Ii&&(Et=Ii),w>0&&!rt(!di))break}var Gi=yl(d,v,H,J,!0);return yn(H,Gi)&&(Gi.hitSide=!0),Gi}function zu(d,v,w,T){var J,Ee,R=d.doc,H=v.left;if("page"==T){var oe=Math.min(d.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),pe=Math.max(oe-.5*Dr(d.display),3);J=(w>0?v.bottom:v.top)+w*pe}else"line"==T&&(J=w>0?v.bottom+3:v.top-3);for(;(Ee=us(d,H,J)).outside;){if(w<0?J<=0:J>=R.height){Ee.hitSide=!0;break}J+=5*w}return Ee}var zs=function(d){this.cm=d,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Xt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Zc(d,v){var w=kn(d,v.line);if(!w||w.hidden)return null;var T=ii(d.doc,v.line),R=An(w,T,v.line),H=ni(T,d.doc.direction),J="left";H&&(J=bi(H,v.ch)%2?"right":"left");var pe=oo(R.map,v.ch,J);return pe.offset="right"==pe.collapse?pe.end:pe.start,pe}function ql(d,v){return v&&(d.bad=!0),d}function Du(d,v,w){var T;if(v==d.display.lineDiv){if(!(T=d.display.lineDiv.childNodes[w]))return ql(d.clipPos(_i(d.display.viewTo-1)),!0);v=null,w=0}else for(T=v;;T=T.parentNode){if(!T||T==d.display.lineDiv)return null;if(T.parentNode&&T.parentNode==d.display.lineDiv)break}for(var R=0;R<d.display.view.length;R++){var H=d.display.view[R];if(H.node==T)return Qc(H,v,w)}}function Qc(d,v,w){var T=d.text.firstChild,R=!1;if(!v||!se(T,v))return ql(_i(Zn(d.line),0),!0);if(v==T&&(R=!0,v=T.childNodes[w],w=0,!v)){var H=d.rest?de(d.rest):d.line;return ql(_i(Zn(H),H.text.length),R)}var J=3==v.nodeType?v:null,oe=v;for(!J&&1==v.childNodes.length&&3==v.firstChild.nodeType&&(J=v.firstChild,w&&(w=J.nodeValue.length));oe.parentNode!=T;)oe=oe.parentNode;var pe=d.measure,Ee=pe.maps;function rt(Ii,Gi,Qi){for(var Pi=-1;Pi<(Ee?Ee.length:0);Pi++)for(var qi=Pi<0?pe.map:Ee[Pi],bn=0;bn<qi.length;bn+=3){var wn=qi[bn+2];if(wn==Ii||wn==Gi){var Qn=Zn(Pi<0?d.line:d.rest[Pi]),Os=qi[bn]+Qi;return(Qi<0||wn!=Ii)&&(Os=qi[bn+(Qi?1:0)]),_i(Qn,Os)}}}var Et=rt(J,oe,w);if(Et)return ql(Et,R);for(var Yt=oe.nextSibling,Ht=J?J.nodeValue.length-w:0;Yt;Yt=Yt.nextSibling){if(Et=rt(Yt,Yt.firstChild,0))return ql(_i(Et.line,Et.ch-Ht),R);Ht+=Yt.textContent.length}for(var di=oe.previousSibling,Ei=w;di;di=di.previousSibling){if(Et=rt(di,di.firstChild,-1))return ql(_i(Et.line,Et.ch+Ei),R);Ei+=di.textContent.length}}zs.prototype.init=function(d){var v=this,w=this,T=w.cm,R=w.div=d.lineDiv;function H(oe){for(var pe=oe.target;pe;pe=pe.parentNode){if(pe==R)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(pe.className))break}return!1}function J(oe){if(H(oe)&&!Zi(T,oe)){if(T.somethingSelected())Su({lineWise:!1,text:T.getSelections()}),"cut"==oe.type&&T.replaceSelection("",null,"cut");else{if(!T.options.lineWiseCopyCut)return;var pe=rd(T);Su({lineWise:!0,text:pe.text}),"cut"==oe.type&&T.operation(function(){T.setSelections(pe.ranges,0,Lt),T.replaceSelection("",null,"cut")})}if(oe.clipboardData){oe.clipboardData.clearData();var Ee=Va.text.join("\n");if(oe.clipboardData.setData("Text",Ee),oe.clipboardData.getData("Text")==Ee)return void oe.preventDefault()}var rt=ad(),Et=rt.firstChild;T.display.lineSpace.insertBefore(rt,T.display.lineSpace.firstChild),Et.value=Va.text.join("\n");var Yt=at();St(Et),setTimeout(function(){T.display.lineSpace.removeChild(rt),Yt.focus(),Yt==R&&w.showPrimarySelection()},50)}}R.contentEditable=!0,Wu(R,T.options.spellcheck,T.options.autocorrect,T.options.autocapitalize),xi(R,"paste",function(oe){!H(oe)||Zi(T,oe)||od(oe,T)||a<=11&&setTimeout(Do(T,function(){return v.updateFromDOM()}),20)}),xi(R,"compositionstart",function(oe){v.composing={data:oe.data,done:!1}}),xi(R,"compositionupdate",function(oe){v.composing||(v.composing={data:oe.data,done:!1})}),xi(R,"compositionend",function(oe){v.composing&&(oe.data!=v.composing.data&&v.readFromDOMSoon(),v.composing.done=!0)}),xi(R,"touchstart",function(){return w.forceCompositionEnd()}),xi(R,"input",function(){v.composing||v.readFromDOMSoon()}),xi(R,"copy",J),xi(R,"cut",J)},zs.prototype.screenReaderLabelChanged=function(d){d?this.div.setAttribute("aria-label",d):this.div.removeAttribute("aria-label")},zs.prototype.prepareSelection=function(){var d=ll(this.cm,!1);return d.focus=at()==this.div,d},zs.prototype.showSelection=function(d,v){!d||!this.cm.display.view.length||((d.focus||v)&&this.showPrimarySelection(),this.showMultipleSelections(d))},zs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},zs.prototype.showPrimarySelection=function(){var d=this.getSelection(),v=this.cm,w=v.doc.sel.primary(),T=w.from(),R=w.to();if(v.display.viewTo==v.display.viewFrom||T.line>=v.display.viewTo||R.line<v.display.viewFrom)d.removeAllRanges();else{var H=Du(v,d.anchorNode,d.anchorOffset),J=Du(v,d.focusNode,d.focusOffset);if(!H||H.bad||!J||J.bad||0!=ln(ri(H,J),T)||0!=ln(pt(H,J),R)){var oe=v.display.view,pe=T.line>=v.display.viewFrom&&Zc(v,T)||{node:oe[0].measure.map[2],offset:0},Ee=R.line<v.display.viewTo&&Zc(v,R);if(!Ee){var rt=oe[oe.length-1].measure,Et=rt.maps?rt.maps[rt.maps.length-1]:rt.map;Ee={node:Et[Et.length-1],offset:Et[Et.length-2]-Et[Et.length-3]}}if(!pe||!Ee)return void d.removeAllRanges();var Ht,Yt=d.rangeCount&&d.getRangeAt(0);try{Ht=ge(pe.node,pe.offset,Ee.offset,Ee.node)}catch(di){}Ht&&(!O&&v.state.focused?(d.collapse(pe.node,pe.offset),Ht.collapsed||(d.removeAllRanges(),d.addRange(Ht))):(d.removeAllRanges(),d.addRange(Ht)),Yt&&null==d.anchorNode?d.addRange(Yt):O&&this.startGracePeriod()),this.rememberSelection()}}},zs.prototype.startGracePeriod=function(){var d=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){d.gracePeriod=!1,d.selectionChanged()&&d.cm.operation(function(){return d.cm.curOp.selectionChanged=!0})},20)},zs.prototype.showMultipleSelections=function(d){it(this.cm.display.cursorDiv,d.cursors),it(this.cm.display.selectionDiv,d.selection)},zs.prototype.rememberSelection=function(){var d=this.getSelection();this.lastAnchorNode=d.anchorNode,this.lastAnchorOffset=d.anchorOffset,this.lastFocusNode=d.focusNode,this.lastFocusOffset=d.focusOffset},zs.prototype.selectionInEditor=function(){var d=this.getSelection();if(!d.rangeCount)return!1;var v=d.getRangeAt(0).commonAncestorContainer;return se(this.div,v)},zs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||at()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},zs.prototype.blur=function(){this.div.blur()},zs.prototype.getField=function(){return this.div},zs.prototype.supportsTouch=function(){return!0},zs.prototype.receivedFocus=function(){var d=this,v=this;this.selectionInEditor()?setTimeout(function(){return d.pollSelection()},20):Po(this.cm,function(){return v.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function w(){v.cm.state.focused&&(v.pollSelection(),v.polling.set(v.cm.options.pollInterval,w))})},zs.prototype.selectionChanged=function(){var d=this.getSelection();return d.anchorNode!=this.lastAnchorNode||d.anchorOffset!=this.lastAnchorOffset||d.focusNode!=this.lastFocusNode||d.focusOffset!=this.lastFocusOffset},zs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var d=this.getSelection(),v=this.cm;if(Je&&I&&this.cm.display.gutterSpecs.length&&function(d){for(var v=d;v;v=v.parentNode)if(/CodeMirror-gutter-wrapper/.test(v.className))return!0;return!1}(d.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var w=Du(v,d.anchorNode,d.anchorOffset),T=Du(v,d.focusNode,d.focusOffset);w&&T&&Po(v,function(){dr(v.doc,Pl(w,T),Lt),(w.bad||T.bad)&&(v.curOp.selectionChanged=!0)})}}},zs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var H,J,oe,d=this.cm,v=d.display,w=d.doc.sel.primary(),T=w.from(),R=w.to();if(0==T.ch&&T.line>d.firstLine()&&(T=_i(T.line-1,ii(d.doc,T.line-1).length)),R.ch==ii(d.doc,R.line).text.length&&R.line<d.lastLine()&&(R=_i(R.line+1,0)),T.line<v.viewFrom||R.line>v.viewTo-1)return!1;T.line==v.viewFrom||0==(H=jo(d,T.line))?(J=Zn(v.view[0].line),oe=v.view[0].node):(J=Zn(v.view[H].line),oe=v.view[H-1].node.nextSibling);var Ee,rt,pe=jo(d,R.line);if(pe==v.view.length-1?(Ee=v.viewTo-1,rt=v.lineDiv.lastChild):(Ee=Zn(v.view[pe+1].line)-1,rt=v.view[pe+1].node.previousSibling),!oe)return!1;for(var Et=d.doc.splitLines(function(d,v,w,T,R){var H="",J=!1,oe=d.doc.lineSeparator(),pe=!1;function rt(){J&&(H+=oe,pe&&(H+=oe),J=pe=!1)}function Et(Ht){Ht&&(rt(),H+=Ht)}function Yt(Ht){if(1==Ht.nodeType){var di=Ht.getAttribute("cm-text");if(di)return void Et(di);var Ii,Ei=Ht.getAttribute("cm-marker");if(Ei){var Gi=d.findMarks(_i(T,0),_i(R+1,0),function(Ht){return function(di){return di.id==Ht}}(+Ei));return void(Gi.length&&(Ii=Gi[0].find(0))&&Et(gn(d.doc,Ii.from,Ii.to).join(oe)))}if("false"==Ht.getAttribute("contenteditable"))return;var Qi=/^(pre|div|p|li|table|br)$/i.test(Ht.nodeName);if(!/^br$/i.test(Ht.nodeName)&&0==Ht.textContent.length)return;Qi&&rt();for(var Pi=0;Pi<Ht.childNodes.length;Pi++)Yt(Ht.childNodes[Pi]);/^(pre|p)$/i.test(Ht.nodeName)&&(pe=!0),Qi&&(J=!0)}else 3==Ht.nodeType&&Et(Ht.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Yt(v),v!=w;)v=v.nextSibling,pe=!1;return H}(d,oe,rt,J,Ee)),Yt=gn(d.doc,_i(J,0),_i(Ee,ii(d.doc,Ee).text.length));Et.length>1&&Yt.length>1;)if(de(Et)==de(Yt))Et.pop(),Yt.pop(),Ee--;else{if(Et[0]!=Yt[0])break;Et.shift(),Yt.shift(),J++}for(var Ht=0,di=0,Ei=Et[0],Ii=Yt[0],Gi=Math.min(Ei.length,Ii.length);Ht<Gi&&Ei.charCodeAt(Ht)==Ii.charCodeAt(Ht);)++Ht;for(var Qi=de(Et),Pi=de(Yt),qi=Math.min(Qi.length-(1==Et.length?Ht:0),Pi.length-(1==Yt.length?Ht:0));di<qi&&Qi.charCodeAt(Qi.length-di-1)==Pi.charCodeAt(Pi.length-di-1);)++di;if(1==Et.length&&1==Yt.length&&J==T.line)for(;Ht&&Ht>T.ch&&Qi.charCodeAt(Qi.length-di-1)==Pi.charCodeAt(Pi.length-di-1);)Ht--,di++;Et[Et.length-1]=Qi.slice(0,Qi.length-di).replace(/^\u200b+/,""),Et[0]=Et[0].slice(Ht).replace(/\u200b+$/,"");var bn=_i(J,Ht),wn=_i(Ee,Yt.length?de(Yt).length-di:0);return Et.length>1||Et[0]||ln(bn,wn)?(Ma(d.doc,Et,bn,wn,"+input"),!0):void 0},zs.prototype.ensurePolled=function(){this.forceCompositionEnd()},zs.prototype.reset=function(){this.forceCompositionEnd()},zs.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},zs.prototype.readFromDOMSoon=function(){var d=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(d.readDOMTimeout=null,d.composing){if(!d.composing.done)return;d.composing=null}d.updateFromDOM()},80))},zs.prototype.updateFromDOM=function(){var d=this;(this.cm.isReadOnly()||!this.pollContent())&&Po(this.cm,function(){return So(d.cm)})},zs.prototype.setUneditable=function(d){d.contentEditable="false"},zs.prototype.onKeyPress=function(d){0==d.charCode||this.composing||(d.preventDefault(),this.cm.isReadOnly()||Do(this.cm,Jc)(this.cm,String.fromCharCode(null==d.charCode?d.keyCode:d.charCode),0))},zs.prototype.readOnlyChanged=function(d){this.div.contentEditable=String("nocursor"!=d)},zs.prototype.onContextMenu=function(){},zs.prototype.resetPosition=function(){},zs.prototype.needsContentAttribute=!0;var Ns=function(d){this.cm=d,this.prevInput="",this.pollingFast=!1,this.polling=new Xt,this.hasSelection=!1,this.composing=null};Ns.prototype.init=function(d){var v=this,w=this,T=this.cm;this.createField(d);var R=this.textarea;function H(J){if(!Zi(T,J)){if(T.somethingSelected())Su({lineWise:!1,text:T.getSelections()});else{if(!T.options.lineWiseCopyCut)return;var oe=rd(T);Su({lineWise:!0,text:oe.text}),"cut"==J.type?T.setSelections(oe.ranges,null,Lt):(w.prevInput="",R.value=oe.text.join("\n"),St(R))}"cut"==J.type&&(T.state.cutIncoming=+new Date)}}d.wrapper.insertBefore(this.wrapper,d.wrapper.firstChild),Ae&&(R.style.width="0px"),xi(R,"input",function(){n&&a>=9&&v.hasSelection&&(v.hasSelection=null),w.poll()}),xi(R,"paste",function(J){Zi(T,J)||od(J,T)||(T.state.pasteIncoming=+new Date,w.fastPoll())}),xi(R,"cut",H),xi(R,"copy",H),xi(d.scroller,"paste",function(J){if(!$e(d,J)&&!Zi(T,J)){if(!R.dispatchEvent)return T.state.pasteIncoming=+new Date,void w.focus();var oe=new Event("paste");oe.clipboardData=J.clipboardData,R.dispatchEvent(oe)}}),xi(d.lineSpace,"selectstart",function(J){$e(d,J)||Tn(J)}),xi(R,"compositionstart",function(){var J=T.getCursor("from");w.composing&&w.composing.range.clear(),w.composing={start:J,range:T.markText(J,T.getCursor("to"),{className:"CodeMirror-composing"})}}),xi(R,"compositionend",function(){w.composing&&(w.poll(),w.composing.range.clear(),w.composing=null)})},Ns.prototype.createField=function(d){this.wrapper=ad(),this.textarea=this.wrapper.firstChild},Ns.prototype.screenReaderLabelChanged=function(d){d?this.textarea.setAttribute("aria-label",d):this.textarea.removeAttribute("aria-label")},Ns.prototype.prepareSelection=function(){var d=this.cm,v=d.display,w=d.doc,T=ll(d);if(d.options.moveInputWithCursor){var R=an(d,w.sel.primary().head,"div"),H=v.wrapper.getBoundingClientRect(),J=v.lineDiv.getBoundingClientRect();T.teTop=Math.max(0,Math.min(v.wrapper.clientHeight-10,R.top+J.top-H.top)),T.teLeft=Math.max(0,Math.min(v.wrapper.clientWidth-10,R.left+J.left-H.left))}return T},Ns.prototype.showSelection=function(d){var w=this.cm.display;it(w.cursorDiv,d.cursors),it(w.selectionDiv,d.selection),null!=d.teTop&&(this.wrapper.style.top=d.teTop+"px",this.wrapper.style.left=d.teLeft+"px")},Ns.prototype.reset=function(d){if(!this.contextMenuPending&&!this.composing){var v=this.cm;if(v.somethingSelected()){this.prevInput="";var w=v.getSelection();this.textarea.value=w,v.state.focused&&St(this.textarea),n&&a>=9&&(this.hasSelection=w)}else d||(this.prevInput=this.textarea.value="",n&&a>=9&&(this.hasSelection=null))}},Ns.prototype.getField=function(){return this.textarea},Ns.prototype.supportsTouch=function(){return!1},Ns.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!st||at()!=this.textarea))try{this.textarea.focus()}catch(d){}},Ns.prototype.blur=function(){this.textarea.blur()},Ns.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ns.prototype.receivedFocus=function(){this.slowPoll()},Ns.prototype.slowPoll=function(){var d=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){d.poll(),d.cm.state.focused&&d.slowPoll()})},Ns.prototype.fastPoll=function(){var d=!1,v=this;v.pollingFast=!0,v.polling.set(20,function w(){v.poll()||d?(v.pollingFast=!1,v.slowPoll()):(d=!0,v.polling.set(60,w))})},Ns.prototype.poll=function(){var d=this,v=this.cm,w=this.textarea,T=this.prevInput;if(this.contextMenuPending||!v.state.focused||Gt(w)&&!T&&!this.composing||v.isReadOnly()||v.options.disableInput||v.state.keySeq)return!1;var R=w.value;if(R==T&&!v.somethingSelected())return!1;if(n&&a>=9&&this.hasSelection===R||Ge&&/[\uf700-\uf7ff]/.test(R))return v.display.input.reset(),!1;if(v.doc.sel==v.display.selForContextMenu){var H=R.charCodeAt(0);if(8203==H&&!T&&(T="\u200b"),8666==H)return this.reset(),this.cm.execCommand("undo")}for(var J=0,oe=Math.min(T.length,R.length);J<oe&&T.charCodeAt(J)==R.charCodeAt(J);)++J;return Po(v,function(){Jc(v,R.slice(J),T.length-J,null,d.composing?"*compose":null),R.length>1e3||R.indexOf("\n")>-1?w.value=d.prevInput="":d.prevInput=R,d.composing&&(d.composing.range.clear(),d.composing.range=v.markText(d.composing.start,v.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ns.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ns.prototype.onKeyPress=function(){n&&a>=9&&(this.hasSelection=null),this.fastPoll()},Ns.prototype.onContextMenu=function(d){var v=this,w=v.cm,T=w.display,R=v.textarea;v.contextMenuPending&&v.contextMenuPending();var H=za(w,d),J=T.scroller.scrollTop;if(H&&!Y){w.options.resetSelectionOnContextMenu&&-1==w.doc.sel.contains(H)&&Do(w,dr)(w.doc,Pl(H),Lt);var Et,pe=R.style.cssText,Ee=v.wrapper.style.cssText,rt=v.wrapper.offsetParent.getBoundingClientRect();if(v.wrapper.style.cssText="position: static",R.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(d.clientY-rt.top-5)+"px; left: "+(d.clientX-rt.left-5)+"px;\n      z-index: 1000; background: "+(n?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",f&&(Et=window.scrollY),T.input.focus(),f&&window.scrollTo(null,Et),T.input.reset(),w.somethingSelected()||(R.value=v.prevInput=" "),v.contextMenuPending=Ht,T.selForContextMenu=w.doc.sel,clearTimeout(T.detectingSelectAll),n&&a>=9&&Yt(),Oe){be(d);var di=function(){Vi(window,"mouseup",di),setTimeout(Ht,20)};xi(window,"mouseup",di)}else setTimeout(Ht,50)}function Yt(){if(null!=R.selectionStart){var Ei=w.somethingSelected(),Ii="\u200b"+(Ei?R.value:"");R.value="\u21da",R.value=Ii,v.prevInput=Ei?"":"\u200b",R.selectionStart=1,R.selectionEnd=Ii.length,T.selForContextMenu=w.doc.sel}}function Ht(){if(v.contextMenuPending==Ht&&(v.contextMenuPending=!1,v.wrapper.style.cssText=Ee,R.style.cssText=pe,n&&a<9&&T.scrollbars.setScrollTop(T.scroller.scrollTop=J),null!=R.selectionStart)){(!n||n&&a<9)&&Yt();var Ei=0,Ii=function(){T.selForContextMenu==w.doc.sel&&0==R.selectionStart&&R.selectionEnd>0&&"\u200b"==v.prevInput?Do(w,cc)(w):Ei++<10?T.detectingSelectAll=setTimeout(Ii,500):(T.selForContextMenu=null,T.input.reset())};T.detectingSelectAll=setTimeout(Ii,200)}}},Ns.prototype.readOnlyChanged=function(d){d||this.reset(),this.textarea.disabled="nocursor"==d,this.textarea.readOnly=!!d},Ns.prototype.setUneditable=function(){},Ns.prototype.needsContentAttribute=!1,function(d){var v=d.optionHandlers;function w(T,R,H,J){d.defaults[T]=R,H&&(v[T]=J?function(oe,pe,Ee){Ee!=Tl&&H(oe,pe,Ee)}:H)}d.defineOption=w,d.Init=Tl,w("value","",function(T,R){return T.setValue(R)},!0),w("mode",null,function(T,R){T.doc.modeOption=R,Ur(T)},!0),w("indentUnit",2,Ur,!0),w("indentWithTabs",!1),w("smartIndent",!0),w("tabSize",4,function(T){Fl(T),nr(T),So(T)},!0),w("lineSeparator",null,function(T,R){if(T.doc.lineSep=R,R){var H=[],J=T.doc.first;T.doc.iter(function(pe){for(var Ee=0;;){var rt=pe.text.indexOf(R,Ee);if(-1==rt)break;Ee=rt+R.length,H.push(_i(J,rt))}J++});for(var oe=H.length-1;oe>=0;oe--)Ma(T.doc,R,H[oe],_i(H[oe].line,H[oe].ch+R.length))}}),w("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(T,R,H){T.state.specialChars=new RegExp(R.source+(R.test("\t")?"":"|\t"),"g"),H!=Tl&&T.refresh()}),w("specialCharPlaceholder",ce,function(T){return T.refresh()},!0),w("electricChars",!0),w("inputStyle",st?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),w("spellcheck",!1,function(T,R){return T.getInputField().spellcheck=R},!0),w("autocorrect",!1,function(T,R){return T.getInputField().autocorrect=R},!0),w("autocapitalize",!1,function(T,R){return T.getInputField().autocapitalize=R},!0),w("rtlMoveVisually",!Rt),w("wholeLineUpdateBefore",!0),w("theme","default",function(T){Er(T),Ya(T)},!0),w("keyMap","default",function(T,R,H){var J=Yo(R),oe=H!=Tl&&Yo(H);oe&&oe.detach&&oe.detach(T,J),J.attach&&J.attach(T,oe||null)}),w("extraKeys",null),w("configureMouse",null),w("lineWrapping",!1,Pd,!0),w("gutters",[],function(T,R){T.display.gutterSpecs=Da(R,T.options.lineNumbers),Ya(T)},!0),w("fixedGutter",!0,function(T,R){T.display.gutters.style.left=R?Mr(T.display)+"px":"0",T.refresh()},!0),w("coverGutterNextToScrollbar",!1,function(T){return vs(T)},!0),w("scrollbarStyle","native",function(T){ur(T),vs(T),T.display.scrollbars.setScrollTop(T.doc.scrollTop),T.display.scrollbars.setScrollLeft(T.doc.scrollLeft)},!0),w("lineNumbers",!1,function(T,R){T.display.gutterSpecs=Da(T.options.gutters,R),Ya(T)},!0),w("firstLineNumber",1,Ya,!0),w("lineNumberFormatter",function(T){return T},Ya,!0),w("showCursorWhenSelecting",!1,al,!0),w("resetSelectionOnContextMenu",!0),w("lineWiseCopyCut",!0),w("pasteLinesPerSelection",!0),w("selectionsMayTouch",!1),w("readOnly",!1,function(T,R){"nocursor"==R&&(na(T),T.display.input.blur()),T.display.input.readOnlyChanged(R)}),w("screenReaderLabel",null,function(T,R){T.display.input.screenReaderLabelChanged(R=""===R?null:R)}),w("disableInput",!1,function(T,R){R||T.display.input.reset()},!0),w("dragDrop",!0,Ld),w("allowDropFileTypes",null),w("cursorBlinkRate",530),w("cursorScrollMargin",0),w("cursorHeight",1,al,!0),w("singleCursorHeightPerLine",!0,al,!0),w("workTime",100),w("workDelay",100),w("flattenSpans",!0,Fl,!0),w("addModeClass",!1,Fl,!0),w("pollInterval",100),w("undoDepth",200,function(T,R){return T.doc.history.undoDepth=R}),w("historyEventDelay",1250),w("viewportMargin",10,function(T){return T.refresh()},!0),w("maxHighlightLength",1e4,Fl,!0),w("moveInputWithCursor",!0,function(T,R){R||T.display.input.resetPosition()}),w("tabindex",null,function(T,R){return T.display.input.getField().tabIndex=R||""}),w("autofocus",null),w("direction","ltr",function(T,R){return T.doc.setDirection(R)},!0),w("phrases",null)}(go),function(d){var v=d.optionHandlers,w=d.helpers={};d.prototype={constructor:d,focus:function(){window.focus(),this.display.input.focus()},setOption:function(T,R){var H=this.options,J=H[T];H[T]==R&&"mode"!=T||(H[T]=R,v.hasOwnProperty(T)&&Do(this,v[T])(this,R,J),Ni(this,"optionChange",this,T))},getOption:function(T){return this.options[T]},getDoc:function(){return this.doc},addKeyMap:function(T,R){this.state.keyMaps[R?"push":"unshift"](Yo(T))},removeKeyMap:function(T){for(var R=this.state.keyMaps,H=0;H<R.length;++H)if(R[H]==T||R[H].name==T)return R.splice(H,1),!0},addOverlay:qs(function(T,R){var H=T.token?T:d.getMode(this.options,T);if(H.startState)throw new Error("Overlays may not be stateful.");(function(d,v,w){for(var T=0,R=w(v);T<d.length&&w(d[T])<=R;)T++;d.splice(T,0,v)})(this.state.overlays,{mode:H,modeSpec:T,opaque:R&&R.opaque,priority:R&&R.priority||0},function(J){return J.priority}),this.state.modeGen++,So(this)}),removeOverlay:qs(function(T){for(var R=this.state.overlays,H=0;H<R.length;++H){var J=R[H].modeSpec;if(J==T||"string"==typeof T&&J.name==T)return R.splice(H,1),this.state.modeGen++,void So(this)}}),indentLine:qs(function(T,R,H){"string"!=typeof R&&"number"!=typeof R&&(R=null==R?this.options.smartIndent?"smart":"prev":R?"add":"subtract"),Ss(this.doc,T)&&Jl(this,T,R,H)}),indentSelection:qs(function(T){for(var R=this.doc.sel.ranges,H=-1,J=0;J<R.length;J++){var oe=R[J];if(oe.empty())oe.head.line>H&&(Jl(this,oe.head.line,T,!0),H=oe.head.line,J==this.doc.sel.primIndex&&K(this));else{var pe=oe.from(),Ee=oe.to(),rt=Math.max(H,pe.line);H=Math.min(this.lastLine(),Ee.line-(Ee.ch?0:1))+1;for(var Et=rt;Et<H;++Et)Jl(this,Et,T);var Yt=this.doc.sel.ranges;0==pe.ch&&R.length==Yt.length&&Yt[J].from().ch>0&&vl(this.doc,J,new Ts(pe,Yt[J].to()),Lt)}}}),getTokenAt:function(T,R){return Rs(this,T,R)},getLineTokens:function(T,R){return Rs(this,_i(T),R,!0)},getTokenTypeAt:function(T){T=Ti(this.doc,T);var pe,R=Eo(this,ii(this.doc,T.line)),H=0,J=(R.length-1)/2,oe=T.ch;if(0==oe)pe=R[2];else for(;;){var Ee=H+J>>1;if((Ee?R[2*Ee-1]:0)>=oe)J=Ee;else{if(!(R[2*Ee+1]<oe)){pe=R[2*Ee+2];break}H=Ee+1}}var rt=pe?pe.indexOf("overlay "):-1;return rt<0?pe:0==rt?null:pe.slice(0,rt-1)},getModeAt:function(T){var R=this.doc.mode;return R.innerMode?d.innerMode(R,this.getTokenAt(T).state).mode:R},getHelper:function(T,R){return this.getHelpers(T,R)[0]},getHelpers:function(T,R){var H=[];if(!w.hasOwnProperty(R))return H;var J=w[R],oe=this.getModeAt(T);if("string"==typeof oe[R])J[oe[R]]&&H.push(J[oe[R]]);else if(oe[R])for(var pe=0;pe<oe[R].length;pe++){var Ee=J[oe[R][pe]];Ee&&H.push(Ee)}else oe.helperType&&J[oe.helperType]?H.push(J[oe.helperType]):J[oe.name]&&H.push(J[oe.name]);for(var rt=0;rt<J._global.length;rt++){var Et=J._global[rt];Et.pred(oe,this)&&-1==ti(H,Et.val)&&H.push(Et.val)}return H},getStateAfter:function(T,R){var H=this.doc;return Bs(this,(T=Di(H,null==T?H.first+H.size-1:T))+1,R).state},cursorCoords:function(T,R){var J=this.doc.sel.primary();return an(this,null==T?J.head:"object"==typeof T?Ti(this.doc,T):T?J.from():J.to(),R||"page")},charCoords:function(T,R){return on(this,Ti(this.doc,T),R||"page")},coordsChar:function(T,R){return us(this,(T=ta(this,T,R||"page")).left,T.top)},lineAtHeight:function(T,R){return T=ta(this,{top:T,left:0},R||"page").top,is(this.doc,T+this.display.viewOffset)},heightAtLine:function(T,R,H){var oe,J=!1;if("number"==typeof T){var pe=this.doc.first+this.doc.size-1;T<this.doc.first?T=this.doc.first:T>pe&&(T=pe,J=!0),oe=ii(this.doc,T)}else oe=T;return kr(this,oe,{top:0,left:0},R||"page",H||J).top+(J?this.doc.height-ls(oe):0)},defaultTextHeight:function(){return Dr(this.display)},defaultCharWidth:function(){return Ho(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(T,R,H,J,oe){var pe=this.display,Ee=(T=an(this,Ti(this.doc,T))).bottom,rt=T.left;if(R.style.position="absolute",R.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(R),pe.sizer.appendChild(R),"over"==J)Ee=T.top;else if("above"==J||"near"==J){var Et=Math.max(pe.wrapper.clientHeight,this.doc.height),Yt=Math.max(pe.sizer.clientWidth,pe.lineSpace.clientWidth);("above"==J||T.bottom+R.offsetHeight>Et)&&T.top>R.offsetHeight?Ee=T.top-R.offsetHeight:T.bottom+R.offsetHeight<=Et&&(Ee=T.bottom),rt+R.offsetWidth>Yt&&(rt=Yt-R.offsetWidth)}R.style.top=Ee+"px",R.style.left=R.style.right="","right"==oe?(rt=pe.sizer.clientWidth-R.offsetWidth,R.style.right="0px"):("left"==oe?rt=0:"middle"==oe&&(rt=(pe.sizer.clientWidth-R.offsetWidth)/2),R.style.left=rt+"px"),H&&function(d,v){var w=Tc(d,v);null!=w.scrollTop&&ft(d,w.scrollTop),null!=w.scrollLeft&&ai(d,w.scrollLeft)}(this,{left:rt,top:Ee,right:rt+R.offsetWidth,bottom:Ee+R.offsetHeight})},triggerOnKeyDown:qs(zc),triggerOnKeyPress:qs(Tu),triggerOnKeyUp:jc,triggerOnMouseDown:qs(Hu),execCommand:function(T){if(bu.hasOwnProperty(T))return bu[T].call(null,this)},triggerElectric:qs(function(T){Fd(this,T)}),findPosH:function(T,R,H,J){var oe=1;R<0&&(oe=-1,R=-R);for(var pe=Ti(this.doc,T),Ee=0;Ee<R&&!(pe=Zl(this.doc,pe,oe,H,J)).hitSide;++Ee);return pe},moveH:qs(function(T,R){var H=this;this.extendSelectionsBy(function(J){return H.display.shift||H.doc.extend||J.empty()?Zl(H.doc,J.head,T,R,H.options.rtlMoveVisually):T<0?J.from():J.to()},Ce)}),deleteH:qs(function(T,R){var J=this.doc;this.doc.sel.somethingSelected()?J.replaceSelection("",null,"+delete"):hr(this,function(oe){var pe=Zl(J,oe.head,T,R,!1);return T<0?{from:pe,to:oe.head}:{from:oe.head,to:pe}})}),findPosV:function(T,R,H,J){var oe=1,pe=J;R<0&&(oe=-1,R=-R);for(var Ee=Ti(this.doc,T),rt=0;rt<R;++rt){var Et=an(this,Ee,"div");if(null==pe?pe=Et.left:Et.left=pe,(Ee=zu(this,Et,oe,H)).hitSide)break}return Ee},moveV:qs(function(T,R){var H=this,J=this.doc,oe=[],pe=!this.display.shift&&!J.extend&&J.sel.somethingSelected();if(J.extendSelectionsBy(function(rt){if(pe)return T<0?rt.from():rt.to();var Et=an(H,rt.head,"div");null!=rt.goalColumn&&(Et.left=rt.goalColumn),oe.push(Et.left);var Yt=zu(H,Et,T,R);return"page"==R&&rt==J.sel.primary()&&q(H,on(H,Yt,"div").top-Et.top),Yt},Ce),oe.length)for(var Ee=0;Ee<J.sel.ranges.length;Ee++)J.sel.ranges[Ee].goalColumn=oe[Ee]}),findWordAt:function(T){var H=ii(this.doc,T.line).text,J=T.ch,oe=T.ch;if(H){var pe=this.getHelper(T,"wordChars");"before"!=T.sticky&&oe!=H.length||!J?++oe:--J;for(var Ee=H.charAt(J),rt=_t(Ee,pe)?function(Et){return _t(Et,pe)}:/\s/.test(Ee)?function(Et){return/\s/.test(Et)}:function(Et){return!/\s/.test(Et)&&!_t(Et)};J>0&&rt(H.charAt(J-1));)--J;for(;oe<H.length&&rt(H.charAt(oe));)++oe}return new Ts(_i(T.line,J),_i(T.line,oe))},toggleOverwrite:function(T){null!=T&&T==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Be(this.display.cursorDiv,"CodeMirror-overwrite"):Qe(this.display.cursorDiv,"CodeMirror-overwrite"),Ni(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==at()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:qs(function(T,R){j(this,T,R)}),getScrollInfo:function(){var T=this.display.scroller;return{left:T.scrollLeft,top:T.scrollTop,height:T.scrollHeight-gi(this)-this.display.barHeight,width:T.scrollWidth-gi(this)-this.display.barWidth,clientHeight:nn(this),clientWidth:Bi(this)}},scrollIntoView:qs(function(T,R){null==T?(T={from:this.doc.sel.primary().head,to:null},null==R&&(R=this.options.cursorScrollMargin)):"number"==typeof T?T={from:_i(T,0),to:null}:null==T.from&&(T={from:T,to:null}),T.to||(T.to=T.from),T.margin=R||0,null!=T.from.line?function(d,v){ve(d),d.curOp.scrollToPos=v}(this,T):je(this,T.from,T.to,T.margin)}),setSize:qs(function(T,R){var H=this,J=function(pe){return"number"==typeof pe||/^\d+$/.test(String(pe))?pe+"px":pe};null!=T&&(this.display.wrapper.style.width=J(T)),null!=R&&(this.display.wrapper.style.height=J(R)),this.options.lineWrapping&&zo(this);var oe=this.display.viewFrom;this.doc.iter(oe,this.display.viewTo,function(pe){if(pe.widgets)for(var Ee=0;Ee<pe.widgets.length;Ee++)if(pe.widgets[Ee].noHScroll){wa(H,oe,"widget");break}++oe}),this.curOp.forceUpdate=!0,Ni(this,"refresh",this)}),operation:function(T){return Po(this,T)},startOperation:function(){return po(this)},endOperation:function(){return ra(this)},refresh:qs(function(){var T=this.display.cachedTextHeight;So(this),this.curOp.forceUpdate=!0,nr(this),j(this,this.doc.scrollLeft,this.doc.scrollTop),dl(this.display),(null==T||Math.abs(T-Dr(this.display))>.5||this.options.lineWrapping)&&rl(this),Ni(this,"refresh",this)}),swapDoc:qs(function(T){var R=this.doc;return R.cm=null,this.state.selectingText&&this.state.selectingText(),xs(this,T),nr(this),this.display.input.reset(),j(this,T.scrollLeft,T.scrollTop),this.curOp.forceScroll=!0,zn(this,"swapDoc",this,R),R}),phrase:function(T){var R=this.options.phrases;return R&&Object.prototype.hasOwnProperty.call(R,T)?R[T]:T},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},$i(d),d.registerHelper=function(T,R,H){w.hasOwnProperty(T)||(w[T]=d[T]={_global:[]}),w[T][R]=H},d.registerGlobalHelper=function(T,R,H,J){d.registerHelper(T,R,J),w[T]._global.push({pred:H,val:J})}}(go);var ld="iter insert remove copy getEditor constructor".split(" ");for(var wl in Uo.prototype)Uo.prototype.hasOwnProperty(wl)&&ti(ld,wl)<0&&(go.prototype[wl]=function(d){return function(){return d.apply(this.doc,arguments)}}(Uo.prototype[wl]));return $i(Uo),go.inputStyles={textarea:Ns,contenteditable:zs},go.defineMode=function(d){!go.defaults.mode&&"null"!=d&&(go.defaults.mode=d),un.apply(this,arguments)},go.defineMIME=function(d,v){Yi[d]=v},go.defineMode("null",function(){return{token:function(d){return d.skipToEnd()}}}),go.defineMIME("text/plain","null"),go.defineExtension=function(d,v){go.prototype[d]=v},go.defineDocExtension=function(d,v){Uo.prototype[d]=v},go.fromTextArea=function(d,v){if((v=v?At(v):{}).value=d.value,!v.tabindex&&d.tabIndex&&(v.tabindex=d.tabIndex),!v.placeholder&&d.placeholder&&(v.placeholder=d.placeholder),null==v.autofocus){var w=at();v.autofocus=w==d||null!=d.getAttribute("autofocus")&&w==document.body}function T(){d.value=oe.getValue()}var R;if(d.form&&(xi(d.form,"submit",T),!v.leaveSubmitMethodAlone)){var H=d.form;R=H.submit;try{var J=H.submit=function(){T(),H.submit=R,H.submit(),H.submit=J}}catch(pe){}}v.finishInit=function(pe){pe.save=T,pe.getTextArea=function(){return d},pe.toTextArea=function(){pe.toTextArea=isNaN,T(),d.parentNode.removeChild(pe.getWrapperElement()),d.style.display="",d.form&&(Vi(d.form,"submit",T),!v.leaveSubmitMethodAlone&&"function"==typeof d.form.submit&&(d.form.submit=R))}},d.style.display="none";var oe=go(function(pe){return d.parentNode.insertBefore(pe,d.nextSibling)},v);return oe},function(d){d.off=Vi,d.on=xi,d.wheelEventPixels=hl,d.Doc=Uo,d.splitLines=$n,d.countColumn=$t,d.findColumn=vt,d.isWordChar=We,d.Pass=pi,d.signal=Ni,d.Line=ko,d.changeEnd=Xa,d.scrollbarModel=Sa,d.Pos=_i,d.cmpPos=ln,d.modes=ui,d.mimeModes=Yi,d.resolveMode=as,d.getMode=Ls,d.modeExtensions=js,d.extendMode=Co,d.copyState=Ms,d.startState=_o,d.innerMode=Jn,d.commands=bu,d.keyMap=In,d.keyName=As,d.isModifierKey=Is,d.lookupKey=ws,d.normalizeKeyMap=Xs,d.StringStream=Pn,d.SharedTextMarker=Cl,d.TextMarker=Ra,d.LineWidget=Na,d.e_preventDefault=Tn,d.e_stopPropagation=jt,d.e_stop=be,d.addClass=Be,d.contains=se,d.rmClass=Qe,d.keyNames=oi}(go),go.version="5.65.0",go}()},4166:(li,ht,W)=>{!function(O){"use strict";O.defineMode("javascript",function(y,t){var Je,st,e=y.indentUnit,n=t.statementIndent,a=t.jsonld,f=t.json||a,E=!1!==t.trackScope,I=t.typescript,Y=t.wordCharacters||/[\w$\xa1-\uffff]/,ee=function(){function Le(Sn){return{type:Sn,style:"keyword"}}var pt=Le("keyword a"),ri=Le("keyword b"),Di=Le("keyword c"),Ti=Le("keyword d"),Bn=Le("operator"),En={type:"atom",style:"atom"};return{if:Le("if"),while:pt,with:pt,else:ri,do:ri,try:ri,finally:ri,return:Ti,break:Ti,continue:Ti,new:Le("new"),delete:Di,void:Di,throw:Di,debugger:Le("debugger"),var:Le("var"),const:Le("var"),let:Le("var"),function:Le("function"),catch:Le("catch"),for:Le("for"),switch:Le("switch"),case:Le("case"),default:Le("default"),in:Bn,typeof:Bn,instanceof:Bn,true:En,false:En,null:En,undefined:En,NaN:En,Infinity:En,this:Le("this"),class:Le("class"),super:Le("atom"),yield:Di,export:Le("export"),import:Le("import"),extends:Di,await:Di}}(),_e=/[+\-*&%=<>!?|~^@]/,De=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function Ge(Le,pt,ri){return Je=Le,st=ri,pt}function lt(Le,pt){var ri=Le.next();if('"'==ri||"'"==ri)return pt.tokenize=function(Le){return function(pt,ri){var Ti,Di=!1;if(a&&"@"==pt.peek()&&pt.match(De))return ri.tokenize=lt,Ge("jsonld-keyword","meta");for(;null!=(Ti=pt.next())&&(Ti!=Le||Di);)Di=!Di&&"\\"==Ti;return Di||(ri.tokenize=lt),Ge("string","string")}}(ri),pt.tokenize(Le,pt);if("."==ri&&Le.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return Ge("number","number");if("."==ri&&Le.match(".."))return Ge("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ri))return Ge(ri);if("="==ri&&Le.eat(">"))return Ge("=>","operator");if("0"==ri&&Le.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return Ge("number","number");if(/\d/.test(ri))return Le.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),Ge("number","number");if("/"==ri)return Le.eat("*")?(pt.tokenize=Wt,Wt(Le,pt)):Le.eat("/")?(Le.skipToEnd(),Ge("comment","comment")):yn(Le,pt,1)?(function(Le){for(var ri,pt=!1,Di=!1;null!=(ri=Le.next());){if(!pt){if("/"==ri&&!Di)return;"["==ri?Di=!0:Di&&"]"==ri&&(Di=!1)}pt=!pt&&"\\"==ri}}(Le),Le.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),Ge("regexp","string-2")):(Le.eat("="),Ge("operator","operator",Le.current()));if("`"==ri)return pt.tokenize=tt,tt(Le,pt);if("#"==ri&&"!"==Le.peek())return Le.skipToEnd(),Ge("meta","meta");if("#"==ri&&Le.eatWhile(Y))return Ge("variable","property");if("<"==ri&&Le.match("!--")||"-"==ri&&Le.match("->")&&!/\S/.test(Le.string.slice(0,Le.start)))return Le.skipToEnd(),Ge("comment","comment");if(_e.test(ri))return(">"!=ri||!pt.lexical||">"!=pt.lexical.type)&&(Le.eat("=")?("!"==ri||"="==ri)&&Le.eat("="):/[<>*+\-|&?]/.test(ri)&&(Le.eat(ri),">"==ri&&Le.eat(ri))),"?"==ri&&Le.eat(".")?Ge("."):Ge("operator","operator",Le.current());if(Y.test(ri)){Le.eatWhile(Y);var Di=Le.current();if("."!=pt.lastType){if(ee.propertyIsEnumerable(Di)){var Ti=ee[Di];return Ge(Ti.type,Ti.style,Di)}if("async"==Di&&Le.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return Ge("async","keyword",Di)}return Ge("variable","variable",Di)}}function Wt(Le,pt){for(var Di,ri=!1;Di=Le.next();){if("/"==Di&&ri){pt.tokenize=lt;break}ri="*"==Di}return Ge("comment","comment")}function tt(Le,pt){for(var Di,ri=!1;null!=(Di=Le.next());){if(!ri&&("`"==Di||"$"==Di&&Le.eat("{"))){pt.tokenize=lt;break}ri=!ri&&"\\"==Di}return Ge("quasi","string-2",Le.current())}function Se(Le,pt){pt.fatArrowAt&&(pt.fatArrowAt=null);var ri=Le.string.indexOf("=>",Le.start);if(!(ri<0)){if(I){var Di=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Le.string.slice(Le.start,ri));Di&&(ri=Di.index)}for(var Ti=0,Bn=!1,En=ri-1;En>=0;--En){var Sn=Le.string.charAt(En),dn="([{}])".indexOf(Sn);if(dn>=0&&dn<3){if(!Ti){++En;break}if(0==--Ti){"("==Sn&&(Bn=!0);break}}else if(dn>=3&&dn<6)++Ti;else if(Y.test(Sn))Bn=!0;else if(/["'\/`]/.test(Sn))for(;;--En){if(0==En)return;if(Le.string.charAt(En-1)==Sn&&"\\"!=Le.string.charAt(En-2)){En--;break}}else if(Bn&&!Ti){++En;break}}Bn&&!Ti&&(pt.fatArrowAt=En)}}var Qe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function dt(Le,pt,ri,Di,Ti,Bn){this.indented=Le,this.column=pt,this.type=ri,this.prev=Ti,this.info=Bn,null!=Di&&(this.align=Di)}function it(Le,pt){if(!E)return!1;for(var ri=Le.localVars;ri;ri=ri.next)if(ri.name==pt)return!0;for(var Di=Le.context;Di;Di=Di.prev)for(ri=Di.vars;ri;ri=ri.next)if(ri.name==pt)return!0}function Pe(Le,pt,ri,Di,Ti){var Bn=Le.cc;for(Re.state=Le,Re.stream=Ti,Re.marked=null,Re.cc=Bn,Re.style=pt,Le.lexical.hasOwnProperty("align")||(Le.lexical.align=!0);;)if((Bn.length?Bn.pop():f?Ne:Ce)(ri,Di)){for(;Bn.length&&Bn[Bn.length-1].lex;)Bn.pop()();return Re.marked?Re.marked:"variable"==ri&&it(Le,Di)?"variable-2":pt}}var Re={state:null,column:null,marked:null,cc:null};function ge(){for(var Le=arguments.length-1;Le>=0;Le--)Re.cc.push(arguments[Le])}function se(){return ge.apply(null,arguments),!0}function at(Le,pt){for(var ri=pt;ri;ri=ri.next)if(ri.name==Le)return!0;return!1}function Be(Le){var pt=Re.state;if(Re.marked="def",E){if(pt.context)if("var"==pt.lexical.info&&pt.context&&pt.context.block){var ri=ze(Le,pt.context);if(null!=ri)return void(pt.context=ri)}else if(!at(Le,pt.localVars))return void(pt.localVars=new At(Le,pt.localVars));t.globalVars&&!at(Le,pt.globalVars)&&(pt.globalVars=new At(Le,pt.globalVars))}}function ze(Le,pt){if(pt){if(pt.block){var ri=ze(Le,pt.prev);return ri?ri==pt.prev?pt:new wt(ri,pt.vars,!0):null}return at(Le,pt.vars)?pt:new wt(pt.prev,new At(Le,pt.vars),!1)}return null}function St(Le){return"public"==Le||"private"==Le||"protected"==Le||"abstract"==Le||"readonly"==Le}function wt(Le,pt,ri){this.prev=Le,this.vars=pt,this.block=ri}function At(Le,pt){this.name=Le,this.next=pt}var $t=new At("this",new At("arguments",null));function Xt(){Re.state.context=new wt(Re.state.context,Re.state.localVars,!1),Re.state.localVars=$t}function ti(){Re.state.context=new wt(Re.state.context,Re.state.localVars,!0),Re.state.localVars=null}function Wi(){Re.state.localVars=Re.state.context.vars,Re.state.context=Re.state.context.prev}function pi(Le,pt){var ri=function(){var Di=Re.state,Ti=Di.indented;if("stat"==Di.lexical.type)Ti=Di.lexical.indented;else for(var Bn=Di.lexical;Bn&&")"==Bn.type&&Bn.align;Bn=Bn.prev)Ti=Bn.indented;Di.lexical=new dt(Ti,Re.stream.column(),Le,null,Di.lexical,pt)};return ri.lex=!0,ri}function Lt(){var Le=Re.state;Le.lexical.prev&&(")"==Le.lexical.type&&(Le.indented=Le.lexical.indented),Le.lexical=Le.lexical.prev)}function yi(Le){return function pt(ri){return ri==Le?se():";"==Le||"}"==ri||")"==ri||"]"==ri?ge():se(pt)}}function Ce(Le,pt){return"var"==Le?se(pi("vardef",pt),Si,yi(";"),Lt):"keyword a"==Le?se(pi("form"),de,Ce,Lt):"keyword b"==Le?se(pi("form"),Ce,Lt):"keyword d"==Le?Re.stream.match(/^\s*$/,!1)?se():se(pi("stat"),xt,yi(";"),Lt):"debugger"==Le?se(yi(";")):"{"==Le?se(pi("}"),ti,xi,Lt,Wi):";"==Le?se():"if"==Le?("else"==Re.state.lexical.info&&Re.state.cc[Re.state.cc.length-1]==Lt&&Re.state.cc.pop()(),se(pi("form"),de,Ce,Lt,ut)):"function"==Le?se(un):"for"==Le?se(pi("form"),ti,Ut,Ce,Wi,Lt):"class"==Le||I&&"interface"==pt?(Re.marked="keyword",se(pi("form","class"==Le?Le:pt),Co,Lt)):"variable"==Le?I&&"declare"==pt?(Re.marked="keyword",se(Ce)):I&&("module"==pt||"enum"==pt||"type"==pt)&&Re.stream.match(/^\s*\w/,!1)?(Re.marked="keyword","enum"==pt?se(ss):"type"==pt?se(as,yi("operator"),Mi,yi(";")):se(pi("form"),zi,yi("{"),pi("}"),xi,Lt,Lt)):I&&"namespace"==pt?(Re.marked="keyword",se(pi("form"),Ne,Ce,Lt)):I&&"abstract"==pt?(Re.marked="keyword",se(Ce)):se(pi("stat"),Xe):"switch"==Le?se(pi("form"),de,yi("{"),pi("}","switch"),ti,xi,Lt,Lt,Wi):"case"==Le?se(Ne,yi(":")):"default"==Le?se(yi(":")):"catch"==Le?se(pi("form"),Xt,vt,Ce,Lt,Wi):"export"==Le?se(pi("stat"),Pn,Lt):"import"==Le?se(pi("stat"),gn,Lt):"async"==Le?se(Ce):"@"==pt?se(Ne,Ce):ge(pi("stat"),Ne,yi(";"),Lt)}function vt(Le){if("("==Le)return se(Ls,yi(")"))}function Ne(Le,pt){return Te(Le,pt,!1)}function Ve(Le,pt){return Te(Le,pt,!0)}function de(Le){return"("!=Le?ge():se(pi(")"),xt,yi(")"),Lt)}function Te(Le,pt,ri){if(Re.state.fatArrowAt==Re.stream.start){var Di=ri?Ue:_t;if("("==Le)return se(Xt,pi(")"),ni(Ls,")"),Lt,yi("=>"),Di,Wi);if("variable"==Le)return ge(Xt,zi,yi("=>"),Di,Wi)}var Ti=ri?Ft:Kt;return Qe.hasOwnProperty(Le)?se(Ti):"function"==Le?se(un,Ti):"class"==Le||I&&"interface"==pt?(Re.marked="keyword",se(pi("form"),js,Lt)):"keyword c"==Le||"async"==Le?se(ri?Ve:Ne):"("==Le?se(pi(")"),xt,yi(")"),Lt,Ti):"operator"==Le||"spread"==Le?se(ri?Ve:Ne):"["==Le?se(pi("]"),Ss,Lt,Ti):"{"==Le?sn(Vt,"}",null,Ti):"quasi"==Le?ge(ke,Ti):"new"==Le?se(function(Le){return function(pt){return"."==pt?se(Le?Ie:et):"variable"==pt&&I?se(me,Le?Ft:Kt):ge(Le?Ve:Ne)}}(ri)):se()}function xt(Le){return Le.match(/[;\}\)\],]/)?ge():ge(Ne)}function Kt(Le,pt){return","==Le?se(xt):Ft(Le,pt,!1)}function Ft(Le,pt,ri){var Di=0==ri?Kt:Ft,Ti=0==ri?Ne:Ve;if("=>"==Le)return se(Xt,ri?Ue:_t,Wi);if("operator"==Le)return/\+\+|--/.test(pt)||I&&"!"==pt?se(Di):I&&"<"==pt&&Re.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?se(pi(">"),ni(Mi,">"),Lt,Di):"?"==pt?se(Ne,yi(":"),Ti):se(Ti);if("quasi"==Le)return ge(ke,Di);if(";"!=Le){if("("==Le)return sn(Ve,")","call",Di);if("."==Le)return se(Bt,Di);if("["==Le)return se(pi("]"),xt,yi("]"),Lt,Di);if(I&&"as"==pt)return Re.marked="keyword",se(Mi,Di);if("regexp"==Le)return Re.state.lastType=Re.marked="operator",Re.stream.backUp(Re.stream.pos-Re.stream.start-1),se(Ti)}}function ke(Le,pt){return"quasi"!=Le?ge():"${"!=pt.slice(pt.length-2)?se(ke):se(xt,We)}function We(Le){if("}"==Le)return Re.marked="string-2",Re.state.tokenize=tt,se(ke)}function _t(Le){return Se(Re.stream,Re.state),ge("{"==Le?Ce:Ne)}function Ue(Le){return Se(Re.stream,Re.state),ge("{"==Le?Ce:Ve)}function et(Le,pt){if("target"==pt)return Re.marked="keyword",se(Kt)}function Ie(Le,pt){if("target"==pt)return Re.marked="keyword",se(Ft)}function Xe(Le){return":"==Le?se(Lt,Ce):ge(Kt,yi(";"),Lt)}function Bt(Le){if("variable"==Le)return Re.marked="property",se()}function Vt(Le,pt){return"async"==Le?(Re.marked="property",se(Vt)):"variable"==Le||"keyword"==Re.style?(Re.marked="property","get"==pt||"set"==pt?se(bi):(I&&Re.state.fatArrowAt==Re.stream.start&&(ri=Re.stream.match(/^\s*:\s*/,!1))&&(Re.state.fatArrowAt=Re.stream.pos+ri[0].length),se(si))):"number"==Le||"string"==Le?(Re.marked=a?"property":Re.style+" property",se(si)):"jsonld-keyword"==Le?se(si):I&&St(pt)?(Re.marked="keyword",se(Vt)):"["==Le?se(Ne,Ln,yi("]"),si):"spread"==Le?se(Ve,si):"*"==pt?(Re.marked="keyword",se(Vt)):":"==Le?ge(si):void 0;var ri}function bi(Le){return"variable"!=Le?ge(si):(Re.marked="property",se(un))}function si(Le){return":"==Le?se(Ve):"("==Le?ge(un):void 0}function ni(Le,pt,ri){function Di(Ti,Bn){if(ri?ri.indexOf(Ti)>-1:","==Ti){var En=Re.state.lexical;return"call"==En.info&&(En.pos=(En.pos||0)+1),se(function(Sn,dn){return Sn==pt||dn==pt?ge():ge(Le)},Di)}return Ti==pt||Bn==pt?se():ri&&ri.indexOf(";")>-1?ge(Le):se(yi(pt))}return function(Ti,Bn){return Ti==pt||Bn==pt?se():ge(Le,Di)}}function sn(Le,pt,ri){for(var Di=3;Di<arguments.length;Di++)Re.cc.push(arguments[Di]);return se(pi(pt,ri),ni(Le,pt),Lt)}function xi(Le){return"}"==Le?se():ge(Ce,xi)}function Ln(Le,pt){if(I){if(":"==Le)return se(Mi);if("?"==pt)return se(Ln)}}function Vi(Le,pt){if(I&&(":"==Le||"in"==pt))return se(Mi)}function Ni(Le){if(I&&":"==Le)return Re.stream.match(/^\s*\w+\s+is\b/,!1)?se(Ne,Zi,Mi):se(Mi)}function Zi(Le,pt){if("is"==pt)return Re.marked="keyword",se()}function Mi(Le,pt){return"keyof"==pt||"typeof"==pt||"infer"==pt||"readonly"==pt?(Re.marked="keyword",se("typeof"==pt?Ve:Mi)):"variable"==Le||"void"==pt?(Re.marked="type",se(te)):"|"==pt||"&"==pt?se(Mi):"string"==Le||"number"==Le||"atom"==Le?se(te):"["==Le?se(pi("]"),ni(Mi,"]",","),Lt,te):"{"==Le?se(pi("}"),$i,Lt,te):"("==Le?se(ni(be,")"),fn,te):"<"==Le?se(ni(Mi,">"),Mi):"quasi"==Le?ge(jt,te):void 0}function fn(Le){if("=>"==Le)return se(Mi)}function $i(Le){return Le.match(/[\}\)\]]/)?se():","==Le||";"==Le?se($i):ge(Tn,$i)}function Tn(Le,pt){return"variable"==Le||"keyword"==Re.style?(Re.marked="property",se(Tn)):"?"==pt||"number"==Le||"string"==Le?se(Tn):":"==Le?se(Mi):"["==Le?se(yi("variable"),Vi,yi("]"),Tn):"("==Le?ge(jn,Tn):Le.match(/[;\}\)\],]/)?void 0:se()}function jt(Le,pt){return"quasi"!=Le?ge():"${"!=pt.slice(pt.length-2)?se(jt):se(Mi,qe)}function qe(Le){if("}"==Le)return Re.marked="string-2",Re.state.tokenize=tt,se(jt)}function be(Le,pt){return"variable"==Le&&Re.stream.match(/^\s*[?:]/,!1)||"?"==pt?se(be):":"==Le?se(Mi):"spread"==Le?se(be):ge(Mi)}function te(Le,pt){return"<"==pt?se(pi(">"),ni(Mi,">"),Lt,te):"|"==pt||"."==Le||"&"==pt?se(Mi):"["==Le?se(Mi,yi("]"),te):"extends"==pt||"implements"==pt?(Re.marked="keyword",se(Mi)):"?"==pt?se(Mi,yi(":"),Mi):void 0}function me(Le,pt){if("<"==pt)return se(pi(">"),ni(Mi,">"),Lt,te)}function Ke(){return ge(Mi,yt)}function yt(Le,pt){if("="==pt)return se(Mi)}function Si(Le,pt){return"enum"==pt?(Re.marked="keyword",se(ss)):ge(zi,Ln,Gt,Mt)}function zi(Le,pt){return I&&St(pt)?(Re.marked="keyword",se(zi)):"variable"==Le?(Be(pt),se()):"spread"==Le?se(zi):"["==Le?sn($n,"]"):"{"==Le?sn(mn,"}"):void 0}function mn(Le,pt){return"variable"!=Le||Re.stream.match(/^\s*:/,!1)?("variable"==Le&&(Re.marked="property"),"spread"==Le?se(zi):"}"==Le?ge():"["==Le?se(Ne,yi("]"),yi(":"),mn):se(yi(":"),zi,Gt)):(Be(pt),se(Gt))}function $n(){return ge(zi,Gt)}function Gt(Le,pt){if("="==pt)return se(Ve)}function Mt(Le){if(","==Le)return se(Si)}function ut(Le,pt){if("keyword b"==Le&&"else"==pt)return se(pi("form","else"),Ce,Lt)}function Ut(Le,pt){return"await"==pt?se(Ut):"("==Le?se(pi(")"),ui,Lt):void 0}function ui(Le){return"var"==Le?se(Si,Yi):"variable"==Le?se(Yi):ge(Yi)}function Yi(Le,pt){return")"==Le?se():";"==Le?se(Yi):"in"==pt||"of"==pt?(Re.marked="keyword",se(Ne,Yi)):ge(Ne,Yi)}function un(Le,pt){return"*"==pt?(Re.marked="keyword",se(un)):"variable"==Le?(Be(pt),se(un)):"("==Le?se(Xt,pi(")"),ni(Ls,")"),Lt,Ni,Ce,Wi):I&&"<"==pt?se(pi(">"),ni(Ke,">"),Lt,un):void 0}function jn(Le,pt){return"*"==pt?(Re.marked="keyword",se(jn)):"variable"==Le?(Be(pt),se(jn)):"("==Le?se(Xt,pi(")"),ni(Ls,")"),Lt,Ni,Wi):I&&"<"==pt?se(pi(">"),ni(Ke,">"),Lt,jn):void 0}function as(Le,pt){return"keyword"==Le||"variable"==Le?(Re.marked="type",se(as)):"<"==pt?se(pi(">"),ni(Ke,">"),Lt):void 0}function Ls(Le,pt){return"@"==pt&&se(Ne,Ls),"spread"==Le?se(Ls):I&&St(pt)?(Re.marked="keyword",se(Ls)):I&&"this"==Le?se(Ln,Gt):ge(zi,Ln,Gt)}function js(Le,pt){return"variable"==Le?Co(Le,pt):Ms(Le,pt)}function Co(Le,pt){if("variable"==Le)return Be(pt),se(Ms)}function Ms(Le,pt){return"<"==pt?se(pi(">"),ni(Ke,">"),Lt,Ms):"extends"==pt||"implements"==pt||I&&","==Le?("implements"==pt&&(Re.marked="keyword"),se(I?Mi:Ne,Ms)):"{"==Le?se(pi("}"),Jn,Lt):void 0}function Jn(Le,pt){return"async"==Le||"variable"==Le&&("static"==pt||"get"==pt||"set"==pt||I&&St(pt))&&Re.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Re.marked="keyword",se(Jn)):"variable"==Le||"keyword"==Re.style?(Re.marked="property",se(_o,Jn)):"number"==Le||"string"==Le?se(_o,Jn):"["==Le?se(Ne,Ln,yi("]"),_o,Jn):"*"==pt?(Re.marked="keyword",se(Jn)):I&&"("==Le?ge(jn,Jn):";"==Le||","==Le?se(Jn):"}"==Le?se():"@"==pt?se(Ne,Jn):void 0}function _o(Le,pt){if("!"==pt||"?"==pt)return se(_o);if(":"==Le)return se(Mi,Gt);if("="==pt)return se(Ve);var ri=Re.state.lexical.prev;return ge(ri&&"interface"==ri.info?jn:un)}function Pn(Le,pt){return"*"==pt?(Re.marked="keyword",se(is,yi(";"))):"default"==pt?(Re.marked="keyword",se(Ne,yi(";"))):"{"==Le?se(ni(ii,"}"),is,yi(";")):ge(Ce)}function ii(Le,pt){return"as"==pt?(Re.marked="keyword",se(yi("variable"))):"variable"==Le?ge(Ve,ii):void 0}function gn(Le){return"string"==Le?se():"("==Le?ge(Ne):"."==Le?ge(Kt):ge(Wn,fs,is)}function Wn(Le,pt){return"{"==Le?sn(Wn,"}"):("variable"==Le&&Be(pt),"*"==pt&&(Re.marked="keyword"),se(Zn))}function fs(Le){if(","==Le)return se(Wn,fs)}function Zn(Le,pt){if("as"==pt)return Re.marked="keyword",se(Wn)}function is(Le,pt){if("from"==pt)return Re.marked="keyword",se(Ne)}function Ss(Le){return"]"==Le?se():ge(ni(Ve,"]"))}function ss(){return ge(pi("form"),zi,yi("{"),pi("}"),ni(_i,"}"),Lt,Lt)}function _i(){return ge(zi,Gt)}function yn(Le,pt,ri){return pt.tokenize==lt&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(pt.lastType)||"quasi"==pt.lastType&&/\{\s*$/.test(Le.string.slice(0,Le.pos-(ri||0)))}return Wi.lex=!0,Lt.lex=!0,{startState:function(Le){var pt={tokenize:lt,lastType:"sof",cc:[],lexical:new dt((Le||0)-e,0,"block",!1),localVars:t.localVars,context:t.localVars&&new wt(null,null,!1),indented:Le||0};return t.globalVars&&"object"==typeof t.globalVars&&(pt.globalVars=t.globalVars),pt},token:function(Le,pt){if(Le.sol()&&(pt.lexical.hasOwnProperty("align")||(pt.lexical.align=!1),pt.indented=Le.indentation(),Se(Le,pt)),pt.tokenize!=Wt&&Le.eatSpace())return null;var ri=pt.tokenize(Le,pt);return"comment"==Je?ri:(pt.lastType="operator"!=Je||"++"!=st&&"--"!=st?Je:"incdec",Pe(pt,ri,Je,st,Le))},indent:function(Le,pt){if(Le.tokenize==Wt||Le.tokenize==tt)return O.Pass;if(Le.tokenize!=lt)return 0;var Ti,ri=pt&&pt.charAt(0),Di=Le.lexical;if(!/^\s*else\b/.test(pt))for(var Bn=Le.cc.length-1;Bn>=0;--Bn){var En=Le.cc[Bn];if(En==Lt)Di=Di.prev;else if(En!=ut&&En!=Wi)break}for(;("stat"==Di.type||"form"==Di.type)&&("}"==ri||(Ti=Le.cc[Le.cc.length-1])&&(Ti==Kt||Ti==Ft)&&!/^[,\.=+\-*:?[\(]/.test(pt));)Di=Di.prev;n&&")"==Di.type&&"stat"==Di.prev.type&&(Di=Di.prev);var Sn=Di.type,dn=ri==Sn;return"vardef"==Sn?Di.indented+("operator"==Le.lastType||","==Le.lastType?Di.info.length+1:0):"form"==Sn&&"{"==ri?Di.indented:"form"==Sn?Di.indented+e:"stat"==Sn?Di.indented+(function(Le,pt){return"operator"==Le.lastType||","==Le.lastType||_e.test(pt.charAt(0))||/[,.]/.test(pt.charAt(0))}(Le,pt)?n||e:0):"switch"!=Di.info||dn||0==t.doubleIndentSwitch?Di.align?Di.column+(dn?0:1):Di.indented+(dn?0:e):Di.indented+(/^(?:case|default)\b/.test(pt)?e:2*e)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",blockCommentContinue:f?null:" * ",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:a,jsonMode:f,expressionAllowed:yn,skipExpression:function(Le){Pe(Le,"atom","atom","true",new O.StringStream("",2,null))}}}),O.registerHelper("wordChars","javascript",/[\w$]/),O.defineMIME("text/javascript","javascript"),O.defineMIME("text/ecmascript","javascript"),O.defineMIME("application/javascript","javascript"),O.defineMIME("application/x-javascript","javascript"),O.defineMIME("application/ecmascript","javascript"),O.defineMIME("application/json",{name:"javascript",json:!0}),O.defineMIME("application/x-json",{name:"javascript",json:!0}),O.defineMIME("application/manifest+json",{name:"javascript",json:!0}),O.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),O.defineMIME("text/typescript",{name:"javascript",typescript:!0}),O.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(W(8266))},697:function(li){li.exports=function(){"use strict";function ht(ie){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(re){return typeof re}:function(re){return re&&"function"==typeof Symbol&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re})(ie)}var ie,O=(ie={},function(xe){var nt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return ie[nt]=ie[nt]||0,void 0===xe[nt]&&(xe[nt]=ie[nt]++),xe[nt]});function y(ie,re,xe){if(ie)for(var nt=0,gt=ie.length;nt<gt;nt++)re(ie[nt],nt);"function"==typeof xe&&xe()}var t=new function(){var re="introjs_event";this._id=function(xe,nt,gt,zt){return nt+O(gt)+(zt?"_".concat(O(zt)):"")},this.on=function(xe,nt,gt,zt,Dt){var Nt=this._id.apply(this,arguments),ci=function(vi){return gt.call(zt||xe,vi||window.event)};"addEventListener"in xe?xe.addEventListener(nt,ci,Dt):"attachEvent"in xe&&xe.attachEvent("on".concat(nt),ci),xe[re]=xe[re]||{},xe[re][Nt]=ci},this.off=function(xe,nt,gt,zt,Dt){var Nt=this._id.apply(this,arguments),ci=xe[re]&&xe[re][Nt];!ci||("removeEventListener"in xe?xe.removeEventListener(nt,ci,Dt):"detachEvent"in xe&&xe.detachEvent("on".concat(nt),ci),xe[re][Nt]=null)}},e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(ie,re){return ie(re={exports:{}},re.exports),re.exports}var Lt,yi,a=function(ie){return ie&&ie.Math==Math&&ie},f=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof e&&e)||function(){return this}()||Function("return this")(),E=function(ie){try{return!!ie()}catch(re){return!0}},I=!E(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Y=Function.prototype.call,ee=Y.bind?Y.bind(Y):function(){return Y.apply(Y,arguments)},_e={}.propertyIsEnumerable,De=Object.getOwnPropertyDescriptor,st={f:De&&!_e.call({1:2},1)?function(re){var xe=De(this,re);return!!xe&&xe.enumerable}:_e},Ge=function(ie,re){return{enumerable:!(1&ie),configurable:!(2&ie),writable:!(4&ie),value:re}},lt=Function.prototype,Rt=lt.bind,Wt=lt.call,tt=Rt&&Rt.bind(Wt),Oe=Rt?function(ie){return ie&&tt(Wt,ie)}:function(ie){return ie&&function(){return Wt.apply(ie,arguments)}},Se=Oe({}.toString),Qe=Oe("".slice),dt=function(ie){return Qe(Se(ie),8,-1)},it=f.Object,Pe=Oe("".split),Re=E(function(){return!it("z").propertyIsEnumerable(0)})?function(ie){return"String"==dt(ie)?Pe(ie,""):it(ie)}:it,ge=f.TypeError,se=function(ie){if(null==ie)throw ge("Can't call method on "+ie);return ie},at=function(ie){return Re(se(ie))},Be=function(ie){return"function"==typeof ie},ze=function(ie){return"object"==typeof ie?null!==ie:Be(ie)},St=function(ie){return Be(ie)?ie:void 0},wt=function(ie,re){return arguments.length<2?St(f[ie]):f[ie]&&f[ie][re]},At=Oe({}.isPrototypeOf),$t=wt("navigator","userAgent")||"",Xt=f.process,ti=f.Deno,Wi=Xt&&Xt.versions||ti&&ti.version,pi=Wi&&Wi.v8;pi&&(yi=(Lt=pi.split("."))[0]>0&&Lt[0]<4?1:+(Lt[0]+Lt[1])),!yi&&$t&&(!(Lt=$t.match(/Edge\/(\d+)/))||Lt[1]>=74)&&(Lt=$t.match(/Chrome\/(\d+)/))&&(yi=+Lt[1]);var Ce=yi,vt=!!Object.getOwnPropertySymbols&&!E(function(){var ie=Symbol();return!String(ie)||!(Object(ie)instanceof Symbol)||!Symbol.sham&&Ce&&Ce<41}),Ne=vt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ve=f.Object,de=Ne?function(ie){return"symbol"==typeof ie}:function(ie){var re=wt("Symbol");return Be(re)&&At(re.prototype,Ve(ie))},Te=f.String,xt=function(ie){try{return Te(ie)}catch(re){return"Object"}},Kt=f.TypeError,Ft=function(ie){if(Be(ie))return ie;throw Kt(xt(ie)+" is not a function")},ke=function(ie,re){var xe=ie[re];return null==xe?void 0:Ft(xe)},We=f.TypeError,Ue=Object.defineProperty,Ye=function(ie,re){try{Ue(f,ie,{value:re,configurable:!0,writable:!0})}catch(xe){f[ie]=re}return re},et="__core-js_shared__",Xe=f[et]||Ye(et,{}),Bt=n(function(ie){(ie.exports=function(re,xe){return Xe[re]||(Xe[re]=void 0!==xe?xe:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),Vt=f.Object,bi=function(ie){return Vt(se(ie))},si=Oe({}.hasOwnProperty),ni=Object.hasOwn||function(re,xe){return si(bi(re),xe)},sn=0,xi=Math.random(),Ln=Oe(1..toString),Vi=function(ie){return"Symbol("+(void 0===ie?"":ie)+")_"+Ln(++sn+xi,36)},Ni=Bt("wks"),Zi=f.Symbol,Mi=Zi&&Zi.for,fn=Ne?Zi:Zi&&Zi.withoutSetter||Vi,$i=function(ie){if(!ni(Ni,ie)||!vt&&"string"!=typeof Ni[ie]){var re="Symbol."+ie;Ni[ie]=vt&&ni(Zi,ie)?Zi[ie]:Ne&&Mi?Mi(re):fn(re)}return Ni[ie]},Tn=f.TypeError,jt=$i("toPrimitive"),qe=function(ie,re){if(!ze(ie)||de(ie))return ie;var nt,xe=ke(ie,jt);if(xe){if(void 0===re&&(re="default"),nt=ee(xe,ie,re),!ze(nt)||de(nt))return nt;throw Tn("Can't convert object to primitive value")}return void 0===re&&(re="number"),function(ie,re){var xe,nt;if("string"===re&&Be(xe=ie.toString)&&!ze(nt=ee(xe,ie))||Be(xe=ie.valueOf)&&!ze(nt=ee(xe,ie))||"string"!==re&&Be(xe=ie.toString)&&!ze(nt=ee(xe,ie)))return nt;throw We("Can't convert object to primitive value")}(ie,re)},be=function(ie){var re=qe(ie,"string");return de(re)?re:re+""},te=f.document,me=ze(te)&&ze(te.createElement),Ke=function(ie){return me?te.createElement(ie):{}},yt=!I&&!E(function(){return 7!=Object.defineProperty(Ke("div"),"a",{get:function(){return 7}}).a}),Si=Object.getOwnPropertyDescriptor,mn={f:I?Si:function(re,xe){if(re=at(re),xe=be(xe),yt)try{return Si(re,xe)}catch(nt){}if(ni(re,xe))return Ge(!ee(st.f,re,xe),re[xe])}},$n=f.String,Gt=f.TypeError,Mt=function(ie){if(ze(ie))return ie;throw Gt($n(ie)+" is not an object")},ut=f.TypeError,Ut=Object.defineProperty,Yi={f:I?Ut:function(re,xe,nt){if(Mt(re),xe=be(xe),Mt(nt),yt)try{return Ut(re,xe,nt)}catch(gt){}if("get"in nt||"set"in nt)throw ut("Accessors not supported");return"value"in nt&&(re[xe]=nt.value),re}},un=I?function(ie,re,xe){return Yi.f(ie,re,Ge(1,xe))}:function(ie,re,xe){return ie[re]=xe,ie},jn=Oe(Function.toString);Be(Xe.inspectSource)||(Xe.inspectSource=function(ie){return jn(ie)});var gn,Wn,fs,as=Xe.inspectSource,Ls=f.WeakMap,js=Be(Ls)&&/native code/.test(as(Ls)),Co=Bt("keys"),Ms=function(ie){return Co[ie]||(Co[ie]=Vi(ie))},Jn={},_o="Object already initialized",Pn=f.TypeError;if(js||Xe.state){var Ss=Xe.state||(Xe.state=new(0,f.WeakMap)),ss=Oe(Ss.get),_i=Oe(Ss.has),ln=Oe(Ss.set);gn=function(ie,re){if(_i(Ss,ie))throw new Pn(_o);return re.facade=ie,ln(Ss,ie,re),re},Wn=function(ie){return ss(Ss,ie)||{}},fs=function(ie){return _i(Ss,ie)}}else{var yn=Ms("state");Jn[yn]=!0,gn=function(ie,re){if(ni(ie,yn))throw new Pn(_o);return re.facade=ie,un(ie,yn,re),re},Wn=function(ie){return ni(ie,yn)?ie[yn]:{}},fs=function(ie){return ni(ie,yn)}}var Le={set:gn,get:Wn,has:fs,enforce:function(ie){return fs(ie)?Wn(ie):gn(ie,{})},getterFor:function(ie){return function(re){var xe;if(!ze(re)||(xe=Wn(re)).type!==ie)throw Pn("Incompatible receiver, "+ie+" required");return xe}}},pt=Function.prototype,ri=I&&Object.getOwnPropertyDescriptor,Di=ni(pt,"name"),En={EXISTS:Di,PROPER:Di&&"something"===function(){}.name,CONFIGURABLE:Di&&(!I||I&&ri(pt,"name").configurable)},Sn=n(function(ie){var re=En.CONFIGURABLE,xe=Le.get,nt=Le.enforce,gt=String(String).split("String");(ie.exports=function(zt,Dt,Nt,ci){var In,oi=!!ci&&!!ci.unsafe,vi=!!ci&&!!ci.enumerable,Rn=!!ci&&!!ci.noTargetGet,vn=ci&&void 0!==ci.name?ci.name:Dt;Be(Nt)&&("Symbol("===String(vn).slice(0,7)&&(vn="["+String(vn).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!ni(Nt,"name")||re&&Nt.name!==vn)&&un(Nt,"name",vn),(In=nt(Nt)).source||(In.source=gt.join("string"==typeof vn?vn:""))),zt!==f?(oi?!Rn&&zt[Dt]&&(vi=!0):delete zt[Dt],vi?zt[Dt]=Nt:un(zt,Dt,Nt)):vi?zt[Dt]=Nt:Ye(Dt,Nt)})(Function.prototype,"toString",function(){return Be(this)&&xe(this).source||as(this)})}),dn=Math.ceil,Qs=Math.floor,Eo=function(ie){var re=+ie;return re!=re||0===re?0:(re>0?Qs:dn)(re)},Bs=Math.max,Hs=Math.min,pr=function(ie,re){var xe=Eo(ie);return xe<0?Bs(xe+re,0):Hs(xe,re)},Vn=Math.min,To=function(ie){return ie>0?Vn(Eo(ie),9007199254740991):0},Rs=function(ie){return To(ie.length)},$o=function(ie){return function(re,xe,nt){var Nt,gt=at(re),zt=Rs(gt),Dt=pr(nt,zt);if(ie&&xe!=xe){for(;zt>Dt;)if((Nt=gt[Dt++])!=Nt)return!0}else for(;zt>Dt;Dt++)if((ie||Dt in gt)&&gt[Dt]===xe)return ie||Dt||0;return!ie&&-1}},Jo={includes:$o(!0),indexOf:$o(!1)},no=Jo.indexOf,$s=Oe([].push),vo=function(ie,re){var zt,xe=at(ie),nt=0,gt=[];for(zt in xe)!ni(Jn,zt)&&ni(xe,zt)&&$s(gt,zt);for(;re.length>nt;)ni(xe,zt=re[nt++])&&(~no(gt,zt)||$s(gt,zt));return gt},Js=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ha=Js.concat("length","prototype"),Kr={f:Object.getOwnPropertyNames||function(re){return vo(re,ha)}},fr={f:Object.getOwnPropertySymbols},Ia=Oe([].concat),Tr=wt("Reflect","ownKeys")||function(re){var xe=Kr.f(Mt(re)),nt=fr.f;return nt?Ia(xe,nt(re)):xe},Aa=function(ie,re){for(var xe=Tr(re),nt=Yi.f,gt=mn.f,zt=0;zt<xe.length;zt++){var Dt=xe[zt];ni(ie,Dt)||nt(ie,Dt,gt(re,Dt))}},Oa=/#|\.prototype\./,gr=function(ie,re){var xe=$r[Wa(ie)];return xe==ao||xe!=Jr&&(Be(re)?E(re):!!re)},Wa=gr.normalize=function(ie){return String(ie).replace(Oa,".").toLowerCase()},$r=gr.data={},Jr=gr.NATIVE="N",ao=gr.POLYFILL="P",ys=gr,Vs=mn.f,Ys=function(ie,re){var Dt,Nt,ci,oi,vi,xe=ie.target,nt=ie.global,gt=ie.stat;if(Dt=nt?f:gt?f[xe]||Ye(xe,{}):(f[xe]||{}).prototype)for(Nt in re){if(oi=re[Nt],ci=ie.noTargetGet?(vi=Vs(Dt,Nt))&&vi.value:Dt[Nt],!ys(nt?Nt:xe+(gt?".":"#")+Nt,ie.forced)&&void 0!==ci){if(typeof oi==typeof ci)continue;Aa(oi,ci)}(ie.sham||ci&&ci.sham)&&un(oi,"sham",!0),Sn(Dt,Nt,oi,ie)}},lo={};lo[$i("toStringTag")]="z";var Jt,qo="[object z]"===String(lo),co=$i("toStringTag"),so=f.Object,Zr="Arguments"==dt(function(){return arguments}()),Qo=qo?dt:function(ie){var re,xe,nt;return void 0===ie?"Undefined":null===ie?"Null":"string"==typeof(xe=function(ie,re){try{return ie[re]}catch(xe){}}(re=so(ie),co))?xe:Zr?dt(re):"Object"==(nt=dt(re))&&Be(re.callee)?"Arguments":nt},wr=f.String,ps=function(ie){if("Symbol"===Qo(ie))throw TypeError("Cannot convert a Symbol value to a string");return wr(ie)},lr=function(){var ie=Mt(this),re="";return ie.global&&(re+="g"),ie.ignoreCase&&(re+="i"),ie.multiline&&(re+="m"),ie.dotAll&&(re+="s"),ie.unicode&&(re+="u"),ie.sticky&&(re+="y"),re},ls=f.RegExp,mr=E(function(){var ie=ls("a","y");return ie.lastIndex=2,null!=ie.exec("abcd")}),Ta=E(function(){var ie=ls("^r","gy");return ie.lastIndex=2,null!=ie.exec("str")}),ko={UNSUPPORTED_Y:mr,BROKEN_CARET:Ta},uo=Object.keys||function(re){return vo(re,Js)},_r=I?Object.defineProperties:function(re,xe){Mt(re);for(var Nt,nt=at(xe),gt=uo(xe),zt=gt.length,Dt=0;zt>Dt;)Yi.f(re,Nt=gt[Dt++],nt[Nt]);return re},ka=wt("document","documentElement"),pa="prototype",ce="script",z=Ms("IE_PROTO"),P=function(){},F=function(ie){return"<script>"+ie+"</"+ce+">"},le=function(ie){ie.write(F("")),ie.close();var re=ie.parentWindow.Object;return ie=null,re},Fi=function(){try{Jt=new ActiveXObject("htmlfile")}catch(re){}Fi="undefined"!=typeof document?document.domain&&Jt?le(Jt):function(){var xe,ie=Ke("iframe");return ie.style.display="none",ka.appendChild(ie),ie.src=String("javascript:"),(xe=ie.contentWindow.document).open(),xe.write(F("document.F=Object")),xe.close(),xe.F}():le(Jt);for(var ie=Js.length;ie--;)delete Fi[pa][Js[ie]];return Fi()};Jn[z]=!0;var Dn=Object.create||function(re,xe){var nt;return null!==re?(P[pa]=Mt(re),nt=new P,P[pa]=null,nt[z]=re):nt=Fi(),void 0===xe?nt:_r(nt,xe)},es=f.RegExp,cs=E(function(){var ie=es(".","s");return!(ie.dotAll&&ie.exec("\n")&&"s"===ie.flags)}),os=f.RegExp,Ds=E(function(){var ie=os("(?<a>b)","g");return"b"!==ie.exec("b").groups.a||"bc"!=="b".replace(ie,"$<a>c")}),zn=Le.get,ho=Bt("native-string-replace",String.prototype.replace),_n=RegExp.prototype.exec,Lo=_n,Or=Oe("".charAt),Bo=Oe("".indexOf),fa=Oe("".replace),er=Oe("".slice),tr=function(){var ie=/a/,re=/b*/g;return ee(_n,ie,"a"),ee(_n,re,"a"),0!==ie.lastIndex||0!==re.lastIndex}(),ic=ko.UNSUPPORTED_Y||ko.BROKEN_CARET,fe=void 0!==/()??/.exec("")[1];(tr||fe||ic||cs||Ds)&&(Lo=function(re){var Dt,Nt,ci,oi,vi,Rn,vn,xe=this,nt=zn(xe),gt=ps(re),zt=nt.raw;if(zt)return zt.lastIndex=xe.lastIndex,Dt=ee(Lo,zt,gt),xe.lastIndex=zt.lastIndex,Dt;var In=nt.groups,fo=ic&&xe.sticky,Xs=ee(lr,xe),ws=xe.source,Is=0,to=gt;if(fo&&(Xs=fa(Xs,"y",""),-1===Bo(Xs,"g")&&(Xs+="g"),to=er(gt,xe.lastIndex),xe.lastIndex>0&&(!xe.multiline||xe.multiline&&"\n"!==Or(gt,xe.lastIndex-1))&&(ws="(?: "+ws+")",to=" "+to,Is++),Nt=new RegExp("^(?:"+ws+")",Xs)),fe&&(Nt=new RegExp("^"+ws+"$(?!\\s)",Xs)),tr&&(ci=xe.lastIndex),oi=ee(_n,fo?Nt:xe,to),fo?oi?(oi.input=er(oi.input,Is),oi[0]=er(oi[0],Is),oi.index=xe.lastIndex,xe.lastIndex+=oi[0].length):xe.lastIndex=0:tr&&oi&&(xe.lastIndex=xe.global?oi.index+oi[0].length:ci),fe&&oi&&oi.length>1&&ee(ho,oi[0],Nt,function(){for(vi=1;vi<arguments.length-2;vi++)void 0===arguments[vi]&&(oi[vi]=void 0)}),oi&&In)for(oi.groups=Rn=Dn(null),vi=0;vi<In.length;vi++)Rn[(vn=In[vi])[0]]=oi[vn[1]];return oi});var G=Lo;Ys({target:"RegExp",proto:!0,forced:/./.exec!==G},{exec:G});var Q=$i("species"),Me=RegExp.prototype,$e=function(ie,re,xe,nt){var gt=$i(ie),zt=!E(function(){var oi={};return oi[gt]=function(){return 7},7!=""[ie](oi)}),Dt=zt&&!E(function(){var oi=!1,vi=/a/;return"split"===ie&&((vi={}).constructor={},vi.constructor[Q]=function(){return vi},vi.flags="",vi[gt]=/./[gt]),vi.exec=function(){return oi=!0,null},vi[gt](""),!oi});if(!zt||!Dt||xe){var Nt=Oe(/./[gt]),ci=re(gt,""[ie],function(oi,vi,Rn,vn,In){var fo=Oe(oi),Xs=vi.exec;return Xs===G||Xs===Me.exec?zt&&!In?{done:!0,value:Nt(vi,Rn,vn)}:{done:!0,value:fo(Rn,vi,vn)}:{done:!1}});Sn(String.prototype,ie,ci[0]),Sn(Me,gt,ci[1])}nt&&un(Me[gt],"sham",!0)},Ct=Oe("".charAt),It=Oe("".charCodeAt),Zt=Oe("".slice),gi=function(ie){return function(re,xe){var Dt,Nt,nt=ps(se(re)),gt=Eo(xe),zt=nt.length;return gt<0||gt>=zt?ie?"":void 0:(Dt=It(nt,gt))<55296||Dt>56319||gt+1===zt||(Nt=It(nt,gt+1))<56320||Nt>57343?ie?Ct(nt,gt):Dt:ie?Zt(nt,gt,gt+2):Nt-56320+(Dt-55296<<10)+65536}},nn=(gi(!1),gi(!0)),Nn=function(ie,re,xe){return re+(xe?nn(ie,re).length:1)},An=f.TypeError,hn=function(ie,re){var xe=ie.exec;if(Be(xe)){var nt=ee(xe,ie,re);return null!==nt&&Mt(nt),nt}if("RegExp"===dt(ie))return ee(G,ie,re);throw An("RegExp#exec called on incompatible receiver")};$e("match",function(ie,re,xe){return[function(gt){var zt=se(this),Dt=null==gt?void 0:ke(gt,ie);return Dt?ee(Dt,gt,zt):new RegExp(gt)[ie](ps(zt))},function(nt){var gt=Mt(this),zt=ps(nt),Dt=xe(re,gt,zt);if(Dt.done)return Dt.value;if(!gt.global)return hn(gt,zt);var Nt=gt.unicode;gt.lastIndex=0;for(var vi,ci=[],oi=0;null!==(vi=hn(gt,zt));){var Rn=ps(vi[0]);ci[oi]=Rn,""===Rn&&(gt.lastIndex=Nn(zt,To(gt.lastIndex),Nt)),oi++}return 0===oi?null:ci}]});var On=Array.isArray||function(re){return"Array"==dt(re)},kn=function(ie,re,xe){var nt=be(re);nt in ie?Yi.f(ie,nt,Ge(0,xe)):ie[nt]=xe},rs=function(){},Cs=[],Us=wt("Reflect","construct"),oo=/^\s*(?:class|function)\b/,Qr=Oe(oo.exec),ir=!oo.exec(rs),Zs=function(ie){if(!Be(ie))return!1;try{return Us(rs,Cs,ie),!0}catch(re){return!1}},zo=!Us||E(function(){var ie;return Zs(Zs.call)||!Zs(Object)||!Zs(function(){ie=!0})||ie})?function(ie){if(!Be(ie))return!1;switch(Qo(ie)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return ir||!!Qr(oo,as(ie))}:Zs,nr=$i("species"),La=f.Array,br=function(ie,re){return new(function(ie){var re;return On(ie)&&(zo(re=ie.constructor)&&(re===La||On(re.prototype))||ze(re)&&null===(re=re[nr]))&&(re=void 0),void 0===re?La:re}(ie))(0===re?0:re)},kr=$i("species"),ta=function(ie){return Ce>=51||!E(function(){var re=[];return(re.constructor={})[kr]=function(){return{foo:1}},1!==re[ie](Boolean).foo})},on=$i("isConcatSpreadable"),an=9007199254740991,Fn="Maximum allowed index exceeded",Un=f.TypeError,us=Ce>=51||!E(function(){var ie=[];return ie[on]=!1,ie.concat()[0]!==ie}),wo=ta("concat"),ds=function(ie){if(!ze(ie))return!1;var re=ie[on];return void 0!==re?!!re:On(ie)};Ys({target:"Array",proto:!0,forced:!us||!wo},{concat:function(re){var zt,Dt,Nt,ci,oi,xe=bi(this),nt=br(xe,0),gt=0;for(zt=-1,Nt=arguments.length;zt<Nt;zt++)if(ds(oi=-1===zt?xe:arguments[zt])){if(gt+(ci=Rs(oi))>an)throw Un(Fn);for(Dt=0;Dt<ci;Dt++,gt++)Dt in oi&&kn(nt,gt,oi[Dt])}else{if(gt>=an)throw Un(Fn);kn(nt,gt++,oi)}return nt.length=gt,nt}}),qo||Sn(Object.prototype,"toString",qo?{}.toString:function(){return"[object "+Qo(this)+"]"},{unsafe:!0});var sl=En.PROPER,ol="toString",_s=RegExp.prototype,Dr=_s[ol],Ho=Oe(lr);(E(function(){return"/a/b"!=Dr.call({source:"a",flags:"b"})})||sl&&Dr.name!=ol)&&Sn(RegExp.prototype,ol,function(){var re=Mt(this),xe=ps(re.source),nt=re.flags;return"/"+xe+"/"+ps(void 0===nt&&At(_s,re)&&!("flags"in _s)?Ho(re):nt)},{unsafe:!0});var Lr=Function.prototype,rl=Lr.apply,jo=Lr.call,So="object"==typeof Reflect&&Reflect.apply||(Lr.bind?jo.bind(rl):function(){return jo.apply(rl,arguments)}),wa=$i("match"),ia=function(ie){var re;return ze(ie)&&(void 0!==(re=ie[wa])?!!re:"RegExp"==dt(ie))},cr=f.TypeError,ga=$i("species"),al=function(ie,re){var nt,xe=Mt(ie).constructor;return void 0===xe||null==(nt=Mt(xe)[ga])?re:function(ie){if(zo(ie))return ie;throw cr(xt(ie)+" is not a constructor")}(nt)},ll=Oe([].slice),Pr=ko.UNSUPPORTED_Y,ma=4294967295,Ec=Math.min,cl=[].push,Rr=Oe(/./.exec),_a=Oe(cl),Pa=Oe("".slice),na=!E(function(){var ie=/(?:)/,re=ie.exec;ie.exec=function(){return re.apply(this,arguments)};var xe="ab".split(ie);return 2!==xe.length||"a"!==xe[0]||"b"!==xe[1]});function xr(ie,re){if(ie instanceof SVGElement){var xe=ie.getAttribute("class")||"";xe.match(re)||ie.setAttribute("class","".concat(xe," ").concat(re))}else void 0!==ie.classList?y(re.split(" "),function(gt){ie.classList.add(gt)}):ie.className.match(re)||(ie.className+=" ".concat(re))}function sa(ie,re){var xe="";return ie.currentStyle?xe=ie.currentStyle[re]:document.defaultView&&document.defaultView.getComputedStyle&&(xe=document.defaultView.getComputedStyle(ie,null).getPropertyValue(re)),xe&&xe.toLowerCase?xe.toLowerCase():xe}function nc(ie){var re=ie.element;if(this._options.scrollToElement){var xe=function(ie){var re=window.getComputedStyle(ie),xe="absolute"===re.position,nt=/(auto|scroll)/;if("fixed"===re.position)return document.body;for(var gt=ie;gt=gt.parentElement;)if(re=window.getComputedStyle(gt),(!xe||"static"!==re.position)&&nt.test(re.overflow+re.overflowY+re.overflowX))return gt;return document.body}(re);xe!==document.body&&(xe.scrollTop=re.offsetTop-xe.offsetTop)}}function sc(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var ie=document.documentElement;return{width:ie.clientWidth,height:ie.clientHeight}}function q(ie,re,xe){var gt,nt=re.element;if("off"!==ie&&this._options.scrollToElement&&(gt="tooltip"===ie?xe.getBoundingClientRect():nt.getBoundingClientRect(),!function(ie){var re=ie.getBoundingClientRect();return re.top>=0&&re.left>=0&&re.bottom+80<=window.innerHeight&&re.right<=window.innerWidth}(nt))){var zt=sc().height;gt.bottom-(gt.bottom-gt.top)<0||nt.clientHeight>zt?window.scrollBy(0,gt.top-(zt/2-gt.height/2)-this._options.scrollPadding):window.scrollBy(0,gt.top-(zt/2-gt.height/2)+this._options.scrollPadding)}}function K(ie){ie.setAttribute("role","button"),ie.tabIndex=0}$e("split",function(ie,re,xe){var nt;return nt="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(gt,zt){var Dt=ps(se(this)),Nt=void 0===zt?ma:zt>>>0;if(0===Nt)return[];if(void 0===gt)return[Dt];if(!ia(gt))return ee(re,Dt,gt,Nt);for(var vn,In,fo,ci=[],vi=0,Rn=new RegExp(gt.source,(gt.ignoreCase?"i":"")+(gt.multiline?"m":"")+(gt.unicode?"u":"")+(gt.sticky?"y":"")+"g");(vn=ee(G,Rn,Dt))&&!((In=Rn.lastIndex)>vi&&(_a(ci,Pa(Dt,vi,vn.index)),vn.length>1&&vn.index<Dt.length&&So(cl,ci,ll(vn,1)),fo=vn[0].length,vi=In,ci.length>=Nt));)Rn.lastIndex===vn.index&&Rn.lastIndex++;return vi===Dt.length?(fo||!Rr(Rn,""))&&_a(ci,""):_a(ci,Pa(Dt,vi)),ci.length>Nt?ll(ci,0,Nt):ci}:"0".split(void 0,0).length?function(gt,zt){return void 0===gt&&0===zt?[]:ee(re,this,gt,zt)}:re,[function(zt,Dt){var Nt=se(this),ci=null==zt?void 0:ke(zt,ie);return ci?ee(ci,zt,Nt,Dt):ee(nt,ps(Nt),zt,Dt)},function(gt,zt){var Dt=Mt(this),Nt=ps(gt),ci=xe(nt,Dt,Nt,zt,nt!==re);if(ci.done)return ci.value;var oi=al(Dt,RegExp),vi=Dt.unicode,vn=new oi(Pr?"^(?:"+Dt.source+")":Dt,(Dt.ignoreCase?"i":"")+(Dt.multiline?"m":"")+(Dt.unicode?"u":"")+(Pr?"g":"y")),In=void 0===zt?ma:zt>>>0;if(0===In)return[];if(0===Nt.length)return null===hn(vn,Nt)?[Nt]:[];for(var fo=0,Xs=0,ws=[];Xs<Nt.length;){vn.lastIndex=Pr?0:Xs;var to,Is=hn(vn,Pr?Pa(Nt,Xs):Nt);if(null===Is||(to=Ec(To(vn.lastIndex+(Pr?Xs:0)),Nt.length))===fo)Xs=Nn(Nt,Xs,vi);else{if(_a(ws,Pa(Nt,fo,Xs)),ws.length===In)return ws;for(var As=1;As<=Is.length-1;As++)if(_a(ws,Is[As]),ws.length===In)return ws;Xs=fo=to}}return _a(ws,Pa(Nt,fo)),ws}]},!na,Pr);var j=Object.assign,ae=Object.defineProperty,ve=Oe([].concat),je=!j||E(function(){if(I&&1!==j({b:1},j(ae({},"a",{enumerable:!0,get:function(){ae(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var ie={},re={},xe=Symbol(),nt="abcdefghijklmnopqrst";return ie[xe]=7,nt.split("").forEach(function(gt){re[gt]=gt}),7!=j({},ie)[xe]||uo(j({},re)).join("")!=nt})?function(re,xe){for(var nt=bi(re),gt=arguments.length,zt=1,Dt=fr.f,Nt=st.f;gt>zt;)for(var vn,ci=Re(arguments[zt++]),oi=Dt?ve(uo(ci),Dt(ci)):uo(ci),vi=oi.length,Rn=0;vi>Rn;)vn=oi[Rn++],(!I||ee(Nt,ci,vn))&&(nt[vn]=ci[vn]);return nt}:j;function ft(ie){var re=ie.parentNode;return!(!re||"HTML"===re.nodeName)&&("fixed"===sa(ie,"position")||ft(re))}function Ot(ie,re){var xe=document.body,nt=document.documentElement,gt=window.pageYOffset||nt.scrollTop||xe.scrollTop,zt=window.pageXOffset||nt.scrollLeft||xe.scrollLeft;re=re||xe;var Dt=ie.getBoundingClientRect(),Nt=re.getBoundingClientRect(),ci=sa(re,"position"),oi={width:Dt.width,height:Dt.height};return"body"!==re.tagName.toLowerCase()&&"relative"===ci||"sticky"===ci?Object.assign(oi,{top:Dt.top-Nt.top,left:Dt.left-Nt.left}):ft(ie)?Object.assign(oi,{top:Dt.top,left:Dt.left}):Object.assign(oi,{top:Dt.top+gt,left:Dt.left+zt})}Ys({target:"Object",stat:!0,forced:Object.assign!==je},{assign:je});var ai=Math.floor,Xi=Oe("".charAt),qn=Oe("".replace),Cn=Oe("".slice),vs=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Ps=/\$([$&'`]|\d{1,2})/g,Sa=function(ie,re,xe,nt,gt,zt){var Dt=xe+ie.length,Nt=nt.length,ci=Ps;return void 0!==gt&&(gt=bi(gt),ci=vs),qn(zt,ci,function(oi,vi){var Rn;switch(Xi(vi,0)){case"$":return"$";case"&":return ie;case"`":return Cn(re,0,xe);case"'":return Cn(re,Dt);case"<":Rn=gt[Cn(vi,1,-1)];break;default:var vn=+vi;if(0===vn)return oi;if(vn>Nt){var In=ai(vn/10);return 0===In?oi:In<=Nt?void 0===nt[In-1]?Xi(vi,1):nt[In-1]+Xi(vi,1):oi}Rn=nt[vn-1]}return void 0===Rn?"":Rn})},ur=$i("replace"),oa=Math.max,po=Math.min,ra=Oe([].concat),rr=Oe([].push),Nr=Oe("".indexOf),oc=Oe("".slice),Ol=function(ie){return void 0===ie?ie:String(ie)},ul="$0"==="a".replace(/./,"$0"),kl=!!/./[ur]&&""===/./[ur]("a","$0"),Po=!E(function(){var ie=/./;return ie.exec=function(){var re=[];return re.groups={a:"7"},re},"7"!=="".replace(ie,"$<a>")});function Do(ie,re){if(ie instanceof SVGElement){var xe=ie.getAttribute("class")||"";ie.setAttribute("class",xe.replace(re,"").replace(/^\s+|\s+$/g,""))}else ie.className=ie.className.replace(re,"").replace(/^\s+|\s+$/g,"")}function qs(ie,re){var xe="";if(ie.style.cssText&&(xe+=ie.style.cssText),"string"==typeof re)xe+=re;else for(var nt in re)xe+="".concat(nt,":").concat(re[nt],";");ie.style.cssText=xe}function Es(ie){if(ie){if(!this._introItems[this._currentStep])return;var re=this._introItems[this._currentStep],xe=Ot(re.element,this._targetElement),nt=this._options.helperElementPadding;ft(re.element)?xr(ie,"introjs-fixedTooltip"):Do(ie,"introjs-fixedTooltip"),"floating"===re.position&&(nt=0),qs(ie,{width:"".concat(xe.width+nt,"px"),height:"".concat(xe.height+nt,"px"),top:"".concat(xe.top-nt/2,"px"),left:"".concat(xe.left-nt/2,"px")})}}$e("replace",function(ie,re,xe){var nt=kl?"$":"$0";return[function(zt,Dt){var Nt=se(this),ci=null==zt?void 0:ke(zt,ur);return ci?ee(ci,zt,Nt,Dt):ee(re,ps(Nt),zt,Dt)},function(gt,zt){var Dt=Mt(this),Nt=ps(gt);if("string"==typeof zt&&-1===Nr(zt,nt)&&-1===Nr(zt,"$<")){var ci=xe(re,Dt,Nt,zt);if(ci.done)return ci.value}var oi=Be(zt);oi||(zt=ps(zt));var vi=Dt.global;if(vi){var Rn=Dt.unicode;Dt.lastIndex=0}for(var vn=[];;){var In=hn(Dt,Nt);if(null===In||(rr(vn,In),!vi))break;""===ps(In[0])&&(Dt.lastIndex=Nn(Nt,To(Dt.lastIndex),Rn))}for(var Xs="",ws=0,Is=0;Is<vn.length;Is++){for(var to=ps((In=vn[Is])[0]),As=oa(po(Eo(In.index),Nt.length),0),Yo=[],hr=1;hr<In.length;hr++)rr(Yo,Ol(In[hr]));var ya=In.groups;if(oi){var Ha=ra([to],Yo,As,Nt);void 0!==ya&&rr(Ha,ya);var Gc=ps(So(zt,void 0,Ha))}else Gc=Sa(to,Nt,As,Yo,ya,zt);As>=ws&&(Xs+=oc(Nt,ws,As)+Gc,ws=As+to.length)}return Xs+oc(Nt,ws)}]},!Po||!ul||kl);var Ll=$i("unscopables"),Lc=Array.prototype;null==Lc[Ll]&&Yi.f(Lc,Ll,{configurable:!0,value:Dn(null)});var wc=Jo.includes;Ys({target:"Array",proto:!0},{includes:function(re){return wc(this,re,arguments.length>1?arguments[1]:void 0)}}),function(ie){Lc[Ll][ie]=!0}("includes");var qu=ta("slice"),Pc=$i("species"),Nc=f.Array,Ou=Math.max;Ys({target:"Array",proto:!0,forced:!qu},{slice:function(re,xe){var Nt,ci,oi,nt=at(this),gt=Rs(nt),zt=pr(re,gt),Dt=pr(void 0===xe?gt:xe,gt);if(On(nt)&&((zo(Nt=nt.constructor)&&(Nt===Nc||On(Nt.prototype))||ze(Nt)&&null===(Nt=Nt[Pc]))&&(Nt=void 0),Nt===Nc||void 0===Nt))return ll(nt,zt,Dt);for(ci=new(void 0===Nt?Nc:Nt)(Ou(Dt-zt,0)),oi=0;zt<Dt;zt++,oi++)zt in nt&&kn(ci,oi,nt[zt]);return ci.length=oi,ci}});var uu=f.TypeError,Qu=function(ie){if(ia(ie))throw uu("The method doesn't accept regular expressions");return ie},dl=$i("match"),Vo=Oe("".indexOf);Ys({target:"String",proto:!0,forced:!function(ie){var re=/./;try{"/./"[ie](re)}catch(xe){try{return re[dl]=!1,"/./"[ie](re)}catch(nt){}}return!1}("includes")},{includes:function(re){return!!~Vo(ps(se(this)),ps(Qu(re)),arguments.length>1?arguments[1]:void 0)}});var Sc=function(ie,re){var xe=[][ie];return!!xe&&E(function(){xe.call(null,re||function(){throw 1},1)})},Da=Oe([].join),rc=Re!=Object,Ya=Sc("join",",");Ys({target:"Array",proto:!0,forced:rc||!Ya},{join:function(re){return Da(at(this),void 0===re?",":re)}});var Ir=Oe(Oe.bind),Fr=Oe([].push),va=function(ie){var re=1==ie,xe=2==ie,nt=3==ie,gt=4==ie,zt=6==ie,Dt=7==ie,Nt=5==ie||zt;return function(ci,oi,vi,Rn){for(var As,Yo,vn=bi(ci),In=Re(vn),fo=function(ie,re){return Ft(ie),void 0===re?ie:Ir?Ir(ie,re):function(){return ie.apply(re,arguments)}}(oi,vi),Xs=Rs(In),ws=0,Is=Rn||br,to=re?Is(ci,Xs):xe||Dt?Is(ci,0):void 0;Xs>ws;ws++)if((Nt||ws in In)&&(Yo=fo(As=In[ws],ws,vn),ie))if(re)to[ws]=Yo;else if(Yo)switch(ie){case 3:return!0;case 5:return As;case 6:return ws;case 2:Fr(to,As)}else switch(ie){case 4:return!1;case 7:Fr(to,As)}return zt?-1:nt||gt?gt:to}},hu=[va(0),va(1),va(2),va(3),va(4),va(5),va(6),va(7)][2];function Ts(ie,re,xe,nt,gt){return ie.left+re+xe.width>nt.width?(gt.style.left="".concat(nt.width-xe.width-ie.left,"px"),!1):(gt.style.left="".concat(re,"px"),!0)}function Hr(ie,re,xe,nt){return ie.left+ie.width-re-xe.width<0?(nt.style.left="".concat(-ie.left,"px"),!1):(nt.style.right="".concat(re,"px"),!0)}Ys({target:"Array",proto:!0,forced:!ta("filter")},{filter:function(re){return hu(this,re,arguments.length>1?arguments[1]:void 0)}});var Pl=ta("splice"),Xa=f.TypeError,Vr=Math.max,pl=Math.min,Nl=9007199254740991,Rd="Maximum allowed length exceeded";function Ur(ie,re){ie.includes(re)&&ie.splice(ie.indexOf(re),1)}function Fc(ie,re,xe){var nt=this._options.positionPrecedence.slice(),gt=sc(),zt=Ot(re).height+10,Dt=Ot(re).width+20,Nt=ie.getBoundingClientRect(),ci="floating";Nt.bottom+zt>gt.height&&Ur(nt,"bottom"),Nt.top-zt<0&&Ur(nt,"top"),Nt.right+Dt>gt.width&&Ur(nt,"right"),Nt.left-Dt<0&&Ur(nt,"left");var vi,Rn,oi=-1!==(Rn=(vi=xe||"").indexOf("-"))?vi.substr(Rn):"";return xe&&(xe=xe.split("-")[0]),nt.length&&(ci=nt.includes(xe)?xe:nt[0]),["top","bottom"].includes(ci)&&(ci+=function(ie,re,xe,nt){var zt=re/2,Dt=Math.min(xe.width,window.screen.width),Nt=["-left-aligned","-middle-aligned","-right-aligned"];return Dt-ie<re&&Ur(Nt,"-left-aligned"),(ie<zt||Dt-ie<zt)&&Ur(Nt,"-middle-aligned"),ie<re&&Ur(Nt,"-right-aligned"),Nt.length?Nt.includes(nt)?nt:Nt[0]:"-middle-aligned"}(Nt.left,Dt,gt,oi)),ci}function Bl(ie,re,xe,nt){var zt,Dt,Nt,ci,oi;if(nt=nt||!1,re.style.top=null,re.style.right=null,re.style.bottom=null,re.style.left=null,re.style.marginLeft=null,re.style.marginTop=null,xe.style.display="inherit",this._introItems[this._currentStep])switch(re.className=["introjs-tooltip","string"==typeof(zt=this._introItems[this._currentStep]).tooltipClass?zt.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),re.setAttribute("role","dialog"),"floating"!==(oi=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(oi=Fc.call(this,ie,re,oi)),Nt=Ot(ie),Dt=Ot(re),ci=sc(),xr(re,"introjs-".concat(oi)),oi){case"top-right-aligned":xe.className="introjs-arrow bottom-right";var Rn=0;Hr(Nt,Rn,Dt,re),re.style.bottom="".concat(Nt.height+20,"px");break;case"top-middle-aligned":xe.className="introjs-arrow bottom-middle";var vn=Nt.width/2-Dt.width/2;nt&&(vn+=5),Hr(Nt,vn,Dt,re)&&(re.style.right=null,Ts(Nt,vn,Dt,ci,re)),re.style.bottom="".concat(Nt.height+20,"px");break;case"top-left-aligned":case"top":xe.className="introjs-arrow bottom",Ts(Nt,nt?0:15,Dt,ci,re),re.style.bottom="".concat(Nt.height+20,"px");break;case"right":re.style.left="".concat(Nt.width+20,"px"),Nt.top+Dt.height>ci.height?(xe.className="introjs-arrow left-bottom",re.style.top="-".concat(Dt.height-Nt.height-20,"px")):xe.className="introjs-arrow left";break;case"left":!nt&&!0===this._options.showStepNumbers&&(re.style.top="15px"),Nt.top+Dt.height>ci.height?(re.style.top="-".concat(Dt.height-Nt.height-20,"px"),xe.className="introjs-arrow right-bottom"):xe.className="introjs-arrow right",re.style.right="".concat(Nt.width+20,"px");break;case"floating":xe.style.display="none",re.style.left="50%",re.style.top="50%",re.style.marginLeft="-".concat(Dt.width/2,"px"),re.style.marginTop="-".concat(Dt.height/2,"px");break;case"bottom-right-aligned":xe.className="introjs-arrow top-right",Hr(Nt,Rn=0,Dt,re),re.style.top="".concat(Nt.height+20,"px");break;case"bottom-middle-aligned":xe.className="introjs-arrow top-middle",vn=Nt.width/2-Dt.width/2,nt&&(vn+=5),Hr(Nt,vn,Dt,re)&&(re.style.right=null,Ts(Nt,vn,Dt,ci,re)),re.style.top="".concat(Nt.height+20,"px");break;default:xe.className="introjs-arrow top",Ts(Nt,0,Dt,ci,re),re.style.top="".concat(Nt.height+20,"px")}}function Ka(){y(document.querySelectorAll(".introjs-showElement"),function(re){Do(re,/introjs-[a-zA-Z]+/g)})}function xs(ie,re){var xe=document.createElement(ie);re=re||{};var nt=/^(?:role|data-|aria-)/;for(var gt in re){var zt=re[gt];"style"===gt?qs(xe,zt):gt.match(nt)?xe.setAttribute(gt,zt):xe[gt]=zt}return xe}function ac(ie,re,xe){if(xe){var nt=re.style.opacity||"1";qs(re,{opacity:"0"}),window.setTimeout(function(){qs(re,{opacity:nt})},10)}ie.appendChild(re)}function Hl(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function fl(){var ie=document.querySelector(".introjs-disableInteraction");null===ie&&(ie=xs("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(ie)),Es.call(this,ie)}function pu(ie){var re=this,xe=xs("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(xe.style.display="none");var nt=xs("ul");nt.setAttribute("role","tablist");var gt=function(){re.goToStep(this.getAttribute("data-stepnumber"))};return y(this._introItems,function(zt,Dt){var Nt=zt.step,ci=xs("li"),oi=xs("a");ci.setAttribute("role","presentation"),oi.setAttribute("role","tab"),oi.onclick=gt,Dt===ie.step-1&&(oi.className="active"),K(oi),oi.innerHTML="&nbsp;",oi.setAttribute("data-stepnumber",Nt),ci.appendChild(oi),nt.appendChild(ci)}),xe.appendChild(nt),xe}function yr(ie,re){if(this._options.showBullets){var xe=document.querySelector(".introjs-bullets");xe.parentNode.replaceChild(pu.call(this,re),xe)}}function Bc(ie,re){this._options.showBullets&&(ie.querySelector(".introjs-bullets li > a.active").className="",ie.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(re.step,'"]')).className="active")}function Dc(){var ie=xs("div");ie.className="introjs-progress",!1===this._options.showProgress&&(ie.style.display="none");var re=xs("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(re.className+=" "+this._options.progressBarAdditionalClass),re.setAttribute("role","progress"),re.setAttribute("aria-valuemin",0),re.setAttribute("aria-valuemax",100),re.setAttribute("aria-valuenow",Hl.call(this)),re.style.cssText="width:".concat(Hl.call(this),"%;"),ie.appendChild(re),ie}function Mc(ie){ie.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(Hl.call(this),"%;"),ie.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",Hl.call(this))}function ku(ie){var re=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,ie.element);var Dt,Nt,ci,xe=this,nt=document.querySelector(".introjs-helperLayer"),gt=document.querySelector(".introjs-tooltipReferenceLayer"),zt="introjs-helperLayer";if("string"==typeof ie.highlightClass&&(zt+=" ".concat(ie.highlightClass)),"string"==typeof this._options.highlightClass&&(zt+=" ".concat(this._options.highlightClass)),null!==nt&&null!==gt){var oi=gt.querySelector(".introjs-helperNumberLayer"),vi=gt.querySelector(".introjs-tooltiptext"),Rn=gt.querySelector(".introjs-tooltip-title"),vn=gt.querySelector(".introjs-arrow"),In=gt.querySelector(".introjs-tooltip");ci=gt.querySelector(".introjs-skipbutton"),Nt=gt.querySelector(".introjs-prevbutton"),Dt=gt.querySelector(".introjs-nextbutton"),nt.className=zt,In.style.opacity=0,In.style.display="none",nc.call(xe,ie),Es.call(xe,nt),Es.call(xe,gt),Ka(),xe._lastShowElementTimer&&window.clearTimeout(xe._lastShowElementTimer),xe._lastShowElementTimer=window.setTimeout(function(){null!==oi&&(oi.innerHTML="".concat(ie.step," of ").concat(re._introItems.length)),vi.innerHTML=ie.intro,Rn.innerHTML=ie.title,In.style.display="block",Bl.call(xe,ie.element,In,vn),Bc.call(xe,gt,ie),Mc.call(xe,gt),In.style.opacity=1,(null!=Dt&&/introjs-donebutton/gi.test(Dt.className)||null!=Dt)&&Dt.focus(),q.call(xe,ie.scrollTo,ie,vi)},350)}else{var fo=xs("div",{className:zt}),Xs=xs("div",{className:"introjs-tooltipReferenceLayer"}),ws=xs("div",{className:"introjs-arrow"}),Is=xs("div",{className:"introjs-tooltip"}),to=xs("div",{className:"introjs-tooltiptext"}),As=xs("div",{className:"introjs-tooltip-header"}),Yo=xs("h1",{className:"introjs-tooltip-title"}),hr=xs("div");qs(fo,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(xe._options.overlayOpacity.toString(),") 0 0 0 5000px")}),nc.call(xe,ie),Es.call(xe,fo),Es.call(xe,Xs),ac(this._targetElement,fo,!0),ac(this._targetElement,Xs),to.innerHTML=ie.intro,Yo.innerHTML=ie.title,hr.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(hr.style.display="none"),As.appendChild(Yo),Is.appendChild(As),Is.appendChild(to),Is.appendChild(pu.call(this,ie)),Is.appendChild(Dc.call(this));var ya=xs("div");!0===this._options.showStepNumbers&&(ya.className="introjs-helperNumberLayer",ya.innerHTML="".concat(ie.step," of ").concat(this._introItems.length),Is.appendChild(ya)),Is.appendChild(ws),Xs.appendChild(Is),(Dt=xs("a")).onclick=function(){xe._introItems.length-1!==xe._currentStep?Vl.call(xe):/introjs-donebutton/gi.test(Dt.className)&&("function"==typeof xe._introCompleteCallback&&xe._introCompleteCallback.call(xe,xe._currentStep,"done"),Ba.call(xe,xe._targetElement))},K(Dt),Dt.innerHTML=this._options.nextLabel,(Nt=xs("a")).onclick=function(){0!==xe._currentStep&&gl.call(xe)},K(Nt),Nt.innerHTML=this._options.prevLabel,K(ci=xs("a",{className:"introjs-skipbutton"})),ci.innerHTML=this._options.skipLabel,ci.onclick=function(){xe._introItems.length-1===xe._currentStep&&"function"==typeof xe._introCompleteCallback&&xe._introCompleteCallback.call(xe,xe._currentStep,"skip"),"function"==typeof xe._introSkipCallback&&xe._introSkipCallback.call(xe),Ba.call(xe,xe._targetElement)},As.appendChild(ci),this._introItems.length>1&&hr.appendChild(Nt),hr.appendChild(Dt),Is.appendChild(hr),Bl.call(xe,ie.element,Is,ws),q.call(this,ie.scrollTo,ie,Is)}var Ha=xe._targetElement.querySelector(".introjs-disableInteraction");Ha&&Ha.parentNode.removeChild(Ha),ie.disableInteraction&&fl.call(xe),0===this._currentStep&&this._introItems.length>1?(null!=Dt&&(Dt.className="".concat(this._options.buttonClass," introjs-nextbutton"),Dt.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=Nt&&(Nt.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=Dt&&xr(Dt,"introjs-fullbutton")):null!=Nt&&(Nt.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=Nt&&(Nt.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=Dt&&(Dt.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=Nt&&xr(Nt,"introjs-fullbutton")):null!=Dt&&(!0===this._options.nextToDone?(Dt.innerHTML=this._options.doneLabel,xr(Dt,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):Dt.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=Nt&&(Nt.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=Dt&&(Dt.className="".concat(this._options.buttonClass," introjs-nextbutton"),Dt.innerHTML=this._options.nextLabel)),null!=Nt&&Nt.setAttribute("role","button"),null!=Dt&&Dt.setAttribute("role","button"),null!=ci&&ci.setAttribute("role","button"),null!=Dt&&Dt.focus(),function(ie){var re=ie.element;xr(re,"introjs-showElement");var xe=sa(re,"position");"absolute"!==xe&&"relative"!==xe&&"sticky"!==xe&&"fixed"!==xe&&xr(re,"introjs-relativePosition")}(ie),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,ie.element)}function Hc(ie){this._currentStep=ie-2,void 0!==this._introItems&&Vl.call(this)}function fu(ie){this._currentStepNumber=ie,void 0!==this._introItems&&Vl.call(this)}function Vl(){var ie=this;this._direction="forward",void 0!==this._currentStepNumber&&y(this._introItems,function(nt,gt){nt.step===ie._currentStepNumber&&(ie._currentStep=gt-1,ie._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var re=this._introItems[this._currentStep],xe=!0;return void 0!==this._introBeforeChangeCallback&&(xe=this._introBeforeChangeCallback.call(this,re&&re.element)),!1===xe?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void Ba.call(this,this._targetElement)):void ku.call(this,re)}function gl(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var ie=this._introItems[this._currentStep],re=!0;if(void 0!==this._introBeforeChangeCallback&&(re=this._introBeforeChangeCallback.call(this,ie&&ie.element)),!1===re)return++this._currentStep,!1;ku.call(this,ie)}function ml(){return this._currentStep}function Ul(ie){var re=void 0===ie.code?ie.which:ie.code;if(null===re&&(re=null===ie.charCode?ie.keyCode:ie.charCode),"Escape"!==re&&27!==re||!0!==this._options.exitOnEsc){if("ArrowLeft"===re||37===re)gl.call(this);else if("ArrowRight"===re||39===re)Vl.call(this);else if("Enter"===re||"NumpadEnter"===re||13===re){var xe=ie.target||ie.srcElement;xe&&xe.className.match("introjs-prevbutton")?gl.call(this):xe&&xe.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),Ba.call(this,this._targetElement)):xe&&xe.getAttribute("data-stepnumber")?xe.click():Vl.call(this),ie.preventDefault?ie.preventDefault():ie.returnValue=!1}}else Ba.call(this,this._targetElement)}function Mo(ie){if(null===ie||"object"!==ht(ie)||void 0!==ie.nodeType)return ie;var re={};for(var xe in ie)re[xe]=void 0!==window.jQuery&&ie[xe]instanceof window.jQuery?ie[xe]:Mo(ie[xe]);return re}function _l(ie){var re=document.querySelector(".introjs-hints");return re?re.querySelectorAll(ie):[]}function vl(ie){var re=_l('.introjs-hint[data-step="'.concat(ie,'"]'))[0];ba.call(this),re&&xr(re,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,ie)}function Gl(){var ie=this;y(_l(".introjs-hint"),function(xe){vl.call(ie,xe.getAttribute("data-step"))})}function Rc(){var ie=this,re=_l(".introjs-hint");re&&re.length?y(re,function(xe){xc.call(ie,xe.getAttribute("data-step"))}):yl.call(this,this._targetElement)}function xc(ie){var re=_l('.introjs-hint[data-step="'.concat(ie,'"]'))[0];re&&Do(re,/introjs-hidehint/g)}function dr(){var ie=this;y(_l(".introjs-hint"),function(xe){$a.call(ie,xe.getAttribute("data-step"))}),t.off(document,"click",ba,this,!1),t.off(window,"resize",Wl,this,!0),this._hintsAutoRefreshFunction&&t.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function $a(ie){var re=_l('.introjs-hint[data-step="'.concat(ie,'"]'))[0];re&&re.parentNode.removeChild(re)}function bl(){var ie=this,re=this,xe=document.querySelector(".introjs-hints");null===xe&&(xe=xs("div",{className:"introjs-hints"}));y(this._introItems,function(gt,zt){if(!document.querySelector('.introjs-hint[data-step="'.concat(zt,'"]'))){var Dt=xs("a",{className:"introjs-hint"});K(Dt),Dt.onclick=function(zt){return function(Dt){var Nt=Dt||window.event;Nt.stopPropagation&&Nt.stopPropagation(),null!==Nt.cancelBubble&&(Nt.cancelBubble=!0),Gr.call(re,zt)}}(zt),gt.hintAnimation||xr(Dt,"introjs-hint-no-anim"),ft(gt.element)&&xr(Dt,"introjs-fixedhint");var Nt=xs("div",{className:"introjs-hint-dot"}),ci=xs("div",{className:"introjs-hint-pulse"});Dt.appendChild(Nt),Dt.appendChild(ci),Dt.setAttribute("data-step",zt),gt.targetElement=gt.element,gt.element=Dt,Vc.call(ie,gt.hintPosition,Dt,gt.targetElement),xe.appendChild(Dt)}}),document.body.appendChild(xe),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(ie,re){var nt,xe=this;return function(){for(var gt=arguments.length,zt=new Array(gt),Dt=0;Dt<gt;Dt++)zt[Dt]=arguments[Dt];clearTimeout(nt),nt=setTimeout(function(){ie.apply(xe,zt)},re)}}(function(){return Wl.call(ie)},this._options.hintAutoRefreshInterval),t.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function Vc(ie,re,xe){var nt=re.style,gt=Ot.call(this,xe);switch(ie){default:case"top-left":nt.left="".concat(gt.left,"px"),nt.top="".concat(gt.top,"px");break;case"top-right":nt.left="".concat(gt.left+gt.width-20,"px"),nt.top="".concat(gt.top,"px");break;case"bottom-left":nt.left="".concat(gt.left,"px"),nt.top="".concat(gt.top+gt.height-20,"px");break;case"bottom-right":nt.left="".concat(gt.left+gt.width-20,"px"),nt.top="".concat(gt.top+gt.height-20,"px");break;case"middle-left":nt.left="".concat(gt.left,"px"),nt.top="".concat(gt.top+(gt.height-20)/2,"px");break;case"middle-right":nt.left="".concat(gt.left+gt.width-20,"px"),nt.top="".concat(gt.top+(gt.height-20)/2,"px");break;case"middle-middle":nt.left="".concat(gt.left+(gt.width-20)/2,"px"),nt.top="".concat(gt.top+(gt.height-20)/2,"px");break;case"bottom-middle":nt.left="".concat(gt.left+(gt.width-20)/2,"px"),nt.top="".concat(gt.top+gt.height-20,"px");break;case"top-middle":nt.left="".concat(gt.left+(gt.width-20)/2,"px"),nt.top="".concat(gt.top,"px")}}function Gr(ie){var re=document.querySelector('.introjs-hint[data-step="'.concat(ie,'"]')),xe=this._introItems[ie];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,re,xe,ie);var nt=ba.call(this);if(parseInt(nt,10)!==ie){var gt=xs("div",{className:"introjs-tooltip"}),zt=xs("div"),Dt=xs("div"),Nt=xs("div");gt.onclick=function(vi){vi.stopPropagation?vi.stopPropagation():vi.cancelBubble=!0},zt.className="introjs-tooltiptext";var ci=xs("p");if(ci.innerHTML=xe.hint,zt.appendChild(ci),this._options.hintShowButton){var oi=xs("a");oi.className=this._options.buttonClass,oi.setAttribute("role","button"),oi.innerHTML=this._options.hintButtonLabel,oi.onclick=vl.bind(this,ie),zt.appendChild(oi)}Dt.className="introjs-arrow",gt.appendChild(Dt),gt.appendChild(zt),this._currentStep=re.getAttribute("data-step"),Nt.className="introjs-tooltipReferenceLayer introjs-hintReference",Nt.setAttribute("data-step",re.getAttribute("data-step")),Es.call(this,Nt),Nt.appendChild(gt),document.body.appendChild(Nt),Bl.call(this,re,gt,Dt,!0)}}function ba(){var ie=document.querySelector(".introjs-hintReference");if(ie){var re=ie.getAttribute("data-step");return ie.parentNode.removeChild(ie),re}}function yl(ie){var re=this;if(this._introItems=[],this._options.hints)y(this._options.hints,function(nt){var gt=Mo(nt);"string"==typeof gt.element&&(gt.element=document.querySelector(gt.element)),gt.hintPosition=gt.hintPosition||re._options.hintPosition,gt.hintAnimation=gt.hintAnimation||re._options.hintAnimation,null!==gt.element&&re._introItems.push(gt)});else{var xe=ie.querySelectorAll("*[data-hint]");if(!xe||!xe.length)return!1;y(xe,function(nt){var gt=nt.getAttribute("data-hintanimation");gt=gt?"true"===gt:re._options.hintAnimation,re._introItems.push({element:nt,hint:nt.getAttribute("data-hint"),hintPosition:nt.getAttribute("data-hintposition")||re._options.hintPosition,hintAnimation:gt,tooltipClass:nt.getAttribute("data-tooltipclass"),position:nt.getAttribute("data-position")||re._options.tooltipPosition})})}bl.call(this),t.on(document,"click",ba,this,!1),t.on(window,"resize",Wl,this,!0)}function Wl(){var ie=this;y(this._introItems,function(re){var xe=re.targetElement;void 0!==xe&&Vc.call(ie,re.hintPosition,re.element,xe)})}Ys({target:"Array",proto:!0,forced:!Pl},{splice:function(re,xe){var Nt,ci,oi,vi,Rn,vn,nt=bi(this),gt=Rs(nt),zt=pr(re,gt),Dt=arguments.length;if(0===Dt?Nt=ci=0:1===Dt?(Nt=0,ci=gt-zt):(Nt=Dt-2,ci=pl(Vr(Eo(xe),0),gt-zt)),gt+Nt-ci>Nl)throw Xa(Rd);for(oi=br(nt,ci),vi=0;vi<ci;vi++)(Rn=zt+vi)in nt&&kn(oi,vi,nt[Rn]);if(oi.length=ci,Nt<ci){for(vi=zt;vi<gt-ci;vi++)vn=vi+Nt,(Rn=vi+ci)in nt?nt[vn]=nt[Rn]:delete nt[vn];for(vi=gt;vi>gt-ci+Nt;vi--)delete nt[vi-1]}else if(Nt>ci)for(vi=gt-ci;vi>zt;vi--)vn=vi+Nt-1,(Rn=vi+ci-1)in nt?nt[vn]=nt[Rn]:delete nt[vn];for(vi=0;vi<Nt;vi++)nt[vi+zt]=arguments[vi+2];return nt.length=gt-ci+Nt,oi}});var cc=Math.floor,Ic=function(ie,re){var xe=ie.length,nt=cc(xe/2);return xe<8?Wr(ie,re):Lu(ie,Ic(ll(ie,0,nt),re),Ic(ll(ie,nt),re),re)},Wr=function(ie,re){for(var gt,zt,xe=ie.length,nt=1;nt<xe;){for(zt=nt,gt=ie[nt];zt&&re(ie[zt-1],gt)>0;)ie[zt]=ie[--zt];zt!==nt++&&(ie[zt]=gt)}return ie},Lu=function(ie,re,xe,nt){for(var gt=re.length,zt=xe.length,Dt=0,Nt=0;Dt<gt||Nt<zt;)ie[Dt+Nt]=Dt<gt&&Nt<zt?nt(re[Dt],xe[Nt])<=0?re[Dt++]:xe[Nt++]:Dt<gt?re[Dt++]:xe[Nt++];return ie},Ja=Ic,zl=$t.match(/firefox\/(\d+)/i),jl=!!zl&&+zl[1],ed=/MSIE|Trident/.test($t),Ma=$t.match(/AppleWebKit\/(\d+)\./),gu=!!Ma&&+Ma[1],Za=[],mu=Oe(Za.sort),Yl=Oe(Za.push),Ac=E(function(){Za.sort(void 0)}),qa=E(function(){Za.sort(null)}),Na=Sc("sort"),Qa=!E(function(){if(Ce)return Ce<70;if(!(jl&&jl>3)){if(ed)return!0;if(gu)return gu<603;var re,xe,nt,gt,ie="";for(re=65;re<76;re++){switch(xe=String.fromCharCode(re),re){case 66:case 69:case 70:case 72:nt=3;break;case 68:case 71:nt=4;break;default:nt=2}for(gt=0;gt<47;gt++)Za.push({k:xe+gt,v:nt})}for(Za.sort(function(zt,Dt){return Dt.v-zt.v}),gt=0;gt<Za.length;gt++)xe=Za[gt].k.charAt(0),ie.charAt(ie.length-1)!==xe&&(ie+=xe);return"DGBEFHACIJK"!==ie}});function Ra(ie){var re=this,xe=ie.querySelectorAll("*[data-intro]"),nt=[];if(this._options.steps)y(this._options.steps,function(oi){var vi=Mo(oi);if(vi.step=nt.length+1,vi.title=vi.title||"","string"==typeof vi.element&&(vi.element=document.querySelector(vi.element)),null==vi.element){var Rn=document.querySelector(".introjsFloatingElement");null===Rn&&(Rn=xs("div",{className:"introjsFloatingElement"}),document.body.appendChild(Rn)),vi.element=Rn,vi.position="floating"}vi.position=vi.position||re._options.tooltipPosition,vi.scrollTo=vi.scrollTo||re._options.scrollTo,void 0===vi.disableInteraction&&(vi.disableInteraction=re._options.disableInteraction),null!==vi.element&&nt.push(vi)});else{var zt;if(xe.length<1)return[];y(xe,function(oi){if((!re._options.group||oi.getAttribute("data-intro-group")===re._options.group)&&"none"!==oi.style.display){var vi=parseInt(oi.getAttribute("data-step"),10);zt=oi.hasAttribute("data-disable-interaction")?!!oi.getAttribute("data-disable-interaction"):re._options.disableInteraction,vi>0&&(nt[vi-1]={element:oi,title:oi.getAttribute("data-title")||"",intro:oi.getAttribute("data-intro"),step:parseInt(oi.getAttribute("data-step"),10),tooltipClass:oi.getAttribute("data-tooltipclass"),highlightClass:oi.getAttribute("data-highlightclass"),position:oi.getAttribute("data-position")||re._options.tooltipPosition,scrollTo:oi.getAttribute("data-scrollto")||re._options.scrollTo,disableInteraction:zt})}});var Dt=0;y(xe,function(oi){if((!re._options.group||oi.getAttribute("data-intro-group")===re._options.group)&&null===oi.getAttribute("data-step")){for(;void 0!==nt[Dt];)Dt++;zt=oi.hasAttribute("data-disable-interaction")?!!oi.getAttribute("data-disable-interaction"):re._options.disableInteraction,nt[Dt]={element:oi,title:oi.getAttribute("data-title")||"",intro:oi.getAttribute("data-intro"),step:Dt+1,tooltipClass:oi.getAttribute("data-tooltipclass"),highlightClass:oi.getAttribute("data-highlightclass"),position:oi.getAttribute("data-position")||re._options.tooltipPosition,scrollTo:oi.getAttribute("data-scrollto")||re._options.scrollTo,disableInteraction:zt}}})}for(var Nt=[],ci=0;ci<nt.length;ci++)nt[ci]&&Nt.push(nt[ci]);return(nt=Nt).sort(function(oi,vi){return oi.step-vi.step}),nt}function zr(ie){var re=document.querySelector(".introjs-tooltipReferenceLayer"),xe=document.querySelector(".introjs-helperLayer"),nt=document.querySelector(".introjs-disableInteraction");if(Es.call(this,xe),Es.call(this,re),Es.call(this,nt),ie&&(this._introItems=Ra.call(this,this._targetElement),yr.call(this,re,this._introItems[this._currentStep]),Mc.call(this,re)),null!=this._currentStep){var gt=document.querySelector(".introjs-arrow"),zt=document.querySelector(".introjs-tooltip");zt&&gt&&Bl.call(this,this._introItems[this._currentStep].element,zt,gt)}return Wl.call(this),this}function Cl(){zr.call(this)}function Fa(ie,re){if(ie&&ie.parentElement){var xe=ie.parentElement;re?(qs(ie,{opacity:"0"}),window.setTimeout(function(){try{xe.removeChild(ie)}catch(nt){}},500)):xe.removeChild(ie)}}function Ba(ie,re){var xe=!0;if(void 0!==this._introBeforeExitCallback&&(xe=this._introBeforeExitCallback.call(this)),re||!1!==xe){var nt=ie.querySelectorAll(".introjs-overlay");nt&&nt.length&&y(nt,function(ci){return Fa(ci)}),Fa(ie.querySelector(".introjs-helperLayer"),!0),Fa(ie.querySelector(".introjs-tooltipReferenceLayer")),Fa(ie.querySelector(".introjs-disableInteraction")),Fa(document.querySelector(".introjsFloatingElement")),Ka(),t.off(window,"keydown",Ul,this,!0),t.off(window,"resize",Cl,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function vu(ie){var re=this,xe=xs("div",{className:"introjs-overlay"});return qs(xe,{top:0,bottom:0,left:0,right:0,position:"fixed"}),ie.appendChild(xe),!0===this._options.exitOnOverlayClick&&(qs(xe,{cursor:"pointer"}),xe.onclick=function(){Ba.call(re,ie)}),!0}function Xl(ie){void 0!==this._introStartCallback&&this._introStartCallback.call(this,ie);var re=Ra.call(this,ie);return 0===re.length||(this._introItems=re,vu.call(this,ie)&&(Vl.call(this),this._options.keyboardNavigation&&t.on(window,"keydown",Ul,this,!0),t.on(window,"resize",Cl,this,!0))),!1}function Uo(ie){this._targetElement=ie,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}Ys({target:"Array",proto:!0,forced:Ac||!qa||!Na||!Qa},{sort:function(re){void 0!==re&&Ft(re);var xe=bi(this);if(Qa)return void 0===re?mu(xe):mu(xe,re);var zt,Dt,nt=[],gt=Rs(xe);for(Dt=0;Dt<gt;Dt++)Dt in xe&&Yl(nt,xe[Dt]);for(Ja(nt,function(ie){return function(re,xe){return void 0===xe?-1:void 0===re?1:void 0!==ie?+ie(re,xe)||0:ps(re)>ps(xe)?1:-1}}(re)),zt=nt.length,Dt=0;Dt<zt;)xe[Dt]=nt[Dt++];for(;Dt<gt;)delete xe[Dt++];return xe}});var uc=function ie(re){var xe;if("object"===ht(re))xe=new Uo(re);else if("string"==typeof re){var nt=document.querySelector(re);if(!nt)throw new Error("There is no element with given selector.");xe=new Uo(nt)}else xe=new Uo(document.body);return ie.instances[O(xe,"introjs-instance")]=xe,xe};return uc.version="4.3.0",uc.instances={},uc.fn=Uo.prototype={clone:function(){return new Uo(this)},setOption:function(re,xe){return this._options[re]=xe,this},setOptions:function(re){return this._options=function(ie,re){var nt,xe={};for(nt in ie)xe[nt]=ie[nt];for(nt in re)xe[nt]=re[nt];return xe}(this._options,re),this},start:function(){return Xl.call(this,this._targetElement),this},goToStep:function(re){return Hc.call(this,re),this},addStep:function(re){return this._options.steps||(this._options.steps=[]),this._options.steps.push(re),this},addSteps:function(re){if(re.length){for(var xe=0;xe<re.length;xe++)this.addStep(re[xe]);return this}},goToStepNumber:function(re){return fu.call(this,re),this},nextStep:function(){return Vl.call(this),this},previousStep:function(){return gl.call(this),this},currentStep:function(){return ml.call(this)},exit:function(re){return Ba.call(this,this._targetElement,re),this},refresh:function(re){return zr.call(this,re),this},onbeforechange:function(re){if("function"!=typeof re)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=re,this},onchange:function(re){if("function"!=typeof re)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=re,this},onafterchange:function(re){if("function"!=typeof re)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=re,this},oncomplete:function(re){if("function"!=typeof re)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=re,this},onhintsadded:function(re){if("function"!=typeof re)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=re,this},onhintclick:function(re){if("function"!=typeof re)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=re,this},onhintclose:function(re){if("function"!=typeof re)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=re,this},onstart:function(re){if("function"!=typeof re)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=re,this},onexit:function(re){if("function"!=typeof re)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=re,this},onskip:function(re){if("function"!=typeof re)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=re,this},onbeforeexit:function(re){if("function"!=typeof re)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=re,this},addHints:function(){return yl.call(this,this._targetElement),this},hideHint:function(re){return vl.call(this,re),this},hideHints:function(){return Gl.call(this),this},showHint:function(re){return xc.call(this,re),this},showHints:function(){return Rc.call(this),this},removeHints:function(){return dr.call(this),this},removeHint:function(re){return $a().call(this,re),this},showHintDialog:function(re){return Gr.call(this,re),this}},uc}()},1135:(li,ht,W)=>{"use strict";W.d(ht,{X:()=>y});var O=W(7579);class y extends O.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:a}=this;if(e)throw n;return this._throwIfClosed(),a}next(e){super.next(this._value=e)}}},8306:(li,ht,W)=>{"use strict";W.d(ht,{y:()=>Y});var O=W(930),y=W(727),t=W(8822),e=W(4671);var f=W(2416),E=W(576),I=W(2806);let Y=(()=>{class Ae{constructor(st){st&&(this._subscribe=st)}lift(st){const Ge=new Ae;return Ge.source=this,Ge.operator=st,Ge}subscribe(st,Ge,lt){const Rt=function(Ae){return Ae&&Ae instanceof O.Lv||function(Ae){return Ae&&(0,E.m)(Ae.next)&&(0,E.m)(Ae.error)&&(0,E.m)(Ae.complete)}(Ae)&&(0,y.Nn)(Ae)}(st)?st:new O.Hp(st,Ge,lt);return(0,I.x)(()=>{const{operator:Wt,source:tt}=this;Rt.add(Wt?Wt.call(Rt,tt):tt?this._subscribe(Rt):this._trySubscribe(Rt))}),Rt}_trySubscribe(st){try{return this._subscribe(st)}catch(Ge){st.error(Ge)}}forEach(st,Ge){return new(Ge=ee(Ge))((lt,Rt)=>{let Wt;Wt=this.subscribe(tt=>{try{st(tt)}catch(Oe){Rt(Oe),null==Wt||Wt.unsubscribe()}},Rt,lt)})}_subscribe(st){var Ge;return null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(st)}[t.L](){return this}pipe(...st){return function(Ae){return 0===Ae.length?e.y:1===Ae.length?Ae[0]:function(st){return Ae.reduce((Ge,lt)=>lt(Ge),st)}}(st)(this)}toPromise(st){return new(st=ee(st))((Ge,lt)=>{let Rt;this.subscribe(Wt=>Rt=Wt,Wt=>lt(Wt),()=>Ge(Rt))})}}return Ae.create=Je=>new Ae(Je),Ae})();function ee(Ae){var Je;return null!==(Je=null!=Ae?Ae:f.v.Promise)&&void 0!==Je?Je:Promise}},7579:(li,ht,W)=>{"use strict";W.d(ht,{x:()=>f});var O=W(8306),y=W(727);const e=(0,W(3888).d)(I=>function(){I(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var n=W(8737),a=W(2806);let f=(()=>{class I extends O.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ee){const _e=new E(this,this);return _e.operator=ee,_e}_throwIfClosed(){if(this.closed)throw new e}next(ee){(0,a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const _e=this.observers.slice();for(const De of _e)De.next(ee)}})}error(ee){(0,a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ee;const{observers:_e}=this;for(;_e.length;)_e.shift().error(ee)}})}complete(){(0,a.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ee}=this;for(;ee.length;)ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var ee;return(null===(ee=this.observers)||void 0===ee?void 0:ee.length)>0}_trySubscribe(ee){return this._throwIfClosed(),super._trySubscribe(ee)}_subscribe(ee){return this._throwIfClosed(),this._checkFinalizedStatuses(ee),this._innerSubscribe(ee)}_innerSubscribe(ee){const{hasError:_e,isStopped:De,observers:Ae}=this;return _e||De?y.Lc:(Ae.push(ee),new y.w0(()=>(0,n.P)(Ae,ee)))}_checkFinalizedStatuses(ee){const{hasError:_e,thrownError:De,isStopped:Ae}=this;_e?ee.error(De):Ae&&ee.complete()}asObservable(){const ee=new O.y;return ee.source=this,ee}}return I.create=(Y,ee)=>new E(Y,ee),I})();class E extends f{constructor(Y,ee){super(),this.destination=Y,this.source=ee}next(Y){var ee,_e;null===(_e=null===(ee=this.destination)||void 0===ee?void 0:ee.next)||void 0===_e||_e.call(ee,Y)}error(Y){var ee,_e;null===(_e=null===(ee=this.destination)||void 0===ee?void 0:ee.error)||void 0===_e||_e.call(ee,Y)}complete(){var Y,ee;null===(ee=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===ee||ee.call(Y)}_subscribe(Y){var ee,_e;return null!==(_e=null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(Y))&&void 0!==_e?_e:y.Lc}}},930:(li,ht,W)=>{"use strict";W.d(ht,{Hp:()=>De,Lv:()=>_e});var O=W(576),y=W(727),t=W(2416),e=W(7849),n=W(5032);const a=I("C",void 0,void 0);function I(lt,Rt,Wt){return{kind:lt,value:Rt,error:Wt}}var Y=W(3410),ee=W(2806);class _e extends y.w0{constructor(Rt){super(),this.isStopped=!1,Rt?(this.destination=Rt,(0,y.Nn)(Rt)&&Rt.add(this)):this.destination=Ge}static create(Rt,Wt,tt){return new De(Rt,Wt,tt)}next(Rt){this.isStopped?st(I("N",Rt,void 0),this):this._next(Rt)}error(Rt){this.isStopped?st(I("E",void 0,Rt),this):(this.isStopped=!0,this._error(Rt))}complete(){this.isStopped?st(a,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Rt){this.destination.next(Rt)}_error(Rt){try{this.destination.error(Rt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class De extends _e{constructor(Rt,Wt,tt){let Oe;if(super(),(0,O.m)(Rt))Oe=Rt;else if(Rt){let Se;({next:Oe,error:Wt,complete:tt}=Rt),this&&t.v.useDeprecatedNextContext?(Se=Object.create(Rt),Se.unsubscribe=()=>this.unsubscribe()):Se=Rt,Oe=null==Oe?void 0:Oe.bind(Se),Wt=null==Wt?void 0:Wt.bind(Se),tt=null==tt?void 0:tt.bind(Se)}this.destination={next:Oe?Ae(Oe):n.Z,error:Ae(null!=Wt?Wt:Je),complete:tt?Ae(tt):n.Z}}}function Ae(lt,Rt){return(...Wt)=>{try{lt(...Wt)}catch(tt){t.v.useDeprecatedSynchronousErrorHandling?(0,ee.O)(tt):(0,e.h)(tt)}}}function Je(lt){throw lt}function st(lt,Rt){const{onStoppedNotification:Wt}=t.v;Wt&&Y.z.setTimeout(()=>Wt(lt,Rt))}const Ge={closed:!0,next:n.Z,error:Je,complete:n.Z}},727:(li,ht,W)=>{"use strict";W.d(ht,{Lc:()=>a,w0:()=>n,Nn:()=>f});var O=W(576);const t=(0,W(3888).d)(I=>function(ee){I(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((_e,De)=>`${De+1}) ${_e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee});var e=W(8737);class n{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:ee}=this;if(ee)if(this._parentage=null,Array.isArray(ee))for(const Ae of ee)Ae.remove(this);else ee.remove(this);const{initialTeardown:_e}=this;if((0,O.m)(_e))try{_e()}catch(Ae){Y=Ae instanceof t?Ae.errors:[Ae]}const{_teardowns:De}=this;if(De){this._teardowns=null;for(const Ae of De)try{E(Ae)}catch(Je){Y=null!=Y?Y:[],Je instanceof t?Y=[...Y,...Je.errors]:Y.push(Je)}}if(Y)throw new t(Y)}}add(Y){var ee;if(Y&&Y!==this)if(this.closed)E(Y);else{if(Y instanceof n){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._teardowns=null!==(ee=this._teardowns)&&void 0!==ee?ee:[]).push(Y)}}_hasParent(Y){const{_parentage:ee}=this;return ee===Y||Array.isArray(ee)&&ee.includes(Y)}_addParent(Y){const{_parentage:ee}=this;this._parentage=Array.isArray(ee)?(ee.push(Y),ee):ee?[ee,Y]:Y}_removeParent(Y){const{_parentage:ee}=this;ee===Y?this._parentage=null:Array.isArray(ee)&&(0,e.P)(ee,Y)}remove(Y){const{_teardowns:ee}=this;ee&&(0,e.P)(ee,Y),Y instanceof n&&Y._removeParent(this)}}n.EMPTY=(()=>{const I=new n;return I.closed=!0,I})();const a=n.EMPTY;function f(I){return I instanceof n||I&&"closed"in I&&(0,O.m)(I.remove)&&(0,O.m)(I.add)&&(0,O.m)(I.unsubscribe)}function E(I){(0,O.m)(I)?I():I.unsubscribe()}},2416:(li,ht,W)=>{"use strict";W.d(ht,{v:()=>O});const O={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(li,ht,W)=>{"use strict";W.d(ht,{a:()=>Y});var O=W(8306),y=W(4742),t=W(2076),e=W(4671),n=W(3268),a=W(3269),f=W(1810),E=W(5403),I=W(9672);function Y(...De){const Ae=(0,a.yG)(De),Je=(0,a.jO)(De),{args:st,keys:Ge}=(0,y.D)(De);if(0===st.length)return(0,t.D)([],Ae);const lt=new O.y(function(De,Ae,Je=e.y){return st=>{_e(Ae,()=>{const{length:Ge}=De,lt=new Array(Ge);let Rt=Ge,Wt=Ge;for(let tt=0;tt<Ge;tt++)_e(Ae,()=>{const Oe=(0,t.D)(De[tt],Ae);let Se=!1;Oe.subscribe(new E.Q(st,Qe=>{lt[tt]=Qe,Se||(Se=!0,Wt--),Wt||st.next(Je(lt.slice()))},()=>{--Rt||st.complete()}))},st)},st)}}(st,Ae,Ge?Rt=>(0,f.n)(Ge,Rt):e.y));return Je?lt.pipe((0,n.Z)(Je)):lt}function _e(De,Ae,Je){De?(0,I.f)(Je,De,Ae):Ae()}},7272:(li,ht,W)=>{"use strict";W.d(ht,{z:()=>n});var O=W(8189),t=W(3269),e=W(2076);function n(...a){return(0,O.J)(1)((0,e.D)(a,(0,t.yG)(a)))}},9770:(li,ht,W)=>{"use strict";W.d(ht,{P:()=>t});var O=W(8306),y=W(8421);function t(e){return new O.y(n=>{(0,y.Xf)(e()).subscribe(n)})}},515:(li,ht,W)=>{"use strict";W.d(ht,{E:()=>y});const y=new(W(8306).y)(n=>n.complete())},4128:(li,ht,W)=>{"use strict";W.d(ht,{D:()=>E});var O=W(8306),y=W(4742),t=W(8421),e=W(3269),n=W(5403),a=W(3268),f=W(1810);function E(...I){const Y=(0,e.jO)(I),{args:ee,keys:_e}=(0,y.D)(I),De=new O.y(Ae=>{const{length:Je}=ee;if(!Je)return void Ae.complete();const st=new Array(Je);let Ge=Je,lt=Je;for(let Rt=0;Rt<Je;Rt++){let Wt=!1;(0,t.Xf)(ee[Rt]).subscribe(new n.Q(Ae,tt=>{Wt||(Wt=!0,lt--),st[Rt]=tt},()=>Ge--,void 0,()=>{(!Ge||!Wt)&&(lt||Ae.next(_e?(0,f.n)(_e,st):st),Ae.complete())}))}});return Y?De.pipe((0,a.Z)(Y)):De}},2076:(li,ht,W)=>{"use strict";W.d(ht,{D:()=>Qe});var O=W(8421),y=W(9672),t=W(4482),e=W(5403);function n(dt,it=0){return(0,t.e)((Pe,Re)=>{Pe.subscribe(new e.Q(Re,ge=>(0,y.f)(Re,dt,()=>Re.next(ge),it),()=>(0,y.f)(Re,dt,()=>Re.complete(),it),ge=>(0,y.f)(Re,dt,()=>Re.error(ge),it)))})}function a(dt,it=0){return(0,t.e)((Pe,Re)=>{Re.add(dt.schedule(()=>Pe.subscribe(Re),it))})}var I=W(8306),ee=W(2202),_e=W(576);function Ae(dt,it){if(!dt)throw new Error("Iterable cannot be null");return new I.y(Pe=>{(0,y.f)(Pe,it,()=>{const Re=dt[Symbol.asyncIterator]();(0,y.f)(Pe,it,()=>{Re.next().then(ge=>{ge.done?Pe.complete():Pe.next(ge.value)})},0,!0)})})}var Je=W(3670),st=W(8239),Ge=W(1144),lt=W(6495),Rt=W(2206),Wt=W(4532),tt=W(3260);function Qe(dt,it){return it?function(dt,it){if(null!=dt){if((0,Je.c)(dt))return function(dt,it){return(0,O.Xf)(dt).pipe(a(it),n(it))}(dt,it);if((0,Ge.z)(dt))return function(dt,it){return new I.y(Pe=>{let Re=0;return it.schedule(function(){Re===dt.length?Pe.complete():(Pe.next(dt[Re++]),Pe.closed||this.schedule())})})}(dt,it);if((0,st.t)(dt))return function(dt,it){return(0,O.Xf)(dt).pipe(a(it),n(it))}(dt,it);if((0,Rt.D)(dt))return Ae(dt,it);if((0,lt.T)(dt))return function(dt,it){return new I.y(Pe=>{let Re;return(0,y.f)(Pe,it,()=>{Re=dt[ee.h](),(0,y.f)(Pe,it,()=>{let ge,se;try{({value:ge,done:se}=Re.next())}catch(at){return void Pe.error(at)}se?Pe.complete():Pe.next(ge)},0,!0)}),()=>(0,_e.m)(null==Re?void 0:Re.return)&&Re.return()})}(dt,it);if((0,tt.L)(dt))return function(dt,it){return Ae((0,tt.Q)(dt),it)}(dt,it)}throw(0,Wt.z)(dt)}(dt,it):(0,O.Xf)(dt)}},4968:(li,ht,W)=>{"use strict";W.d(ht,{R:()=>Y});var O=W(8421),y=W(8306),t=W(5577),e=W(1144),n=W(576),a=W(3268);const f=["addListener","removeListener"],E=["addEventListener","removeEventListener"],I=["on","off"];function Y(Je,st,Ge,lt){if((0,n.m)(Ge)&&(lt=Ge,Ge=void 0),lt)return Y(Je,st,Ge).pipe((0,a.Z)(lt));const[Rt,Wt]=function(Je){return(0,n.m)(Je.addEventListener)&&(0,n.m)(Je.removeEventListener)}(Je)?E.map(tt=>Oe=>Je[tt](st,Oe,Ge)):function(Je){return(0,n.m)(Je.addListener)&&(0,n.m)(Je.removeListener)}(Je)?f.map(ee(Je,st)):function(Je){return(0,n.m)(Je.on)&&(0,n.m)(Je.off)}(Je)?I.map(ee(Je,st)):[];if(!Rt&&(0,e.z)(Je))return(0,t.z)(tt=>Y(tt,st,Ge))((0,O.Xf)(Je));if(!Rt)throw new TypeError("Invalid event target");return new y.y(tt=>{const Oe=(...Se)=>tt.next(1<Se.length?Se:Se[0]);return Rt(Oe),()=>Wt(Oe)})}function ee(Je,st){return Ge=>lt=>Je[Ge](st,lt)}},8421:(li,ht,W)=>{"use strict";W.d(ht,{Xf:()=>De});var O=W(5987),y=W(1144),t=W(8239),e=W(8306),n=W(3670),a=W(2206),f=W(4532),E=W(6495),I=W(3260),Y=W(576),ee=W(7849),_e=W(8822);function De(tt){if(tt instanceof e.y)return tt;if(null!=tt){if((0,n.c)(tt))return function(tt){return new e.y(Oe=>{const Se=tt[_e.L]();if((0,Y.m)(Se.subscribe))return Se.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(tt);if((0,y.z)(tt))return function(tt){return new e.y(Oe=>{for(let Se=0;Se<tt.length&&!Oe.closed;Se++)Oe.next(tt[Se]);Oe.complete()})}(tt);if((0,t.t)(tt))return function(tt){return new e.y(Oe=>{tt.then(Se=>{Oe.closed||(Oe.next(Se),Oe.complete())},Se=>Oe.error(Se)).then(null,ee.h)})}(tt);if((0,a.D)(tt))return lt(tt);if((0,E.T)(tt))return function(tt){return new e.y(Oe=>{for(const Se of tt)if(Oe.next(Se),Oe.closed)return;Oe.complete()})}(tt);if((0,I.L)(tt))return function(tt){return lt((0,I.Q)(tt))}(tt)}throw(0,f.z)(tt)}function lt(tt){return new e.y(Oe=>{(function(tt,Oe){var Se,Qe,dt,it;return(0,O.mG)(this,void 0,void 0,function*(){try{for(Se=(0,O.KL)(tt);!(Qe=yield Se.next()).done;)if(Oe.next(Qe.value),Oe.closed)return}catch(Pe){dt={error:Pe}}finally{try{Qe&&!Qe.done&&(it=Se.return)&&(yield it.call(Se))}finally{if(dt)throw dt.error}}Oe.complete()})})(tt,Oe).catch(Se=>Oe.error(Se))})}},6451:(li,ht,W)=>{"use strict";W.d(ht,{T:()=>a});var O=W(8189),y=W(8421),t=W(515),e=W(3269),n=W(2076);function a(...f){const E=(0,e.yG)(f),I=(0,e._6)(f,1/0),Y=f;return Y.length?1===Y.length?(0,y.Xf)(Y[0]):(0,O.J)(I)((0,n.D)(Y,E)):t.E}},9646:(li,ht,W)=>{"use strict";W.d(ht,{of:()=>t});var O=W(3269),y=W(2076);function t(...e){const n=(0,O.yG)(e);return(0,y.D)(e,n)}},5963:(li,ht,W)=>{"use strict";W.d(ht,{H:()=>n});var O=W(8306),y=W(4986),t=W(3532);function n(a=0,f,E=y.P){let I=-1;return null!=f&&((0,t.K)(f)?E=f:I=f),new O.y(Y=>{let ee=function(a){return a instanceof Date&&!isNaN(a)}(a)?+a-E.now():a;ee<0&&(ee=0);let _e=0;return E.schedule(function(){Y.closed||(Y.next(_e++),0<=I?this.schedule(void 0,I):Y.complete())},ee)})}},5403:(li,ht,W)=>{"use strict";W.d(ht,{Q:()=>y});var O=W(930);class y extends O.Lv{constructor(e,n,a,f,E){super(e),this.onFinalize=E,this._next=n?function(I){try{n(I)}catch(Y){e.error(Y)}}:super._next,this._error=f?function(I){try{f(I)}catch(Y){e.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=a?function(){try{a()}catch(I){e.error(I)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}},262:(li,ht,W)=>{"use strict";W.d(ht,{K:()=>e});var O=W(8421),y=W(5403),t=W(4482);function e(n){return(0,t.e)((a,f)=>{let Y,E=null,I=!1;E=a.subscribe(new y.Q(f,void 0,void 0,ee=>{Y=(0,O.Xf)(n(ee,e(n)(a))),E?(E.unsubscribe(),E=null,Y.subscribe(f)):I=!0})),I&&(E.unsubscribe(),E=null,Y.subscribe(f))})}},4351:(li,ht,W)=>{"use strict";W.d(ht,{b:()=>t});var O=W(5577),y=W(576);function t(e,n){return(0,y.m)(n)?(0,O.z)(e,n,1):(0,O.z)(e,1)}},8372:(li,ht,W)=>{"use strict";W.d(ht,{b:()=>e});var O=W(4986),y=W(4482),t=W(5403);function e(n,a=O.z){return(0,y.e)((f,E)=>{let I=null,Y=null,ee=null;const _e=()=>{if(I){I.unsubscribe(),I=null;const Ae=Y;Y=null,E.next(Ae)}};function De(){const Ae=ee+n,Je=a.now();if(Je<Ae)return I=this.schedule(void 0,Ae-Je),void E.add(I);_e()}f.subscribe(new t.Q(E,Ae=>{Y=Ae,ee=a.now(),I||(I=a.schedule(De,n),E.add(I))},()=>{_e(),E.complete()},void 0,()=>{Y=I=null}))})}},1005:(li,ht,W)=>{"use strict";W.d(ht,{g:()=>_e});var O=W(4986),y=W(7272),t=W(5698),e=W(4482),n=W(5403),a=W(5032),E=W(9718),I=W(5577);function Y(De,Ae){return Ae?Je=>(0,y.z)(Ae.pipe((0,t.q)(1),(0,e.e)((De,Ae)=>{De.subscribe(new n.Q(Ae,a.Z))})),Je.pipe(Y(De))):(0,I.z)((Je,st)=>De(Je,st).pipe((0,t.q)(1),(0,E.h)(Je)))}var ee=W(5963);function _e(De,Ae=O.z){const Je=(0,ee.H)(De,Ae);return Y(()=>Je)}},1884:(li,ht,W)=>{"use strict";W.d(ht,{x:()=>e});var O=W(4671),y=W(4482),t=W(5403);function e(a,f=O.y){return a=null!=a?a:n,(0,y.e)((E,I)=>{let Y,ee=!0;E.subscribe(new t.Q(I,_e=>{const De=f(_e);(ee||!a(Y,De))&&(ee=!1,Y=De,I.next(_e))}))})}function n(a,f){return a===f}},9300:(li,ht,W)=>{"use strict";W.d(ht,{h:()=>t});var O=W(4482),y=W(5403);function t(e,n){return(0,O.e)((a,f)=>{let E=0;a.subscribe(new y.Q(f,I=>e.call(n,I,E++)&&f.next(I)))})}},8746:(li,ht,W)=>{"use strict";W.d(ht,{x:()=>y});var O=W(4482);function y(t){return(0,O.e)((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}},4004:(li,ht,W)=>{"use strict";W.d(ht,{U:()=>t});var O=W(4482),y=W(5403);function t(e,n){return(0,O.e)((a,f)=>{let E=0;a.subscribe(new y.Q(f,I=>{f.next(e.call(n,I,E++))}))})}},9718:(li,ht,W)=>{"use strict";W.d(ht,{h:()=>y});var O=W(4004);function y(t){return(0,O.U)(()=>t)}},8189:(li,ht,W)=>{"use strict";W.d(ht,{J:()=>t});var O=W(5577),y=W(4671);function t(e=1/0){return(0,O.z)(y.y,e)}},5577:(li,ht,W)=>{"use strict";W.d(ht,{z:()=>E});var O=W(4004),y=W(8421),t=W(4482),n=(W(9672),W(5403)),f=W(576);function E(I,Y,ee=1/0){return(0,f.m)(Y)?E((_e,De)=>(0,O.U)((Ae,Je)=>Y(_e,Ae,De,Je))((0,y.Xf)(I(_e,De))),ee):("number"==typeof Y&&(ee=Y),(0,t.e)((_e,De)=>function(I,Y,ee,_e,De,Ae,Je,st){const Ge=[];let lt=0,Rt=0,Wt=!1;const tt=()=>{Wt&&!Ge.length&&!lt&&Y.complete()},Oe=Qe=>lt<_e?Se(Qe):Ge.push(Qe),Se=Qe=>{lt++;let dt=!1;(0,y.Xf)(ee(Qe,Rt++)).subscribe(new n.Q(Y,it=>{Y.next(it)},()=>{dt=!0},void 0,()=>{if(dt)try{for(lt--;Ge.length&&lt<_e;){const it=Ge.shift();Se(it)}tt()}catch(it){Y.error(it)}}))};return I.subscribe(new n.Q(Y,Oe,()=>{Wt=!0,tt()})),()=>{}}(_e,De,I,ee)))}},3099:(li,ht,W)=>{"use strict";W.d(ht,{B:()=>a});var O=W(2076),y=W(5698),t=W(7579),e=W(930),n=W(4482);function a(E={}){const{connector:I=(()=>new t.x),resetOnError:Y=!0,resetOnComplete:ee=!0,resetOnRefCountZero:_e=!0}=E;return De=>{let Ae=null,Je=null,st=null,Ge=0,lt=!1,Rt=!1;const Wt=()=>{null==Je||Je.unsubscribe(),Je=null},tt=()=>{Wt(),Ae=st=null,lt=Rt=!1},Oe=()=>{const Se=Ae;tt(),null==Se||Se.unsubscribe()};return(0,n.e)((Se,Qe)=>{Ge++,!Rt&&!lt&&Wt();const dt=st=null!=st?st:I();Qe.add(()=>{Ge--,0===Ge&&!Rt&&!lt&&(Je=f(Oe,_e))}),dt.subscribe(Qe),Ae||(Ae=new e.Hp({next:it=>dt.next(it),error:it=>{Rt=!0,Wt(),Je=f(tt,Y,it),dt.error(it)},complete:()=>{lt=!0,Wt(),Je=f(tt,ee),dt.complete()}}),(0,O.D)(Se).subscribe(Ae))})(De)}}function f(E,I,...Y){return!0===I?(E(),null):!1===I?null:I(...Y).pipe((0,y.q)(1)).subscribe(()=>E())}},5684:(li,ht,W)=>{"use strict";W.d(ht,{T:()=>y});var O=W(9300);function y(t){return(0,O.h)((e,n)=>t<=n)}},8675:(li,ht,W)=>{"use strict";W.d(ht,{O:()=>e});var O=W(7272),y=W(3269),t=W(4482);function e(...n){const a=(0,y.yG)(n);return(0,t.e)((f,E)=>{(a?(0,O.z)(n,f,a):(0,O.z)(n,f)).subscribe(E)})}},3900:(li,ht,W)=>{"use strict";W.d(ht,{w:()=>e});var O=W(8421),y=W(4482),t=W(5403);function e(n,a){return(0,y.e)((f,E)=>{let I=null,Y=0,ee=!1;const _e=()=>ee&&!I&&E.complete();f.subscribe(new t.Q(E,De=>{null==I||I.unsubscribe();let Ae=0;const Je=Y++;(0,O.Xf)(n(De,Je)).subscribe(I=new t.Q(E,st=>E.next(a?a(De,st,Je,Ae++):st),()=>{I=null,_e()}))},()=>{ee=!0,_e()}))})}},5698:(li,ht,W)=>{"use strict";W.d(ht,{q:()=>e});var O=W(515),y=W(4482),t=W(5403);function e(n){return n<=0?()=>O.E:(0,y.e)((a,f)=>{let E=0;a.subscribe(new t.Q(f,I=>{++E<=n&&(f.next(I),n<=E&&f.complete())}))})}},2722:(li,ht,W)=>{"use strict";W.d(ht,{R:()=>n});var O=W(4482),y=W(5403),t=W(8421),e=W(5032);function n(a){return(0,O.e)((f,E)=>{(0,t.Xf)(a).subscribe(new y.Q(E,()=>E.complete(),e.Z)),!E.closed&&f.subscribe(E)})}},8505:(li,ht,W)=>{"use strict";W.d(ht,{b:()=>n});var O=W(576),y=W(4482),t=W(5403),e=W(4671);function n(a,f,E){const I=(0,O.m)(a)||f||E?{next:a,error:f,complete:E}:a;return I?(0,y.e)((Y,ee)=>{var _e;null===(_e=I.subscribe)||void 0===_e||_e.call(I);let De=!0;Y.subscribe(new t.Q(ee,Ae=>{var Je;null===(Je=I.next)||void 0===Je||Je.call(I,Ae),ee.next(Ae)},()=>{var Ae;De=!1,null===(Ae=I.complete)||void 0===Ae||Ae.call(I),ee.complete()},Ae=>{var Je;De=!1,null===(Je=I.error)||void 0===Je||Je.call(I,Ae),ee.error(Ae)},()=>{var Ae,Je;De&&(null===(Ae=I.unsubscribe)||void 0===Ae||Ae.call(I)),null===(Je=I.finalize)||void 0===Je||Je.call(I)}))}):e.y}},4408:(li,ht,W)=>{"use strict";W.d(ht,{o:()=>n});var O=W(727);class y extends O.w0{constructor(f,E){super()}schedule(f,E=0){return this}}const t={setInterval(...a){const{delegate:f}=t;return((null==f?void 0:f.setInterval)||setInterval)(...a)},clearInterval(a){const{delegate:f}=t;return((null==f?void 0:f.clearInterval)||clearInterval)(a)},delegate:void 0};var e=W(8737);class n extends y{constructor(f,E){super(f,E),this.scheduler=f,this.work=E,this.pending=!1}schedule(f,E=0){if(this.closed)return this;this.state=f;const I=this.id,Y=this.scheduler;return null!=I&&(this.id=this.recycleAsyncId(Y,I,E)),this.pending=!0,this.delay=E,this.id=this.id||this.requestAsyncId(Y,this.id,E),this}requestAsyncId(f,E,I=0){return t.setInterval(f.flush.bind(f,this),I)}recycleAsyncId(f,E,I=0){if(null!=I&&this.delay===I&&!1===this.pending)return E;t.clearInterval(E)}execute(f,E){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const I=this._execute(f,E);if(I)return I;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(f,E){let Y,I=!1;try{this.work(f)}catch(ee){I=!0,Y=ee||new Error("Scheduled action threw falsy error")}if(I)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:f,scheduler:E}=this,{actions:I}=E;this.work=this.state=this.scheduler=null,this.pending=!1,(0,e.P)(I,this),null!=f&&(this.id=this.recycleAsyncId(E,f,null)),this.delay=null,super.unsubscribe()}}}},7565:(li,ht,W)=>{"use strict";W.d(ht,{v:()=>t});var O=W(6063);class y{constructor(n,a=y.now){this.schedulerActionCtor=n,this.now=a}schedule(n,a=0,f){return new this.schedulerActionCtor(this,n).schedule(f,a)}}y.now=O.l.now;class t extends y{constructor(n,a=y.now){super(n,a),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:a}=this;if(this._active)return void a.push(n);let f;this._active=!0;do{if(f=n.execute(n.state,n.delay))break}while(n=a.shift());if(this._active=!1,f){for(;n=a.shift();)n.unsubscribe();throw f}}}},3101:(li,ht,W)=>{"use strict";W.d(ht,{E:()=>Ae});var O=W(4408);let t,y=1;const e={};function n(st){return st in e&&(delete e[st],!0)}const a={setImmediate(st){const Ge=y++;return e[Ge]=!0,t||(t=Promise.resolve()),t.then(()=>n(Ge)&&st()),Ge},clearImmediate(st){n(st)}},{setImmediate:E,clearImmediate:I}=a,Y={setImmediate(...st){const{delegate:Ge}=Y;return((null==Ge?void 0:Ge.setImmediate)||E)(...st)},clearImmediate(st){const{delegate:Ge}=Y;return((null==Ge?void 0:Ge.clearImmediate)||I)(st)},delegate:void 0};var _e=W(7565);const Ae=new class extends _e.v{flush(Ge){this._active=!0,this._scheduled=void 0;const{actions:lt}=this;let Rt,Wt=-1;Ge=Ge||lt.shift();const tt=lt.length;do{if(Rt=Ge.execute(Ge.state,Ge.delay))break}while(++Wt<tt&&(Ge=lt.shift()));if(this._active=!1,Rt){for(;++Wt<tt&&(Ge=lt.shift());)Ge.unsubscribe();throw Rt}}}(class extends O.o{constructor(Ge,lt){super(Ge,lt),this.scheduler=Ge,this.work=lt}requestAsyncId(Ge,lt,Rt=0){return null!==Rt&&Rt>0?super.requestAsyncId(Ge,lt,Rt):(Ge.actions.push(this),Ge._scheduled||(Ge._scheduled=Y.setImmediate(Ge.flush.bind(Ge,void 0))))}recycleAsyncId(Ge,lt,Rt=0){if(null!=Rt&&Rt>0||null==Rt&&this.delay>0)return super.recycleAsyncId(Ge,lt,Rt);0===Ge.actions.length&&(Y.clearImmediate(lt),Ge._scheduled=void 0)}})},4986:(li,ht,W)=>{"use strict";W.d(ht,{z:()=>t,P:()=>e});var O=W(4408);const t=new(W(7565).v)(O.o),e=t},6063:(li,ht,W)=>{"use strict";W.d(ht,{l:()=>O});const O={now:()=>(O.delegate||Date).now(),delegate:void 0}},3410:(li,ht,W)=>{"use strict";W.d(ht,{z:()=>O});const O={setTimeout(...y){const{delegate:t}=O;return((null==t?void 0:t.setTimeout)||setTimeout)(...y)},clearTimeout(y){const{delegate:t}=O;return((null==t?void 0:t.clearTimeout)||clearTimeout)(y)},delegate:void 0}},2202:(li,ht,W)=>{"use strict";W.d(ht,{h:()=>y});const y="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},8822:(li,ht,W)=>{"use strict";W.d(ht,{L:()=>O});const O="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(li,ht,W)=>{"use strict";W.d(ht,{jO:()=>e,yG:()=>n,_6:()=>a});var O=W(576),y=W(3532);function t(f){return f[f.length-1]}function e(f){return(0,O.m)(t(f))?f.pop():void 0}function n(f){return(0,y.K)(t(f))?f.pop():void 0}function a(f,E){return"number"==typeof t(f)?f.pop():E}},4742:(li,ht,W)=>{"use strict";W.d(ht,{D:()=>n});const{isArray:O}=Array,{getPrototypeOf:y,prototype:t,keys:e}=Object;function n(f){if(1===f.length){const E=f[0];if(O(E))return{args:E,keys:null};if(function(f){return f&&"object"==typeof f&&y(f)===t}(E)){const I=e(E);return{args:I.map(Y=>E[Y]),keys:I}}}return{args:f,keys:null}}},8737:(li,ht,W)=>{"use strict";function O(y,t){if(y){const e=y.indexOf(t);0<=e&&y.splice(e,1)}}W.d(ht,{P:()=>O})},3888:(li,ht,W)=>{"use strict";function O(y){const e=y(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}W.d(ht,{d:()=>O})},1810:(li,ht,W)=>{"use strict";function O(y,t){return y.reduce((e,n,a)=>(e[n]=t[a],e),{})}W.d(ht,{n:()=>O})},2806:(li,ht,W)=>{"use strict";W.d(ht,{x:()=>t,O:()=>e});var O=W(2416);let y=null;function t(n){if(O.v.useDeprecatedSynchronousErrorHandling){const a=!y;if(a&&(y={errorThrown:!1,error:null}),n(),a){const{errorThrown:f,error:E}=y;if(y=null,f)throw E}}else n()}function e(n){O.v.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=n)}},9672:(li,ht,W)=>{"use strict";function O(y,t,e,n=0,a=!1){const f=t.schedule(function(){e(),a?y.add(this.schedule(null,n)):this.unsubscribe()},n);if(y.add(f),!a)return f}W.d(ht,{f:()=>O})},4671:(li,ht,W)=>{"use strict";function O(y){return y}W.d(ht,{y:()=>O})},1144:(li,ht,W)=>{"use strict";W.d(ht,{z:()=>O});const O=y=>y&&"number"==typeof y.length&&"function"!=typeof y},2206:(li,ht,W)=>{"use strict";W.d(ht,{D:()=>y});var O=W(576);function y(t){return Symbol.asyncIterator&&(0,O.m)(null==t?void 0:t[Symbol.asyncIterator])}},576:(li,ht,W)=>{"use strict";function O(y){return"function"==typeof y}W.d(ht,{m:()=>O})},3670:(li,ht,W)=>{"use strict";W.d(ht,{c:()=>t});var O=W(8822),y=W(576);function t(e){return(0,y.m)(e[O.L])}},6495:(li,ht,W)=>{"use strict";W.d(ht,{T:()=>t});var O=W(2202),y=W(576);function t(e){return(0,y.m)(null==e?void 0:e[O.h])}},8239:(li,ht,W)=>{"use strict";W.d(ht,{t:()=>y});var O=W(576);function y(t){return(0,O.m)(null==t?void 0:t.then)}},3260:(li,ht,W)=>{"use strict";W.d(ht,{Q:()=>t,L:()=>e});var O=W(5987),y=W(576);function t(n){return(0,O.FC)(this,arguments,function*(){const f=n.getReader();try{for(;;){const{value:E,done:I}=yield(0,O.qq)(f.read());if(I)return yield(0,O.qq)(void 0);yield yield(0,O.qq)(E)}}finally{f.releaseLock()}})}function e(n){return(0,y.m)(null==n?void 0:n.getReader)}},3532:(li,ht,W)=>{"use strict";W.d(ht,{K:()=>y});var O=W(576);function y(t){return t&&(0,O.m)(t.schedule)}},4482:(li,ht,W)=>{"use strict";W.d(ht,{A:()=>y,e:()=>t});var O=W(576);function y(e){return(0,O.m)(null==e?void 0:e.lift)}function t(e){return n=>{if(y(n))return n.lift(function(a){try{return e(a,this)}catch(f){this.error(f)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(li,ht,W)=>{"use strict";W.d(ht,{Z:()=>e});var O=W(4004);const{isArray:y}=Array;function e(n){return(0,O.U)(a=>function(n,a){return y(a)?n(...a):n(a)}(n,a))}},5032:(li,ht,W)=>{"use strict";function O(){}W.d(ht,{Z:()=>O})},7849:(li,ht,W)=>{"use strict";W.d(ht,{h:()=>t});var O=W(2416),y=W(3410);function t(e){y.z.setTimeout(()=>{const{onUnhandledError:n}=O.v;if(!n)throw e;n(e)})}},4532:(li,ht,W)=>{"use strict";function O(y){return new TypeError(`You provided ${null!==y&&"object"==typeof y?"an invalid object":`'${y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(ht,{z:()=>O})},2734:function(li,ht){var y;void 0!==(y=function(){"use strict";function e(Y,ee,_e){var De=new XMLHttpRequest;De.open("GET",Y),De.responseType="blob",De.onload=function(){I(De.response,ee,_e)},De.onerror=function(){console.error("could not download file")},De.send()}function n(Y){var ee=new XMLHttpRequest;ee.open("HEAD",Y,!1);try{ee.send()}catch(_e){}return 200<=ee.status&&299>=ee.status}function a(Y){try{Y.dispatchEvent(new MouseEvent("click"))}catch(_e){var ee=document.createEvent("MouseEvents");ee.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Y.dispatchEvent(ee)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,E=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),I=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!E?function(Y,ee,_e){var De=f.URL||f.webkitURL,Ae=document.createElement("a");Ae.download=ee=ee||Y.name||"download",Ae.rel="noopener","string"==typeof Y?(Ae.href=Y,Ae.origin===location.origin?a(Ae):n(Ae.href)?e(Y,ee,_e):a(Ae,Ae.target="_blank")):(Ae.href=De.createObjectURL(Y),setTimeout(function(){De.revokeObjectURL(Ae.href)},4e4),setTimeout(function(){a(Ae)},0))}:"msSaveOrOpenBlob"in navigator?function(Y,ee,_e){if(ee=ee||Y.name||"download","string"!=typeof Y)navigator.msSaveOrOpenBlob(function(Y,ee){return void 0===ee?ee={autoBom:!1}:"object"!=typeof ee&&(console.warn("Deprecated: Expected third argument to be a object"),ee={autoBom:!ee}),ee.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Y.type)?new Blob(["\ufeff",Y],{type:Y.type}):Y}(Y,_e),ee);else if(n(Y))e(Y,ee,_e);else{var De=document.createElement("a");De.href=Y,De.target="_blank",setTimeout(function(){a(De)})}}:function(Y,ee,_e,De){if((De=De||open("","_blank"))&&(De.document.title=De.document.body.innerText="downloading..."),"string"==typeof Y)return e(Y,ee,_e);var Ae="application/octet-stream"===Y.type,Je=/constructor/i.test(f.HTMLElement)||f.safari,st=/CriOS\/[\d]+/.test(navigator.userAgent);if((st||Ae&&Je||E)&&"undefined"!=typeof FileReader){var Ge=new FileReader;Ge.onloadend=function(){var Wt=Ge.result;Wt=st?Wt:Wt.replace(/^data:[^;]*;/,"data:attachment/file;"),De?De.location.href=Wt:location=Wt,De=null},Ge.readAsDataURL(Y)}else{var lt=f.URL||f.webkitURL,Rt=lt.createObjectURL(Y);De?De.location=Rt:location.href=Rt,De=null,setTimeout(function(){lt.revokeObjectURL(Rt)},4e4)}});f.saveAs=I.saveAs=I,li.exports=I}.apply(ht,[]))&&(li.exports=y)},6942:(li,ht,W)=>{"use strict";var O,y,t;W.r(ht),W.d(ht,{Synth:()=>O}),function(){var e=window.URL||window.webkitURL,n=window.Blob;if(!e||!n)throw new Error("This browser does not support AudioSynth");var a=!1,f=null,E=function(De,Ae){return[new Uint8Array([Ae,Ae>>8]),new Uint8Array([Ae,Ae>>8,Ae>>16,Ae>>24])][De]},I=function(De,Ae,Je,st){Object.defineProperty(this,De,{value:Ae,writable:!!Je,enumerable:!!st})},Y=function(De,Ae,Je){I.call(this,De,Ae,Je,!0)};t=function(){this.__init__.apply(this,arguments)};var ee=I.bind(t.prototype),_e=Y.bind(t.prototype);ee("__init__",function(De,Ae,Je){if(!a)throw new Error("AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.");I.call(this,"_parent",De),Y.call(this,"name",Ae),I.call(this,"_soundID",Je)}),_e("play",function(De,Ae,Je){return this._parent.play(this._soundID,De,Ae,Je)}),_e("generate",function(De,Ae,Je){return this._parent.generate(this._soundID,De,Ae,Je)}),ee=I.bind((y=function De(){return f instanceof De?f:(this.__init__(),this)}).prototype),_e=Y.bind(y.prototype),ee("_debug",!1,!0),ee("_bitsPerSample",16),ee("_channels",1),ee("_sampleRate",44100,!0),_e("setSampleRate",function(De){return this._sampleRate=Math.max(Math.min(0|De,44100),4e3),this._clearCache(),this._sampleRate}),_e("getSampleRate",function(){return this._sampleRate}),ee("_volume",32768,!0),_e("setVolume",function(De){return De=parseFloat(De),isNaN(De)&&(De=0),De=Math.round(32768*De),this._volume=Math.max(Math.min(0|De,32768),0),this._clearCache(),this._volume}),_e("getVolume",function(){return Math.round(this._volume/32768*1e4)/1e4}),ee("_notes",{C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88}),ee("_fileCache",[],!0),ee("_temp",{},!0),ee("_sounds",[],!0),ee("_mod",[function(De,Ae,Je,st){return Math.sin(2*Math.PI*(De/Ae)*Je+st)}]),ee("_resizeCache",function(){for(var De=this._fileCache,Ae=this._sounds.length;De.length<Ae;){for(var Je=[],st=0;st<8;st++){var Ge={};for(var lt in this._notes)Ge[lt]={};Je.push(Ge)}De.push(Je)}}),ee("_clearCache",function(){this._fileCache=[],this._resizeCache()}),_e("generate",function(De,Ae,Je,st){var Ge=this._sounds[De];if(!Ge)for(var lt=0;lt<this._sounds.length;lt++)if(this._sounds[lt].name==De){Ge=this._sounds[lt],De=lt;break}if(!Ge)throw new Error("Invalid sound or sound ID: "+De);var Rt=(new Date).valueOf();this._temp={},Je|=0,Je=Math.min(8,Math.max(1,Je));var Wt=st?parseFloat(st):2;if(void 0===this._notes[Ae])throw new Error(Ae+" is not a valid note.");if(void 0!==this._fileCache[De][Je-1][Ae][Wt])return this._debug&&console.log((new Date).valueOf()-Rt,"ms to retrieve (cached)"),this._fileCache[De][Je-1][Ae][Wt];var tt=this._notes[Ae]*Math.pow(2,Je-4),Oe=this._sampleRate,Se=this._volume,Qe=this._channels,dt=this._bitsPerSample,it=Ge.attack(Oe,tt,Se),Pe=Ge.dampen(Oe,tt,Se),Re=Ge.wave,ge={modulate:this._mod,vars:this._temp},se=0,Be=new Uint8Array(new ArrayBuffer(Math.ceil(Oe*Wt*2))),ze=Oe*it|0,St=Oe*Wt|0;for(lt=0;lt!==ze;lt++)se=Se*(lt/(Oe*it))*Re.call(ge,lt,Oe,tt,Se),Be[lt<<1]=se,Be[1+(lt<<1)]=se>>8;for(;lt!==St;lt++)se=Se*Math.pow(1-(lt-Oe*it)/(Oe*(Wt-it)),Pe)*Re.call(ge,lt,Oe,tt,Se),Be[lt<<1]=se,Be[1+(lt<<1)]=se>>8;var wt=["RIFF",E(1,52),"WAVE","fmt ",E(1,16),E(0,1),E(0,Qe),E(1,Oe),E(1,Oe*Qe*dt/8),E(0,Qe*dt/8),E(0,dt),"data",E(1,Be.length*Qe*dt/8),Be],At=new n(wt,{type:"audio/wav"}),$t=e.createObjectURL(At);return this._fileCache[De][Je-1][Ae][Wt]=$t,this._debug&&console.log((new Date).valueOf()-Rt,"ms to generate"),$t}),_e("play",function(De,Ae,Je,st){var Ge=this.generate(De,Ae,Je,st);return new Audio(Ge).play(),!0}),_e("debug",function(){this._debug=!0}),_e("createInstrument",function(De){var Ae=0,Je=!1;if("string"==typeof De){for(var st=0;st<this._sounds.length;st++)if(this._sounds[st].name==De){Je=!0,Ae=st;break}}else this._sounds[De]&&(De=this._sounds[Ae=De].name,Je=!0);if(!Je)throw new Error("Invalid sound or sound ID: "+De);a=!0;var Ge=new t(this,De,Ae);return a=!1,Ge}),_e("listSounds",function(){for(var De=[],Ae=0;Ae<this._sounds.length;Ae++)De.push(this._sounds[Ae].name);return De}),ee("__init__",function(){this._resizeCache()}),_e("loadSoundProfile",function(){for(var De=0,Ae=arguments.length;De<Ae;De++){var Je=arguments[De];if(!(Je instanceof Object))throw new Error("Invalid sound profile.");this._sounds.push(Je)}return this._resizeCache(),!0}),_e("loadModulationFunction",function(){for(var De=0,Ae=arguments.length;De<Ae;De++){var Je=arguments[De];if("function"!=typeof Je)throw new Error("Invalid modulation function.");this._mod.push(Je)}return!0}),f=new y,O=f}(),O.loadModulationFunction(function(e,n,a,f){return 1*Math.sin(2*Math.PI*(e/n*a)+f)},function(e,n,a,f){return 1*Math.sin(4*Math.PI*(e/n*a)+f)},function(e,n,a,f){return 1*Math.sin(8*Math.PI*(e/n*a)+f)},function(e,n,a,f){return 1*Math.sin(.5*Math.PI*(e/n*a)+f)},function(e,n,a,f){return 1*Math.sin(.25*Math.PI*(e/n*a)+f)},function(e,n,a,f){return.5*Math.sin(2*Math.PI*(e/n*a)+f)},function(e,n,a,f){return.5*Math.sin(4*Math.PI*(e/n*a)+f)},function(e,n,a,f){return.5*Math.sin(8*Math.PI*(e/n*a)+f)},function(e,n,a,f){return.5*Math.sin(.5*Math.PI*(e/n*a)+f)},function(e,n,a,f){return.5*Math.sin(.25*Math.PI*(e/n*a)+f)}),O.loadSoundProfile({name:"piano",attack:function(){return.002},dampen:function(e,n,a){return Math.pow(.5*Math.log(n*a/e),2)},wave:function(e,n,a,f){var E=this.modulate[0];return this.modulate[1](e,n,a,Math.pow(E(e,n,a,0),2)+.75*E(e,n,a,.25)+.1*E(e,n,a,.5))}},{name:"organ",attack:function(){return.3},dampen:function(e,n){return 1+.01*n},wave:function(e,n,a){var f=this.modulate[0];return this.modulate[1](e,n,a,f(e,n,a,0)+.5*f(e,n,a,.25)+.25*f(e,n,a,.5))}},{name:"acoustic",attack:function(){return.002},dampen:function(){return 1},wave:function(e,n,a){var f=this.vars;f.valueTable=f.valueTable?f.valueTable:[],void 0===f.playVal&&(f.playVal=0),void 0===f.periodCount&&(f.periodCount=0);var E=f.valueTable,I=f.playVal,Y=f.periodCount,ee=n/a,_e=Math.floor(100*(ee-Math.floor(ee))),De=!1;if(E.length<=Math.ceil(ee))return E.push(2*Math.round(Math.random())-1),E[E.length-1];E[I]=.5*(E[I>=E.length-1?0:I+1]+E[I]),I>=Math.floor(ee)&&(I<Math.ceil(ee)?Y%100>=_e&&(De=!0,E[I+1]=.5*(E[0]+E[I+1]),f.periodCount++):De=!0);var Ae=E[I];return De?f.playVal=0:f.playVal++,Ae}},{name:"edm",attack:function(){return.002},dampen:function(){return 1},wave:function(e,n,a){var f=this.modulate[0],E=this.modulate.slice(1);return E[0](e,n,a,E[9](e,n,a,E[2](e,n,a,Math.pow(f(e,n,a,0),3)+Math.pow(f(e,n,a,.5),5)+Math.pow(f(e,n,a,1),7)))+E[8](e,n,a,f(e,n,a,1.75)))}})},5987:(li,ht,W)=>{"use strict";function E(Pe,Re,ge,se){return new(ge||(ge=Promise))(function(Be,ze){function St($t){try{At(se.next($t))}catch(Xt){ze(Xt)}}function wt($t){try{At(se.throw($t))}catch(Xt){ze(Xt)}}function At($t){$t.done?Be($t.value):function(Be){return Be instanceof ge?Be:new ge(function(ze){ze(Be)})}($t.value).then(St,wt)}At((se=se.apply(Pe,Re||[])).next())})}function Ge(Pe){return this instanceof Ge?(this.v=Pe,this):new Ge(Pe)}function lt(Pe,Re,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at,se=ge.apply(Pe,Re||[]),Be=[];return at={},ze("next"),ze("throw"),ze("return"),at[Symbol.asyncIterator]=function(){return this},at;function ze(ti){se[ti]&&(at[ti]=function(Wi){return new Promise(function(pi,Lt){Be.push([ti,Wi,pi,Lt])>1||St(ti,Wi)})})}function St(ti,Wi){try{!function(ti){ti.value instanceof Ge?Promise.resolve(ti.value.v).then(At,$t):Xt(Be[0][2],ti)}(se[ti](Wi))}catch(pi){Xt(Be[0][3],pi)}}function At(ti){St("next",ti)}function $t(ti){St("throw",ti)}function Xt(ti,Wi){ti(Wi),Be.shift(),Be.length&&St(Be[0][0],Be[0][1])}}function Wt(Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,Re=Pe[Symbol.asyncIterator];return Re?Re.call(Pe):(Pe=function(Pe){var Re="function"==typeof Symbol&&Symbol.iterator,ge=Re&&Pe[Re],se=0;if(ge)return ge.call(Pe);if(Pe&&"number"==typeof Pe.length)return{next:function(){return Pe&&se>=Pe.length&&(Pe=void 0),{value:Pe&&Pe[se++],done:!Pe}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Pe),ge={},se("next"),se("throw"),se("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function se(Be){ge[Be]=Pe[Be]&&function(ze){return new Promise(function(St,wt){!function(Be,ze,St,wt){Promise.resolve(wt).then(function(At){Be({value:At,done:St})},ze)}(St,wt,(ze=Pe[Be](ze)).done,ze.value)})}}}W.d(ht,{mG:()=>E,qq:()=>Ge,FC:()=>lt,KL:()=>Wt})},1777:(li,ht,W)=>{"use strict";W.d(ht,{l3:()=>t,_j:()=>O,LC:()=>y,ZN:()=>lt,jt:()=>n,pV:()=>De,F4:()=>Y,IO:()=>Je,vP:()=>f,SB:()=>I,oB:()=>E,eR:()=>ee,X$:()=>e,ZE:()=>Rt,k1:()=>Wt});class O{}class y{}const t="*";function e(tt,Oe){return{type:7,name:tt,definitions:Oe,options:{}}}function n(tt,Oe=null){return{type:4,styles:Oe,timings:tt}}function f(tt,Oe=null){return{type:2,steps:tt,options:Oe}}function E(tt){return{type:6,styles:tt,offset:null}}function I(tt,Oe,Se){return{type:0,name:tt,styles:Oe,options:Se}}function Y(tt){return{type:5,steps:tt}}function ee(tt,Oe,Se=null){return{type:1,expr:tt,animation:Oe,options:Se}}function De(tt=null){return{type:9,options:tt}}function Je(tt,Oe,Se=null){return{type:11,selector:tt,animation:Oe,options:Se}}function Ge(tt){Promise.resolve(null).then(tt)}class lt{constructor(Oe=0,Se=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Oe+Se}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}onStart(Oe){this._onStartFns.push(Oe)}onDone(Oe){this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ge(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Oe){this._position=this.totalTime?Oe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Oe){const Se="start"==Oe?this._onStartFns:this._onDoneFns;Se.forEach(Qe=>Qe()),Se.length=0}}class Rt{constructor(Oe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Oe;let Se=0,Qe=0,dt=0;const it=this.players.length;0==it?Ge(()=>this._onFinish()):this.players.forEach(Pe=>{Pe.onDone(()=>{++Se==it&&this._onFinish()}),Pe.onDestroy(()=>{++Qe==it&&this._onDestroy()}),Pe.onStart(()=>{++dt==it&&this._onStart()})}),this.totalTime=this.players.reduce((Pe,Re)=>Math.max(Pe,Re.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}init(){this.players.forEach(Oe=>Oe.init())}onStart(Oe){this._onStartFns.push(Oe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[])}onDone(Oe){this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Oe=>Oe.play())}pause(){this.players.forEach(Oe=>Oe.pause())}restart(){this.players.forEach(Oe=>Oe.restart())}finish(){this._onFinish(),this.players.forEach(Oe=>Oe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Oe=>Oe.destroy()),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this.players.forEach(Oe=>Oe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Oe){const Se=Oe*this.totalTime;this.players.forEach(Qe=>{const dt=Qe.totalTime?Math.min(1,Se/Qe.totalTime):1;Qe.setPosition(dt)})}getPosition(){const Oe=this.players.reduce((Se,Qe)=>null===Se||Qe.totalTime>Se.totalTime?Qe:Se,null);return null!=Oe?Oe.getPosition():0}beforeDestroy(){this.players.forEach(Oe=>{Oe.beforeDestroy&&Oe.beforeDestroy()})}triggerCallback(Oe){const Se="start"==Oe?this._onStartFns:this._onDoneFns;Se.forEach(Qe=>Qe()),Se.length=0}}const Wt="!"},5664:(li,ht,W)=>{"use strict";W.d(ht,{rt:()=>qe,s1:()=>ze,kH:()=>Mi,Em:()=>St,tE:()=>Zi,qV:()=>xt,qm:()=>jt,ic:()=>At,Kd:()=>xi,X6:()=>Ye,yG:()=>et});var O=W(9808),y=W(5e3),t=W(7579),e=W(727),n=W(1135),a=W(9646),f=W(1159),E=W(8505),I=W(8372),Y=W(9300),ee=W(4004),_e=W(5698),De=W(5684),Ae=W(1884),Je=W(2722),st=W(3191),Ge=W(925),lt=W(7144);class Be{constructor(te){this._items=te,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new t.x,this._typeaheadSubscription=e.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=me=>me.disabled,this._pressedLetters=[],this.tabOut=new t.x,this.change=new t.x,te instanceof y.n_E&&te.changes.subscribe(me=>{if(this._activeItem){const yt=me.toArray().indexOf(this._activeItem);yt>-1&&yt!==this._activeItemIndex&&(this._activeItemIndex=yt)}})}skipPredicate(te){return this._skipPredicateFn=te,this}withWrap(te=!0){return this._wrap=te,this}withVerticalOrientation(te=!0){return this._vertical=te,this}withHorizontalOrientation(te){return this._horizontal=te,this}withAllowedModifierKeys(te){return this._allowedModifierKeys=te,this}withTypeAhead(te=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,E.b)(me=>this._pressedLetters.push(me)),(0,I.b)(te),(0,Y.h)(()=>this._pressedLetters.length>0),(0,ee.U)(()=>this._pressedLetters.join(""))).subscribe(me=>{const Ke=this._getItemsArray();for(let yt=1;yt<Ke.length+1;yt++){const Si=(this._activeItemIndex+yt)%Ke.length,zi=Ke[Si];if(!this._skipPredicateFn(zi)&&0===zi.getLabel().toUpperCase().trim().indexOf(me)){this.setActiveItem(Si);break}}this._pressedLetters=[]}),this}withHomeAndEnd(te=!0){return this._homeAndEnd=te,this}setActiveItem(te){const me=this._activeItem;this.updateActiveItem(te),this._activeItem!==me&&this.change.next(this._activeItemIndex)}onKeydown(te){const me=te.keyCode,yt=["altKey","ctrlKey","metaKey","shiftKey"].every(Si=>!te[Si]||this._allowedModifierKeys.indexOf(Si)>-1);switch(me){case f.Mf:return void this.tabOut.next();case f.JH:if(this._vertical&&yt){this.setNextItemActive();break}return;case f.LH:if(this._vertical&&yt){this.setPreviousItemActive();break}return;case f.SV:if(this._horizontal&&yt){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case f.oh:if(this._horizontal&&yt){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case f.Sd:if(this._homeAndEnd&&yt){this.setFirstItemActive();break}return;case f.uR:if(this._homeAndEnd&&yt){this.setLastItemActive();break}return;default:return void((yt||(0,f.Vb)(te,"shiftKey"))&&(te.key&&1===te.key.length?this._letterKeyStream.next(te.key.toLocaleUpperCase()):(me>=f.A&&me<=f.Z||me>=f.xE&&me<=f.aO)&&this._letterKeyStream.next(String.fromCharCode(me))))}this._pressedLetters=[],te.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(te){const me=this._getItemsArray(),Ke="number"==typeof te?te:me.indexOf(te),yt=me[Ke];this._activeItem=null==yt?null:yt,this._activeItemIndex=Ke}_setActiveItemByDelta(te){this._wrap?this._setActiveInWrapMode(te):this._setActiveInDefaultMode(te)}_setActiveInWrapMode(te){const me=this._getItemsArray();for(let Ke=1;Ke<=me.length;Ke++){const yt=(this._activeItemIndex+te*Ke+me.length)%me.length;if(!this._skipPredicateFn(me[yt]))return void this.setActiveItem(yt)}}_setActiveInDefaultMode(te){this._setActiveItemByIndex(this._activeItemIndex+te,te)}_setActiveItemByIndex(te,me){const Ke=this._getItemsArray();if(Ke[te]){for(;this._skipPredicateFn(Ke[te]);)if(!Ke[te+=me])return;this.setActiveItem(te)}}_getItemsArray(){return this._items instanceof y.n_E?this._items.toArray():this._items}}class ze extends Be{setActiveItem(te){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(te),this.activeItem&&this.activeItem.setActiveStyles()}}class St extends Be{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(te){return this._origin=te,this}setActiveItem(te){super.setActiveItem(te),this.activeItem&&this.activeItem.focus(this._origin)}}let At=(()=>{class be{constructor(me){this._platform=me}isDisabled(me){return me.hasAttribute("disabled")}isVisible(me){return function(be){return!!(be.offsetWidth||be.offsetHeight||"function"==typeof be.getClientRects&&be.getClientRects().length)}(me)&&"visible"===getComputedStyle(me).visibility}isTabbable(me){if(!this._platform.isBrowser)return!1;const Ke=function(be){try{return be.frameElement}catch(te){return null}}(function(be){return be.ownerDocument&&be.ownerDocument.defaultView||window}(me));if(Ke&&(-1===vt(Ke)||!this.isVisible(Ke)))return!1;let yt=me.nodeName.toLowerCase(),Si=vt(me);return me.hasAttribute("contenteditable")?-1!==Si:!("iframe"===yt||"object"===yt||this._platform.WEBKIT&&this._platform.IOS&&!function(be){let te=be.nodeName.toLowerCase(),me="input"===te&&be.type;return"text"===me||"password"===me||"select"===te||"textarea"===te}(me))&&("audio"===yt?!!me.hasAttribute("controls")&&-1!==Si:"video"===yt?-1!==Si&&(null!==Si||this._platform.FIREFOX||me.hasAttribute("controls")):me.tabIndex>=0)}isFocusable(me,Ke){return function(be){return!function(be){return function(be){return"input"==be.nodeName.toLowerCase()}(be)&&"hidden"==be.type}(be)&&(function(be){let te=be.nodeName.toLowerCase();return"input"===te||"select"===te||"button"===te||"textarea"===te}(be)||function(be){return function(be){return"a"==be.nodeName.toLowerCase()}(be)&&be.hasAttribute("href")}(be)||be.hasAttribute("contenteditable")||Ce(be))}(me)&&!this.isDisabled(me)&&((null==Ke?void 0:Ke.ignoreVisibility)||this.isVisible(me))}}return be.\u0275fac=function(me){return new(me||be)(y.LFG(Ge.t4))},be.\u0275prov=y.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})();function Ce(be){if(!be.hasAttribute("tabindex")||void 0===be.tabIndex)return!1;let te=be.getAttribute("tabindex");return!(!te||isNaN(parseInt(te,10)))}function vt(be){if(!Ce(be))return null;const te=parseInt(be.getAttribute("tabindex")||"",10);return isNaN(te)?-1:te}class Te{constructor(te,me,Ke,yt,Si=!1){this._element=te,this._checker=me,this._ngZone=Ke,this._document=yt,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Si||this.attachAnchors()}get enabled(){return this._enabled}set enabled(te){this._enabled=te,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(te,this._startAnchor),this._toggleAnchorTabIndex(te,this._endAnchor))}destroy(){const te=this._startAnchor,me=this._endAnchor;te&&(te.removeEventListener("focus",this.startAnchorListener),te.remove()),me&&(me.removeEventListener("focus",this.endAnchorListener),me.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(te){return new Promise(me=>{this._executeOnStable(()=>me(this.focusInitialElement(te)))})}focusFirstTabbableElementWhenReady(te){return new Promise(me=>{this._executeOnStable(()=>me(this.focusFirstTabbableElement(te)))})}focusLastTabbableElementWhenReady(te){return new Promise(me=>{this._executeOnStable(()=>me(this.focusLastTabbableElement(te)))})}_getRegionBoundary(te){const me=this._element.querySelectorAll(`[cdk-focus-region-${te}], [cdkFocusRegion${te}], [cdk-focus-${te}]`);return"start"==te?me.length?me[0]:this._getFirstTabbableElement(this._element):me.length?me[me.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(te){const me=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(me){if(!this._checker.isFocusable(me)){const Ke=this._getFirstTabbableElement(me);return null==Ke||Ke.focus(te),!!Ke}return me.focus(te),!0}return this.focusFirstTabbableElement(te)}focusFirstTabbableElement(te){const me=this._getRegionBoundary("start");return me&&me.focus(te),!!me}focusLastTabbableElement(te){const me=this._getRegionBoundary("end");return me&&me.focus(te),!!me}hasAttached(){return this._hasAttached}_getFirstTabbableElement(te){if(this._checker.isFocusable(te)&&this._checker.isTabbable(te))return te;const me=te.children;for(let Ke=0;Ke<me.length;Ke++){const yt=me[Ke].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(me[Ke]):null;if(yt)return yt}return null}_getLastTabbableElement(te){if(this._checker.isFocusable(te)&&this._checker.isTabbable(te))return te;const me=te.children;for(let Ke=me.length-1;Ke>=0;Ke--){const yt=me[Ke].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(me[Ke]):null;if(yt)return yt}return null}_createAnchor(){const te=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,te),te.classList.add("cdk-visually-hidden"),te.classList.add("cdk-focus-trap-anchor"),te.setAttribute("aria-hidden","true"),te}_toggleAnchorTabIndex(te,me){te?me.setAttribute("tabindex","0"):me.removeAttribute("tabindex")}toggleAnchors(te){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(te,this._startAnchor),this._toggleAnchorTabIndex(te,this._endAnchor))}_executeOnStable(te){this._ngZone.isStable?te():this._ngZone.onStable.pipe((0,_e.q)(1)).subscribe(te)}}let xt=(()=>{class be{constructor(me,Ke,yt){this._checker=me,this._ngZone=Ke,this._document=yt}create(me,Ke=!1){return new Te(me,this._checker,this._ngZone,this._document,Ke)}}return be.\u0275fac=function(me){return new(me||be)(y.LFG(At),y.LFG(y.R0b),y.LFG(O.K0))},be.\u0275prov=y.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})();function Ye(be){return 0===be.offsetX&&0===be.offsetY}function et(be){const te=be.touches&&be.touches[0]||be.changedTouches&&be.changedTouches[0];return!(!te||-1!==te.identifier||null!=te.radiusX&&1!==te.radiusX||null!=te.radiusY&&1!==te.radiusY)}const Ie=new y.OlP("cdk-input-modality-detector-options"),Xe={ignoreKeys:[f.zL,f.jx,f.b2,f.MW,f.JU]},Vt=(0,Ge.i$)({passive:!0,capture:!0});let bi=(()=>{class be{constructor(me,Ke,yt,Si){this._platform=me,this._mostRecentTarget=null,this._modality=new n.X(null),this._lastTouchMs=0,this._onKeydown=zi=>{var mn,$n;(null===($n=null===(mn=this._options)||void 0===mn?void 0:mn.ignoreKeys)||void 0===$n?void 0:$n.some(Gt=>Gt===zi.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,Ge.sA)(zi))},this._onMousedown=zi=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Ye(zi)?"keyboard":"mouse"),this._mostRecentTarget=(0,Ge.sA)(zi))},this._onTouchstart=zi=>{et(zi)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,Ge.sA)(zi))},this._options=Object.assign(Object.assign({},Xe),Si),this.modalityDetected=this._modality.pipe((0,De.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,Ae.x)()),me.isBrowser&&Ke.runOutsideAngular(()=>{yt.addEventListener("keydown",this._onKeydown,Vt),yt.addEventListener("mousedown",this._onMousedown,Vt),yt.addEventListener("touchstart",this._onTouchstart,Vt)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Vt),document.removeEventListener("mousedown",this._onMousedown,Vt),document.removeEventListener("touchstart",this._onTouchstart,Vt))}}return be.\u0275fac=function(me){return new(me||be)(y.LFG(Ge.t4),y.LFG(y.R0b),y.LFG(O.K0),y.LFG(Ie,8))},be.\u0275prov=y.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})();const si=new y.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),sn=new y.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let xi=(()=>{class be{constructor(me,Ke,yt,Si){this._ngZone=Ke,this._defaultOptions=Si,this._document=yt,this._liveElement=me||this._createLiveElement()}announce(me,...Ke){const yt=this._defaultOptions;let Si,zi;return 1===Ke.length&&"number"==typeof Ke[0]?zi=Ke[0]:[Si,zi]=Ke,this.clear(),clearTimeout(this._previousTimeout),Si||(Si=yt&&yt.politeness?yt.politeness:"polite"),null==zi&&yt&&(zi=yt.duration),this._liveElement.setAttribute("aria-live",Si),this._ngZone.runOutsideAngular(()=>new Promise(mn=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=me,mn(),"number"==typeof zi&&(this._previousTimeout=setTimeout(()=>this.clear(),zi))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var me;clearTimeout(this._previousTimeout),null===(me=this._liveElement)||void 0===me||me.remove(),this._liveElement=null}_createLiveElement(){const me="cdk-live-announcer-element",Ke=this._document.getElementsByClassName(me),yt=this._document.createElement("div");for(let Si=0;Si<Ke.length;Si++)Ke[Si].remove();return yt.classList.add(me),yt.classList.add("cdk-visually-hidden"),yt.setAttribute("aria-atomic","true"),yt.setAttribute("aria-live","polite"),this._document.body.appendChild(yt),yt}}return be.\u0275fac=function(me){return new(me||be)(y.LFG(si,8),y.LFG(y.R0b),y.LFG(O.K0),y.LFG(sn,8))},be.\u0275prov=y.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})();const Vi=new y.OlP("cdk-focus-monitor-default-options"),Ni=(0,Ge.i$)({passive:!0,capture:!0});let Zi=(()=>{class be{constructor(me,Ke,yt,Si,zi){this._ngZone=me,this._platform=Ke,this._inputModalityDetector=yt,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new t.x,this._rootNodeFocusAndBlurListener=mn=>{const $n=(0,Ge.sA)(mn),Gt="focus"===mn.type?this._onFocus:this._onBlur;for(let Mt=$n;Mt;Mt=Mt.parentElement)Gt.call(this,mn,Mt)},this._document=Si,this._detectionMode=(null==zi?void 0:zi.detectionMode)||0}monitor(me,Ke=!1){const yt=(0,st.fI)(me);if(!this._platform.isBrowser||1!==yt.nodeType)return(0,a.of)(null);const Si=(0,Ge.kV)(yt)||this._getDocument(),zi=this._elementInfo.get(yt);if(zi)return Ke&&(zi.checkChildren=!0),zi.subject;const mn={checkChildren:Ke,subject:new t.x,rootNode:Si};return this._elementInfo.set(yt,mn),this._registerGlobalListeners(mn),mn.subject}stopMonitoring(me){const Ke=(0,st.fI)(me),yt=this._elementInfo.get(Ke);yt&&(yt.subject.complete(),this._setClasses(Ke),this._elementInfo.delete(Ke),this._removeGlobalListeners(yt))}focusVia(me,Ke,yt){const Si=(0,st.fI)(me);Si===this._getDocument().activeElement?this._getClosestElementsInfo(Si).forEach(([mn,$n])=>this._originChanged(mn,Ke,$n)):(this._setOrigin(Ke),"function"==typeof Si.focus&&Si.focus(yt))}ngOnDestroy(){this._elementInfo.forEach((me,Ke)=>this.stopMonitoring(Ke))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(me){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(me)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(me){return 1===this._detectionMode||!!(null==me?void 0:me.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(me,Ke){me.classList.toggle("cdk-focused",!!Ke),me.classList.toggle("cdk-touch-focused","touch"===Ke),me.classList.toggle("cdk-keyboard-focused","keyboard"===Ke),me.classList.toggle("cdk-mouse-focused","mouse"===Ke),me.classList.toggle("cdk-program-focused","program"===Ke)}_setOrigin(me,Ke=!1){this._ngZone.runOutsideAngular(()=>{this._origin=me,this._originFromTouchInteraction="touch"===me&&Ke,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(me,Ke){const yt=this._elementInfo.get(Ke),Si=(0,Ge.sA)(me);!yt||!yt.checkChildren&&Ke!==Si||this._originChanged(Ke,this._getFocusOrigin(Si),yt)}_onBlur(me,Ke){const yt=this._elementInfo.get(Ke);!yt||yt.checkChildren&&me.relatedTarget instanceof Node&&Ke.contains(me.relatedTarget)||(this._setClasses(Ke),this._emitOrigin(yt.subject,null))}_emitOrigin(me,Ke){this._ngZone.run(()=>me.next(Ke))}_registerGlobalListeners(me){if(!this._platform.isBrowser)return;const Ke=me.rootNode,yt=this._rootNodeFocusListenerCount.get(Ke)||0;yt||this._ngZone.runOutsideAngular(()=>{Ke.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ni),Ke.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ni)}),this._rootNodeFocusListenerCount.set(Ke,yt+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Je.R)(this._stopInputModalityDetector)).subscribe(Si=>{this._setOrigin(Si,!0)}))}_removeGlobalListeners(me){const Ke=me.rootNode;if(this._rootNodeFocusListenerCount.has(Ke)){const yt=this._rootNodeFocusListenerCount.get(Ke);yt>1?this._rootNodeFocusListenerCount.set(Ke,yt-1):(Ke.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ni),Ke.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ni),this._rootNodeFocusListenerCount.delete(Ke))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(me,Ke,yt){this._setClasses(me,Ke),this._emitOrigin(yt.subject,Ke),this._lastFocusOrigin=Ke}_getClosestElementsInfo(me){const Ke=[];return this._elementInfo.forEach((yt,Si)=>{(Si===me||yt.checkChildren&&Si.contains(me))&&Ke.push([Si,yt])}),Ke}}return be.\u0275fac=function(me){return new(me||be)(y.LFG(y.R0b),y.LFG(Ge.t4),y.LFG(bi),y.LFG(O.K0,8),y.LFG(Vi,8))},be.\u0275prov=y.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})(),Mi=(()=>{class be{constructor(me,Ke){this._elementRef=me,this._focusMonitor=Ke,this.cdkFocusChange=new y.vpe}ngAfterViewInit(){const me=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(me,1===me.nodeType&&me.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(Ke=>this.cdkFocusChange.emit(Ke))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return be.\u0275fac=function(me){return new(me||be)(y.Y36(y.SBq),y.Y36(Zi))},be.\u0275dir=y.lG2({type:be,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),be})();const fn="cdk-high-contrast-black-on-white",$i="cdk-high-contrast-white-on-black",Tn="cdk-high-contrast-active";let jt=(()=>{class be{constructor(me,Ke){this._platform=me,this._document=Ke}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const me=this._document.createElement("div");me.style.backgroundColor="rgb(1,2,3)",me.style.position="absolute",this._document.body.appendChild(me);const Ke=this._document.defaultView||window,yt=Ke&&Ke.getComputedStyle?Ke.getComputedStyle(me):null,Si=(yt&&yt.backgroundColor||"").replace(/ /g,"");switch(me.remove(),Si){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const me=this._document.body.classList;me.remove(Tn),me.remove(fn),me.remove($i),this._hasCheckedHighContrastMode=!0;const Ke=this.getHighContrastMode();1===Ke?(me.add(Tn),me.add(fn)):2===Ke&&(me.add(Tn),me.add($i))}}}return be.\u0275fac=function(me){return new(me||be)(y.LFG(Ge.t4),y.LFG(O.K0))},be.\u0275prov=y.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})(),qe=(()=>{class be{constructor(me){me._applyBodyHighContrastModeCssClasses()}}return be.\u0275fac=function(me){return new(me||be)(y.LFG(jt))},be.\u0275mod=y.oAB({type:be}),be.\u0275inj=y.cJS({imports:[[Ge.ud,lt.Q8]]}),be})()},226:(li,ht,W)=>{"use strict";W.d(ht,{vT:()=>I,Is:()=>f});var O=W(5e3),y=W(9808);const t=new O.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,O.f3M)(y.K0)}}),n=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let f=(()=>{class Y{constructor(_e){if(this.value="ltr",this.change=new O.vpe,_e){const Ae=_e.documentElement?_e.documentElement.dir:null;this.value=function(Y){const ee=(null==Y?void 0:Y.toLowerCase())||"";return"auto"===ee&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?n.test(navigator.language)?"rtl":"ltr":"rtl"===ee?"rtl":"ltr"}((_e.body?_e.body.dir:null)||Ae||"ltr")}}ngOnDestroy(){this.change.complete()}}return Y.\u0275fac=function(_e){return new(_e||Y)(O.LFG(t,8))},Y.\u0275prov=O.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),I=(()=>{class Y{}return Y.\u0275fac=function(_e){return new(_e||Y)},Y.\u0275mod=O.oAB({type:Y}),Y.\u0275inj=O.cJS({}),Y})()},3191:(li,ht,W)=>{"use strict";W.d(ht,{Eq:()=>n,Ig:()=>y,HM:()=>a,fI:()=>f,su:()=>t,du:()=>E});var O=W(5e3);function y(I){return null!=I&&"false"!=`${I}`}function t(I,Y=0){return function(I){return!isNaN(parseFloat(I))&&!isNaN(Number(I))}(I)?Number(I):Y}function n(I){return Array.isArray(I)?I:[I]}function a(I){return null==I?"":"string"==typeof I?I:`${I}px`}function f(I){return I instanceof O.SBq?I.nativeElement:I}function E(I,Y=/\s+/){const ee=[];if(null!=I){const _e=Array.isArray(I)?I:`${I}`.split(Y);for(const De of _e){const Ae=`${De}`.trim();Ae&&ee.push(Ae)}}return ee}},449:(li,ht,W)=>{"use strict";W.d(ht,{Ov:()=>E,A8:()=>Y,yy:()=>a,eX:()=>f,k:()=>ee,Z9:()=>e});var O=W(7579),y=W(5e3);function e(_e){return _e&&"function"==typeof _e.connect}class a{applyChanges(De,Ae,Je,st,Ge){De.forEachOperation((lt,Rt,Wt)=>{let tt,Oe;if(null==lt.previousIndex){const Se=Je(lt,Rt,Wt);tt=Ae.createEmbeddedView(Se.templateRef,Se.context,Se.index),Oe=1}else null==Wt?(Ae.remove(Rt),Oe=3):(tt=Ae.get(Rt),Ae.move(tt,Wt),Oe=2);Ge&&Ge({context:null==tt?void 0:tt.context,operation:Oe,record:lt})})}detach(){}}class f{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(De,Ae,Je,st,Ge){De.forEachOperation((lt,Rt,Wt)=>{let tt,Oe;null==lt.previousIndex?(tt=this._insertView(()=>Je(lt,Rt,Wt),Wt,Ae,st(lt)),Oe=tt?1:0):null==Wt?(this._detachAndCacheView(Rt,Ae),Oe=3):(tt=this._moveView(Rt,Wt,Ae,st(lt)),Oe=2),Ge&&Ge({context:null==tt?void 0:tt.context,operation:Oe,record:lt})})}detach(){for(const De of this._viewCache)De.destroy();this._viewCache=[]}_insertView(De,Ae,Je,st){const Ge=this._insertViewFromCache(Ae,Je);if(Ge)return void(Ge.context.$implicit=st);const lt=De();return Je.createEmbeddedView(lt.templateRef,lt.context,lt.index)}_detachAndCacheView(De,Ae){const Je=Ae.detach(De);this._maybeCacheView(Je,Ae)}_moveView(De,Ae,Je,st){const Ge=Je.get(De);return Je.move(Ge,Ae),Ge.context.$implicit=st,Ge}_maybeCacheView(De,Ae){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(De);else{const Je=Ae.indexOf(De);-1===Je?De.destroy():Ae.remove(Je)}}_insertViewFromCache(De,Ae){const Je=this._viewCache.pop();return Je&&Ae.insert(Je,De),Je||null}}class E{constructor(De=!1,Ae,Je=!0){this._multiple=De,this._emitChanges=Je,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new O.x,Ae&&Ae.length&&(De?Ae.forEach(st=>this._markSelected(st)):this._markSelected(Ae[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...De){this._verifyValueAssignment(De),De.forEach(Ae=>this._markSelected(Ae)),this._emitChangeEvent()}deselect(...De){this._verifyValueAssignment(De),De.forEach(Ae=>this._unmarkSelected(Ae)),this._emitChangeEvent()}toggle(De){this.isSelected(De)?this.deselect(De):this.select(De)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(De){return this._selection.has(De)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(De){this._multiple&&this.selected&&this._selected.sort(De)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(De){this.isSelected(De)||(this._multiple||this._unmarkAll(),this._selection.add(De),this._emitChanges&&this._selectedToEmit.push(De))}_unmarkSelected(De){this.isSelected(De)&&(this._selection.delete(De),this._emitChanges&&this._deselectedToEmit.push(De))}_unmarkAll(){this.isEmpty()||this._selection.forEach(De=>this._unmarkSelected(De))}_verifyValueAssignment(De){}}let Y=(()=>{class _e{constructor(){this._listeners=[]}notify(Ae,Je){for(let st of this._listeners)st(Ae,Je)}listen(Ae){return this._listeners.push(Ae),()=>{this._listeners=this._listeners.filter(Je=>Ae!==Je)}}ngOnDestroy(){this._listeners=[]}}return _e.\u0275fac=function(Ae){return new(Ae||_e)},_e.\u0275prov=y.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})();const ee=new y.OlP("_ViewRepeater")},1159:(li,ht,W)=>{"use strict";W.d(ht,{A:()=>ti,zL:()=>E,ZH:()=>y,jx:()=>f,yY:()=>Qe,JH:()=>Wt,uR:()=>Je,K5:()=>n,hY:()=>ee,Sd:()=>st,oh:()=>Ge,b2:()=>Bn,MW:()=>ni,aO:()=>St,VM:()=>Ae,Ku:()=>De,SV:()=>Rt,JU:()=>a,L_:()=>_e,Mf:()=>t,LH:()=>lt,Z:()=>si,xE:()=>dt,Vb:()=>En});const y=8,t=9,n=13,a=16,f=17,E=18,ee=27,_e=32,De=33,Ae=34,Je=35,st=36,Ge=37,lt=38,Rt=39,Wt=40,Qe=46,dt=48,St=57,ti=65,si=90,ni=91,Bn=224;function En(Sn,...dn){return dn.length?dn.some(Qs=>Sn[Qs]):Sn.altKey||Sn.shiftKey||Sn.ctrlKey||Sn.metaKey}},5113:(li,ht,W)=>{"use strict";W.d(ht,{Yg:()=>Wt,u3:()=>Oe});var O=W(5e3),y=W(3191),t=W(7579),e=W(9841),n=W(7272),a=W(8306),f=W(5698),E=W(5684),I=W(8372),Y=W(4004),ee=W(8675),_e=W(2722),De=W(925);const Je=new Set;let st,Ge=(()=>{class Se{constructor(dt){this._platform=dt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Rt}matchMedia(dt){return(this._platform.WEBKIT||this._platform.BLINK)&&function(Se){if(!Je.has(Se))try{st||(st=document.createElement("style"),st.setAttribute("type","text/css"),document.head.appendChild(st)),st.sheet&&(st.sheet.insertRule(`@media ${Se} {body{ }}`,0),Je.add(Se))}catch(Qe){console.error(Qe)}}(dt),this._matchMedia(dt)}}return Se.\u0275fac=function(dt){return new(dt||Se)(O.LFG(De.t4))},Se.\u0275prov=O.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();function Rt(Se){return{matches:"all"===Se||""===Se,media:Se,addListener:()=>{},removeListener:()=>{}}}let Wt=(()=>{class Se{constructor(dt,it){this._mediaMatcher=dt,this._zone=it,this._queries=new Map,this._destroySubject=new t.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(dt){return tt((0,y.Eq)(dt)).some(Pe=>this._registerQuery(Pe).mql.matches)}observe(dt){const Pe=tt((0,y.Eq)(dt)).map(ge=>this._registerQuery(ge).observable);let Re=(0,e.a)(Pe);return Re=(0,n.z)(Re.pipe((0,f.q)(1)),Re.pipe((0,E.T)(1),(0,I.b)(0))),Re.pipe((0,Y.U)(ge=>{const se={matches:!1,breakpoints:{}};return ge.forEach(({matches:at,query:Be})=>{se.matches=se.matches||at,se.breakpoints[Be]=at}),se}))}_registerQuery(dt){if(this._queries.has(dt))return this._queries.get(dt);const it=this._mediaMatcher.matchMedia(dt),Re={observable:new a.y(ge=>{const se=at=>this._zone.run(()=>ge.next(at));return it.addListener(se),()=>{it.removeListener(se)}}).pipe((0,ee.O)(it),(0,Y.U)(({matches:ge})=>({query:dt,matches:ge})),(0,_e.R)(this._destroySubject)),mql:it};return this._queries.set(dt,Re),Re}}return Se.\u0275fac=function(dt){return new(dt||Se)(O.LFG(Ge),O.LFG(O.R0b))},Se.\u0275prov=O.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();function tt(Se){return Se.map(Qe=>Qe.split(",")).reduce((Qe,dt)=>Qe.concat(dt)).map(Qe=>Qe.trim())}const Oe={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},7144:(li,ht,W)=>{"use strict";W.d(ht,{wD:()=>E,Q8:()=>I});var O=W(3191),y=W(5e3),t=W(8306),e=W(7579),n=W(8372);let a=(()=>{class Y{create(_e){return"undefined"==typeof MutationObserver?null:new MutationObserver(_e)}}return Y.\u0275fac=function(_e){return new(_e||Y)},Y.\u0275prov=y.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),f=(()=>{class Y{constructor(_e){this._mutationObserverFactory=_e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((_e,De)=>this._cleanupObserver(De))}observe(_e){const De=(0,O.fI)(_e);return new t.y(Ae=>{const st=this._observeElement(De).subscribe(Ae);return()=>{st.unsubscribe(),this._unobserveElement(De)}})}_observeElement(_e){if(this._observedElements.has(_e))this._observedElements.get(_e).count++;else{const De=new e.x,Ae=this._mutationObserverFactory.create(Je=>De.next(Je));Ae&&Ae.observe(_e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(_e,{observer:Ae,stream:De,count:1})}return this._observedElements.get(_e).stream}_unobserveElement(_e){this._observedElements.has(_e)&&(this._observedElements.get(_e).count--,this._observedElements.get(_e).count||this._cleanupObserver(_e))}_cleanupObserver(_e){if(this._observedElements.has(_e)){const{observer:De,stream:Ae}=this._observedElements.get(_e);De&&De.disconnect(),Ae.complete(),this._observedElements.delete(_e)}}}return Y.\u0275fac=function(_e){return new(_e||Y)(y.LFG(a))},Y.\u0275prov=y.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),E=(()=>{class Y{constructor(_e,De,Ae){this._contentObserver=_e,this._elementRef=De,this._ngZone=Ae,this.event=new y.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(_e){this._disabled=(0,O.Ig)(_e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(_e){this._debounce=(0,O.su)(_e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const _e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?_e.pipe((0,n.b)(this.debounce)):_e).subscribe(this.event)})}_unsubscribe(){var _e;null===(_e=this._currentSubscription)||void 0===_e||_e.unsubscribe()}}return Y.\u0275fac=function(_e){return new(_e||Y)(y.Y36(f),y.Y36(y.SBq),y.Y36(y.R0b))},Y.\u0275dir=y.lG2({type:Y,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),Y})(),I=(()=>{class Y{}return Y.\u0275fac=function(_e){return new(_e||Y)},Y.\u0275mod=y.oAB({type:Y}),Y.\u0275inj=y.cJS({providers:[a]}),Y})()},1314:(li,ht,W)=>{"use strict";W.d(ht,{aV:()=>yi,X_:()=>Oe,Xj:()=>ge,U8:()=>xt});var O=W(495),y=W(9808),t=W(5e3),e=W(3191),n=W(925),a=W(226),f=W(7429),E=W(7579),I=W(727),Y=W(6451),ee=W(5698),_e=W(2722);const De=(0,n.Mq)();class Ae{constructor(ke,We){this._viewportRuler=ke,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=We}attach(){}enable(){if(this._canBeEnabled()){const ke=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=ke.style.left||"",this._previousHTMLStyles.top=ke.style.top||"",ke.style.left=(0,e.HM)(-this._previousScrollPosition.left),ke.style.top=(0,e.HM)(-this._previousScrollPosition.top),ke.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const ke=this._document.documentElement,_t=ke.style,Ue=this._document.body.style,Ye=_t.scrollBehavior||"",et=Ue.scrollBehavior||"";this._isEnabled=!1,_t.left=this._previousHTMLStyles.left,_t.top=this._previousHTMLStyles.top,ke.classList.remove("cdk-global-scrollblock"),De&&(_t.scrollBehavior=Ue.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),De&&(_t.scrollBehavior=Ye,Ue.scrollBehavior=et)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const We=this._document.body,_t=this._viewportRuler.getViewportSize();return We.scrollHeight>_t.height||We.scrollWidth>_t.width}}class st{constructor(ke,We,_t,Ue){this._scrollDispatcher=ke,this._ngZone=We,this._viewportRuler=_t,this._config=Ue,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(ke){this._overlayRef=ke}enable(){if(this._scrollSubscription)return;const ke=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=ke.subscribe(()=>{const We=this._viewportRuler.getViewportScrollPosition().top;Math.abs(We-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=ke.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Ge{enable(){}disable(){}attach(){}}function lt(Ft,ke){return ke.some(We=>Ft.bottom<We.top||Ft.top>We.bottom||Ft.right<We.left||Ft.left>We.right)}function Rt(Ft,ke){return ke.some(We=>Ft.top<We.top||Ft.bottom>We.bottom||Ft.left<We.left||Ft.right>We.right)}class Wt{constructor(ke,We,_t,Ue){this._scrollDispatcher=ke,this._viewportRuler=We,this._ngZone=_t,this._config=Ue,this._scrollSubscription=null}attach(ke){this._overlayRef=ke}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const We=this._overlayRef.overlayElement.getBoundingClientRect(),{width:_t,height:Ue}=this._viewportRuler.getViewportSize();lt(We,[{width:_t,height:Ue,bottom:Ue,right:_t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let tt=(()=>{class Ft{constructor(We,_t,Ue,Ye){this._scrollDispatcher=We,this._viewportRuler=_t,this._ngZone=Ue,this.noop=()=>new Ge,this.close=et=>new st(this._scrollDispatcher,this._ngZone,this._viewportRuler,et),this.block=()=>new Ae(this._viewportRuler,this._document),this.reposition=et=>new Wt(this._scrollDispatcher,this._viewportRuler,this._ngZone,et),this._document=Ye}}return Ft.\u0275fac=function(We){return new(We||Ft)(t.LFG(O.mF),t.LFG(O.rL),t.LFG(t.R0b),t.LFG(y.K0))},Ft.\u0275prov=t.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"root"}),Ft})();class Oe{constructor(ke){if(this.scrollStrategy=new Ge,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,ke){const We=Object.keys(ke);for(const _t of We)void 0!==ke[_t]&&(this[_t]=ke[_t])}}}class dt{constructor(ke,We){this.connectionPair=ke,this.scrollableViewProperties=We}}class Re{constructor(ke,We,_t,Ue,Ye,et,Ie,Xe,Bt){this._portalOutlet=ke,this._host=We,this._pane=_t,this._config=Ue,this._ngZone=Ye,this._keyboardDispatcher=et,this._document=Ie,this._location=Xe,this._outsideClickDispatcher=Bt,this._backdropElement=null,this._backdropClick=new E.x,this._attachments=new E.x,this._detachments=new E.x,this._locationChanges=I.w0.EMPTY,this._backdropClickHandler=Vt=>this._backdropClick.next(Vt),this._keydownEvents=new E.x,this._outsidePointerEvents=new E.x,Ue.scrollStrategy&&(this._scrollStrategy=Ue.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Ue.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(ke){let We=this._portalOutlet.attach(ke);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ee.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),We}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const ke=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),ke}dispose(){var ke;const We=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(ke=this._host)||void 0===ke||ke.remove(),this._previousHostParent=this._pane=this._host=null,We&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(ke){ke!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=ke,this.hasAttached()&&(ke.attach(this),this.updatePosition()))}updateSize(ke){this._config=Object.assign(Object.assign({},this._config),ke),this._updateElementSize()}setDirection(ke){this._config=Object.assign(Object.assign({},this._config),{direction:ke}),this._updateElementDirection()}addPanelClass(ke){this._pane&&this._toggleClasses(this._pane,ke,!0)}removePanelClass(ke){this._pane&&this._toggleClasses(this._pane,ke,!1)}getDirection(){const ke=this._config.direction;return ke?"string"==typeof ke?ke:ke.value:"ltr"}updateScrollStrategy(ke){ke!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=ke,this.hasAttached()&&(ke.attach(this),ke.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const ke=this._pane.style;ke.width=(0,e.HM)(this._config.width),ke.height=(0,e.HM)(this._config.height),ke.minWidth=(0,e.HM)(this._config.minWidth),ke.minHeight=(0,e.HM)(this._config.minHeight),ke.maxWidth=(0,e.HM)(this._config.maxWidth),ke.maxHeight=(0,e.HM)(this._config.maxHeight)}_togglePointerEvents(ke){this._pane.style.pointerEvents=ke?"":"none"}_attachBackdrop(){const ke="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(ke)})}):this._backdropElement.classList.add(ke)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const ke=this._backdropElement;if(!ke)return;let We;const _t=()=>{ke&&(ke.removeEventListener("click",this._backdropClickHandler),ke.removeEventListener("transitionend",_t),this._disposeBackdrop(ke)),this._config.backdropClass&&this._toggleClasses(ke,this._config.backdropClass,!1),clearTimeout(We)};ke.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{ke.addEventListener("transitionend",_t)}),ke.style.pointerEvents="none",We=this._ngZone.runOutsideAngular(()=>setTimeout(_t,500))}_toggleClasses(ke,We,_t){const Ue=(0,e.Eq)(We||[]).filter(Ye=>!!Ye);Ue.length&&(_t?ke.classList.add(...Ue):ke.classList.remove(...Ue))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const ke=this._ngZone.onStable.pipe((0,_e.R)((0,Y.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),ke.unsubscribe())})})}_disposeScrollStrategy(){const ke=this._scrollStrategy;ke&&(ke.disable(),ke.detach&&ke.detach())}_disposeBackdrop(ke){ke&&(ke.remove(),this._backdropElement===ke&&(this._backdropElement=null))}}let ge=(()=>{class Ft{constructor(We,_t){this._platform=_t,this._document=We}ngOnDestroy(){var We;null===(We=this._containerElement)||void 0===We||We.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const We="cdk-overlay-container";if(this._platform.isBrowser||(0,n.Oy)()){const Ue=this._document.querySelectorAll(`.${We}[platform="server"], .${We}[platform="test"]`);for(let Ye=0;Ye<Ue.length;Ye++)Ue[Ye].remove()}const _t=this._document.createElement("div");_t.classList.add(We),(0,n.Oy)()?_t.setAttribute("platform","test"):this._platform.isBrowser||_t.setAttribute("platform","server"),this._document.body.appendChild(_t),this._containerElement=_t}}return Ft.\u0275fac=function(We){return new(We||Ft)(t.LFG(y.K0),t.LFG(n.t4))},Ft.\u0275prov=t.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"root"}),Ft})();const se="cdk-overlay-connected-position-bounding-box",at=/([A-Za-z%]+)$/;class Be{constructor(ke,We,_t,Ue,Ye){this._viewportRuler=We,this._document=_t,this._platform=Ue,this._overlayContainer=Ye,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new E.x,this._resizeSubscription=I.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(ke)}get positions(){return this._preferredPositions}attach(ke){this._validatePositions(),ke.hostElement.classList.add(se),this._overlayRef=ke,this._boundingBox=ke.hostElement,this._pane=ke.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const ke=this._originRect,We=this._overlayRect,_t=this._viewportRect,Ue=[];let Ye;for(let et of this._preferredPositions){let Ie=this._getOriginPoint(ke,et),Xe=this._getOverlayPoint(Ie,We,et),Bt=this._getOverlayFit(Xe,We,_t,et);if(Bt.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(et,Ie);this._canFitWithFlexibleDimensions(Bt,Xe,_t)?Ue.push({position:et,origin:Ie,overlayRect:We,boundingBoxRect:this._calculateBoundingBoxRect(Ie,et)}):(!Ye||Ye.overlayFit.visibleArea<Bt.visibleArea)&&(Ye={overlayFit:Bt,overlayPoint:Xe,originPoint:Ie,position:et,overlayRect:We})}if(Ue.length){let et=null,Ie=-1;for(const Xe of Ue){const Bt=Xe.boundingBoxRect.width*Xe.boundingBoxRect.height*(Xe.position.weight||1);Bt>Ie&&(Ie=Bt,et=Xe)}return this._isPushed=!1,void this._applyPosition(et.position,et.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Ye.position,Ye.originPoint);this._applyPosition(Ye.position,Ye.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ze(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(se),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const ke=this._lastPosition||this._preferredPositions[0],We=this._getOriginPoint(this._originRect,ke);this._applyPosition(ke,We)}}withScrollableContainers(ke){return this._scrollables=ke,this}withPositions(ke){return this._preferredPositions=ke,-1===ke.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(ke){return this._viewportMargin=ke,this}withFlexibleDimensions(ke=!0){return this._hasFlexibleDimensions=ke,this}withGrowAfterOpen(ke=!0){return this._growAfterOpen=ke,this}withPush(ke=!0){return this._canPush=ke,this}withLockedPosition(ke=!0){return this._positionLocked=ke,this}setOrigin(ke){return this._origin=ke,this}withDefaultOffsetX(ke){return this._offsetX=ke,this}withDefaultOffsetY(ke){return this._offsetY=ke,this}withTransformOriginOn(ke){return this._transformOriginSelector=ke,this}_getOriginPoint(ke,We){let _t,Ue;if("center"==We.originX)_t=ke.left+ke.width/2;else{const Ye=this._isRtl()?ke.right:ke.left,et=this._isRtl()?ke.left:ke.right;_t="start"==We.originX?Ye:et}return Ue="center"==We.originY?ke.top+ke.height/2:"top"==We.originY?ke.top:ke.bottom,{x:_t,y:Ue}}_getOverlayPoint(ke,We,_t){let Ue,Ye;return Ue="center"==_t.overlayX?-We.width/2:"start"===_t.overlayX?this._isRtl()?-We.width:0:this._isRtl()?0:-We.width,Ye="center"==_t.overlayY?-We.height/2:"top"==_t.overlayY?0:-We.height,{x:ke.x+Ue,y:ke.y+Ye}}_getOverlayFit(ke,We,_t,Ue){const Ye=wt(We);let{x:et,y:Ie}=ke,Xe=this._getOffset(Ue,"x"),Bt=this._getOffset(Ue,"y");Xe&&(et+=Xe),Bt&&(Ie+=Bt);let si=0-Ie,ni=Ie+Ye.height-_t.height,sn=this._subtractOverflows(Ye.width,0-et,et+Ye.width-_t.width),xi=this._subtractOverflows(Ye.height,si,ni),Ln=sn*xi;return{visibleArea:Ln,isCompletelyWithinViewport:Ye.width*Ye.height===Ln,fitsInViewportVertically:xi===Ye.height,fitsInViewportHorizontally:sn==Ye.width}}_canFitWithFlexibleDimensions(ke,We,_t){if(this._hasFlexibleDimensions){const Ue=_t.bottom-We.y,Ye=_t.right-We.x,et=St(this._overlayRef.getConfig().minHeight),Ie=St(this._overlayRef.getConfig().minWidth),Bt=ke.fitsInViewportHorizontally||null!=Ie&&Ie<=Ye;return(ke.fitsInViewportVertically||null!=et&&et<=Ue)&&Bt}return!1}_pushOverlayOnScreen(ke,We,_t){if(this._previousPushAmount&&this._positionLocked)return{x:ke.x+this._previousPushAmount.x,y:ke.y+this._previousPushAmount.y};const Ue=wt(We),Ye=this._viewportRect,et=Math.max(ke.x+Ue.width-Ye.width,0),Ie=Math.max(ke.y+Ue.height-Ye.height,0),Xe=Math.max(Ye.top-_t.top-ke.y,0),Bt=Math.max(Ye.left-_t.left-ke.x,0);let Vt=0,bi=0;return Vt=Ue.width<=Ye.width?Bt||-et:ke.x<this._viewportMargin?Ye.left-_t.left-ke.x:0,bi=Ue.height<=Ye.height?Xe||-Ie:ke.y<this._viewportMargin?Ye.top-_t.top-ke.y:0,this._previousPushAmount={x:Vt,y:bi},{x:ke.x+Vt,y:ke.y+bi}}_applyPosition(ke,We){if(this._setTransformOrigin(ke),this._setOverlayElementStyles(We,ke),this._setBoundingBoxStyles(We,ke),ke.panelClass&&this._addPanelClasses(ke.panelClass),this._lastPosition=ke,this._positionChanges.observers.length){const _t=this._getScrollVisibility(),Ue=new dt(ke,_t);this._positionChanges.next(Ue)}this._isInitialRender=!1}_setTransformOrigin(ke){if(!this._transformOriginSelector)return;const We=this._boundingBox.querySelectorAll(this._transformOriginSelector);let _t,Ue=ke.overlayY;_t="center"===ke.overlayX?"center":this._isRtl()?"start"===ke.overlayX?"right":"left":"start"===ke.overlayX?"left":"right";for(let Ye=0;Ye<We.length;Ye++)We[Ye].style.transformOrigin=`${_t} ${Ue}`}_calculateBoundingBoxRect(ke,We){const _t=this._viewportRect,Ue=this._isRtl();let Ye,et,Ie,Vt,bi,si;if("top"===We.overlayY)et=ke.y,Ye=_t.height-et+this._viewportMargin;else if("bottom"===We.overlayY)Ie=_t.height-ke.y+2*this._viewportMargin,Ye=_t.height-Ie+this._viewportMargin;else{const ni=Math.min(_t.bottom-ke.y+_t.top,ke.y),sn=this._lastBoundingBoxSize.height;Ye=2*ni,et=ke.y-ni,Ye>sn&&!this._isInitialRender&&!this._growAfterOpen&&(et=ke.y-sn/2)}if("end"===We.overlayX&&!Ue||"start"===We.overlayX&&Ue)si=_t.width-ke.x+this._viewportMargin,Vt=ke.x-this._viewportMargin;else if("start"===We.overlayX&&!Ue||"end"===We.overlayX&&Ue)bi=ke.x,Vt=_t.right-ke.x;else{const ni=Math.min(_t.right-ke.x+_t.left,ke.x),sn=this._lastBoundingBoxSize.width;Vt=2*ni,bi=ke.x-ni,Vt>sn&&!this._isInitialRender&&!this._growAfterOpen&&(bi=ke.x-sn/2)}return{top:et,left:bi,bottom:Ie,right:si,width:Vt,height:Ye}}_setBoundingBoxStyles(ke,We){const _t=this._calculateBoundingBoxRect(ke,We);!this._isInitialRender&&!this._growAfterOpen&&(_t.height=Math.min(_t.height,this._lastBoundingBoxSize.height),_t.width=Math.min(_t.width,this._lastBoundingBoxSize.width));const Ue={};if(this._hasExactPosition())Ue.top=Ue.left="0",Ue.bottom=Ue.right=Ue.maxHeight=Ue.maxWidth="",Ue.width=Ue.height="100%";else{const Ye=this._overlayRef.getConfig().maxHeight,et=this._overlayRef.getConfig().maxWidth;Ue.height=(0,e.HM)(_t.height),Ue.top=(0,e.HM)(_t.top),Ue.bottom=(0,e.HM)(_t.bottom),Ue.width=(0,e.HM)(_t.width),Ue.left=(0,e.HM)(_t.left),Ue.right=(0,e.HM)(_t.right),Ue.alignItems="center"===We.overlayX?"center":"end"===We.overlayX?"flex-end":"flex-start",Ue.justifyContent="center"===We.overlayY?"center":"bottom"===We.overlayY?"flex-end":"flex-start",Ye&&(Ue.maxHeight=(0,e.HM)(Ye)),et&&(Ue.maxWidth=(0,e.HM)(et))}this._lastBoundingBoxSize=_t,ze(this._boundingBox.style,Ue)}_resetBoundingBoxStyles(){ze(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ze(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(ke,We){const _t={},Ue=this._hasExactPosition(),Ye=this._hasFlexibleDimensions,et=this._overlayRef.getConfig();if(Ue){const Vt=this._viewportRuler.getViewportScrollPosition();ze(_t,this._getExactOverlayY(We,ke,Vt)),ze(_t,this._getExactOverlayX(We,ke,Vt))}else _t.position="static";let Ie="",Xe=this._getOffset(We,"x"),Bt=this._getOffset(We,"y");Xe&&(Ie+=`translateX(${Xe}px) `),Bt&&(Ie+=`translateY(${Bt}px)`),_t.transform=Ie.trim(),et.maxHeight&&(Ue?_t.maxHeight=(0,e.HM)(et.maxHeight):Ye&&(_t.maxHeight="")),et.maxWidth&&(Ue?_t.maxWidth=(0,e.HM)(et.maxWidth):Ye&&(_t.maxWidth="")),ze(this._pane.style,_t)}_getExactOverlayY(ke,We,_t){let Ue={top:"",bottom:""},Ye=this._getOverlayPoint(We,this._overlayRect,ke);this._isPushed&&(Ye=this._pushOverlayOnScreen(Ye,this._overlayRect,_t));let et=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return Ye.y-=et,"bottom"===ke.overlayY?Ue.bottom=this._document.documentElement.clientHeight-(Ye.y+this._overlayRect.height)+"px":Ue.top=(0,e.HM)(Ye.y),Ue}_getExactOverlayX(ke,We,_t){let et,Ue={left:"",right:""},Ye=this._getOverlayPoint(We,this._overlayRect,ke);return this._isPushed&&(Ye=this._pushOverlayOnScreen(Ye,this._overlayRect,_t)),et=this._isRtl()?"end"===ke.overlayX?"left":"right":"end"===ke.overlayX?"right":"left","right"===et?Ue.right=this._document.documentElement.clientWidth-(Ye.x+this._overlayRect.width)+"px":Ue.left=(0,e.HM)(Ye.x),Ue}_getScrollVisibility(){const ke=this._getOriginRect(),We=this._pane.getBoundingClientRect(),_t=this._scrollables.map(Ue=>Ue.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Rt(ke,_t),isOriginOutsideView:lt(ke,_t),isOverlayClipped:Rt(We,_t),isOverlayOutsideView:lt(We,_t)}}_subtractOverflows(ke,...We){return We.reduce((_t,Ue)=>_t-Math.max(Ue,0),ke)}_getNarrowedViewportRect(){const ke=this._document.documentElement.clientWidth,We=this._document.documentElement.clientHeight,_t=this._viewportRuler.getViewportScrollPosition();return{top:_t.top+this._viewportMargin,left:_t.left+this._viewportMargin,right:_t.left+ke-this._viewportMargin,bottom:_t.top+We-this._viewportMargin,width:ke-2*this._viewportMargin,height:We-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(ke,We){return"x"===We?null==ke.offsetX?this._offsetX:ke.offsetX:null==ke.offsetY?this._offsetY:ke.offsetY}_validatePositions(){}_addPanelClasses(ke){this._pane&&(0,e.Eq)(ke).forEach(We=>{""!==We&&-1===this._appliedPanelClasses.indexOf(We)&&(this._appliedPanelClasses.push(We),this._pane.classList.add(We))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(ke=>{this._pane.classList.remove(ke)}),this._appliedPanelClasses=[])}_getOriginRect(){const ke=this._origin;if(ke instanceof t.SBq)return ke.nativeElement.getBoundingClientRect();if(ke instanceof Element)return ke.getBoundingClientRect();const We=ke.width||0,_t=ke.height||0;return{top:ke.y,bottom:ke.y+_t,left:ke.x,right:ke.x+We,height:_t,width:We}}}function ze(Ft,ke){for(let We in ke)ke.hasOwnProperty(We)&&(Ft[We]=ke[We]);return Ft}function St(Ft){if("number"!=typeof Ft&&null!=Ft){const[ke,We]=Ft.split(at);return We&&"px"!==We?null:parseFloat(ke)}return Ft||null}function wt(Ft){return{top:Math.floor(Ft.top),right:Math.floor(Ft.right),bottom:Math.floor(Ft.bottom),left:Math.floor(Ft.left),width:Math.floor(Ft.width),height:Math.floor(Ft.height)}}const At="cdk-global-overlay-wrapper";class $t{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(ke){const We=ke.getConfig();this._overlayRef=ke,this._width&&!We.width&&ke.updateSize({width:this._width}),this._height&&!We.height&&ke.updateSize({height:this._height}),ke.hostElement.classList.add(At),this._isDisposed=!1}top(ke=""){return this._bottomOffset="",this._topOffset=ke,this._alignItems="flex-start",this}left(ke=""){return this._rightOffset="",this._leftOffset=ke,this._justifyContent="flex-start",this}bottom(ke=""){return this._topOffset="",this._bottomOffset=ke,this._alignItems="flex-end",this}right(ke=""){return this._leftOffset="",this._rightOffset=ke,this._justifyContent="flex-end",this}width(ke=""){return this._overlayRef?this._overlayRef.updateSize({width:ke}):this._width=ke,this}height(ke=""){return this._overlayRef?this._overlayRef.updateSize({height:ke}):this._height=ke,this}centerHorizontally(ke=""){return this.left(ke),this._justifyContent="center",this}centerVertically(ke=""){return this.top(ke),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const ke=this._overlayRef.overlayElement.style,We=this._overlayRef.hostElement.style,_t=this._overlayRef.getConfig(),{width:Ue,height:Ye,maxWidth:et,maxHeight:Ie}=_t,Xe=!("100%"!==Ue&&"100vw"!==Ue||et&&"100%"!==et&&"100vw"!==et),Bt=!("100%"!==Ye&&"100vh"!==Ye||Ie&&"100%"!==Ie&&"100vh"!==Ie);ke.position=this._cssPosition,ke.marginLeft=Xe?"0":this._leftOffset,ke.marginTop=Bt?"0":this._topOffset,ke.marginBottom=this._bottomOffset,ke.marginRight=this._rightOffset,Xe?We.justifyContent="flex-start":"center"===this._justifyContent?We.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?We.justifyContent="flex-end":"flex-end"===this._justifyContent&&(We.justifyContent="flex-start"):We.justifyContent=this._justifyContent,We.alignItems=Bt?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const ke=this._overlayRef.overlayElement.style,We=this._overlayRef.hostElement,_t=We.style;We.classList.remove(At),_t.justifyContent=_t.alignItems=ke.marginTop=ke.marginBottom=ke.marginLeft=ke.marginRight=ke.position="",this._overlayRef=null,this._isDisposed=!0}}let Xt=(()=>{class Ft{constructor(We,_t,Ue,Ye){this._viewportRuler=We,this._document=_t,this._platform=Ue,this._overlayContainer=Ye}global(){return new $t}flexibleConnectedTo(We){return new Be(We,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Ft.\u0275fac=function(We){return new(We||Ft)(t.LFG(O.rL),t.LFG(y.K0),t.LFG(n.t4),t.LFG(ge))},Ft.\u0275prov=t.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"root"}),Ft})(),ti=(()=>{class Ft{constructor(We){this._attachedOverlays=[],this._document=We}ngOnDestroy(){this.detach()}add(We){this.remove(We),this._attachedOverlays.push(We)}remove(We){const _t=this._attachedOverlays.indexOf(We);_t>-1&&this._attachedOverlays.splice(_t,1),0===this._attachedOverlays.length&&this.detach()}}return Ft.\u0275fac=function(We){return new(We||Ft)(t.LFG(y.K0))},Ft.\u0275prov=t.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"root"}),Ft})(),Wi=(()=>{class Ft extends ti{constructor(We){super(We),this._keydownListener=_t=>{const Ue=this._attachedOverlays;for(let Ye=Ue.length-1;Ye>-1;Ye--)if(Ue[Ye]._keydownEvents.observers.length>0){Ue[Ye]._keydownEvents.next(_t);break}}}add(We){super.add(We),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Ft.\u0275fac=function(We){return new(We||Ft)(t.LFG(y.K0))},Ft.\u0275prov=t.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"root"}),Ft})(),pi=(()=>{class Ft extends ti{constructor(We,_t){super(We),this._platform=_t,this._cursorStyleIsSet=!1,this._pointerDownListener=Ue=>{this._pointerDownEventTarget=(0,n.sA)(Ue)},this._clickListener=Ue=>{const Ye=(0,n.sA)(Ue),et="click"===Ue.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Ye;this._pointerDownEventTarget=null;const Ie=this._attachedOverlays.slice();for(let Xe=Ie.length-1;Xe>-1;Xe--){const Bt=Ie[Xe];if(!(Bt._outsidePointerEvents.observers.length<1)&&Bt.hasAttached()){if(Bt.overlayElement.contains(Ye)||Bt.overlayElement.contains(et))break;Bt._outsidePointerEvents.next(Ue)}}}}add(We){if(super.add(We),!this._isAttached){const _t=this._document.body;_t.addEventListener("pointerdown",this._pointerDownListener,!0),_t.addEventListener("click",this._clickListener,!0),_t.addEventListener("auxclick",this._clickListener,!0),_t.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=_t.style.cursor,_t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const We=this._document.body;We.removeEventListener("pointerdown",this._pointerDownListener,!0),We.removeEventListener("click",this._clickListener,!0),We.removeEventListener("auxclick",this._clickListener,!0),We.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(We.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return Ft.\u0275fac=function(We){return new(We||Ft)(t.LFG(y.K0),t.LFG(n.t4))},Ft.\u0275prov=t.Yz7({token:Ft,factory:Ft.\u0275fac,providedIn:"root"}),Ft})(),Lt=0,yi=(()=>{class Ft{constructor(We,_t,Ue,Ye,et,Ie,Xe,Bt,Vt,bi,si){this.scrollStrategies=We,this._overlayContainer=_t,this._componentFactoryResolver=Ue,this._positionBuilder=Ye,this._keyboardDispatcher=et,this._injector=Ie,this._ngZone=Xe,this._document=Bt,this._directionality=Vt,this._location=bi,this._outsideClickDispatcher=si}create(We){const _t=this._createHostElement(),Ue=this._createPaneElement(_t),Ye=this._createPortalOutlet(Ue),et=new Oe(We);return et.direction=et.direction||this._directionality.value,new Re(Ye,_t,Ue,et,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(We){const _t=this._document.createElement("div");return _t.id="cdk-overlay-"+Lt++,_t.classList.add("cdk-overlay-pane"),We.appendChild(_t),_t}_createHostElement(){const We=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(We),We}_createPortalOutlet(We){return this._appRef||(this._appRef=this._injector.get(t.z2F)),new f.u0(We,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Ft.\u0275fac=function(We){return new(We||Ft)(t.LFG(tt),t.LFG(ge),t.LFG(t._Vd),t.LFG(Xt),t.LFG(Wi),t.LFG(t.zs3),t.LFG(t.R0b),t.LFG(y.K0),t.LFG(a.Is),t.LFG(y.Ye),t.LFG(pi))},Ft.\u0275prov=t.Yz7({token:Ft,factory:Ft.\u0275fac}),Ft})();const Te={provide:new t.OlP("cdk-connected-overlay-scroll-strategy"),deps:[yi],useFactory:function(Ft){return()=>Ft.scrollStrategies.reposition()}};let xt=(()=>{class Ft{}return Ft.\u0275fac=function(We){return new(We||Ft)},Ft.\u0275mod=t.oAB({type:Ft}),Ft.\u0275inj=t.cJS({providers:[yi,Te],imports:[[a.vT,f.eL,O.Cl],O.Cl]}),Ft})()},925:(li,ht,W)=>{"use strict";W.d(ht,{t4:()=>e,ud:()=>n,sA:()=>Wt,ht:()=>Rt,kV:()=>lt,Oy:()=>tt,_i:()=>Je,qK:()=>E,i$:()=>ee,Mq:()=>Ae});var O=W(5e3),y=W(9808);let t;try{t="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Oe){t=!1}let a,e=(()=>{class Oe{constructor(Qe){this._platformId=Qe,this.isBrowser=this._platformId?(0,y.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!t)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Oe.\u0275fac=function(Qe){return new(Qe||Oe)(O.LFG(O.Lbi))},Oe.\u0275prov=O.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})(),n=(()=>{class Oe{}return Oe.\u0275fac=function(Qe){return new(Qe||Oe)},Oe.\u0275mod=O.oAB({type:Oe}),Oe.\u0275inj=O.cJS({}),Oe})();const f=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function E(){if(a)return a;if("object"!=typeof document||!document)return a=new Set(f),a;let Oe=document.createElement("input");return a=new Set(f.filter(Se=>(Oe.setAttribute("type",Se),Oe.type===Se))),a}let I,_e,De,st;function ee(Oe){return function(){if(null==I&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>I=!0}))}finally{I=I||!1}return I}()?Oe:!!Oe.capture}function Ae(){if(null==De){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return De=!1,De;if("scrollBehavior"in document.documentElement.style)De=!0;else{const Oe=Element.prototype.scrollTo;De=!!Oe&&!/\{\s*\[native code\]\s*\}/.test(Oe.toString())}}return De}function Je(){if("object"!=typeof document||!document)return 0;if(null==_e){const Oe=document.createElement("div"),Se=Oe.style;Oe.dir="rtl",Se.width="1px",Se.overflow="auto",Se.visibility="hidden",Se.pointerEvents="none",Se.position="absolute";const Qe=document.createElement("div"),dt=Qe.style;dt.width="2px",dt.height="1px",Oe.appendChild(Qe),document.body.appendChild(Oe),_e=0,0===Oe.scrollLeft&&(Oe.scrollLeft=1,_e=0===Oe.scrollLeft?1:2),Oe.remove()}return _e}function lt(Oe){if(function(){if(null==st){const Oe="undefined"!=typeof document?document.head:null;st=!(!Oe||!Oe.createShadowRoot&&!Oe.attachShadow)}return st}()){const Se=Oe.getRootNode?Oe.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&Se instanceof ShadowRoot)return Se}return null}function Rt(){let Oe="undefined"!=typeof document&&document?document.activeElement:null;for(;Oe&&Oe.shadowRoot;){const Se=Oe.shadowRoot.activeElement;if(Se===Oe)break;Oe=Se}return Oe}function Wt(Oe){return Oe.composedPath?Oe.composedPath()[0]:Oe.target}function tt(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},7429:(li,ht,W)=>{"use strict";W.d(ht,{en:()=>De,ig:()=>Ge,Pl:()=>Rt,C5:()=>Y,u0:()=>Je,eL:()=>tt,UE:()=>ee});var O=W(5e3),y=W(9808);class I{attach(Qe){return this._attachedHost=Qe,Qe.attach(this)}detach(){let Qe=this._attachedHost;null!=Qe&&(this._attachedHost=null,Qe.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(Qe){this._attachedHost=Qe}}class Y extends I{constructor(Qe,dt,it,Pe){super(),this.component=Qe,this.viewContainerRef=dt,this.injector=it,this.componentFactoryResolver=Pe}}class ee extends I{constructor(Qe,dt,it){super(),this.templateRef=Qe,this.viewContainerRef=dt,this.context=it}get origin(){return this.templateRef.elementRef}attach(Qe,dt=this.context){return this.context=dt,super.attach(Qe)}detach(){return this.context=void 0,super.detach()}}class _e extends I{constructor(Qe){super(),this.element=Qe instanceof O.SBq?Qe.nativeElement:Qe}}class De{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(Qe){return Qe instanceof Y?(this._attachedPortal=Qe,this.attachComponentPortal(Qe)):Qe instanceof ee?(this._attachedPortal=Qe,this.attachTemplatePortal(Qe)):this.attachDomPortal&&Qe instanceof _e?(this._attachedPortal=Qe,this.attachDomPortal(Qe)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(Qe){this._disposeFn=Qe}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Je extends De{constructor(Qe,dt,it,Pe,Re){super(),this.outletElement=Qe,this._componentFactoryResolver=dt,this._appRef=it,this._defaultInjector=Pe,this.attachDomPortal=ge=>{const se=ge.element,at=this._document.createComment("dom-portal");se.parentNode.insertBefore(at,se),this.outletElement.appendChild(se),this._attachedPortal=ge,super.setDisposeFn(()=>{at.parentNode&&at.parentNode.replaceChild(se,at)})},this._document=Re}attachComponentPortal(Qe){const it=(Qe.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Qe.component);let Pe;return Qe.viewContainerRef?(Pe=Qe.viewContainerRef.createComponent(it,Qe.viewContainerRef.length,Qe.injector||Qe.viewContainerRef.injector),this.setDisposeFn(()=>Pe.destroy())):(Pe=it.create(Qe.injector||this._defaultInjector),this._appRef.attachView(Pe.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Pe.hostView),Pe.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Pe)),this._attachedPortal=Qe,Pe}attachTemplatePortal(Qe){let dt=Qe.viewContainerRef,it=dt.createEmbeddedView(Qe.templateRef,Qe.context);return it.rootNodes.forEach(Pe=>this.outletElement.appendChild(Pe)),it.detectChanges(),this.setDisposeFn(()=>{let Pe=dt.indexOf(it);-1!==Pe&&dt.remove(Pe)}),this._attachedPortal=Qe,it}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(Qe){return Qe.hostView.rootNodes[0]}}let Ge=(()=>{class Se extends ee{constructor(dt,it){super(dt,it)}}return Se.\u0275fac=function(dt){return new(dt||Se)(O.Y36(O.Rgc),O.Y36(O.s_b))},Se.\u0275dir=O.lG2({type:Se,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[O.qOj]}),Se})(),Rt=(()=>{class Se extends De{constructor(dt,it,Pe){super(),this._componentFactoryResolver=dt,this._viewContainerRef=it,this._isInitialized=!1,this.attached=new O.vpe,this.attachDomPortal=Re=>{const ge=Re.element,se=this._document.createComment("dom-portal");Re.setAttachedHost(this),ge.parentNode.insertBefore(se,ge),this._getRootNode().appendChild(ge),this._attachedPortal=Re,super.setDisposeFn(()=>{se.parentNode&&se.parentNode.replaceChild(ge,se)})},this._document=Pe}get portal(){return this._attachedPortal}set portal(dt){this.hasAttached()&&!dt&&!this._isInitialized||(this.hasAttached()&&super.detach(),dt&&super.attach(dt),this._attachedPortal=dt||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(dt){dt.setAttachedHost(this);const it=null!=dt.viewContainerRef?dt.viewContainerRef:this._viewContainerRef,Re=(dt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(dt.component),ge=it.createComponent(Re,it.length,dt.injector||it.injector);return it!==this._viewContainerRef&&this._getRootNode().appendChild(ge.hostView.rootNodes[0]),super.setDisposeFn(()=>ge.destroy()),this._attachedPortal=dt,this._attachedRef=ge,this.attached.emit(ge),ge}attachTemplatePortal(dt){dt.setAttachedHost(this);const it=this._viewContainerRef.createEmbeddedView(dt.templateRef,dt.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=dt,this._attachedRef=it,this.attached.emit(it),it}_getRootNode(){const dt=this._viewContainerRef.element.nativeElement;return dt.nodeType===dt.ELEMENT_NODE?dt:dt.parentNode}}return Se.\u0275fac=function(dt){return new(dt||Se)(O.Y36(O._Vd),O.Y36(O.s_b),O.Y36(y.K0))},Se.\u0275dir=O.lG2({type:Se,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[O.qOj]}),Se})(),tt=(()=>{class Se{}return Se.\u0275fac=function(dt){return new(dt||Se)},Se.\u0275mod=O.oAB({type:Se}),Se.\u0275inj=O.cJS({}),Se})()},495:(li,ht,W)=>{"use strict";W.d(ht,{PQ:()=>At,ZD:()=>Ce,mF:()=>wt,Cl:()=>vt,rL:()=>Xt});var O=W(3191),y=W(5e3),t=W(4408),e=W(727);const n={schedule(Ne){let Ve=requestAnimationFrame,de=cancelAnimationFrame;const{delegate:Te}=n;Te&&(Ve=Te.requestAnimationFrame,de=Te.cancelAnimationFrame);const xt=Ve(Kt=>{de=void 0,Ne(Kt)});return new e.w0(()=>null==de?void 0:de(xt))},requestAnimationFrame(...Ne){const{delegate:Ve}=n;return((null==Ve?void 0:Ve.requestAnimationFrame)||requestAnimationFrame)(...Ne)},cancelAnimationFrame(...Ne){const{delegate:Ve}=n;return((null==Ve?void 0:Ve.cancelAnimationFrame)||cancelAnimationFrame)(...Ne)},delegate:void 0};var f=W(7565);new class extends f.v{flush(Ve){this._active=!0,this._scheduled=void 0;const{actions:de}=this;let Te,xt=-1;Ve=Ve||de.shift();const Kt=de.length;do{if(Te=Ve.execute(Ve.state,Ve.delay))break}while(++xt<Kt&&(Ve=de.shift()));if(this._active=!1,Te){for(;++xt<Kt&&(Ve=de.shift());)Ve.unsubscribe();throw Te}}}(class extends t.o{constructor(Ve,de){super(Ve,de),this.scheduler=Ve,this.work=de}requestAsyncId(Ve,de,Te=0){return null!==Te&&Te>0?super.requestAsyncId(Ve,de,Te):(Ve.actions.push(this),Ve._scheduled||(Ve._scheduled=n.requestAnimationFrame(()=>Ve.flush(void 0))))}recycleAsyncId(Ve,de,Te=0){if(null!=Te&&Te>0||null==Te&&this.delay>0)return super.recycleAsyncId(Ve,de,Te);0===Ve.actions.length&&(n.cancelAnimationFrame(de),Ve._scheduled=void 0)}});var ee=W(7579),_e=W(9646),De=W(8306),Ae=W(4968),st=(W(3101),W(4986)),Ge=W(4482),lt=W(8421),Rt=W(5403),tt=W(5963);function Oe(Ne,Ve=st.P){return function(Ne){return(0,Ge.e)((Ve,de)=>{let Te=!1,xt=null,Kt=null,Ft=!1;const ke=()=>{if(null==Kt||Kt.unsubscribe(),Kt=null,Te){Te=!1;const _t=xt;xt=null,de.next(_t)}Ft&&de.complete()},We=()=>{Kt=null,Ft&&de.complete()};Ve.subscribe(new Rt.Q(de,_t=>{Te=!0,xt=_t,Kt||(0,lt.Xf)(Ne()).subscribe(Kt=new Rt.Q(de,ke,We))},()=>{Ft=!0,(!Te||!Kt||Kt.closed)&&de.complete()}))})}(()=>(0,tt.H)(Ne,Ve))}var Se=W(9300),Qe=W(2722),dt=W(9808),it=W(925),Pe=W(226);let wt=(()=>{class Ne{constructor(de,Te,xt){this._ngZone=de,this._platform=Te,this._scrolled=new ee.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=xt}register(de){this.scrollContainers.has(de)||this.scrollContainers.set(de,de.elementScrolled().subscribe(()=>this._scrolled.next(de)))}deregister(de){const Te=this.scrollContainers.get(de);Te&&(Te.unsubscribe(),this.scrollContainers.delete(de))}scrolled(de=20){return this._platform.isBrowser?new De.y(Te=>{this._globalSubscription||this._addGlobalListener();const xt=de>0?this._scrolled.pipe(Oe(de)).subscribe(Te):this._scrolled.subscribe(Te);return this._scrolledCount++,()=>{xt.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,_e.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((de,Te)=>this.deregister(Te)),this._scrolled.complete()}ancestorScrolled(de,Te){const xt=this.getAncestorScrollContainers(de);return this.scrolled(Te).pipe((0,Se.h)(Kt=>!Kt||xt.indexOf(Kt)>-1))}getAncestorScrollContainers(de){const Te=[];return this.scrollContainers.forEach((xt,Kt)=>{this._scrollableContainsElement(Kt,de)&&Te.push(Kt)}),Te}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(de,Te){let xt=(0,O.fI)(Te),Kt=de.getElementRef().nativeElement;do{if(xt==Kt)return!0}while(xt=xt.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const de=this._getWindow();return(0,Ae.R)(de.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Ne.\u0275fac=function(de){return new(de||Ne)(y.LFG(y.R0b),y.LFG(it.t4),y.LFG(dt.K0,8))},Ne.\u0275prov=y.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})(),At=(()=>{class Ne{constructor(de,Te,xt,Kt){this.elementRef=de,this.scrollDispatcher=Te,this.ngZone=xt,this.dir=Kt,this._destroyed=new ee.x,this._elementScrolled=new De.y(Ft=>this.ngZone.runOutsideAngular(()=>(0,Ae.R)(this.elementRef.nativeElement,"scroll").pipe((0,Qe.R)(this._destroyed)).subscribe(Ft)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(de){const Te=this.elementRef.nativeElement,xt=this.dir&&"rtl"==this.dir.value;null==de.left&&(de.left=xt?de.end:de.start),null==de.right&&(de.right=xt?de.start:de.end),null!=de.bottom&&(de.top=Te.scrollHeight-Te.clientHeight-de.bottom),xt&&0!=(0,it._i)()?(null!=de.left&&(de.right=Te.scrollWidth-Te.clientWidth-de.left),2==(0,it._i)()?de.left=de.right:1==(0,it._i)()&&(de.left=de.right?-de.right:de.right)):null!=de.right&&(de.left=Te.scrollWidth-Te.clientWidth-de.right),this._applyScrollToOptions(de)}_applyScrollToOptions(de){const Te=this.elementRef.nativeElement;(0,it.Mq)()?Te.scrollTo(de):(null!=de.top&&(Te.scrollTop=de.top),null!=de.left&&(Te.scrollLeft=de.left))}measureScrollOffset(de){const Te="left",Kt=this.elementRef.nativeElement;if("top"==de)return Kt.scrollTop;if("bottom"==de)return Kt.scrollHeight-Kt.clientHeight-Kt.scrollTop;const Ft=this.dir&&"rtl"==this.dir.value;return"start"==de?de=Ft?"right":Te:"end"==de&&(de=Ft?Te:"right"),Ft&&2==(0,it._i)()?de==Te?Kt.scrollWidth-Kt.clientWidth-Kt.scrollLeft:Kt.scrollLeft:Ft&&1==(0,it._i)()?de==Te?Kt.scrollLeft+Kt.scrollWidth-Kt.clientWidth:-Kt.scrollLeft:de==Te?Kt.scrollLeft:Kt.scrollWidth-Kt.clientWidth-Kt.scrollLeft}}return Ne.\u0275fac=function(de){return new(de||Ne)(y.Y36(y.SBq),y.Y36(wt),y.Y36(y.R0b),y.Y36(Pe.Is,8))},Ne.\u0275dir=y.lG2({type:Ne,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),Ne})(),Xt=(()=>{class Ne{constructor(de,Te,xt){this._platform=de,this._change=new ee.x,this._changeListener=Kt=>{this._change.next(Kt)},this._document=xt,Te.runOutsideAngular(()=>{if(de.isBrowser){const Kt=this._getWindow();Kt.addEventListener("resize",this._changeListener),Kt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const de=this._getWindow();de.removeEventListener("resize",this._changeListener),de.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const de={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),de}getViewportRect(){const de=this.getViewportScrollPosition(),{width:Te,height:xt}=this.getViewportSize();return{top:de.top,left:de.left,bottom:de.top+xt,right:de.left+Te,height:xt,width:Te}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const de=this._document,Te=this._getWindow(),xt=de.documentElement,Kt=xt.getBoundingClientRect();return{top:-Kt.top||de.body.scrollTop||Te.scrollY||xt.scrollTop||0,left:-Kt.left||de.body.scrollLeft||Te.scrollX||xt.scrollLeft||0}}change(de=20){return de>0?this._change.pipe(Oe(de)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const de=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:de.innerWidth,height:de.innerHeight}:{width:0,height:0}}}return Ne.\u0275fac=function(de){return new(de||Ne)(y.LFG(it.t4),y.LFG(y.R0b),y.LFG(dt.K0,8))},Ne.\u0275prov=y.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})(),Ce=(()=>{class Ne{}return Ne.\u0275fac=function(de){return new(de||Ne)},Ne.\u0275mod=y.oAB({type:Ne}),Ne.\u0275inj=y.cJS({}),Ne})(),vt=(()=>{class Ne{}return Ne.\u0275fac=function(de){return new(de||Ne)},Ne.\u0275mod=y.oAB({type:Ne}),Ne.\u0275inj=y.cJS({imports:[[Pe.vT,it.ud,Ce],Pe.vT,Ce]}),Ne})()},9808:(li,ht,W)=>{"use strict";W.d(ht,{mr:()=>Rt,Ov:()=>Xr,ez:()=>Zr,K0:()=>f,Do:()=>tt,V_:()=>Y,Ye:()=>Oe,S$:()=>Ge,mk:()=>Le,sg:()=>Di,O5:()=>En,PC:()=>Rs,RF:()=>Eo,n9:()=>Bs,b0:()=>Wt,lw:()=>E,EM:()=>uo,JF:()=>pa,NF:()=>lr,w_:()=>a,bD:()=>qr,q:()=>t,Mx:()=>yn,HT:()=>n});var O=W(5e3);let y=null;function t(){return y}function n(ce){y||(y=ce)}class a{}const f=new O.OlP("DocumentToken");let E=(()=>{class ce{historyGo(P){throw new Error("Not implemented")}}return ce.\u0275fac=function(P){return new(P||ce)},ce.\u0275prov=O.Yz7({token:ce,factory:function(){return(0,O.LFG)(ee)},providedIn:"platform"}),ce})();const Y=new O.OlP("Location Initialized");let ee=(()=>{class ce extends E{constructor(P){super(),this._doc=P,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return t().getBaseHref(this._doc)}onPopState(P){const F=t().getGlobalEventTarget(this._doc,"window");return F.addEventListener("popstate",P,!1),()=>F.removeEventListener("popstate",P)}onHashChange(P){const F=t().getGlobalEventTarget(this._doc,"window");return F.addEventListener("hashchange",P,!1),()=>F.removeEventListener("hashchange",P)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(P){this.location.pathname=P}pushState(P,F,le){_e()?this._history.pushState(P,F,le):this.location.hash=le}replaceState(P,F,le){_e()?this._history.replaceState(P,F,le):this.location.hash=le}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}}return ce.\u0275fac=function(P){return new(P||ce)(O.LFG(f))},ce.\u0275prov=O.Yz7({token:ce,factory:function(){return new ee((0,O.LFG)(f))},providedIn:"platform"}),ce})();function _e(){return!!window.history.pushState}function Ae(ce,z){if(0==ce.length)return z;if(0==z.length)return ce;let P=0;return ce.endsWith("/")&&P++,z.startsWith("/")&&P++,2==P?ce+z.substring(1):1==P?ce+z:ce+"/"+z}function Je(ce){const z=ce.match(/#|\?|$/),P=z&&z.index||ce.length;return ce.slice(0,P-("/"===ce[P-1]?1:0))+ce.slice(P)}function st(ce){return ce&&"?"!==ce[0]?"?"+ce:ce}let Ge=(()=>{class ce{historyGo(P){throw new Error("Not implemented")}}return ce.\u0275fac=function(P){return new(P||ce)},ce.\u0275prov=O.Yz7({token:ce,factory:function(){return function(ce){const z=(0,O.LFG)(f).location;return new Wt((0,O.LFG)(E),z&&z.origin||"")}()},providedIn:"root"}),ce})();const Rt=new O.OlP("appBaseHref");let Wt=(()=>{class ce extends Ge{constructor(P,F){if(super(),this._platformLocation=P,this._removeListenerFns=[],null==F&&(F=this._platformLocation.getBaseHrefFromDOM()),null==F)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=F}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return Ae(this._baseHref,P)}path(P=!1){const F=this._platformLocation.pathname+st(this._platformLocation.search),le=this._platformLocation.hash;return le&&P?`${F}${le}`:F}pushState(P,F,le,Tt){const Jt=this.prepareExternalUrl(le+st(Tt));this._platformLocation.pushState(P,F,Jt)}replaceState(P,F,le,Tt){const Jt=this.prepareExternalUrl(le+st(Tt));this._platformLocation.replaceState(P,F,Jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(P=0){var F,le;null===(le=(F=this._platformLocation).historyGo)||void 0===le||le.call(F,P)}}return ce.\u0275fac=function(P){return new(P||ce)(O.LFG(E),O.LFG(Rt,8))},ce.\u0275prov=O.Yz7({token:ce,factory:ce.\u0275fac}),ce})(),tt=(()=>{class ce extends Ge{constructor(P,F){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=F&&(this._baseHref=F)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let F=this._platformLocation.hash;return null==F&&(F="#"),F.length>0?F.substring(1):F}prepareExternalUrl(P){const F=Ae(this._baseHref,P);return F.length>0?"#"+F:F}pushState(P,F,le,Tt){let Jt=this.prepareExternalUrl(le+st(Tt));0==Jt.length&&(Jt=this._platformLocation.pathname),this._platformLocation.pushState(P,F,Jt)}replaceState(P,F,le,Tt){let Jt=this.prepareExternalUrl(le+st(Tt));0==Jt.length&&(Jt=this._platformLocation.pathname),this._platformLocation.replaceState(P,F,Jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(P=0){var F,le;null===(le=(F=this._platformLocation).historyGo)||void 0===le||le.call(F,P)}}return ce.\u0275fac=function(P){return new(P||ce)(O.LFG(E),O.LFG(Rt,8))},ce.\u0275prov=O.Yz7({token:ce,factory:ce.\u0275fac}),ce})(),Oe=(()=>{class ce{constructor(P,F){this._subject=new O.vpe,this._urlChangeListeners=[],this._platformStrategy=P;const le=this._platformStrategy.getBaseHref();this._platformLocation=F,this._baseHref=Je(dt(le)),this._platformStrategy.onPopState(Tt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Tt.state,type:Tt.type})})}path(P=!1){return this.normalize(this._platformStrategy.path(P))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(P,F=""){return this.path()==this.normalize(P+st(F))}normalize(P){return ce.stripTrailingSlash(function(ce,z){return ce&&z.startsWith(ce)?z.substring(ce.length):z}(this._baseHref,dt(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._platformStrategy.prepareExternalUrl(P)}go(P,F="",le=null){this._platformStrategy.pushState(le,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+st(F)),le)}replaceState(P,F="",le=null){this._platformStrategy.replaceState(le,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+st(F)),le)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(P=0){var F,le;null===(le=(F=this._platformStrategy).historyGo)||void 0===le||le.call(F,P)}onUrlChange(P){this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(F=>{this._notifyUrlChangeListeners(F.url,F.state)}))}_notifyUrlChangeListeners(P="",F){this._urlChangeListeners.forEach(le=>le(P,F))}subscribe(P,F,le){return this._subject.subscribe({next:P,error:F,complete:le})}}return ce.normalizeQueryParams=st,ce.joinWithSlash=Ae,ce.stripTrailingSlash=Je,ce.\u0275fac=function(P){return new(P||ce)(O.LFG(Ge),O.LFG(E))},ce.\u0275prov=O.Yz7({token:ce,factory:function(){return new Oe((0,O.LFG)(Ge),(0,O.LFG)(E))},providedIn:"root"}),ce})();function dt(ce){return ce.replace(/\/index.html$/,"")}var Re=(()=>((Re=Re||{})[Re.Zero=0]="Zero",Re[Re.One=1]="One",Re[Re.Two=2]="Two",Re[Re.Few=3]="Few",Re[Re.Many=4]="Many",Re[Re.Other=5]="Other",Re))();const xt=O.kL8;class Ss{}let _i=(()=>{class ce extends Ss{constructor(P){super(),this.locale=P}getPluralCategory(P,F){switch(xt(F||this.locale)(P)){case Re.Zero:return"zero";case Re.One:return"one";case Re.Two:return"two";case Re.Few:return"few";case Re.Many:return"many";default:return"other"}}}return ce.\u0275fac=function(P){return new(P||ce)(O.LFG(O.soG))},ce.\u0275prov=O.Yz7({token:ce,factory:ce.\u0275fac}),ce})();function yn(ce,z){z=encodeURIComponent(z);for(const P of ce.split(";")){const F=P.indexOf("="),[le,Tt]=-1==F?[P,""]:[P.slice(0,F),P.slice(F+1)];if(le.trim()===z)return decodeURIComponent(Tt)}return null}let Le=(()=>{class ce{constructor(P,F,le,Tt){this._iterableDiffers=P,this._keyValueDiffers=F,this._ngEl=le,this._renderer=Tt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(P){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof P?P.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(P){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof P?P.split(/\s+/):P,this._rawClass&&((0,O.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const P=this._iterableDiffer.diff(this._rawClass);P&&this._applyIterableChanges(P)}else if(this._keyValueDiffer){const P=this._keyValueDiffer.diff(this._rawClass);P&&this._applyKeyValueChanges(P)}}_applyKeyValueChanges(P){P.forEachAddedItem(F=>this._toggleClass(F.key,F.currentValue)),P.forEachChangedItem(F=>this._toggleClass(F.key,F.currentValue)),P.forEachRemovedItem(F=>{F.previousValue&&this._toggleClass(F.key,!1)})}_applyIterableChanges(P){P.forEachAddedItem(F=>{if("string"!=typeof F.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,O.AaK)(F.item)}`);this._toggleClass(F.item,!0)}),P.forEachRemovedItem(F=>this._toggleClass(F.item,!1))}_applyClasses(P){P&&(Array.isArray(P)||P instanceof Set?P.forEach(F=>this._toggleClass(F,!0)):Object.keys(P).forEach(F=>this._toggleClass(F,!!P[F])))}_removeClasses(P){P&&(Array.isArray(P)||P instanceof Set?P.forEach(F=>this._toggleClass(F,!1)):Object.keys(P).forEach(F=>this._toggleClass(F,!1)))}_toggleClass(P,F){(P=P.trim())&&P.split(/\s+/g).forEach(le=>{F?this._renderer.addClass(this._ngEl.nativeElement,le):this._renderer.removeClass(this._ngEl.nativeElement,le)})}}return ce.\u0275fac=function(P){return new(P||ce)(O.Y36(O.ZZ4),O.Y36(O.aQg),O.Y36(O.SBq),O.Y36(O.Qsj))},ce.\u0275dir=O.lG2({type:ce,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),ce})();class ri{constructor(z,P,F,le){this.$implicit=z,this.ngForOf=P,this.index=F,this.count=le}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Di=(()=>{class ce{constructor(P,F,le){this._viewContainer=P,this._template=F,this._differs=le,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const F=this._viewContainer;P.forEachOperation((le,Tt,Jt)=>{if(null==le.previousIndex)F.createEmbeddedView(this._template,new ri(le.item,this._ngForOf,-1,-1),null===Jt?void 0:Jt);else if(null==Jt)F.remove(null===Tt?void 0:Tt);else if(null!==Tt){const Fi=F.get(Tt);F.move(Fi,Jt),Ti(Fi,le)}});for(let le=0,Tt=F.length;le<Tt;le++){const Fi=F.get(le).context;Fi.index=le,Fi.count=Tt,Fi.ngForOf=this._ngForOf}P.forEachIdentityChange(le=>{Ti(F.get(le.currentIndex),le)})}static ngTemplateContextGuard(P,F){return!0}}return ce.\u0275fac=function(P){return new(P||ce)(O.Y36(O.s_b),O.Y36(O.Rgc),O.Y36(O.ZZ4))},ce.\u0275dir=O.lG2({type:ce,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),ce})();function Ti(ce,z){ce.context.$implicit=z.item}let En=(()=>{class ce{constructor(P,F){this._viewContainer=P,this._context=new Sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=F}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){dn("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){dn("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,F){return!0}}return ce.\u0275fac=function(P){return new(P||ce)(O.Y36(O.s_b),O.Y36(O.Rgc))},ce.\u0275dir=O.lG2({type:ce,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),ce})();class Sn{constructor(){this.$implicit=null,this.ngIf=null}}function dn(ce,z){if(z&&!z.createEmbeddedView)throw new Error(`${ce} must be a TemplateRef, but received '${(0,O.AaK)(z)}'.`)}class Qs{constructor(z,P){this._viewContainerRef=z,this._templateRef=P,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(z){z&&!this._created?this.create():!z&&this._created&&this.destroy()}}let Eo=(()=>{class ce{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(P){this._ngSwitch=P,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(P){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(P)}_matchCase(P){const F=P==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||F,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),F}_updateDefaultCases(P){if(this._defaultViews&&P!==this._defaultUsed){this._defaultUsed=P;for(let F=0;F<this._defaultViews.length;F++)this._defaultViews[F].enforceState(P)}}}return ce.\u0275fac=function(P){return new(P||ce)},ce.\u0275dir=O.lG2({type:ce,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),ce})(),Bs=(()=>{class ce{constructor(P,F,le){this.ngSwitch=le,le._addCase(),this._view=new Qs(P,F)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return ce.\u0275fac=function(P){return new(P||ce)(O.Y36(O.s_b),O.Y36(O.Rgc),O.Y36(Eo,9))},ce.\u0275dir=O.lG2({type:ce,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),ce})(),Rs=(()=>{class ce{constructor(P,F,le){this._ngEl=P,this._differs=F,this._renderer=le,this._ngStyle=null,this._differ=null}set ngStyle(P){this._ngStyle=P,!this._differ&&P&&(this._differ=this._differs.find(P).create())}ngDoCheck(){if(this._differ){const P=this._differ.diff(this._ngStyle);P&&this._applyChanges(P)}}_setStyle(P,F){const[le,Tt]=P.split(".");null!=(F=null!=F&&Tt?`${F}${Tt}`:F)?this._renderer.setStyle(this._ngEl.nativeElement,le,F):this._renderer.removeStyle(this._ngEl.nativeElement,le)}_applyChanges(P){P.forEachRemovedItem(F=>this._setStyle(F.key,null)),P.forEachAddedItem(F=>this._setStyle(F.key,F.currentValue)),P.forEachChangedItem(F=>this._setStyle(F.key,F.currentValue))}}return ce.\u0275fac=function(P){return new(P||ce)(O.Y36(O.SBq),O.Y36(O.aQg),O.Y36(O.Qsj))},ce.\u0275dir=O.lG2({type:ce,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),ce})();class $s{createSubscription(z,P){return z.subscribe({next:P,error:F=>{throw F}})}dispose(z){z.unsubscribe()}onDestroy(z){z.unsubscribe()}}class vo{createSubscription(z,P){return z.then(P,F=>{throw F})}dispose(z){}onDestroy(z){}}const Js=new vo,ha=new $s;let Xr=(()=>{class ce{constructor(P){this._ref=P,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(P){return this._obj?P!==this._obj?(this._dispose(),this.transform(P)):this._latestValue:(P&&this._subscribe(P),this._latestValue)}_subscribe(P){this._obj=P,this._strategy=this._selectStrategy(P),this._subscription=this._strategy.createSubscription(P,F=>this._updateLatestValue(P,F))}_selectStrategy(P){if((0,O.QGY)(P))return Js;if((0,O.F4k)(P))return ha;throw function(ce,z){return Error(`InvalidPipeArgument: '${z}' for pipe '${(0,O.AaK)(ce)}'`)}(ce,P)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(P,F){P===this._obj&&(this._latestValue=F,this._ref.markForCheck())}}return ce.\u0275fac=function(P){return new(P||ce)(O.Y36(O.sBO,16))},ce.\u0275pipe=O.Yjl({name:"async",type:ce,pure:!1}),ce})(),Zr=(()=>{class ce{}return ce.\u0275fac=function(P){return new(P||ce)},ce.\u0275mod=O.oAB({type:ce}),ce.\u0275inj=O.cJS({providers:[{provide:Ss,useClass:_i}]}),ce})();const qr="browser";function lr(ce){return ce===qr}let uo=(()=>{class ce{}return ce.\u0275prov=(0,O.Yz7)({token:ce,providedIn:"root",factory:()=>new _r((0,O.LFG)(f),window)}),ce})();class _r{constructor(z,P){this.document=z,this.window=P,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const P=function(ce,z){const P=ce.getElementById(z)||ce.getElementsByName(z)[0];if(P)return P;if("function"==typeof ce.createTreeWalker&&ce.body&&(ce.body.createShadowRoot||ce.body.attachShadow)){const F=ce.createTreeWalker(ce.body,NodeFilter.SHOW_ELEMENT);let le=F.currentNode;for(;le;){const Tt=le.shadowRoot;if(Tt){const Jt=Tt.getElementById(z)||Tt.querySelector(`[name="${z}"]`);if(Jt)return Jt}le=F.nextNode()}}return null}(this.document,z);P&&(this.scrollToElement(P),this.attemptFocus(P))}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const P=this.window.history;P&&P.scrollRestoration&&(P.scrollRestoration=z)}}scrollToElement(z){const P=z.getBoundingClientRect(),F=P.left+this.window.pageXOffset,le=P.top+this.window.pageYOffset,Tt=this.offset();this.window.scrollTo(F-Tt[0],le-Tt[1])}attemptFocus(z){return z.focus(),this.document.activeElement===z}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=ka(this.window.history)||ka(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch(z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(z){return!1}}}function ka(ce){return Object.getOwnPropertyDescriptor(ce,"scrollRestoration")}class pa{}},520:(li,ht,W)=>{"use strict";W.d(ht,{eN:()=>Be,JF:()=>_t});var O=W(9808),y=W(5e3),t=W(9646),e=W(8306),n=W(4351),a=W(9300),f=W(4004);class E{}class I{}class Y{constructor(Ie){this.normalizedNames=new Map,this.lazyUpdate=null,Ie?this.lazyInit="string"==typeof Ie?()=>{this.headers=new Map,Ie.split("\n").forEach(Xe=>{const Bt=Xe.indexOf(":");if(Bt>0){const Vt=Xe.slice(0,Bt),bi=Vt.toLowerCase(),si=Xe.slice(Bt+1).trim();this.maybeSetNormalizedName(Vt,bi),this.headers.has(bi)?this.headers.get(bi).push(si):this.headers.set(bi,[si])}})}:()=>{this.headers=new Map,Object.keys(Ie).forEach(Xe=>{let Bt=Ie[Xe];const Vt=Xe.toLowerCase();"string"==typeof Bt&&(Bt=[Bt]),Bt.length>0&&(this.headers.set(Vt,Bt),this.maybeSetNormalizedName(Xe,Vt))})}:this.headers=new Map}has(Ie){return this.init(),this.headers.has(Ie.toLowerCase())}get(Ie){this.init();const Xe=this.headers.get(Ie.toLowerCase());return Xe&&Xe.length>0?Xe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ie){return this.init(),this.headers.get(Ie.toLowerCase())||null}append(Ie,Xe){return this.clone({name:Ie,value:Xe,op:"a"})}set(Ie,Xe){return this.clone({name:Ie,value:Xe,op:"s"})}delete(Ie,Xe){return this.clone({name:Ie,value:Xe,op:"d"})}maybeSetNormalizedName(Ie,Xe){this.normalizedNames.has(Xe)||this.normalizedNames.set(Xe,Ie)}init(){this.lazyInit&&(this.lazyInit instanceof Y?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ie=>this.applyUpdate(Ie)),this.lazyUpdate=null))}copyFrom(Ie){Ie.init(),Array.from(Ie.headers.keys()).forEach(Xe=>{this.headers.set(Xe,Ie.headers.get(Xe)),this.normalizedNames.set(Xe,Ie.normalizedNames.get(Xe))})}clone(Ie){const Xe=new Y;return Xe.lazyInit=this.lazyInit&&this.lazyInit instanceof Y?this.lazyInit:this,Xe.lazyUpdate=(this.lazyUpdate||[]).concat([Ie]),Xe}applyUpdate(Ie){const Xe=Ie.name.toLowerCase();switch(Ie.op){case"a":case"s":let Bt=Ie.value;if("string"==typeof Bt&&(Bt=[Bt]),0===Bt.length)return;this.maybeSetNormalizedName(Ie.name,Xe);const Vt=("a"===Ie.op?this.headers.get(Xe):void 0)||[];Vt.push(...Bt),this.headers.set(Xe,Vt);break;case"d":const bi=Ie.value;if(bi){let si=this.headers.get(Xe);if(!si)return;si=si.filter(ni=>-1===bi.indexOf(ni)),0===si.length?(this.headers.delete(Xe),this.normalizedNames.delete(Xe)):this.headers.set(Xe,si)}else this.headers.delete(Xe),this.normalizedNames.delete(Xe)}}forEach(Ie){this.init(),Array.from(this.normalizedNames.keys()).forEach(Xe=>Ie(this.normalizedNames.get(Xe),this.headers.get(Xe)))}}class ee{encodeKey(Ie){return Je(Ie)}encodeValue(Ie){return Je(Ie)}decodeKey(Ie){return decodeURIComponent(Ie)}decodeValue(Ie){return decodeURIComponent(Ie)}}const De=/%(\d[a-f0-9])/gi,Ae={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Je(et){return encodeURIComponent(et).replace(De,(Ie,Xe)=>{var Bt;return null!==(Bt=Ae[Xe])&&void 0!==Bt?Bt:Ie})}function st(et){return`${et}`}class Ge{constructor(Ie={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ie.encoder||new ee,Ie.fromString){if(Ie.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(et,Ie){const Xe=new Map;return et.length>0&&et.replace(/^\?/,"").split("&").forEach(Vt=>{const bi=Vt.indexOf("="),[si,ni]=-1==bi?[Ie.decodeKey(Vt),""]:[Ie.decodeKey(Vt.slice(0,bi)),Ie.decodeValue(Vt.slice(bi+1))],sn=Xe.get(si)||[];sn.push(ni),Xe.set(si,sn)}),Xe}(Ie.fromString,this.encoder)}else Ie.fromObject?(this.map=new Map,Object.keys(Ie.fromObject).forEach(Xe=>{const Bt=Ie.fromObject[Xe];this.map.set(Xe,Array.isArray(Bt)?Bt:[Bt])})):this.map=null}has(Ie){return this.init(),this.map.has(Ie)}get(Ie){this.init();const Xe=this.map.get(Ie);return Xe?Xe[0]:null}getAll(Ie){return this.init(),this.map.get(Ie)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ie,Xe){return this.clone({param:Ie,value:Xe,op:"a"})}appendAll(Ie){const Xe=[];return Object.keys(Ie).forEach(Bt=>{const Vt=Ie[Bt];Array.isArray(Vt)?Vt.forEach(bi=>{Xe.push({param:Bt,value:bi,op:"a"})}):Xe.push({param:Bt,value:Vt,op:"a"})}),this.clone(Xe)}set(Ie,Xe){return this.clone({param:Ie,value:Xe,op:"s"})}delete(Ie,Xe){return this.clone({param:Ie,value:Xe,op:"d"})}toString(){return this.init(),this.keys().map(Ie=>{const Xe=this.encoder.encodeKey(Ie);return this.map.get(Ie).map(Bt=>Xe+"="+this.encoder.encodeValue(Bt)).join("&")}).filter(Ie=>""!==Ie).join("&")}clone(Ie){const Xe=new Ge({encoder:this.encoder});return Xe.cloneFrom=this.cloneFrom||this,Xe.updates=(this.updates||[]).concat(Ie),Xe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ie=>this.map.set(Ie,this.cloneFrom.map.get(Ie))),this.updates.forEach(Ie=>{switch(Ie.op){case"a":case"s":const Xe=("a"===Ie.op?this.map.get(Ie.param):void 0)||[];Xe.push(st(Ie.value)),this.map.set(Ie.param,Xe);break;case"d":if(void 0===Ie.value){this.map.delete(Ie.param);break}{let Bt=this.map.get(Ie.param)||[];const Vt=Bt.indexOf(st(Ie.value));-1!==Vt&&Bt.splice(Vt,1),Bt.length>0?this.map.set(Ie.param,Bt):this.map.delete(Ie.param)}}}),this.cloneFrom=this.updates=null)}}class Rt{constructor(){this.map=new Map}set(Ie,Xe){return this.map.set(Ie,Xe),this}get(Ie){return this.map.has(Ie)||this.map.set(Ie,Ie.defaultValue()),this.map.get(Ie)}delete(Ie){return this.map.delete(Ie),this}has(Ie){return this.map.has(Ie)}keys(){return this.map.keys()}}function tt(et){return"undefined"!=typeof ArrayBuffer&&et instanceof ArrayBuffer}function Oe(et){return"undefined"!=typeof Blob&&et instanceof Blob}function Se(et){return"undefined"!=typeof FormData&&et instanceof FormData}class dt{constructor(Ie,Xe,Bt,Vt){let bi;if(this.url=Xe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ie.toUpperCase(),function(et){switch(et){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Vt?(this.body=void 0!==Bt?Bt:null,bi=Vt):bi=Bt,bi&&(this.reportProgress=!!bi.reportProgress,this.withCredentials=!!bi.withCredentials,bi.responseType&&(this.responseType=bi.responseType),bi.headers&&(this.headers=bi.headers),bi.context&&(this.context=bi.context),bi.params&&(this.params=bi.params)),this.headers||(this.headers=new Y),this.context||(this.context=new Rt),this.params){const si=this.params.toString();if(0===si.length)this.urlWithParams=Xe;else{const ni=Xe.indexOf("?");this.urlWithParams=Xe+(-1===ni?"?":ni<Xe.length-1?"&":"")+si}}else this.params=new Ge,this.urlWithParams=Xe}serializeBody(){return null===this.body?null:tt(this.body)||Oe(this.body)||Se(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Ge?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Se(this.body)?null:Oe(this.body)?this.body.type||null:tt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ge?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ie={}){var Xe;const Bt=Ie.method||this.method,Vt=Ie.url||this.url,bi=Ie.responseType||this.responseType,si=void 0!==Ie.body?Ie.body:this.body,ni=void 0!==Ie.withCredentials?Ie.withCredentials:this.withCredentials,sn=void 0!==Ie.reportProgress?Ie.reportProgress:this.reportProgress;let xi=Ie.headers||this.headers,Ln=Ie.params||this.params;const Vi=null!==(Xe=Ie.context)&&void 0!==Xe?Xe:this.context;return void 0!==Ie.setHeaders&&(xi=Object.keys(Ie.setHeaders).reduce((Ni,Zi)=>Ni.set(Zi,Ie.setHeaders[Zi]),xi)),Ie.setParams&&(Ln=Object.keys(Ie.setParams).reduce((Ni,Zi)=>Ni.set(Zi,Ie.setParams[Zi]),Ln)),new dt(Bt,Vt,si,{params:Ln,headers:xi,context:Vi,reportProgress:sn,responseType:bi,withCredentials:ni})}}var it=(()=>((it=it||{})[it.Sent=0]="Sent",it[it.UploadProgress=1]="UploadProgress",it[it.ResponseHeader=2]="ResponseHeader",it[it.DownloadProgress=3]="DownloadProgress",it[it.Response=4]="Response",it[it.User=5]="User",it))();class Pe{constructor(Ie,Xe=200,Bt="OK"){this.headers=Ie.headers||new Y,this.status=void 0!==Ie.status?Ie.status:Xe,this.statusText=Ie.statusText||Bt,this.url=Ie.url||null,this.ok=this.status>=200&&this.status<300}}class Re extends Pe{constructor(Ie={}){super(Ie),this.type=it.ResponseHeader}clone(Ie={}){return new Re({headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class ge extends Pe{constructor(Ie={}){super(Ie),this.type=it.Response,this.body=void 0!==Ie.body?Ie.body:null}clone(Ie={}){return new ge({body:void 0!==Ie.body?Ie.body:this.body,headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class se extends Pe{constructor(Ie){super(Ie,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ie.url||"(unknown url)"}`:`Http failure response for ${Ie.url||"(unknown url)"}: ${Ie.status} ${Ie.statusText}`,this.error=Ie.error||null}}function at(et,Ie){return{body:Ie,headers:et.headers,context:et.context,observe:et.observe,params:et.params,reportProgress:et.reportProgress,responseType:et.responseType,withCredentials:et.withCredentials}}let Be=(()=>{class et{constructor(Xe){this.handler=Xe}request(Xe,Bt,Vt={}){let bi;if(Xe instanceof dt)bi=Xe;else{let sn,xi;sn=Vt.headers instanceof Y?Vt.headers:new Y(Vt.headers),Vt.params&&(xi=Vt.params instanceof Ge?Vt.params:new Ge({fromObject:Vt.params})),bi=new dt(Xe,Bt,void 0!==Vt.body?Vt.body:null,{headers:sn,context:Vt.context,params:xi,reportProgress:Vt.reportProgress,responseType:Vt.responseType||"json",withCredentials:Vt.withCredentials})}const si=(0,t.of)(bi).pipe((0,n.b)(sn=>this.handler.handle(sn)));if(Xe instanceof dt||"events"===Vt.observe)return si;const ni=si.pipe((0,a.h)(sn=>sn instanceof ge));switch(Vt.observe||"body"){case"body":switch(bi.responseType){case"arraybuffer":return ni.pipe((0,f.U)(sn=>{if(null!==sn.body&&!(sn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return sn.body}));case"blob":return ni.pipe((0,f.U)(sn=>{if(null!==sn.body&&!(sn.body instanceof Blob))throw new Error("Response is not a Blob.");return sn.body}));case"text":return ni.pipe((0,f.U)(sn=>{if(null!==sn.body&&"string"!=typeof sn.body)throw new Error("Response is not a string.");return sn.body}));default:return ni.pipe((0,f.U)(sn=>sn.body))}case"response":return ni;default:throw new Error(`Unreachable: unhandled observe type ${Vt.observe}}`)}}delete(Xe,Bt={}){return this.request("DELETE",Xe,Bt)}get(Xe,Bt={}){return this.request("GET",Xe,Bt)}head(Xe,Bt={}){return this.request("HEAD",Xe,Bt)}jsonp(Xe,Bt){return this.request("JSONP",Xe,{params:(new Ge).append(Bt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Xe,Bt={}){return this.request("OPTIONS",Xe,Bt)}patch(Xe,Bt,Vt={}){return this.request("PATCH",Xe,at(Vt,Bt))}post(Xe,Bt,Vt={}){return this.request("POST",Xe,at(Vt,Bt))}put(Xe,Bt,Vt={}){return this.request("PUT",Xe,at(Vt,Bt))}}return et.\u0275fac=function(Xe){return new(Xe||et)(y.LFG(E))},et.\u0275prov=y.Yz7({token:et,factory:et.\u0275fac}),et})();class ze{constructor(Ie,Xe){this.next=Ie,this.interceptor=Xe}handle(Ie){return this.interceptor.intercept(Ie,this.next)}}const St=new y.OlP("HTTP_INTERCEPTORS");let wt=(()=>{class et{intercept(Xe,Bt){return Bt.handle(Xe)}}return et.\u0275fac=function(Xe){return new(Xe||et)},et.\u0275prov=y.Yz7({token:et,factory:et.\u0275fac}),et})();const yi=/^\)\]\}',?\n/;let vt=(()=>{class et{constructor(Xe){this.xhrFactory=Xe}handle(Xe){if("JSONP"===Xe.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new e.y(Bt=>{const Vt=this.xhrFactory.build();if(Vt.open(Xe.method,Xe.urlWithParams),Xe.withCredentials&&(Vt.withCredentials=!0),Xe.headers.forEach((Zi,Mi)=>Vt.setRequestHeader(Zi,Mi.join(","))),Xe.headers.has("Accept")||Vt.setRequestHeader("Accept","application/json, text/plain, */*"),!Xe.headers.has("Content-Type")){const Zi=Xe.detectContentTypeHeader();null!==Zi&&Vt.setRequestHeader("Content-Type",Zi)}if(Xe.responseType){const Zi=Xe.responseType.toLowerCase();Vt.responseType="json"!==Zi?Zi:"text"}const bi=Xe.serializeBody();let si=null;const ni=()=>{if(null!==si)return si;const Zi=1223===Vt.status?204:Vt.status,Mi=Vt.statusText||"OK",fn=new Y(Vt.getAllResponseHeaders()),$i=function(et){return"responseURL"in et&&et.responseURL?et.responseURL:/^X-Request-URL:/m.test(et.getAllResponseHeaders())?et.getResponseHeader("X-Request-URL"):null}(Vt)||Xe.url;return si=new Re({headers:fn,status:Zi,statusText:Mi,url:$i}),si},sn=()=>{let{headers:Zi,status:Mi,statusText:fn,url:$i}=ni(),Tn=null;204!==Mi&&(Tn=void 0===Vt.response?Vt.responseText:Vt.response),0===Mi&&(Mi=Tn?200:0);let jt=Mi>=200&&Mi<300;if("json"===Xe.responseType&&"string"==typeof Tn){const qe=Tn;Tn=Tn.replace(yi,"");try{Tn=""!==Tn?JSON.parse(Tn):null}catch(be){Tn=qe,jt&&(jt=!1,Tn={error:be,text:Tn})}}jt?(Bt.next(new ge({body:Tn,headers:Zi,status:Mi,statusText:fn,url:$i||void 0})),Bt.complete()):Bt.error(new se({error:Tn,headers:Zi,status:Mi,statusText:fn,url:$i||void 0}))},xi=Zi=>{const{url:Mi}=ni(),fn=new se({error:Zi,status:Vt.status||0,statusText:Vt.statusText||"Unknown Error",url:Mi||void 0});Bt.error(fn)};let Ln=!1;const Vi=Zi=>{Ln||(Bt.next(ni()),Ln=!0);let Mi={type:it.DownloadProgress,loaded:Zi.loaded};Zi.lengthComputable&&(Mi.total=Zi.total),"text"===Xe.responseType&&!!Vt.responseText&&(Mi.partialText=Vt.responseText),Bt.next(Mi)},Ni=Zi=>{let Mi={type:it.UploadProgress,loaded:Zi.loaded};Zi.lengthComputable&&(Mi.total=Zi.total),Bt.next(Mi)};return Vt.addEventListener("load",sn),Vt.addEventListener("error",xi),Vt.addEventListener("timeout",xi),Vt.addEventListener("abort",xi),Xe.reportProgress&&(Vt.addEventListener("progress",Vi),null!==bi&&Vt.upload&&Vt.upload.addEventListener("progress",Ni)),Vt.send(bi),Bt.next({type:it.Sent}),()=>{Vt.removeEventListener("error",xi),Vt.removeEventListener("abort",xi),Vt.removeEventListener("load",sn),Vt.removeEventListener("timeout",xi),Xe.reportProgress&&(Vt.removeEventListener("progress",Vi),null!==bi&&Vt.upload&&Vt.upload.removeEventListener("progress",Ni)),Vt.readyState!==Vt.DONE&&Vt.abort()}})}}return et.\u0275fac=function(Xe){return new(Xe||et)(y.LFG(O.JF))},et.\u0275prov=y.Yz7({token:et,factory:et.\u0275fac}),et})();const Ne=new y.OlP("XSRF_COOKIE_NAME"),Ve=new y.OlP("XSRF_HEADER_NAME");class de{}let Te=(()=>{class et{constructor(Xe,Bt,Vt){this.doc=Xe,this.platform=Bt,this.cookieName=Vt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Xe=this.doc.cookie||"";return Xe!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,O.Mx)(Xe,this.cookieName),this.lastCookieString=Xe),this.lastToken}}return et.\u0275fac=function(Xe){return new(Xe||et)(y.LFG(O.K0),y.LFG(y.Lbi),y.LFG(Ne))},et.\u0275prov=y.Yz7({token:et,factory:et.\u0275fac}),et})(),xt=(()=>{class et{constructor(Xe,Bt){this.tokenService=Xe,this.headerName=Bt}intercept(Xe,Bt){const Vt=Xe.url.toLowerCase();if("GET"===Xe.method||"HEAD"===Xe.method||Vt.startsWith("http://")||Vt.startsWith("https://"))return Bt.handle(Xe);const bi=this.tokenService.getToken();return null!==bi&&!Xe.headers.has(this.headerName)&&(Xe=Xe.clone({headers:Xe.headers.set(this.headerName,bi)})),Bt.handle(Xe)}}return et.\u0275fac=function(Xe){return new(Xe||et)(y.LFG(de),y.LFG(Ve))},et.\u0275prov=y.Yz7({token:et,factory:et.\u0275fac}),et})(),Kt=(()=>{class et{constructor(Xe,Bt){this.backend=Xe,this.injector=Bt,this.chain=null}handle(Xe){if(null===this.chain){const Bt=this.injector.get(St,[]);this.chain=Bt.reduceRight((Vt,bi)=>new ze(Vt,bi),this.backend)}return this.chain.handle(Xe)}}return et.\u0275fac=function(Xe){return new(Xe||et)(y.LFG(I),y.LFG(y.zs3))},et.\u0275prov=y.Yz7({token:et,factory:et.\u0275fac}),et})(),We=(()=>{class et{static disable(){return{ngModule:et,providers:[{provide:xt,useClass:wt}]}}static withOptions(Xe={}){return{ngModule:et,providers:[Xe.cookieName?{provide:Ne,useValue:Xe.cookieName}:[],Xe.headerName?{provide:Ve,useValue:Xe.headerName}:[]]}}}return et.\u0275fac=function(Xe){return new(Xe||et)},et.\u0275mod=y.oAB({type:et}),et.\u0275inj=y.cJS({providers:[xt,{provide:St,useExisting:xt,multi:!0},{provide:de,useClass:Te},{provide:Ne,useValue:"XSRF-TOKEN"},{provide:Ve,useValue:"X-XSRF-TOKEN"}]}),et})(),_t=(()=>{class et{}return et.\u0275fac=function(Xe){return new(Xe||et)},et.\u0275mod=y.oAB({type:et}),et.\u0275inj=y.cJS({providers:[Be,{provide:E,useClass:Kt},vt,{provide:I,useExisting:vt}],imports:[[We.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),et})()},5e3:(li,ht,W)=>{"use strict";W.d(ht,{deG:()=>wc,tb:()=>wb,AFp:()=>Cb,ip1:()=>hm,CZH:()=>Oh,hGG:()=>t0,z2F:()=>mp,sBO:()=>IT,Sil:()=>fm,_Vd:()=>cp,EJc:()=>Db,SBq:()=>up,qLn:()=>Zl,vpe:()=>Au,tBr:()=>$a,XFs:()=>We,OlP:()=>eo,zs3:()=>tc,ZZ4:()=>wf,aQg:()=>Sf,soG:()=>Ef,YKP:()=>Ov,h0i:()=>xh,PXZ:()=>TT,R0b:()=>yc,FiY:()=>bl,Lbi:()=>Tb,g9A:()=>Eb,n_E:()=>mf,Qsj:()=>rE,FYo:()=>Rv,JOm:()=>oe,q3G:()=>Ro,tp0:()=>Gr,Rgc:()=>fp,dDg:()=>xb,GfV:()=>xv,s_b:()=>vf,ifc:()=>si,eFA:()=>Ob,G48:()=>xT,Gpc:()=>ee,f3M:()=>_l,_c5:()=>KT,VLi:()=>bT,c2e:()=>Sb,zSh:()=>zp,wAp:()=>ts,vHH:()=>Je,EiD:()=>Kl,mCW:()=>Is,qzn:()=>nt,JVY:()=>zt,pB0:()=>oi,eBb:()=>Nt,L6k:()=>Dt,LAX:()=>ci,cg1:()=>zg,kL8:()=>q_,yhl:()=>gt,dqk:()=>Vi,sIi:()=>Z,CqO:()=>l_,QGY:()=>Ig,F4k:()=>a_,RDi:()=>uo,AaK:()=>E,z3N:()=>xe,qOj:()=>ip,TTD:()=>qo,_Bn:()=>Sv,xp6:()=>Ku,uIk:()=>Ci,Gre:()=>G_,ekj:()=>Fg,Suo:()=>Qv,Xpm:()=>Ke,lG2:()=>ut,Yz7:()=>Lt,cJS:()=>Ce,oAB:()=>$n,Yjl:()=>Ut,Y36:()=>np,_UZ:()=>s_,GkF:()=>o_,BQk:()=>xg,ynx:()=>Rg,qZA:()=>Mg,TgZ:()=>Dg,EpF:()=>r_,n5z:()=>Nr,Ikx:()=>Gg,LFG:()=>Mo,$8M:()=>Ol,$Z:()=>n_,NdJ:()=>Ag,CRH:()=>eb,kcU:()=>sl,O4$:()=>sr,oxw:()=>d_,ALo:()=>zv,lcZ:()=>jv,Hsn:()=>p_,F$t:()=>h_,Q6J:()=>wg,s9C:()=>Lg,DdM:()=>Nv,VKq:()=>Fv,WLB:()=>Bv,iGM:()=>Zv,MAs:()=>th,CHM:()=>G,LSH:()=>hc,Udp:()=>Ng,WFA:()=>Og,d8E:()=>Wg,YNc:()=>ru,W1O:()=>sb,_uU:()=>P_,Oqu:()=>Hg,hij:()=>cf,AsE:()=>Vg,lnq:()=>Ug,Gf:()=>qv});var O=W(7579),y=W(727),t=W(8306),e=W(6451),n=W(3099);function a(c){for(let u in c)if(c[u]===a)return u;throw Error("Could not find renamed property on target object.")}function f(c,u){for(const g in u)u.hasOwnProperty(g)&&!c.hasOwnProperty(g)&&(c[g]=u[g])}function E(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(E).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const u=c.toString();if(null==u)return""+u;const g=u.indexOf("\n");return-1===g?u:u.substring(0,g)}function I(c,u){return null==c||""===c?null===u?"":u:null==u||""===u?c:c+" "+u}const Y=a({__forward_ref__:a});function ee(c){return c.__forward_ref__=ee,c.toString=function(){return E(this())},c}function _e(c){return De(c)?c():c}function De(c){return"function"==typeof c&&c.hasOwnProperty(Y)&&c.__forward_ref__===ee}class Je extends Error{constructor(u,g){super(function(c,u){return`${c?`NG0${c}: `:""}${u}`}(u,g)),this.code=u}}function lt(c){return"string"==typeof c?c:null==c?"":String(c)}function Rt(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():lt(c)}function Se(c,u){const g=u?` in ${u}`:"";throw new Je("201",`No provider for ${Rt(c)} found${g}`)}function $t(c,u){null==c&&function(c,u,g,b){throw new Error(`ASSERTION ERROR: ${c}`+(null==b?"":` [Expected=> ${g} ${b} ${u} <=Actual]`))}(u,c,null,"!=")}function Lt(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function Ce(c){return{providers:c.providers||[],imports:c.imports||[]}}function vt(c){return Ne(c,xt)||Ne(c,Ft)}function Ne(c,u){return c.hasOwnProperty(u)?c[u]:null}function Te(c){return c&&(c.hasOwnProperty(Kt)||c.hasOwnProperty(ke))?c[Kt]:null}const xt=a({\u0275prov:a}),Kt=a({\u0275inj:a}),Ft=a({ngInjectableDef:a}),ke=a({ngInjectorDef:a});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let _t;function Ye(c){const u=_t;return _t=c,u}function et(c,u,g){const b=vt(c);return b&&"root"==b.providedIn?void 0===b.value?b.value=b.factory():b.value:g&We.Optional?null:void 0!==u?u:void Se(E(c),"Injector")}function Xe(c){return{toString:c}.toString()}var Bt=(()=>((Bt=Bt||{})[Bt.OnPush=0]="OnPush",Bt[Bt.Default=1]="Default",Bt))(),si=(()=>{return(c=si||(si={}))[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",si;var c})();const ni="undefined"!=typeof globalThis&&globalThis,sn="undefined"!=typeof window&&window,xi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vi=ni||"undefined"!=typeof global&&global||sn||xi,Mi={},fn=[],$i=a({\u0275cmp:a}),Tn=a({\u0275dir:a}),jt=a({\u0275pipe:a}),qe=a({\u0275mod:a}),be=a({\u0275fac:a}),te=a({__NG_ELEMENT_ID__:a});let me=0;function Ke(c){return Xe(()=>{const g={},b={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:g,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===Bt.OnPush,directiveDefs:null,pipeDefs:null,selectors:c.selectors||fn,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||si.Emulated,id:"c",styles:c.styles||fn,_:null,setInput:null,schemas:c.schemas||null,tView:null},S=c.directives,k=c.features,V=c.pipes;return b.id+=me++,b.inputs=Mt(c.inputs,g),b.outputs=Mt(c.outputs),k&&k.forEach($=>$(b)),b.directiveDefs=S?()=>("function"==typeof S?S():S).map(Si):null,b.pipeDefs=V?()=>("function"==typeof V?V():V).map(zi):null,b})}function Si(c){return ui(c)||function(c){return c[Tn]||null}(c)}function zi(c){return function(c){return c[jt]||null}(c)}const mn={};function $n(c){return Xe(()=>{const u={type:c.type,bootstrap:c.bootstrap||fn,declarations:c.declarations||fn,imports:c.imports||fn,exports:c.exports||fn,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null};return null!=c.id&&(mn[c.id]=c.type),u})}function Mt(c,u){if(null==c)return Mi;const g={};for(const b in c)if(c.hasOwnProperty(b)){let S=c[b],k=S;Array.isArray(S)&&(k=S[1],S=S[0]),g[S]=b,u&&(u[S]=k)}return g}const ut=Ke;function Ut(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,onDestroy:c.type.prototype.ngOnDestroy||null}}function ui(c){return c[$i]||null}function jn(c,u){const g=c[qe]||null;if(!g&&!0===u)throw new Error(`Type ${E(c)} does not have '\u0275mod' property.`);return g}function Bs(c){return Array.isArray(c)&&"object"==typeof c[1]}function Hs(c){return Array.isArray(c)&&!0===c[1]}function pr(c){return 0!=(8&c.flags)}function Vn(c){return 2==(2&c.flags)}function To(c){return 1==(1&c.flags)}function Rs(c){return null!==c.template}function $o(c){return 0!=(512&c[2])}function Zo(c,u){return c.hasOwnProperty(be)?c[be]:null}class lo{constructor(u,g,b){this.previousValue=u,this.currentValue=g,this.firstChange=b}isFirstChange(){return this.firstChange}}function qo(){return co}function co(c){return c.type.prototype.ngOnChanges&&(c.setInput=Zr),so}function so(){const c=Qo(this),u=null==c?void 0:c.current;if(u){const g=c.previous;if(g===Mi)c.previous=u;else for(let b in u)g[b]=u[b];c.current=null,this.ngOnChanges(u)}}function Zr(c,u,g,b){const S=Qo(c)||function(c,u){return c[qr]=u}(c,{previous:Mi,current:null}),k=S.current||(S.current={}),V=S.previous,$=this.declaredInputs[g],ne=V[$];k[$]=new lo(ne&&ne.currentValue,u,V===Mi),c[b]=u}qo.ngInherit=!0;const qr="__ngSimpleChanges__";function Qo(c){return c[qr]||null}const mr="http://www.w3.org/2000/svg";let ko;function uo(c){ko=c}function gs(c){return!!c.listen}const Sr={createRenderer:(c,u)=>void 0!==ko?ko:"undefined"!=typeof document?document:void 0};function ce(c){for(;Array.isArray(c);)c=c[0];return c}function F(c,u){return ce(u[c])}function le(c,u){return ce(u[c.index])}function Jt(c,u){return c.data[u]}function Fi(c,u){return c[u]}function Dn(c,u){const g=u[c];return Bs(g)?g:g[0]}function es(c){return 4==(4&c[2])}function cs(c){return 128==(128&c[2])}function Ds(c,u){return null==u?null:c[u]}function zn(c){c[18]=0}function ho(c,u){c[5]+=u;let g=c,b=c[3];for(;null!==b&&(1===u&&1===g[5]||-1===u&&0===g[5]);)b[5]+=u,g=b,b=b[3]}const _n={lFrame:kr(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function er(){return _n.bindingsEnabled}function fe(){return _n.lFrame.lView}function N(){return _n.lFrame.tView}function G(c){return _n.lFrame.contextLView=c,c[8]}function Q(){let c=Me();for(;null!==c&&64===c.type;)c=c.parent;return c}function Me(){return _n.lFrame.currentTNode}function Ct(c,u){const g=_n.lFrame;g.currentTNode=c,g.isParent=u}function It(){return _n.lFrame.isParent}function Zt(){_n.lFrame.isParent=!1}function nn(){return _n.isInCheckNoChangesMode}function Nn(c){_n.isInCheckNoChangesMode=c}function An(){const c=_n.lFrame;let u=c.bindingRootIndex;return-1===u&&(u=c.bindingRootIndex=c.tView.bindingStartIndex),u}function hn(){return _n.lFrame.bindingIndex}function kn(){return _n.lFrame.bindingIndex++}function rs(c){const u=_n.lFrame,g=u.bindingIndex;return u.bindingIndex=u.bindingIndex+c,g}function oo(c,u){const g=_n.lFrame;g.bindingIndex=g.bindingRootIndex=c,ir(u)}function ir(c){_n.lFrame.currentDirectiveIndex=c}function Zs(c){const u=_n.lFrame.currentDirectiveIndex;return-1===u?null:c[u]}function vr(){return _n.lFrame.currentQueryIndex}function zo(c){_n.lFrame.currentQueryIndex=c}function nr(c){const u=c[1];return 2===u.type?u.declTNode:1===u.type?c[6]:null}function La(c,u,g){if(g&We.SkipSelf){let S=u,k=c;for(;!(S=S.parent,null!==S||g&We.Host||(S=nr(k),null===S||(k=k[15],10&S.type))););if(null===S)return!1;u=S,c=k}const b=_n.lFrame=br();return b.currentTNode=u,b.lView=c,!0}function ea(c){const u=br(),g=c[1];_n.lFrame=u,u.currentTNode=g.firstChild,u.lView=c,u.tView=g,u.contextLView=c,u.bindingIndex=g.bindingStartIndex,u.inI18n=!1}function br(){const c=_n.lFrame,u=null===c?null:c.child;return null===u?kr(c):u}function kr(c){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=u),u}function ta(){const c=_n.lFrame;return _n.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const on=ta;function an(){const c=ta();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function us(){return _n.lFrame.selectedIndex}function wo(c){_n.lFrame.selectedIndex=c}function ds(){const c=_n.lFrame;return Jt(c.tView,c.selectedIndex)}function sr(){_n.lFrame.currentNamespace=mr}function sl(){_n.lFrame.currentNamespace=null}function Ho(c,u){for(let g=u.directiveStart,b=u.directiveEnd;g<b;g++){const k=c.data[g].type.prototype,{ngAfterContentInit:V,ngAfterContentChecked:$,ngAfterViewInit:ne,ngAfterViewChecked:ye,ngOnDestroy:He}=k;V&&(c.contentHooks||(c.contentHooks=[])).push(-g,V),$&&((c.contentHooks||(c.contentHooks=[])).push(g,$),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(g,$)),ne&&(c.viewHooks||(c.viewHooks=[])).push(-g,ne),ye&&((c.viewHooks||(c.viewHooks=[])).push(g,ye),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(g,ye)),null!=He&&(c.destroyHooks||(c.destroyHooks=[])).push(g,He)}}function or(c,u,g){rl(c,u,3,g)}function Mr(c,u,g,b){(3&c[2])===g&&rl(c,u,g,b)}function Lr(c,u){let g=c[2];(3&g)===u&&(g&=2047,g+=1,c[2]=g)}function rl(c,u,g,b){const k=null!=b?b:-1,V=u.length-1;let $=0;for(let ne=void 0!==b?65535&c[18]:0;ne<V;ne++)if("number"==typeof u[ne+1]){if($=u[ne],null!=b&&$>=b)break}else u[ne]<0&&(c[18]+=65536),($<k||-1==k)&&(za(c,g,u,ne),c[18]=(4294901760&c[18])+ne+2),ne++}function za(c,u,g,b){const S=g[b]<0,k=g[b+1],$=c[S?-g[b]:g[b]];if(S){if(c[2]>>11<c[18]>>16&&(3&c[2])===u){c[2]+=2048;try{k.call($)}finally{}}}else try{k.call($)}finally{}}class So{constructor(u,g,b){this.factory=u,this.resolving=!1,this.canSeeViewProviders=g,this.injectImpl=b}}function ma(c,u,g){const b=gs(c);let S=0;for(;S<g.length;){const k=g[S];if("number"==typeof k){if(0!==k)break;S++;const V=g[S++],$=g[S++],ne=g[S++];b?c.setAttribute(u,$,ne,V):u.setAttributeNS(V,$,ne)}else{const V=k,$=g[++S];cl(V)?b&&c.setProperty(u,V,$):b?c.setAttribute(u,V,$):u.setAttribute(V,$),S++}}return S}function Ec(c){return 3===c||4===c||6===c}function cl(c){return 64===c.charCodeAt(0)}function Rr(c,u){if(null!==u&&0!==u.length)if(null===c||0===c.length)c=u.slice();else{let g=-1;for(let b=0;b<u.length;b++){const S=u[b];"number"==typeof S?g=S:0===g||_a(c,g,S,null,-1===g||2===g?u[++b]:null)}}return c}function _a(c,u,g,b,S){let k=0,V=c.length;if(-1===u)V=-1;else for(;k<c.length;){const $=c[k++];if("number"==typeof $){if($===u){V=-1;break}if($>u){V=k-1;break}}}for(;k<c.length;){const $=c[k];if("number"==typeof $)break;if($===g){if(null===b)return void(null!==S&&(c[k+1]=S));if(b===c[k+1])return void(c[k+2]=S)}k++,null!==b&&k++,null!==S&&k++}-1!==V&&(c.splice(V,0,u),k=V+1),c.splice(k++,0,g),null!==b&&c.splice(k++,0,b),null!==S&&c.splice(k++,0,S)}function Pa(c){return-1!==c}function na(c){return 32767&c}function sa(c,u){let g=function(c){return c>>16}(c),b=u;for(;g>0;)b=b[15],g--;return b}let ja=!0;function Al(c){const u=ja;return ja=c,u}let q=0;function j(c,u){const g=ve(c,u);if(-1!==g)return g;const b=u[1];b.firstCreatePass&&(c.injectorIndex=u.length,ae(b.data,c),ae(u,null),ae(b.blueprint,null));const S=je(c,u),k=c.injectorIndex;if(Pa(S)){const V=na(S),$=sa(S,u),ne=$[1].data;for(let ye=0;ye<8;ye++)u[k+ye]=$[V+ye]|ne[V+ye]}return u[k+8]=S,k}function ae(c,u){c.push(0,0,0,0,0,0,0,0,u)}function ve(c,u){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===u[c.injectorIndex+8]?-1:c.injectorIndex}function je(c,u){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let g=0,b=null,S=u;for(;null!==S;){const k=S[1],V=k.type;if(b=2===V?k.declTNode:1===V?S[6]:null,null===b)return-1;if(g++,S=S[15],-1!==b.injectorIndex)return b.injectorIndex|g<<16}return-1}function ft(c,u,g){!function(c,u,g){let b;"string"==typeof g?b=g.charCodeAt(0)||0:g.hasOwnProperty(te)&&(b=g[te]),null==b&&(b=g[te]=q++);const S=255&b;u.data[c+(S>>5)]|=1<<S}(c,u,g)}function ai(c,u,g){if(g&We.Optional)return c;Se(u,"NodeInjector")}function Xi(c,u,g,b){if(g&We.Optional&&void 0===b&&(b=null),0==(g&(We.Self|We.Host))){const S=c[9],k=Ye(void 0);try{return S?S.get(u,b,g&We.Optional):et(u,b,g&We.Optional)}finally{Ye(k)}}return ai(b,u,g)}function qn(c,u,g,b=We.Default,S){if(null!==c){const k=function(c){if("string"==typeof c)return c.charCodeAt(0)||0;const u=c.hasOwnProperty(te)?c[te]:void 0;return"number"==typeof u?u>=0?255&u:vs:u}(g);if("function"==typeof k){if(!La(u,c,b))return b&We.Host?ai(S,g,b):Xi(u,g,b,S);try{const V=k(b);if(null!=V||b&We.Optional)return V;Se(g)}finally{on()}}else if("number"==typeof k){let V=null,$=ve(c,u),ne=-1,ye=b&We.Host?u[16][6]:null;for((-1===$||b&We.SkipSelf)&&(ne=-1===$?je(c,u):u[$+8],-1!==ne&&ra(b,!1)?(V=u[1],$=na(ne),u=sa(ne,u)):$=-1);-1!==$;){const He=u[1];if(po(k,$,He.data)){const ct=Ps($,u,g,V,b,ye);if(ct!==Cn)return ct}ne=u[$+8],-1!==ne&&ra(b,u[1].data[$+8]===ye)&&po(k,$,u)?(V=He,$=na(ne),u=sa(ne,u)):$=-1}}}return Xi(u,g,b,S)}const Cn={};function vs(){return new rr(Q(),fe())}function Ps(c,u,g,b,S,k){const V=u[1],$=V.data[c+8],He=Sa($,V,g,null==b?Vn($)&&ja:b!=V&&0!=(3&$.type),S&We.Host&&k===$);return null!==He?ur(u,V,He,$):Cn}function Sa(c,u,g,b,S){const k=c.providerIndexes,V=u.data,$=1048575&k,ne=c.directiveStart,He=k>>20,Pt=S?$+He:c.directiveEnd;for(let Qt=b?$:$+He;Qt<Pt;Qt++){const wi=V[Qt];if(Qt<ne&&g===wi||Qt>=ne&&wi.type===g)return Qt}if(S){const Qt=V[ne];if(Qt&&Rs(Qt)&&Qt.type===g)return ne}return null}function ur(c,u,g,b){let S=c[g];const k=u.data;if(function(c){return c instanceof So}(S)){const V=S;V.resolving&&function(c,u){throw new Je("200",`Circular dependency in DI detected for ${c}`)}(Rt(k[g]));const $=Al(V.canSeeViewProviders);V.resolving=!0;const ne=V.injectImpl?Ye(V.injectImpl):null;La(c,b,We.Default);try{S=c[g]=V.factory(void 0,k,c,b),u.firstCreatePass&&g>=b.directiveStart&&function(c,u,g){const{ngOnChanges:b,ngOnInit:S,ngDoCheck:k}=u.type.prototype;if(b){const V=co(u);(g.preOrderHooks||(g.preOrderHooks=[])).push(c,V),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(c,V)}S&&(g.preOrderHooks||(g.preOrderHooks=[])).push(0-c,S),k&&((g.preOrderHooks||(g.preOrderHooks=[])).push(c,k),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(c,k))}(g,k[g],u)}finally{null!==ne&&Ye(ne),Al($),V.resolving=!1,on()}}return S}function po(c,u,g){return!!(g[u+(c>>5)]&1<<c)}function ra(c,u){return!(c&We.Self||c&We.Host&&u)}class rr{constructor(u,g){this._tNode=u,this._lView=g}get(u,g,b){return qn(this._tNode,this._lView,u,b,g)}}function Nr(c){return Xe(()=>{const u=c.prototype.constructor,g=u[be]||oc(u),b=Object.prototype;let S=Object.getPrototypeOf(c.prototype).constructor;for(;S&&S!==b;){const k=S[be]||oc(S);if(k&&k!==g)return k;S=Object.getPrototypeOf(S)}return k=>new k})}function oc(c){return De(c)?()=>{const u=oc(_e(c));return u&&u()}:Zo(c)}function Ol(c){return function(c,u){if("class"===u)return c.classes;if("style"===u)return c.styles;const g=c.attrs;if(g){const b=g.length;let S=0;for(;S<b;){const k=g[S];if(Ec(k))break;if(0===k)S+=2;else if("number"==typeof k)for(S++;S<b&&"string"==typeof g[S];)S++;else{if(k===u)return g[S+1];S+=2}}}return null}(Q(),c)}const kl="__parameters__";function Es(c,u,g){return Xe(()=>{const b=function(c){return function(...g){if(c){const b=c(...g);for(const S in b)this[S]=b[S]}}}(u);function S(...k){if(this instanceof S)return b.apply(this,k),this;const V=new S(...k);return $.annotation=V,$;function $(ne,ye,He){const ct=ne.hasOwnProperty(kl)?ne[kl]:Object.defineProperty(ne,kl,{value:[]})[kl];for(;ct.length<=He;)ct.push(null);return(ct[He]=ct[He]||[]).push(V),ne}}return g&&(S.prototype=Object.create(g.prototype)),S.prototype.ngMetadataName=c,S.annotationCls=S,S})}class eo{constructor(u,g){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof g?this.__NG_ELEMENT_ID__=g:void 0!==g&&(this.\u0275prov=Lt({token:this,providedIn:g.providedIn||"root",factory:g.factory}))}toString(){return`InjectionToken ${this._desc}`}}const wc=new eo("AnalyzeForEntryComponents");function Ir(c,u){void 0===u&&(u=c);for(let g=0;g<c.length;g++){let b=c[g];Array.isArray(b)?(u===c&&(u=c.slice(0,g)),Ir(b,u)):u!==c&&u.push(b)}return u}function Ws(c,u){c.forEach(g=>Array.isArray(g)?Ws(g,u):u(g))}function Fr(c,u,g){u>=c.length?c.push(g):c.splice(u,0,g)}function va(c,u){return u>=c.length-1?c.pop():c.splice(u,1)[0]}function hl(c,u){const g=[];for(let b=0;b<c;b++)g.push(u);return g}function Vr(c,u,g){let b=Nl(c,u);return b>=0?c[1|b]=g:(b=~b,function(c,u,g,b){let S=c.length;if(S==u)c.push(g,b);else if(1===S)c.push(b,c[0]),c[0]=g;else{for(S--,c.push(c[S-1],c[S]);S>u;)c[S]=c[S-2],S--;c[u]=g,c[u+1]=b}}(c,b,u,g)),b}function pl(c,u){const g=Nl(c,u);if(g>=0)return c[1|g]}function Nl(c,u){return function(c,u,g){let b=0,S=c.length>>g;for(;S!==b;){const k=b+(S-b>>1),V=c[k<<g];if(u===V)return k<<g;V>u?S=k:b=k+1}return~(S<<g)}(c,u,1)}const yr={},Bc="__NG_DI_FLAG__",Dc="ngTempTokenPath",ku=/\n/gm,fu="__source",Vl=a({provide:String,useValue:a});let gl;function ml(c){const u=gl;return gl=c,u}function Ul(c,u=We.Default){if(void 0===gl)throw new Error("inject() must be called from an injection context");return null===gl?et(c,void 0,u):gl.get(c,u&We.Optional?null:void 0,u)}function Mo(c,u=We.Default){return(_t||Ul)(_e(c),u)}const _l=Mo;function vl(c){const u=[];for(let g=0;g<c.length;g++){const b=_e(c[g]);if(Array.isArray(b)){if(0===b.length)throw new Error("Arguments array must have arguments.");let S,k=We.Default;for(let V=0;V<b.length;V++){const $=b[V],ne=Rc($);"number"==typeof ne?-1===ne?S=$.token:k|=ne:S=$}u.push(Mo(S,k))}else u.push(Mo(b))}return u}function Gl(c,u){return c[Bc]=u,c.prototype[Bc]=u,c}function Rc(c){return c[Bc]}const $a=Gl(Es("Inject",c=>({token:c})),-1),bl=Gl(Es("Optional"),8),Gr=Gl(Es("SkipSelf"),4);let qa;function Qa(c){var u;return(null===(u=function(){if(void 0===qa&&(qa=null,Vi.trustedTypes))try{qa=Vi.trustedTypes.createPolicy("angular",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch(c){}return qa}())||void 0===u?void 0:u.createHTML(c))||c}class Xl{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class td extends Xl{getTypeName(){return"HTML"}}class Uo extends Xl{getTypeName(){return"Style"}}class uc extends Xl{getTypeName(){return"Script"}}class ie extends Xl{getTypeName(){return"URL"}}class re extends Xl{getTypeName(){return"ResourceURL"}}function xe(c){return c instanceof Xl?c.changingThisBreaksApplicationSecurity:c}function nt(c,u){const g=gt(c);if(null!=g&&g!==u){if("ResourceURL"===g&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${g} (see https://g.co/ng/security#xss)`)}return g===u}function gt(c){return c instanceof Xl&&c.getTypeName()||null}function zt(c){return new td(c)}function Dt(c){return new Uo(c)}function Nt(c){return new uc(c)}function ci(c){return new ie(c)}function oi(c){return new re(c)}class Rn{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const g=(new window.DOMParser).parseFromString(Qa(u),"text/html").body;return null===g?this.inertDocumentHelper.getInertBodyElement(u):(g.removeChild(g.firstChild),g)}catch(g){return null}}}class vn{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const g=this.inertDocument.createElement("html");this.inertDocument.appendChild(g);const b=this.inertDocument.createElement("body");g.appendChild(b)}}getInertBodyElement(u){const g=this.inertDocument.createElement("template");if("content"in g)return g.innerHTML=Qa(u),g;const b=this.inertDocument.createElement("body");return b.innerHTML=Qa(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(b),b}stripCustomNsAttrs(u){const g=u.attributes;for(let S=g.length-1;0<S;S--){const V=g.item(S).name;("xmlns:ns1"===V||0===V.indexOf("ns1:"))&&u.removeAttribute(V)}let b=u.firstChild;for(;b;)b.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(b),b=b.nextSibling}}const fo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ws=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Is(c){return(c=String(c)).match(fo)||c.match(ws)?c:"unsafe:"+c}function As(c){const u={};for(const g of c.split(","))u[g]=!0;return u}function Yo(...c){const u={};for(const g of c)for(const b in g)g.hasOwnProperty(b)&&(u[b]=!0);return u}const hr=As("area,br,col,hr,img,wbr"),ya=As("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ha=As("rp,rt"),yu=Yo(hr,Yo(ya,As("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yo(Ha,As("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yo(Ha,ya)),Pu=As("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cu=As("srcset"),Fu=Yo(Pu,Cu,As("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),As("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wc=As("script,style,template");class Bu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let g=u.firstChild,b=!0;for(;g;)if(g.nodeType===Node.ELEMENT_NODE?b=this.startElement(g):g.nodeType===Node.TEXT_NODE?this.chars(g.nodeValue):this.sanitizedSomething=!0,b&&g.firstChild)g=g.firstChild;else for(;g;){g.nodeType===Node.ELEMENT_NODE&&this.endElement(g);let S=this.checkClobberedElement(g,g.nextSibling);if(S){g=S;break}g=this.checkClobberedElement(g,g.parentNode)}return this.buf.join("")}startElement(u){const g=u.nodeName.toLowerCase();if(!yu.hasOwnProperty(g))return this.sanitizedSomething=!0,!Wc.hasOwnProperty(g);this.buf.push("<"),this.buf.push(g);const b=u.attributes;for(let S=0;S<b.length;S++){const k=b.item(S),V=k.name,$=V.toLowerCase();if(!Fu.hasOwnProperty($)){this.sanitizedSomething=!0;continue}let ne=k.value;Pu[$]&&(ne=Is(ne)),Cu[$]&&(c=ne,ne=(c=String(c)).split(",").map(u=>Is(u.trim())).join(", ")),this.buf.push(" ",V,'="',Eu(ne),'"')}var c;return this.buf.push(">"),!0}endElement(u){const g=u.nodeName.toLowerCase();yu.hasOwnProperty(g)&&!hr.hasOwnProperty(g)&&(this.buf.push("</"),this.buf.push(g),this.buf.push(">"))}chars(u){this.buf.push(Eu(u))}checkClobberedElement(u,g){if(g&&(u.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return g}}const El=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xd=/([^\#-~ |!])/g;function Eu(c){return c.replace(/&/g,"&amp;").replace(El,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(xd,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zc;function Kl(c,u){let g=null;try{zc=zc||function(c){const u=new vn(c);return function(){try{return!!(new window.DOMParser).parseFromString(Qa(""),"text/html")}catch(c){return!1}}()?new Rn(u):u}(c);let b=u?String(u):"";g=zc.getInertBodyElement(b);let S=5,k=b;do{if(0===S)throw new Error("Failed to sanitize html because the input is unstable");S--,b=k,k=g.innerHTML,g=zc.getInertBodyElement(b)}while(b!==k);return Qa((new Bu).sanitizeChildren(jc(g)||g))}finally{if(g){const b=jc(g)||g;for(;b.firstChild;)b.removeChild(b.firstChild)}}}function jc(c){return"content"in c&&function(c){return c.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===c.nodeName}(c)?c.content:null}var Ro=(()=>((Ro=Ro||{})[Ro.NONE=0]="NONE",Ro[Ro.HTML=1]="HTML",Ro[Ro.STYLE=2]="STYLE",Ro[Ro.SCRIPT=3]="SCRIPT",Ro[Ro.URL=4]="URL",Ro[Ro.RESOURCE_URL=5]="RESOURCE_URL",Ro))();function hc(c){const u=function(){const c=fe();return c&&c[12]}();return u?u.sanitize(Ro.URL,c)||"":nt(c,"URL")?xe(c):Is(lt(c))}const Vu="__ngContext__";function Er(c,u){c[Vu]=u}function Uu(c){const u=function(c){return c[Vu]||null}(c);return u?Array.isArray(u)?u:u.lView:null}function Wu(c){return c.ngOriginalError}function Bd(c,...u){c.error(...u)}class Zl{constructor(){this._console=console}handleError(u){const g=this._findOriginalError(u),b=(c=u)&&c.ngErrorLogger||Bd;var c;b(this._console,"ERROR",u),g&&b(this._console,"ORIGINAL ERROR",g)}_findOriginalError(u){let g=u&&Wu(u);for(;g&&Wu(g);)g=Wu(g);return g||null}}const pc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vi))();function w(c){return c instanceof Function?c():c}var oe=(()=>((oe=oe||{})[oe.Important=1]="Important",oe[oe.DashCase=2]="DashCase",oe))();function Ee(c,u){return undefined(c,u)}function Yt(c){const u=c[3];return Hs(u)?u[3]:u}function Ei(c){return Gi(c[13])}function Ii(c){return Gi(c[4])}function Gi(c){for(;null!==c&&!Hs(c);)c=c[4];return c}function Pi(c,u,g,b,S){if(null!=b){let k,V=!1;Hs(b)?k=b:Bs(b)&&(V=!0,b=b[0]);const $=ce(b);0===c&&null!==g?null==S?io(u,g,$):Ks(u,g,$,S||null,!0):1===c&&null!==g?Ks(u,g,$,S||null,!0):2===c?function(c,u,g){const b=xa(c,u);b&&function(c,u,g,b){gs(c)?c.removeChild(u,g,b):u.removeChild(g)}(c,b,u,g)}(u,$,V):3===c&&u.destroyNode($),null!=k&&function(c,u,g,b,S){const k=g[7];k!==ce(g)&&Pi(u,c,b,k,S);for(let $=10;$<g.length;$++){const ne=g[$];Ru(ne[1],ne,c,u,b,k)}}(u,c,k,g,S)}}function Qn(c,u,g){return gs(c)?c.createElement(u,g):null===g?c.createElement(u):c.createElementNS(g,u)}function jr(c,u){const g=c[9],b=g.indexOf(u),S=u[3];1024&u[2]&&(u[2]&=-1025,ho(S,-1)),g.splice(b,1)}function ar(c,u){if(c.length<=10)return;const g=10+u,b=c[g];if(b){const S=b[17];null!==S&&S!==c&&jr(S,b),u>0&&(c[g-1][4]=b[4]);const k=va(c,10+u);!function(c,u){Ru(c,u,u[11],2,null,null),u[0]=null,u[6]=null}(b[1],b);const V=k[19];null!==V&&V.detachView(k[1]),b[3]=null,b[4]=null,b[2]&=-129}return b}function Ko(c,u){if(!(256&u[2])){const g=u[11];gs(g)&&g.destroyNode&&Ru(c,u,g,3,null,null),function(c){let u=c[13];if(!u)return Fo(c[1],c);for(;u;){let g=null;if(Bs(u))g=u[13];else{const b=u[10];b&&(g=b)}if(!g){for(;u&&!u[4]&&u!==c;)Bs(u)&&Fo(u[1],u),u=u[3];null===u&&(u=c),Bs(u)&&Fo(u[1],u),g=u&&u[4]}u=g}}(u)}}function Fo(c,u){if(!(256&u[2])){u[2]&=-129,u[2]|=256,function(c,u){let g;if(null!=c&&null!=(g=c.destroyHooks))for(let b=0;b<g.length;b+=2){const S=u[g[b]];if(!(S instanceof So)){const k=g[b+1];if(Array.isArray(k))for(let V=0;V<k.length;V+=2){const $=S[k[V]],ne=k[V+1];try{ne.call($)}finally{}}else try{k.call(S)}finally{}}}}(c,u),function(c,u){const g=c.cleanup,b=u[7];let S=-1;if(null!==g)for(let k=0;k<g.length-1;k+=2)if("string"==typeof g[k]){const V=g[k+1],$="function"==typeof V?V(u):ce(u[V]),ne=b[S=g[k+2]],ye=g[k+3];"boolean"==typeof ye?$.removeEventListener(g[k],ne,ye):ye>=0?b[S=ye]():b[S=-ye].unsubscribe(),k+=2}else{const V=b[S=g[k+1]];g[k].call(V)}if(null!==b){for(let k=S+1;k<b.length;k++)b[k]();u[7]=null}}(c,u),1===u[1].type&&gs(u[11])&&u[11].destroy();const g=u[17];if(null!==g&&Hs(u[3])){g!==u[3]&&jr(g,u);const b=u[19];null!==b&&b.detachView(c)}}}function Sl(c,u,g){return function(c,u,g){let b=u;for(;null!==b&&40&b.type;)b=(u=b).parent;if(null===b)return g[0];if(2&b.flags){const S=c.data[b.directiveStart].encapsulation;if(S===si.None||S===si.Emulated)return null}return le(b,g)}(c,u.parent,g)}function Ks(c,u,g,b,S){gs(c)?c.insertBefore(u,g,b,S):u.insertBefore(g,b,S)}function io(c,u,g){gs(c)?c.appendChild(u,g):u.appendChild(g)}function Io(c,u,g,b,S){null!==b?Ks(c,u,g,b,S):io(c,u,g)}function xa(c,u){return gs(c)?c.parentNode(u):u.parentNode}function Ga(c,u,g){return Ql(c,u,g)}let Ql=function(c,u,g){return 40&c.type?le(c,g):null};function tu(c,u,g,b){const S=Sl(c,b,u),k=u[11],$=Ga(b.parent||u[6],b,u);if(null!=S)if(Array.isArray(g))for(let ne=0;ne<g.length;ne++)Io(k,S,g[ne],$,!1);else Io(k,S,g,$,!1)}function Mu(c,u){if(null!==u){const g=u.type;if(3&g)return le(u,c);if(4&g)return Hd(-1,c[u.index]);if(8&g){const b=u.child;if(null!==b)return Mu(c,b);{const S=c[u.index];return Hs(S)?Hd(-1,S):ce(S)}}if(32&g)return Ee(u,c)()||ce(c[u.index]);{const b=rh(c,u);return null!==b?Array.isArray(b)?b[0]:Mu(Yt(c[16]),b):Mu(c,u.next)}}return null}function rh(c,u){return null!==u?c[16][6].projection[u.projection]:null}function Hd(c,u){const g=10+c+1;if(g<u.length){const b=u[g],S=b[1].firstChild;if(null!==S)return Mu(b,S)}return u[7]}function ud(c,u,g,b,S,k,V){for(;null!=g;){const $=b[g.index],ne=g.type;if(V&&0===u&&($&&Er(ce($),b),g.flags|=4),64!=(64&g.flags))if(8&ne)ud(c,u,g.child,b,S,k,!1),Pi(u,c,S,$,k);else if(32&ne){const ye=Ee(g,b);let He;for(;He=ye();)Pi(u,c,S,He,k);Pi(u,c,S,$,k)}else 16&ne?iu(c,u,b,g,S,k):Pi(u,c,S,$,k);g=V?g.projectionNext:g.next}}function Ru(c,u,g,b,S,k){ud(g,b,c.firstChild,u,S,k,!1)}function iu(c,u,g,b,S,k){const V=g[16],ne=V[6].projection[b.projection];if(Array.isArray(ne))for(let ye=0;ye<ne.length;ye++)Pi(u,c,S,ne[ye],k);else ud(c,u,ne,V[3],S,k,!0)}function Fe(c,u,g){gs(c)?c.setAttribute(u,"style",g):u.style.cssText=g}function Yu(c,u,g){gs(c)?""===g?c.removeAttribute(u,"class"):c.setAttribute(u,"class",g):u.className=g}function Vd(c,u,g){let b=c.length;for(;;){const S=c.indexOf(u,g);if(-1===S)return S;if(0===S||c.charCodeAt(S-1)<=32){const k=u.length;if(S+k===b||c.charCodeAt(S+k)<=32)return S}g=S+1}}const Ud="ng-template";function Lh(c,u,g){let b=0;for(;b<c.length;){let S=c[b++];if(g&&"class"===S){if(S=c[b],-1!==Vd(S.toLowerCase(),u,0))return!0}else if(1===S){for(;b<c.length&&"string"==typeof(S=c[b++]);)if(S.toLowerCase()===u)return!0;return!1}}return!1}function Gd(c){return 4===c.type&&c.value!==Ud}function hd(c,u,g){return u===(4!==c.type||g?c.value:Ud)}function Wd(c,u,g){let b=4;const S=c.attrs||[],k=function(c){for(let u=0;u<c.length;u++)if(Ec(c[u]))return u;return c.length}(S);let V=!1;for(let $=0;$<u.length;$++){const ne=u[$];if("number"!=typeof ne){if(!V)if(4&b){if(b=2|1&b,""!==ne&&!hd(c,ne,g)||""===ne&&1===u.length){if(tl(b))return!1;V=!0}}else{const ye=8&b?ne:u[++$];if(8&b&&null!==c.attrs){if(!Lh(c.attrs,ye,g)){if(tl(b))return!1;V=!0}continue}const ct=_p(8&b?"class":ne,S,Gd(c),g);if(-1===ct){if(tl(b))return!1;V=!0;continue}if(""!==ye){let Pt;Pt=ct>k?"":S[ct+1].toLowerCase();const Qt=8&b?Pt:null;if(Qt&&-1!==Vd(Qt,ye,0)||2&b&&ye!==Pt){if(tl(b))return!1;V=!0}}}}else{if(!V&&!tl(b)&&!tl(ne))return!1;if(V&&tl(ne))continue;V=!1,b=ne|1&b}}return tl(b)||V}function tl(c){return 0==(1&c)}function _p(c,u,g,b){if(null===u)return-1;let S=0;if(b||!g){let k=!1;for(;S<u.length;){const V=u[S];if(V===c)return S;if(3===V||6===V)k=!0;else{if(1===V||2===V){let $=u[++S];for(;"string"==typeof $;)$=u[++S];continue}if(4===V)break;if(0===V){S+=4;continue}}S+=k?1:2}return-1}return function(c,u){let g=c.indexOf(4);if(g>-1)for(g++;g<c.length;){const b=c[g];if("number"==typeof b)return-1;if(b===u)return g;g++}return-1}(u,c)}function ch(c,u,g=!1){for(let b=0;b<u.length;b++)if(Wd(c,u[b],g))return!0;return!1}function yp(c,u){e:for(let g=0;g<u.length;g++){const b=u[g];if(c.length===b.length){for(let S=0;S<c.length;S++)if(c[S]!==b[S])continue e;return!0}}return!1}function Nh(c,u){return c?":not("+u.trim()+")":u}function Cp(c){let u=c[0],g=1,b=2,S="",k=!1;for(;g<c.length;){let V=c[g];if("string"==typeof V)if(2&b){const $=c[++g];S+="["+V+($.length>0?'="'+$+'"':"")+"]"}else 8&b?S+="."+V:4&b&&(S+=" "+V);else""!==S&&!tl(V)&&(u+=Nh(k,S),S=""),b=V,k=k||!tl(b);g++}return""!==S&&(u+=Nh(k,S)),u}const ns={};function Ku(c){Fh(N(),fe(),us()+c,nn())}function Fh(c,u,g,b){if(!b)if(3==(3&u[2])){const k=c.preOrderCheckHooks;null!==k&&or(u,k,g)}else{const k=c.preOrderHooks;null!==k&&Mr(u,k,0,g)}wo(g)}function zd(c,u){return c<<17|u<<2}function ec(c){return c>>17&32767}function il(c){return 2|c}function mc(c){return(131068&c)>>2}function jd(c,u){return-131069&c|u<<2}function Yd(c){return 1|c}function Wh(c,u){const g=c.contentQueries;if(null!==g)for(let b=0;b<g.length;b+=2){const S=g[b],k=g[b+1];if(-1!==k){const V=c.data[k];zo(S),V.contentQueries(2,u[k],k)}}}function Zd(c,u,g,b,S,k,V,$,ne,ye){const He=u.blueprint.slice();return He[0]=S,He[2]=140|b,zn(He),He[3]=He[15]=c,He[8]=g,He[10]=V||c&&c[10],He[11]=$||c&&c[11],He[12]=ne||c&&c[12]||null,He[9]=ye||c&&c[9]||null,He[6]=k,He[16]=2==u.type?c[16]:He,He}function Cd(c,u,g,b,S){let k=c.data[u];if(null===k)k=function(c,u,g,b,S){const k=Me(),V=It(),ne=c.data[u]=function(c,u,g,b,S,k){return{type:g,index:b,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:S,attrs:k,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,V?k:k&&k.parent,g,u,b,S);return null===c.firstChild&&(c.firstChild=ne),null!==k&&(V?null==k.child&&null!==ne.parent&&(k.child=ne):null===k.next&&(k.next=ne)),ne}(c,u,g,b,S),_n.lFrame.inI18n&&(k.flags|=64);else if(64&k.type){k.type=g,k.value=b,k.attrs=S;const V=function(){const c=_n.lFrame,u=c.currentTNode;return c.isParent?u:u.parent}();k.injectorIndex=null===V?-1:V.injectorIndex}return Ct(k,!0),k}function Ed(c,u,g,b){if(0===g)return-1;const S=u.length;for(let k=0;k<g;k++)u.push(b),c.blueprint.push(b),c.data.push(null);return S}function qd(c,u,g){ea(u);try{const b=c.viewQuery;null!==b&&Zh(1,b,g);const S=c.template;null!==S&&wp(c,u,S,1,g),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&Wh(c,u),c.staticViewQueries&&Zh(2,c.viewQuery,g);const k=c.components;null!==k&&function(c,u){for(let g=0;g<u.length;g++)Jf(c,u[g])}(u,k)}catch(b){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),b}finally{u[2]&=-5,an()}}function Td(c,u,g,b){const S=u[2];if(256==(256&S))return;ea(u);const k=nn();try{zn(u),function(c){_n.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==g&&wp(c,u,g,2,b);const V=3==(3&S);if(!k)if(V){const ye=c.preOrderCheckHooks;null!==ye&&or(u,ye,null)}else{const ye=c.preOrderHooks;null!==ye&&Mr(u,ye,0,null),Lr(u,0)}if(function(c){for(let u=Ei(c);null!==u;u=Ii(u)){if(!u[2])continue;const g=u[9];for(let b=0;b<g.length;b++){const S=g[b],k=S[3];0==(1024&S[2])&&ho(k,1),S[2]|=1024}}}(u),function(c){for(let u=Ei(c);null!==u;u=Ii(u))for(let g=10;g<u.length;g++){const b=u[g],S=b[1];cs(b)&&Td(S,b,S.template,b[8])}}(u),null!==c.contentQueries&&Wh(c,u),!k)if(V){const ye=c.contentCheckHooks;null!==ye&&or(u,ye)}else{const ye=c.contentHooks;null!==ye&&Mr(u,ye,1),Lr(u,1)}!function(c,u){const g=c.hostBindingOpCodes;if(null!==g)try{for(let b=0;b<g.length;b++){const S=g[b];if(S<0)wo(~S);else{const k=S,V=g[++b],$=g[++b];oo(V,k),$(2,u[k])}}}finally{wo(-1)}}(c,u);const $=c.components;null!==$&&function(c,u){for(let g=0;g<u.length;g++)$f(c,u[g])}(u,$);const ne=c.viewQuery;if(null!==ne&&Zh(2,ne,b),!k)if(V){const ye=c.viewCheckHooks;null!==ye&&or(u,ye)}else{const ye=c.viewHooks;null!==ye&&Mr(u,ye,2),Lr(u,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),k||(u[2]&=-73),1024&u[2]&&(u[2]&=-1025,ho(u[3],-1))}finally{an()}}function Af(c,u,g,b){const S=u[10],k=!nn(),V=es(u);try{k&&!V&&S.begin&&S.begin(),V&&qd(c,u,b),Td(c,u,g,b)}finally{k&&!V&&S.end&&S.end()}}function wp(c,u,g,b,S){const k=us(),V=2&b;try{wo(-1),V&&u.length>20&&Fh(c,u,20,nn()),g(b,S)}finally{wo(k)}}function Sp(c,u,g){if(pr(u)){const S=u.directiveEnd;for(let k=u.directiveStart;k<S;k++){const V=c.data[k];V.contentQueries&&V.contentQueries(1,g[k],k)}}}function jh(c,u,g){!er()||(function(c,u,g,b){const S=g.directiveStart,k=g.directiveEnd;c.firstCreatePass||j(g,u),Er(b,u);const V=g.initialInputs;for(let $=S;$<k;$++){const ne=c.data[$],ye=Rs(ne);ye&&zf(u,g,ne);const He=ur(u,c,$,g);Er(He,u),null!==V&&jf(0,$-S,He,ne,0,V),ye&&(Dn(g.index,u)[8]=He)}}(c,u,g,le(g,u)),128==(128&g.flags)&&function(c,u,g){const b=g.directiveStart,S=g.directiveEnd,V=g.index,$=_n.lFrame.currentDirectiveIndex;try{wo(V);for(let ne=b;ne<S;ne++){const ye=c.data[ne],He=u[ne];ir(ne),(null!==ye.hostBindings||0!==ye.hostVars||null!==ye.hostAttrs)&&Op(ye,He)}}finally{wo(-1),ir($)}}(c,u,g))}function gh(c,u,g=le){const b=u.localNames;if(null!==b){let S=u.index+1;for(let k=0;k<b.length;k+=2){const V=b[k+1],$=-1===V?g(u,c):c[V];c[S++]=$}}}function mh(c){const u=c.tView;return null===u||u.incompleteFirstPass?c.tView=_h(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):u}function _h(c,u,g,b,S,k,V,$,ne,ye){const He=20+b,ct=He+S,Pt=function(c,u){const g=[];for(let b=0;b<u;b++)g.push(b<c?null:ns);return g}(He,ct),Qt="function"==typeof ye?ye():ye;return Pt[1]={type:c,blueprint:Pt,template:g,queries:null,viewQuery:$,declTNode:u,data:Pt.slice().fill(null,He),bindingStartIndex:He,expandoStartIndex:ct,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof k?k():k,pipeRegistry:"function"==typeof V?V():V,firstChild:null,schemas:ne,consts:Qt,incompleteFirstPass:!1}}function Rp(c,u,g,b){const S=Hp(u);null===g?S.push(b):(S.push(g),c.firstCreatePass&&Vp(c).push(b,S.length-1))}function xp(c,u,g){for(let b in c)if(c.hasOwnProperty(b)){const S=c[b];(g=null===g?{}:g).hasOwnProperty(b)?g[b].push(u,S):g[b]=[u,S]}return g}function Ml(c,u,g,b,S,k,V,$){const ne=le(u,g);let He,ye=u.inputs;!$&&null!=ye&&(He=ye[b])?(Gp(c,g,He,b,S),Vn(u)&&function(c,u){const g=Dn(u,c);16&g[2]||(g[2]|=64)}(g,u.index)):3&u.type&&(b=function(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(b),S=null!=V?V(S,u.value||"",b):S,gs(k)?k.setProperty(ne,b,S):cl(b)||(ne.setProperty?ne.setProperty(b,S):ne[b]=S))}function Yh(c,u,g,b){let S=!1;if(er()){const k=function(c,u,g){const b=c.directiveRegistry;let S=null;if(b)for(let k=0;k<b.length;k++){const V=b[k];ch(g,V.selectors,!1)&&(S||(S=[]),ft(j(g,u),c,V.type),Rs(V)?(Lp(c,g),S.unshift(V)):S.push(V))}return S}(c,u,g),V=null===b?null:{"":-1};if(null!==k){S=!0,$u(g,c.data.length,k.length);for(let He=0;He<k.length;He++){const ct=k[He];ct.providersResolver&&ct.providersResolver(ct)}let $=!1,ne=!1,ye=Ed(c,u,k.length,null);for(let He=0;He<k.length;He++){const ct=k[He];g.mergedAttrs=Rr(g.mergedAttrs,ct.hostAttrs),Pp(c,g,u,ye,ct),Wf(ye,ct,V),null!==ct.contentQueries&&(g.flags|=8),(null!==ct.hostBindings||null!==ct.hostAttrs||0!==ct.hostVars)&&(g.flags|=128);const Pt=ct.type.prototype;!$&&(Pt.ngOnChanges||Pt.ngOnInit||Pt.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(g.index),$=!0),!ne&&(Pt.ngOnChanges||Pt.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(g.index),ne=!0),ye++}!function(c,u){const b=u.directiveEnd,S=c.data,k=u.attrs,V=[];let $=null,ne=null;for(let ye=u.directiveStart;ye<b;ye++){const He=S[ye],ct=He.inputs,Pt=null===k||Gd(u)?null:Yf(ct,k);V.push(Pt),$=xp(ct,ye,$),ne=xp(He.outputs,ye,ne)}null!==$&&($.hasOwnProperty("class")&&(u.flags|=16),$.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=V,u.inputs=$,u.outputs=ne}(c,g)}V&&function(c,u,g){if(u){const b=c.localNames=[];for(let S=0;S<u.length;S+=2){const k=g[u[S+1]];if(null==k)throw new Je("301",`Export of name '${u[S+1]}' not found!`);b.push(u[S],k)}}}(g,b,V)}return g.mergedAttrs=Rr(g.mergedAttrs,g.attrs),S}function Ap(c,u,g,b,S,k){const V=k.hostBindings;if(V){let $=c.hostBindingOpCodes;null===$&&($=c.hostBindingOpCodes=[]);const ne=~u.index;(function(c){let u=c.length;for(;u>0;){const g=c[--u];if("number"==typeof g&&g<0)return g}return 0})($)!=ne&&$.push(ne),$.push(b,S,V)}}function Op(c,u){null!==c.hostBindings&&c.hostBindings(1,u)}function Lp(c,u){u.flags|=2,(c.components||(c.components=[])).push(u.index)}function Wf(c,u,g){if(g){if(u.exportAs)for(let b=0;b<u.exportAs.length;b++)g[u.exportAs[b]]=c;Rs(u)&&(g[""]=c)}}function $u(c,u,g){c.flags|=1,c.directiveStart=u,c.directiveEnd=u+g,c.providerIndexes=u}function Pp(c,u,g,b,S){c.data[b]=S;const k=S.factory||(S.factory=Zo(S.type)),V=new So(k,Rs(S),null);c.blueprint[b]=V,g[b]=V,Ap(c,u,0,b,Ed(c,g,S.hostVars,ns),S)}function zf(c,u,g){const b=le(u,c),S=mh(g),k=c[10],V=vh(c,Zd(c,S,null,g.onPush?64:16,b,u,k,k.createRenderer(b,g),null,null));c[u.index]=V}function kc(c,u,g,b,S,k){const V=le(c,u);!function(c,u,g,b,S,k,V){if(null==k)gs(c)?c.removeAttribute(u,S,g):u.removeAttribute(S);else{const $=null==V?lt(k):V(k,b||"",S);gs(c)?c.setAttribute(u,S,$,g):g?u.setAttributeNS(g,S,$):u.setAttribute(S,$)}}(u[11],V,k,c.value,g,b,S)}function jf(c,u,g,b,S,k){const V=k[u];if(null!==V){const $=b.setInput;for(let ne=0;ne<V.length;){const ye=V[ne++],He=V[ne++],ct=V[ne++];null!==$?b.setInput(g,ct,ye,He):g[He]=ct}}}function Yf(c,u){let g=null,b=0;for(;b<u.length;){const S=u[b];if(0!==S)if(5!==S){if("number"==typeof S)break;c.hasOwnProperty(S)&&(null===g&&(g=[]),g.push(S,c[S],u[b+1])),b+=2}else b+=2;else b+=4}return g}function Np(c,u,g,b){return new Array(c,!0,!1,u,null,0,b,g,null,null)}function $f(c,u){const g=Dn(u,c);if(cs(g)){const b=g[1];80&g[2]?Td(b,g,b.template,g[8]):g[5]>0&&wd(g)}}function wd(c){for(let b=Ei(c);null!==b;b=Ii(b))for(let S=10;S<b.length;S++){const k=b[S];if(1024&k[2]){const V=k[1];Td(V,k,V.template,k[8])}else k[5]>0&&wd(k)}const g=c[1].components;if(null!==g)for(let b=0;b<g.length;b++){const S=Dn(g[b],c);cs(S)&&S[5]>0&&wd(S)}}function Jf(c,u){const g=Dn(u,c),b=g[1];(function(c,u){for(let g=u.length;g<c.blueprint.length;g++)u.push(c.blueprint[g])})(b,g),qd(b,g,g[8])}function vh(c,u){return c[13]?c[14][4]=u:c[13]=u,c[14]=u,u}function Kh(c){for(;c;){c[2]|=64;const u=Yt(c);if($o(c)&&!u)return c;c=u}return null}function Jh(c,u,g){const b=u[10];b.begin&&b.begin();try{Td(c,u,c.template,g)}catch(S){throw Up(u,S),S}finally{b.end&&b.end()}}function Fp(c){!function(c){for(let u=0;u<c.components.length;u++){const g=c.components[u],b=Uu(g),S=b[1];Af(S,b,S.template,g)}}(c[8])}function Zh(c,u,g){zo(0),u(c,g)}const Bp=(()=>Promise.resolve(null))();function Hp(c){return c[7]||(c[7]=[])}function Vp(c){return c.cleanup||(c.cleanup=[])}function bh(c,u,g){return(null===c||Rs(c))&&(g=function(c){for(;Array.isArray(c);){if("object"==typeof c[1])return c;c=c[0]}return null}(g[u.index])),g[11]}function Up(c,u){const g=c[9],b=g?g.get(Zl,null):null;b&&b.handleError(u)}function Gp(c,u,g,b,S){for(let k=0;k<g.length;){const V=g[k++],$=g[k++],ne=u[V],ye=c.data[V];null!==ye.setInput?ye.setInput(ne,S,b,$):ne[$]=S}}function ou(c,u,g){const b=F(u,c);!function(c,u,g){gs(c)?c.setValue(u,g):u.textContent=g}(c[11],b,g)}function yh(c,u,g){let b=g?c.styles:null,S=g?c.classes:null,k=0;if(null!==u)for(let V=0;V<u.length;V++){const $=u[V];"number"==typeof $?k=$:1==k?S=I(S,$):2==k&&(b=I(b,$+": "+u[++V]+";"))}g?c.styles=b:c.stylesWithoutHost=b,g?c.classes=S:c.classesWithoutHost=S}const qh=new eo("INJECTOR",-1);class Wp{get(u,g=yr){if(g===yr){const b=new Error(`NullInjectorError: No provider for ${E(u)}!`);throw b.name="NullInjectorError",b}return g}}const zp=new eo("Set Injector scope."),Qd={},ng={};let Ch;function eh(){return void 0===Ch&&(Ch=new Wp),Ch}function jp(c,u=null,g=null,b){const S=Yp(c,u,g,b);return S._resolveInjectorDefTypes(),S}function Yp(c,u=null,g=null,b){return new sg(c,g,u||eh(),b)}class sg{constructor(u,g,b,S=null){this.parent=b,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const k=[];g&&Ws(g,$=>this.processProvider($,u,g)),Ws([u],$=>this.processInjectorType($,[],k)),this.records.set(qh,Sd(void 0,this));const V=this.records.get(zp);this.scope=null!=V?V.value:null,this.source=S||("object"==typeof u?null:E(u))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(u=>u.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(u,g=yr,b=We.Default){this.assertNotDestroyed();const S=ml(this),k=Ye(void 0);try{if(!(b&We.SkipSelf)){let $=this.records.get(u);if(void 0===$){const ne=("function"==typeof(c=u)||"object"==typeof c&&c instanceof eo)&&vt(u);$=ne&&this.injectableDefInScope(ne)?Sd(Qh(u),Qd):null,this.records.set(u,$)}if(null!=$)return this.hydrate(u,$)}return(b&We.Self?eh():this.parent).get(u,g=b&We.Optional&&g===yr?null:g)}catch(V){if("NullInjectorError"===V.name){if((V[Dc]=V[Dc]||[]).unshift(E(u)),S)throw V;return function(c,u,g,b){const S=c[Dc];throw u[fu]&&S.unshift(u[fu]),c.message=function(c,u,g,b=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.substr(2):c;let S=E(u);if(Array.isArray(u))S=u.map(E).join(" -> ");else if("object"==typeof u){let k=[];for(let V in u)if(u.hasOwnProperty(V)){let $=u[V];k.push(V+":"+("string"==typeof $?JSON.stringify($):E($)))}S=`{${k.join(", ")}}`}return`${g}${b?"("+b+")":""}[${S}]: ${c.replace(ku,"\n  ")}`}("\n"+c.message,S,g,b),c.ngTokenPath=S,c[Dc]=null,c}(V,u,"R3InjectorError",this.source)}throw V}finally{Ye(k),ml(S)}var c}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(u=>this.get(u))}toString(){const u=[];return this.records.forEach((b,S)=>u.push(E(S))),`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(u,g,b){if(!(u=_e(u)))return!1;let S=Te(u);const k=null==S&&u.ngModule||void 0,V=void 0===k?u:k,$=-1!==b.indexOf(V);if(void 0!==k&&(S=Te(k)),null==S)return!1;if(null!=S.imports&&!$){let He;b.push(V);try{Ws(S.imports,ct=>{this.processInjectorType(ct,g,b)&&(void 0===He&&(He=[]),He.push(ct))})}finally{}if(void 0!==He)for(let ct=0;ct<He.length;ct++){const{ngModule:Pt,providers:Qt}=He[ct];Ws(Qt,wi=>this.processProvider(wi,Pt,Qt||fn))}}this.injectorDefTypes.add(V);const ne=Zo(V)||(()=>new V);this.records.set(V,Sd(ne,Qd));const ye=S.providers;if(null!=ye&&!$){const He=u;Ws(ye,ct=>this.processProvider(ct,He,ye))}return void 0!==k&&void 0!==u.providers}processProvider(u,g,b){let S=Dd(u=_e(u))?u:_e(u&&u.provide);const k=(c=u,Kp(c)?Sd(void 0,c.useValue):Sd(Xp(c),Qd));var c;if(Dd(u)||!0!==u.multi)this.records.get(S);else{let V=this.records.get(S);V||(V=Sd(void 0,Qd,!0),V.factory=()=>vl(V.multi),this.records.set(S,V)),S=u,V.multi.push(u)}this.records.set(S,k)}hydrate(u,g){return g.value===Qd&&(g.value=ng,g.value=g.factory()),"object"==typeof g.value&&g.value&&null!==(c=g.value)&&"object"==typeof c&&"function"==typeof c.ngOnDestroy&&this.onDestroy.add(g.value),g.value;var c}injectableDefInScope(u){if(!u.providedIn)return!1;const g=_e(u.providedIn);return"string"==typeof g?"any"===g||g===this.scope:this.injectorDefTypes.has(g)}}function Qh(c){const u=vt(c),g=null!==u?u.factory:Zo(c);if(null!==g)return g;if(c instanceof eo)throw new Error(`Token ${E(c)} is missing a \u0275prov definition.`);if(c instanceof Function)return function(c){const u=c.length;if(u>0){const b=hl(u,"?");throw new Error(`Can't resolve all parameters for ${E(c)}: (${b.join(", ")}).`)}const g=function(c){const u=c&&(c[xt]||c[Ft]);if(u){const g=function(c){if(c.hasOwnProperty("name"))return c.name;const u=(""+c).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${g}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${g}" class.`),u}return null}(c);return null!==g?()=>g.factory(c):()=>new c}(c);throw new Error("unreachable")}function Xp(c,u,g){let b;if(Dd(c)){const S=_e(c);return Zo(S)||Qh(S)}if(Kp(c))b=()=>_e(c.useValue);else if(function(c){return!(!c||!c.useFactory)}(c))b=()=>c.useFactory(...vl(c.deps||[]));else if(function(c){return!(!c||!c.useExisting)}(c))b=()=>Mo(_e(c.useExisting));else{const S=_e(c&&(c.useClass||c.provide));if(!function(c){return!!c.deps}(c))return Zo(S)||Qh(S);b=()=>new S(...vl(c.deps))}return b}function Sd(c,u,g=!1){return{factory:c,value:u,multi:g?[]:void 0}}function Kp(c){return null!==c&&"object"==typeof c&&Vl in c}function Dd(c){return"function"==typeof c}let tc=(()=>{class c{static create(g,b){var S;if(Array.isArray(g))return jp({name:""},b,g,"");{const k=null!==(S=g.name)&&void 0!==S?S:"";return jp({name:k},g.parent,g.providers,k)}}}return c.THROW_IF_NOT_FOUND=yr,c.NULL=new Wp,c.\u0275prov=Lt({token:c,providedIn:"any",factory:()=>Mo(qh)}),c.__NG_ELEMENT_ID__=-1,c})();function vg(c,u){Ho(Uu(c)[1],Q())}function ip(c){let u=function(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),g=!0;const b=[c];for(;u;){let S;if(Rs(c))S=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Error("Directives cannot inherit Components");S=u.\u0275dir}if(S){if(g){b.push(S);const V=c;V.inputs=r(c.inputs),V.declaredInputs=r(c.declaredInputs),V.outputs=r(c.outputs);const $=S.hostBindings;$&&l(c,$);const ne=S.viewQuery,ye=S.contentQueries;if(ne&&s(c,ne),ye&&o(c,ye),f(c.inputs,S.inputs),f(c.declaredInputs,S.declaredInputs),f(c.outputs,S.outputs),Rs(S)&&S.data.animation){const He=c.data;He.animation=(He.animation||[]).concat(S.data.animation)}}const k=S.features;if(k)for(let V=0;V<k.length;V++){const $=k[V];$&&$.ngInherit&&$(c),$===ip&&(g=!1)}}u=Object.getPrototypeOf(u)}!function(c){let u=0,g=null;for(let b=c.length-1;b>=0;b--){const S=c[b];S.hostVars=u+=S.hostVars,S.hostAttrs=Rr(S.hostAttrs,g=Rr(g,S.hostAttrs))}}(b)}function r(c){return c===Mi?{}:c===fn?[]:c}function s(c,u){const g=c.viewQuery;c.viewQuery=g?(b,S)=>{u(b,S),g(b,S)}:u}function o(c,u){const g=c.contentQueries;c.contentQueries=g?(b,S,k)=>{u(b,S,k),g(b,S,k)}:u}function l(c,u){const g=c.hostBindings;c.hostBindings=g?(b,S)=>{u(b,S),g(b,S)}:u}let D=null;function L(){if(!D){const c=Vi.Symbol;if(c&&c.iterator)D=c.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let g=0;g<u.length;++g){const b=u[g];"entries"!==b&&"size"!==b&&Map.prototype[b]===Map.prototype.entries&&(D=b)}}}return D}function Z(c){return!!Ze(c)&&(Array.isArray(c)||!(c instanceof Map)&&L()in c)}function Ze(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function ot(c,u,g){return c[u]=g}function bt(c,u,g){return!Object.is(c[u],g)&&(c[u]=g,!0)}function ei(c,u,g,b){const S=bt(c,u,g);return bt(c,u+1,b)||S}function Ci(c,u,g,b){const S=fe();return bt(S,kn(),u)&&(N(),kc(ds(),S,c,u,g,b)),Ci}function Ui(c,u,g,b){return bt(c,kn(),g)?u+lt(g)+b:ns}function cn(c,u,g,b,S,k,V,$){const ye=function(c,u,g,b,S){const k=ei(c,u,g,b);return bt(c,u+2,S)||k}(c,hn(),g,S,V);return rs(3),ye?u+lt(g)+b+lt(S)+k+lt(V)+$:ns}function ru(c,u,g,b,S,k,V,$){const ne=fe(),ye=N(),He=c+20,ct=ye.firstCreatePass?function(c,u,g,b,S,k,V,$,ne){const ye=u.consts,He=Cd(u,c,4,V||null,Ds(ye,$));Yh(u,g,He,Ds(ye,ne)),Ho(u,He);const ct=He.tViews=_h(2,He,b,S,k,u.directiveRegistry,u.pipeRegistry,null,u.schemas,ye);return null!==u.queries&&(u.queries.template(u,He),ct.queries=u.queries.embeddedTView(He)),He}(He,ye,ne,u,g,b,S,k,V):ye.data[He];Ct(ct,!1);const Pt=ne[11].createComment("");tu(ye,ne,Pt,ct),Er(Pt,ne),vh(ne,ne[He]=Np(Pt,ne,Pt,ct)),To(ct)&&jh(ye,ne,ct),null!=V&&gh(ne,ct,$)}function th(c){return Fi(_n.lFrame.contextLView,20+c)}function np(c,u=We.Default){const g=fe();return null===g?Mo(c,u):qn(Q(),g,_e(c),u)}function n_(){throw new Error("invalid")}function wg(c,u,g){const b=fe();return bt(b,kn(),u)&&Ml(N(),ds(),b,c,u,b[11],g,!1),wg}function Sg(c,u,g,b,S){const V=S?"class":"style";Gp(c,g,u.inputs[V],V,b)}function Dg(c,u,g,b){const S=fe(),k=N(),V=20+c,$=S[11],ne=S[V]=Qn($,u,_n.lFrame.currentNamespace),ye=k.firstCreatePass?function(c,u,g,b,S,k,V){const $=u.consts,ye=Cd(u,c,2,S,Ds($,k));return Yh(u,g,ye,Ds($,V)),null!==ye.attrs&&yh(ye,ye.attrs,!1),null!==ye.mergedAttrs&&yh(ye,ye.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,ye),ye}(V,k,S,0,u,g,b):k.data[V];Ct(ye,!0);const He=ye.mergedAttrs;null!==He&&ma($,ne,He);const ct=ye.classes;null!==ct&&Yu($,ne,ct);const Pt=ye.styles;null!==Pt&&Fe($,ne,Pt),64!=(64&ye.flags)&&tu(k,S,ne,ye),0===_n.lFrame.elementDepthCount&&Er(ne,S),_n.lFrame.elementDepthCount++,To(ye)&&(jh(k,S,ye),Sp(k,ye,S)),null!==b&&gh(S,ye)}function Mg(){let c=Q();It()?Zt():(c=c.parent,Ct(c,!1));const u=c;_n.lFrame.elementDepthCount--;const g=N();g.firstCreatePass&&(Ho(g,c),pr(c)&&g.queries.elementEnd(c)),null!=u.classesWithoutHost&&function(c){return 0!=(16&c.flags)}(u)&&Sg(g,u,fe(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function(c){return 0!=(32&c.flags)}(u)&&Sg(g,u,fe(),u.stylesWithoutHost,!1)}function s_(c,u,g,b){Dg(c,u,g,b),Mg()}function Rg(c,u,g){const b=fe(),S=N(),k=c+20,V=S.firstCreatePass?function(c,u,g,b,S){const k=u.consts,V=Ds(k,b),$=Cd(u,c,8,"ng-container",V);return null!==V&&yh($,V,!0),Yh(u,g,$,Ds(k,S)),null!==u.queries&&u.queries.elementStart(u,$),$}(k,S,b,u,g):S.data[k];Ct(V,!0);const $=b[k]=b[11].createComment("");tu(S,b,$,V),Er($,b),To(V)&&(jh(S,b,V),Sp(S,V,b)),null!=g&&gh(b,V)}function xg(){let c=Q();const u=N();It()?Zt():(c=c.parent,Ct(c,!1)),u.firstCreatePass&&(Ho(u,c),pr(c)&&u.queries.elementEnd(c))}function o_(c,u,g){Rg(c,u,g),xg()}function r_(){return fe()}function Ig(c){return!!c&&"function"==typeof c.then}function a_(c){return!!c&&"function"==typeof c.subscribe}const l_=a_;function Ag(c,u,g,b){const S=fe(),k=N(),V=Q();return c_(k,S,S[11],V,c,u,!!g,b),Ag}function Og(c,u){const g=Q(),b=fe(),S=N();return c_(S,b,bh(Zs(S.data),g,b),g,c,u,!1),Og}function c_(c,u,g,b,S,k,V,$){const ne=To(b),He=c.firstCreatePass&&Vp(c),ct=u[8],Pt=Hp(u);let Qt=!0;if(3&b.type||$){const rn=le(b,u),Mn=$?$(rn):rn,Oi=Pt.length,Kn=$?Fs=>$(ce(Fs[b.index])):b.index;if(gs(g)){let Fs=null;if(!$&&ne&&(Fs=function(c,u,g,b){const S=c.cleanup;if(null!=S)for(let k=0;k<S.length-1;k+=2){const V=S[k];if(V===g&&S[k+1]===b){const $=u[7],ne=S[k+2];return $.length>ne?$[ne]:null}"string"==typeof V&&(k+=2)}return null}(c,u,S,b.index)),null!==Fs)(Fs.__ngLastListenerFn__||Fs).__ngNextListenerFn__=k,Fs.__ngLastListenerFn__=k,Qt=!1;else{k=kg(b,u,ct,k,!1);const yo=g.listen(Mn,S,k);Pt.push(k,yo),He&&He.push(S,Kn,Oi,Oi+1)}}else k=kg(b,u,ct,k,!0),Mn.addEventListener(S,k,V),Pt.push(k),He&&He.push(S,Kn,Oi,V)}else k=kg(b,u,ct,k,!1);const wi=b.outputs;let ji;if(Qt&&null!==wi&&(ji=wi[S])){const rn=ji.length;if(rn)for(let Mn=0;Mn<rn;Mn+=2){const Cc=u[ji[Mn]][ji[Mn+1]].subscribe(k),sh=Pt.length;Pt.push(k,Cc),He&&He.push(S,b.index,sh,-(sh+1))}}}function u_(c,u,g,b){try{return!1!==g(b)}catch(S){return Up(c,S),!1}}function kg(c,u,g,b,S){return function k(V){if(V===Function)return b;const $=2&c.flags?Dn(c.index,u):u;0==(32&u[2])&&Kh($);let ne=u_(u,0,b,V),ye=k.__ngNextListenerFn__;for(;ye;)ne=u_(u,0,ye,V)&&ne,ye=ye.__ngNextListenerFn__;return S&&!1===ne&&(V.preventDefault(),V.returnValue=!1),ne}}function d_(c=1){return function(c){return(_n.lFrame.contextLView=function(c,u){for(;c>0;)u=u[15],c--;return u}(c,_n.lFrame.contextLView))[8]}(c)}function vy(c,u){let g=null;const b=function(c){const u=c.attrs;if(null!=u){const g=u.indexOf(5);if(0==(1&g))return u[g+1]}return null}(c);for(let S=0;S<u.length;S++){const k=u[S];if("*"!==k){if(null===b?ch(c,k,!0):yp(b,k))return S}else g=S}return g}function h_(c){const u=fe()[16][6];if(!u.projection){const b=u.projection=hl(c?c.length:1,null),S=b.slice();let k=u.child;for(;null!==k;){const V=c?vy(k,c):0;null!==V&&(S[V]?S[V].projectionNext=k:b[V]=k,S[V]=k),k=k.next}}}function p_(c,u=0,g){const b=fe(),S=N(),k=Cd(S,20+c,16,null,g||null);null===k.projection&&(k.projection=u),Zt(),64!=(64&k.flags)&&function(c,u,g){iu(u[11],0,u,g,Sl(c,g,u),Ga(g.parent||u[6],g,u))}(S,b,k)}function Lg(c,u,g){return Pg(c,"",u,"",g),Lg}function Pg(c,u,g,b,S){const k=fe(),V=Ui(k,u,g,b);return V!==ns&&Ml(N(),ds(),k,c,V,k[11],S,!1),Pg}function E_(c,u,g,b,S){const k=c[g+1],V=null===u;let $=b?ec(k):mc(k),ne=!1;for(;0!==$&&(!1===ne||V);){const He=c[$+1];Cy(c[$],u)&&(ne=!0,c[$+1]=b?Yd(He):il(He)),$=b?ec(He):mc(He)}ne&&(c[g+1]=b?il(k):Yd(k))}function Cy(c,u){return null===c||null==u||(Array.isArray(c)?c[1]:c)===u||!(!Array.isArray(c)||"string"!=typeof u)&&Nl(c,u)>=0}const Ea={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function T_(c){return c.substring(Ea.key,Ea.keyEnd)}function w_(c,u){const g=Ea.textEnd;return g===u?-1:(u=Ea.keyEnd=function(c,u,g){for(;u<g&&c.charCodeAt(u)>32;)u++;return u}(c,Ea.key=u,g),Sh(c,u,g))}function Sh(c,u,g){for(;u<g&&c.charCodeAt(u)<=32;)u++;return u}function Ng(c,u,g){return au(c,u,g,!1),Ng}function Fg(c,u){return au(c,u,null,!0),Fg}function Iu(c,u){for(let g=function(c){return function(c){Ea.key=0,Ea.keyEnd=0,Ea.value=0,Ea.valueEnd=0,Ea.textEnd=c.length}(c),w_(c,Sh(c,0,Ea.textEnd))}(u);g>=0;g=w_(u,g))Vr(c,T_(u),!0)}function au(c,u,g,b){const S=fe(),k=N(),V=rs(2);k.firstUpdatePass&&I_(k,c,V,b),u!==ns&&bt(S,V,u)&&O_(k,k.data[us()],S,S[11],c,S[V+1]=function(c,u){return null==c||("string"==typeof u?c+=u:"object"==typeof c&&(c=E(xe(c)))),c}(u,g),b,V)}function x_(c,u){return u>=c.expandoStartIndex}function I_(c,u,g,b){const S=c.data;if(null===S[g+1]){const k=S[us()],V=x_(c,g);L_(k,b)&&null===u&&!V&&(u=!1),u=function(c,u,g,b){const S=Zs(c);let k=b?u.residualClasses:u.residualStyles;if(null===S)0===(b?u.classBindings:u.styleBindings)&&(g=sp(g=Bg(null,c,u,g,b),u.attrs,b),k=null);else{const V=u.directiveStylingLast;if(-1===V||c[V]!==S)if(g=Bg(S,c,u,g,b),null===k){let ne=function(c,u,g){const b=g?u.classBindings:u.styleBindings;if(0!==mc(b))return c[ec(b)]}(c,u,b);void 0!==ne&&Array.isArray(ne)&&(ne=Bg(null,c,u,ne[1],b),ne=sp(ne,u.attrs,b),function(c,u,g,b){c[ec(g?u.classBindings:u.styleBindings)]=b}(c,u,b,ne))}else k=function(c,u,g){let b;const S=u.directiveEnd;for(let k=1+u.directiveStylingLast;k<S;k++)b=sp(b,c[k].hostAttrs,g);return sp(b,u.attrs,g)}(c,u,b)}return void 0!==k&&(b?u.residualClasses=k:u.residualStyles=k),g}(S,k,u,b),function(c,u,g,b,S,k){let V=k?u.classBindings:u.styleBindings,$=ec(V),ne=mc(V);c[b]=g;let He,ye=!1;if(Array.isArray(g)){const ct=g;He=ct[1],(null===He||Nl(ct,He)>0)&&(ye=!0)}else He=g;if(S)if(0!==ne){const Pt=ec(c[$+1]);c[b+1]=zd(Pt,$),0!==Pt&&(c[Pt+1]=jd(c[Pt+1],b)),c[$+1]=function(c,u){return 131071&c|u<<17}(c[$+1],b)}else c[b+1]=zd($,0),0!==$&&(c[$+1]=jd(c[$+1],b)),$=b;else c[b+1]=zd(ne,0),0===$?$=b:c[ne+1]=jd(c[ne+1],b),ne=b;ye&&(c[b+1]=il(c[b+1])),E_(c,He,b,!0),E_(c,He,b,!1),function(c,u,g,b,S){const k=S?c.residualClasses:c.residualStyles;null!=k&&"string"==typeof u&&Nl(k,u)>=0&&(g[b+1]=Yd(g[b+1]))}(u,He,c,b,k),V=zd($,ne),k?u.classBindings=V:u.styleBindings=V}(S,k,u,g,V,b)}}function Bg(c,u,g,b,S){let k=null;const V=g.directiveEnd;let $=g.directiveStylingLast;for(-1===$?$=g.directiveStart:$++;$<V&&(k=u[$],b=sp(b,k.hostAttrs,S),k!==c);)$++;return null!==c&&(g.directiveStylingLast=$),b}function sp(c,u,g){const b=g?1:2;let S=-1;if(null!==u)for(let k=0;k<u.length;k++){const V=u[k];"number"==typeof V?S=V:S===b&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),Vr(c,V,!!g||u[++k]))}return void 0===c?null:c}function O_(c,u,g,b,S,k,V,$){if(!(3&u.type))return;const ne=c.data,ye=ne[$+1];lf(function(c){return 1==(1&c)}(ye)?k_(ne,u,g,S,mc(ye),V):void 0)||(lf(k)||function(c){return 2==(2&c)}(ye)&&(k=k_(ne,null,g,S,$,V)),function(c,u,g,b,S){const k=gs(c);if(u)S?k?c.addClass(g,b):g.classList.add(b):k?c.removeClass(g,b):g.classList.remove(b);else{let V=-1===b.indexOf("-")?void 0:oe.DashCase;if(null==S)k?c.removeStyle(g,b,V):g.style.removeProperty(b);else{const $="string"==typeof S&&S.endsWith("!important");$&&(S=S.slice(0,-10),V|=oe.Important),k?c.setStyle(g,b,S,V):g.style.setProperty(b,S,$?"important":"")}}}(b,V,F(us(),g),S,k))}function k_(c,u,g,b,S,k){const V=null===u;let $;for(;S>0;){const ne=c[S],ye=Array.isArray(ne),He=ye?ne[1]:ne,ct=null===He;let Pt=g[S+1];Pt===ns&&(Pt=ct?fn:void 0);let Qt=ct?pl(Pt,b):He===b?Pt:void 0;if(ye&&!lf(Qt)&&(Qt=pl(ne,b)),lf(Qt)&&($=Qt,V))return $;const wi=c[S+1];S=V?ec(wi):mc(wi)}if(null!==u){let ne=k?u.residualClasses:u.residualStyles;null!=ne&&($=pl(ne,b))}return $}function lf(c){return void 0!==c}function L_(c,u){return 0!=(c.flags&(u?16:32))}function P_(c,u=""){const g=fe(),b=N(),S=c+20,k=b.firstCreatePass?Cd(b,S,1,u,null):b.data[S],V=g[S]=function(c,u){return gs(c)?c.createText(u):c.createTextNode(u)}(g[11],u);tu(b,g,V,k),Ct(k,!1)}function Hg(c){return cf("",c,""),Hg}function cf(c,u,g){const b=fe(),S=Ui(b,c,u,g);return S!==ns&&ou(b,us(),S),cf}function Vg(c,u,g,b,S){const k=fe(),V=function(c,u,g,b,S,k){const $=ei(c,hn(),g,S);return rs(2),$?u+lt(g)+b+lt(S)+k:ns}(k,c,u,g,b,S);return V!==ns&&ou(k,us(),V),Vg}function Ug(c,u,g,b,S,k,V){const $=fe(),ne=cn($,c,u,g,b,S,k,V);return ne!==ns&&ou($,us(),ne),Ug}function G_(c,u,g){!function(c,u,g,b){const S=N(),k=rs(2);S.firstUpdatePass&&I_(S,null,k,b);const V=fe();if(g!==ns&&bt(V,k,g)){const $=S.data[us()];if(L_($,b)&&!x_(S,k)){let ne=b?$.classesWithoutHost:$.stylesWithoutHost;null!==ne&&(g=I(ne,g||"")),Sg(S,$,V,g,b)}else!function(c,u,g,b,S,k,V,$){S===ns&&(S=fn);let ne=0,ye=0,He=0<S.length?S[0]:null,ct=0<k.length?k[0]:null;for(;null!==He||null!==ct;){const Pt=ne<S.length?S[ne+1]:void 0,Qt=ye<k.length?k[ye+1]:void 0;let ji,wi=null;He===ct?(ne+=2,ye+=2,Pt!==Qt&&(wi=ct,ji=Qt)):null===ct||null!==He&&He<ct?(ne+=2,wi=He):(ye+=2,wi=ct,ji=Qt),null!==wi&&O_(c,u,g,b,wi,ji,V,$),He=ne<S.length?S[ne]:null,ct=ye<k.length?k[ye]:null}}(S,$,V,V[11],V[k+1],V[k+1]=function(c,u,g){if(null==g||""===g)return fn;const b=[],S=xe(g);if(Array.isArray(S))for(let k=0;k<S.length;k++)c(b,S[k],!0);else if("object"==typeof S)for(const k in S)S.hasOwnProperty(k)&&c(b,k,S[k]);else"string"==typeof S&&u(b,S);return b}(c,u,g),b,k)}}(Vr,Iu,Ui(fe(),c,u,g),!0)}function Gg(c,u,g){const b=fe();return bt(b,kn(),u)&&Ml(N(),ds(),b,c,u,b[11],g,!0),Gg}function Wg(c,u,g){const b=fe();if(bt(b,kn(),u)){const k=N(),V=ds();Ml(k,V,b,c,u,bh(Zs(k.data),V,b),g,!0)}return Wg}const ih=void 0;var tC=["en",[["a","p"],["AM","PM"],ih],[["AM","PM"],ih,ih],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ih,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ih,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ih,"{1} 'at' {0}",ih],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(c){const g=Math.floor(Math.abs(c)),b=c.toString().replace(/^[^.]*\.?/,"").length;return 1===g&&0===b?1:5}];let Dh={};function zg(c){const u=function(c){return c.toLowerCase().replace(/_/g,"-")}(c);let g=Q_(u);if(g)return g;const b=u.split("-")[0];if(g=Q_(b),g)return g;if("en"===b)return tC;throw new Error(`Missing locale data for the locale "${c}".`)}function q_(c){return zg(c)[ts.PluralCase]}function Q_(c){return c in Dh||(Dh[c]=Vi.ng&&Vi.ng.common&&Vi.ng.common.locales&&Vi.ng.common.locales[c]),Dh[c]}var ts=(()=>((ts=ts||{})[ts.LocaleId=0]="LocaleId",ts[ts.DayPeriodsFormat=1]="DayPeriodsFormat",ts[ts.DayPeriodsStandalone=2]="DayPeriodsStandalone",ts[ts.DaysFormat=3]="DaysFormat",ts[ts.DaysStandalone=4]="DaysStandalone",ts[ts.MonthsFormat=5]="MonthsFormat",ts[ts.MonthsStandalone=6]="MonthsStandalone",ts[ts.Eras=7]="Eras",ts[ts.FirstDayOfWeek=8]="FirstDayOfWeek",ts[ts.WeekendRange=9]="WeekendRange",ts[ts.DateFormat=10]="DateFormat",ts[ts.TimeFormat=11]="TimeFormat",ts[ts.DateTimeFormat=12]="DateTimeFormat",ts[ts.NumberSymbols=13]="NumberSymbols",ts[ts.NumberFormats=14]="NumberFormats",ts[ts.CurrencyCode=15]="CurrencyCode",ts[ts.CurrencySymbol=16]="CurrencySymbol",ts[ts.CurrencyName=17]="CurrencyName",ts[ts.Currencies=18]="Currencies",ts[ts.Directionality=19]="Directionality",ts[ts.PluralCase=20]="PluralCase",ts[ts.ExtraData=21]="ExtraData",ts))();const uf="en-US";let ev=uf;function Xg(c,u,g,b,S){if(c=_e(c),Array.isArray(c))for(let k=0;k<c.length;k++)Xg(c[k],u,g,b,S);else{const k=N(),V=fe();let $=Dd(c)?c:_e(c.provide),ne=Xp(c);const ye=Q(),He=1048575&ye.providerIndexes,ct=ye.directiveStart,Pt=ye.providerIndexes>>20;if(Dd(c)||!c.multi){const Qt=new So(ne,S,np),wi=$g($,u,S?He:He+Pt,ct);-1===wi?(ft(j(ye,V),k,$),Kg(k,c,u.length),u.push($),ye.directiveStart++,ye.directiveEnd++,S&&(ye.providerIndexes+=1048576),g.push(Qt),V.push(Qt)):(g[wi]=Qt,V[wi]=Qt)}else{const Qt=$g($,u,He+Pt,ct),wi=$g($,u,He,He+Pt),ji=Qt>=0&&g[Qt],rn=wi>=0&&g[wi];if(S&&!rn||!S&&!ji){ft(j(ye,V),k,$);const Mn=function(c,u,g,b,S){const k=new So(c,g,np);return k.multi=[],k.index=u,k.componentProviders=0,wv(k,S,b&&!g),k}(S?QC:qC,g.length,S,b,ne);!S&&rn&&(g[wi].providerFactory=Mn),Kg(k,c,u.length,0),u.push($),ye.directiveStart++,ye.directiveEnd++,S&&(ye.providerIndexes+=1048576),g.push(Mn),V.push(Mn)}else Kg(k,c,Qt>-1?Qt:wi,wv(g[S?wi:Qt],ne,!S&&b));!S&&b&&rn&&g[wi].componentProviders++}}}function Kg(c,u,g,b){const S=Dd(u),k=function(c){return!!c.useClass}(u);if(S||k){const ne=(k?_e(u.useClass):u).prototype.ngOnDestroy;if(ne){const ye=c.destroyHooks||(c.destroyHooks=[]);if(!S&&u.multi){const He=ye.indexOf(g);-1===He?ye.push(g,[b,ne]):ye[He+1].push(b,ne)}else ye.push(g,ne)}}}function wv(c,u,g){return g&&c.componentProviders++,c.multi.push(u)-1}function $g(c,u,g,b){for(let S=g;S<b;S++)if(u[S]===c)return S;return-1}function qC(c,u,g,b){return Jg(this.multi,[])}function QC(c,u,g,b){const S=this.multi;let k;if(this.providerFactory){const V=this.providerFactory.componentProviders,$=ur(g,g[1],this.providerFactory.index,b);k=$.slice(0,V),Jg(S,k);for(let ne=V;ne<$.length;ne++)k.push($[ne])}else k=[],Jg(S,k);return k}function Jg(c,u){for(let g=0;g<c.length;g++)u.push((0,c[g])());return u}function Sv(c,u=[]){return g=>{g.providersResolver=(b,S)=>function(c,u,g){const b=N();if(b.firstCreatePass){const S=Rs(c);Xg(g,b.data,b.blueprint,S,!0),Xg(u,b.data,b.blueprint,S,!1)}}(b,S?S(c):c,u)}}class Dv{}class nE{resolveComponentFactory(u){throw function(c){const u=Error(`No component factory found for ${E(c)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=c,u}(u)}}let cp=(()=>{class c{}return c.NULL=new nE,c})();function sE(){return Rh(Q(),fe())}function Rh(c,u){return new up(le(c,u))}let up=(()=>{class c{constructor(g){this.nativeElement=g}}return c.__NG_ELEMENT_ID__=sE,c})();function oE(c){return c instanceof up?c.nativeElement:c}class Rv{}let rE=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function(){const c=fe(),g=Dn(Q().index,c);return function(c){return c[11]}(Bs(g)?g:c)}(),c})(),cE=(()=>{class c{}return c.\u0275prov=Lt({token:c,providedIn:"root",factory:()=>null}),c})();class xv{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const uE=new xv("13.1.1"),Zg={};function gf(c,u,g,b,S=!1){for(;null!==g;){const k=u[g.index];if(null!==k&&b.push(ce(k)),Hs(k))for(let $=10;$<k.length;$++){const ne=k[$],ye=ne[1].firstChild;null!==ye&&gf(ne[1],ne,ye,b)}const V=g.type;if(8&V)gf(c,u,g.child,b);else if(32&V){const $=Ee(g,u);let ne;for(;ne=$();)b.push(ne)}else if(16&V){const $=rh(u,g);if(Array.isArray($))b.push(...$);else{const ne=Yt(u[16]);gf(ne[1],ne,$,b,!0)}}g=S?g.projectionNext:g.next}return b}class dp{constructor(u,g){this._lView=u,this._cdRefInjectingView=g,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,g=u[1];return gf(g,u,g.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(Hs(u)){const g=u[8],b=g?g.indexOf(this):-1;b>-1&&(ar(u,b),va(g,b))}this._attachedToViewContainer=!1}Ko(this._lView[1],this._lView)}onDestroy(u){Rp(this._lView[1],this._lView,null,u)}markForCheck(){Kh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Jh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(c,u,g){Nn(!0);try{Jh(c,u,g)}finally{Nn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var u;this._appRef=null,Ru(this._lView[1],u=this._lView,u[11],2,null,null)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=u}}class dE extends dp{constructor(u){super(u),this._view=u}detectChanges(){Fp(this._view)}checkNoChanges(){!function(c){Nn(!0);try{Fp(c)}finally{Nn(!1)}}(this._view)}get context(){return null}}class Iv extends cp{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const g=ui(u);return new qg(g,this.ngModule)}}function Av(c){const u=[];for(let g in c)c.hasOwnProperty(g)&&u.push({propName:c[g],templateName:g});return u}const pE=new eo("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pc});class qg extends Dv{constructor(u,g){super(),this.componentDef=u,this.ngModule=g,this.componentType=u.type,this.selector=u.selectors.map(Cp).join(","),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!g}get inputs(){return Av(this.componentDef.inputs)}get outputs(){return Av(this.componentDef.outputs)}create(u,g,b,S){const k=(S=S||this.ngModule)?function(c,u){return{get:(g,b,S)=>{const k=c.get(g,Zg,S);return k!==Zg||b===Zg?k:u.get(g,b,S)}}}(u,S.injector):u,V=k.get(Rv,Sr),$=k.get(cE,null),ne=V.createRenderer(null,this.componentDef),ye=this.componentDef.selectors[0][0]||"div",He=b?function(c,u,g){if(gs(c))return c.selectRootElement(u,g===si.ShadowDom);let b="string"==typeof u?c.querySelector(u):u;return b.textContent="",b}(ne,b,this.componentDef.encapsulation):Qn(V.createRenderer(null,this.componentDef),ye,function(c){const u=c.toLowerCase();return"svg"===u?mr:"math"===u?"http://www.w3.org/1998/MathML/":null}(ye)),ct=this.componentDef.onPush?576:528,Pt=function(c,u){return{components:[],scheduler:c||pc,clean:Bp,playerHandler:u||null,flags:0}}(),Qt=_h(0,null,null,1,0,null,null,null,null,null),wi=Zd(null,Qt,Pt,ct,null,null,V,ne,$,k);let ji,rn;ea(wi);try{const Mn=function(c,u,g,b,S,k){const V=g[1];g[20]=c;const ne=Cd(V,20,2,"#host",null),ye=ne.mergedAttrs=u.hostAttrs;null!==ye&&(yh(ne,ye,!0),null!==c&&(ma(S,c,ye),null!==ne.classes&&Yu(S,c,ne.classes),null!==ne.styles&&Fe(S,c,ne.styles)));const He=b.createRenderer(c,u),ct=Zd(g,mh(u),null,u.onPush?64:16,g[20],ne,b,He,k||null,null);return V.firstCreatePass&&(ft(j(ne,g),V,u.type),Lp(V,ne),$u(ne,g.length,1)),vh(g,ct),g[20]=ct}(He,this.componentDef,wi,V,ne);if(He)if(b)ma(ne,He,["ng-version",uE.full]);else{const{attrs:Oi,classes:Kn}=function(c){const u=[],g=[];let b=1,S=2;for(;b<c.length;){let k=c[b];if("string"==typeof k)2===S?""!==k&&u.push(k,c[++b]):8===S&&g.push(k);else{if(!tl(S))break;S=k}b++}return{attrs:u,classes:g}}(this.componentDef.selectors[0]);Oi&&ma(ne,He,Oi),Kn&&Kn.length>0&&Yu(ne,He,Kn.join(" "))}if(rn=Jt(Qt,20),void 0!==g){const Oi=rn.projection=[];for(let Kn=0;Kn<this.ngContentSelectors.length;Kn++){const Fs=g[Kn];Oi.push(null!=Fs?Array.from(Fs):null)}}ji=function(c,u,g,b,S){const k=g[1],V=function(c,u,g){const b=Q();c.firstCreatePass&&(g.providersResolver&&g.providersResolver(g),Pp(c,b,u,Ed(c,u,1,null),g));const S=ur(u,c,b.directiveStart,b);Er(S,u);const k=le(b,u);return k&&Er(k,u),S}(k,g,u);if(b.components.push(V),c[8]=V,S&&S.forEach(ne=>ne(V,u)),u.contentQueries){const ne=Q();u.contentQueries(1,V,ne.directiveStart)}const $=Q();return!k.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||(wo($.index),Ap(g[1],$,0,$.directiveStart,$.directiveEnd,u),Op(u,V)),V}(Mn,this.componentDef,wi,Pt,[vg]),qd(Qt,wi,null)}finally{an()}return new mE(this.componentType,ji,Rh(rn,wi),wi,rn)}}class mE extends class{}{constructor(u,g,b,S,k){super(),this.location=b,this._rootLView=S,this._tNode=k,this.instance=g,this.hostView=this.changeDetectorRef=new dE(S),this.componentType=u}get injector(){return new rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}class xh{}class Ov{}const Ih=new Map;class Pv extends xh{constructor(u,g){super(),this._parent=g,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Iv(this);const b=jn(u);this._bootstrapComponents=w(b.bootstrap),this._r3Injector=Yp(u,g,[{provide:xh,useValue:this},{provide:cp,useValue:this.componentFactoryResolver}],E(u)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(u)}get(u,g=tc.THROW_IF_NOT_FOUND,b=We.Default){return u===tc||u===xh||u===qh?this:this._r3Injector.get(u,g,b)}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(g=>g()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class Qg extends Ov{constructor(u){super(),this.moduleType=u,null!==jn(u)&&function(c){const u=new Set;!function g(b){const S=jn(b,!0),k=S.id;null!==k&&(function(c,u,g){if(u&&u!==g)throw new Error(`Duplicate module registered for ${c} - ${E(u)} vs ${E(u.name)}`)}(k,Ih.get(k),b),Ih.set(k,b));const V=w(S.imports);for(const $ of V)u.has($)||(u.add($),g($))}(c)}(u)}create(u){return new Pv(this.moduleType,u)}}function Nv(c,u,g){const b=An()+c,S=fe();return S[b]===ns?ot(S,b,g?u.call(g):u()):function(c,u){return c[u]}(S,b)}function Fv(c,u,g,b){return Hv(fe(),An(),c,u,g,b)}function Bv(c,u,g,b,S){return function(c,u,g,b,S,k,V){const $=u+g;return ei(c,$,S,k)?ot(c,$+2,V?b.call(V,S,k):b(S,k)):hp(c,$+2)}(fe(),An(),c,u,g,b,S)}function hp(c,u){const g=c[u];return g===ns?void 0:g}function Hv(c,u,g,b,S,k){const V=u+g;return bt(c,V,S)?ot(c,V+1,k?b.call(k,S):b(S)):hp(c,V+1)}function zv(c,u){const g=N();let b;const S=c+20;g.firstCreatePass?(b=function(c,u){if(u)for(let g=u.length-1;g>=0;g--){const b=u[g];if(c===b.name)return b}}(u,g.pipeRegistry),g.data[S]=b,b.onDestroy&&(g.destroyHooks||(g.destroyHooks=[])).push(S,b.onDestroy)):b=g.data[S];const k=b.factory||(b.factory=Zo(b.type)),V=Ye(np);try{const $=Al(!1),ne=k();return Al($),function(c,u,g,b){g>=c.data.length&&(c.data[g]=null,c.blueprint[g]=null),u[g]=b}(g,fe(),S,ne),ne}finally{Ye(V)}}function jv(c,u,g){const b=c+20,S=fe(),k=Fi(S,b);return function(c,u){return c[1].data[u].pure}(S,b)?Hv(S,An(),u,k.transform,g,k):k.transform(g)}function em(c){return u=>{setTimeout(c,void 0,u)}}const Au=class extends O.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,g,b){var S,k,V;let $=u,ne=g||(()=>null),ye=b;if(u&&"object"==typeof u){const ct=u;$=null===(S=ct.next)||void 0===S?void 0:S.bind(ct),ne=null===(k=ct.error)||void 0===k?void 0:k.bind(ct),ye=null===(V=ct.complete)||void 0===V?void 0:V.bind(ct)}this.__isAsync&&(ne=em(ne),$&&($=em($)),ye&&(ye=em(ye)));const He=super.subscribe({next:$,error:ne,complete:ye});return u instanceof y.w0&&u.add(He),He}};function OE(){return this._results[L()]()}class mf{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const g=L(),b=mf.prototype;b[g]||(b[g]=OE)}get changes(){return this._changes||(this._changes=new Au)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,g){return this._results.reduce(u,g)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,g){const b=this;b.dirty=!1;const S=Ir(u);(this._changesDetected=!function(c,u,g){if(c.length!==u.length)return!1;for(let b=0;b<c.length;b++){let S=c[b],k=u[b];if(g&&(S=g(S),k=g(k)),k!==S)return!1}return!0}(b._results,S,g))&&(b._results=S,b.length=S.length,b.last=S[this.length-1],b.first=S[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let fp=(()=>{class c{}return c.__NG_ELEMENT_ID__=PE,c})();const kE=fp,LE=class extends kE{constructor(u,g,b){super(),this._declarationLView=u,this._declarationTContainer=g,this.elementRef=b}createEmbeddedView(u){const g=this._declarationTContainer.tViews,b=Zd(this._declarationLView,g,u,16,null,g.declTNode,null,null,null,null);b[17]=this._declarationLView[this._declarationTContainer.index];const k=this._declarationLView[19];return null!==k&&(b[19]=k.createEmbeddedView(g)),qd(g,b,u),new dp(b)}};function PE(){return _f(Q(),fe())}function _f(c,u){return 4&c.type?new LE(u,c,Rh(c,u)):null}let vf=(()=>{class c{}return c.__NG_ELEMENT_ID__=NE,c})();function NE(){return Kv(Q(),fe())}const FE=vf,Yv=class extends FE{constructor(u,g,b){super(),this._lContainer=u,this._hostTNode=g,this._hostLView=b}get element(){return Rh(this._hostTNode,this._hostLView)}get injector(){return new rr(this._hostTNode,this._hostLView)}get parentInjector(){const u=je(this._hostTNode,this._hostLView);if(Pa(u)){const g=sa(u,this._hostLView),b=na(u);return new rr(g[1].data[b+8],g)}return new rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const g=Xv(this._lContainer);return null!==g&&g[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,g,b){const S=u.createEmbeddedView(g||{});return this.insert(S,b),S}createComponent(u,g,b,S,k){const V=u&&!("function"==typeof u);let $;if(V)$=g;else{const ct=g||{};$=ct.index,b=ct.injector,S=ct.projectableNodes,k=ct.ngModuleRef}const ne=V?u:new qg(ui(u)),ye=b||this.parentInjector;if(!k&&null==ne.ngModule&&ye){const ct=ye.get(xh,null);ct&&(k=ct)}const He=ne.create(ye,S,void 0,k);return this.insert(He.hostView,$),He}insert(u,g){const b=u._lView,S=b[1];if(Hs(b[3])){const He=this.indexOf(u);if(-1!==He)this.detach(He);else{const ct=b[3],Pt=new Yv(ct,ct[6],ct[3]);Pt.detach(Pt.indexOf(u))}}const k=this._adjustIndex(g),V=this._lContainer;!function(c,u,g,b){const S=10+b,k=g.length;b>0&&(g[S-1][4]=u),b<k-10?(u[4]=g[S],Fr(g,10+b,u)):(g.push(u),u[4]=null),u[3]=g;const V=u[17];null!==V&&g!==V&&function(c,u){const g=c[9];u[16]!==u[3][3][16]&&(c[2]=!0),null===g?c[9]=[u]:g.push(u)}(V,u);const $=u[19];null!==$&&$.insertView(c),u[2]|=128}(S,b,V,k);const $=Hd(k,V),ne=b[11],ye=xa(ne,V[7]);return null!==ye&&function(c,u,g,b,S,k){b[0]=S,b[6]=u,Ru(c,b,g,1,S,k)}(S,V[6],ne,b,ye,$),u.attachToViewContainerRef(),Fr(tm(V),k,u),u}move(u,g){return this.insert(u,g)}indexOf(u){const g=Xv(this._lContainer);return null!==g?g.indexOf(u):-1}remove(u){const g=this._adjustIndex(u,-1),b=ar(this._lContainer,g);b&&(va(tm(this._lContainer),g),Ko(b[1],b))}detach(u){const g=this._adjustIndex(u,-1),b=ar(this._lContainer,g);return b&&null!=va(tm(this._lContainer),g)?new dp(b):null}_adjustIndex(u,g=0){return null==u?this.length+g:u}};function Xv(c){return c[8]}function tm(c){return c[8]||(c[8]=[])}function Kv(c,u){let g;const b=u[c.index];if(Hs(b))g=b;else{let S;if(8&c.type)S=ce(b);else{const k=u[11];S=k.createComment("");const V=le(c,u);Ks(k,xa(k,V),S,function(c,u){return gs(c)?c.nextSibling(u):u.nextSibling}(k,V),!1)}u[c.index]=g=Np(b,u,S,c),vh(u,g)}return new Yv(g,c,u)}class im{constructor(u){this.queryList=u,this.matches=null}clone(){return new im(this.queryList)}setDirty(){this.queryList.setDirty()}}class nm{constructor(u=[]){this.queries=u}createEmbeddedView(u){const g=u.queries;if(null!==g){const b=null!==u.contentQueries?u.contentQueries[0]:g.length,S=[];for(let k=0;k<b;k++){const V=g.getByIndex(k);S.push(this.queries[V.indexInDeclarationView].clone())}return new nm(S)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let g=0;g<this.queries.length;g++)null!==nb(u,g).matches&&this.queries[g].setDirty()}}class $v{constructor(u,g,b=null){this.predicate=u,this.flags=g,this.read=b}}class sm{constructor(u=[]){this.queries=u}elementStart(u,g){for(let b=0;b<this.queries.length;b++)this.queries[b].elementStart(u,g)}elementEnd(u){for(let g=0;g<this.queries.length;g++)this.queries[g].elementEnd(u)}embeddedTView(u){let g=null;for(let b=0;b<this.length;b++){const S=null!==g?g.length:0,k=this.getByIndex(b).embeddedTView(u,S);k&&(k.indexInDeclarationView=b,null!==g?g.push(k):g=[k])}return null!==g?new sm(g):null}template(u,g){for(let b=0;b<this.queries.length;b++)this.queries[b].template(u,g)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class om{constructor(u,g=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=g}elementStart(u,g){this.isApplyingToNode(g)&&this.matchTNode(u,g)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,g){this.elementStart(u,g)}embeddedTView(u,g){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,g),new om(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const g=this._declarationNodeIndex;let b=u.parent;for(;null!==b&&8&b.type&&b.index!==g;)b=b.parent;return g===(null!==b?b.index:-1)}return this._appliesToNextNode}matchTNode(u,g){const b=this.metadata.predicate;if(Array.isArray(b))for(let S=0;S<b.length;S++){const k=b[S];this.matchTNodeWithReadOption(u,g,VE(g,k)),this.matchTNodeWithReadOption(u,g,Sa(g,u,k,!1,!1))}else b===fp?4&g.type&&this.matchTNodeWithReadOption(u,g,-1):this.matchTNodeWithReadOption(u,g,Sa(g,u,b,!1,!1))}matchTNodeWithReadOption(u,g,b){if(null!==b){const S=this.metadata.read;if(null!==S)if(S===up||S===vf||S===fp&&4&g.type)this.addMatch(g.index,-2);else{const k=Sa(g,u,S,!1,!1);null!==k&&this.addMatch(g.index,k)}else this.addMatch(g.index,b)}}addMatch(u,g){null===this.matches?this.matches=[u,g]:this.matches.push(u,g)}}function VE(c,u){const g=c.localNames;if(null!==g)for(let b=0;b<g.length;b+=2)if(g[b]===u)return g[b+1];return null}function GE(c,u,g,b){return-1===g?function(c,u){return 11&c.type?Rh(c,u):4&c.type?_f(c,u):null}(u,c):-2===g?function(c,u,g){return g===up?Rh(u,c):g===fp?_f(u,c):g===vf?Kv(u,c):void 0}(c,u,b):ur(c,c[1],g,u)}function Jv(c,u,g,b){const S=u[19].queries[b];if(null===S.matches){const k=c.data,V=g.matches,$=[];for(let ne=0;ne<V.length;ne+=2){const ye=V[ne];$.push(ye<0?null:GE(u,k[ye],V[ne+1],g.metadata.read))}S.matches=$}return S.matches}function rm(c,u,g,b){const S=c.queries.getByIndex(g),k=S.matches;if(null!==k){const V=Jv(c,u,S,g);for(let $=0;$<k.length;$+=2){const ne=k[$];if(ne>0)b.push(V[$/2]);else{const ye=k[$+1],He=u[-ne];for(let ct=10;ct<He.length;ct++){const Pt=He[ct];Pt[17]===Pt[3]&&rm(Pt[1],Pt,ye,b)}if(null!==He[9]){const ct=He[9];for(let Pt=0;Pt<ct.length;Pt++){const Qt=ct[Pt];rm(Qt[1],Qt,ye,b)}}}}}return b}function Zv(c){const u=fe(),g=N(),b=vr();zo(b+1);const S=nb(g,b);if(c.dirty&&es(u)===(2==(2&S.metadata.flags))){if(null===S.matches)c.reset([]);else{const k=S.crossesNgTemplate?rm(g,u,b,[]):Jv(g,u,S,b);c.reset(k,oE),c.notifyOnChanges()}return!0}return!1}function qv(c,u,g){const b=N();b.firstCreatePass&&(ib(b,new $v(c,u,g),-1),2==(2&u)&&(b.staticViewQueries=!0)),tb(b,fe(),u)}function Qv(c,u,g,b){const S=N();if(S.firstCreatePass){const k=Q();ib(S,new $v(u,g,b),k.index),function(c,u){const g=c.contentQueries||(c.contentQueries=[]);u!==(g.length?g[g.length-1]:-1)&&g.push(c.queries.length-1,u)}(S,c),2==(2&g)&&(S.staticContentQueries=!0)}tb(S,fe(),g)}function eb(){return c=fe(),u=vr(),c[19].queries[u].queryList;var c,u}function tb(c,u,g){const b=new mf(4==(4&g));Rp(c,u,b,b.destroy),null===u[19]&&(u[19]=new nm),u[19].queries.push(new im(b))}function ib(c,u,g){null===c.queries&&(c.queries=new sm),c.queries.track(new om(u,g))}function nb(c,u){return c.queries.getByIndex(u)}function sb(c,u){return _f(c,u)}function Cf(...c){}const hm=new eo("Application Initializer");let Oh=(()=>{class c{constructor(g){this.appInits=g,this.resolve=Cf,this.reject=Cf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((b,S)=>{this.resolve=b,this.reject=S})}runInitializers(){if(this.initialized)return;const g=[],b=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let S=0;S<this.appInits.length;S++){const k=this.appInits[S]();if(Ig(k))g.push(k);else if(l_(k)){const V=new Promise(($,ne)=>{k.subscribe({complete:$,error:ne})});g.push(V)}}Promise.all(g).then(()=>{b()}).catch(S=>{this.reject(S)}),0===g.length&&b(),this.initialized=!0}}return c.\u0275fac=function(g){return new(g||c)(Mo(hm,8))},c.\u0275prov=Lt({token:c,factory:c.\u0275fac}),c})();const Cb=new eo("AppId"),cT={provide:Cb,useFactory:function(){return`${pm()}${pm()}${pm()}`},deps:[]};function pm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Eb=new eo("Platform Initializer"),Tb=new eo("Platform ID"),wb=new eo("appBootstrapListener");let Sb=(()=>{class c{log(g){console.log(g)}warn(g){console.warn(g)}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=Lt({token:c,factory:c.\u0275fac}),c})();const Ef=new eo("LocaleId"),Db=new eo("DefaultCurrencyCode");class uT{constructor(u,g){this.ngModuleFactory=u,this.componentFactories=g}}let fm=(()=>{class c{compileModuleSync(g){return new Qg(g)}compileModuleAsync(g){return Promise.resolve(this.compileModuleSync(g))}compileModuleAndAllComponentsSync(g){const b=this.compileModuleSync(g),k=w(jn(g).declarations).reduce((V,$)=>{const ne=ui($);return ne&&V.push(new qg(ne)),V},[]);return new uT(b,k)}compileModuleAndAllComponentsAsync(g){return Promise.resolve(this.compileModuleAndAllComponentsSync(g))}clearCache(){}clearCacheFor(g){}getModuleId(g){}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=Lt({token:c,factory:c.\u0275fac}),c})();const hT=(()=>Promise.resolve(0))();function gm(c){"undefined"==typeof Zone?hT.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class yc{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:g=!1,shouldCoalesceRunChangeDetection:b=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Au(!1),this.onMicrotaskEmpty=new Au(!1),this.onStable=new Au(!1),this.onError=new Au(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const S=this;S._nesting=0,S._outer=S._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(S._inner=S._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(S._inner=S._inner.fork(Zone.longStackTraceZoneSpec)),S.shouldCoalesceEventChangeDetection=!b&&g,S.shouldCoalesceRunChangeDetection=b,S.lastRequestAnimationFrameId=-1,S.nativeRequestAnimationFrame=function(){let c=Vi.requestAnimationFrame,u=Vi.cancelAnimationFrame;if("undefined"!=typeof Zone&&c&&u){const g=c[Zone.__symbol__("OriginalDelegate")];g&&(c=g);const b=u[Zone.__symbol__("OriginalDelegate")];b&&(u=b)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function(c){const u=()=>{!function(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(Vi,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,_m(c),c.isCheckStableRunning=!0,mm(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),_m(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(g,b,S,k,V,$)=>{try{return Mb(c),g.invokeTask(S,k,V,$)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===k.type||c.shouldCoalesceRunChangeDetection)&&u(),Rb(c)}},onInvoke:(g,b,S,k,V,$,ne)=>{try{return Mb(c),g.invoke(S,k,V,$,ne)}finally{c.shouldCoalesceRunChangeDetection&&u(),Rb(c)}},onHasTask:(g,b,S,k)=>{g.hasTask(S,k),b===S&&("microTask"==k.change?(c._hasPendingMicrotasks=k.microTask,_m(c),mm(c)):"macroTask"==k.change&&(c.hasPendingMacrotasks=k.macroTask))},onHandleError:(g,b,S,k)=>(g.handleError(S,k),c.runOutsideAngular(()=>c.onError.emit(k)),!1)})}(S)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(yc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(u,g,b){return this._inner.run(u,g,b)}runTask(u,g,b,S){const k=this._inner,V=k.scheduleEventTask("NgZoneEvent: "+S,u,fT,Cf,Cf);try{return k.runTask(V,g,b)}finally{k.cancelTask(V)}}runGuarded(u,g,b){return this._inner.runGuarded(u,g,b)}runOutsideAngular(u){return this._outer.run(u)}}const fT={};function mm(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function _m(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function Mb(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function Rb(c){c._nesting--,mm(c)}class _T{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Au,this.onMicrotaskEmpty=new Au,this.onStable=new Au,this.onError=new Au}run(u,g,b){return u.apply(g,b)}runGuarded(u,g,b){return u.apply(g,b)}runOutsideAngular(u){return u()}runTask(u,g,b,S){return u.apply(g,b)}}let xb=(()=>{class c{constructor(g){this._ngZone=g,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),g.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yc.assertNotInAngularZone(),gm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gm(()=>{for(;0!==this._callbacks.length;){let g=this._callbacks.pop();clearTimeout(g.timeoutId),g.doneCb(this._didWork)}this._didWork=!1});else{let g=this.getPendingTasks();this._callbacks=this._callbacks.filter(b=>!b.updateCb||!b.updateCb(g)||(clearTimeout(b.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(g=>({source:g.source,creationLocation:g.creationLocation,data:g.data})):[]}addCallback(g,b,S){let k=-1;b&&b>0&&(k=setTimeout(()=>{this._callbacks=this._callbacks.filter(V=>V.timeoutId!==k),g(this._didWork,this.getPendingTasks())},b)),this._callbacks.push({doneCb:g,timeoutId:k,updateCb:S})}whenStable(g,b,S){if(S&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,b,S),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(g,b,S){return[]}}return c.\u0275fac=function(g){return new(g||c)(Mo(yc))},c.\u0275prov=Lt({token:c,factory:c.\u0275fac}),c})(),Ib=(()=>{class c{constructor(){this._applications=new Map,vm.addToWindow(this)}registerApplication(g,b){this._applications.set(g,b)}unregisterApplication(g){this._applications.delete(g)}unregisterAllApplications(){this._applications.clear()}getTestability(g){return this._applications.get(g)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(g,b=!0){return vm.findTestabilityInTree(this,g,b)}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=Lt({token:c,factory:c.\u0275fac}),c})();class vT{addToWindow(u){}findTestabilityInTree(u,g,b){return null}}function bT(c){vm=c}let cu,vm=new vT;const Ab=new eo("AllowMultipleToken");class TT{constructor(u,g){this.name=u,this.token=g}}function Ob(c,u,g=[]){const b=`Platform: ${u}`,S=new eo(b);return(k=[])=>{let V=kb();if(!V||V.injector.get(Ab,!1))if(c)c(g.concat(k).concat({provide:S,useValue:!0}));else{const $=g.concat(k).concat({provide:S,useValue:!0},{provide:zp,useValue:"platform"});!function(c){if(cu&&!cu.destroyed&&!cu.injector.get(Ab,!1))throw new Je("400","");cu=c.get(Lb);const u=c.get(Eb,null);u&&u.forEach(g=>g())}(tc.create({providers:$,name:b}))}return function(c){const u=kb();if(!u)throw new Je("401","");return u}()}}function kb(){return cu&&!cu.destroyed?cu:null}let Lb=(()=>{class c{constructor(g){this._injector=g,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(g,b){const $=function(c,u){let g;return g="noop"===c?new _T:("zone.js"===c?void 0:c)||new yc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==u?void 0:u.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==u?void 0:u.ngZoneRunCoalescing)}),g}(b?b.ngZone:void 0,{ngZoneEventCoalescing:b&&b.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:b&&b.ngZoneRunCoalescing||!1}),ne=[{provide:yc,useValue:$}];return $.run(()=>{const ye=tc.create({providers:ne,parent:this.injector,name:g.moduleType.name}),He=g.create(ye),ct=He.injector.get(Zl,null);if(!ct)throw new Je("402","");return $.runOutsideAngular(()=>{const Pt=$.onError.subscribe({next:Qt=>{ct.handleError(Qt)}});He.onDestroy(()=>{bm(this._modules,He),Pt.unsubscribe()})}),function(c,u,g){try{const b=g();return Ig(b)?b.catch(S=>{throw u.runOutsideAngular(()=>c.handleError(S)),S}):b}catch(b){throw u.runOutsideAngular(()=>c.handleError(b)),b}}(ct,$,()=>{const Pt=He.injector.get(Oh);return Pt.runInitializers(),Pt.donePromise.then(()=>(function(c){$t(c,"Expected localeId to be defined"),"string"==typeof c&&(ev=c.toLowerCase().replace(/_/g,"-"))}(He.injector.get(Ef,uf)||uf),this._moduleDoBootstrap(He),He))})})}bootstrapModule(g,b=[]){const S=Pb({},b);return function(c,u,g){const b=new Qg(g);return Promise.resolve(b)}(0,0,g).then(k=>this.bootstrapModuleFactory(k,S))}_moduleDoBootstrap(g){const b=g.injector.get(mp);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(S=>b.bootstrap(S));else{if(!g.instance.ngDoBootstrap)throw new Je("403","");g.instance.ngDoBootstrap(b)}this._modules.push(g)}onDestroy(g){this._destroyListeners.push(g)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je("404","");this._modules.slice().forEach(g=>g.destroy()),this._destroyListeners.forEach(g=>g()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(g){return new(g||c)(Mo(tc))},c.\u0275prov=Lt({token:c,factory:c.\u0275fac}),c})();function Pb(c,u){return Array.isArray(u)?u.reduce(Pb,c):Object.assign(Object.assign({},c),u)}let mp=(()=>{class c{constructor(g,b,S,k,V){this._zone=g,this._injector=b,this._exceptionHandler=S,this._componentFactoryResolver=k,this._initStatus=V,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const $=new t.y(ye=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ye.next(this._stable),ye.complete()})}),ne=new t.y(ye=>{let He;this._zone.runOutsideAngular(()=>{He=this._zone.onStable.subscribe(()=>{yc.assertNotInAngularZone(),gm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ye.next(!0))})})});const ct=this._zone.onUnstable.subscribe(()=>{yc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ye.next(!1)}))});return()=>{He.unsubscribe(),ct.unsubscribe()}});this.isStable=(0,e.T)($,ne.pipe((0,n.B)()))}bootstrap(g,b){if(!this._initStatus.done)throw new Je("405","");let S;S=g instanceof Dv?g:this._componentFactoryResolver.resolveComponentFactory(g),this.componentTypes.push(S.componentType);const k=function(c){return c.isBoundToModule}(S)?void 0:this._injector.get(xh),$=S.create(tc.NULL,[],b||S.selector,k),ne=$.location.nativeElement,ye=$.injector.get(xb,null),He=ye&&$.injector.get(Ib);return ye&&He&&He.registerApplication(ne,ye),$.onDestroy(()=>{this.detachView($.hostView),bm(this.components,$),He&&He.unregisterApplication(ne)}),this._loadComponent($),$}tick(){if(this._runningTick)throw new Je("101","");try{this._runningTick=!0;for(let g of this._views)g.detectChanges()}catch(g){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(g))}finally{this._runningTick=!1}}attachView(g){const b=g;this._views.push(b),b.attachToAppRef(this)}detachView(g){const b=g;bm(this._views,b),b.detachFromAppRef()}_loadComponent(g){this.attachView(g.hostView),this.tick(),this.components.push(g),this._injector.get(wb,[]).concat(this._bootstrapListeners).forEach(S=>S(g))}ngOnDestroy(){this._views.slice().forEach(g=>g.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return c.\u0275fac=function(g){return new(g||c)(Mo(yc),Mo(tc),Mo(Zl),Mo(cp),Mo(Oh))},c.\u0275prov=Lt({token:c,factory:c.\u0275fac}),c})();function bm(c,u){const g=c.indexOf(u);g>-1&&c.splice(g,1)}let Fb=!0;function xT(){Fb=!1}let IT=(()=>{class c{}return c.__NG_ELEMENT_ID__=AT,c})();function AT(c){return function(c,u,g){if(Vn(c)&&!g){const b=Dn(c.index,u);return new dp(b,b)}return 47&c.type?new dp(u[16],u):null}(Q(),fe(),16==(16&c))}class zb{constructor(){}supports(u){return Z(u)}create(u){return new BT(u)}}const FT=(c,u)=>u;class BT{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||FT}forEachItem(u){let g;for(g=this._itHead;null!==g;g=g._next)u(g)}forEachOperation(u){let g=this._itHead,b=this._removalsHead,S=0,k=null;for(;g||b;){const V=!b||g&&g.currentIndex<Yb(b,S,k)?g:b,$=Yb(V,S,k),ne=V.currentIndex;if(V===b)S--,b=b._nextRemoved;else if(g=g._next,null==V.previousIndex)S++;else{k||(k=[]);const ye=$-S,He=ne-S;if(ye!=He){for(let Pt=0;Pt<ye;Pt++){const Qt=Pt<k.length?k[Pt]:k[Pt]=0,wi=Qt+Pt;He<=wi&&wi<ye&&(k[Pt]=Qt+1)}k[V.previousIndex]=He-ye}}$!==ne&&u(V,$,ne)}}forEachPreviousItem(u){let g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)u(g)}forEachAddedItem(u){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)u(g)}forEachMovedItem(u){let g;for(g=this._movesHead;null!==g;g=g._nextMoved)u(g)}forEachRemovedItem(u){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)u(g)}forEachIdentityChange(u){let g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)u(g)}diff(u){if(null==u&&(u=[]),!Z(u))throw new Error(`Error trying to diff '${E(u)}'. Only arrays and iterables are allowed`);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let S,k,V,g=this._itHead,b=!1;if(Array.isArray(u)){this.length=u.length;for(let $=0;$<this.length;$++)k=u[$],V=this._trackByFn($,k),null!==g&&Object.is(g.trackById,V)?(b&&(g=this._verifyReinsertion(g,k,V,$)),Object.is(g.item,k)||this._addIdentityChange(g,k)):(g=this._mismatch(g,k,V,$),b=!0),g=g._next}else S=0,function(c,u){if(Array.isArray(c))for(let g=0;g<c.length;g++)u(c[g]);else{const g=c[L()]();let b;for(;!(b=g.next()).done;)u(b.value)}}(u,$=>{V=this._trackByFn(S,$),null!==g&&Object.is(g.trackById,V)?(b&&(g=this._verifyReinsertion(g,$,V,S)),Object.is(g.item,$)||this._addIdentityChange(g,$)):(g=this._mismatch(g,$,V,S),b=!0),g=g._next,S++}),this.length=S;return this._truncate(g),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,g,b,S){let k;return null===u?k=this._itTail:(k=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null))?(Object.is(u.item,g)||this._addIdentityChange(u,g),this._reinsertAfter(u,k,S)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(b,S))?(Object.is(u.item,g)||this._addIdentityChange(u,g),this._moveAfter(u,k,S)):u=this._addAfter(new HT(g,b),k,S),u}_verifyReinsertion(u,g,b,S){let k=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null);return null!==k?u=this._reinsertAfter(k,u._prev,S):u.currentIndex!=S&&(u.currentIndex=S,this._addToMoves(u,S)),u}_truncate(u){for(;null!==u;){const g=u._next;this._addToRemovals(this._unlink(u)),u=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,g,b){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const S=u._prevRemoved,k=u._nextRemoved;return null===S?this._removalsHead=k:S._nextRemoved=k,null===k?this._removalsTail=S:k._prevRemoved=S,this._insertAfter(u,g,b),this._addToMoves(u,b),u}_moveAfter(u,g,b){return this._unlink(u),this._insertAfter(u,g,b),this._addToMoves(u,b),u}_addAfter(u,g,b){return this._insertAfter(u,g,b),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,g,b){const S=null===g?this._itHead:g._next;return u._next=S,u._prev=g,null===S?this._itTail=u:S._prev=u,null===g?this._itHead=u:g._next=u,null===this._linkedRecords&&(this._linkedRecords=new jb),this._linkedRecords.put(u),u.currentIndex=b,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const g=u._prev,b=u._next;return null===g?this._itHead=b:g._next=b,null===b?this._itTail=g:b._prev=g,u}_addToMoves(u,g){return u.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jb),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,g){return u.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class HT{constructor(u,g){this.item=u,this.trackById=g,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VT{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,g){let b;for(b=this._head;null!==b;b=b._nextDup)if((null===g||g<=b.currentIndex)&&Object.is(b.trackById,u))return b;return null}remove(u){const g=u._prevDup,b=u._nextDup;return null===g?this._head=b:g._nextDup=b,null===b?this._tail=g:b._prevDup=g,null===this._head}}class jb{constructor(){this.map=new Map}put(u){const g=u.trackById;let b=this.map.get(g);b||(b=new VT,this.map.set(g,b)),b.add(u)}get(u,g){const S=this.map.get(u);return S?S.get(u,g):null}remove(u){const g=u.trackById;return this.map.get(g).remove(u)&&this.map.delete(g),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yb(c,u,g){const b=c.previousIndex;if(null===b)return b;let S=0;return g&&b<g.length&&(S=g[b]),b+u+S}class Xb{constructor(){}supports(u){return u instanceof Map||Ze(u)}create(){return new UT}}class UT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let g;for(g=this._mapHead;null!==g;g=g._next)u(g)}forEachPreviousItem(u){let g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)u(g)}forEachChangedItem(u){let g;for(g=this._changesHead;null!==g;g=g._nextChanged)u(g)}forEachAddedItem(u){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)u(g)}forEachRemovedItem(u){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)u(g)}diff(u){if(u){if(!(u instanceof Map||Ze(u)))throw new Error(`Error trying to diff '${E(u)}'. Only maps and objects are allowed`)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let g=this._mapHead;if(this._appendAfter=null,this._forEach(u,(b,S)=>{if(g&&g.key===S)this._maybeAddToChanges(g,b),this._appendAfter=g,g=g._next;else{const k=this._getOrCreateRecordForKey(S,b);g=this._insertBeforeOrAppend(g,k)}}),g){g._prev&&(g._prev._next=null),this._removalsHead=g;for(let b=g;null!==b;b=b._nextRemoved)b===this._mapHead&&(this._mapHead=null),this._records.delete(b.key),b._nextRemoved=b._next,b.previousValue=b.currentValue,b.currentValue=null,b._prev=null,b._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,g){if(u){const b=u._prev;return g._next=u,g._prev=b,u._prev=g,b&&(b._next=g),u===this._mapHead&&(this._mapHead=g),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}_getOrCreateRecordForKey(u,g){if(this._records.has(u)){const S=this._records.get(u);this._maybeAddToChanges(S,g);const k=S._prev,V=S._next;return k&&(k._next=V),V&&(V._prev=k),S._next=null,S._prev=null,S}const b=new GT(u);return this._records.set(u,b),b.currentValue=g,this._addToAdditions(b),b}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,g){Object.is(g,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=g,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,g){u instanceof Map?u.forEach(g):Object.keys(u).forEach(b=>g(u[b],b))}}class GT{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kb(){return new wf([new zb])}let wf=(()=>{class c{constructor(g){this.factories=g}static create(g,b){if(null!=b){const S=b.factories.slice();g=g.concat(S)}return new c(g)}static extend(g){return{provide:c,useFactory:b=>c.create(g,b||Kb()),deps:[[c,new Gr,new bl]]}}find(g){const b=this.factories.find(S=>S.supports(g));if(null!=b)return b;throw new Error(`Cannot find a differ supporting object '${g}' of type '${function(c){return c.name||typeof c}(g)}'`)}}return c.\u0275prov=Lt({token:c,providedIn:"root",factory:Kb}),c})();function $b(){return new Sf([new Xb])}let Sf=(()=>{class c{constructor(g){this.factories=g}static create(g,b){if(b){const S=b.factories.slice();g=g.concat(S)}return new c(g)}static extend(g){return{provide:c,useFactory:b=>c.create(g,b||$b()),deps:[[c,new Gr,new bl]]}}find(g){const b=this.factories.find(S=>S.supports(g));if(b)return b;throw new Error(`Cannot find a differ supporting object '${g}'`)}}return c.\u0275prov=Lt({token:c,providedIn:"root",factory:$b}),c})();const zT=[new Xb],YT=new wf([new zb]),XT=new Sf(zT),KT=Ob(null,"core",[{provide:Tb,useValue:"unknown"},{provide:Lb,deps:[tc]},{provide:Ib,deps:[]},{provide:Sb,deps:[]}]),QT=[{provide:mp,useClass:mp,deps:[yc,tc,Zl,cp,Oh]},{provide:pE,deps:[yc],useFactory:function(c){let u=[];return c.onStable.subscribe(()=>{for(;u.length;)u.pop()()}),function(g){u.push(g)}}},{provide:Oh,useClass:Oh,deps:[[new bl,hm]]},{provide:fm,useClass:fm,deps:[]},cT,{provide:wf,useFactory:function(){return YT},deps:[]},{provide:Sf,useFactory:function(){return XT},deps:[]},{provide:Ef,useFactory:function(c){return c||"undefined"!=typeof $localize&&$localize.locale||uf},deps:[[new $a(Ef),new bl,new Gr]]},{provide:Db,useValue:"USD"}];let t0=(()=>{class c{constructor(g){}}return c.\u0275fac=function(g){return new(g||c)(Mo(mp))},c.\u0275mod=$n({type:c}),c.\u0275inj=Ce({providers:QT}),c})()},3075:(li,ht,W)=>{"use strict";W.d(ht,{Zs:()=>so,Fj:()=>Ae,NI:()=>Ms,oH:()=>pr,sg:()=>To,u5:()=>ka,Cf:()=>Ge,JU:()=>E,a5:()=>de,JJ:()=>ke,JL:()=>We,F:()=>gn,On:()=>Le,UX:()=>gs,kI:()=>Wt,_Y:()=>pt});var O=W(5e3),y=W(9808),t=W(2076),e=W(4128),n=W(4004);let a=(()=>{class z{constructor(F,le){this._renderer=F,this._elementRef=le,this.onChange=Tt=>{},this.onTouched=()=>{}}setProperty(F,le){this._renderer.setProperty(this._elementRef.nativeElement,F,le)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return z.\u0275fac=function(F){return new(F||z)(O.Y36(O.Qsj),O.Y36(O.SBq))},z.\u0275dir=O.lG2({type:z}),z})(),f=(()=>{class z extends a{}return z.\u0275fac=function(){let P;return function(le){return(P||(P=O.n5z(z)))(le||z)}}(),z.\u0275dir=O.lG2({type:z,features:[O.qOj]}),z})();const E=new O.OlP("NgValueAccessor"),ee={provide:E,useExisting:(0,O.Gpc)(()=>Ae),multi:!0},De=new O.OlP("CompositionEventMode");let Ae=(()=>{class z extends a{constructor(F,le,Tt){super(F,le),this._compositionMode=Tt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const z=(0,y.q)()?(0,y.q)().getUserAgent():"";return/android (\d+)/.test(z.toLowerCase())}())}writeValue(F){this.setProperty("value",null==F?"":F)}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return z.\u0275fac=function(F){return new(F||z)(O.Y36(O.Qsj),O.Y36(O.SBq),O.Y36(De,8))},z.\u0275dir=O.lG2({type:z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,le){1&F&&O.NdJ("input",function(Jt){return le._handleInput(Jt.target.value)})("blur",function(){return le.onTouched()})("compositionstart",function(){return le._compositionStart()})("compositionend",function(Jt){return le._compositionEnd(Jt.target.value)})},features:[O._Bn([ee]),O.qOj]}),z})();function Je(z){return null==z||0===z.length}function st(z){return null!=z&&"number"==typeof z.length}const Ge=new O.OlP("NgValidators"),lt=new O.OlP("NgAsyncValidators"),Rt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Wt{static min(P){return z=P,P=>{if(Je(P.value)||Je(z))return null;const F=parseFloat(P.value);return!isNaN(F)&&F<z?{min:{min:z,actual:P.value}}:null};var z}static max(P){return z=P,P=>{if(Je(P.value)||Je(z))return null;const F=parseFloat(P.value);return!isNaN(F)&&F>z?{max:{max:z,actual:P.value}}:null};var z}static required(P){return Se(P)}static requiredTrue(P){return Qe(P)}static email(P){return Je((z=P).value)||Rt.test(z.value)?null:{email:!0};var z}static minLength(P){return z=P,P=>Je(P.value)||!st(P.value)?null:P.value.length<z?{minlength:{requiredLength:z,actualLength:P.value.length}}:null;var z}static maxLength(P){return z=P,P=>st(P.value)&&P.value.length>z?{maxlength:{requiredLength:z,actualLength:P.value.length}}:null;var z}static pattern(P){return function(z){if(!z)return ge;let P,F;return"string"==typeof z?(F="","^"!==z.charAt(0)&&(F+="^"),F+=z,"$"!==z.charAt(z.length-1)&&(F+="$"),P=new RegExp(F)):(F=z.toString(),P=z),le=>{if(Je(le.value))return null;const Tt=le.value;return P.test(Tt)?null:{pattern:{requiredPattern:F,actualValue:Tt}}}}(P)}static nullValidator(P){return null}static compose(P){return At(P)}static composeAsync(P){return Xt(P)}}function Se(z){return Je(z.value)?{required:!0}:null}function Qe(z){return!0===z.value?null:{required:!0}}function ge(z){return null}function se(z){return null!=z}function at(z){const P=(0,O.QGY)(z)?(0,t.D)(z):z;return(0,O.CqO)(P),P}function Be(z){let P={};return z.forEach(F=>{P=null!=F?Object.assign(Object.assign({},P),F):P}),0===Object.keys(P).length?null:P}function ze(z,P){return P.map(F=>F(z))}function wt(z){return z.map(P=>function(z){return!z.validate}(P)?P:F=>P.validate(F))}function At(z){if(!z)return null;const P=z.filter(se);return 0==P.length?null:function(F){return Be(ze(F,P))}}function $t(z){return null!=z?At(wt(z)):null}function Xt(z){if(!z)return null;const P=z.filter(se);return 0==P.length?null:function(F){const le=ze(F,P).map(at);return(0,e.D)(le).pipe((0,n.U)(Be))}}function ti(z){return null!=z?Xt(wt(z)):null}function Wi(z,P){return null===z?[P]:Array.isArray(z)?[...z,P]:[z,P]}function pi(z){return z._rawValidators}function Lt(z){return z._rawAsyncValidators}function yi(z){return z?Array.isArray(z)?z:[z]:[]}function Ce(z,P){return Array.isArray(z)?z.includes(P):z===P}function vt(z,P){const F=yi(P);return yi(z).forEach(Tt=>{Ce(F,Tt)||F.push(Tt)}),F}function Ne(z,P){return yi(P).filter(F=>!Ce(z,F))}class Ve{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=$t(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=ti(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,F){return!!this.control&&this.control.hasError(P,F)}getError(P,F){return this.control?this.control.getError(P,F):null}}class de extends Ve{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Te extends Ve{get formDirective(){return null}get path(){return null}}class xt{constructor(P){this._cd=P}is(P){var F,le,Tt;return"submitted"===P?!!(null===(F=this._cd)||void 0===F?void 0:F.submitted):!!(null===(Tt=null===(le=this._cd)||void 0===le?void 0:le.control)||void 0===Tt?void 0:Tt[P])}}let ke=(()=>{class z extends xt{constructor(F){super(F)}}return z.\u0275fac=function(F){return new(F||z)(O.Y36(de,2))},z.\u0275dir=O.lG2({type:z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,le){2&F&&O.ekj("ng-untouched",le.is("untouched"))("ng-touched",le.is("touched"))("ng-pristine",le.is("pristine"))("ng-dirty",le.is("dirty"))("ng-valid",le.is("valid"))("ng-invalid",le.is("invalid"))("ng-pending",le.is("pending"))},features:[O.qOj]}),z})(),We=(()=>{class z extends xt{constructor(F){super(F)}}return z.\u0275fac=function(F){return new(F||z)(O.Y36(Te,10))},z.\u0275dir=O.lG2({type:z,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(F,le){2&F&&O.ekj("ng-untouched",le.is("untouched"))("ng-touched",le.is("touched"))("ng-pristine",le.is("pristine"))("ng-dirty",le.is("dirty"))("ng-valid",le.is("valid"))("ng-invalid",le.is("invalid"))("ng-pending",le.is("pending"))("ng-submitted",le.is("submitted"))},features:[O.qOj]}),z})();function Ln(z,P){Mi(z,P),P.valueAccessor.writeValue(z.value),function(z,P){P.valueAccessor.registerOnChange(F=>{z._pendingValue=F,z._pendingChange=!0,z._pendingDirty=!0,"change"===z.updateOn&&jt(z,P)})}(z,P),function(z,P){const F=(le,Tt)=>{P.valueAccessor.writeValue(le),Tt&&P.viewToModelUpdate(le)};z.registerOnChange(F),P._registerOnDestroy(()=>{z._unregisterOnChange(F)})}(z,P),function(z,P){P.valueAccessor.registerOnTouched(()=>{z._pendingTouched=!0,"blur"===z.updateOn&&z._pendingChange&&jt(z,P),"submit"!==z.updateOn&&z.markAsTouched()})}(z,P),function(z,P){if(P.valueAccessor.setDisabledState){const F=le=>{P.valueAccessor.setDisabledState(le)};z.registerOnDisabledChange(F),P._registerOnDestroy(()=>{z._unregisterOnDisabledChange(F)})}}(z,P)}function Vi(z,P,F=!0){const le=()=>{};P.valueAccessor&&(P.valueAccessor.registerOnChange(le),P.valueAccessor.registerOnTouched(le)),fn(z,P),z&&(P._invokeOnDestroyCallbacks(),z._registerOnCollectionChange(()=>{}))}function Ni(z,P){z.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(P)})}function Mi(z,P){const F=pi(z);null!==P.validator?z.setValidators(Wi(F,P.validator)):"function"==typeof F&&z.setValidators([F]);const le=Lt(z);null!==P.asyncValidator?z.setAsyncValidators(Wi(le,P.asyncValidator)):"function"==typeof le&&z.setAsyncValidators([le]);const Tt=()=>z.updateValueAndValidity();Ni(P._rawValidators,Tt),Ni(P._rawAsyncValidators,Tt)}function fn(z,P){let F=!1;if(null!==z){if(null!==P.validator){const Tt=pi(z);if(Array.isArray(Tt)&&Tt.length>0){const Jt=Tt.filter(Fi=>Fi!==P.validator);Jt.length!==Tt.length&&(F=!0,z.setValidators(Jt))}}if(null!==P.asyncValidator){const Tt=Lt(z);if(Array.isArray(Tt)&&Tt.length>0){const Jt=Tt.filter(Fi=>Fi!==P.asyncValidator);Jt.length!==Tt.length&&(F=!0,z.setAsyncValidators(Jt))}}}const le=()=>{};return Ni(P._rawValidators,le),Ni(P._rawAsyncValidators,le),F}function jt(z,P){z._pendingDirty&&z.markAsDirty(),z.setValue(z._pendingValue,{emitModelToViewChange:!1}),P.viewToModelUpdate(z._pendingValue),z._pendingChange=!1}function be(z,P){Mi(z,P)}function yt(z,P){if(!z.hasOwnProperty("model"))return!1;const F=z.model;return!!F.isFirstChange()||!Object.is(P,F.currentValue)}function zi(z,P){z._syncPendingControls(),P.forEach(F=>{const le=F.control;"submit"===le.updateOn&&le._pendingChange&&(F.viewToModelUpdate(le._pendingValue),le._pendingChange=!1)})}function mn(z,P){if(!P)return null;let F,le,Tt;return Array.isArray(P),P.forEach(Jt=>{Jt.constructor===Ae?F=Jt:function(z){return Object.getPrototypeOf(z.constructor)===f}(Jt)?le=Jt:Tt=Jt}),Tt||le||F||null}function $n(z,P){const F=z.indexOf(P);F>-1&&z.splice(F,1)}const Mt="VALID",ut="INVALID",Ut="PENDING",ui="DISABLED";function un(z){return(js(z)?z.validators:z)||null}function jn(z){return Array.isArray(z)?$t(z):z||null}function as(z,P){return(js(P)?P.asyncValidators:z)||null}function Ls(z){return Array.isArray(z)?ti(z):z||null}function js(z){return null!=z&&!Array.isArray(z)&&"object"==typeof z}class Co{constructor(P,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=P,this._rawAsyncValidators=F,this._composedValidatorFn=jn(this._rawValidators),this._composedAsyncValidatorFn=Ls(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(P){this._rawValidators=this._composedValidatorFn=P}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(P){this._rawAsyncValidators=this._composedAsyncValidatorFn=P}get parent(){return this._parent}get valid(){return this.status===Mt}get invalid(){return this.status===ut}get pending(){return this.status==Ut}get disabled(){return this.status===ui}get enabled(){return this.status!==ui}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(P){this._rawValidators=P,this._composedValidatorFn=jn(P)}setAsyncValidators(P){this._rawAsyncValidators=P,this._composedAsyncValidatorFn=Ls(P)}addValidators(P){this.setValidators(vt(P,this._rawValidators))}addAsyncValidators(P){this.setAsyncValidators(vt(P,this._rawAsyncValidators))}removeValidators(P){this.setValidators(Ne(P,this._rawValidators))}removeAsyncValidators(P){this.setAsyncValidators(Ne(P,this._rawAsyncValidators))}hasValidator(P){return Ce(this._rawValidators,P)}hasAsyncValidator(P){return Ce(this._rawAsyncValidators,P)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(P={}){this.touched=!0,this._parent&&!P.onlySelf&&this._parent.markAsTouched(P)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(P=>P.markAllAsTouched())}markAsUntouched(P={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}markAsDirty(P={}){this.pristine=!1,this._parent&&!P.onlySelf&&this._parent.markAsDirty(P)}markAsPristine(P={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}markAsPending(P={}){this.status=Ut,!1!==P.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!P.onlySelf&&this._parent.markAsPending(P)}disable(P={}){const F=this._parentMarkedDirty(P.onlySelf);this.status=ui,this.errors=null,this._forEachChild(le=>{le.disable(Object.assign(Object.assign({},P),{onlySelf:!0}))}),this._updateValue(),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},P),{skipPristineCheck:F})),this._onDisabledChange.forEach(le=>le(!0))}enable(P={}){const F=this._parentMarkedDirty(P.onlySelf);this.status=Mt,this._forEachChild(le=>{le.enable(Object.assign(Object.assign({},P),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},P),{skipPristineCheck:F})),this._onDisabledChange.forEach(le=>le(!1))}_updateAncestors(P){this._parent&&!P.onlySelf&&(this._parent.updateValueAndValidity(P),P.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(P){this._parent=P}updateValueAndValidity(P={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mt||this.status===Ut)&&this._runAsyncValidator(P.emitEvent)),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!P.onlySelf&&this._parent.updateValueAndValidity(P)}_updateTreeValidity(P={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(P)),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ui:Mt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(P){if(this.asyncValidator){this.status=Ut,this._hasOwnPendingAsyncValidator=!0;const F=at(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(le=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(le,{emitEvent:P})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(P,F={}){this.errors=P,this._updateControlsErrors(!1!==F.emitEvent)}get(P){return function(z,P,F){if(null==P||(Array.isArray(P)||(P=P.split(".")),Array.isArray(P)&&0===P.length))return null;let le=z;return P.forEach(Tt=>{le=le instanceof Jn?le.controls.hasOwnProperty(Tt)?le.controls[Tt]:null:le instanceof _o&&le.at(Tt)||null}),le}(this,P)}getError(P,F){const le=F?this.get(F):this;return le&&le.errors?le.errors[P]:null}hasError(P,F){return!!this.getError(P,F)}get root(){let P=this;for(;P._parent;)P=P._parent;return P}_updateControlsErrors(P){this.status=this._calculateStatus(),P&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(P)}_initObservables(){this.valueChanges=new O.vpe,this.statusChanges=new O.vpe}_calculateStatus(){return this._allControlsDisabled()?ui:this.errors?ut:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ut)?Ut:this._anyControlsHaveStatus(ut)?ut:Mt}_anyControlsHaveStatus(P){return this._anyControls(F=>F.status===P)}_anyControlsDirty(){return this._anyControls(P=>P.dirty)}_anyControlsTouched(){return this._anyControls(P=>P.touched)}_updatePristine(P={}){this.pristine=!this._anyControlsDirty(),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}_updateTouched(P={}){this.touched=this._anyControlsTouched(),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}_isBoxedValue(P){return"object"==typeof P&&null!==P&&2===Object.keys(P).length&&"value"in P&&"disabled"in P}_registerOnCollectionChange(P){this._onCollectionChange=P}_setUpdateStrategy(P){js(P)&&null!=P.updateOn&&(this._updateOn=P.updateOn)}_parentMarkedDirty(P){return!P&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ms extends Co{constructor(P=null,F,le){super(un(F),as(le,F)),this._onChange=[],this._pendingChange=!1,this._applyFormState(P),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(P,F={}){this.value=this._pendingValue=P,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(le=>le(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(P,F={}){this.setValue(P,F)}reset(P=null,F={}){this._applyFormState(P),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(P){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(P){this._onChange.push(P)}_unregisterOnChange(P){$n(this._onChange,P)}registerOnDisabledChange(P){this._onDisabledChange.push(P)}_unregisterOnDisabledChange(P){$n(this._onDisabledChange,P)}_forEachChild(P){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(P){this._isBoxedValue(P)?(this.value=this._pendingValue=P.value,P.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=P}}class Jn extends Co{constructor(P,F,le){super(un(F),as(le,F)),this.controls=P,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(P,F){return this.controls[P]?this.controls[P]:(this.controls[P]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(P,F,le={}){this.registerControl(P,F),this.updateValueAndValidity({emitEvent:le.emitEvent}),this._onCollectionChange()}removeControl(P,F={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(P,F,le={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],F&&this.registerControl(P,F),this.updateValueAndValidity({emitEvent:le.emitEvent}),this._onCollectionChange()}contains(P){return this.controls.hasOwnProperty(P)&&this.controls[P].enabled}setValue(P,F={}){this._checkAllValuesPresent(P),Object.keys(P).forEach(le=>{this._throwIfControlMissing(le),this.controls[le].setValue(P[le],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(P,F={}){null!=P&&(Object.keys(P).forEach(le=>{this.controls[le]&&this.controls[le].patchValue(P[le],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(P={},F={}){this._forEachChild((le,Tt)=>{le.reset(P[Tt],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(P,F,le)=>(P[le]=F instanceof Ms?F.value:F.getRawValue(),P))}_syncPendingControls(){let P=this._reduceChildren(!1,(F,le)=>!!le._syncPendingControls()||F);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_throwIfControlMissing(P){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[P])throw new Error(`Cannot find form control with name: ${P}.`)}_forEachChild(P){Object.keys(this.controls).forEach(F=>{const le=this.controls[F];le&&P(le,F)})}_setUpControls(){this._forEachChild(P=>{P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(P){for(const F of Object.keys(this.controls)){const le=this.controls[F];if(this.contains(F)&&P(le))return!0}return!1}_reduceValue(){return this._reduceChildren({},(P,F,le)=>((F.enabled||this.disabled)&&(P[le]=F.value),P))}_reduceChildren(P,F){let le=P;return this._forEachChild((Tt,Jt)=>{le=F(le,Tt,Jt)}),le}_allControlsDisabled(){for(const P of Object.keys(this.controls))if(this.controls[P].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(P){this._forEachChild((F,le)=>{if(void 0===P[le])throw new Error(`Must supply a value for form control with name: '${le}'.`)})}}class _o extends Co{constructor(P,F,le){super(un(F),as(le,F)),this.controls=P,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(P){return this.controls[P]}push(P,F={}){this.controls.push(P),this._registerControl(P),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(P,F,le={}){this.controls.splice(P,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:le.emitEvent})}removeAt(P,F={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),this.controls.splice(P,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(P,F,le={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),this.controls.splice(P,1),F&&(this.controls.splice(P,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:le.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(P,F={}){this._checkAllValuesPresent(P),P.forEach((le,Tt)=>{this._throwIfControlMissing(Tt),this.at(Tt).setValue(le,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(P,F={}){null!=P&&(P.forEach((le,Tt)=>{this.at(Tt)&&this.at(Tt).patchValue(le,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(P=[],F={}){this._forEachChild((le,Tt)=>{le.reset(P[Tt],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(P=>P instanceof Ms?P.value:P.getRawValue())}clear(P={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:P.emitEvent}))}_syncPendingControls(){let P=this.controls.reduce((F,le)=>!!le._syncPendingControls()||F,!1);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_throwIfControlMissing(P){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(P))throw new Error(`Cannot find form control at index ${P}`)}_forEachChild(P){this.controls.forEach((F,le)=>{P(F,le)})}_updateValue(){this.value=this.controls.filter(P=>P.enabled||this.disabled).map(P=>P.value)}_anyControls(P){return this.controls.some(F=>F.enabled&&P(F))}_setUpControls(){this._forEachChild(P=>this._registerControl(P))}_checkAllValuesPresent(P){this._forEachChild((F,le)=>{if(void 0===P[le])throw new Error(`Must supply a value for form control at index: ${le}.`)})}_allControlsDisabled(){for(const P of this.controls)if(P.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(P){P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)}}const Pn={provide:Te,useExisting:(0,O.Gpc)(()=>gn)},ii=(()=>Promise.resolve(null))();let gn=(()=>{class z extends Te{constructor(F,le){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new O.vpe,this.form=new Jn({},$t(F),ti(le))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(F){ii.then(()=>{const le=this._findContainer(F.path);F.control=le.registerControl(F.name,F.control),Ln(F.control,F),F.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(F)})}getControl(F){return this.form.get(F.path)}removeControl(F){ii.then(()=>{const le=this._findContainer(F.path);le&&le.removeControl(F.name),$n(this._directives,F)})}addFormGroup(F){ii.then(()=>{const le=this._findContainer(F.path),Tt=new Jn({});be(Tt,F),le.registerControl(F.name,Tt),Tt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(F){ii.then(()=>{const le=this._findContainer(F.path);le&&le.removeControl(F.name)})}getFormGroup(F){return this.form.get(F.path)}updateModel(F,le){ii.then(()=>{this.form.get(F.path).setValue(le)})}setValue(F){this.control.setValue(F)}onSubmit(F){return this.submitted=!0,zi(this.form,this._directives),this.ngSubmit.emit(F),!1}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(F){return F.pop(),F.length?this.form.get(F):this.form}}return z.\u0275fac=function(F){return new(F||z)(O.Y36(Ge,10),O.Y36(lt,10))},z.\u0275dir=O.lG2({type:z,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(F,le){1&F&&O.NdJ("submit",function(Jt){return le.onSubmit(Jt)})("reset",function(){return le.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[O._Bn([Pn]),O.qOj]}),z})();const ln={provide:de,useExisting:(0,O.Gpc)(()=>Le)},yn=(()=>Promise.resolve(null))();let Le=(()=>{class z extends de{constructor(F,le,Tt,Jt){super(),this.control=new Ms,this._registered=!1,this.update=new O.vpe,this._parent=F,this._setValidators(le),this._setAsyncValidators(Tt),this.valueAccessor=mn(0,Jt)}ngOnChanges(F){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in F&&this._updateDisabled(F),yt(F,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(z,P){return[...P.path,z]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ln(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(F){yn.then(()=>{this.control.setValue(F,{emitViewToModelChange:!1})})}_updateDisabled(F){const le=F.isDisabled.currentValue,Tt=""===le||le&&"false"!==le;yn.then(()=>{Tt&&!this.control.disabled?this.control.disable():!Tt&&this.control.disabled&&this.control.enable()})}}return z.\u0275fac=function(F){return new(F||z)(O.Y36(Te,9),O.Y36(Ge,10),O.Y36(lt,10),O.Y36(E,10))},z.\u0275dir=O.lG2({type:z,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[O._Bn([ln]),O.qOj,O.TTD]}),z})(),pt=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275dir=O.lG2({type:z,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),z})(),En=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=O.oAB({type:z}),z.\u0275inj=O.cJS({}),z})();const Bs=new O.OlP("NgModelWithFormControlWarning"),Hs={provide:de,useExisting:(0,O.Gpc)(()=>pr)};let pr=(()=>{class z extends de{constructor(F,le,Tt,Jt){super(),this._ngModelWarningConfig=Jt,this.update=new O.vpe,this._ngModelWarningSent=!1,this._setValidators(F),this._setAsyncValidators(le),this.valueAccessor=mn(0,Tt)}set isDisabled(F){}ngOnChanges(F){if(this._isControlChanged(F)){const le=F.form.previousValue;le&&Vi(le,this,!1),Ln(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}yt(F,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Vi(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}_isControlChanged(F){return F.hasOwnProperty("form")}}return z._ngModelWarningSentOnce=!1,z.\u0275fac=function(F){return new(F||z)(O.Y36(Ge,10),O.Y36(lt,10),O.Y36(E,10),O.Y36(Bs,8))},z.\u0275dir=O.lG2({type:z,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[O._Bn([Hs]),O.qOj,O.TTD]}),z})();const Vn={provide:Te,useExisting:(0,O.Gpc)(()=>To)};let To=(()=>{class z extends Te{constructor(F,le){super(),this.validators=F,this.asyncValidators=le,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new O.vpe,this._setValidators(F),this._setAsyncValidators(le)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(fn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const le=this.form.get(F.path);return Ln(le,F),le.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),le}getControl(F){return this.form.get(F.path)}removeControl(F){Vi(F.control||null,F,!1),$n(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,le){this.form.get(F.path).setValue(le)}onSubmit(F){return this.submitted=!0,zi(this.form,this.directives),this.ngSubmit.emit(F),!1}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const le=F.control,Tt=this.form.get(F.path);le!==Tt&&(Vi(le||null,F),Tt instanceof Ms&&(Ln(Tt,F),F.control=Tt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const le=this.form.get(F.path);be(le,F),le.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const le=this.form.get(F.path);le&&function(z,P){return fn(z,P)}(le,F)&&le.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mi(this.form,this),this._oldForm&&fn(this._oldForm,this)}_checkFormPresent(){}}return z.\u0275fac=function(F){return new(F||z)(O.Y36(Ge,10),O.Y36(lt,10))},z.\u0275dir=O.lG2({type:z,selectors:[["","formGroup",""]],hostBindings:function(F,le){1&F&&O.NdJ("submit",function(Jt){return le.onSubmit(Jt)})("reset",function(){return le.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[O._Bn([Vn]),O.qOj,O.TTD]}),z})();const lo={provide:Ge,useExisting:(0,O.Gpc)(()=>co),multi:!0},qo={provide:Ge,useExisting:(0,O.Gpc)(()=>so),multi:!0};let co=(()=>{class z{constructor(){this._required=!1}get required(){return this._required}set required(F){this._required=null!=F&&!1!==F&&"false"!=`${F}`,this._onChange&&this._onChange()}validate(F){return this.required?Se(F):null}registerOnValidatorChange(F){this._onChange=F}}return z.\u0275fac=function(F){return new(F||z)},z.\u0275dir=O.lG2({type:z,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(F,le){2&F&&O.uIk("required",le.required?"":null)},inputs:{required:"required"},features:[O._Bn([lo])]}),z})(),so=(()=>{class z extends co{validate(F){return this.required?Qe(F):null}}return z.\u0275fac=function(){let P;return function(le){return(P||(P=O.n5z(z)))(le||z)}}(),z.\u0275dir=O.lG2({type:z,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(F,le){2&F&&O.uIk("required",le.required?"":null)},features:[O._Bn([qo]),O.qOj]}),z})(),_r=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=O.oAB({type:z}),z.\u0275inj=O.cJS({imports:[[En]]}),z})(),ka=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=O.oAB({type:z}),z.\u0275inj=O.cJS({imports:[_r]}),z})(),gs=(()=>{class z{static withConfig(F){return{ngModule:z,providers:[{provide:Bs,useValue:F.warnOnNgModelWithFormControl}]}}}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=O.oAB({type:z}),z.\u0275inj=O.cJS({imports:[_r]}),z})()},1079:(li,ht,W)=>{"use strict";W.d(ht,{XC:()=>wt,Bb:()=>vt,ZL:()=>Lt});var O=W(5664),y=W(3191),t=W(5e3),e=W(508),n=W(727),a=W(7579),f=W(9770),E=W(6451),I=W(9646),Y=W(4968),ee=W(925),_e=W(9808),De=W(1314),Ae=W(495),Je=W(1159),st=W(7429),Ge=W(3075),lt=W(7322),Rt=W(5698),Wt=W(3900),tt=W(9300),Oe=W(4004),Se=W(8505),Qe=W(1005),dt=W(226);const it=["panel"];function Pe(Ne,Ve){if(1&Ne&&(t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&Ne){const de=Ve.id,Te=t.oxw();t.Q6J("id",Te.id)("ngClass",Te._classList),t.uIk("aria-label",Te.ariaLabel||null)("aria-labelledby",Te._getPanelAriaLabelledby(de))}}const Re=["*"];let ge=0;class se{constructor(Ve,de){this.source=Ve,this.option=de}}const at=(0,e.Kr)(class{}),Be=new t.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}});let St=(()=>{class Ne extends at{constructor(de,Te,xt,Kt){super(),this._changeDetectorRef=de,this._elementRef=Te,this._activeOptionChanges=n.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.optionActivated=new t.vpe,this._classList={},this.id="mat-autocomplete-"+ge++,this.inertGroups=(null==Kt?void 0:Kt.SAFARI)||!1,this._autoActiveFirstOption=!!xt.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(de){this._autoActiveFirstOption=(0,y.Ig)(de)}set classList(de){this._classList=de&&de.length?(0,y.du)(de).reduce((Te,xt)=>(Te[xt]=!0,Te),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new O.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(de=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[de]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(de){this.panel&&(this.panel.nativeElement.scrollTop=de)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(de){const Te=new se(this,de);this.optionSelected.emit(Te)}_getPanelAriaLabelledby(de){return this.ariaLabel?null:this.ariaLabelledby?(de?de+" ":"")+this.ariaLabelledby:de}_setVisibilityClasses(de){de[this._visibleClass]=this.showPanel,de[this._hiddenClass]=!this.showPanel}}return Ne.\u0275fac=function(de){return new(de||Ne)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(Be),t.Y36(ee.t4))},Ne.\u0275dir=t.lG2({type:Ne,viewQuery:function(de,Te){if(1&de&&(t.Gf(t.Rgc,7),t.Gf(it,5)),2&de){let xt;t.iGM(xt=t.CRH())&&(Te.template=xt.first),t.iGM(xt=t.CRH())&&(Te.panel=xt.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[t.qOj]}),Ne})(),wt=(()=>{class Ne extends St{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return Ne.\u0275fac=function(){let Ve;return function(Te){return(Ve||(Ve=t.n5z(Ne)))(Te||Ne)}}(),Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["mat-autocomplete"]],contentQueries:function(de,Te,xt){if(1&de&&(t.Suo(xt,e.K7,5),t.Suo(xt,e.ey,5)),2&de){let Kt;t.iGM(Kt=t.CRH())&&(Te.optionGroups=Kt),t.iGM(Kt=t.CRH())&&(Te.options=Kt)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[t._Bn([{provide:e.HF,useExisting:Ne}]),t.qOj],ngContentSelectors:Re,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(de,Te){1&de&&(t.F$t(),t.YNc(0,Pe,3,4,"ng-template"))},directives:[_e.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),Ne})();const At=new t.OlP("mat-autocomplete-scroll-strategy"),Xt={provide:At,deps:[De.aV],useFactory:function(Ne){return()=>Ne.scrollStrategies.reposition()}},ti={provide:Ge.JU,useExisting:(0,t.Gpc)(()=>Lt),multi:!0};let pi=(()=>{class Ne{constructor(de,Te,xt,Kt,Ft,ke,We,_t,Ue,Ye,et){this._element=de,this._overlay=Te,this._viewContainerRef=xt,this._zone=Kt,this._changeDetectorRef=Ft,this._dir=We,this._formField=_t,this._document=Ue,this._viewportRuler=Ye,this._defaults=et,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=n.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new a.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,f.P)(()=>this.autocomplete&&this.autocomplete.options?(0,E.T)(...this.autocomplete.options.map(Ie=>Ie.onSelectionChange)):this._zone.onStable.pipe((0,Rt.q)(1),(0,Wt.w)(()=>this.optionSelections))),this._scrollStrategy=ke}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(de){this._autocompleteDisabled=(0,y.Ig)(de)}ngAfterViewInit(){const de=this._getWindow();void 0!==de&&this._zone.runOutsideAngular(()=>de.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(de){de.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const de=this._getWindow();void 0!==de&&de.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,E.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,tt.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,tt.h)(()=>this._overlayAttached)):(0,I.of)()).pipe((0,Oe.U)(de=>de instanceof e.rN?de:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,E.T)((0,Y.R)(this._document,"click"),(0,Y.R)(this._document,"auxclick"),(0,Y.R)(this._document,"touchend")).pipe((0,tt.h)(de=>{const Te=(0,ee.sA)(de),xt=this._formField?this._formField._elementRef.nativeElement:null,Kt=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&Te!==this._element.nativeElement&&(!xt||!xt.contains(Te))&&(!Kt||!Kt.contains(Te))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(Te)}))}writeValue(de){Promise.resolve(null).then(()=>this._setTriggerValue(de))}registerOnChange(de){this._onChange=de}registerOnTouched(de){this._onTouched=de}setDisabledState(de){this._element.nativeElement.disabled=de}_handleKeydown(de){const Te=de.keyCode;if(Te===Je.hY&&!(0,Je.Vb)(de)&&de.preventDefault(),this.activeOption&&Te===Je.K5&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),de.preventDefault();else if(this.autocomplete){const xt=this.autocomplete._keyManager.activeItem,Kt=Te===Je.LH||Te===Je.JH;this.panelOpen||Te===Je.Mf?this.autocomplete._keyManager.onKeydown(de):Kt&&this._canOpen()&&this.openPanel(),(Kt||this.autocomplete._keyManager.activeItem!==xt)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(de){let Te=de.target,xt=Te.value;"number"===Te.type&&(xt=""==xt?null:parseFloat(xt)),this._previousValue!==xt&&(this._previousValue=xt,this._onChange(xt),this._canOpen()&&this._document.activeElement===de.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(de=!1){this._formField&&"auto"===this._formField.floatLabel&&(de?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const de=this._zone.onStable.pipe((0,Rt.q)(1)),Te=this.autocomplete.options.changes.pipe((0,Se.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,Qe.g)(0));return(0,E.T)(de,Te).pipe((0,Wt.w)(()=>{const xt=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),xt!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),(0,Rt.q)(1)).subscribe(xt=>this._setValueAndClose(xt))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(de){const Te=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(de):de,xt=null!=Te?Te:"";this._formField?this._formField._control.value=xt:this._element.nativeElement.value=xt,this._previousValue=xt}_setValueAndClose(de){de&&de.source&&(this._clearPreviousSelectedOption(de.source),this._setTriggerValue(de.source.value),this._onChange(de.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(de.source)),this.closePanel()}_clearPreviousSelectedOption(de){this.autocomplete.options.forEach(Te=>{Te!==de&&Te.selected&&Te.deselect()})}_attachOverlay(){var de;let Te=this._overlayRef;Te?(this._positionStrategy.setOrigin(this._getConnectedElement()),Te.updateSize({width:this._getPanelWidth()})):(this._portal=new st.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(de=this._formField)||void 0===de?void 0:de.getLabelId()}),Te=this._overlay.create(this._getOverlayConfig()),this._overlayRef=Te,Te.keydownEvents().subscribe(Kt=>{(Kt.keyCode===Je.hY&&!(0,Je.Vb)(Kt)||Kt.keyCode===Je.LH&&(0,Je.Vb)(Kt,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),Kt.stopPropagation(),Kt.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&Te&&Te.updateSize({width:this._getPanelWidth()})})),Te&&!Te.hasAttached()&&(Te.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const xt=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&xt!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var de;return new De.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(de=this._defaults)||void 0===de?void 0:de.overlayPanelClass})}_getOverlayPosition(){const de=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(de),this._positionStrategy=de,de}_setStrategyPositions(de){const Te=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],xt=this._aboveClass,Kt=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:xt},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:xt}];let Ft;Ft="above"===this.position?Kt:"below"===this.position?Te:[...Te,...Kt],de.withPositions(Ft)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const de=this.autocomplete;de.autoActiveFirstOption?de._keyManager.setFirstItemActive():de._keyManager.setActiveItem(-1)}_canOpen(){const de=this._element.nativeElement;return!de.readOnly&&!de.disabled&&!this._autocompleteDisabled}_getWindow(){var de;return(null===(de=this._document)||void 0===de?void 0:de.defaultView)||window}_scrollToOption(de){const Te=this.autocomplete,xt=(0,e.CB)(de,Te.options,Te.optionGroups);if(0===de&&1===xt)Te._setScrollTop(0);else if(Te.panel){const Kt=Te.options.toArray()[de];if(Kt){const Ft=Kt._getHostElement(),ke=(0,e.jH)(Ft.offsetTop,Ft.offsetHeight,Te._getScrollTop(),Te.panel.nativeElement.offsetHeight);Te._setScrollTop(ke)}}}}return Ne.\u0275fac=function(de){return new(de||Ne)(t.Y36(t.SBq),t.Y36(De.aV),t.Y36(t.s_b),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(At),t.Y36(dt.Is,8),t.Y36(lt.G_,9),t.Y36(_e.K0,8),t.Y36(Ae.rL),t.Y36(Be,8))},Ne.\u0275dir=t.lG2({type:Ne,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[t.TTD]}),Ne})(),Lt=(()=>{class Ne extends pi{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return Ne.\u0275fac=function(){let Ve;return function(Te){return(Ve||(Ve=t.n5z(Ne)))(Te||Ne)}}(),Ne.\u0275dir=t.lG2({type:Ne,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(de,Te){1&de&&t.NdJ("focusin",function(){return Te._handleFocus()})("blur",function(){return Te._onTouched()})("input",function(Kt){return Te._handleInput(Kt)})("keydown",function(Kt){return Te._handleKeydown(Kt)}),2&de&&t.uIk("autocomplete",Te.autocompleteAttribute)("role",Te.autocompleteDisabled?null:"combobox")("aria-autocomplete",Te.autocompleteDisabled?null:"list")("aria-activedescendant",Te.panelOpen&&Te.activeOption?Te.activeOption.id:null)("aria-expanded",Te.autocompleteDisabled?null:Te.panelOpen.toString())("aria-owns",Te.autocompleteDisabled||!Te.panelOpen||null==Te.autocomplete?null:Te.autocomplete.id)("aria-haspopup",!Te.autocompleteDisabled)},exportAs:["matAutocompleteTrigger"],features:[t._Bn([ti]),t.qOj]}),Ne})(),vt=(()=>{class Ne{}return Ne.\u0275fac=function(de){return new(de||Ne)},Ne.\u0275mod=t.oAB({type:Ne}),Ne.\u0275inj=t.cJS({providers:[Xt],imports:[[De.U8,e.Ng,e.BQ,_e.ez],Ae.ZD,e.Ng,e.BQ]}),Ne})()},7423:(li,ht,W)=>{"use strict";W.d(ht,{zs:()=>_e,lW:()=>ee,ot:()=>De});var O=W(5e3),y=W(508),t=W(6360),e=W(5664);const n=["mat-button",""],a=["*"],I=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Y=(0,y.pj)((0,y.Id)((0,y.Kr)(class{constructor(Ae){this._elementRef=Ae}})));let ee=(()=>{class Ae extends Y{constructor(st,Ge,lt){super(st),this._focusMonitor=Ge,this._animationMode=lt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Rt of I)this._hasHostAttributes(Rt)&&this._getHostElement().classList.add(Rt);st.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(st,Ge){st?this._focusMonitor.focusVia(this._getHostElement(),st,Ge):this._getHostElement().focus(Ge)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...st){return st.some(Ge=>this._getHostElement().hasAttribute(Ge))}}return Ae.\u0275fac=function(st){return new(st||Ae)(O.Y36(O.SBq),O.Y36(e.tE),O.Y36(t.Qb,8))},Ae.\u0275cmp=O.Xpm({type:Ae,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(st,Ge){if(1&st&&O.Gf(y.wG,5),2&st){let lt;O.iGM(lt=O.CRH())&&(Ge.ripple=lt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(st,Ge){2&st&&(O.uIk("disabled",Ge.disabled||null),O.ekj("_mat-animation-noopable","NoopAnimations"===Ge._animationMode)("mat-button-disabled",Ge.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[O.qOj],attrs:n,ngContentSelectors:a,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(st,Ge){1&st&&(O.F$t(),O.TgZ(0,"span",0),O.Hsn(1),O.qZA(),O._UZ(2,"span",1),O._UZ(3,"span",2)),2&st&&(O.xp6(2),O.ekj("mat-button-ripple-round",Ge.isRoundButton||Ge.isIconButton),O.Q6J("matRippleDisabled",Ge._isRippleDisabled())("matRippleCentered",Ge.isIconButton)("matRippleTrigger",Ge._getHostElement()))},directives:[y.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),Ae})(),_e=(()=>{class Ae extends ee{constructor(st,Ge,lt){super(Ge,st,lt)}_haltDisabledEvents(st){this.disabled&&(st.preventDefault(),st.stopImmediatePropagation())}}return Ae.\u0275fac=function(st){return new(st||Ae)(O.Y36(e.tE),O.Y36(O.SBq),O.Y36(t.Qb,8))},Ae.\u0275cmp=O.Xpm({type:Ae,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(st,Ge){1&st&&O.NdJ("click",function(Rt){return Ge._haltDisabledEvents(Rt)}),2&st&&(O.uIk("tabindex",Ge.disabled?-1:Ge.tabIndex||0)("disabled",Ge.disabled||null)("aria-disabled",Ge.disabled.toString()),O.ekj("_mat-animation-noopable","NoopAnimations"===Ge._animationMode)("mat-button-disabled",Ge.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[O.qOj],attrs:n,ngContentSelectors:a,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(st,Ge){1&st&&(O.F$t(),O.TgZ(0,"span",0),O.Hsn(1),O.qZA(),O._UZ(2,"span",1),O._UZ(3,"span",2)),2&st&&(O.xp6(2),O.ekj("mat-button-ripple-round",Ge.isRoundButton||Ge.isIconButton),O.Q6J("matRippleDisabled",Ge._isRippleDisabled())("matRippleCentered",Ge.isIconButton)("matRippleTrigger",Ge._getHostElement()))},directives:[y.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),Ae})(),De=(()=>{class Ae{}return Ae.\u0275fac=function(st){return new(st||Ae)},Ae.\u0275mod=O.oAB({type:Ae}),Ae.\u0275inj=O.cJS({imports:[[y.si,y.BQ],y.BQ]}),Ae})()},508:(li,ht,W)=>{"use strict";W.d(ht,{yN:()=>lt,mZ:()=>Rt,_A:()=>wt,rD:()=>Ce,sG:()=>At,K7:()=>xi,HF:()=>bi,Y2:()=>et,BQ:()=>Se,X2:()=>vt,uc:()=>de,XK:()=>Lt,ey:()=>Mi,Ng:()=>Tn,rN:()=>Ni,nP:()=>Bt,us:()=>Vt,wG:()=>Ie,si:()=>Xe,IR:()=>_t,CB:()=>fn,jH:()=>$i,pj:()=>Re,Kr:()=>ge,Id:()=>Pe,FD:()=>at,sb:()=>se,E0:()=>Ne});var O=W(5e3),y=W(226),e=W(9808),n=W(925),a=W(5664),f=W(3191),E=W(7579),I=W(8675),Y=W(6360),ee=W(1159);function Ae(jt,qe){if(1&jt&&O._UZ(0,"mat-pseudo-checkbox",4),2&jt){const be=O.oxw();O.Q6J("state",be.selected?"checked":"unchecked")("disabled",be.disabled)}}function Je(jt,qe){if(1&jt&&(O.TgZ(0,"span",5),O._uU(1),O.qZA()),2&jt){const be=O.oxw();O.xp6(1),O.hij("(",be.group.label,")")}}const st=["*"];let lt=(()=>{class jt{}return jt.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",jt.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",jt.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",jt.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",jt})(),Rt=(()=>{class jt{}return jt.COMPLEX="375ms",jt.ENTERING="225ms",jt.EXITING="195ms",jt})();const Oe=new O.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Se=(()=>{class jt{constructor(be,te,me){this._sanityChecks=te,this._document=me,this._hasDoneGlobalChecks=!1,be._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(be){return!(0,n.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[be])}}return jt.\u0275fac=function(be){return new(be||jt)(O.LFG(a.qm),O.LFG(Oe,8),O.LFG(e.K0))},jt.\u0275mod=O.oAB({type:jt}),jt.\u0275inj=O.cJS({imports:[[y.vT],y.vT]}),jt})();function Pe(jt){return class extends jt{constructor(...qe){super(...qe),this._disabled=!1}get disabled(){return this._disabled}set disabled(qe){this._disabled=(0,f.Ig)(qe)}}}function Re(jt,qe){return class extends jt{constructor(...be){super(...be),this.defaultColor=qe,this.color=qe}get color(){return this._color}set color(be){const te=be||this.defaultColor;te!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),te&&this._elementRef.nativeElement.classList.add(`mat-${te}`),this._color=te)}}}function ge(jt){return class extends jt{constructor(...qe){super(...qe),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(qe){this._disableRipple=(0,f.Ig)(qe)}}}function se(jt,qe=0){return class extends jt{constructor(...be){super(...be),this._tabIndex=qe,this.defaultTabIndex=qe}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(be){this._tabIndex=null!=be?(0,f.su)(be):this.defaultTabIndex}}}function at(jt){return class extends jt{constructor(...qe){super(...qe),this.stateChanges=new E.x,this.errorState=!1}updateErrorState(){const qe=this.errorState,Ke=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);Ke!==qe&&(this.errorState=Ke,this.stateChanges.next())}}}const ze=new O.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,O.f3M)(O.soG)}});class wt{constructor(){this._localeChanges=new E.x,this.localeChanges=this._localeChanges}getValidDateOrNull(qe){return this.isDateInstance(qe)&&this.isValid(qe)?qe:null}deserialize(qe){return null==qe||this.isDateInstance(qe)&&this.isValid(qe)?qe:this.invalid()}setLocale(qe){this.locale=qe,this._localeChanges.next()}compareDate(qe,be){return this.getYear(qe)-this.getYear(be)||this.getMonth(qe)-this.getMonth(be)||this.getDate(qe)-this.getDate(be)}sameDate(qe,be){if(qe&&be){let te=this.isValid(qe),me=this.isValid(be);return te&&me?!this.compareDate(qe,be):te==me}return qe==be}clampDate(qe,be,te){return be&&this.compareDate(qe,be)<0?be:te&&this.compareDate(qe,te)>0?te:qe}}const At=new O.OlP("mat-date-formats"),$t=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Xt(jt,qe){const be=Array(jt);for(let te=0;te<jt;te++)be[te]=qe(te);return be}let ti=(()=>{class jt extends wt{constructor(be,te){super(),this.useUtcForDisplay=!1,super.setLocale(be)}getYear(be){return be.getFullYear()}getMonth(be){return be.getMonth()}getDate(be){return be.getDate()}getDayOfWeek(be){return be.getDay()}getMonthNames(be){const te=new Intl.DateTimeFormat(this.locale,{month:be,timeZone:"utc"});return Xt(12,me=>this._format(te,new Date(2017,me,1)))}getDateNames(){const be=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Xt(31,te=>this._format(be,new Date(2017,0,te+1)))}getDayOfWeekNames(be){const te=new Intl.DateTimeFormat(this.locale,{weekday:be,timeZone:"utc"});return Xt(7,me=>this._format(te,new Date(2017,0,me+1)))}getYearName(be){const te=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(te,be)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(be){return this.getDate(this._createDateWithOverflow(this.getYear(be),this.getMonth(be)+1,0))}clone(be){return new Date(be.getTime())}createDate(be,te,me){let Ke=this._createDateWithOverflow(be,te,me);return Ke.getMonth(),Ke}today(){return new Date}parse(be){return"number"==typeof be?new Date(be):be?new Date(Date.parse(be)):null}format(be,te){if(!this.isValid(be))throw Error("NativeDateAdapter: Cannot format invalid date.");const me=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},te),{timeZone:"utc"}));return this._format(me,be)}addCalendarYears(be,te){return this.addCalendarMonths(be,12*te)}addCalendarMonths(be,te){let me=this._createDateWithOverflow(this.getYear(be),this.getMonth(be)+te,this.getDate(be));return this.getMonth(me)!=((this.getMonth(be)+te)%12+12)%12&&(me=this._createDateWithOverflow(this.getYear(me),this.getMonth(me),0)),me}addCalendarDays(be,te){return this._createDateWithOverflow(this.getYear(be),this.getMonth(be),this.getDate(be)+te)}toIso8601(be){return[be.getUTCFullYear(),this._2digit(be.getUTCMonth()+1),this._2digit(be.getUTCDate())].join("-")}deserialize(be){if("string"==typeof be){if(!be)return null;if($t.test(be)){let te=new Date(be);if(this.isValid(te))return te}}return super.deserialize(be)}isDateInstance(be){return be instanceof Date}isValid(be){return!isNaN(be.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(be,te,me){const Ke=new Date;return Ke.setFullYear(be,te,me),Ke.setHours(0,0,0,0),Ke}_2digit(be){return("00"+be).slice(-2)}_format(be,te){const me=new Date;return me.setUTCFullYear(te.getFullYear(),te.getMonth(),te.getDate()),me.setUTCHours(te.getHours(),te.getMinutes(),te.getSeconds(),te.getMilliseconds()),be.format(me)}}return jt.\u0275fac=function(be){return new(be||jt)(O.LFG(ze,8),O.LFG(n.t4))},jt.\u0275prov=O.Yz7({token:jt,factory:jt.\u0275fac}),jt})();const Wi={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let pi=(()=>{class jt{}return jt.\u0275fac=function(be){return new(be||jt)},jt.\u0275mod=O.oAB({type:jt}),jt.\u0275inj=O.cJS({providers:[{provide:wt,useClass:ti}],imports:[[n.ud]]}),jt})(),Lt=(()=>{class jt{}return jt.\u0275fac=function(be){return new(be||jt)},jt.\u0275mod=O.oAB({type:jt}),jt.\u0275inj=O.cJS({providers:[{provide:At,useValue:Wi}],imports:[[pi]]}),jt})(),Ce=(()=>{class jt{isErrorState(be,te){return!!(be&&be.invalid&&(be.touched||te&&te.submitted))}}return jt.\u0275fac=function(be){return new(be||jt)},jt.\u0275prov=O.Yz7({token:jt,factory:jt.\u0275fac,providedIn:"root"}),jt})(),vt=(()=>{class jt{}return jt.\u0275fac=function(be){return new(be||jt)},jt.\u0275dir=O.lG2({type:jt,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),jt})();function Ne(jt,qe,be="mat"){jt.changes.pipe((0,I.O)(jt)).subscribe(({length:te})=>{Ve(qe,`${be}-2-line`,!1),Ve(qe,`${be}-3-line`,!1),Ve(qe,`${be}-multi-line`,!1),2===te||3===te?Ve(qe,`${be}-${te}-line`,!0):te>3&&Ve(qe,`${be}-multi-line`,!0)})}function Ve(jt,qe,be){jt.nativeElement.classList.toggle(qe,be)}let de=(()=>{class jt{}return jt.\u0275fac=function(be){return new(be||jt)},jt.\u0275mod=O.oAB({type:jt}),jt.\u0275inj=O.cJS({imports:[[Se],Se]}),jt})();class Te{constructor(qe,be,te){this._renderer=qe,this.element=be,this.config=te,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const xt={enterDuration:225,exitDuration:150},Ft=(0,n.i$)({passive:!0}),ke=["mousedown","touchstart"],We=["mouseup","mouseleave","touchend","touchcancel"];class _t{constructor(qe,be,te,me){this._target=qe,this._ngZone=be,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,me.isBrowser&&(this._containerElement=(0,f.fI)(te))}fadeInRipple(qe,be,te={}){const me=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Ke=Object.assign(Object.assign({},xt),te.animation);te.centered&&(qe=me.left+me.width/2,be=me.top+me.height/2);const yt=te.radius||function(jt,qe,be){const te=Math.max(Math.abs(jt-be.left),Math.abs(jt-be.right)),me=Math.max(Math.abs(qe-be.top),Math.abs(qe-be.bottom));return Math.sqrt(te*te+me*me)}(qe,be,me),Si=qe-me.left,zi=be-me.top,mn=Ke.enterDuration,$n=document.createElement("div");$n.classList.add("mat-ripple-element"),$n.style.left=Si-yt+"px",$n.style.top=zi-yt+"px",$n.style.height=2*yt+"px",$n.style.width=2*yt+"px",null!=te.color&&($n.style.backgroundColor=te.color),$n.style.transitionDuration=`${mn}ms`,this._containerElement.appendChild($n),window.getComputedStyle($n).getPropertyValue("opacity"),$n.style.transform="scale(1)";const Gt=new Te(this,$n,te);return Gt.state=0,this._activeRipples.add(Gt),te.persistent||(this._mostRecentTransientRipple=Gt),this._runTimeoutOutsideZone(()=>{const Mt=Gt===this._mostRecentTransientRipple;Gt.state=1,!te.persistent&&(!Mt||!this._isPointerDown)&&Gt.fadeOut()},mn),Gt}fadeOutRipple(qe){const be=this._activeRipples.delete(qe);if(qe===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!be)return;const te=qe.element,me=Object.assign(Object.assign({},xt),qe.config.animation);te.style.transitionDuration=`${me.exitDuration}ms`,te.style.opacity="0",qe.state=2,this._runTimeoutOutsideZone(()=>{qe.state=3,te.remove()},me.exitDuration)}fadeOutAll(){this._activeRipples.forEach(qe=>qe.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(qe=>{qe.config.persistent||qe.fadeOut()})}setupTriggerEvents(qe){const be=(0,f.fI)(qe);!be||be===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=be,this._registerEvents(ke))}handleEvent(qe){"mousedown"===qe.type?this._onMousedown(qe):"touchstart"===qe.type?this._onTouchStart(qe):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(We),this._pointerUpEventsRegistered=!0)}_onMousedown(qe){const be=(0,a.X6)(qe),te=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!be&&!te&&(this._isPointerDown=!0,this.fadeInRipple(qe.clientX,qe.clientY,this._target.rippleConfig))}_onTouchStart(qe){if(!this._target.rippleDisabled&&!(0,a.yG)(qe)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const be=qe.changedTouches;for(let te=0;te<be.length;te++)this.fadeInRipple(be[te].clientX,be[te].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(qe=>{!qe.config.persistent&&(1===qe.state||qe.config.terminateOnPointerUp&&0===qe.state)&&qe.fadeOut()}))}_runTimeoutOutsideZone(qe,be=0){this._ngZone.runOutsideAngular(()=>setTimeout(qe,be))}_registerEvents(qe){this._ngZone.runOutsideAngular(()=>{qe.forEach(be=>{this._triggerElement.addEventListener(be,this,Ft)})})}_removeTriggerEvents(){this._triggerElement&&(ke.forEach(qe=>{this._triggerElement.removeEventListener(qe,this,Ft)}),this._pointerUpEventsRegistered&&We.forEach(qe=>{this._triggerElement.removeEventListener(qe,this,Ft)}))}}const et=new O.OlP("mat-ripple-global-options");let Ie=(()=>{class jt{constructor(be,te,me,Ke,yt){this._elementRef=be,this._animationMode=yt,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Ke||{},this._rippleRenderer=new _t(this,te,be,me)}get disabled(){return this._disabled}set disabled(be){be&&this.fadeOutAllNonPersistent(),this._disabled=be,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(be){this._trigger=be,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(be,te=0,me){return"number"==typeof be?this._rippleRenderer.fadeInRipple(be,te,Object.assign(Object.assign({},this.rippleConfig),me)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),be))}}return jt.\u0275fac=function(be){return new(be||jt)(O.Y36(O.SBq),O.Y36(O.R0b),O.Y36(n.t4),O.Y36(et,8),O.Y36(Y.Qb,8))},jt.\u0275dir=O.lG2({type:jt,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(be,te){2&be&&O.ekj("mat-ripple-unbounded",te.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),jt})(),Xe=(()=>{class jt{}return jt.\u0275fac=function(be){return new(be||jt)},jt.\u0275mod=O.oAB({type:jt}),jt.\u0275inj=O.cJS({imports:[[Se,n.ud],Se]}),jt})(),Bt=(()=>{class jt{constructor(be){this._animationMode=be,this.state="unchecked",this.disabled=!1}}return jt.\u0275fac=function(be){return new(be||jt)(O.Y36(Y.Qb,8))},jt.\u0275cmp=O.Xpm({type:jt,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(be,te){2&be&&O.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===te.state)("mat-pseudo-checkbox-checked","checked"===te.state)("mat-pseudo-checkbox-disabled",te.disabled)("_mat-animation-noopable","NoopAnimations"===te._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(be,te){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),jt})(),Vt=(()=>{class jt{}return jt.\u0275fac=function(be){return new(be||jt)},jt.\u0275mod=O.oAB({type:jt}),jt.\u0275inj=O.cJS({imports:[[Se]]}),jt})();const bi=new O.OlP("MAT_OPTION_PARENT_COMPONENT"),xi=new O.OlP("MatOptgroup");let Vi=0;class Ni{constructor(qe,be=!1){this.source=qe,this.isUserInput=be}}let Zi=(()=>{class jt{constructor(be,te,me,Ke){this._element=be,this._changeDetectorRef=te,this._parent=me,this.group=Ke,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Vi++,this.onSelectionChange=new O.vpe,this._stateChanges=new E.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(be){this._disabled=(0,f.Ig)(be)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(be,te){const me=this._getHostElement();"function"==typeof me.focus&&me.focus(te)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(be){(be.keyCode===ee.K5||be.keyCode===ee.L_)&&!(0,ee.Vb)(be)&&(this._selectViaInteraction(),be.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const be=this.viewValue;be!==this._mostRecentViewValue&&(this._mostRecentViewValue=be,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(be=!1){this.onSelectionChange.emit(new Ni(this,be))}}return jt.\u0275fac=function(be){O.$Z()},jt.\u0275dir=O.lG2({type:jt,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),jt})(),Mi=(()=>{class jt extends Zi{constructor(be,te,me,Ke){super(be,te,me,Ke)}}return jt.\u0275fac=function(be){return new(be||jt)(O.Y36(O.SBq),O.Y36(O.sBO),O.Y36(bi,8),O.Y36(xi,8))},jt.\u0275cmp=O.Xpm({type:jt,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(be,te){1&be&&O.NdJ("click",function(){return te._selectViaInteraction()})("keydown",function(Ke){return te._handleKeydown(Ke)}),2&be&&(O.Ikx("id",te.id),O.uIk("tabindex",te._getTabIndex())("aria-selected",te._getAriaSelected())("aria-disabled",te.disabled.toString()),O.ekj("mat-selected",te.selected)("mat-option-multiple",te.multiple)("mat-active",te.active)("mat-option-disabled",te.disabled))},exportAs:["matOption"],features:[O.qOj],ngContentSelectors:st,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(be,te){1&be&&(O.F$t(),O.YNc(0,Ae,1,2,"mat-pseudo-checkbox",0),O.TgZ(1,"span",1),O.Hsn(2),O.qZA(),O.YNc(3,Je,2,1,"span",2),O._UZ(4,"div",3)),2&be&&(O.Q6J("ngIf",te.multiple),O.xp6(3),O.Q6J("ngIf",te.group&&te.group._inert),O.xp6(1),O.Q6J("matRippleTrigger",te._getHostElement())("matRippleDisabled",te.disabled||te.disableRipple))},directives:[e.O5,Ie,Bt],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),jt})();function fn(jt,qe,be){if(be.length){let te=qe.toArray(),me=be.toArray(),Ke=0;for(let yt=0;yt<jt+1;yt++)te[yt].group&&te[yt].group===me[Ke]&&Ke++;return Ke}return 0}function $i(jt,qe,be,te){return jt<be?jt:jt+qe>be+te?Math.max(0,jt-te+qe):be}let Tn=(()=>{class jt{}return jt.\u0275fac=function(be){return new(be||jt)},jt.\u0275mod=O.oAB({type:jt}),jt.\u0275inj=O.cJS({imports:[[Xe,e.ez,Se,Vt]]}),jt})()},8966:(li,ht,W)=>{"use strict";W.d(ht,{uw:()=>wt,Is:()=>yi,so:()=>it});var O=W(1314),y=W(7429),t=W(5e3),e=W(508),n=W(226),a=W(7579),f=W(9770),E=W(727),I=W(9646),Y=W(9300),ee=W(5698),_e=W(8675),De=W(925),Ae=W(9808),Je=W(1777),st=W(5664),Ge=W(1159),lt=W(6360);function Rt(Ce,vt){}class Wt{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const tt={dialogContainer:(0,Je.X$)("dialogContainer",[(0,Je.SB)("void, exit",(0,Je.oB)({opacity:0,transform:"scale(0.7)"})),(0,Je.SB)("enter",(0,Je.oB)({transform:"none"})),(0,Je.eR)("* => enter",(0,Je.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,Je.oB)({transform:"none",opacity:1}))),(0,Je.eR)("* => void, * => exit",(0,Je.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,Je.oB)({opacity:0})))])};let Se=(()=>{class Ce extends y.en{constructor(Ne,Ve,de,Te,xt,Kt,Ft,ke){super(),this._elementRef=Ne,this._focusTrapFactory=Ve,this._changeDetectorRef=de,this._config=xt,this._interactivityChecker=Kt,this._ngZone=Ft,this._focusMonitor=ke,this._animationStateChanged=new t.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=We=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(We)),this._ariaLabelledBy=xt.ariaLabelledBy||null,this._document=Te}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(Ne){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(Ne)}attachTemplatePortal(Ne){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(Ne)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(Ne,Ve){this._interactivityChecker.isFocusable(Ne)||(Ne.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{Ne.addEventListener("blur",()=>Ne.removeAttribute("tabindex")),Ne.addEventListener("mousedown",()=>Ne.removeAttribute("tabindex"))})),Ne.focus(Ve)}_focusByCssSelector(Ne,Ve){let de=this._elementRef.nativeElement.querySelector(Ne);de&&this._forceFocus(de,Ve)}_trapFocus(){const Ne=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||Ne.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(Ve=>{Ve||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const Ne=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&Ne&&"function"==typeof Ne.focus){const Ve=(0,De.ht)(),de=this._elementRef.nativeElement;(!Ve||Ve===this._document.body||Ve===de||de.contains(Ve))&&(this._focusMonitor?(this._focusMonitor.focusVia(Ne,this._closeInteractionType),this._closeInteractionType=null):Ne.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,De.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const Ne=this._elementRef.nativeElement,Ve=(0,De.ht)();return Ne===Ve||Ne.contains(Ve)}}return Ce.\u0275fac=function(Ne){return new(Ne||Ce)(t.Y36(t.SBq),t.Y36(st.qV),t.Y36(t.sBO),t.Y36(Ae.K0,8),t.Y36(Wt),t.Y36(st.ic),t.Y36(t.R0b),t.Y36(st.tE))},Ce.\u0275dir=t.lG2({type:Ce,viewQuery:function(Ne,Ve){if(1&Ne&&t.Gf(y.Pl,7),2&Ne){let de;t.iGM(de=t.CRH())&&(Ve._portalOutlet=de.first)}},features:[t.qOj]}),Ce})(),Qe=(()=>{class Ce extends Se{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:Ne,totalTime:Ve}){"enter"===Ne?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:Ve})):"exit"===Ne&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:Ve}))}_onAnimationStart({toState:Ne,totalTime:Ve}){"enter"===Ne?this._animationStateChanged.next({state:"opening",totalTime:Ve}):("exit"===Ne||"void"===Ne)&&this._animationStateChanged.next({state:"closing",totalTime:Ve})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return Ce.\u0275fac=function(){let vt;return function(Ve){return(vt||(vt=t.n5z(Ce)))(Ve||Ce)}}(),Ce.\u0275cmp=t.Xpm({type:Ce,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(Ne,Ve){1&Ne&&t.WFA("@dialogContainer.start",function(Te){return Ve._onAnimationStart(Te)})("@dialogContainer.done",function(Te){return Ve._onAnimationDone(Te)}),2&Ne&&(t.Ikx("id",Ve._id),t.uIk("role",Ve._config.role)("aria-labelledby",Ve._config.ariaLabel?null:Ve._ariaLabelledBy)("aria-label",Ve._config.ariaLabel)("aria-describedby",Ve._config.ariaDescribedBy||null),t.d8E("@dialogContainer",Ve._state))},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(Ne,Ve){1&Ne&&t.YNc(0,Rt,0,0,"ng-template",0)},directives:[y.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[tt.dialogContainer]}}),Ce})(),dt=0;class it{constructor(vt,Ne,Ve="mat-dialog-"+dt++){this._overlayRef=vt,this._containerInstance=Ne,this.id=Ve,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new a.x,this._afterClosed=new a.x,this._beforeClosed=new a.x,this._state=0,Ne._id=Ve,Ne._animationStateChanged.pipe((0,Y.h)(de=>"opened"===de.state),(0,ee.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),Ne._animationStateChanged.pipe((0,Y.h)(de=>"closed"===de.state),(0,ee.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),vt.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),vt.keydownEvents().pipe((0,Y.h)(de=>de.keyCode===Ge.hY&&!this.disableClose&&!(0,Ge.Vb)(de))).subscribe(de=>{de.preventDefault(),Pe(this,"keyboard")}),vt.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Pe(this,"mouse")})}close(vt){this._result=vt,this._containerInstance._animationStateChanged.pipe((0,Y.h)(Ne=>"closing"===Ne.state),(0,ee.q)(1)).subscribe(Ne=>{this._beforeClosed.next(vt),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),Ne.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(vt){let Ne=this._getPositionStrategy();return vt&&(vt.left||vt.right)?vt.left?Ne.left(vt.left):Ne.right(vt.right):Ne.centerHorizontally(),vt&&(vt.top||vt.bottom)?vt.top?Ne.top(vt.top):Ne.bottom(vt.bottom):Ne.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(vt="",Ne=""){return this._overlayRef.updateSize({width:vt,height:Ne}),this._overlayRef.updatePosition(),this}addPanelClass(vt){return this._overlayRef.addPanelClass(vt),this}removePanelClass(vt){return this._overlayRef.removePanelClass(vt),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Pe(Ce,vt,Ne){return void 0!==Ce._containerInstance&&(Ce._containerInstance._closeInteractionType=vt),Ce.close(Ne)}const Re=new t.OlP("MatDialogData"),ge=new t.OlP("mat-dialog-default-options"),se=new t.OlP("mat-dialog-scroll-strategy"),ze={provide:se,deps:[O.aV],useFactory:function(Ce){return()=>Ce.scrollStrategies.block()}};let St=(()=>{class Ce{constructor(Ne,Ve,de,Te,xt,Kt,Ft,ke,We,_t){this._overlay=Ne,this._injector=Ve,this._defaultOptions=de,this._parentDialog=Te,this._overlayContainer=xt,this._dialogRefConstructor=Ft,this._dialogContainerType=ke,this._dialogDataToken=We,this._animationMode=_t,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new a.x,this._afterOpenedAtThisLevel=new a.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,f.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,_e.O)(void 0))),this._scrollStrategy=Kt}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const Ne=this._parentDialog;return Ne?Ne._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(Ne,Ve){if(Ve=function(Ce,vt){return Object.assign(Object.assign({},vt),Ce)}(Ve,this._defaultOptions||new Wt),Ve.id&&this.getDialogById(Ve.id),this._dialogAnimatingOpen)return this._lastDialogRef;const de=this._createOverlay(Ve),Te=this._attachDialogContainer(de,Ve);if("NoopAnimations"!==this._animationMode){const Kt=Te._animationStateChanged.subscribe(Ft=>{"opening"===Ft.state&&(this._dialogAnimatingOpen=!0),"opened"===Ft.state&&(this._dialogAnimatingOpen=!1,Kt.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new E.w0),this._animationStateSubscriptions.add(Kt)}const xt=this._attachDialogContent(Ne,Te,de,Ve);return this._lastDialogRef=xt,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(xt),xt.afterClosed().subscribe(()=>this._removeOpenDialog(xt)),this.afterOpened.next(xt),Te._initializeWithAttachedContent(),xt}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(Ne){return this.openDialogs.find(Ve=>Ve.id===Ne)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(Ne){const Ve=this._getOverlayConfig(Ne);return this._overlay.create(Ve)}_getOverlayConfig(Ne){const Ve=new O.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:Ne.scrollStrategy||this._scrollStrategy(),panelClass:Ne.panelClass,hasBackdrop:Ne.hasBackdrop,direction:Ne.direction,minWidth:Ne.minWidth,minHeight:Ne.minHeight,maxWidth:Ne.maxWidth,maxHeight:Ne.maxHeight,disposeOnNavigation:Ne.closeOnNavigation});return Ne.backdropClass&&(Ve.backdropClass=Ne.backdropClass),Ve}_attachDialogContainer(Ne,Ve){const Te=t.zs3.create({parent:Ve&&Ve.viewContainerRef&&Ve.viewContainerRef.injector||this._injector,providers:[{provide:Wt,useValue:Ve}]}),xt=new y.C5(this._dialogContainerType,Ve.viewContainerRef,Te,Ve.componentFactoryResolver);return Ne.attach(xt).instance}_attachDialogContent(Ne,Ve,de,Te){const xt=new this._dialogRefConstructor(de,Ve,Te.id);if(Ne instanceof t.Rgc)Ve.attachTemplatePortal(new y.UE(Ne,null,{$implicit:Te.data,dialogRef:xt}));else{const Kt=this._createInjector(Te,xt,Ve),Ft=Ve.attachComponentPortal(new y.C5(Ne,Te.viewContainerRef,Kt));xt.componentInstance=Ft.instance}return xt.updateSize(Te.width,Te.height).updatePosition(Te.position),xt}_createInjector(Ne,Ve,de){const Te=Ne&&Ne.viewContainerRef&&Ne.viewContainerRef.injector,xt=[{provide:this._dialogContainerType,useValue:de},{provide:this._dialogDataToken,useValue:Ne.data},{provide:this._dialogRefConstructor,useValue:Ve}];return Ne.direction&&(!Te||!Te.get(n.Is,null,t.XFs.Optional))&&xt.push({provide:n.Is,useValue:{value:Ne.direction,change:(0,I.of)()}}),t.zs3.create({parent:Te||this._injector,providers:xt})}_removeOpenDialog(Ne){const Ve=this.openDialogs.indexOf(Ne);Ve>-1&&(this.openDialogs.splice(Ve,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((de,Te)=>{de?Te.setAttribute("aria-hidden",de):Te.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const Ne=this._overlayContainer.getContainerElement();if(Ne.parentElement){const Ve=Ne.parentElement.children;for(let de=Ve.length-1;de>-1;de--){let Te=Ve[de];Te!==Ne&&"SCRIPT"!==Te.nodeName&&"STYLE"!==Te.nodeName&&!Te.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(Te,Te.getAttribute("aria-hidden")),Te.setAttribute("aria-hidden","true"))}}}_closeDialogs(Ne){let Ve=Ne.length;for(;Ve--;)Ne[Ve].close()}}return Ce.\u0275fac=function(Ne){t.$Z()},Ce.\u0275dir=t.lG2({type:Ce}),Ce})(),wt=(()=>{class Ce extends St{constructor(Ne,Ve,de,Te,xt,Kt,Ft,ke){super(Ne,Ve,Te,Kt,Ft,xt,it,Qe,Re,ke)}}return Ce.\u0275fac=function(Ne){return new(Ne||Ce)(t.LFG(O.aV),t.LFG(t.zs3),t.LFG(Ae.Ye,8),t.LFG(ge,8),t.LFG(se),t.LFG(Ce,12),t.LFG(O.Xj),t.LFG(lt.Qb,8))},Ce.\u0275prov=t.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})(),yi=(()=>{class Ce{}return Ce.\u0275fac=function(Ne){return new(Ne||Ce)},Ce.\u0275mod=t.oAB({type:Ce}),Ce.\u0275inj=t.cJS({providers:[wt,ze],imports:[[O.U8,y.eL,e.BQ],e.BQ]}),Ce})()},4834:(li,ht,W)=>{"use strict";W.d(ht,{d:()=>e,t:()=>n});var O=W(5e3),y=W(3191),t=W(508);let e=(()=>{class a{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(E){this._vertical=(0,y.Ig)(E)}get inset(){return this._inset}set inset(E){this._inset=(0,y.Ig)(E)}}return a.\u0275fac=function(E){return new(E||a)},a.\u0275cmp=O.Xpm({type:a,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(E,I){2&E&&(O.uIk("aria-orientation",I.vertical?"vertical":"horizontal"),O.ekj("mat-divider-vertical",I.vertical)("mat-divider-horizontal",!I.vertical)("mat-divider-inset",I.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(E,I){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),a})(),n=(()=>{class a{}return a.\u0275fac=function(E){return new(E||a)},a.\u0275mod=O.oAB({type:a}),a.\u0275inj=O.cJS({imports:[[t.BQ],t.BQ]}),a})()},1125:(li,ht,W)=>{"use strict";W.d(ht,{pp:()=>vt,To:()=>Ne,ib:()=>Xt,u4:()=>yi,yz:()=>Lt,yK:()=>Ce});var O=W(5e3),y=W(3191),t=W(7579),e=W(727),n=W(449);let a=0;const f=new O.OlP("CdkAccordion");let E=(()=>{class Ve{constructor(){this._stateChanges=new t.x,this._openCloseAllActions=new t.x,this.id="cdk-accordion-"+a++,this._multi=!1}get multi(){return this._multi}set multi(Te){this._multi=(0,y.Ig)(Te)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(Te){this._stateChanges.next(Te)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return Ve.\u0275fac=function(Te){return new(Te||Ve)},Ve.\u0275dir=O.lG2({type:Ve,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[O._Bn([{provide:f,useExisting:Ve}]),O.TTD]}),Ve})(),I=0,Y=(()=>{class Ve{constructor(Te,xt,Kt){this.accordion=Te,this._changeDetectorRef=xt,this._expansionDispatcher=Kt,this._openCloseAllSubscription=e.w0.EMPTY,this.closed=new O.vpe,this.opened=new O.vpe,this.destroyed=new O.vpe,this.expandedChange=new O.vpe,this.id="cdk-accordion-child-"+I++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=Kt.listen((Ft,ke)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===ke&&this.id!==Ft&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(Te){Te=(0,y.Ig)(Te),this._expanded!==Te&&(this._expanded=Te,this.expandedChange.emit(Te),Te?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(Te){this._disabled=(0,y.Ig)(Te)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(Te=>{this.disabled||(this.expanded=Te)})}}return Ve.\u0275fac=function(Te){return new(Te||Ve)(O.Y36(f,12),O.Y36(O.sBO),O.Y36(n.A8))},Ve.\u0275dir=O.lG2({type:Ve,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[O._Bn([{provide:f,useValue:void 0}])]}),Ve})(),ee=(()=>{class Ve{}return Ve.\u0275fac=function(Te){return new(Te||Ve)},Ve.\u0275mod=O.oAB({type:Ve}),Ve.\u0275inj=O.cJS({}),Ve})();var _e=W(7429),De=W(9808),Ae=W(508),Je=W(5664),st=W(1884),Ge=W(8675),lt=W(9300),Rt=W(5698),Wt=W(1159),tt=W(6360),Oe=W(515),Se=W(6451),Qe=W(1777);const dt=["body"];function it(Ve,de){}const Pe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Re=["mat-expansion-panel-header","*","mat-action-row"];function ge(Ve,de){if(1&Ve&&O._UZ(0,"span",2),2&Ve){const Te=O.oxw();O.Q6J("@indicatorRotate",Te._getExpandedState())}}const se=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],at=["mat-panel-title","mat-panel-description","*"],Be=new O.OlP("MAT_ACCORDION"),ze="225ms cubic-bezier(0.4,0.0,0.2,1)",St={indicatorRotate:(0,Qe.X$)("indicatorRotate",[(0,Qe.SB)("collapsed, void",(0,Qe.oB)({transform:"rotate(0deg)"})),(0,Qe.SB)("expanded",(0,Qe.oB)({transform:"rotate(180deg)"})),(0,Qe.eR)("expanded <=> collapsed, void => collapsed",(0,Qe.jt)(ze))]),bodyExpansion:(0,Qe.X$)("bodyExpansion",[(0,Qe.SB)("collapsed, void",(0,Qe.oB)({height:"0px",visibility:"hidden"})),(0,Qe.SB)("expanded",(0,Qe.oB)({height:"*",visibility:"visible"})),(0,Qe.eR)("expanded <=> collapsed, void => collapsed",(0,Qe.jt)(ze))])};let wt=(()=>{class Ve{constructor(Te){this._template=Te}}return Ve.\u0275fac=function(Te){return new(Te||Ve)(O.Y36(O.Rgc))},Ve.\u0275dir=O.lG2({type:Ve,selectors:[["ng-template","matExpansionPanelContent",""]]}),Ve})(),At=0;const $t=new O.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Xt=(()=>{class Ve extends Y{constructor(Te,xt,Kt,Ft,ke,We,_t){super(Te,xt,Kt),this._viewContainerRef=Ft,this._animationMode=We,this._hideToggle=!1,this.afterExpand=new O.vpe,this.afterCollapse=new O.vpe,this._inputChanges=new t.x,this._headerId="mat-expansion-panel-header-"+At++,this._bodyAnimationDone=new t.x,this.accordion=Te,this._document=ke,this._bodyAnimationDone.pipe((0,st.x)((Ue,Ye)=>Ue.fromState===Ye.fromState&&Ue.toState===Ye.toState)).subscribe(Ue=>{"void"!==Ue.fromState&&("expanded"===Ue.toState?this.afterExpand.emit():"collapsed"===Ue.toState&&this.afterCollapse.emit())}),_t&&(this.hideToggle=_t.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(Te){this._hideToggle=(0,y.Ig)(Te)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(Te){this._togglePosition=Te}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,Ge.O)(null),(0,lt.h)(()=>this.expanded&&!this._portal),(0,Rt.q)(1)).subscribe(()=>{this._portal=new _e.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(Te){this._inputChanges.next(Te)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const Te=this._document.activeElement,xt=this._body.nativeElement;return Te===xt||xt.contains(Te)}return!1}}return Ve.\u0275fac=function(Te){return new(Te||Ve)(O.Y36(Be,12),O.Y36(O.sBO),O.Y36(n.A8),O.Y36(O.s_b),O.Y36(De.K0),O.Y36(tt.Qb,8),O.Y36($t,8))},Ve.\u0275cmp=O.Xpm({type:Ve,selectors:[["mat-expansion-panel"]],contentQueries:function(Te,xt,Kt){if(1&Te&&O.Suo(Kt,wt,5),2&Te){let Ft;O.iGM(Ft=O.CRH())&&(xt._lazyContent=Ft.first)}},viewQuery:function(Te,xt){if(1&Te&&O.Gf(dt,5),2&Te){let Kt;O.iGM(Kt=O.CRH())&&(xt._body=Kt.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(Te,xt){2&Te&&O.ekj("mat-expanded",xt.expanded)("_mat-animation-noopable","NoopAnimations"===xt._animationMode)("mat-expansion-panel-spacing",xt._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[O._Bn([{provide:Be,useValue:void 0}]),O.qOj,O.TTD],ngContentSelectors:Re,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(Te,xt){1&Te&&(O.F$t(Pe),O.Hsn(0),O.TgZ(1,"div",0,1),O.NdJ("@bodyExpansion.done",function(Ft){return xt._bodyAnimationDone.next(Ft)}),O.TgZ(3,"div",2),O.Hsn(4,1),O.YNc(5,it,0,0,"ng-template",3),O.qZA(),O.Hsn(6,2),O.qZA()),2&Te&&(O.xp6(1),O.Q6J("@bodyExpansion",xt._getExpandedState())("id",xt.id),O.uIk("aria-labelledby",xt._headerId),O.xp6(4),O.Q6J("cdkPortalOutlet",xt._portal))},directives:[_e.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[St.bodyExpansion]},changeDetection:0}),Ve})();class Wi{}const pi=(0,Ae.sb)(Wi);let Lt=(()=>{class Ve extends pi{constructor(Te,xt,Kt,Ft,ke,We,_t){super(),this.panel=Te,this._element=xt,this._focusMonitor=Kt,this._changeDetectorRef=Ft,this._animationMode=We,this._parentChangeSubscription=e.w0.EMPTY;const Ue=Te.accordion?Te.accordion._stateChanges.pipe((0,lt.h)(Ye=>!(!Ye.hideToggle&&!Ye.togglePosition))):Oe.E;this.tabIndex=parseInt(_t||"")||0,this._parentChangeSubscription=(0,Se.T)(Te.opened,Te.closed,Ue,Te._inputChanges.pipe((0,lt.h)(Ye=>!!(Ye.hideToggle||Ye.disabled||Ye.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),Te.closed.pipe((0,lt.h)(()=>Te._containsFocus())).subscribe(()=>Kt.focusVia(xt,"program")),ke&&(this.expandedHeight=ke.expandedHeight,this.collapsedHeight=ke.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const Te=this._isExpanded();return Te&&this.expandedHeight?this.expandedHeight:!Te&&this.collapsedHeight?this.collapsedHeight:null}_keydown(Te){switch(Te.keyCode){case Wt.L_:case Wt.K5:(0,Wt.Vb)(Te)||(Te.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(Te))}}focus(Te,xt){Te?this._focusMonitor.focusVia(this._element,Te,xt):this._element.nativeElement.focus(xt)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(Te=>{Te&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return Ve.\u0275fac=function(Te){return new(Te||Ve)(O.Y36(Xt,1),O.Y36(O.SBq),O.Y36(Je.tE),O.Y36(O.sBO),O.Y36($t,8),O.Y36(tt.Qb,8),O.$8M("tabindex"))},Ve.\u0275cmp=O.Xpm({type:Ve,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(Te,xt){1&Te&&O.NdJ("click",function(){return xt._toggle()})("keydown",function(Ft){return xt._keydown(Ft)}),2&Te&&(O.uIk("id",xt.panel._headerId)("tabindex",xt.tabIndex)("aria-controls",xt._getPanelId())("aria-expanded",xt._isExpanded())("aria-disabled",xt.panel.disabled),O.Udp("height",xt._getHeaderHeight()),O.ekj("mat-expanded",xt._isExpanded())("mat-expansion-toggle-indicator-after","after"===xt._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===xt._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===xt._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[O.qOj],ngContentSelectors:at,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(Te,xt){1&Te&&(O.F$t(se),O.TgZ(0,"span",0),O.Hsn(1),O.Hsn(2,1),O.Hsn(3,2),O.qZA(),O.YNc(4,ge,1,1,"span",1)),2&Te&&(O.xp6(4),O.Q6J("ngIf",xt._showToggle()))},directives:[De.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[St.indicatorRotate]},changeDetection:0}),Ve})(),yi=(()=>{class Ve{}return Ve.\u0275fac=function(Te){return new(Te||Ve)},Ve.\u0275dir=O.lG2({type:Ve,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),Ve})(),Ce=(()=>{class Ve{}return Ve.\u0275fac=function(Te){return new(Te||Ve)},Ve.\u0275dir=O.lG2({type:Ve,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),Ve})(),vt=(()=>{class Ve extends E{constructor(){super(...arguments),this._ownHeaders=new O.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(Te){this._hideToggle=(0,y.Ig)(Te)}ngAfterContentInit(){this._headers.changes.pipe((0,Ge.O)(this._headers)).subscribe(Te=>{this._ownHeaders.reset(Te.filter(xt=>xt.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new Je.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(Te){this._keyManager.onKeydown(Te)}_handleHeaderFocus(Te){this._keyManager.updateActiveItem(Te)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return Ve.\u0275fac=function(){let de;return function(xt){return(de||(de=O.n5z(Ve)))(xt||Ve)}}(),Ve.\u0275dir=O.lG2({type:Ve,selectors:[["mat-accordion"]],contentQueries:function(Te,xt,Kt){if(1&Te&&O.Suo(Kt,Lt,5),2&Te){let Ft;O.iGM(Ft=O.CRH())&&(xt._headers=Ft)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(Te,xt){2&Te&&O.ekj("mat-accordion-multi",xt.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[O._Bn([{provide:Be,useExisting:Ve}]),O.qOj]}),Ve})(),Ne=(()=>{class Ve{}return Ve.\u0275fac=function(Te){return new(Te||Ve)},Ve.\u0275mod=O.oAB({type:Ve}),Ve.\u0275inj=O.cJS({imports:[[De.ez,Ae.BQ,ee,_e.eL]]}),Ve})()},7322:(li,ht,W)=>{"use strict";W.d(ht,{G_:()=>We,KE:()=>_t,Eo:()=>At,lN:()=>Ue,hX:()=>yi});var O=W(7144),y=W(9808),t=W(5e3),e=W(508),n=W(3191),a=W(7579),f=W(6451),E=W(4968),I=W(8675),Y=W(2722),ee=W(5698),_e=W(1777),De=W(6360),Ae=W(226),Je=W(925);const st=["connectionContainer"],Ge=["inputContainer"],lt=["label"];function Rt(Ye,et){1&Ye&&(t.ynx(0),t.TgZ(1,"div",14),t._UZ(2,"div",15),t._UZ(3,"div",16),t._UZ(4,"div",17),t.qZA(),t.TgZ(5,"div",18),t._UZ(6,"div",15),t._UZ(7,"div",16),t._UZ(8,"div",17),t.qZA(),t.BQk())}function Wt(Ye,et){if(1&Ye){const Ie=t.EpF();t.TgZ(0,"div",19),t.NdJ("cdkObserveContent",function(){return t.CHM(Ie),t.oxw().updateOutlineGap()}),t.Hsn(1,1),t.qZA()}if(2&Ye){const Ie=t.oxw();t.Q6J("cdkObserveContentDisabled","outline"!=Ie.appearance)}}function tt(Ye,et){if(1&Ye&&(t.ynx(0),t.Hsn(1,2),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.BQk()),2&Ye){const Ie=t.oxw(2);t.xp6(3),t.Oqu(Ie._control.placeholder)}}function Oe(Ye,et){1&Ye&&t.Hsn(0,3,["*ngSwitchCase","true"])}function Se(Ye,et){1&Ye&&(t.TgZ(0,"span",23),t._uU(1," *"),t.qZA())}function Qe(Ye,et){if(1&Ye){const Ie=t.EpF();t.TgZ(0,"label",20,21),t.NdJ("cdkObserveContent",function(){return t.CHM(Ie),t.oxw().updateOutlineGap()}),t.YNc(2,tt,4,1,"ng-container",12),t.YNc(3,Oe,1,0,"ng-content",12),t.YNc(4,Se,2,0,"span",22),t.qZA()}if(2&Ye){const Ie=t.oxw();t.ekj("mat-empty",Ie._control.empty&&!Ie._shouldAlwaysFloat())("mat-form-field-empty",Ie._control.empty&&!Ie._shouldAlwaysFloat())("mat-accent","accent"==Ie.color)("mat-warn","warn"==Ie.color),t.Q6J("cdkObserveContentDisabled","outline"!=Ie.appearance)("id",Ie._labelId)("ngSwitch",Ie._hasLabel()),t.uIk("for",Ie._control.id)("aria-owns",Ie._control.id),t.xp6(2),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngIf",!Ie.hideRequiredMarker&&Ie._control.required&&!Ie._control.disabled)}}function dt(Ye,et){1&Ye&&(t.TgZ(0,"div",24),t.Hsn(1,4),t.qZA())}function it(Ye,et){if(1&Ye&&(t.TgZ(0,"div",25),t._UZ(1,"span",26),t.qZA()),2&Ye){const Ie=t.oxw();t.xp6(1),t.ekj("mat-accent","accent"==Ie.color)("mat-warn","warn"==Ie.color)}}function Pe(Ye,et){if(1&Ye&&(t.TgZ(0,"div"),t.Hsn(1,5),t.qZA()),2&Ye){const Ie=t.oxw();t.Q6J("@transitionMessages",Ie._subscriptAnimationState)}}function Re(Ye,et){if(1&Ye&&(t.TgZ(0,"div",30),t._uU(1),t.qZA()),2&Ye){const Ie=t.oxw(2);t.Q6J("id",Ie._hintLabelId),t.xp6(1),t.Oqu(Ie.hintLabel)}}function ge(Ye,et){if(1&Ye&&(t.TgZ(0,"div",27),t.YNc(1,Re,2,2,"div",28),t.Hsn(2,6),t._UZ(3,"div",29),t.Hsn(4,7),t.qZA()),2&Ye){const Ie=t.oxw();t.Q6J("@transitionMessages",Ie._subscriptAnimationState),t.xp6(1),t.Q6J("ngIf",Ie.hintLabel)}}const se=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],at=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],ze=new t.OlP("MatError"),wt={transitionMessages:(0,_e.X$)("transitionMessages",[(0,_e.SB)("enter",(0,_e.oB)({opacity:1,transform:"translateY(0%)"})),(0,_e.eR)("void => enter",[(0,_e.oB)({opacity:0,transform:"translateY(-5px)"}),(0,_e.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let At=(()=>{class Ye{}return Ye.\u0275fac=function(Ie){return new(Ie||Ye)},Ye.\u0275dir=t.lG2({type:Ye}),Ye})();const pi=new t.OlP("MatHint");let yi=(()=>{class Ye{}return Ye.\u0275fac=function(Ie){return new(Ie||Ye)},Ye.\u0275dir=t.lG2({type:Ye,selectors:[["mat-label"]]}),Ye})(),Ce=(()=>{class Ye{}return Ye.\u0275fac=function(Ie){return new(Ie||Ye)},Ye.\u0275dir=t.lG2({type:Ye,selectors:[["mat-placeholder"]]}),Ye})();const vt=new t.OlP("MatPrefix"),Ve=new t.OlP("MatSuffix");let Te=0;const Ft=(0,e.pj)(class{constructor(Ye){this._elementRef=Ye}},"primary"),ke=new t.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),We=new t.OlP("MatFormField");let _t=(()=>{class Ye extends Ft{constructor(Ie,Xe,Bt,Vt,bi,si,ni){super(Ie),this._changeDetectorRef=Xe,this._dir=Bt,this._defaults=Vt,this._platform=bi,this._ngZone=si,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new a.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Te++,this._labelId="mat-form-field-label-"+Te++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==ni,this.appearance=Vt&&Vt.appearance?Vt.appearance:"legacy",this._hideRequiredMarker=!(!Vt||null==Vt.hideRequiredMarker)&&Vt.hideRequiredMarker}get appearance(){return this._appearance}set appearance(Ie){const Xe=this._appearance;this._appearance=Ie||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&Xe!==Ie&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(Ie){this._hideRequiredMarker=(0,n.Ig)(Ie)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(Ie){this._hintLabel=Ie,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(Ie){Ie!==this._floatLabel&&(this._floatLabel=Ie||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(Ie){this._explicitFormFieldControl=Ie}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const Ie=this._control;Ie.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${Ie.controlType}`),Ie.stateChanges.pipe((0,I.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),Ie.ngControl&&Ie.ngControl.valueChanges&&Ie.ngControl.valueChanges.pipe((0,Y.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Y.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,f.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,I.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,I.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,Y.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(Ie){const Xe=this._control?this._control.ngControl:null;return Xe&&Xe[Ie]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,E.R)(this._label.nativeElement,"transitionend").pipe((0,ee.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let Ie=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&Ie.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const Xe=this._hintChildren?this._hintChildren.find(Vt=>"start"===Vt.align):null,Bt=this._hintChildren?this._hintChildren.find(Vt=>"end"===Vt.align):null;Xe?Ie.push(Xe.id):this._hintLabel&&Ie.push(this._hintLabelId),Bt&&Ie.push(Bt.id)}else this._errorChildren&&Ie.push(...this._errorChildren.map(Xe=>Xe.id));this._control.setDescribedByIds(Ie)}}_validateControlChild(){}updateOutlineGap(){const Ie=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&Ie&&Ie.children.length&&Ie.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let Xe=0,Bt=0;const Vt=this._connectionContainerRef.nativeElement,bi=Vt.querySelectorAll(".mat-form-field-outline-start"),si=Vt.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const ni=Vt.getBoundingClientRect();if(0===ni.width&&0===ni.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const sn=this._getStartEnd(ni),xi=Ie.children,Ln=this._getStartEnd(xi[0].getBoundingClientRect());let Vi=0;for(let Ni=0;Ni<xi.length;Ni++)Vi+=xi[Ni].offsetWidth;Xe=Math.abs(Ln-sn)-5,Bt=Vi>0?.75*Vi+10:0}for(let ni=0;ni<bi.length;ni++)bi[ni].style.width=`${Xe}px`;for(let ni=0;ni<si.length;ni++)si[ni].style.width=`${Bt}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(Ie){return this._dir&&"rtl"===this._dir.value?Ie.right:Ie.left}_isAttachedToDOM(){const Ie=this._elementRef.nativeElement;if(Ie.getRootNode){const Xe=Ie.getRootNode();return Xe&&Xe!==Ie}return document.documentElement.contains(Ie)}}return Ye.\u0275fac=function(Ie){return new(Ie||Ye)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(Ae.Is,8),t.Y36(ke,8),t.Y36(Je.t4),t.Y36(t.R0b),t.Y36(De.Qb,8))},Ye.\u0275cmp=t.Xpm({type:Ye,selectors:[["mat-form-field"]],contentQueries:function(Ie,Xe,Bt){if(1&Ie&&(t.Suo(Bt,At,5),t.Suo(Bt,At,7),t.Suo(Bt,yi,5),t.Suo(Bt,yi,7),t.Suo(Bt,Ce,5),t.Suo(Bt,ze,5),t.Suo(Bt,pi,5),t.Suo(Bt,vt,5),t.Suo(Bt,Ve,5)),2&Ie){let Vt;t.iGM(Vt=t.CRH())&&(Xe._controlNonStatic=Vt.first),t.iGM(Vt=t.CRH())&&(Xe._controlStatic=Vt.first),t.iGM(Vt=t.CRH())&&(Xe._labelChildNonStatic=Vt.first),t.iGM(Vt=t.CRH())&&(Xe._labelChildStatic=Vt.first),t.iGM(Vt=t.CRH())&&(Xe._placeholderChild=Vt.first),t.iGM(Vt=t.CRH())&&(Xe._errorChildren=Vt),t.iGM(Vt=t.CRH())&&(Xe._hintChildren=Vt),t.iGM(Vt=t.CRH())&&(Xe._prefixChildren=Vt),t.iGM(Vt=t.CRH())&&(Xe._suffixChildren=Vt)}},viewQuery:function(Ie,Xe){if(1&Ie&&(t.Gf(st,7),t.Gf(Ge,5),t.Gf(lt,5)),2&Ie){let Bt;t.iGM(Bt=t.CRH())&&(Xe._connectionContainerRef=Bt.first),t.iGM(Bt=t.CRH())&&(Xe._inputContainerRef=Bt.first),t.iGM(Bt=t.CRH())&&(Xe._label=Bt.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(Ie,Xe){2&Ie&&t.ekj("mat-form-field-appearance-standard","standard"==Xe.appearance)("mat-form-field-appearance-fill","fill"==Xe.appearance)("mat-form-field-appearance-outline","outline"==Xe.appearance)("mat-form-field-appearance-legacy","legacy"==Xe.appearance)("mat-form-field-invalid",Xe._control.errorState)("mat-form-field-can-float",Xe._canLabelFloat())("mat-form-field-should-float",Xe._shouldLabelFloat())("mat-form-field-has-label",Xe._hasFloatingLabel())("mat-form-field-hide-placeholder",Xe._hideControlPlaceholder())("mat-form-field-disabled",Xe._control.disabled)("mat-form-field-autofilled",Xe._control.autofilled)("mat-focused",Xe._control.focused)("ng-untouched",Xe._shouldForward("untouched"))("ng-touched",Xe._shouldForward("touched"))("ng-pristine",Xe._shouldForward("pristine"))("ng-dirty",Xe._shouldForward("dirty"))("ng-valid",Xe._shouldForward("valid"))("ng-invalid",Xe._shouldForward("invalid"))("ng-pending",Xe._shouldForward("pending"))("_mat-animation-noopable",!Xe._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[t._Bn([{provide:We,useExisting:Ye}]),t.qOj],ngContentSelectors:at,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(Ie,Xe){1&Ie&&(t.F$t(se),t.TgZ(0,"div",0),t.TgZ(1,"div",1,2),t.NdJ("click",function(Vt){return Xe._control.onContainerClick&&Xe._control.onContainerClick(Vt)}),t.YNc(3,Rt,9,0,"ng-container",3),t.YNc(4,Wt,2,1,"div",4),t.TgZ(5,"div",5,6),t.Hsn(7),t.TgZ(8,"span",7),t.YNc(9,Qe,5,16,"label",8),t.qZA(),t.qZA(),t.YNc(10,dt,2,0,"div",9),t.qZA(),t.YNc(11,it,2,4,"div",10),t.TgZ(12,"div",11),t.YNc(13,Pe,2,1,"div",12),t.YNc(14,ge,5,2,"div",13),t.qZA(),t.qZA()),2&Ie&&(t.xp6(3),t.Q6J("ngIf","outline"==Xe.appearance),t.xp6(1),t.Q6J("ngIf",Xe._prefixChildren.length),t.xp6(5),t.Q6J("ngIf",Xe._hasFloatingLabel()),t.xp6(1),t.Q6J("ngIf",Xe._suffixChildren.length),t.xp6(1),t.Q6J("ngIf","outline"!=Xe.appearance),t.xp6(1),t.Q6J("ngSwitch",Xe._getDisplayedMessages()),t.xp6(1),t.Q6J("ngSwitchCase","error"),t.xp6(1),t.Q6J("ngSwitchCase","hint"))},directives:[y.O5,y.RF,y.n9,O.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[wt.transitionMessages]},changeDetection:0}),Ye})(),Ue=(()=>{class Ye{}return Ye.\u0275fac=function(Ie){return new(Ie||Ye)},Ye.\u0275mod=t.oAB({type:Ye}),Ye.\u0275inj=t.cJS({imports:[[y.ez,e.BQ,O.Q8],e.BQ]}),Ye})()},3954:(li,ht,W)=>{"use strict";W.d(ht,{Il:()=>dt,N6:()=>it,DX:()=>_e,jo:()=>Je,$H:()=>De});var O=W(5e3),y=W(508),t=W(3191),e=W(226);const n=["*"],a=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],f=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class I{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const ge=Math.max(...this.tracker);return ge>1?this.rowCount+ge-1:this.rowCount}update(ge,se){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(ge),this.tracker.fill(0,0,this.tracker.length),this.positions=se.map(at=>this._trackTile(at))}_trackTile(ge){const se=this._findMatchingGap(ge.colspan);return this._markTilePosition(se,ge),this.columnIndex=se+ge.colspan,new Y(this.rowIndex,se)}_findMatchingGap(ge){let se=-1,at=-1;do{this.columnIndex+ge>this.tracker.length?(this._nextRow(),se=this.tracker.indexOf(0,this.columnIndex),at=this._findGapEndIndex(se)):(se=this.tracker.indexOf(0,this.columnIndex),-1!=se?(at=this._findGapEndIndex(se),this.columnIndex=se+1):(this._nextRow(),se=this.tracker.indexOf(0,this.columnIndex),at=this._findGapEndIndex(se)))}while(at-se<ge||0==at);return Math.max(se,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let ge=0;ge<this.tracker.length;ge++)this.tracker[ge]=Math.max(0,this.tracker[ge]-1)}_findGapEndIndex(ge){for(let se=ge+1;se<this.tracker.length;se++)if(0!=this.tracker[se])return se;return this.tracker.length}_markTilePosition(ge,se){for(let at=0;at<se.colspan;at++)this.tracker[ge+at]=se.rowspan}}class Y{constructor(ge,se){this.row=ge,this.col=se}}const ee=new O.OlP("MAT_GRID_LIST");let _e=(()=>{class Re{constructor(se,at){this._element=se,this._gridList=at,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(se){this._rowspan=Math.round((0,t.su)(se))}get colspan(){return this._colspan}set colspan(se){this._colspan=Math.round((0,t.su)(se))}_setStyle(se,at){this._element.nativeElement.style[se]=at}}return Re.\u0275fac=function(se){return new(se||Re)(O.Y36(O.SBq),O.Y36(ee,8))},Re.\u0275cmp=O.Xpm({type:Re,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(se,at){2&se&&O.uIk("rowspan",at.rowspan)("colspan",at.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(se,at){1&se&&(O.F$t(),O.TgZ(0,"div",0),O.Hsn(1),O.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Re})(),De=(()=>{class Re{constructor(se){this._element=se}ngAfterContentInit(){(0,y.E0)(this._lines,this._element)}}return Re.\u0275fac=function(se){return new(se||Re)(O.Y36(O.SBq))},Re.\u0275cmp=O.Xpm({type:Re,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(se,at,Be){if(1&se&&O.Suo(Be,y.X2,5),2&se){let ze;O.iGM(ze=O.CRH())&&(at._lines=ze)}},ngContentSelectors:f,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(se,at){1&se&&(O.F$t(a),O.Hsn(0),O.TgZ(1,"div",0),O.Hsn(2,1),O.qZA(),O.Hsn(3,2))},encapsulation:2,changeDetection:0}),Re})(),Je=(()=>{class Re{}return Re.\u0275fac=function(se){return new(se||Re)},Re.\u0275dir=O.lG2({type:Re,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),Re})();const Ge=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class lt{constructor(){this._rows=0,this._rowspan=0}init(ge,se,at,Be){this._gutterSize=Se(ge),this._rows=se.rowCount,this._rowspan=se.rowspan,this._cols=at,this._direction=Be}getBaseTileSize(ge,se){return`(${ge}% - (${this._gutterSize} * ${se}))`}getTilePosition(ge,se){return 0===se?"0":Oe(`(${ge} + ${this._gutterSize}) * ${se}`)}getTileSize(ge,se){return`(${ge} * ${se}) + (${se-1} * ${this._gutterSize})`}setStyle(ge,se,at){let Be=100/this._cols,ze=(this._cols-1)/this._cols;this.setColStyles(ge,at,Be,ze),this.setRowStyles(ge,se,Be,ze)}setColStyles(ge,se,at,Be){let ze=this.getBaseTileSize(at,Be);ge._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(ze,se)),ge._setStyle("width",Oe(this.getTileSize(ze,ge.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(ge){return`${this._rowspan} * ${this.getTileSize(ge,1)}`}getComputedHeight(){return null}}class Rt extends lt{constructor(ge){super(),this.fixedRowHeight=ge}init(ge,se,at,Be){super.init(ge,se,at,Be),this.fixedRowHeight=Se(this.fixedRowHeight),Ge.test(this.fixedRowHeight)}setRowStyles(ge,se){ge._setStyle("top",this.getTilePosition(this.fixedRowHeight,se)),ge._setStyle("height",Oe(this.getTileSize(this.fixedRowHeight,ge.rowspan)))}getComputedHeight(){return["height",Oe(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(ge){ge._setListStyle(["height",null]),ge._tiles&&ge._tiles.forEach(se=>{se._setStyle("top",null),se._setStyle("height",null)})}}class Wt extends lt{constructor(ge){super(),this._parseRatio(ge)}setRowStyles(ge,se,at,Be){this.baseTileHeight=this.getBaseTileSize(at/this.rowHeightRatio,Be),ge._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,se)),ge._setStyle("paddingTop",Oe(this.getTileSize(this.baseTileHeight,ge.rowspan)))}getComputedHeight(){return["paddingBottom",Oe(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(ge){ge._setListStyle(["paddingBottom",null]),ge._tiles.forEach(se=>{se._setStyle("marginTop",null),se._setStyle("paddingTop",null)})}_parseRatio(ge){const se=ge.split(":");this.rowHeightRatio=parseFloat(se[0])/parseFloat(se[1])}}class tt extends lt{setRowStyles(ge,se){let ze=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);ge._setStyle("top",this.getTilePosition(ze,se)),ge._setStyle("height",Oe(this.getTileSize(ze,ge.rowspan)))}reset(ge){ge._tiles&&ge._tiles.forEach(se=>{se._setStyle("top",null),se._setStyle("height",null)})}}function Oe(Re){return`calc(${Re})`}function Se(Re){return Re.match(/([A-Za-z%]+)$/)?Re:`${Re}px`}let dt=(()=>{class Re{constructor(se,at){this._element=se,this._dir=at,this._gutter="1px"}get cols(){return this._cols}set cols(se){this._cols=Math.max(1,Math.round((0,t.su)(se)))}get gutterSize(){return this._gutter}set gutterSize(se){this._gutter=`${null==se?"":se}`}get rowHeight(){return this._rowHeight}set rowHeight(se){const at=`${null==se?"":se}`;at!==this._rowHeight&&(this._rowHeight=at,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(se){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===se?new tt:se&&se.indexOf(":")>-1?new Wt(se):new Rt(se)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new I);const se=this._tileCoordinator,at=this._tiles.filter(ze=>!ze._gridList||ze._gridList===this),Be=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,at),this._tileStyler.init(this.gutterSize,se,this.cols,Be),at.forEach((ze,St)=>{const wt=se.positions[St];this._tileStyler.setStyle(ze,wt.row,wt.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(se){se&&(this._element.nativeElement.style[se[0]]=se[1])}}return Re.\u0275fac=function(se){return new(se||Re)(O.Y36(O.SBq),O.Y36(e.Is,8))},Re.\u0275cmp=O.Xpm({type:Re,selectors:[["mat-grid-list"]],contentQueries:function(se,at,Be){if(1&se&&O.Suo(Be,_e,5),2&se){let ze;O.iGM(ze=O.CRH())&&(at._tiles=ze)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(se,at){2&se&&O.uIk("cols",at.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[O._Bn([{provide:ee,useExisting:Re}])],ngContentSelectors:n,decls:2,vars:0,template:function(se,at){1&se&&(O.F$t(),O.TgZ(0,"div"),O.Hsn(1),O.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Re})(),it=(()=>{class Re{}return Re.\u0275fac=function(se){return new(se||Re)},Re.\u0275mod=O.oAB({type:Re}),Re.\u0275inj=O.cJS({imports:[[y.uc,y.BQ],y.uc,y.BQ]}),Re})()},3874:(li,ht,W)=>{"use strict";W.d(ht,{Hw:()=>Wi,Ps:()=>pi});var O=W(5e3),y=W(508),t=W(3191),e=W(9808),n=W(8306),a=W(576),E=W(9646),I=W(4128),Y=W(727),ee=W(8505),_e=W(4004),De=W(262),Ae=W(8746),Je=W(3099),st=W(5698),Ge=W(520),lt=W(2313);const Rt=["*"];let Wt;function Oe(Lt){var yi;return(null===(yi=function(){if(void 0===Wt&&(Wt=null,"undefined"!=typeof window)){const Lt=window;void 0!==Lt.trustedTypes&&(Wt=Lt.trustedTypes.createPolicy("angular#components",{createHTML:yi=>yi}))}return Wt}())||void 0===yi?void 0:yi.createHTML(Lt))||Lt}function Se(Lt){return Error(`Unable to find icon with the name "${Lt}"`)}function dt(Lt){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Lt}".`)}function it(Lt){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Lt}".`)}class Pe{constructor(yi,Ce,vt){this.url=yi,this.svgText=Ce,this.options=vt}}let Re=(()=>{class Lt{constructor(Ce,vt,Ne,Ve){this._httpClient=Ce,this._sanitizer=vt,this._errorHandler=Ve,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Ne}addSvgIcon(Ce,vt,Ne){return this.addSvgIconInNamespace("",Ce,vt,Ne)}addSvgIconLiteral(Ce,vt,Ne){return this.addSvgIconLiteralInNamespace("",Ce,vt,Ne)}addSvgIconInNamespace(Ce,vt,Ne,Ve){return this._addSvgIconConfig(Ce,vt,new Pe(Ne,null,Ve))}addSvgIconResolver(Ce){return this._resolvers.push(Ce),this}addSvgIconLiteralInNamespace(Ce,vt,Ne,Ve){const de=this._sanitizer.sanitize(O.q3G.HTML,Ne);if(!de)throw it(Ne);const Te=Oe(de);return this._addSvgIconConfig(Ce,vt,new Pe("",Te,Ve))}addSvgIconSet(Ce,vt){return this.addSvgIconSetInNamespace("",Ce,vt)}addSvgIconSetLiteral(Ce,vt){return this.addSvgIconSetLiteralInNamespace("",Ce,vt)}addSvgIconSetInNamespace(Ce,vt,Ne){return this._addSvgIconSetConfig(Ce,new Pe(vt,null,Ne))}addSvgIconSetLiteralInNamespace(Ce,vt,Ne){const Ve=this._sanitizer.sanitize(O.q3G.HTML,vt);if(!Ve)throw it(vt);const de=Oe(Ve);return this._addSvgIconSetConfig(Ce,new Pe("",de,Ne))}registerFontClassAlias(Ce,vt=Ce){return this._fontCssClassesByAlias.set(Ce,vt),this}classNameForFontAlias(Ce){return this._fontCssClassesByAlias.get(Ce)||Ce}setDefaultFontSetClass(Ce){return this._defaultFontSetClass=Ce,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Ce){const vt=this._sanitizer.sanitize(O.q3G.RESOURCE_URL,Ce);if(!vt)throw dt(Ce);const Ne=this._cachedIconsByUrl.get(vt);return Ne?(0,E.of)(at(Ne)):this._loadSvgIconFromConfig(new Pe(Ce,null)).pipe((0,ee.b)(Ve=>this._cachedIconsByUrl.set(vt,Ve)),(0,_e.U)(Ve=>at(Ve)))}getNamedSvgIcon(Ce,vt=""){const Ne=Be(vt,Ce);let Ve=this._svgIconConfigs.get(Ne);if(Ve)return this._getSvgFromConfig(Ve);if(Ve=this._getIconConfigFromResolvers(vt,Ce),Ve)return this._svgIconConfigs.set(Ne,Ve),this._getSvgFromConfig(Ve);const de=this._iconSetConfigs.get(vt);return de?this._getSvgFromIconSetConfigs(Ce,de):function(Lt,yi){const Ce=(0,a.m)(Lt)?Lt:()=>Lt,vt=Ne=>Ne.error(Ce());return new n.y(vt)}(Se(Ne))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Ce){return Ce.svgText?(0,E.of)(at(this._svgElementFromConfig(Ce))):this._loadSvgIconFromConfig(Ce).pipe((0,_e.U)(vt=>at(vt)))}_getSvgFromIconSetConfigs(Ce,vt){const Ne=this._extractIconWithNameFromAnySet(Ce,vt);if(Ne)return(0,E.of)(Ne);const Ve=vt.filter(de=>!de.svgText).map(de=>this._loadSvgIconSetFromConfig(de).pipe((0,De.K)(Te=>{const Kt=`Loading icon set URL: ${this._sanitizer.sanitize(O.q3G.RESOURCE_URL,de.url)} failed: ${Te.message}`;return this._errorHandler.handleError(new Error(Kt)),(0,E.of)(null)})));return(0,I.D)(Ve).pipe((0,_e.U)(()=>{const de=this._extractIconWithNameFromAnySet(Ce,vt);if(!de)throw Se(Ce);return de}))}_extractIconWithNameFromAnySet(Ce,vt){for(let Ne=vt.length-1;Ne>=0;Ne--){const Ve=vt[Ne];if(Ve.svgText&&Ve.svgText.toString().indexOf(Ce)>-1){const de=this._svgElementFromConfig(Ve),Te=this._extractSvgIconFromSet(de,Ce,Ve.options);if(Te)return Te}}return null}_loadSvgIconFromConfig(Ce){return this._fetchIcon(Ce).pipe((0,ee.b)(vt=>Ce.svgText=vt),(0,_e.U)(()=>this._svgElementFromConfig(Ce)))}_loadSvgIconSetFromConfig(Ce){return Ce.svgText?(0,E.of)(null):this._fetchIcon(Ce).pipe((0,ee.b)(vt=>Ce.svgText=vt))}_extractSvgIconFromSet(Ce,vt,Ne){const Ve=Ce.querySelector(`[id="${vt}"]`);if(!Ve)return null;const de=Ve.cloneNode(!0);if(de.removeAttribute("id"),"svg"===de.nodeName.toLowerCase())return this._setSvgAttributes(de,Ne);if("symbol"===de.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(de),Ne);const Te=this._svgElementFromString(Oe("<svg></svg>"));return Te.appendChild(de),this._setSvgAttributes(Te,Ne)}_svgElementFromString(Ce){const vt=this._document.createElement("DIV");vt.innerHTML=Ce;const Ne=vt.querySelector("svg");if(!Ne)throw Error("<svg> tag not found");return Ne}_toSvgElement(Ce){const vt=this._svgElementFromString(Oe("<svg></svg>")),Ne=Ce.attributes;for(let Ve=0;Ve<Ne.length;Ve++){const{name:de,value:Te}=Ne[Ve];"id"!==de&&vt.setAttribute(de,Te)}for(let Ve=0;Ve<Ce.childNodes.length;Ve++)Ce.childNodes[Ve].nodeType===this._document.ELEMENT_NODE&&vt.appendChild(Ce.childNodes[Ve].cloneNode(!0));return vt}_setSvgAttributes(Ce,vt){return Ce.setAttribute("fit",""),Ce.setAttribute("height","100%"),Ce.setAttribute("width","100%"),Ce.setAttribute("preserveAspectRatio","xMidYMid meet"),Ce.setAttribute("focusable","false"),vt&&vt.viewBox&&Ce.setAttribute("viewBox",vt.viewBox),Ce}_fetchIcon(Ce){var vt;const{url:Ne,options:Ve}=Ce,de=null!==(vt=null==Ve?void 0:Ve.withCredentials)&&void 0!==vt&&vt;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==Ne)throw Error(`Cannot fetch icon from URL "${Ne}".`);const Te=this._sanitizer.sanitize(O.q3G.RESOURCE_URL,Ne);if(!Te)throw dt(Ne);const xt=this._inProgressUrlFetches.get(Te);if(xt)return xt;const Kt=this._httpClient.get(Te,{responseType:"text",withCredentials:de}).pipe((0,_e.U)(Ft=>Oe(Ft)),(0,Ae.x)(()=>this._inProgressUrlFetches.delete(Te)),(0,Je.B)());return this._inProgressUrlFetches.set(Te,Kt),Kt}_addSvgIconConfig(Ce,vt,Ne){return this._svgIconConfigs.set(Be(Ce,vt),Ne),this}_addSvgIconSetConfig(Ce,vt){const Ne=this._iconSetConfigs.get(Ce);return Ne?Ne.push(vt):this._iconSetConfigs.set(Ce,[vt]),this}_svgElementFromConfig(Ce){if(!Ce.svgElement){const vt=this._svgElementFromString(Ce.svgText);this._setSvgAttributes(vt,Ce.options),Ce.svgElement=vt}return Ce.svgElement}_getIconConfigFromResolvers(Ce,vt){for(let Ne=0;Ne<this._resolvers.length;Ne++){const Ve=this._resolvers[Ne](vt,Ce);if(Ve)return ze(Ve)?new Pe(Ve.url,null,Ve.options):new Pe(Ve,null)}}}return Lt.\u0275fac=function(Ce){return new(Ce||Lt)(O.LFG(Ge.eN,8),O.LFG(lt.H7),O.LFG(e.K0,8),O.LFG(O.qLn))},Lt.\u0275prov=O.Yz7({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),Lt})();function at(Lt){return Lt.cloneNode(!0)}function Be(Lt,yi){return Lt+":"+yi}function ze(Lt){return!(!Lt.url||!Lt.options)}const St=(0,y.pj)(class{constructor(Lt){this._elementRef=Lt}}),wt=new O.OlP("mat-icon-location",{providedIn:"root",factory:function(){const Lt=(0,O.f3M)(e.K0),yi=Lt?Lt.location:null;return{getPathname:()=>yi?yi.pathname+yi.search:""}}}),$t=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Xt=$t.map(Lt=>`[${Lt}]`).join(", "),ti=/^url\(['"]?#(.*?)['"]?\)$/;let Wi=(()=>{class Lt extends St{constructor(Ce,vt,Ne,Ve,de){super(Ce),this._iconRegistry=vt,this._location=Ve,this._errorHandler=de,this._inline=!1,this._currentIconFetch=Y.w0.EMPTY,Ne||Ce.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(Ce){this._inline=(0,t.Ig)(Ce)}get svgIcon(){return this._svgIcon}set svgIcon(Ce){Ce!==this._svgIcon&&(Ce?this._updateSvgIcon(Ce):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Ce)}get fontSet(){return this._fontSet}set fontSet(Ce){const vt=this._cleanupFontValue(Ce);vt!==this._fontSet&&(this._fontSet=vt,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Ce){const vt=this._cleanupFontValue(Ce);vt!==this._fontIcon&&(this._fontIcon=vt,this._updateFontIconClasses())}_splitIconName(Ce){if(!Ce)return["",""];const vt=Ce.split(":");switch(vt.length){case 1:return["",vt[0]];case 2:return vt;default:throw Error(`Invalid icon name: "${Ce}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Ce=this._elementsWithExternalReferences;if(Ce&&Ce.size){const vt=this._location.getPathname();vt!==this._previousPath&&(this._previousPath=vt,this._prependPathToReferences(vt))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Ce){this._clearSvgElement();const vt=Ce.querySelectorAll("style");for(let Ve=0;Ve<vt.length;Ve++)vt[Ve].textContent+=" ";const Ne=this._location.getPathname();this._previousPath=Ne,this._cacheChildrenWithExternalReferences(Ce),this._prependPathToReferences(Ne),this._elementRef.nativeElement.appendChild(Ce)}_clearSvgElement(){const Ce=this._elementRef.nativeElement;let vt=Ce.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();vt--;){const Ne=Ce.childNodes[vt];(1!==Ne.nodeType||"svg"===Ne.nodeName.toLowerCase())&&Ne.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Ce=this._elementRef.nativeElement,vt=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();vt!=this._previousFontSetClass&&(this._previousFontSetClass&&Ce.classList.remove(this._previousFontSetClass),vt&&Ce.classList.add(vt),this._previousFontSetClass=vt),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&Ce.classList.remove(this._previousFontIconClass),this.fontIcon&&Ce.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Ce){return"string"==typeof Ce?Ce.trim().split(" ")[0]:Ce}_prependPathToReferences(Ce){const vt=this._elementsWithExternalReferences;vt&&vt.forEach((Ne,Ve)=>{Ne.forEach(de=>{Ve.setAttribute(de.name,`url('${Ce}#${de.value}')`)})})}_cacheChildrenWithExternalReferences(Ce){const vt=Ce.querySelectorAll(Xt),Ne=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Ve=0;Ve<vt.length;Ve++)$t.forEach(de=>{const Te=vt[Ve],xt=Te.getAttribute(de),Kt=xt?xt.match(ti):null;if(Kt){let Ft=Ne.get(Te);Ft||(Ft=[],Ne.set(Te,Ft)),Ft.push({name:de,value:Kt[1]})}})}_updateSvgIcon(Ce){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Ce){const[vt,Ne]=this._splitIconName(Ce);vt&&(this._svgNamespace=vt),Ne&&(this._svgName=Ne),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Ne,vt).pipe((0,st.q)(1)).subscribe(Ve=>this._setSvgElement(Ve),Ve=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${vt}:${Ne}! ${Ve.message}`))})}}}return Lt.\u0275fac=function(Ce){return new(Ce||Lt)(O.Y36(O.SBq),O.Y36(Re),O.$8M("aria-hidden"),O.Y36(wt),O.Y36(O.qLn))},Lt.\u0275cmp=O.Xpm({type:Lt,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(Ce,vt){2&Ce&&(O.uIk("data-mat-icon-type",vt._usingFontIcon()?"font":"svg")("data-mat-icon-name",vt._svgName||vt.fontIcon)("data-mat-icon-namespace",vt._svgNamespace||vt.fontSet),O.ekj("mat-icon-inline",vt.inline)("mat-icon-no-color","primary"!==vt.color&&"accent"!==vt.color&&"warn"!==vt.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[O.qOj],ngContentSelectors:Rt,decls:1,vars:0,template:function(Ce,vt){1&Ce&&(O.F$t(),O.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Lt})(),pi=(()=>{class Lt{}return Lt.\u0275fac=function(Ce){return new(Ce||Lt)},Lt.\u0275mod=O.oAB({type:Lt}),Lt.\u0275inj=O.cJS({imports:[[y.BQ],y.BQ]}),Lt})()},7531:(li,ht,W)=>{"use strict";W.d(ht,{Jk:()=>Je,Nt:()=>Rt,c:()=>Wt});var O=W(3191),y=W(925),t=W(5e3),e=W(3075),n=W(508),a=W(7322),f=W(7579),E=W(515);const I=(0,y.i$)({passive:!0});let Y=(()=>{class tt{constructor(Se,Qe){this._platform=Se,this._ngZone=Qe,this._monitoredElements=new Map}monitor(Se){if(!this._platform.isBrowser)return E.E;const Qe=(0,O.fI)(Se),dt=this._monitoredElements.get(Qe);if(dt)return dt.subject;const it=new f.x,Pe="cdk-text-field-autofilled",Re=ge=>{"cdk-text-field-autofill-start"!==ge.animationName||Qe.classList.contains(Pe)?"cdk-text-field-autofill-end"===ge.animationName&&Qe.classList.contains(Pe)&&(Qe.classList.remove(Pe),this._ngZone.run(()=>it.next({target:ge.target,isAutofilled:!1}))):(Qe.classList.add(Pe),this._ngZone.run(()=>it.next({target:ge.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{Qe.addEventListener("animationstart",Re,I),Qe.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(Qe,{subject:it,unlisten:()=>{Qe.removeEventListener("animationstart",Re,I)}}),it}stopMonitoring(Se){const Qe=(0,O.fI)(Se),dt=this._monitoredElements.get(Qe);dt&&(dt.unlisten(),dt.subject.complete(),Qe.classList.remove("cdk-text-field-autofill-monitored"),Qe.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(Qe))}ngOnDestroy(){this._monitoredElements.forEach((Se,Qe)=>this.stopMonitoring(Qe))}}return tt.\u0275fac=function(Se){return new(Se||tt)(t.LFG(y.t4),t.LFG(t.R0b))},tt.\u0275prov=t.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})(),De=(()=>{class tt{}return tt.\u0275fac=function(Se){return new(Se||tt)},tt.\u0275mod=t.oAB({type:tt}),tt.\u0275inj=t.cJS({imports:[[y.ud]]}),tt})();const Je=new t.OlP("MAT_INPUT_VALUE_ACCESSOR"),st=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Ge=0;const lt=(0,n.FD)(class{constructor(tt,Oe,Se,Qe){this._defaultErrorStateMatcher=tt,this._parentForm=Oe,this._parentFormGroup=Se,this.ngControl=Qe}});let Rt=(()=>{class tt extends lt{constructor(Se,Qe,dt,it,Pe,Re,ge,se,at,Be){super(Re,it,Pe,dt),this._elementRef=Se,this._platform=Qe,this._autofillMonitor=se,this._formField=Be,this._uid="mat-input-"+Ge++,this.focused=!1,this.stateChanges=new f.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(wt=>(0,y.qK)().has(wt));const ze=this._elementRef.nativeElement,St=ze.nodeName.toLowerCase();this._inputValueAccessor=ge||ze,this._previousNativeValue=this.value,this.id=this.id,Qe.IOS&&at.runOutsideAngular(()=>{Se.nativeElement.addEventListener("keyup",wt=>{const At=wt.target;!At.value&&0===At.selectionStart&&0===At.selectionEnd&&(At.setSelectionRange(1,1),At.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===St,this._isTextarea="textarea"===St,this._isInFormField=!!Be,this._isNativeSelect&&(this.controlType=ze.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(Se){this._disabled=(0,O.Ig)(Se),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(Se){this._id=Se||this._uid}get required(){var Se,Qe,dt,it;return null!==(it=null!==(Se=this._required)&&void 0!==Se?Se:null===(dt=null===(Qe=this.ngControl)||void 0===Qe?void 0:Qe.control)||void 0===dt?void 0:dt.hasValidator(e.kI.required))&&void 0!==it&&it}set required(Se){this._required=(0,O.Ig)(Se)}get type(){return this._type}set type(Se){this._type=Se||"text",this._validateType(),!this._isTextarea&&(0,y.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(Se){Se!==this.value&&(this._inputValueAccessor.value=Se,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(Se){this._readonly=(0,O.Ig)(Se)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(Se=>{this.autofilled=Se.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(Se){this._elementRef.nativeElement.focus(Se)}_focusChanged(Se){Se!==this.focused&&(this.focused=Se,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var Se,Qe;const dt=(null===(Qe=null===(Se=this._formField)||void 0===Se?void 0:Se._hideControlPlaceholder)||void 0===Qe?void 0:Qe.call(Se))?null:this.placeholder;if(dt!==this._previousPlaceholder){const it=this._elementRef.nativeElement;this._previousPlaceholder=dt,dt?it.setAttribute("placeholder",dt):it.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const Se=this._elementRef.nativeElement.value;this._previousNativeValue!==Se&&(this._previousNativeValue=Se,this.stateChanges.next())}_validateType(){st.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let Se=this._elementRef.nativeElement.validity;return Se&&Se.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const Se=this._elementRef.nativeElement,Qe=Se.options[0];return this.focused||Se.multiple||!this.empty||!!(Se.selectedIndex>-1&&Qe&&Qe.label)}return this.focused||!this.empty}setDescribedByIds(Se){Se.length?this._elementRef.nativeElement.setAttribute("aria-describedby",Se.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const Se=this._elementRef.nativeElement;return this._isNativeSelect&&(Se.multiple||Se.size>1)}}return tt.\u0275fac=function(Se){return new(Se||tt)(t.Y36(t.SBq),t.Y36(y.t4),t.Y36(e.a5,10),t.Y36(e.F,8),t.Y36(e.sg,8),t.Y36(n.rD),t.Y36(Je,10),t.Y36(Y),t.Y36(t.R0b),t.Y36(a.G_,8))},tt.\u0275dir=t.lG2({type:tt,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(Se,Qe){1&Se&&t.NdJ("focus",function(){return Qe._focusChanged(!0)})("blur",function(){return Qe._focusChanged(!1)})("input",function(){return Qe._onInput()}),2&Se&&(t.Ikx("disabled",Qe.disabled)("required",Qe.required),t.uIk("id",Qe.id)("data-placeholder",Qe.placeholder)("readonly",Qe.readonly&&!Qe._isNativeSelect||null)("aria-invalid",Qe.empty&&Qe.required?null:Qe.errorState)("aria-required",Qe.required),t.ekj("mat-input-server",Qe._isServer)("mat-native-select-inline",Qe._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[t._Bn([{provide:a.Eo,useExisting:tt}]),t.qOj,t.TTD]}),tt})(),Wt=(()=>{class tt{}return tt.\u0275fac=function(Se){return new(Se||tt)},tt.\u0275mod=t.oAB({type:tt}),tt.\u0275inj=t.cJS({providers:[n.rD],imports:[[De,a.lN,n.BQ],De,a.lN]}),tt})()},2181:(li,ht,W)=>{"use strict";W.d(ht,{VK:()=>vt,Tx:()=>ke,p6:()=>Ft});var O=W(5664),y=W(3191),t=W(1159),e=W(5e3),n=W(7579),a=W(727),f=W(6451),E=W(9646),I=W(3101),Y=W(8675),ee=W(3900),_e=W(5698),De=W(9300),Ae=W(2722),Je=W(1005),st=W(1777),Ge=W(7429),lt=W(9808),Rt=W(508),Wt=W(1314),tt=W(925),Oe=W(226),Se=W(495);const Qe=["mat-menu-item",""];function dt(We,_t){1&We&&(e.O4$(),e.TgZ(0,"svg",2),e._UZ(1,"polygon",3),e.qZA())}const it=["*"];function Pe(We,_t){if(1&We){const Ue=e.EpF();e.TgZ(0,"div",0),e.NdJ("keydown",function(et){return e.CHM(Ue),e.oxw()._handleKeydown(et)})("click",function(){return e.CHM(Ue),e.oxw().closed.emit("click")})("@transformMenu.start",function(et){return e.CHM(Ue),e.oxw()._onAnimationStart(et)})("@transformMenu.done",function(et){return e.CHM(Ue),e.oxw()._onAnimationDone(et)}),e.TgZ(1,"div",1),e.Hsn(2),e.qZA(),e.qZA()}if(2&We){const Ue=e.oxw();e.Q6J("id",Ue.panelId)("ngClass",Ue._classList)("@transformMenu",Ue._panelAnimationState),e.uIk("aria-label",Ue.ariaLabel||null)("aria-labelledby",Ue.ariaLabelledby||null)("aria-describedby",Ue.ariaDescribedby||null)}}const Re={transformMenu:(0,st.X$)("transformMenu",[(0,st.SB)("void",(0,st.oB)({opacity:0,transform:"scale(0.8)"})),(0,st.eR)("void => enter",(0,st.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,st.oB)({opacity:1,transform:"scale(1)"}))),(0,st.eR)("* => void",(0,st.jt)("100ms 25ms linear",(0,st.oB)({opacity:0})))]),fadeInItems:(0,st.X$)("fadeInItems",[(0,st.SB)("showing",(0,st.oB)({opacity:1})),(0,st.eR)("void => *",[(0,st.oB)({opacity:0}),(0,st.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},at=new e.OlP("MatMenuContent"),Xt=new e.OlP("MAT_MENU_PANEL"),ti=(0,Rt.Kr)((0,Rt.Id)(class{}));let Wi=(()=>{class We extends ti{constructor(Ue,Ye,et,Ie,Xe){super(),this._elementRef=Ue,this._focusMonitor=et,this._parentMenu=Ie,this._changeDetectorRef=Xe,this.role="menuitem",this._hovered=new n.x,this._focused=new n.x,this._highlighted=!1,this._triggersSubmenu=!1,Ie&&Ie.addItem&&Ie.addItem(this)}focus(Ue,Ye){this._focusMonitor&&Ue?this._focusMonitor.focusVia(this._getHostElement(),Ue,Ye):this._getHostElement().focus(Ye),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(Ue){this.disabled&&(Ue.preventDefault(),Ue.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var Ue;const Ye=this._elementRef.nativeElement.cloneNode(!0),et=Ye.querySelectorAll("mat-icon, .material-icons");for(let Ie=0;Ie<et.length;Ie++)et[Ie].remove();return(null===(Ue=Ye.textContent)||void 0===Ue?void 0:Ue.trim())||""}_setHighlighted(Ue){var Ye;this._highlighted=Ue,null===(Ye=this._changeDetectorRef)||void 0===Ye||Ye.markForCheck()}}return We.\u0275fac=function(Ue){return new(Ue||We)(e.Y36(e.SBq),e.Y36(lt.K0),e.Y36(O.tE),e.Y36(Xt,8),e.Y36(e.sBO))},We.\u0275cmp=e.Xpm({type:We,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(Ue,Ye){1&Ue&&e.NdJ("click",function(Ie){return Ye._checkDisabled(Ie)})("mouseenter",function(){return Ye._handleMouseEnter()}),2&Ue&&(e.uIk("role",Ye.role)("tabindex",Ye._getTabIndex())("aria-disabled",Ye.disabled.toString())("disabled",Ye.disabled||null),e.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",Ye._highlighted)("mat-menu-item-submenu-trigger",Ye._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[e.qOj],attrs:Qe,ngContentSelectors:it,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(Ue,Ye){1&Ue&&(e.F$t(),e.Hsn(0),e._UZ(1,"div",0),e.YNc(2,dt,2,0,"svg",1)),2&Ue&&(e.xp6(1),e.Q6J("matRippleDisabled",Ye.disableRipple||Ye.disabled)("matRippleTrigger",Ye._getHostElement()),e.xp6(1),e.Q6J("ngIf",Ye._triggersSubmenu))},directives:[Rt.wG,lt.O5],encapsulation:2,changeDetection:0}),We})();const pi=new e.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let yi=0,Ce=(()=>{class We{constructor(Ue,Ye,et){this._elementRef=Ue,this._ngZone=Ye,this._defaultOptions=et,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new e.n_E,this._tabSubscription=a.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new n.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new e.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+yi++}get xPosition(){return this._xPosition}set xPosition(Ue){this._xPosition=Ue,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(Ue){this._yPosition=Ue,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(Ue){this._overlapTrigger=(0,y.Ig)(Ue)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(Ue){this._hasBackdrop=(0,y.Ig)(Ue)}set panelClass(Ue){const Ye=this._previousPanelClass;Ye&&Ye.length&&Ye.split(" ").forEach(et=>{this._classList[et]=!1}),this._previousPanelClass=Ue,Ue&&Ue.length&&(Ue.split(" ").forEach(et=>{this._classList[et]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(Ue){this.panelClass=Ue}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new O.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,Y.O)(this._directDescendantItems),(0,ee.w)(Ue=>(0,f.T)(...Ue.map(Ye=>Ye._focused)))).subscribe(Ue=>this._keyManager.updateActiveItem(Ue))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,Y.O)(this._directDescendantItems),(0,ee.w)(Ye=>(0,f.T)(...Ye.map(et=>et._hovered))))}addItem(Ue){}removeItem(Ue){}_handleKeydown(Ue){const Ye=Ue.keyCode,et=this._keyManager;switch(Ye){case t.hY:(0,t.Vb)(Ue)||(Ue.preventDefault(),this.closed.emit("keydown"));break;case t.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case t.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(Ye===t.LH||Ye===t.JH)&&et.setFocusOrigin("keyboard"),et.onKeydown(Ue)}}focusFirstItem(Ue="program"){this.lazyContent?this._ngZone.onStable.pipe((0,_e.q)(1)).subscribe(()=>this._focusFirstItem(Ue)):this._focusFirstItem(Ue)}_focusFirstItem(Ue){const Ye=this._keyManager;if(Ye.setFocusOrigin(Ue).setFirstItemActive(),!Ye.activeItem&&this._directDescendantItems.length){let et=this._directDescendantItems.first._getHostElement().parentElement;for(;et;){if("menu"===et.getAttribute("role")){et.focus();break}et=et.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(Ue){const Ye=Math.min(this._baseElevation+Ue,24),et=`${this._elevationPrefix}${Ye}`,Ie=Object.keys(this._classList).find(Xe=>Xe.startsWith(this._elevationPrefix));(!Ie||Ie===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[et]=!0,this._previousElevation=et)}setPositionClasses(Ue=this.xPosition,Ye=this.yPosition){const et=this._classList;et["mat-menu-before"]="before"===Ue,et["mat-menu-after"]="after"===Ue,et["mat-menu-above"]="above"===Ye,et["mat-menu-below"]="below"===Ye}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(Ue){this._animationDone.next(Ue),this._isAnimating=!1}_onAnimationStart(Ue){this._isAnimating=!0,"enter"===Ue.toState&&0===this._keyManager.activeItemIndex&&(Ue.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,Y.O)(this._allItems)).subscribe(Ue=>{this._directDescendantItems.reset(Ue.filter(Ye=>Ye._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return We.\u0275fac=function(Ue){return new(Ue||We)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(pi))},We.\u0275dir=e.lG2({type:We,contentQueries:function(Ue,Ye,et){if(1&Ue&&(e.Suo(et,at,5),e.Suo(et,Wi,5),e.Suo(et,Wi,4)),2&Ue){let Ie;e.iGM(Ie=e.CRH())&&(Ye.lazyContent=Ie.first),e.iGM(Ie=e.CRH())&&(Ye._allItems=Ie),e.iGM(Ie=e.CRH())&&(Ye.items=Ie)}},viewQuery:function(Ue,Ye){if(1&Ue&&e.Gf(e.Rgc,5),2&Ue){let et;e.iGM(et=e.CRH())&&(Ye.templateRef=et.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),We})(),vt=(()=>{class We extends Ce{constructor(Ue,Ye,et){super(Ue,Ye,et),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return We.\u0275fac=function(Ue){return new(Ue||We)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(pi))},We.\u0275cmp=e.Xpm({type:We,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(Ue,Ye){2&Ue&&e.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[e._Bn([{provide:Xt,useExisting:We}]),e.qOj],ngContentSelectors:it,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(Ue,Ye){1&Ue&&(e.F$t(),e.YNc(0,Pe,3,6,"ng-template"))},directives:[lt.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[Re.transformMenu,Re.fadeInItems]},changeDetection:0}),We})();const Ne=new e.OlP("mat-menu-scroll-strategy"),de={provide:Ne,deps:[Wt.aV],useFactory:function(We){return()=>We.scrollStrategies.reposition()}},xt=(0,tt.i$)({passive:!0});let Kt=(()=>{class We{constructor(Ue,Ye,et,Ie,Xe,Bt,Vt,bi){this._overlay=Ue,this._element=Ye,this._viewContainerRef=et,this._menuItemInstance=Bt,this._dir=Vt,this._focusMonitor=bi,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=a.w0.EMPTY,this._hoverSubscription=a.w0.EMPTY,this._menuCloseSubscription=a.w0.EMPTY,this._handleTouchStart=si=>{(0,O.yG)(si)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new e.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new e.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=Ie,this._parentMaterialMenu=Xe instanceof Ce?Xe:void 0,Ye.nativeElement.addEventListener("touchstart",this._handleTouchStart,xt),Bt&&(Bt._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(Ue){this.menu=Ue}get menu(){return this._menu}set menu(Ue){Ue!==this._menu&&(this._menu=Ue,this._menuCloseSubscription.unsubscribe(),Ue&&(this._menuCloseSubscription=Ue.close.subscribe(Ye=>{this._destroyMenu(Ye),("click"===Ye||"tab"===Ye)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(Ye)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,xt),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const Ue=this._createOverlay(),Ye=Ue.getConfig();this._setPosition(Ye.positionStrategy),Ye.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,Ue.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Ce&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(Ue,Ye){this._focusMonitor&&Ue?this._focusMonitor.focusVia(this._element,Ue,Ye):this._element.nativeElement.focus(Ye)}updatePosition(){var Ue;null===(Ue=this._overlayRef)||void 0===Ue||Ue.updatePosition()}_destroyMenu(Ue){if(!this._overlayRef||!this.menuOpen)return;const Ye=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===Ue||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,Ye instanceof Ce?(Ye._resetAnimation(),Ye.lazyContent?Ye._animationDone.pipe((0,De.h)(et=>"void"===et.toState),(0,_e.q)(1),(0,Ae.R)(Ye.lazyContent._attached)).subscribe({next:()=>Ye.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),Ye.lazyContent&&Ye.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let Ue=0,Ye=this.menu.parentMenu;for(;Ye;)Ue++,Ye=Ye.parentMenu;this.menu.setElevation(Ue)}}_setIsMenuOpen(Ue){this._menuOpen=Ue,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(Ue)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const Ue=this._getOverlayConfig();this._subscribeToPositions(Ue.positionStrategy),this._overlayRef=this._overlay.create(Ue),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Wt.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(Ue){this.menu.setPositionClasses&&Ue.positionChanges.subscribe(Ye=>{this.menu.setPositionClasses("start"===Ye.connectionPair.overlayX?"after":"before","top"===Ye.connectionPair.overlayY?"below":"above")})}_setPosition(Ue){let[Ye,et]="before"===this.menu.xPosition?["end","start"]:["start","end"],[Ie,Xe]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[Bt,Vt]=[Ie,Xe],[bi,si]=[Ye,et],ni=0;this.triggersSubmenu()?(si=Ye="before"===this.menu.xPosition?"start":"end",et=bi="end"===Ye?"start":"end",ni="bottom"===Ie?8:-8):this.menu.overlapTrigger||(Bt="top"===Ie?"bottom":"top",Vt="top"===Xe?"bottom":"top"),Ue.withPositions([{originX:Ye,originY:Bt,overlayX:bi,overlayY:Ie,offsetY:ni},{originX:et,originY:Bt,overlayX:si,overlayY:Ie,offsetY:ni},{originX:Ye,originY:Vt,overlayX:bi,overlayY:Xe,offsetY:-ni},{originX:et,originY:Vt,overlayX:si,overlayY:Xe,offsetY:-ni}])}_menuClosingActions(){const Ue=this._overlayRef.backdropClick(),Ye=this._overlayRef.detachments(),et=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,E.of)(),Ie=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,De.h)(Xe=>Xe!==this._menuItemInstance),(0,De.h)(()=>this._menuOpen)):(0,E.of)();return(0,f.T)(Ue,et,Ie,Ye)}_handleMousedown(Ue){(0,O.X6)(Ue)||(this._openedBy=0===Ue.button?"mouse":void 0,this.triggersSubmenu()&&Ue.preventDefault())}_handleKeydown(Ue){const Ye=Ue.keyCode;(Ye===t.K5||Ye===t.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(Ye===t.SV&&"ltr"===this.dir||Ye===t.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(Ue){this.triggersSubmenu()?(Ue.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,De.h)(Ue=>Ue===this._menuItemInstance&&!Ue.disabled),(0,Je.g)(0,I.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Ce&&this.menu._isAnimating?this.menu._animationDone.pipe((0,_e.q)(1),(0,Je.g)(0,I.E),(0,Ae.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new Ge.UE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return We.\u0275fac=function(Ue){return new(Ue||We)(e.Y36(Wt.aV),e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(Ne),e.Y36(Xt,8),e.Y36(Wi,10),e.Y36(Oe.Is,8),e.Y36(O.tE))},We.\u0275dir=e.lG2({type:We,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(Ue,Ye){1&Ue&&e.NdJ("click",function(Ie){return Ye._handleClick(Ie)})("mousedown",function(Ie){return Ye._handleMousedown(Ie)})("keydown",function(Ie){return Ye._handleKeydown(Ie)}),2&Ue&&e.uIk("aria-expanded",Ye.menuOpen||null)("aria-controls",Ye.menuOpen?Ye.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),We})(),Ft=(()=>{class We extends Kt{}return We.\u0275fac=function(){let _t;return function(Ye){return(_t||(_t=e.n5z(We)))(Ye||We)}}(),We.\u0275dir=e.lG2({type:We,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[e.qOj]}),We})(),ke=(()=>{class We{}return We.\u0275fac=function(Ue){return new(Ue||We)},We.\u0275mod=e.oAB({type:We}),We.\u0275inj=e.cJS({providers:[de],imports:[[lt.ez,Rt.BQ,Rt.si,Wt.U8],Se.ZD,Rt.BQ]}),We})()},773:(li,ht,W)=>{"use strict";W.d(ht,{Cq:()=>Wt,$g:()=>Rt});var O=W(5e3),y=W(9808),t=W(508),e=W(3191),n=W(925),a=W(6360);function f(tt,Oe){if(1&tt&&(O.O4$(),O._UZ(0,"circle",3)),2&tt){const Se=O.oxw();O.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+Se._spinnerAnimationLabel)("stroke-dashoffset",Se._getStrokeDashOffset(),"px")("stroke-dasharray",Se._getStrokeCircumference(),"px")("stroke-width",Se._getCircleStrokeWidth(),"%"),O.uIk("r",Se._getCircleRadius())}}function E(tt,Oe){if(1&tt&&(O.O4$(),O._UZ(0,"circle",3)),2&tt){const Se=O.oxw();O.Udp("stroke-dashoffset",Se._getStrokeDashOffset(),"px")("stroke-dasharray",Se._getStrokeCircumference(),"px")("stroke-width",Se._getCircleStrokeWidth(),"%"),O.uIk("r",Se._getCircleRadius())}}function I(tt,Oe){if(1&tt&&(O.O4$(),O._UZ(0,"circle",3)),2&tt){const Se=O.oxw();O.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+Se._spinnerAnimationLabel)("stroke-dashoffset",Se._getStrokeDashOffset(),"px")("stroke-dasharray",Se._getStrokeCircumference(),"px")("stroke-width",Se._getCircleStrokeWidth(),"%"),O.uIk("r",Se._getCircleRadius())}}function Y(tt,Oe){if(1&tt&&(O.O4$(),O._UZ(0,"circle",3)),2&tt){const Se=O.oxw();O.Udp("stroke-dashoffset",Se._getStrokeDashOffset(),"px")("stroke-dasharray",Se._getStrokeCircumference(),"px")("stroke-width",Se._getCircleStrokeWidth(),"%"),O.uIk("r",Se._getCircleRadius())}}const Ae=(0,t.pj)(class{constructor(tt){this._elementRef=tt}},"primary"),Je=new O.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class lt extends Ae{constructor(Oe,Se,Qe,dt,it){super(Oe),this._document=Qe,this._diameter=100,this._value=0,this.mode="determinate";const Pe=lt._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),Pe.has(Qe.head)||Pe.set(Qe.head,new Set([100])),this._noopAnimations="NoopAnimations"===dt&&!!it&&!it._forceAnimations,it&&(it.diameter&&(this.diameter=it.diameter),it.strokeWidth&&(this.strokeWidth=it.strokeWidth))}get diameter(){return this._diameter}set diameter(Oe){this._diameter=(0,e.su)(Oe),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(Oe){this._strokeWidth=(0,e.su)(Oe)}get value(){return"determinate"===this.mode?this._value:0}set value(Oe){this._value=Math.max(0,Math.min(100,(0,e.su)(Oe)))}ngOnInit(){const Oe=this._elementRef.nativeElement;this._styleRoot=(0,n.kV)(Oe)||this._document.head,this._attachStyleNode(),Oe.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const Oe=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${Oe} ${Oe}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const Oe=this._styleRoot,Se=this._diameter,Qe=lt._diameters;let dt=Qe.get(Oe);if(!dt||!dt.has(Se)){const it=this._document.createElement("style");it.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),it.textContent=this._getAnimationText(),Oe.appendChild(it),dt||(dt=new Set,Qe.set(Oe,dt)),dt.add(Se)}}_getAnimationText(){const Oe=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*Oe).replace(/END_VALUE/g,""+.2*Oe).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}lt._diameters=new WeakMap,lt.\u0275fac=function(Oe){return new(Oe||lt)(O.Y36(O.SBq),O.Y36(n.t4),O.Y36(y.K0,8),O.Y36(a.Qb,8),O.Y36(Je))},lt.\u0275cmp=O.Xpm({type:lt,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(Oe,Se){2&Oe&&(O.uIk("aria-valuemin","determinate"===Se.mode?0:null)("aria-valuemax","determinate"===Se.mode?100:null)("aria-valuenow","determinate"===Se.mode?Se.value:null)("mode",Se.mode),O.Udp("width",Se.diameter,"px")("height",Se.diameter,"px"),O.ekj("_mat-animation-noopable",Se._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[O.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(Oe,Se){1&Oe&&(O.O4$(),O.TgZ(0,"svg",0),O.YNc(1,f,1,9,"circle",1),O.YNc(2,E,1,7,"circle",2),O.qZA()),2&Oe&&(O.Udp("width",Se.diameter,"px")("height",Se.diameter,"px"),O.Q6J("ngSwitch","indeterminate"===Se.mode),O.uIk("viewBox",Se._getViewBox()),O.xp6(1),O.Q6J("ngSwitchCase",!0),O.xp6(1),O.Q6J("ngSwitchCase",!1))},directives:[y.RF,y.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Rt=(()=>{class tt extends lt{constructor(Se,Qe,dt,it,Pe){super(Se,Qe,dt,it,Pe),this.mode="indeterminate"}}return tt.\u0275fac=function(Se){return new(Se||tt)(O.Y36(O.SBq),O.Y36(n.t4),O.Y36(y.K0,8),O.Y36(a.Qb,8),O.Y36(Je))},tt.\u0275cmp=O.Xpm({type:tt,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(Se,Qe){2&Se&&(O.Udp("width",Qe.diameter,"px")("height",Qe.diameter,"px"),O.ekj("_mat-animation-noopable",Qe._noopAnimations))},inputs:{color:"color"},features:[O.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(Se,Qe){1&Se&&(O.O4$(),O.TgZ(0,"svg",0),O.YNc(1,I,1,9,"circle",1),O.YNc(2,Y,1,7,"circle",2),O.qZA()),2&Se&&(O.Udp("width",Qe.diameter,"px")("height",Qe.diameter,"px"),O.Q6J("ngSwitch","indeterminate"===Qe.mode),O.uIk("viewBox",Qe._getViewBox()),O.xp6(1),O.Q6J("ngSwitchCase",!0),O.xp6(1),O.Q6J("ngSwitchCase",!1))},directives:[y.RF,y.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),tt})(),Wt=(()=>{class tt{}return tt.\u0275fac=function(Se){return new(Se||tt)},tt.\u0275mod=O.oAB({type:tt}),tt.\u0275inj=O.cJS({imports:[[t.BQ,y.ez],t.BQ]}),tt})()},7261:(li,ht,W)=>{"use strict";W.d(ht,{ux:()=>it,ZX:()=>Se});var O=W(1314),y=W(7429),t=W(9808),e=W(5e3),n=W(508),a=W(7423),f=W(7579),E=W(5698),I=W(2722),Y=W(1777),ee=W(925),_e=W(5113),De=W(5664);function Ae(Pe,Re){if(1&Pe){const ge=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"button",2),e.NdJ("click",function(){return e.CHM(ge),e.oxw().action()}),e._uU(2),e.qZA(),e.qZA()}if(2&Pe){const ge=e.oxw();e.xp6(2),e.Oqu(ge.data.action)}}function Je(Pe,Re){}const st=new e.OlP("MatSnackBarData");class Ge{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const lt=Math.pow(2,31)-1;class Rt{constructor(Re,ge){this._overlayRef=ge,this._afterDismissed=new f.x,this._afterOpened=new f.x,this._onAction=new f.x,this._dismissedByAction=!1,this.containerInstance=Re,this.onAction().subscribe(()=>this.dismiss()),Re._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(Re){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(Re,lt))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Wt=(()=>{class Pe{constructor(ge,se){this.snackBarRef=ge,this.data=se}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return Pe.\u0275fac=function(ge){return new(ge||Pe)(e.Y36(Rt),e.Y36(st))},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(ge,se){1&ge&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.YNc(2,Ae,3,1,"div",0)),2&ge&&(e.xp6(1),e.Oqu(se.data.message),e.xp6(1),e.Q6J("ngIf",se.hasAction))},directives:[t.O5,a.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Pe})();const tt={snackBarState:(0,Y.X$)("state",[(0,Y.SB)("void, hidden",(0,Y.oB)({transform:"scale(0.8)",opacity:0})),(0,Y.SB)("visible",(0,Y.oB)({transform:"scale(1)",opacity:1})),(0,Y.eR)("* => visible",(0,Y.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,Y.eR)("* => void, * => hidden",(0,Y.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,Y.oB)({opacity:0})))])};let Oe=(()=>{class Pe extends y.en{constructor(ge,se,at,Be,ze){super(),this._ngZone=ge,this._elementRef=se,this._changeDetectorRef=at,this._platform=Be,this.snackBarConfig=ze,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new f.x,this._onExit=new f.x,this._onEnter=new f.x,this._animationState="void",this.attachDomPortal=St=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(St)),this._live="assertive"!==ze.politeness||ze.announcementMessage?"off"===ze.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(ge){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(ge)}attachTemplatePortal(ge){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(ge)}onAnimationEnd(ge){const{fromState:se,toState:at}=ge;if(("void"===at&&"void"!==se||"hidden"===at)&&this._completeExit(),"visible"===at){const Be=this._onEnter;this._ngZone.run(()=>{Be.next(),Be.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,E.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const ge=this._elementRef.nativeElement,se=this.snackBarConfig.panelClass;se&&(Array.isArray(se)?se.forEach(at=>ge.classList.add(at)):ge.classList.add(se)),"center"===this.snackBarConfig.horizontalPosition&&ge.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&ge.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const ge=this._elementRef.nativeElement.querySelector("[aria-hidden]"),se=this._elementRef.nativeElement.querySelector("[aria-live]");if(ge&&se){let at=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&ge.contains(document.activeElement)&&(at=document.activeElement),ge.removeAttribute("aria-hidden"),se.appendChild(ge),null==at||at.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return Pe.\u0275fac=function(ge){return new(ge||Pe)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(ee.t4),e.Y36(Ge))},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["snack-bar-container"]],viewQuery:function(ge,se){if(1&ge&&e.Gf(y.Pl,7),2&ge){let at;e.iGM(at=e.CRH())&&(se._portalOutlet=at.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(ge,se){1&ge&&e.WFA("@state.done",function(Be){return se.onAnimationEnd(Be)}),2&ge&&e.d8E("@state",se._animationState)},features:[e.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(ge,se){1&ge&&(e.TgZ(0,"div",0),e.YNc(1,Je,0,0,"ng-template",1),e.qZA(),e._UZ(2,"div")),2&ge&&(e.xp6(2),e.uIk("aria-live",se._live)("role",se._role))},directives:[y.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[tt.snackBarState]}}),Pe})(),Se=(()=>{class Pe{}return Pe.\u0275fac=function(ge){return new(ge||Pe)},Pe.\u0275mod=e.oAB({type:Pe}),Pe.\u0275inj=e.cJS({imports:[[O.U8,y.eL,t.ez,a.ot,n.BQ],n.BQ]}),Pe})();const Qe=new e.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new Ge}});let it=(()=>{class Pe{constructor(ge,se,at,Be,ze,St){this._overlay=ge,this._live=se,this._injector=at,this._breakpointObserver=Be,this._parentSnackBar=ze,this._defaultConfig=St,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Wt,this.snackBarContainerComponent=Oe,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const ge=this._parentSnackBar;return ge?ge._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(ge){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=ge:this._snackBarRefAtThisLevel=ge}openFromComponent(ge,se){return this._attach(ge,se)}openFromTemplate(ge,se){return this._attach(ge,se)}open(ge,se="",at){const Be=Object.assign(Object.assign({},this._defaultConfig),at);return Be.data={message:ge,action:se},Be.announcementMessage===ge&&(Be.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,Be)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(ge,se){const Be=e.zs3.create({parent:se&&se.viewContainerRef&&se.viewContainerRef.injector||this._injector,providers:[{provide:Ge,useValue:se}]}),ze=new y.C5(this.snackBarContainerComponent,se.viewContainerRef,Be),St=ge.attach(ze);return St.instance.snackBarConfig=se,St.instance}_attach(ge,se){const at=Object.assign(Object.assign(Object.assign({},new Ge),this._defaultConfig),se),Be=this._createOverlay(at),ze=this._attachSnackBarContainer(Be,at),St=new Rt(ze,Be);if(ge instanceof e.Rgc){const wt=new y.UE(ge,null,{$implicit:at.data,snackBarRef:St});St.instance=ze.attachTemplatePortal(wt)}else{const wt=this._createInjector(at,St),At=new y.C5(ge,void 0,wt),$t=ze.attachComponentPortal(At);St.instance=$t.instance}return this._breakpointObserver.observe(_e.u3.HandsetPortrait).pipe((0,I.R)(Be.detachments())).subscribe(wt=>{Be.overlayElement.classList.toggle(this.handsetCssClass,wt.matches)}),at.announcementMessage&&ze._onAnnounce.subscribe(()=>{this._live.announce(at.announcementMessage,at.politeness)}),this._animateSnackBar(St,at),this._openedSnackBarRef=St,this._openedSnackBarRef}_animateSnackBar(ge,se){ge.afterDismissed().subscribe(()=>{this._openedSnackBarRef==ge&&(this._openedSnackBarRef=null),se.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{ge.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):ge.containerInstance.enter(),se.duration&&se.duration>0&&ge.afterOpened().subscribe(()=>ge._dismissAfter(se.duration))}_createOverlay(ge){const se=new O.X_;se.direction=ge.direction;let at=this._overlay.position().global();const Be="rtl"===ge.direction,ze="left"===ge.horizontalPosition||"start"===ge.horizontalPosition&&!Be||"end"===ge.horizontalPosition&&Be,St=!ze&&"center"!==ge.horizontalPosition;return ze?at.left("0"):St?at.right("0"):at.centerHorizontally(),"top"===ge.verticalPosition?at.top("0"):at.bottom("0"),se.positionStrategy=at,this._overlay.create(se)}_createInjector(ge,se){return e.zs3.create({parent:ge&&ge.viewContainerRef&&ge.viewContainerRef.injector||this._injector,providers:[{provide:Rt,useValue:se},{provide:st,useValue:ge.data}]})}}return Pe.\u0275fac=function(ge){return new(ge||Pe)(e.LFG(O.aV),e.LFG(De.Kd),e.LFG(e.zs3),e.LFG(_e.Yg),e.LFG(Pe,12),e.LFG(Qe))},Pe.\u0275prov=e.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:Se}),Pe})()},3251:(li,ht,W)=>{"use strict";W.d(ht,{uX:()=>Kt,SP:()=>Ni,uD:()=>de,Nh:()=>jt});var O=W(5664),y=W(7144),t=W(7429),e=W(9808),n=W(5e3),a=W(508),f=W(6360),E=W(7579),I=W(727),Y=W(4968),ee=W(9646),_e=W(6451),De=W(5963),Ae=W(1777),Je=W(8675),st=W(1884),Ge=W(2722),lt=W(226),Rt=W(3191),Wt=W(1159),tt=W(925),Oe=W(495);function Se(qe,be){1&qe&&n.Hsn(0)}const Qe=["*"];function dt(qe,be){}const it=function(qe){return{animationDuration:qe}},Pe=function(qe,be){return{value:qe,params:be}},Re=["tabListContainer"],ge=["tabList"],se=["tabListInner"],at=["nextPaginator"],Be=["previousPaginator"],ze=["tabBodyWrapper"],St=["tabHeader"];function wt(qe,be){}function At(qe,be){if(1&qe&&n.YNc(0,wt,0,0,"ng-template",9),2&qe){const te=n.oxw().$implicit;n.Q6J("cdkPortalOutlet",te.templateLabel)}}function $t(qe,be){if(1&qe&&n._uU(0),2&qe){const te=n.oxw().$implicit;n.Oqu(te.textLabel)}}function Xt(qe,be){if(1&qe){const te=n.EpF();n.TgZ(0,"div",6),n.NdJ("click",function(){const Ke=n.CHM(te),yt=Ke.$implicit,Si=Ke.index,zi=n.oxw(),mn=n.MAs(1);return zi._handleClick(yt,mn,Si)})("cdkFocusChange",function(Ke){const Si=n.CHM(te).index;return n.oxw()._tabFocusChanged(Ke,Si)}),n.TgZ(1,"div",7),n.YNc(2,At,1,1,"ng-template",8),n.YNc(3,$t,1,1,"ng-template",8),n.qZA(),n.qZA()}if(2&qe){const te=be.$implicit,me=be.index,Ke=n.oxw();n.ekj("mat-tab-label-active",Ke.selectedIndex==me),n.Q6J("id",Ke._getTabLabelId(me))("disabled",te.disabled)("matRippleDisabled",te.disabled||Ke.disableRipple),n.uIk("tabIndex",Ke._getTabIndex(te,me))("aria-posinset",me+1)("aria-setsize",Ke._tabs.length)("aria-controls",Ke._getTabContentId(me))("aria-selected",Ke.selectedIndex==me)("aria-label",te.ariaLabel||null)("aria-labelledby",!te.ariaLabel&&te.ariaLabelledby?te.ariaLabelledby:null),n.xp6(2),n.Q6J("ngIf",te.templateLabel),n.xp6(1),n.Q6J("ngIf",!te.templateLabel)}}function ti(qe,be){if(1&qe){const te=n.EpF();n.TgZ(0,"mat-tab-body",10),n.NdJ("_onCentered",function(){return n.CHM(te),n.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(Ke){return n.CHM(te),n.oxw()._setTabBodyWrapperHeight(Ke)}),n.qZA()}if(2&qe){const te=be.$implicit,me=be.index,Ke=n.oxw();n.ekj("mat-tab-body-active",Ke.selectedIndex===me),n.Q6J("id",Ke._getTabContentId(me))("content",te.content)("position",te.position)("origin",te.origin)("animationDuration",Ke.animationDuration),n.uIk("tabindex",null!=Ke.contentTabIndex&&Ke.selectedIndex===me?Ke.contentTabIndex:null)("aria-labelledby",Ke._getTabLabelId(me))}}const pi=new n.OlP("MatInkBarPositioner",{providedIn:"root",factory:function(){return be=>({left:be?(be.offsetLeft||0)+"px":"0",width:be?(be.offsetWidth||0)+"px":"0"})}});let yi=(()=>{class qe{constructor(te,me,Ke,yt){this._elementRef=te,this._ngZone=me,this._inkBarPositioner=Ke,this._animationMode=yt}alignToElement(te){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(te))}):this._setStyles(te)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(te){const me=this._inkBarPositioner(te),Ke=this._elementRef.nativeElement;Ke.style.left=me.left,Ke.style.width=me.width}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.SBq),n.Y36(n.R0b),n.Y36(pi),n.Y36(f.Qb,8))},qe.\u0275dir=n.lG2({type:qe,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(te,me){2&te&&n.ekj("_mat-animation-noopable","NoopAnimations"===me._animationMode)}}),qe})();const Ce=new n.OlP("MatTabContent"),Ne=new n.OlP("MatTabLabel"),Ve=new n.OlP("MAT_TAB");let de=(()=>{class qe extends t.ig{constructor(te,me,Ke){super(te,me),this._closestTab=Ke}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.Rgc),n.Y36(n.s_b),n.Y36(Ve,8))},qe.\u0275dir=n.lG2({type:qe,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[n._Bn([{provide:Ne,useExisting:qe}]),n.qOj]}),qe})();const Te=(0,a.Id)(class{}),xt=new n.OlP("MAT_TAB_GROUP");let Kt=(()=>{class qe extends Te{constructor(te,me){super(),this._viewContainerRef=te,this._closestTabGroup=me,this.textLabel="",this._contentPortal=null,this._stateChanges=new E.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(te){this._setTemplateLabelInput(te)}get content(){return this._contentPortal}ngOnChanges(te){(te.hasOwnProperty("textLabel")||te.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new t.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(te){te&&te._closestTab===this&&(this._templateLabel=te)}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.s_b),n.Y36(xt,8))},qe.\u0275cmp=n.Xpm({type:qe,selectors:[["mat-tab"]],contentQueries:function(te,me,Ke){if(1&te&&(n.Suo(Ke,Ne,5),n.Suo(Ke,Ce,7,n.Rgc)),2&te){let yt;n.iGM(yt=n.CRH())&&(me.templateLabel=yt.first),n.iGM(yt=n.CRH())&&(me._explicitContent=yt.first)}},viewQuery:function(te,me){if(1&te&&n.Gf(n.Rgc,7),2&te){let Ke;n.iGM(Ke=n.CRH())&&(me._implicitContent=Ke.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[n._Bn([{provide:Ve,useExisting:qe}]),n.qOj,n.TTD],ngContentSelectors:Qe,decls:1,vars:0,template:function(te,me){1&te&&(n.F$t(),n.YNc(0,Se,1,0,"ng-template"))},encapsulation:2}),qe})();const Ft={translateTab:(0,Ae.X$)("translateTab",[(0,Ae.SB)("center, void, left-origin-center, right-origin-center",(0,Ae.oB)({transform:"none"})),(0,Ae.SB)("left",(0,Ae.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,Ae.SB)("right",(0,Ae.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,Ae.eR)("* => left, * => right, left => center, right => center",(0,Ae.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,Ae.eR)("void => left-origin-center",[(0,Ae.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,Ae.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,Ae.eR)("void => right-origin-center",[(0,Ae.oB)({transform:"translate3d(100%, 0, 0)"}),(0,Ae.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let ke=(()=>{class qe extends t.Pl{constructor(te,me,Ke,yt){super(te,me,yt),this._host=Ke,this._centeringSub=I.w0.EMPTY,this._leavingSub=I.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,Je.O)(this._host._isCenterPosition(this._host._position))).subscribe(te=>{te&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n._Vd),n.Y36(n.s_b),n.Y36((0,n.Gpc)(()=>_t)),n.Y36(e.K0))},qe.\u0275dir=n.lG2({type:qe,selectors:[["","matTabBodyHost",""]],features:[n.qOj]}),qe})(),We=(()=>{class qe{constructor(te,me,Ke){this._elementRef=te,this._dir=me,this._dirChangeSubscription=I.w0.EMPTY,this._translateTabComplete=new E.x,this._onCentering=new n.vpe,this._beforeCentering=new n.vpe,this._afterLeavingCenter=new n.vpe,this._onCentered=new n.vpe(!0),this.animationDuration="500ms",me&&(this._dirChangeSubscription=me.change.subscribe(yt=>{this._computePositionAnimationState(yt),Ke.markForCheck()})),this._translateTabComplete.pipe((0,st.x)((yt,Si)=>yt.fromState===Si.fromState&&yt.toState===Si.toState)).subscribe(yt=>{this._isCenterPosition(yt.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(yt.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(te){this._positionIndex=te,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(te){const me=this._isCenterPosition(te.toState);this._beforeCentering.emit(me),me&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(te){return"center"==te||"left-origin-center"==te||"right-origin-center"==te}_computePositionAnimationState(te=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==te?"left":"right":this._positionIndex>0?"ltr"==te?"right":"left":"center"}_computePositionFromOrigin(te){const me=this._getLayoutDirection();return"ltr"==me&&te<=0||"rtl"==me&&te>0?"left-origin-center":"right-origin-center"}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.SBq),n.Y36(lt.Is,8),n.Y36(n.sBO))},qe.\u0275dir=n.lG2({type:qe,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),qe})(),_t=(()=>{class qe extends We{constructor(te,me,Ke){super(te,me,Ke)}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.SBq),n.Y36(lt.Is,8),n.Y36(n.sBO))},qe.\u0275cmp=n.Xpm({type:qe,selectors:[["mat-tab-body"]],viewQuery:function(te,me){if(1&te&&n.Gf(t.Pl,5),2&te){let Ke;n.iGM(Ke=n.CRH())&&(me._portalHost=Ke.first)}},hostAttrs:[1,"mat-tab-body"],features:[n.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(te,me){1&te&&(n.TgZ(0,"div",0,1),n.NdJ("@translateTab.start",function(yt){return me._onTranslateTabStarted(yt)})("@translateTab.done",function(yt){return me._translateTabComplete.next(yt)}),n.YNc(2,dt,0,0,"ng-template",2),n.qZA()),2&te&&n.Q6J("@translateTab",n.WLB(3,Pe,me._position,n.VKq(1,it,me.animationDuration)))},directives:[ke],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[Ft.translateTab]}}),qe})();const Ue=new n.OlP("MAT_TABS_CONFIG"),Ye=(0,a.Id)(class{});let et=(()=>{class qe extends Ye{constructor(te){super(),this.elementRef=te}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.SBq))},qe.\u0275dir=n.lG2({type:qe,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(te,me){2&te&&(n.uIk("aria-disabled",!!me.disabled),n.ekj("mat-tab-disabled",me.disabled))},inputs:{disabled:"disabled"},features:[n.qOj]}),qe})();const Ie=(0,tt.i$)({passive:!0});let bi=(()=>{class qe{constructor(te,me,Ke,yt,Si,zi,mn){this._elementRef=te,this._changeDetectorRef=me,this._viewportRuler=Ke,this._dir=yt,this._ngZone=Si,this._platform=zi,this._animationMode=mn,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new E.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new E.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new n.vpe,this.indexFocused=new n.vpe,Si.runOutsideAngular(()=>{(0,Y.R)(te.nativeElement,"mouseleave").pipe((0,Ge.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(te){te=(0,Rt.su)(te),this._selectedIndex!=te&&(this._selectedIndexChanged=!0,this._selectedIndex=te,this._keyManager&&this._keyManager.updateActiveItem(te))}ngAfterViewInit(){(0,Y.R)(this._previousPaginator.nativeElement,"touchstart",Ie).pipe((0,Ge.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,Y.R)(this._nextPaginator.nativeElement,"touchstart",Ie).pipe((0,Ge.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const te=this._dir?this._dir.change:(0,ee.of)("ltr"),me=this._viewportRuler.change(150),Ke=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new O.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(Ke):Ke(),(0,_e.T)(te,me,this._items.changes).pipe((0,Ge.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(Ke)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,Ge.R)(this._destroyed)).subscribe(yt=>{this.indexFocused.emit(yt),this._setTabFocus(yt)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(te){if(!(0,Wt.Vb)(te))switch(te.keyCode){case Wt.K5:case Wt.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(te));break;default:this._keyManager.onKeydown(te)}}_onContentChanges(){const te=this._elementRef.nativeElement.textContent;te!==this._currentTextContent&&(this._currentTextContent=te||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(te){!this._isValidIndex(te)||this.focusIndex===te||!this._keyManager||this._keyManager.setActiveItem(te)}_isValidIndex(te){if(!this._items)return!0;const me=this._items?this._items.toArray()[te]:null;return!!me&&!me.disabled}_setTabFocus(te){if(this._showPaginationControls&&this._scrollToLabel(te),this._items&&this._items.length){this._items.toArray()[te].focus();const me=this._tabListContainer.nativeElement;me.scrollLeft="ltr"==this._getLayoutDirection()?0:me.scrollWidth-me.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const te=this.scrollDistance,me="ltr"===this._getLayoutDirection()?-te:te;this._tabList.nativeElement.style.transform=`translateX(${Math.round(me)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(te){this._scrollTo(te)}_scrollHeader(te){return this._scrollTo(this._scrollDistance+("before"==te?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(te){this._stopInterval(),this._scrollHeader(te)}_scrollToLabel(te){if(this.disablePagination)return;const me=this._items?this._items.toArray()[te]:null;if(!me)return;const Ke=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:yt,offsetWidth:Si}=me.elementRef.nativeElement;let zi,mn;"ltr"==this._getLayoutDirection()?(zi=yt,mn=zi+Si):(mn=this._tabListInner.nativeElement.offsetWidth-yt,zi=mn-Si);const $n=this.scrollDistance,Gt=this.scrollDistance+Ke;zi<$n?this.scrollDistance-=$n-zi+60:mn>Gt&&(this.scrollDistance+=mn-Gt+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const te=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;te||(this.scrollDistance=0),te!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=te}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const te=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,me=te?te.elementRef.nativeElement:null;me?this._inkBar.alignToElement(me):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(te,me){me&&null!=me.button&&0!==me.button||(this._stopInterval(),(0,De.H)(650,100).pipe((0,Ge.R)((0,_e.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:Ke,distance:yt}=this._scrollHeader(te);(0===yt||yt>=Ke)&&this._stopInterval()}))}_scrollTo(te){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const me=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(me,te)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:me,distance:this._scrollDistance}}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(Oe.rL),n.Y36(lt.Is,8),n.Y36(n.R0b),n.Y36(tt.t4),n.Y36(f.Qb,8))},qe.\u0275dir=n.lG2({type:qe,inputs:{disablePagination:"disablePagination"}}),qe})(),si=(()=>{class qe extends bi{constructor(te,me,Ke,yt,Si,zi,mn){super(te,me,Ke,yt,Si,zi,mn),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(te){this._disableRipple=(0,Rt.Ig)(te)}_itemSelected(te){te.preventDefault()}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(Oe.rL),n.Y36(lt.Is,8),n.Y36(n.R0b),n.Y36(tt.t4),n.Y36(f.Qb,8))},qe.\u0275dir=n.lG2({type:qe,inputs:{disableRipple:"disableRipple"},features:[n.qOj]}),qe})(),ni=(()=>{class qe extends si{constructor(te,me,Ke,yt,Si,zi,mn){super(te,me,Ke,yt,Si,zi,mn)}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(Oe.rL),n.Y36(lt.Is,8),n.Y36(n.R0b),n.Y36(tt.t4),n.Y36(f.Qb,8))},qe.\u0275cmp=n.Xpm({type:qe,selectors:[["mat-tab-header"]],contentQueries:function(te,me,Ke){if(1&te&&n.Suo(Ke,et,4),2&te){let yt;n.iGM(yt=n.CRH())&&(me._items=yt)}},viewQuery:function(te,me){if(1&te&&(n.Gf(yi,7),n.Gf(Re,7),n.Gf(ge,7),n.Gf(se,7),n.Gf(at,5),n.Gf(Be,5)),2&te){let Ke;n.iGM(Ke=n.CRH())&&(me._inkBar=Ke.first),n.iGM(Ke=n.CRH())&&(me._tabListContainer=Ke.first),n.iGM(Ke=n.CRH())&&(me._tabList=Ke.first),n.iGM(Ke=n.CRH())&&(me._tabListInner=Ke.first),n.iGM(Ke=n.CRH())&&(me._nextPaginator=Ke.first),n.iGM(Ke=n.CRH())&&(me._previousPaginator=Ke.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(te,me){2&te&&n.ekj("mat-tab-header-pagination-controls-enabled",me._showPaginationControls)("mat-tab-header-rtl","rtl"==me._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[n.qOj],ngContentSelectors:Qe,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(te,me){1&te&&(n.F$t(),n.TgZ(0,"div",0,1),n.NdJ("click",function(){return me._handlePaginatorClick("before")})("mousedown",function(yt){return me._handlePaginatorPress("before",yt)})("touchend",function(){return me._stopInterval()}),n._UZ(2,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.NdJ("keydown",function(yt){return me._handleKeydown(yt)}),n.TgZ(5,"div",5,6),n.NdJ("cdkObserveContent",function(){return me._onContentChanges()}),n.TgZ(7,"div",7,8),n.Hsn(9),n.qZA(),n._UZ(10,"mat-ink-bar"),n.qZA(),n.qZA(),n.TgZ(11,"div",9,10),n.NdJ("mousedown",function(yt){return me._handlePaginatorPress("after",yt)})("click",function(){return me._handlePaginatorClick("after")})("touchend",function(){return me._stopInterval()}),n._UZ(13,"div",2),n.qZA()),2&te&&(n.ekj("mat-tab-header-pagination-disabled",me._disableScrollBefore),n.Q6J("matRippleDisabled",me._disableScrollBefore||me.disableRipple),n.xp6(5),n.ekj("_mat-animation-noopable","NoopAnimations"===me._animationMode),n.xp6(6),n.ekj("mat-tab-header-pagination-disabled",me._disableScrollAfter),n.Q6J("matRippleDisabled",me._disableScrollAfter||me.disableRipple))},directives:[a.wG,y.wD,yi],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),qe})(),sn=0;class xi{}const Ln=(0,a.pj)((0,a.Kr)(class{constructor(qe){this._elementRef=qe}}),"primary");let Vi=(()=>{class qe extends Ln{constructor(te,me,Ke,yt){var Si;super(te),this._changeDetectorRef=me,this._animationMode=yt,this._tabs=new n.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=I.w0.EMPTY,this._tabLabelSubscription=I.w0.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new n.vpe,this.focusChange=new n.vpe,this.animationDone=new n.vpe,this.selectedTabChange=new n.vpe(!0),this._groupId=sn++,this.animationDuration=Ke&&Ke.animationDuration?Ke.animationDuration:"500ms",this.disablePagination=!(!Ke||null==Ke.disablePagination)&&Ke.disablePagination,this.dynamicHeight=!(!Ke||null==Ke.dynamicHeight)&&Ke.dynamicHeight,this.contentTabIndex=null!==(Si=null==Ke?void 0:Ke.contentTabIndex)&&void 0!==Si?Si:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(te){this._dynamicHeight=(0,Rt.Ig)(te)}get selectedIndex(){return this._selectedIndex}set selectedIndex(te){this._indexToSelect=(0,Rt.su)(te,null)}get animationDuration(){return this._animationDuration}set animationDuration(te){this._animationDuration=/^\d+$/.test(te+"")?te+"ms":te}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(te){this._contentTabIndex=(0,Rt.su)(te,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(te){const me=this._elementRef.nativeElement;me.classList.remove(`mat-background-${this.backgroundColor}`),te&&me.classList.add(`mat-background-${te}`),this._backgroundColor=te}ngAfterContentChecked(){const te=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=te){const me=null==this._selectedIndex;if(!me){this.selectedTabChange.emit(this._createChangeEvent(te));const Ke=this._tabBodyWrapper.nativeElement;Ke.style.minHeight=Ke.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((Ke,yt)=>Ke.isActive=yt===te),me||(this.selectedIndexChange.emit(te),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((me,Ke)=>{me.position=Ke-te,null!=this._selectedIndex&&0==me.position&&!me.origin&&(me.origin=te-this._selectedIndex)}),this._selectedIndex!==te&&(this._selectedIndex=te,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const me=this._tabs.toArray();for(let Ke=0;Ke<me.length;Ke++)if(me[Ke].isActive){this._indexToSelect=this._selectedIndex=Ke;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,Je.O)(this._allTabs)).subscribe(te=>{this._tabs.reset(te.filter(me=>me._closestTabGroup===this||!me._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(te){const me=this._tabHeader;me&&(me.focusIndex=te)}_focusChanged(te){this.focusChange.emit(this._createChangeEvent(te))}_createChangeEvent(te){const me=new xi;return me.index=te,this._tabs&&this._tabs.length&&(me.tab=this._tabs.toArray()[te]),me}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,_e.T)(...this._tabs.map(te=>te._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(te){return Math.min(this._tabs.length-1,Math.max(te||0,0))}_getTabLabelId(te){return`mat-tab-label-${this._groupId}-${te}`}_getTabContentId(te){return`mat-tab-content-${this._groupId}-${te}`}_setTabBodyWrapperHeight(te){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const me=this._tabBodyWrapper.nativeElement;me.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(me.style.height=te+"px")}_removeTabBodyWrapperHeight(){const te=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=te.clientHeight,te.style.height="",this.animationDone.emit()}_handleClick(te,me,Ke){te.disabled||(this.selectedIndex=me.focusIndex=Ke)}_getTabIndex(te,me){return te.disabled?null:this.selectedIndex===me?0:-1}_tabFocusChanged(te,me){te&&"mouse"!==te&&"touch"!==te&&(this._tabHeader.focusIndex=me)}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(Ue,8),n.Y36(f.Qb,8))},qe.\u0275dir=n.lG2({type:qe,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[n.qOj]}),qe})(),Ni=(()=>{class qe extends Vi{constructor(te,me,Ke,yt){super(te,me,Ke,yt)}}return qe.\u0275fac=function(te){return new(te||qe)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(Ue,8),n.Y36(f.Qb,8))},qe.\u0275cmp=n.Xpm({type:qe,selectors:[["mat-tab-group"]],contentQueries:function(te,me,Ke){if(1&te&&n.Suo(Ke,Kt,5),2&te){let yt;n.iGM(yt=n.CRH())&&(me._allTabs=yt)}},viewQuery:function(te,me){if(1&te&&(n.Gf(ze,5),n.Gf(St,5)),2&te){let Ke;n.iGM(Ke=n.CRH())&&(me._tabBodyWrapper=Ke.first),n.iGM(Ke=n.CRH())&&(me._tabHeader=Ke.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(te,me){2&te&&n.ekj("mat-tab-group-dynamic-height",me.dynamicHeight)("mat-tab-group-inverted-header","below"===me.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[n._Bn([{provide:xt,useExisting:qe}]),n.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(te,me){1&te&&(n.TgZ(0,"mat-tab-header",0,1),n.NdJ("indexFocused",function(yt){return me._focusChanged(yt)})("selectFocusedIndex",function(yt){return me.selectedIndex=yt}),n.YNc(2,Xt,4,14,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.YNc(5,ti,1,9,"mat-tab-body",5),n.qZA()),2&te&&(n.Q6J("selectedIndex",me.selectedIndex||0)("disableRipple",me.disableRipple)("disablePagination",me.disablePagination),n.xp6(2),n.Q6J("ngForOf",me._tabs),n.xp6(1),n.ekj("_mat-animation-noopable","NoopAnimations"===me._animationMode),n.xp6(2),n.Q6J("ngForOf",me._tabs))},directives:[ni,e.sg,et,a.wG,O.kH,e.O5,t.Pl,_t],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),qe})(),jt=(()=>{class qe{}return qe.\u0275fac=function(te){return new(te||qe)},qe.\u0275mod=n.oAB({type:qe}),qe.\u0275inj=n.cJS({imports:[[e.ez,a.BQ,t.eL,a.si,y.Q8,O.rt],a.BQ]}),qe})()},6360:(li,ht,W)=>{"use strict";W.d(ht,{Qb:()=>Or,PW:()=>tr});var O=W(5e3),y=W(2313),t=W(1777);function e(){return"undefined"!=typeof window&&void 0!==window.document}function n(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function a(fe){switch(fe.length){case 0:return new t.ZN;case 1:return fe[0];default:return new t.ZE(fe)}}function f(fe,N,G,Q,Me={},$e={}){const Ct=[],It=[];let Zt=-1,gi=null;if(Q.forEach(Bi=>{const nn=Bi.offset,Nn=nn==Zt,An=Nn&&gi||{};Object.keys(Bi).forEach(hn=>{let On=hn,kn=Bi[hn];if("offset"!==hn)switch(On=N.normalizePropertyName(On,Ct),kn){case t.k1:kn=Me[hn];break;case t.l3:kn=$e[hn];break;default:kn=N.normalizeStyleValue(hn,On,kn,Ct)}An[On]=kn}),Nn||It.push(An),gi=An,Zt=nn}),Ct.length){const Bi="\n - ";throw new Error(`Unable to animate due to the following errors:${Bi}${Ct.join(Bi)}`)}return It}function E(fe,N,G,Q){switch(N){case"start":fe.onStart(()=>Q(G&&I(G,"start",fe)));break;case"done":fe.onDone(()=>Q(G&&I(G,"done",fe)));break;case"destroy":fe.onDestroy(()=>Q(G&&I(G,"destroy",fe)))}}function I(fe,N,G){const Q=G.totalTime,$e=Y(fe.element,fe.triggerName,fe.fromState,fe.toState,N||fe.phaseName,null==Q?fe.totalTime:Q,!!G.disabled),Ct=fe._data;return null!=Ct&&($e._data=Ct),$e}function Y(fe,N,G,Q,Me="",$e=0,Ct){return{element:fe,triggerName:N,fromState:G,toState:Q,phaseName:Me,totalTime:$e,disabled:!!Ct}}function ee(fe,N,G){let Q;return fe instanceof Map?(Q=fe.get(N),Q||fe.set(N,Q=G)):(Q=fe[N],Q||(Q=fe[N]=G)),Q}function _e(fe){const N=fe.indexOf(":");return[fe.substring(1,N),fe.substr(N+1)]}let De=(fe,N)=>!1,Ae=(fe,N,G)=>[];(n()||"undefined"!=typeof Element)&&(De=e()?(fe,N)=>{for(;N&&N!==document.documentElement;){if(N===fe)return!0;N=N.parentNode||N.host}return!1}:(fe,N)=>fe.contains(N),Ae=(fe,N,G)=>{let Q=[];if(G){const Me=fe.querySelectorAll(N);for(let $e=0;$e<Me.length;$e++)Q.push(Me[$e])}else{const Me=fe.querySelector(N);Me&&Q.push(Me)}return Q});let Ge=null,lt=!1;function Rt(fe){Ge||(Ge=("undefined"!=typeof document?document.body:null)||{},lt=!!Ge.style&&"WebkitAppearance"in Ge.style);let N=!0;return Ge.style&&!function(fe){return"ebkit"==fe.substring(1,6)}(fe)&&(N=fe in Ge.style,!N&&lt&&(N="Webkit"+fe.charAt(0).toUpperCase()+fe.substr(1)in Ge.style)),N}const tt=De,Oe=Ae;function Se(fe){const N={};return Object.keys(fe).forEach(G=>{const Q=G.replace(/([a-z])([A-Z])/g,"$1-$2");N[Q]=fe[G]}),N}let Qe=(()=>{class fe{validateStyleProperty(G){return Rt(G)}matchesElement(G,Q){return!1}containsElement(G,Q){return tt(G,Q)}query(G,Q,Me){return Oe(G,Q,Me)}computeStyle(G,Q,Me){return Me||""}animate(G,Q,Me,$e,Ct,It=[],Zt){return new t.ZN(Me,$e)}}return fe.\u0275fac=function(G){return new(G||fe)},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})(),dt=(()=>{class fe{}return fe.NOOP=new Qe,fe})();const ge="ng-enter",se="ng-leave",at="ng-trigger",Be=".ng-trigger",ze="ng-animating",St=".ng-animating";function wt(fe){if("number"==typeof fe)return fe;const N=fe.match(/^(-?[\.\d]+)(m?s)/);return!N||N.length<2?0:At(parseFloat(N[1]),N[2])}function At(fe,N){return"s"===N?1e3*fe:fe}function $t(fe,N,G){return fe.hasOwnProperty("duration")?fe:function(fe,N,G){let Me,$e=0,Ct="";if("string"==typeof fe){const It=fe.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===It)return N.push(`The provided timing value "${fe}" is invalid.`),{duration:0,delay:0,easing:""};Me=At(parseFloat(It[1]),It[2]);const Zt=It[3];null!=Zt&&($e=At(parseFloat(Zt),It[4]));const gi=It[5];gi&&(Ct=gi)}else Me=fe;if(!G){let It=!1,Zt=N.length;Me<0&&(N.push("Duration values below 0 are not allowed for this animation step."),It=!0),$e<0&&(N.push("Delay values below 0 are not allowed for this animation step."),It=!0),It&&N.splice(Zt,0,`The provided timing value "${fe}" is invalid.`)}return{duration:Me,delay:$e,easing:Ct}}(fe,N,G)}function ti(fe,N={}){return Object.keys(fe).forEach(G=>{N[G]=fe[G]}),N}function pi(fe,N,G={}){if(N)for(let Q in fe)G[Q]=fe[Q];else ti(fe,G);return G}function Lt(fe,N,G){return G?N+":"+G+";":""}function yi(fe){let N="";for(let G=0;G<fe.style.length;G++){const Q=fe.style.item(G);N+=Lt(0,Q,fe.style.getPropertyValue(Q))}for(const G in fe.style)fe.style.hasOwnProperty(G)&&!G.startsWith("_")&&(N+=Lt(0,We(G),fe.style[G]));fe.setAttribute("style",N)}function Ce(fe,N,G){fe.style&&(Object.keys(N).forEach(Q=>{const Me=ke(Q);G&&!G.hasOwnProperty(Q)&&(G[Q]=fe.style[Me]),fe.style[Me]=N[Q]}),n()&&yi(fe))}function vt(fe,N){fe.style&&(Object.keys(N).forEach(G=>{const Q=ke(G);fe.style[Q]=""}),n()&&yi(fe))}function Ne(fe){return Array.isArray(fe)?1==fe.length?fe[0]:(0,t.vP)(fe):fe}const de=new RegExp("{{\\s*(.+?)\\s*}}","g");function Te(fe){let N=[];if("string"==typeof fe){let G;for(;G=de.exec(fe);)N.push(G[1]);de.lastIndex=0}return N}function xt(fe,N,G){const Q=fe.toString(),Me=Q.replace(de,($e,Ct)=>{let It=N[Ct];return N.hasOwnProperty(Ct)||(G.push(`Please provide a value for the animation param ${Ct}`),It=""),It.toString()});return Me==Q?fe:Me}function Kt(fe){const N=[];let G=fe.next();for(;!G.done;)N.push(G.value),G=fe.next();return N}const Ft=/-+([a-z0-9])/g;function ke(fe){return fe.replace(Ft,(...N)=>N[1].toUpperCase())}function We(fe){return fe.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _t(fe,N){return 0===fe||0===N}function Ue(fe,N,G){const Q=Object.keys(G);if(Q.length&&N.length){let $e=N[0],Ct=[];if(Q.forEach(It=>{$e.hasOwnProperty(It)||Ct.push(It),$e[It]=G[It]}),Ct.length)for(var Me=1;Me<N.length;Me++){let It=N[Me];Ct.forEach(function(Zt){It[Zt]=et(fe,Zt)})}}return N}function Ye(fe,N,G){switch(N.type){case 7:return fe.visitTrigger(N,G);case 0:return fe.visitState(N,G);case 1:return fe.visitTransition(N,G);case 2:return fe.visitSequence(N,G);case 3:return fe.visitGroup(N,G);case 4:return fe.visitAnimate(N,G);case 5:return fe.visitKeyframes(N,G);case 6:return fe.visitStyle(N,G);case 8:return fe.visitReference(N,G);case 9:return fe.visitAnimateChild(N,G);case 10:return fe.visitAnimateRef(N,G);case 11:return fe.visitQuery(N,G);case 12:return fe.visitStagger(N,G);default:throw new Error(`Unable to resolve animation metadata node #${N.type}`)}}function et(fe,N){return window.getComputedStyle(fe)[N]}function Xe(fe,N){const G=[];return"string"==typeof fe?fe.split(/\s*,\s*/).forEach(Q=>function(fe,N,G){if(":"==fe[0]){const Zt=function(fe,N){switch(fe){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(G,Q)=>parseFloat(Q)>parseFloat(G);case":decrement":return(G,Q)=>parseFloat(Q)<parseFloat(G);default:return N.push(`The transition alias value "${fe}" is not supported`),"* => *"}}(fe,G);if("function"==typeof Zt)return void N.push(Zt);fe=Zt}const Q=fe.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==Q||Q.length<4)return G.push(`The provided transition expression "${fe}" is not supported`),N;const Me=Q[1],$e=Q[2],Ct=Q[3];N.push(ni(Me,Ct));"<"==$e[0]&&!("*"==Me&&"*"==Ct)&&N.push(ni(Ct,Me))}(Q,G,N)):G.push(fe),G}const bi=new Set(["true","1"]),si=new Set(["false","0"]);function ni(fe,N){const G=bi.has(fe)||si.has(fe),Q=bi.has(N)||si.has(N);return(Me,$e)=>{let Ct="*"==fe||fe==Me,It="*"==N||N==$e;return!Ct&&G&&"boolean"==typeof Me&&(Ct=Me?bi.has(fe):si.has(fe)),!It&&Q&&"boolean"==typeof $e&&(It=$e?bi.has(N):si.has(N)),Ct&&It}}const xi=new RegExp("s*:selfs*,?","g");function Ln(fe,N,G){return new Ni(fe).build(N,G)}class Ni{constructor(N){this._driver=N}build(N,G){const Q=new fn(G);return this._resetContextStyleTimingState(Q),Ye(this,Ne(N),Q)}_resetContextStyleTimingState(N){N.currentQuerySelector="",N.collectedStyles={},N.collectedStyles[""]={},N.currentTime=0}visitTrigger(N,G){let Q=G.queryCount=0,Me=G.depCount=0;const $e=[],Ct=[];return"@"==N.name.charAt(0)&&G.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),N.definitions.forEach(It=>{if(this._resetContextStyleTimingState(G),0==It.type){const Zt=It,gi=Zt.name;gi.toString().split(/\s*,\s*/).forEach(Bi=>{Zt.name=Bi,$e.push(this.visitState(Zt,G))}),Zt.name=gi}else if(1==It.type){const Zt=this.visitTransition(It,G);Q+=Zt.queryCount,Me+=Zt.depCount,Ct.push(Zt)}else G.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:N.name,states:$e,transitions:Ct,queryCount:Q,depCount:Me,options:null}}visitState(N,G){const Q=this.visitStyle(N.styles,G),Me=N.options&&N.options.params||null;if(Q.containsDynamicStyles){const $e=new Set,Ct=Me||{};if(Q.styles.forEach(It=>{if(Tn(It)){const Zt=It;Object.keys(Zt).forEach(gi=>{Te(Zt[gi]).forEach(Bi=>{Ct.hasOwnProperty(Bi)||$e.add(Bi)})})}}),$e.size){const It=Kt($e.values());G.errors.push(`state("${N.name}", ...) must define default values for all the following style substitutions: ${It.join(", ")}`)}}return{type:0,name:N.name,style:Q,options:Me?{params:Me}:null}}visitTransition(N,G){G.queryCount=0,G.depCount=0;const Q=Ye(this,Ne(N.animation),G);return{type:1,matchers:Xe(N.expr,G.errors),animation:Q,queryCount:G.queryCount,depCount:G.depCount,options:qe(N.options)}}visitSequence(N,G){return{type:2,steps:N.steps.map(Q=>Ye(this,Q,G)),options:qe(N.options)}}visitGroup(N,G){const Q=G.currentTime;let Me=0;const $e=N.steps.map(Ct=>{G.currentTime=Q;const It=Ye(this,Ct,G);return Me=Math.max(Me,G.currentTime),It});return G.currentTime=Me,{type:3,steps:$e,options:qe(N.options)}}visitAnimate(N,G){const Q=function(fe,N){let G=null;if(fe.hasOwnProperty("duration"))G=fe;else if("number"==typeof fe)return be($t(fe,N).duration,0,"");const Q=fe;if(Q.split(/\s+/).some($e=>"{"==$e.charAt(0)&&"{"==$e.charAt(1))){const $e=be(0,0,"");return $e.dynamic=!0,$e.strValue=Q,$e}return G=G||$t(Q,N),be(G.duration,G.delay,G.easing)}(N.timings,G.errors);G.currentAnimateTimings=Q;let Me,$e=N.styles?N.styles:(0,t.oB)({});if(5==$e.type)Me=this.visitKeyframes($e,G);else{let Ct=N.styles,It=!1;if(!Ct){It=!0;const gi={};Q.easing&&(gi.easing=Q.easing),Ct=(0,t.oB)(gi)}G.currentTime+=Q.duration+Q.delay;const Zt=this.visitStyle(Ct,G);Zt.isEmptyStep=It,Me=Zt}return G.currentAnimateTimings=null,{type:4,timings:Q,style:Me,options:null}}visitStyle(N,G){const Q=this._makeStyleAst(N,G);return this._validateStyleAst(Q,G),Q}_makeStyleAst(N,G){const Q=[];Array.isArray(N.styles)?N.styles.forEach(Ct=>{"string"==typeof Ct?Ct==t.l3?Q.push(Ct):G.errors.push(`The provided style string value ${Ct} is not allowed.`):Q.push(Ct)}):Q.push(N.styles);let Me=!1,$e=null;return Q.forEach(Ct=>{if(Tn(Ct)){const It=Ct,Zt=It.easing;if(Zt&&($e=Zt,delete It.easing),!Me)for(let gi in It)if(It[gi].toString().indexOf("{{")>=0){Me=!0;break}}}),{type:6,styles:Q,easing:$e,offset:N.offset,containsDynamicStyles:Me,options:null}}_validateStyleAst(N,G){const Q=G.currentAnimateTimings;let Me=G.currentTime,$e=G.currentTime;Q&&$e>0&&($e-=Q.duration+Q.delay),N.styles.forEach(Ct=>{"string"!=typeof Ct&&Object.keys(Ct).forEach(It=>{if(!this._driver.validateStyleProperty(It))return void G.errors.push(`The provided animation property "${It}" is not a supported CSS property for animations`);const Zt=G.collectedStyles[G.currentQuerySelector],gi=Zt[It];let Bi=!0;gi&&($e!=Me&&$e>=gi.startTime&&Me<=gi.endTime&&(G.errors.push(`The CSS property "${It}" that exists between the times of "${gi.startTime}ms" and "${gi.endTime}ms" is also being animated in a parallel animation between the times of "${$e}ms" and "${Me}ms"`),Bi=!1),$e=gi.startTime),Bi&&(Zt[It]={startTime:$e,endTime:Me}),G.options&&function(fe,N,G){const Q=N.params||{},Me=Te(fe);Me.length&&Me.forEach($e=>{Q.hasOwnProperty($e)||G.push(`Unable to resolve the local animation param ${$e} in the given list of values`)})}(Ct[It],G.options,G.errors)})})}visitKeyframes(N,G){const Q={type:5,styles:[],options:null};if(!G.currentAnimateTimings)return G.errors.push("keyframes() must be placed inside of a call to animate()"),Q;let $e=0;const Ct=[];let It=!1,Zt=!1,gi=0;const Bi=N.steps.map(rs=>{const Cs=this._makeStyleAst(rs,G);let Us=null!=Cs.offset?Cs.offset:function(fe){if("string"==typeof fe)return null;let N=null;if(Array.isArray(fe))fe.forEach(G=>{if(Tn(G)&&G.hasOwnProperty("offset")){const Q=G;N=parseFloat(Q.offset),delete Q.offset}});else if(Tn(fe)&&fe.hasOwnProperty("offset")){const G=fe;N=parseFloat(G.offset),delete G.offset}return N}(Cs.styles),oo=0;return null!=Us&&($e++,oo=Cs.offset=Us),Zt=Zt||oo<0||oo>1,It=It||oo<gi,gi=oo,Ct.push(oo),Cs});Zt&&G.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),It&&G.errors.push("Please ensure that all keyframe offsets are in order");const nn=N.steps.length;let Nn=0;$e>0&&$e<nn?G.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==$e&&(Nn=1/(nn-1));const An=nn-1,hn=G.currentTime,On=G.currentAnimateTimings,kn=On.duration;return Bi.forEach((rs,Cs)=>{const Us=Nn>0?Cs==An?1:Nn*Cs:Ct[Cs],oo=Us*kn;G.currentTime=hn+On.delay+oo,On.duration=oo,this._validateStyleAst(rs,G),rs.offset=Us,Q.styles.push(rs)}),Q}visitReference(N,G){return{type:8,animation:Ye(this,Ne(N.animation),G),options:qe(N.options)}}visitAnimateChild(N,G){return G.depCount++,{type:9,options:qe(N.options)}}visitAnimateRef(N,G){return{type:10,animation:this.visitReference(N.animation,G),options:qe(N.options)}}visitQuery(N,G){const Q=G.currentQuerySelector,Me=N.options||{};G.queryCount++,G.currentQuery=N;const[$e,Ct]=function(fe){const N=!!fe.split(/\s*,\s*/).find(G=>":self"==G);return N&&(fe=fe.replace(xi,"")),fe=fe.replace(/@\*/g,Be).replace(/@\w+/g,G=>Be+"-"+G.substr(1)).replace(/:animating/g,St),[fe,N]}(N.selector);G.currentQuerySelector=Q.length?Q+" "+$e:$e,ee(G.collectedStyles,G.currentQuerySelector,{});const It=Ye(this,Ne(N.animation),G);return G.currentQuery=null,G.currentQuerySelector=Q,{type:11,selector:$e,limit:Me.limit||0,optional:!!Me.optional,includeSelf:Ct,animation:It,originalSelector:N.selector,options:qe(N.options)}}visitStagger(N,G){G.currentQuery||G.errors.push("stagger() can only be used inside of query()");const Q="full"===N.timings?{duration:0,delay:0,easing:"full"}:$t(N.timings,G.errors,!0);return{type:12,animation:Ye(this,Ne(N.animation),G),timings:Q,options:null}}}class fn{constructor(N){this.errors=N,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Tn(fe){return!Array.isArray(fe)&&"object"==typeof fe}function qe(fe){return fe?(fe=ti(fe)).params&&(fe.params=function(fe){return fe?ti(fe):null}(fe.params)):fe={},fe}function be(fe,N,G){return{duration:fe,delay:N,easing:G}}function te(fe,N,G,Q,Me,$e,Ct=null,It=!1){return{type:1,element:fe,keyframes:N,preStyleProps:G,postStyleProps:Q,duration:Me,delay:$e,totalTime:Me+$e,easing:Ct,subTimeline:It}}class me{constructor(){this._map=new Map}get(N){return this._map.get(N)||[]}append(N,G){let Q=this._map.get(N);Q||this._map.set(N,Q=[]),Q.push(...G)}has(N){return this._map.has(N)}clear(){this._map.clear()}}const Si=new RegExp(":enter","g"),mn=new RegExp(":leave","g");function $n(fe,N,G,Q,Me,$e={},Ct={},It,Zt,gi=[]){return(new Gt).buildKeyframes(fe,N,G,Q,Me,$e,Ct,It,Zt,gi)}class Gt{buildKeyframes(N,G,Q,Me,$e,Ct,It,Zt,gi,Bi=[]){gi=gi||new me;const nn=new ut(N,G,gi,Me,$e,Bi,[]);nn.options=Zt,nn.currentTimeline.setStyles([Ct],null,nn.errors,Zt),Ye(this,Q,nn);const Nn=nn.timelines.filter(An=>An.containsAnimation());if(Nn.length&&Object.keys(It).length){const An=Nn[Nn.length-1];An.allowOnlyTimelineStyles()||An.setStyles([It],null,nn.errors,Zt)}return Nn.length?Nn.map(An=>An.buildKeyframes()):[te(G,[],[],[],0,0,"",!1)]}visitTrigger(N,G){}visitState(N,G){}visitTransition(N,G){}visitAnimateChild(N,G){const Q=G.subInstructions.get(G.element);if(Q){const Me=G.createSubContext(N.options),$e=G.currentTimeline.currentTime,Ct=this._visitSubInstructions(Q,Me,Me.options);$e!=Ct&&G.transformIntoNewTimeline(Ct)}G.previousNode=N}visitAnimateRef(N,G){const Q=G.createSubContext(N.options);Q.transformIntoNewTimeline(),this.visitReference(N.animation,Q),G.transformIntoNewTimeline(Q.currentTimeline.currentTime),G.previousNode=N}_visitSubInstructions(N,G,Q){let $e=G.currentTimeline.currentTime;const Ct=null!=Q.duration?wt(Q.duration):null,It=null!=Q.delay?wt(Q.delay):null;return 0!==Ct&&N.forEach(Zt=>{const gi=G.appendInstructionToTimeline(Zt,Ct,It);$e=Math.max($e,gi.duration+gi.delay)}),$e}visitReference(N,G){G.updateOptions(N.options,!0),Ye(this,N.animation,G),G.previousNode=N}visitSequence(N,G){const Q=G.subContextCount;let Me=G;const $e=N.options;if($e&&($e.params||$e.delay)&&(Me=G.createSubContext($e),Me.transformIntoNewTimeline(),null!=$e.delay)){6==Me.previousNode.type&&(Me.currentTimeline.snapshotCurrentStyles(),Me.previousNode=Mt);const Ct=wt($e.delay);Me.delayNextStep(Ct)}N.steps.length&&(N.steps.forEach(Ct=>Ye(this,Ct,Me)),Me.currentTimeline.applyStylesToKeyframe(),Me.subContextCount>Q&&Me.transformIntoNewTimeline()),G.previousNode=N}visitGroup(N,G){const Q=[];let Me=G.currentTimeline.currentTime;const $e=N.options&&N.options.delay?wt(N.options.delay):0;N.steps.forEach(Ct=>{const It=G.createSubContext(N.options);$e&&It.delayNextStep($e),Ye(this,Ct,It),Me=Math.max(Me,It.currentTimeline.currentTime),Q.push(It.currentTimeline)}),Q.forEach(Ct=>G.currentTimeline.mergeTimelineCollectedStyles(Ct)),G.transformIntoNewTimeline(Me),G.previousNode=N}_visitTiming(N,G){if(N.dynamic){const Q=N.strValue;return $t(G.params?xt(Q,G.params,G.errors):Q,G.errors)}return{duration:N.duration,delay:N.delay,easing:N.easing}}visitAnimate(N,G){const Q=G.currentAnimateTimings=this._visitTiming(N.timings,G),Me=G.currentTimeline;Q.delay&&(G.incrementTime(Q.delay),Me.snapshotCurrentStyles());const $e=N.style;5==$e.type?this.visitKeyframes($e,G):(G.incrementTime(Q.duration),this.visitStyle($e,G),Me.applyStylesToKeyframe()),G.currentAnimateTimings=null,G.previousNode=N}visitStyle(N,G){const Q=G.currentTimeline,Me=G.currentAnimateTimings;!Me&&Q.getCurrentStyleProperties().length&&Q.forwardFrame();const $e=Me&&Me.easing||N.easing;N.isEmptyStep?Q.applyEmptyStep($e):Q.setStyles(N.styles,$e,G.errors,G.options),G.previousNode=N}visitKeyframes(N,G){const Q=G.currentAnimateTimings,Me=G.currentTimeline.duration,$e=Q.duration,It=G.createSubContext().currentTimeline;It.easing=Q.easing,N.styles.forEach(Zt=>{It.forwardTime((Zt.offset||0)*$e),It.setStyles(Zt.styles,Zt.easing,G.errors,G.options),It.applyStylesToKeyframe()}),G.currentTimeline.mergeTimelineCollectedStyles(It),G.transformIntoNewTimeline(Me+$e),G.previousNode=N}visitQuery(N,G){const Q=G.currentTimeline.currentTime,Me=N.options||{},$e=Me.delay?wt(Me.delay):0;$e&&(6===G.previousNode.type||0==Q&&G.currentTimeline.getCurrentStyleProperties().length)&&(G.currentTimeline.snapshotCurrentStyles(),G.previousNode=Mt);let Ct=Q;const It=G.invokeQuery(N.selector,N.originalSelector,N.limit,N.includeSelf,!!Me.optional,G.errors);G.currentQueryTotal=It.length;let Zt=null;It.forEach((gi,Bi)=>{G.currentQueryIndex=Bi;const nn=G.createSubContext(N.options,gi);$e&&nn.delayNextStep($e),gi===G.element&&(Zt=nn.currentTimeline),Ye(this,N.animation,nn),nn.currentTimeline.applyStylesToKeyframe(),Ct=Math.max(Ct,nn.currentTimeline.currentTime)}),G.currentQueryIndex=0,G.currentQueryTotal=0,G.transformIntoNewTimeline(Ct),Zt&&(G.currentTimeline.mergeTimelineCollectedStyles(Zt),G.currentTimeline.snapshotCurrentStyles()),G.previousNode=N}visitStagger(N,G){const Q=G.parentContext,Me=G.currentTimeline,$e=N.timings,Ct=Math.abs($e.duration),It=Ct*(G.currentQueryTotal-1);let Zt=Ct*G.currentQueryIndex;switch($e.duration<0?"reverse":$e.easing){case"reverse":Zt=It-Zt;break;case"full":Zt=Q.currentStaggerTime}const Bi=G.currentTimeline;Zt&&Bi.delayNextStep(Zt);const nn=Bi.currentTime;Ye(this,N.animation,G),G.previousNode=N,Q.currentStaggerTime=Me.currentTime-nn+(Me.startTime-Q.currentTimeline.startTime)}}const Mt={};class ut{constructor(N,G,Q,Me,$e,Ct,It,Zt){this._driver=N,this.element=G,this.subInstructions=Q,this._enterClassName=Me,this._leaveClassName=$e,this.errors=Ct,this.timelines=It,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Mt,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Zt||new Ut(this._driver,G,0),It.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(N,G){if(!N)return;const Q=N;let Me=this.options;null!=Q.duration&&(Me.duration=wt(Q.duration)),null!=Q.delay&&(Me.delay=wt(Q.delay));const $e=Q.params;if($e){let Ct=Me.params;Ct||(Ct=this.options.params={}),Object.keys($e).forEach(It=>{(!G||!Ct.hasOwnProperty(It))&&(Ct[It]=xt($e[It],Ct,this.errors))})}}_copyOptions(){const N={};if(this.options){const G=this.options.params;if(G){const Q=N.params={};Object.keys(G).forEach(Me=>{Q[Me]=G[Me]})}}return N}createSubContext(N=null,G,Q){const Me=G||this.element,$e=new ut(this._driver,Me,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Me,Q||0));return $e.previousNode=this.previousNode,$e.currentAnimateTimings=this.currentAnimateTimings,$e.options=this._copyOptions(),$e.updateOptions(N),$e.currentQueryIndex=this.currentQueryIndex,$e.currentQueryTotal=this.currentQueryTotal,$e.parentContext=this,this.subContextCount++,$e}transformIntoNewTimeline(N){return this.previousNode=Mt,this.currentTimeline=this.currentTimeline.fork(this.element,N),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(N,G,Q){const Me={duration:null!=G?G:N.duration,delay:this.currentTimeline.currentTime+(null!=Q?Q:0)+N.delay,easing:""},$e=new ui(this._driver,N.element,N.keyframes,N.preStyleProps,N.postStyleProps,Me,N.stretchStartingKeyframe);return this.timelines.push($e),Me}incrementTime(N){this.currentTimeline.forwardTime(this.currentTimeline.duration+N)}delayNextStep(N){N>0&&this.currentTimeline.delayNextStep(N)}invokeQuery(N,G,Q,Me,$e,Ct){let It=[];if(Me&&It.push(this.element),N.length>0){N=(N=N.replace(Si,"."+this._enterClassName)).replace(mn,"."+this._leaveClassName);let gi=this._driver.query(this.element,N,1!=Q);0!==Q&&(gi=Q<0?gi.slice(gi.length+Q,gi.length):gi.slice(0,Q)),It.push(...gi)}return!$e&&0==It.length&&Ct.push(`\`query("${G}")\` returned zero elements. (Use \`query("${G}", { optional: true })\` if you wish to allow this.)`),It}}class Ut{constructor(N,G,Q,Me){this._driver=N,this.element=G,this.startTime=Q,this._elementTimelineStylesLookup=Me,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(G),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(G,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(N){const G=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||G?(this.forwardTime(this.currentTime+N),G&&this.snapshotCurrentStyles()):this.startTime+=N}fork(N,G){return this.applyStylesToKeyframe(),new Ut(this._driver,N,G||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(N){this.applyStylesToKeyframe(),this.duration=N,this._loadKeyframe()}_updateStyle(N,G){this._localTimelineStyles[N]=G,this._globalTimelineStyles[N]=G,this._styleSummary[N]={time:this.currentTime,value:G}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(N){N&&(this._previousKeyframe.easing=N),Object.keys(this._globalTimelineStyles).forEach(G=>{this._backFill[G]=this._globalTimelineStyles[G]||t.l3,this._currentKeyframe[G]=t.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(N,G,Q,Me){G&&(this._previousKeyframe.easing=G);const $e=Me&&Me.params||{},Ct=function(fe,N){const G={};let Q;return fe.forEach(Me=>{"*"===Me?(Q=Q||Object.keys(N),Q.forEach($e=>{G[$e]=t.l3})):pi(Me,!1,G)}),G}(N,this._globalTimelineStyles);Object.keys(Ct).forEach(It=>{const Zt=xt(Ct[It],$e,Q);this._pendingStyles[It]=Zt,this._localTimelineStyles.hasOwnProperty(It)||(this._backFill[It]=this._globalTimelineStyles.hasOwnProperty(It)?this._globalTimelineStyles[It]:t.l3),this._updateStyle(It,Zt)})}applyStylesToKeyframe(){const N=this._pendingStyles,G=Object.keys(N);0!=G.length&&(this._pendingStyles={},G.forEach(Q=>{this._currentKeyframe[Q]=N[Q]}),Object.keys(this._localTimelineStyles).forEach(Q=>{this._currentKeyframe.hasOwnProperty(Q)||(this._currentKeyframe[Q]=this._localTimelineStyles[Q])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(N=>{const G=this._localTimelineStyles[N];this._pendingStyles[N]=G,this._updateStyle(N,G)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const N=[];for(let G in this._currentKeyframe)N.push(G);return N}mergeTimelineCollectedStyles(N){Object.keys(N._styleSummary).forEach(G=>{const Q=this._styleSummary[G],Me=N._styleSummary[G];(!Q||Me.time>Q.time)&&this._updateStyle(G,Me.value)})}buildKeyframes(){this.applyStylesToKeyframe();const N=new Set,G=new Set,Q=1===this._keyframes.size&&0===this.duration;let Me=[];this._keyframes.forEach((It,Zt)=>{const gi=pi(It,!0);Object.keys(gi).forEach(Bi=>{const nn=gi[Bi];nn==t.k1?N.add(Bi):nn==t.l3&&G.add(Bi)}),Q||(gi.offset=Zt/this.duration),Me.push(gi)});const $e=N.size?Kt(N.values()):[],Ct=G.size?Kt(G.values()):[];if(Q){const It=Me[0],Zt=ti(It);It.offset=0,Zt.offset=1,Me=[It,Zt]}return te(this.element,Me,$e,Ct,this.duration,this.startTime,this.easing,!1)}}class ui extends Ut{constructor(N,G,Q,Me,$e,Ct,It=!1){super(N,G,Ct.delay),this.keyframes=Q,this.preStyleProps=Me,this.postStyleProps=$e,this._stretchStartingKeyframe=It,this.timings={duration:Ct.duration,delay:Ct.delay,easing:Ct.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let N=this.keyframes,{delay:G,duration:Q,easing:Me}=this.timings;if(this._stretchStartingKeyframe&&G){const $e=[],Ct=Q+G,It=G/Ct,Zt=pi(N[0],!1);Zt.offset=0,$e.push(Zt);const gi=pi(N[0],!1);gi.offset=Yi(It),$e.push(gi);const Bi=N.length-1;for(let nn=1;nn<=Bi;nn++){let Nn=pi(N[nn],!1);Nn.offset=Yi((G+Nn.offset*Q)/Ct),$e.push(Nn)}Q=Ct,G=0,Me="",N=$e}return te(this.element,N,this.preStyleProps,this.postStyleProps,Q,G,Me,!0)}}function Yi(fe,N=3){const G=Math.pow(10,N-1);return Math.round(fe*G)/G}class as{}class js extends as{normalizePropertyName(N,G){return ke(N)}normalizeStyleValue(N,G,Q,Me){let $e="";const Ct=Q.toString().trim();if(Co[G]&&0!==Q&&"0"!==Q)if("number"==typeof Q)$e="px";else{const It=Q.match(/^[+-]?[\d\.]+([a-z]*)$/);It&&0==It[1].length&&Me.push(`Please provide a CSS unit value for ${N}:${Q}`)}return Ct+$e}}const Co=(()=>function(fe){const N={};return fe.forEach(G=>N[G]=!0),N}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Jn(fe,N,G,Q,Me,$e,Ct,It,Zt,gi,Bi,nn,Nn){return{type:0,element:fe,triggerName:N,isRemovalTransition:Me,fromState:G,fromStyles:$e,toState:Q,toStyles:Ct,timelines:It,queriedElements:Zt,preStyleProps:gi,postStyleProps:Bi,totalTime:nn,errors:Nn}}const _o={};class Pn{constructor(N,G,Q){this._triggerName=N,this.ast=G,this._stateStyles=Q}match(N,G,Q,Me){return function(fe,N,G,Q,Me){return fe.some($e=>$e(N,G,Q,Me))}(this.ast.matchers,N,G,Q,Me)}buildStyles(N,G,Q){const Me=this._stateStyles["*"],$e=this._stateStyles[N],Ct=Me?Me.buildStyles(G,Q):{};return $e?$e.buildStyles(G,Q):Ct}build(N,G,Q,Me,$e,Ct,It,Zt,gi,Bi){const nn=[],Nn=this.ast.options&&this.ast.options.params||_o,hn=this.buildStyles(Q,It&&It.params||_o,nn),On=Zt&&Zt.params||_o,kn=this.buildStyles(Me,On,nn),rs=new Set,Cs=new Map,Us=new Map,oo="void"===Me,Qr={params:Object.assign(Object.assign({},Nn),On)},ir=Bi?[]:$n(N,G,this.ast.animation,$e,Ct,hn,kn,Qr,gi,nn);let Zs=0;if(ir.forEach(zo=>{Zs=Math.max(zo.duration+zo.delay,Zs)}),nn.length)return Jn(G,this._triggerName,Q,Me,oo,hn,kn,[],[],Cs,Us,Zs,nn);ir.forEach(zo=>{const nr=zo.element,La=ee(Cs,nr,{});zo.preStyleProps.forEach(br=>La[br]=!0);const ea=ee(Us,nr,{});zo.postStyleProps.forEach(br=>ea[br]=!0),nr!==G&&rs.add(nr)});const vr=Kt(rs.values());return Jn(G,this._triggerName,Q,Me,oo,hn,kn,ir,vr,Cs,Us,Zs)}}class gn{constructor(N,G,Q){this.styles=N,this.defaultParams=G,this.normalizer=Q}buildStyles(N,G){const Q={},Me=ti(this.defaultParams);return Object.keys(N).forEach($e=>{const Ct=N[$e];null!=Ct&&(Me[$e]=Ct)}),this.styles.styles.forEach($e=>{if("string"!=typeof $e){const Ct=$e;Object.keys(Ct).forEach(It=>{let Zt=Ct[It];Zt.length>1&&(Zt=xt(Zt,Me,G));const gi=this.normalizer.normalizePropertyName(It,G);Zt=this.normalizer.normalizeStyleValue(It,gi,Zt,G),Q[gi]=Zt})}}),Q}}class fs{constructor(N,G,Q){this.name=N,this.ast=G,this._normalizer=Q,this.transitionFactories=[],this.states={},G.states.forEach(Me=>{this.states[Me.name]=new gn(Me.style,Me.options&&Me.options.params||{},Q)}),is(this.states,"true","1"),is(this.states,"false","0"),G.transitions.forEach(Me=>{this.transitionFactories.push(new Pn(N,Me,this.states))}),this.fallbackTransition=function(fe,N,G){return new Pn(fe,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ct,It)=>!0],options:null,queryCount:0,depCount:0},N)}(N,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(N,G,Q,Me){return this.transitionFactories.find(Ct=>Ct.match(N,G,Q,Me))||null}matchStyles(N,G,Q){return this.fallbackTransition.buildStyles(N,G,Q)}}function is(fe,N,G){fe.hasOwnProperty(N)?fe.hasOwnProperty(G)||(fe[G]=fe[N]):fe.hasOwnProperty(G)&&(fe[N]=fe[G])}const Ss=new me;class ss{constructor(N,G,Q){this.bodyNode=N,this._driver=G,this._normalizer=Q,this._animations={},this._playersById={},this.players=[]}register(N,G){const Q=[],Me=Ln(this._driver,G,Q);if(Q.length)throw new Error(`Unable to build the animation due to the following errors: ${Q.join("\n")}`);this._animations[N]=Me}_buildPlayer(N,G,Q){const Me=N.element,$e=f(0,this._normalizer,0,N.keyframes,G,Q);return this._driver.animate(Me,$e,N.duration,N.delay,N.easing,[],!0)}create(N,G,Q={}){const Me=[],$e=this._animations[N];let Ct;const It=new Map;if($e?(Ct=$n(this._driver,G,$e,ge,se,{},{},Q,Ss,Me),Ct.forEach(Bi=>{const nn=ee(It,Bi.element,{});Bi.postStyleProps.forEach(Nn=>nn[Nn]=null)})):(Me.push("The requested animation doesn't exist or has already been destroyed"),Ct=[]),Me.length)throw new Error(`Unable to create the animation due to the following errors: ${Me.join("\n")}`);It.forEach((Bi,nn)=>{Object.keys(Bi).forEach(Nn=>{Bi[Nn]=this._driver.computeStyle(nn,Nn,t.l3)})});const gi=a(Ct.map(Bi=>{const nn=It.get(Bi.element);return this._buildPlayer(Bi,{},nn)}));return this._playersById[N]=gi,gi.onDestroy(()=>this.destroy(N)),this.players.push(gi),gi}destroy(N){const G=this._getPlayer(N);G.destroy(),delete this._playersById[N];const Q=this.players.indexOf(G);Q>=0&&this.players.splice(Q,1)}_getPlayer(N){const G=this._playersById[N];if(!G)throw new Error(`Unable to find the timeline player referenced by ${N}`);return G}listen(N,G,Q,Me){const $e=Y(G,"","","");return E(this._getPlayer(N),Q,$e,Me),()=>{}}command(N,G,Q,Me){if("register"==Q)return void this.register(N,Me[0]);if("create"==Q)return void this.create(N,G,Me[0]||{});const $e=this._getPlayer(N);switch(Q){case"play":$e.play();break;case"pause":$e.pause();break;case"reset":$e.reset();break;case"restart":$e.restart();break;case"finish":$e.finish();break;case"init":$e.init();break;case"setPosition":$e.setPosition(parseFloat(Me[0]));break;case"destroy":this.destroy(N)}}}const _i="ng-animate-queued",yn="ng-animate-disabled",Di=[],Ti={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Bn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},En="__ng_removed";class Sn{constructor(N,G=""){this.namespaceId=G;const Q=N&&N.hasOwnProperty("value");if(this.value=null!=(fe=Q?N.value:N)?fe:null,Q){const $e=ti(N);delete $e.value,this.options=$e}else this.options={};var fe;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(N){const G=N.params;if(G){const Q=this.options.params;Object.keys(G).forEach(Me=>{null==Q[Me]&&(Q[Me]=G[Me])})}}}const dn="void",Qs=new Sn(dn);class Eo{constructor(N,G,Q){this.id=N,this.hostElement=G,this._engine=Q,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+N,$s(G,this._hostClassName)}listen(N,G,Q,Me){if(!this._triggers.hasOwnProperty(G))throw new Error(`Unable to listen on the animation trigger event "${Q}" because the animation trigger "${G}" doesn't exist!`);if(null==Q||0==Q.length)throw new Error(`Unable to listen on the animation trigger "${G}" because the provided event is undefined!`);if("start"!=(fe=Q)&&"done"!=fe)throw new Error(`The provided animation trigger event "${Q}" for the animation trigger "${G}" is not supported!`);var fe;const $e=ee(this._elementListeners,N,[]),Ct={name:G,phase:Q,callback:Me};$e.push(Ct);const It=ee(this._engine.statesByElement,N,{});return It.hasOwnProperty(G)||($s(N,at),$s(N,at+"-"+G),It[G]=Qs),()=>{this._engine.afterFlush(()=>{const Zt=$e.indexOf(Ct);Zt>=0&&$e.splice(Zt,1),this._triggers[G]||delete It[G]})}}register(N,G){return!this._triggers[N]&&(this._triggers[N]=G,!0)}_getTrigger(N){const G=this._triggers[N];if(!G)throw new Error(`The provided animation trigger "${N}" has not been registered!`);return G}trigger(N,G,Q,Me=!0){const $e=this._getTrigger(G),Ct=new Hs(this.id,G,N);let It=this._engine.statesByElement.get(N);It||($s(N,at),$s(N,at+"-"+G),this._engine.statesByElement.set(N,It={}));let Zt=It[G];const gi=new Sn(Q,this.id);if(!(Q&&Q.hasOwnProperty("value"))&&Zt&&gi.absorbOptions(Zt.options),It[G]=gi,Zt||(Zt=Qs),gi.value!==dn&&Zt.value===gi.value){if(!function(fe,N){const G=Object.keys(fe),Q=Object.keys(N);if(G.length!=Q.length)return!1;for(let Me=0;Me<G.length;Me++){const $e=G[Me];if(!N.hasOwnProperty($e)||fe[$e]!==N[$e])return!1}return!0}(Zt.params,gi.params)){const On=[],kn=$e.matchStyles(Zt.value,Zt.params,On),rs=$e.matchStyles(gi.value,gi.params,On);On.length?this._engine.reportError(On):this._engine.afterFlush(()=>{vt(N,kn),Ce(N,rs)})}return}const Nn=ee(this._engine.playersByElement,N,[]);Nn.forEach(On=>{On.namespaceId==this.id&&On.triggerName==G&&On.queued&&On.destroy()});let An=$e.matchTransition(Zt.value,gi.value,N,gi.params),hn=!1;if(!An){if(!Me)return;An=$e.fallbackTransition,hn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:N,triggerName:G,transition:An,fromState:Zt,toState:gi,player:Ct,isFallbackTransition:hn}),hn||($s(N,_i),Ct.onStart(()=>{vo(N,_i)})),Ct.onDone(()=>{let On=this.players.indexOf(Ct);On>=0&&this.players.splice(On,1);const kn=this._engine.playersByElement.get(N);if(kn){let rs=kn.indexOf(Ct);rs>=0&&kn.splice(rs,1)}}),this.players.push(Ct),Nn.push(Ct),Ct}deregister(N){delete this._triggers[N],this._engine.statesByElement.forEach((G,Q)=>{delete G[N]}),this._elementListeners.forEach((G,Q)=>{this._elementListeners.set(Q,G.filter(Me=>Me.name!=N))})}clearElementCache(N){this._engine.statesByElement.delete(N),this._elementListeners.delete(N);const G=this._engine.playersByElement.get(N);G&&(G.forEach(Q=>Q.destroy()),this._engine.playersByElement.delete(N))}_signalRemovalForInnerTriggers(N,G){const Q=this._engine.driver.query(N,Be,!0);Q.forEach(Me=>{if(Me[En])return;const $e=this._engine.fetchNamespacesByElement(Me);$e.size?$e.forEach(Ct=>Ct.triggerLeaveAnimation(Me,G,!1,!0)):this.clearElementCache(Me)}),this._engine.afterFlushAnimationsDone(()=>Q.forEach(Me=>this.clearElementCache(Me)))}triggerLeaveAnimation(N,G,Q,Me){const $e=this._engine.statesByElement.get(N);if($e){const Ct=[];if(Object.keys($e).forEach(It=>{if(this._triggers[It]){const Zt=this.trigger(N,It,dn,Me);Zt&&Ct.push(Zt)}}),Ct.length)return this._engine.markElementAsRemoved(this.id,N,!0,G),Q&&a(Ct).onDone(()=>this._engine.processLeaveNode(N)),!0}return!1}prepareLeaveAnimationListeners(N){const G=this._elementListeners.get(N),Q=this._engine.statesByElement.get(N);if(G&&Q){const Me=new Set;G.forEach($e=>{const Ct=$e.name;if(Me.has(Ct))return;Me.add(Ct);const Zt=this._triggers[Ct].fallbackTransition,gi=Q[Ct]||Qs,Bi=new Sn(dn),nn=new Hs(this.id,Ct,N);this._engine.totalQueuedPlayers++,this._queue.push({element:N,triggerName:Ct,transition:Zt,fromState:gi,toState:Bi,player:nn,isFallbackTransition:!0})})}}removeNode(N,G){const Q=this._engine;if(N.childElementCount&&this._signalRemovalForInnerTriggers(N,G),this.triggerLeaveAnimation(N,G,!0))return;let Me=!1;if(Q.totalAnimations){const $e=Q.players.length?Q.playersByQueriedElement.get(N):[];if($e&&$e.length)Me=!0;else{let Ct=N;for(;Ct=Ct.parentNode;)if(Q.statesByElement.get(Ct)){Me=!0;break}}}if(this.prepareLeaveAnimationListeners(N),Me)Q.markElementAsRemoved(this.id,N,!1,G);else{const $e=N[En];(!$e||$e===Ti)&&(Q.afterFlush(()=>this.clearElementCache(N)),Q.destroyInnerAnimations(N),Q._onRemovalComplete(N,G))}}insertNode(N,G){$s(N,this._hostClassName)}drainQueuedTransitions(N){const G=[];return this._queue.forEach(Q=>{const Me=Q.player;if(Me.destroyed)return;const $e=Q.element,Ct=this._elementListeners.get($e);Ct&&Ct.forEach(It=>{if(It.name==Q.triggerName){const Zt=Y($e,Q.triggerName,Q.fromState.value,Q.toState.value);Zt._data=N,E(Q.player,It.phase,Zt,It.callback)}}),Me.markedForDestroy?this._engine.afterFlush(()=>{Me.destroy()}):G.push(Q)}),this._queue=[],G.sort((Q,Me)=>{const $e=Q.transition.ast.depCount,Ct=Me.transition.ast.depCount;return 0==$e||0==Ct?$e-Ct:this._engine.driver.containsElement(Q.element,Me.element)?1:-1})}destroy(N){this.players.forEach(G=>G.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,N)}elementContainsData(N){let G=!1;return this._elementListeners.has(N)&&(G=!0),G=!!this._queue.find(Q=>Q.element===N)||G,G}}class Bs{constructor(N,G,Q){this.bodyNode=N,this.driver=G,this._normalizer=Q,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Me,$e)=>{}}_onRemovalComplete(N,G){this.onRemovalComplete(N,G)}get queuedPlayers(){const N=[];return this._namespaceList.forEach(G=>{G.players.forEach(Q=>{Q.queued&&N.push(Q)})}),N}createNamespace(N,G){const Q=new Eo(N,G,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,G)?this._balanceNamespaceList(Q,G):(this.newHostElements.set(G,Q),this.collectEnterElement(G)),this._namespaceLookup[N]=Q}_balanceNamespaceList(N,G){const Q=this._namespaceList.length-1;if(Q>=0){let Me=!1;for(let $e=Q;$e>=0;$e--)if(this.driver.containsElement(this._namespaceList[$e].hostElement,G)){this._namespaceList.splice($e+1,0,N),Me=!0;break}Me||this._namespaceList.splice(0,0,N)}else this._namespaceList.push(N);return this.namespacesByHostElement.set(G,N),N}register(N,G){let Q=this._namespaceLookup[N];return Q||(Q=this.createNamespace(N,G)),Q}registerTrigger(N,G,Q){let Me=this._namespaceLookup[N];Me&&Me.register(G,Q)&&this.totalAnimations++}destroy(N,G){if(!N)return;const Q=this._fetchNamespace(N);this.afterFlush(()=>{this.namespacesByHostElement.delete(Q.hostElement),delete this._namespaceLookup[N];const Me=this._namespaceList.indexOf(Q);Me>=0&&this._namespaceList.splice(Me,1)}),this.afterFlushAnimationsDone(()=>Q.destroy(G))}_fetchNamespace(N){return this._namespaceLookup[N]}fetchNamespacesByElement(N){const G=new Set,Q=this.statesByElement.get(N);if(Q){const Me=Object.keys(Q);for(let $e=0;$e<Me.length;$e++){const Ct=Q[Me[$e]].namespaceId;if(Ct){const It=this._fetchNamespace(Ct);It&&G.add(It)}}}return G}trigger(N,G,Q,Me){if(To(G)){const $e=this._fetchNamespace(N);if($e)return $e.trigger(G,Q,Me),!0}return!1}insertNode(N,G,Q,Me){if(!To(G))return;const $e=G[En];if($e&&$e.setForRemoval){$e.setForRemoval=!1,$e.setForMove=!0;const Ct=this.collectedLeaveElements.indexOf(G);Ct>=0&&this.collectedLeaveElements.splice(Ct,1)}if(N){const Ct=this._fetchNamespace(N);Ct&&Ct.insertNode(G,Q)}Me&&this.collectEnterElement(G)}collectEnterElement(N){this.collectedEnterElements.push(N)}markElementAsDisabled(N,G){G?this.disabledNodes.has(N)||(this.disabledNodes.add(N),$s(N,yn)):this.disabledNodes.has(N)&&(this.disabledNodes.delete(N),vo(N,yn))}removeNode(N,G,Q,Me){if(To(G)){const $e=N?this._fetchNamespace(N):null;if($e?$e.removeNode(G,Me):this.markElementAsRemoved(N,G,!1,Me),Q){const Ct=this.namespacesByHostElement.get(G);Ct&&Ct.id!==N&&Ct.removeNode(G,Me)}}else this._onRemovalComplete(G,Me)}markElementAsRemoved(N,G,Q,Me){this.collectedLeaveElements.push(G),G[En]={namespaceId:N,setForRemoval:Me,hasAnimation:Q,removedBeforeQueried:!1}}listen(N,G,Q,Me,$e){return To(G)?this._fetchNamespace(N).listen(G,Q,Me,$e):()=>{}}_buildInstruction(N,G,Q,Me,$e){return N.transition.build(this.driver,N.element,N.fromState.value,N.toState.value,Q,Me,N.fromState.options,N.toState.options,G,$e)}destroyInnerAnimations(N){let G=this.driver.query(N,Be,!0);G.forEach(Q=>this.destroyActiveAnimationsForElement(Q)),0!=this.playersByQueriedElement.size&&(G=this.driver.query(N,St,!0),G.forEach(Q=>this.finishActiveQueriedAnimationOnElement(Q)))}destroyActiveAnimationsForElement(N){const G=this.playersByElement.get(N);G&&G.forEach(Q=>{Q.queued?Q.markedForDestroy=!0:Q.destroy()})}finishActiveQueriedAnimationOnElement(N){const G=this.playersByQueriedElement.get(N);G&&G.forEach(Q=>Q.finish())}whenRenderingDone(){return new Promise(N=>{if(this.players.length)return a(this.players).onDone(()=>N());N()})}processLeaveNode(N){var G;const Q=N[En];if(Q&&Q.setForRemoval){if(N[En]=Ti,Q.namespaceId){this.destroyInnerAnimations(N);const Me=this._fetchNamespace(Q.namespaceId);Me&&Me.clearElementCache(N)}this._onRemovalComplete(N,Q.setForRemoval)}(null===(G=N.classList)||void 0===G?void 0:G.contains(yn))&&this.markElementAsDisabled(N,!1),this.driver.query(N,".ng-animate-disabled",!0).forEach(Me=>{this.markElementAsDisabled(Me,!1)})}flush(N=-1){let G=[];if(this.newHostElements.size&&(this.newHostElements.forEach((Q,Me)=>this._balanceNamespaceList(Q,Me)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let Q=0;Q<this.collectedEnterElements.length;Q++)$s(this.collectedEnterElements[Q],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const Q=[];try{G=this._flushAnimations(Q,N)}finally{for(let Me=0;Me<Q.length;Me++)Q[Me]()}}else for(let Q=0;Q<this.collectedLeaveElements.length;Q++)this.processLeaveNode(this.collectedLeaveElements[Q]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(Q=>Q()),this._flushFns=[],this._whenQuietFns.length){const Q=this._whenQuietFns;this._whenQuietFns=[],G.length?a(G).onDone(()=>{Q.forEach(Me=>Me())}):Q.forEach(Me=>Me())}}reportError(N){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${N.join("\n")}`)}_flushAnimations(N,G){const Q=new me,Me=[],$e=new Map,Ct=[],It=new Map,Zt=new Map,gi=new Map,Bi=new Set;this.disabledNodes.forEach(on=>{Bi.add(on);const an=this.driver.query(on,".ng-animate-queued",!0);for(let Fn=0;Fn<an.length;Fn++)Bi.add(an[Fn])});const nn=this.bodyNode,Nn=Array.from(this.statesByElement.keys()),An=no(Nn,this.collectedEnterElements),hn=new Map;let On=0;An.forEach((on,an)=>{const Fn=ge+On++;hn.set(an,Fn),on.forEach(Un=>$s(Un,Fn))});const kn=[],rs=new Set,Cs=new Set;for(let on=0;on<this.collectedLeaveElements.length;on++){const an=this.collectedLeaveElements[on],Fn=an[En];Fn&&Fn.setForRemoval&&(kn.push(an),rs.add(an),Fn.hasAnimation?this.driver.query(an,".ng-star-inserted",!0).forEach(Un=>rs.add(Un)):Cs.add(an))}const Us=new Map,oo=no(Nn,Array.from(rs));oo.forEach((on,an)=>{const Fn=se+On++;Us.set(an,Fn),on.forEach(Un=>$s(Un,Fn))}),N.push(()=>{An.forEach((on,an)=>{const Fn=hn.get(an);on.forEach(Un=>vo(Un,Fn))}),oo.forEach((on,an)=>{const Fn=Us.get(an);on.forEach(Un=>vo(Un,Fn))}),kn.forEach(on=>{this.processLeaveNode(on)})});const Qr=[],ir=[];for(let on=this._namespaceList.length-1;on>=0;on--)this._namespaceList[on].drainQueuedTransitions(G).forEach(Fn=>{const Un=Fn.player,us=Fn.element;if(Qr.push(Un),this.collectedEnterElements.length){const _s=us[En];if(_s&&_s.setForMove)return void Un.destroy()}const wo=!nn||!this.driver.containsElement(nn,us),ds=Us.get(us),sr=hn.get(us),Gs=this._buildInstruction(Fn,Q,sr,ds,wo);if(Gs.errors&&Gs.errors.length)return void ir.push(Gs);if(wo)return Un.onStart(()=>vt(us,Gs.fromStyles)),Un.onDestroy(()=>Ce(us,Gs.toStyles)),void Me.push(Un);if(Fn.isFallbackTransition)return Un.onStart(()=>vt(us,Gs.fromStyles)),Un.onDestroy(()=>Ce(us,Gs.toStyles)),void Me.push(Un);const sl=[];Gs.timelines.forEach(_s=>{_s.stretchStartingKeyframe=!0,this.disabledNodes.has(_s.element)||sl.push(_s)}),Gs.timelines=sl,Q.append(us,Gs.timelines),Ct.push({instruction:Gs,player:Un,element:us}),Gs.queriedElements.forEach(_s=>ee(It,_s,[]).push(Un)),Gs.preStyleProps.forEach((_s,Dr)=>{const Ho=Object.keys(_s);if(Ho.length){let or=Zt.get(Dr);or||Zt.set(Dr,or=new Set),Ho.forEach(Mr=>or.add(Mr))}}),Gs.postStyleProps.forEach((_s,Dr)=>{const Ho=Object.keys(_s);let or=gi.get(Dr);or||gi.set(Dr,or=new Set),Ho.forEach(Mr=>or.add(Mr))})});if(ir.length){const on=[];ir.forEach(an=>{on.push(`@${an.triggerName} has failed due to:\n`),an.errors.forEach(Fn=>on.push(`- ${Fn}\n`))}),Qr.forEach(an=>an.destroy()),this.reportError(on)}const Zs=new Map,vr=new Map;Ct.forEach(on=>{const an=on.element;Q.has(an)&&(vr.set(an,an),this._beforeAnimationBuild(on.player.namespaceId,on.instruction,Zs))}),Me.forEach(on=>{const an=on.element;this._getPreviousPlayers(an,!1,on.namespaceId,on.triggerName,null).forEach(Un=>{ee(Zs,an,[]).push(Un),Un.destroy()})});const zo=kn.filter(on=>bo(on,Zt,gi)),nr=new Map;Jo(nr,this.driver,Cs,gi,t.l3).forEach(on=>{bo(on,Zt,gi)&&zo.push(on)});const ea=new Map;An.forEach((on,an)=>{Jo(ea,this.driver,new Set(on),Zt,t.k1)}),zo.forEach(on=>{const an=nr.get(on),Fn=ea.get(on);nr.set(on,Object.assign(Object.assign({},an),Fn))});const br=[],kr=[],ta={};Ct.forEach(on=>{const{element:an,player:Fn,instruction:Un}=on;if(Q.has(an)){if(Bi.has(an))return Fn.onDestroy(()=>Ce(an,Un.toStyles)),Fn.disabled=!0,Fn.overrideTotalTime(Un.totalTime),void Me.push(Fn);let us=ta;if(vr.size>1){let ds=an;const sr=[];for(;ds=ds.parentNode;){const Gs=vr.get(ds);if(Gs){us=Gs;break}sr.push(ds)}sr.forEach(Gs=>vr.set(Gs,us))}const wo=this._buildAnimation(Fn.namespaceId,Un,Zs,$e,ea,nr);if(Fn.setRealPlayer(wo),us===ta)br.push(Fn);else{const ds=this.playersByElement.get(us);ds&&ds.length&&(Fn.parentPlayer=a(ds)),Me.push(Fn)}}else vt(an,Un.fromStyles),Fn.onDestroy(()=>Ce(an,Un.toStyles)),kr.push(Fn),Bi.has(an)&&Me.push(Fn)}),kr.forEach(on=>{const an=$e.get(on.element);if(an&&an.length){const Fn=a(an);on.setRealPlayer(Fn)}}),Me.forEach(on=>{on.parentPlayer?on.syncPlayerEvents(on.parentPlayer):on.destroy()});for(let on=0;on<kn.length;on++){const an=kn[on],Fn=an[En];if(vo(an,se),Fn&&Fn.hasAnimation)continue;let Un=[];if(It.size){let wo=It.get(an);wo&&wo.length&&Un.push(...wo);let ds=this.driver.query(an,St,!0);for(let sr=0;sr<ds.length;sr++){let Gs=It.get(ds[sr]);Gs&&Gs.length&&Un.push(...Gs)}}const us=Un.filter(wo=>!wo.destroyed);us.length?Js(this,an,us):this.processLeaveNode(an)}return kn.length=0,br.forEach(on=>{this.players.push(on),on.onDone(()=>{on.destroy();const an=this.players.indexOf(on);this.players.splice(an,1)}),on.play()}),br}elementContainsData(N,G){let Q=!1;const Me=G[En];return Me&&Me.setForRemoval&&(Q=!0),this.playersByElement.has(G)&&(Q=!0),this.playersByQueriedElement.has(G)&&(Q=!0),this.statesByElement.has(G)&&(Q=!0),this._fetchNamespace(N).elementContainsData(G)||Q}afterFlush(N){this._flushFns.push(N)}afterFlushAnimationsDone(N){this._whenQuietFns.push(N)}_getPreviousPlayers(N,G,Q,Me,$e){let Ct=[];if(G){const It=this.playersByQueriedElement.get(N);It&&(Ct=It)}else{const It=this.playersByElement.get(N);if(It){const Zt=!$e||$e==dn;It.forEach(gi=>{gi.queued||!Zt&&gi.triggerName!=Me||Ct.push(gi)})}}return(Q||Me)&&(Ct=Ct.filter(It=>!(Q&&Q!=It.namespaceId||Me&&Me!=It.triggerName))),Ct}_beforeAnimationBuild(N,G,Q){const $e=G.element,Ct=G.isRemovalTransition?void 0:N,It=G.isRemovalTransition?void 0:G.triggerName;for(const Zt of G.timelines){const gi=Zt.element,Bi=gi!==$e,nn=ee(Q,gi,[]);this._getPreviousPlayers(gi,Bi,Ct,It,G.toState).forEach(An=>{const hn=An.getRealPlayer();hn.beforeDestroy&&hn.beforeDestroy(),An.destroy(),nn.push(An)})}vt($e,G.fromStyles)}_buildAnimation(N,G,Q,Me,$e,Ct){const It=G.triggerName,Zt=G.element,gi=[],Bi=new Set,nn=new Set,Nn=G.timelines.map(hn=>{const On=hn.element;Bi.add(On);const kn=On[En];if(kn&&kn.removedBeforeQueried)return new t.ZN(hn.duration,hn.delay);const rs=On!==Zt,Cs=function(fe){const N=[];return Xr(fe,N),N}((Q.get(On)||Di).map(Zs=>Zs.getRealPlayer())).filter(Zs=>!!Zs.element&&Zs.element===On),Us=$e.get(On),oo=Ct.get(On),Qr=f(0,this._normalizer,0,hn.keyframes,Us,oo),ir=this._buildPlayer(hn,Qr,Cs);if(hn.subTimeline&&Me&&nn.add(On),rs){const Zs=new Hs(N,It,On);Zs.setRealPlayer(ir),gi.push(Zs)}return ir});gi.forEach(hn=>{ee(this.playersByQueriedElement,hn.element,[]).push(hn),hn.onDone(()=>function(fe,N,G){let Q;if(fe instanceof Map){if(Q=fe.get(N),Q){if(Q.length){const Me=Q.indexOf(G);Q.splice(Me,1)}0==Q.length&&fe.delete(N)}}else if(Q=fe[N],Q){if(Q.length){const Me=Q.indexOf(G);Q.splice(Me,1)}0==Q.length&&delete fe[N]}return Q}(this.playersByQueriedElement,hn.element,hn))}),Bi.forEach(hn=>$s(hn,ze));const An=a(Nn);return An.onDestroy(()=>{Bi.forEach(hn=>vo(hn,ze)),Ce(Zt,G.toStyles)}),nn.forEach(hn=>{ee(Me,hn,[]).push(An)}),An}_buildPlayer(N,G,Q){return G.length>0?this.driver.animate(N.element,G,N.duration,N.delay,N.easing,Q):new t.ZN(N.duration,N.delay)}}class Hs{constructor(N,G,Q){this.namespaceId=N,this.triggerName=G,this.element=Q,this._player=new t.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(N){this._containsRealPlayer||(this._player=N,Object.keys(this._queuedCallbacks).forEach(G=>{this._queuedCallbacks[G].forEach(Q=>E(N,G,void 0,Q))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(N.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(N){this.totalTime=N}syncPlayerEvents(N){const G=this._player;G.triggerCallback&&N.onStart(()=>G.triggerCallback("start")),N.onDone(()=>this.finish()),N.onDestroy(()=>this.destroy())}_queueEvent(N,G){ee(this._queuedCallbacks,N,[]).push(G)}onDone(N){this.queued&&this._queueEvent("done",N),this._player.onDone(N)}onStart(N){this.queued&&this._queueEvent("start",N),this._player.onStart(N)}onDestroy(N){this.queued&&this._queueEvent("destroy",N),this._player.onDestroy(N)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(N){this.queued||this._player.setPosition(N)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(N){const G=this._player;G.triggerCallback&&G.triggerCallback(N)}}function To(fe){return fe&&1===fe.nodeType}function $o(fe,N){const G=fe.style.display;return fe.style.display=null!=N?N:"none",G}function Jo(fe,N,G,Q,Me){const $e=[];G.forEach(Zt=>$e.push($o(Zt)));const Ct=[];Q.forEach((Zt,gi)=>{const Bi={};Zt.forEach(nn=>{const Nn=Bi[nn]=N.computeStyle(gi,nn,Me);(!Nn||0==Nn.length)&&(gi[En]=Bn,Ct.push(gi))}),fe.set(gi,Bi)});let It=0;return G.forEach(Zt=>$o(Zt,$e[It++])),Ct}function no(fe,N){const G=new Map;if(fe.forEach(It=>G.set(It,[])),0==N.length)return G;const Me=new Set(N),$e=new Map;function Ct(It){if(!It)return 1;let Zt=$e.get(It);if(Zt)return Zt;const gi=It.parentNode;return Zt=G.has(gi)?gi:Me.has(gi)?1:Ct(gi),$e.set(It,Zt),Zt}return N.forEach(It=>{const Zt=Ct(It);1!==Zt&&G.get(Zt).push(It)}),G}function $s(fe,N){var G;null===(G=fe.classList)||void 0===G||G.add(N)}function vo(fe,N){var G;null===(G=fe.classList)||void 0===G||G.remove(N)}function Js(fe,N,G){a(G).onDone(()=>fe.processLeaveNode(N))}function Xr(fe,N){for(let G=0;G<fe.length;G++){const Q=fe[G];Q instanceof t.ZE?Xr(Q.players,N):N.push(Q)}}function bo(fe,N,G){const Q=G.get(fe);if(!Q)return!1;let Me=N.get(fe);return Me?Q.forEach($e=>Me.add($e)):N.set(fe,Q),G.delete(fe),!0}class fr{constructor(N,G,Q){this.bodyNode=N,this._driver=G,this._normalizer=Q,this._triggerCache={},this.onRemovalComplete=(Me,$e)=>{},this._transitionEngine=new Bs(N,G,Q),this._timelineEngine=new ss(N,G,Q),this._transitionEngine.onRemovalComplete=(Me,$e)=>this.onRemovalComplete(Me,$e)}registerTrigger(N,G,Q,Me,$e){const Ct=N+"-"+Me;let It=this._triggerCache[Ct];if(!It){const Zt=[],gi=Ln(this._driver,$e,Zt);if(Zt.length)throw new Error(`The animation trigger "${Me}" has failed to build due to the following errors:\n - ${Zt.join("\n - ")}`);It=function(fe,N,G){return new fs(fe,N,G)}(Me,gi,this._normalizer),this._triggerCache[Ct]=It}this._transitionEngine.registerTrigger(G,Me,It)}register(N,G){this._transitionEngine.register(N,G)}destroy(N,G){this._transitionEngine.destroy(N,G)}onInsert(N,G,Q,Me){this._transitionEngine.insertNode(N,G,Q,Me)}onRemove(N,G,Q,Me){this._transitionEngine.removeNode(N,G,Me||!1,Q)}disableAnimations(N,G){this._transitionEngine.markElementAsDisabled(N,G)}process(N,G,Q,Me){if("@"==Q.charAt(0)){const[$e,Ct]=_e(Q);this._timelineEngine.command($e,G,Ct,Me)}else this._transitionEngine.trigger(N,G,Q,Me)}listen(N,G,Q,Me,$e){if("@"==Q.charAt(0)){const[Ct,It]=_e(Q);return this._timelineEngine.listen(Ct,G,It,$e)}return this._transitionEngine.listen(N,G,Q,Me,$e)}flush(N=-1){this._transitionEngine.flush(N)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Ia(fe,N){let G=null,Q=null;return Array.isArray(N)&&N.length?(G=Aa(N[0]),N.length>1&&(Q=Aa(N[N.length-1]))):N&&(G=Aa(N)),G||Q?new Tr(fe,G,Q):null}let Tr=(()=>{class fe{constructor(G,Q,Me){this._element=G,this._startStyles=Q,this._endStyles=Me,this._state=0;let $e=fe.initialStylesByElement.get(G);$e||fe.initialStylesByElement.set(G,$e={}),this._initialStyles=$e}start(){this._state<1&&(this._startStyles&&Ce(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ce(this._element,this._initialStyles),this._endStyles&&(Ce(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(fe.initialStylesByElement.delete(this._element),this._startStyles&&(vt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(vt(this._element,this._endStyles),this._endStyles=null),Ce(this._element,this._initialStyles),this._state=3)}}return fe.initialStylesByElement=new WeakMap,fe})();function Aa(fe){let N=null;const G=Object.keys(fe);for(let Q=0;Q<G.length;Q++){const Me=G[Q];Oa(Me)&&(N=N||{},N[Me]=fe[Me])}return N}function Oa(fe){return"display"===fe||"position"===fe}const Wa="animation",$r="animationend";class ao{constructor(N,G,Q,Me,$e,Ct,It){this._element=N,this._name=G,this._duration=Q,this._delay=Me,this._easing=$e,this._fillMode=Ct,this._onDoneFn=It,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=Zt=>this._handleCallback(Zt)}apply(){(function(fe,N){const G=so(fe,"").trim();let Q=0;G.length&&(function(fe,N){let G=0;for(let Q=0;Q<fe.length;Q++)","===fe.charAt(Q)&&G++;return G}(G)+1,N=`${G}, ${N}`),co(fe,"",N)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),qo(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ys(this._element,this._name,"paused")}resume(){ys(this._element,this._name,"running")}setPosition(N){const G=Zo(this._element,this._name);this._position=N*this._duration,co(this._element,"Delay",`-${this._position}ms`,G)}getPosition(){return this._position}_handleCallback(N){const G=N._ngTestManualTimestamp||Date.now(),Q=1e3*parseFloat(N.elapsedTime.toFixed(3));N.animationName==this._name&&Math.max(G-this._startTime,0)>=this._delay&&Q>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),qo(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(fe,N){const Q=so(fe,"").split(","),Me=lo(Q,N);Me>=0&&(Q.splice(Me,1),co(fe,"",Q.join(",")))}(this._element,this._name))}}function ys(fe,N,G){co(fe,"PlayState",G,Zo(fe,N))}function Zo(fe,N){const G=so(fe,"");return G.indexOf(",")>0?lo(G.split(","),N):lo([G],N)}function lo(fe,N){for(let G=0;G<fe.length;G++)if(fe[G].indexOf(N)>=0)return G;return-1}function qo(fe,N,G){G?fe.removeEventListener($r,N):fe.addEventListener($r,N)}function co(fe,N,G,Q){const Me=Wa+N;if(null!=Q){const $e=fe.style[Me];if($e.length){const Ct=$e.split(",");Ct[Q]=G,G=Ct.join(",")}}fe.style[Me]=G}function so(fe,N){return fe.style[Wa+N]||""}class wr{constructor(N,G,Q,Me,$e,Ct,It,Zt){this.element=N,this.keyframes=G,this.animationName=Q,this._duration=Me,this._delay=$e,this._finalStyles=It,this._specialStyles=Zt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Ct||"linear",this.totalTime=Me+$e,this._buildStyler()}onStart(N){this._onStartFns.push(N)}onDone(N){this._onDoneFns.push(N)}onDestroy(N){this._onDestroyFns.push(N)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(N=>N()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(N=>N()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(N=>N()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(N){this._styler.setPosition(N)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ao(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(N){const G="start"==N?this._onStartFns:this._onDoneFns;G.forEach(Q=>Q()),G.length=0}beforeDestroy(){this.init();const N={};if(this.hasStarted()){const G=this._state>=3;Object.keys(this._finalStyles).forEach(Q=>{"offset"!=Q&&(N[Q]=G?this._finalStyles[Q]:et(this.element,Q))})}this.currentSnapshot=N}}class ps extends t.ZN{constructor(N,G){super(),this.element=N,this._startingStyles={},this.__initialized=!1,this._styles=Se(G)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(N=>{this._startingStyles[N]=this.element.style[N]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(N=>this.element.style.setProperty(N,this._styles[N])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(N=>{const G=this._startingStyles[N];G?this.element.style.setProperty(N,G):this.element.style.removeProperty(N)}),this._startingStyles=null,super.destroy())}}class mr{constructor(){this._count=0}validateStyleProperty(N){return Rt(N)}matchesElement(N,G){return!1}containsElement(N,G){return tt(N,G)}query(N,G,Q){return Oe(N,G,Q)}computeStyle(N,G,Q){return window.getComputedStyle(N)[G]}buildKeyframeElement(N,G,Q){Q=Q.map(It=>Se(It));let Me=`@keyframes ${G} {\n`,$e="";Q.forEach(It=>{$e=" ";const Zt=parseFloat(It.offset);Me+=`${$e}${100*Zt}% {\n`,$e+=" ",Object.keys(It).forEach(gi=>{const Bi=It[gi];switch(gi){case"offset":return;case"easing":return void(Bi&&(Me+=`${$e}animation-timing-function: ${Bi};\n`));default:return void(Me+=`${$e}${gi}: ${Bi};\n`)}}),Me+=`${$e}}\n`}),Me+="}\n";const Ct=document.createElement("style");return Ct.textContent=Me,Ct}animate(N,G,Q,Me,$e,Ct=[],It){const Zt=Ct.filter(kn=>kn instanceof wr),gi={};_t(Q,Me)&&Zt.forEach(kn=>{let rs=kn.currentSnapshot;Object.keys(rs).forEach(Cs=>gi[Cs]=rs[Cs])});const Bi=function(fe){let N={};return fe&&(Array.isArray(fe)?fe:[fe]).forEach(Q=>{Object.keys(Q).forEach(Me=>{"offset"==Me||"easing"==Me||(N[Me]=Q[Me])})}),N}(G=Ue(N,G,gi));if(0==Q)return new ps(N,Bi);const nn="gen_css_kf_"+this._count++,Nn=this.buildKeyframeElement(N,nn,G);(function(fe){var N;const G=null===(N=fe.getRootNode)||void 0===N?void 0:N.call(fe);return"undefined"!=typeof ShadowRoot&&G instanceof ShadowRoot?G:document.head})(N).appendChild(Nn);const hn=Ia(N,G),On=new wr(N,G,nn,Q,Me,$e,Bi,hn);return On.onDestroy(()=>{var fe;(fe=Nn).parentNode.removeChild(fe)}),On}}class gs{constructor(N,G,Q,Me){this.element=N,this.keyframes=G,this.options=Q,this._specialStyles=Me,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=Q.duration,this._delay=Q.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(N=>N()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const N=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,N,this.options),this._finalKeyframe=N.length?N[N.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(N,G,Q){return N.animate(G,Q)}onStart(N){this._onStartFns.push(N)}onDone(N){this._onDoneFns.push(N)}onDestroy(N){this._onDestroyFns.push(N)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(N=>N()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(N=>N()),this._onDestroyFns=[])}setPosition(N){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=N*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const N={};if(this.hasStarted()){const G=this._finalKeyframe;Object.keys(G).forEach(Q=>{"offset"!=Q&&(N[Q]=this._finished?G[Q]:et(this.element,Q))})}this.currentSnapshot=N}triggerCallback(N){const G="start"==N?this._onStartFns:this._onDoneFns;G.forEach(Q=>Q()),G.length=0}}class Sr{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ce().toString()),this._cssKeyframesDriver=new mr}validateStyleProperty(N){return Rt(N)}matchesElement(N,G){return!1}containsElement(N,G){return tt(N,G)}query(N,G,Q){return Oe(N,G,Q)}computeStyle(N,G,Q){return window.getComputedStyle(N)[G]}overrideWebAnimationsSupport(N){this._isNativeImpl=N}animate(N,G,Q,Me,$e,Ct=[],It){if(!It&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(N,G,Q,Me,$e,Ct);const Bi={duration:Q,delay:Me,fill:0==Me?"both":"forwards"};$e&&(Bi.easing=$e);const nn={},Nn=Ct.filter(hn=>hn instanceof gs);_t(Q,Me)&&Nn.forEach(hn=>{let On=hn.currentSnapshot;Object.keys(On).forEach(kn=>nn[kn]=On[kn])});const An=Ia(N,G=Ue(N,G=G.map(hn=>pi(hn,!1)),nn));return new gs(N,G,Bi,An)}}function ce(){return e()&&Element.prototype.animate||{}}var z=W(9808);let P=(()=>{class fe extends t._j{constructor(G,Q){super(),this._nextAnimationId=0,this._renderer=G.createRenderer(Q.body,{id:"0",encapsulation:O.ifc.None,styles:[],data:{animation:[]}})}build(G){const Q=this._nextAnimationId.toString();this._nextAnimationId++;const Me=Array.isArray(G)?(0,t.vP)(G):G;return Tt(this._renderer,null,Q,"register",[Me]),new F(Q,this._renderer)}}return fe.\u0275fac=function(G){return new(G||fe)(O.LFG(O.FYo),O.LFG(z.K0))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class F extends t.LC{constructor(N,G){super(),this._id=N,this._renderer=G}create(N,G){return new le(this._id,N,G||{},this._renderer)}}class le{constructor(N,G,Q,Me){this.id=N,this.element=G,this._renderer=Me,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",Q)}_listen(N,G){return this._renderer.listen(this.element,`@@${this.id}:${N}`,G)}_command(N,...G){return Tt(this._renderer,this.element,this.id,N,G)}onDone(N){this._listen("done",N)}onStart(N){this._listen("start",N)}onDestroy(N){this._listen("destroy",N)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(N){this._command("setPosition",N)}getPosition(){var N,G;return null!==(G=null===(N=this._renderer.engine.players[+this.id])||void 0===N?void 0:N.getPosition())&&void 0!==G?G:0}}function Tt(fe,N,G,Q,Me){return fe.setProperty(N,`@@${G}:${Q}`,Me)}const Fi="@.disabled";let Dn=(()=>{class fe{constructor(G,Q,Me){this.delegate=G,this.engine=Q,this._zone=Me,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),Q.onRemovalComplete=($e,Ct)=>{const It=null==Ct?void 0:Ct.parentNode($e);It&&Ct.removeChild(It,$e)}}createRenderer(G,Q){const $e=this.delegate.createRenderer(G,Q);if(!(G&&Q&&Q.data&&Q.data.animation)){let Bi=this._rendererCache.get($e);return Bi||(Bi=new es("",$e,this.engine),this._rendererCache.set($e,Bi)),Bi}const Ct=Q.id,It=Q.id+"-"+this._currentId;this._currentId++,this.engine.register(It,G);const Zt=Bi=>{Array.isArray(Bi)?Bi.forEach(Zt):this.engine.registerTrigger(Ct,It,G,Bi.name,Bi)};return Q.data.animation.forEach(Zt),new cs(this,It,$e,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(G,Q,Me){G>=0&&G<this._microtaskId?this._zone.run(()=>Q(Me)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach($e=>{const[Ct,It]=$e;Ct(It)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([Q,Me]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return fe.\u0275fac=function(G){return new(G||fe)(O.LFG(O.FYo),O.LFG(fr),O.LFG(O.R0b))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class es{constructor(N,G,Q){this.namespaceId=N,this.delegate=G,this.engine=Q,this.destroyNode=this.delegate.destroyNode?Me=>G.destroyNode(Me):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(N,G){return this.delegate.createElement(N,G)}createComment(N){return this.delegate.createComment(N)}createText(N){return this.delegate.createText(N)}appendChild(N,G){this.delegate.appendChild(N,G),this.engine.onInsert(this.namespaceId,G,N,!1)}insertBefore(N,G,Q,Me=!0){this.delegate.insertBefore(N,G,Q),this.engine.onInsert(this.namespaceId,G,N,Me)}removeChild(N,G,Q){this.engine.onRemove(this.namespaceId,G,this.delegate,Q)}selectRootElement(N,G){return this.delegate.selectRootElement(N,G)}parentNode(N){return this.delegate.parentNode(N)}nextSibling(N){return this.delegate.nextSibling(N)}setAttribute(N,G,Q,Me){this.delegate.setAttribute(N,G,Q,Me)}removeAttribute(N,G,Q){this.delegate.removeAttribute(N,G,Q)}addClass(N,G){this.delegate.addClass(N,G)}removeClass(N,G){this.delegate.removeClass(N,G)}setStyle(N,G,Q,Me){this.delegate.setStyle(N,G,Q,Me)}removeStyle(N,G,Q){this.delegate.removeStyle(N,G,Q)}setProperty(N,G,Q){"@"==G.charAt(0)&&G==Fi?this.disableAnimations(N,!!Q):this.delegate.setProperty(N,G,Q)}setValue(N,G){this.delegate.setValue(N,G)}listen(N,G,Q){return this.delegate.listen(N,G,Q)}disableAnimations(N,G){this.engine.disableAnimations(N,G)}}class cs extends es{constructor(N,G,Q,Me){super(G,Q,Me),this.factory=N,this.namespaceId=G}setProperty(N,G,Q){"@"==G.charAt(0)?"."==G.charAt(1)&&G==Fi?this.disableAnimations(N,Q=void 0===Q||!!Q):this.engine.process(this.namespaceId,N,G.substr(1),Q):this.delegate.setProperty(N,G,Q)}listen(N,G,Q){if("@"==G.charAt(0)){const Me=function(fe){switch(fe){case"body":return document.body;case"document":return document;case"window":return window;default:return fe}}(N);let $e=G.substr(1),Ct="";return"@"!=$e.charAt(0)&&([$e,Ct]=function(fe){const N=fe.indexOf(".");return[fe.substring(0,N),fe.substr(N+1)]}($e)),this.engine.listen(this.namespaceId,Me,$e,Ct,It=>{this.factory.scheduleListenerCallback(It._data||-1,Q,It)})}return this.delegate.listen(N,G,Q)}}let zn=(()=>{class fe extends fr{constructor(G,Q,Me){super(G.body,Q,Me)}ngOnDestroy(){this.flush()}}return fe.\u0275fac=function(G){return new(G||fe)(O.LFG(z.K0),O.LFG(dt),O.LFG(as))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const Or=new O.OlP("AnimationModuleType"),Bo=[{provide:t._j,useClass:P},{provide:as,useFactory:function(){return new js}},{provide:fr,useClass:zn},{provide:O.FYo,useFactory:function(fe,N,G){return new Dn(fe,N,G)},deps:[y.se,fr,O.R0b]}],fa=[{provide:dt,useFactory:function(){return"function"==typeof ce()?new Sr:new mr}},{provide:Or,useValue:"BrowserAnimations"},...Bo],er=[{provide:dt,useClass:Qe},{provide:Or,useValue:"NoopAnimations"},...Bo];let tr=(()=>{class fe{static withConfig(G){return{ngModule:fe,providers:G.disableAnimations?er:fa}}}return fe.\u0275fac=function(G){return new(G||fe)},fe.\u0275mod=O.oAB({type:fe}),fe.\u0275inj=O.cJS({providers:fa,imports:[y.b2]}),fe})()},2313:(li,ht,W)=>{"use strict";W.d(ht,{b2:()=>Kt,H7:()=>Si,Dx:()=>Ue,q6:()=>Te,se:()=>at});var O=W(9808),y=W(5e3);class t extends O.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class e extends t{static makeCurrent(){(0,O.HT)(new e)}onAndCancel(Mt,ut,Ut){return Mt.addEventListener(ut,Ut,!1),()=>{Mt.removeEventListener(ut,Ut,!1)}}dispatchEvent(Mt,ut){Mt.dispatchEvent(ut)}remove(Mt){Mt.parentNode&&Mt.parentNode.removeChild(Mt)}createElement(Mt,ut){return(ut=ut||this.getDefaultDocument()).createElement(Mt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Mt){return Mt.nodeType===Node.ELEMENT_NODE}isShadowRoot(Mt){return Mt instanceof DocumentFragment}getGlobalEventTarget(Mt,ut){return"window"===ut?window:"document"===ut?Mt:"body"===ut?Mt.body:null}getBaseHref(Mt){const ut=(n=n||document.querySelector("base"),n?n.getAttribute("href"):null);return null==ut?null:function(Gt){f=f||document.createElement("a"),f.setAttribute("href",Gt);const Mt=f.pathname;return"/"===Mt.charAt(0)?Mt:`/${Mt}`}(ut)}resetBaseElement(){n=null}getUserAgent(){return window.navigator.userAgent}getCookie(Mt){return(0,O.Mx)(document.cookie,Mt)}}let f,n=null;const I=new y.OlP("TRANSITION_ID"),ee=[{provide:y.ip1,useFactory:function(Gt,Mt,ut){return()=>{ut.get(y.CZH).donePromise.then(()=>{const Ut=(0,O.q)(),ui=Mt.querySelectorAll(`style[ng-transition="${Gt}"]`);for(let Yi=0;Yi<ui.length;Yi++)Ut.remove(ui[Yi])})}},deps:[I,O.K0,y.zs3],multi:!0}];class _e{static init(){(0,y.VLi)(new _e)}addToWindow(Mt){y.dqk.getAngularTestability=(Ut,ui=!0)=>{const Yi=Mt.findTestabilityInTree(Ut,ui);if(null==Yi)throw new Error("Could not find testability for element.");return Yi},y.dqk.getAllAngularTestabilities=()=>Mt.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>Mt.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(Ut=>{const ui=y.dqk.getAllAngularTestabilities();let Yi=ui.length,un=!1;const jn=function(as){un=un||as,Yi--,0==Yi&&Ut(un)};ui.forEach(function(as){as.whenStable(jn)})})}findTestabilityInTree(Mt,ut,Ut){if(null==ut)return null;const ui=Mt.getTestability(ut);return null!=ui?ui:Ut?(0,O.q)().isShadowRoot(ut)?this.findTestabilityInTree(Mt,ut.host,!0):this.findTestabilityInTree(Mt,ut.parentElement,!0):null}}let De=(()=>{class Gt{build(){return new XMLHttpRequest}}return Gt.\u0275fac=function(ut){return new(ut||Gt)},Gt.\u0275prov=y.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();const Ae=new y.OlP("EventManagerPlugins");let Je=(()=>{class Gt{constructor(ut,Ut){this._zone=Ut,this._eventNameToPlugin=new Map,ut.forEach(ui=>ui.manager=this),this._plugins=ut.slice().reverse()}addEventListener(ut,Ut,ui){return this._findPluginFor(Ut).addEventListener(ut,Ut,ui)}addGlobalEventListener(ut,Ut,ui){return this._findPluginFor(Ut).addGlobalEventListener(ut,Ut,ui)}getZone(){return this._zone}_findPluginFor(ut){const Ut=this._eventNameToPlugin.get(ut);if(Ut)return Ut;const ui=this._plugins;for(let Yi=0;Yi<ui.length;Yi++){const un=ui[Yi];if(un.supports(ut))return this._eventNameToPlugin.set(ut,un),un}throw new Error(`No event manager plugin found for event ${ut}`)}}return Gt.\u0275fac=function(ut){return new(ut||Gt)(y.LFG(Ae),y.LFG(y.R0b))},Gt.\u0275prov=y.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();class st{constructor(Mt){this._doc=Mt}addGlobalEventListener(Mt,ut,Ut){const ui=(0,O.q)().getGlobalEventTarget(this._doc,Mt);if(!ui)throw new Error(`Unsupported event target ${ui} for event ${ut}`);return this.addEventListener(ui,ut,Ut)}}let Ge=(()=>{class Gt{constructor(){this._stylesSet=new Set}addStyles(ut){const Ut=new Set;ut.forEach(ui=>{this._stylesSet.has(ui)||(this._stylesSet.add(ui),Ut.add(ui))}),this.onStylesAdded(Ut)}onStylesAdded(ut){}getAllStyles(){return Array.from(this._stylesSet)}}return Gt.\u0275fac=function(ut){return new(ut||Gt)},Gt.\u0275prov=y.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})(),lt=(()=>{class Gt extends Ge{constructor(ut){super(),this._doc=ut,this._hostNodes=new Map,this._hostNodes.set(ut.head,[])}_addStylesToHost(ut,Ut,ui){ut.forEach(Yi=>{const un=this._doc.createElement("style");un.textContent=Yi,ui.push(Ut.appendChild(un))})}addHost(ut){const Ut=[];this._addStylesToHost(this._stylesSet,ut,Ut),this._hostNodes.set(ut,Ut)}removeHost(ut){const Ut=this._hostNodes.get(ut);Ut&&Ut.forEach(Rt),this._hostNodes.delete(ut)}onStylesAdded(ut){this._hostNodes.forEach((Ut,ui)=>{this._addStylesToHost(ut,ui,Ut)})}ngOnDestroy(){this._hostNodes.forEach(ut=>ut.forEach(Rt))}}return Gt.\u0275fac=function(ut){return new(ut||Gt)(y.LFG(O.K0))},Gt.\u0275prov=y.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();function Rt(Gt){(0,O.q)().remove(Gt)}const Wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=/%COMP%/g;function Re(Gt,Mt,ut){for(let Ut=0;Ut<Mt.length;Ut++){let ui=Mt[Ut];Array.isArray(ui)?Re(Gt,ui,ut):(ui=ui.replace(tt,Gt),ut.push(ui))}return ut}function ge(Gt){return Mt=>{if("__ngUnwrap__"===Mt)return Gt;!1===Gt(Mt)&&(Mt.preventDefault(),Mt.returnValue=!1)}}let at=(()=>{class Gt{constructor(ut,Ut,ui){this.eventManager=ut,this.sharedStylesHost=Ut,this.appId=ui,this.rendererByCompId=new Map,this.defaultRenderer=new Be(ut)}createRenderer(ut,Ut){if(!ut||!Ut)return this.defaultRenderer;switch(Ut.encapsulation){case y.ifc.Emulated:{let ui=this.rendererByCompId.get(Ut.id);return ui||(ui=new wt(this.eventManager,this.sharedStylesHost,Ut,this.appId),this.rendererByCompId.set(Ut.id,ui)),ui.applyToHost(ut),ui}case 1:case y.ifc.ShadowDom:return new At(this.eventManager,this.sharedStylesHost,ut,Ut);default:if(!this.rendererByCompId.has(Ut.id)){const ui=Re(Ut.id,Ut.styles,[]);this.sharedStylesHost.addStyles(ui),this.rendererByCompId.set(Ut.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Gt.\u0275fac=function(ut){return new(ut||Gt)(y.LFG(Je),y.LFG(lt),y.LFG(y.AFp))},Gt.\u0275prov=y.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();class Be{constructor(Mt){this.eventManager=Mt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Mt,ut){return ut?document.createElementNS(Wt[ut]||ut,Mt):document.createElement(Mt)}createComment(Mt){return document.createComment(Mt)}createText(Mt){return document.createTextNode(Mt)}appendChild(Mt,ut){Mt.appendChild(ut)}insertBefore(Mt,ut,Ut){Mt&&Mt.insertBefore(ut,Ut)}removeChild(Mt,ut){Mt&&Mt.removeChild(ut)}selectRootElement(Mt,ut){let Ut="string"==typeof Mt?document.querySelector(Mt):Mt;if(!Ut)throw new Error(`The selector "${Mt}" did not match any elements`);return ut||(Ut.textContent=""),Ut}parentNode(Mt){return Mt.parentNode}nextSibling(Mt){return Mt.nextSibling}setAttribute(Mt,ut,Ut,ui){if(ui){ut=ui+":"+ut;const Yi=Wt[ui];Yi?Mt.setAttributeNS(Yi,ut,Ut):Mt.setAttribute(ut,Ut)}else Mt.setAttribute(ut,Ut)}removeAttribute(Mt,ut,Ut){if(Ut){const ui=Wt[Ut];ui?Mt.removeAttributeNS(ui,ut):Mt.removeAttribute(`${Ut}:${ut}`)}else Mt.removeAttribute(ut)}addClass(Mt,ut){Mt.classList.add(ut)}removeClass(Mt,ut){Mt.classList.remove(ut)}setStyle(Mt,ut,Ut,ui){ui&(y.JOm.DashCase|y.JOm.Important)?Mt.style.setProperty(ut,Ut,ui&y.JOm.Important?"important":""):Mt.style[ut]=Ut}removeStyle(Mt,ut,Ut){Ut&y.JOm.DashCase?Mt.style.removeProperty(ut):Mt.style[ut]=""}setProperty(Mt,ut,Ut){Mt[ut]=Ut}setValue(Mt,ut){Mt.nodeValue=ut}listen(Mt,ut,Ut){return"string"==typeof Mt?this.eventManager.addGlobalEventListener(Mt,ut,ge(Ut)):this.eventManager.addEventListener(Mt,ut,ge(Ut))}}class wt extends Be{constructor(Mt,ut,Ut,ui){super(Mt),this.component=Ut;const Yi=Re(ui+"-"+Ut.id,Ut.styles,[]);ut.addStyles(Yi),this.contentAttr="_ngcontent-%COMP%".replace(tt,ui+"-"+Ut.id),this.hostAttr="_nghost-%COMP%".replace(tt,ui+"-"+Ut.id)}applyToHost(Mt){super.setAttribute(Mt,this.hostAttr,"")}createElement(Mt,ut){const Ut=super.createElement(Mt,ut);return super.setAttribute(Ut,this.contentAttr,""),Ut}}class At extends Be{constructor(Mt,ut,Ut,ui){super(Mt),this.sharedStylesHost=ut,this.hostEl=Ut,this.shadowRoot=Ut.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Yi=Re(ui.id,ui.styles,[]);for(let un=0;un<Yi.length;un++){const jn=document.createElement("style");jn.textContent=Yi[un],this.shadowRoot.appendChild(jn)}}nodeOrShadowRoot(Mt){return Mt===this.hostEl?this.shadowRoot:Mt}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Mt,ut){return super.appendChild(this.nodeOrShadowRoot(Mt),ut)}insertBefore(Mt,ut,Ut){return super.insertBefore(this.nodeOrShadowRoot(Mt),ut,Ut)}removeChild(Mt,ut){return super.removeChild(this.nodeOrShadowRoot(Mt),ut)}parentNode(Mt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Mt)))}}let $t=(()=>{class Gt extends st{constructor(ut){super(ut)}supports(ut){return!0}addEventListener(ut,Ut,ui){return ut.addEventListener(Ut,ui,!1),()=>this.removeEventListener(ut,Ut,ui)}removeEventListener(ut,Ut,ui){return ut.removeEventListener(Ut,ui)}}return Gt.\u0275fac=function(ut){return new(ut||Gt)(y.LFG(O.K0))},Gt.\u0275prov=y.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();const Xt=["alt","control","meta","shift"],Wi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Lt={alt:Gt=>Gt.altKey,control:Gt=>Gt.ctrlKey,meta:Gt=>Gt.metaKey,shift:Gt=>Gt.shiftKey};let yi=(()=>{class Gt extends st{constructor(ut){super(ut)}supports(ut){return null!=Gt.parseEventName(ut)}addEventListener(ut,Ut,ui){const Yi=Gt.parseEventName(Ut),un=Gt.eventCallback(Yi.fullKey,ui,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,O.q)().onAndCancel(ut,Yi.domEventName,un))}static parseEventName(ut){const Ut=ut.toLowerCase().split("."),ui=Ut.shift();if(0===Ut.length||"keydown"!==ui&&"keyup"!==ui)return null;const Yi=Gt._normalizeKey(Ut.pop());let un="";if(Xt.forEach(as=>{const Ls=Ut.indexOf(as);Ls>-1&&(Ut.splice(Ls,1),un+=as+".")}),un+=Yi,0!=Ut.length||0===Yi.length)return null;const jn={};return jn.domEventName=ui,jn.fullKey=un,jn}static getEventFullKey(ut){let Ut="",ui=function(Gt){let Mt=Gt.key;if(null==Mt){if(Mt=Gt.keyIdentifier,null==Mt)return"Unidentified";Mt.startsWith("U+")&&(Mt=String.fromCharCode(parseInt(Mt.substring(2),16)),3===Gt.location&&pi.hasOwnProperty(Mt)&&(Mt=pi[Mt]))}return Wi[Mt]||Mt}(ut);return ui=ui.toLowerCase()," "===ui?ui="space":"."===ui&&(ui="dot"),Xt.forEach(Yi=>{Yi!=ui&&Lt[Yi](ut)&&(Ut+=Yi+".")}),Ut+=ui,Ut}static eventCallback(ut,Ut,ui){return Yi=>{Gt.getEventFullKey(Yi)===ut&&ui.runGuarded(()=>Ut(Yi))}}static _normalizeKey(ut){return"esc"===ut?"escape":ut}}return Gt.\u0275fac=function(ut){return new(ut||Gt)(y.LFG(O.K0))},Gt.\u0275prov=y.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})();const Te=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:O.bD},{provide:y.g9A,useValue:function(){e.makeCurrent(),_e.init()},multi:!0},{provide:O.K0,useFactory:function(){return(0,y.RDi)(document),document},deps:[]}]),xt=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function(){return new y.qLn},deps:[]},{provide:Ae,useClass:$t,multi:!0,deps:[O.K0,y.R0b,y.Lbi]},{provide:Ae,useClass:yi,multi:!0,deps:[O.K0]},{provide:at,useClass:at,deps:[Je,lt,y.AFp]},{provide:y.FYo,useExisting:at},{provide:Ge,useExisting:lt},{provide:lt,useClass:lt,deps:[O.K0]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b]},{provide:Je,useClass:Je,deps:[Ae,y.R0b]},{provide:O.JF,useClass:De,deps:[]}];let Kt=(()=>{class Gt{constructor(ut){if(ut)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ut){return{ngModule:Gt,providers:[{provide:y.AFp,useValue:ut.appId},{provide:I,useExisting:y.AFp},ee]}}}return Gt.\u0275fac=function(ut){return new(ut||Gt)(y.LFG(Gt,12))},Gt.\u0275mod=y.oAB({type:Gt}),Gt.\u0275inj=y.cJS({providers:xt,imports:[O.ez,y.hGG]}),Gt})(),Ue=(()=>{class Gt{constructor(ut){this._doc=ut}getTitle(){return this._doc.title}setTitle(ut){this._doc.title=ut||""}}return Gt.\u0275fac=function(ut){return new(ut||Gt)(y.LFG(O.K0))},Gt.\u0275prov=y.Yz7({token:Gt,factory:function(ut){let Ut=null;return Ut=ut?new ut:new Ue((0,y.LFG)(O.K0)),Ut},providedIn:"root"}),Gt})();"undefined"!=typeof window&&window;let Si=(()=>{class Gt{}return Gt.\u0275fac=function(ut){return new(ut||Gt)},Gt.\u0275prov=y.Yz7({token:Gt,factory:function(ut){let Ut=null;return Ut=ut?new(ut||Gt):y.LFG(mn),Ut},providedIn:"root"}),Gt})(),mn=(()=>{class Gt extends Si{constructor(ut){super(),this._doc=ut}sanitize(ut,Ut){if(null==Ut)return null;switch(ut){case y.q3G.NONE:return Ut;case y.q3G.HTML:return(0,y.qzn)(Ut,"HTML")?(0,y.z3N)(Ut):(0,y.EiD)(this._doc,String(Ut)).toString();case y.q3G.STYLE:return(0,y.qzn)(Ut,"Style")?(0,y.z3N)(Ut):Ut;case y.q3G.SCRIPT:if((0,y.qzn)(Ut,"Script"))return(0,y.z3N)(Ut);throw new Error("unsafe value used in a script context");case y.q3G.URL:return(0,y.yhl)(Ut),(0,y.qzn)(Ut,"URL")?(0,y.z3N)(Ut):(0,y.mCW)(String(Ut));case y.q3G.RESOURCE_URL:if((0,y.qzn)(Ut,"ResourceURL"))return(0,y.z3N)(Ut);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ut} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ut){return(0,y.JVY)(ut)}bypassSecurityTrustStyle(ut){return(0,y.L6k)(ut)}bypassSecurityTrustScript(ut){return(0,y.eBb)(ut)}bypassSecurityTrustUrl(ut){return(0,y.LAX)(ut)}bypassSecurityTrustResourceUrl(ut){return(0,y.pB0)(ut)}}return Gt.\u0275fac=function(ut){return new(ut||Gt)(y.LFG(O.K0))},Gt.\u0275prov=y.Yz7({token:Gt,factory:function(ut){let Ut=null;return Ut=ut?new ut:function(Gt){return new mn(Gt.get(O.K0))}(y.LFG(y.zs3)),Ut},providedIn:"root"}),Gt})()},1083:(li,ht,W)=>{"use strict";W.d(ht,{gz:()=>ri,yS:()=>Mr,Bz:()=>ma,lC:()=>wr});var O=W(5e3);const t=(0,W(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"});var e=W(8306),n=W(727),a=W(4482),f=W(5403);function E(){return(0,a.e)((q,K)=>{let j=null;q._refCount++;const ae=new f.Q(K,void 0,void 0,void 0,()=>{if(!q||q._refCount<=0||0<--q._refCount)return void(j=null);const ve=q._connection,je=j;j=null,ve&&(!je||ve===je)&&ve.unsubscribe(),K.unsubscribe()});q.subscribe(ae),ae.closed||(j=q.connect())})}class I extends e.y{constructor(K,j){super(),this.source=K,this.subjectFactory=j,this._subject=null,this._refCount=0,this._connection=null,(0,a.A)(K)&&(this.lift=K.lift)}_subscribe(K){return this.getSubject().subscribe(K)}getSubject(){const K=this._subject;return(!K||K.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:K}=this;this._subject=this._connection=null,null==K||K.unsubscribe()}connect(){let K=this._connection;if(!K){K=this._connection=new n.w0;const j=this.getSubject();K.add(this.source.subscribe(new f.Q(j,void 0,()=>{this._teardown(),j.complete()},ae=>{this._teardown(),j.error(ae)},()=>this._teardown()))),K.closed&&(this._connection=null,K=n.w0.EMPTY)}return K}refCount(){return E()(this)}}var Y=W(2076),ee=W(9646),_e=W(1135),De=W(9841),Ae=W(7272),Je=W(9770),st=W(515),Ge=W(7579);function lt(q,K,j,ae,ve){return(je,ft)=>{let Ot=j,ai=K,Xi=0;je.subscribe(new f.Q(ft,qn=>{const Cn=Xi++;ai=Ot?q(ai,qn,Cn):(Ot=!0,qn),ae&&ft.next(ai)},ve&&(()=>{Ot&&ft.next(ai),ft.complete()})))}}function Rt(q,K){return(0,a.e)(lt(q,K,arguments.length>=2,!0))}var Wt=W(9300);function tt(q){return q<=0?()=>st.E:(0,a.e)((K,j)=>{let ae=[];K.subscribe(new f.Q(j,ve=>{ae.push(ve),q<ae.length&&ae.shift()},()=>{for(const ve of ae)j.next(ve);j.complete()},void 0,()=>{ae=null}))})}function Oe(q=Se){return(0,a.e)((K,j)=>{let ae=!1;K.subscribe(new f.Q(j,ve=>{ae=!0,j.next(ve)},()=>ae?j.complete():j.error(q())))})}function Se(){return new t}function Qe(q){return(0,a.e)((K,j)=>{let ae=!1;K.subscribe(new f.Q(j,ve=>{ae=!0,j.next(ve)},()=>{ae||j.next(q),j.complete()}))})}var dt=W(4671),Pe=W(5698);function Re(q,K){const j=arguments.length>=2;return ae=>ae.pipe(q?(0,Wt.h)((ve,je)=>q(ve,je,ae)):dt.y,(0,Pe.q)(1),j?Qe(K):Oe(()=>new t))}var ge=W(4004),se=W(3900),at=W(8675),Be=W(262),ze=W(4351),St=W(5577),wt=W(8505),At=W(8746),$t=W(8189),Xt=W(9808);class ti{constructor(K,j){this.id=K,this.url=j}}class Wi extends ti{constructor(K,j,ae="imperative",ve=null){super(K,j),this.navigationTrigger=ae,this.restoredState=ve}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pi extends ti{constructor(K,j,ae){super(K,j),this.urlAfterRedirects=ae}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Lt extends ti{constructor(K,j,ae){super(K,j),this.reason=ae}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yi extends ti{constructor(K,j,ae){super(K,j),this.error=ae}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ce extends ti{constructor(K,j,ae,ve){super(K,j),this.urlAfterRedirects=ae,this.state=ve}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vt extends ti{constructor(K,j,ae,ve){super(K,j),this.urlAfterRedirects=ae,this.state=ve}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ne extends ti{constructor(K,j,ae,ve,je){super(K,j),this.urlAfterRedirects=ae,this.state=ve,this.shouldActivate=je}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ve extends ti{constructor(K,j,ae,ve){super(K,j),this.urlAfterRedirects=ae,this.state=ve}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class de extends ti{constructor(K,j,ae,ve){super(K,j),this.urlAfterRedirects=ae,this.state=ve}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Te{constructor(K){this.route=K}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xt{constructor(K){this.route=K}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Kt{constructor(K){this.snapshot=K}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ft{constructor(K){this.snapshot=K}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ke{constructor(K){this.snapshot=K}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class We{constructor(K){this.snapshot=K}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _t{constructor(K,j,ae){this.routerEvent=K,this.position=j,this.anchor=ae}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ue="primary";class Ye{constructor(K){this.params=K||{}}has(K){return Object.prototype.hasOwnProperty.call(this.params,K)}get(K){if(this.has(K)){const j=this.params[K];return Array.isArray(j)?j[0]:j}return null}getAll(K){if(this.has(K)){const j=this.params[K];return Array.isArray(j)?j:[j]}return[]}get keys(){return Object.keys(this.params)}}function et(q){return new Ye(q)}const Ie="ngNavigationCancelingError";function Xe(q){const K=Error("NavigationCancelingError: "+q);return K[Ie]=!0,K}function Vt(q,K,j){const ae=j.path.split("/");if(ae.length>q.length||"full"===j.pathMatch&&(K.hasChildren()||ae.length<q.length))return null;const ve={};for(let je=0;je<ae.length;je++){const ft=ae[je],Ot=q[je];if(ft.startsWith(":"))ve[ft.substring(1)]=Ot;else if(ft!==Ot.path)return null}return{consumed:q.slice(0,ae.length),posParams:ve}}function si(q,K){const j=q?Object.keys(q):void 0,ae=K?Object.keys(K):void 0;if(!j||!ae||j.length!=ae.length)return!1;let ve;for(let je=0;je<j.length;je++)if(ve=j[je],!ni(q[ve],K[ve]))return!1;return!0}function ni(q,K){if(Array.isArray(q)&&Array.isArray(K)){if(q.length!==K.length)return!1;const j=[...q].sort(),ae=[...K].sort();return j.every((ve,je)=>ae[je]===ve)}return q===K}function sn(q){return Array.prototype.concat.apply([],q)}function xi(q){return q.length>0?q[q.length-1]:null}function Vi(q,K){for(const j in q)q.hasOwnProperty(j)&&K(q[j],j)}function Ni(q){return(0,O.CqO)(q)?q:(0,O.QGY)(q)?(0,Y.D)(Promise.resolve(q)):(0,ee.of)(q)}const Mi={exact:function jt(q,K,j){if(!mn(q.segments,K.segments)||!me(q.segments,K.segments,j)||q.numberOfChildren!==K.numberOfChildren)return!1;for(const ae in K.children)if(!q.children[ae]||!jt(q.children[ae],K.children[ae],j))return!1;return!0},subset:be},fn={exact:function(q,K){return si(q,K)},subset:function(q,K){return Object.keys(K).length<=Object.keys(q).length&&Object.keys(K).every(j=>ni(q[j],K[j]))},ignored:()=>!0};function $i(q,K,j){return Mi[j.paths](q.root,K.root,j.matrixParams)&&fn[j.queryParams](q.queryParams,K.queryParams)&&!("exact"===j.fragment&&q.fragment!==K.fragment)}function be(q,K,j){return te(q,K,K.segments,j)}function te(q,K,j,ae){if(q.segments.length>j.length){const ve=q.segments.slice(0,j.length);return!(!mn(ve,j)||K.hasChildren()||!me(ve,j,ae))}if(q.segments.length===j.length){if(!mn(q.segments,j)||!me(q.segments,j,ae))return!1;for(const ve in K.children)if(!q.children[ve]||!be(q.children[ve],K.children[ve],ae))return!1;return!0}{const ve=j.slice(0,q.segments.length),je=j.slice(q.segments.length);return!!(mn(q.segments,ve)&&me(q.segments,ve,ae)&&q.children[Ue])&&te(q.children[Ue],K,je,ae)}}function me(q,K,j){return K.every((ae,ve)=>fn[j](q[ve].parameters,ae.parameters))}class Ke{constructor(K,j,ae){this.root=K,this.queryParams=j,this.fragment=ae}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=et(this.queryParams)),this._queryParamMap}toString(){return ut.serialize(this)}}class yt{constructor(K,j){this.segments=K,this.children=j,this.parent=null,Vi(j,(ae,ve)=>ae.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ut(this)}}class Si{constructor(K,j){this.path=K,this.parameters=j}get parameterMap(){return this._parameterMap||(this._parameterMap=et(this.parameters)),this._parameterMap}toString(){return Co(this)}}function mn(q,K){return q.length===K.length&&q.every((j,ae)=>j.path===K[ae].path)}class Gt{}class Mt{parse(K){const j=new Zn(K);return new Ke(j.parseRootSegment(),j.parseQueryParams(),j.parseFragment())}serialize(K){const j=`/${ui(K.root,!0)}`,ae=function(q){const K=Object.keys(q).map(j=>{const ae=q[j];return Array.isArray(ae)?ae.map(ve=>`${un(j)}=${un(ve)}`).join("&"):`${un(j)}=${un(ae)}`}).filter(j=>!!j);return K.length?`?${K.join("&")}`:""}(K.queryParams);var q;return`${j}${ae}${"string"==typeof K.fragment?`#${q=K.fragment,encodeURI(q)}`:""}`}}const ut=new Mt;function Ut(q){return q.segments.map(K=>Co(K)).join("/")}function ui(q,K){if(!q.hasChildren())return Ut(q);if(K){const j=q.children[Ue]?ui(q.children[Ue],!1):"",ae=[];return Vi(q.children,(ve,je)=>{je!==Ue&&ae.push(`${je}:${ui(ve,!1)}`)}),ae.length>0?`${j}(${ae.join("//")})`:j}{const j=function(q,K){let j=[];return Vi(q.children,(ae,ve)=>{ve===Ue&&(j=j.concat(K(ae,ve)))}),Vi(q.children,(ae,ve)=>{ve!==Ue&&(j=j.concat(K(ae,ve)))}),j}(q,(ae,ve)=>ve===Ue?[ui(q.children[Ue],!1)]:[`${ve}:${ui(ae,!1)}`]);return 1===Object.keys(q.children).length&&null!=q.children[Ue]?`${Ut(q)}/${j[0]}`:`${Ut(q)}/(${j.join("//")})`}}function Yi(q){return encodeURIComponent(q).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function un(q){return Yi(q).replace(/%3B/gi,";")}function as(q){return Yi(q).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ls(q){return decodeURIComponent(q)}function js(q){return Ls(q.replace(/\+/g,"%20"))}function Co(q){return`${as(q.path)}${function(q){return Object.keys(q).map(K=>`;${as(K)}=${as(q[K])}`).join("")}(q.parameters)}`}const _o=/^[^\/()?;=#]+/;function Pn(q){const K=q.match(_o);return K?K[0]:""}const ii=/^[^=?&#]+/,Wn=/^[^&#]+/;class Zn{constructor(K){this.url=K,this.remaining=K}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yt([],{}):new yt([],this.parseChildren())}parseQueryParams(){const K={};if(this.consumeOptional("?"))do{this.parseQueryParam(K)}while(this.consumeOptional("&"));return K}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const K=[];for(this.peekStartsWith("(")||K.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),K.push(this.parseSegment());let j={};this.peekStartsWith("/(")&&(this.capture("/"),j=this.parseParens(!0));let ae={};return this.peekStartsWith("(")&&(ae=this.parseParens(!1)),(K.length>0||Object.keys(j).length>0)&&(ae[Ue]=new yt(K,j)),ae}parseSegment(){const K=Pn(this.remaining);if(""===K&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(K),new Si(Ls(K),this.parseMatrixParams())}parseMatrixParams(){const K={};for(;this.consumeOptional(";");)this.parseParam(K);return K}parseParam(K){const j=Pn(this.remaining);if(!j)return;this.capture(j);let ae="";if(this.consumeOptional("=")){const ve=Pn(this.remaining);ve&&(ae=ve,this.capture(ae))}K[Ls(j)]=Ls(ae)}parseQueryParam(K){const j=function(q){const K=q.match(ii);return K?K[0]:""}(this.remaining);if(!j)return;this.capture(j);let ae="";if(this.consumeOptional("=")){const ft=function(q){const K=q.match(Wn);return K?K[0]:""}(this.remaining);ft&&(ae=ft,this.capture(ae))}const ve=js(j),je=js(ae);if(K.hasOwnProperty(ve)){let ft=K[ve];Array.isArray(ft)||(ft=[ft],K[ve]=ft),ft.push(je)}else K[ve]=je}parseParens(K){const j={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const ae=Pn(this.remaining),ve=this.remaining[ae.length];if("/"!==ve&&")"!==ve&&";"!==ve)throw new Error(`Cannot parse url '${this.url}'`);let je;ae.indexOf(":")>-1?(je=ae.substr(0,ae.indexOf(":")),this.capture(je),this.capture(":")):K&&(je=Ue);const ft=this.parseChildren();j[je]=1===Object.keys(ft).length?ft[Ue]:new yt([],ft),this.consumeOptional("//")}return j}peekStartsWith(K){return this.remaining.startsWith(K)}consumeOptional(K){return!!this.peekStartsWith(K)&&(this.remaining=this.remaining.substring(K.length),!0)}capture(K){if(!this.consumeOptional(K))throw new Error(`Expected "${K}".`)}}class is{constructor(K){this._root=K}get root(){return this._root.value}parent(K){const j=this.pathFromRoot(K);return j.length>1?j[j.length-2]:null}children(K){const j=Ss(K,this._root);return j?j.children.map(ae=>ae.value):[]}firstChild(K){const j=Ss(K,this._root);return j&&j.children.length>0?j.children[0].value:null}siblings(K){const j=ss(K,this._root);return j.length<2?[]:j[j.length-2].children.map(ve=>ve.value).filter(ve=>ve!==K)}pathFromRoot(K){return ss(K,this._root).map(j=>j.value)}}function Ss(q,K){if(q===K.value)return K;for(const j of K.children){const ae=Ss(q,j);if(ae)return ae}return null}function ss(q,K){if(q===K.value)return[K];for(const j of K.children){const ae=ss(q,j);if(ae.length)return ae.unshift(K),ae}return[]}class _i{constructor(K,j){this.value=K,this.children=j}toString(){return`TreeNode(${this.value})`}}function ln(q){const K={};return q&&q.children.forEach(j=>K[j.value.outlet]=j),K}class yn extends is{constructor(K,j){super(K),this.snapshot=j,Sn(this,K)}toString(){return this.snapshot.toString()}}function Le(q,K){const j=function(q,K){const ft=new Bn([],{},{},"",{},Ue,K,null,q.root,-1,{});return new En("",new _i(ft,[]))}(q,K),ae=new _e.X([new Si("",{})]),ve=new _e.X({}),je=new _e.X({}),ft=new _e.X({}),Ot=new _e.X(""),ai=new ri(ae,ve,ft,Ot,je,Ue,K,j.root);return ai.snapshot=j.root,new yn(new _i(ai,[]),j)}class ri{constructor(K,j,ae,ve,je,ft,Ot,ai){this.url=K,this.params=j,this.queryParams=ae,this.fragment=ve,this.data=je,this.outlet=ft,this.component=Ot,this._futureSnapshot=ai}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ge.U)(K=>et(K)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ge.U)(K=>et(K)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Di(q,K="emptyOnly"){const j=q.pathFromRoot;let ae=0;if("always"!==K)for(ae=j.length-1;ae>=1;){const ve=j[ae],je=j[ae-1];if(ve.routeConfig&&""===ve.routeConfig.path)ae--;else{if(je.component)break;ae--}}return function(q){return q.reduce((K,j)=>({params:Object.assign(Object.assign({},K.params),j.params),data:Object.assign(Object.assign({},K.data),j.data),resolve:Object.assign(Object.assign({},K.resolve),j._resolvedData)}),{params:{},data:{},resolve:{}})}(j.slice(ae))}class Bn{constructor(K,j,ae,ve,je,ft,Ot,ai,Xi,qn,Cn){this.url=K,this.params=j,this.queryParams=ae,this.fragment=ve,this.data=je,this.outlet=ft,this.component=Ot,this.routeConfig=ai,this._urlSegment=Xi,this._lastPathIndex=qn,this._resolve=Cn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=et(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=et(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(ae=>ae.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class En extends is{constructor(K,j){super(j),this.url=K,Sn(this,j)}toString(){return dn(this._root)}}function Sn(q,K){K.value._routerState=q,K.children.forEach(j=>Sn(q,j))}function dn(q){const K=q.children.length>0?` { ${q.children.map(dn).join(", ")} } `:"";return`${q.value}${K}`}function Qs(q){if(q.snapshot){const K=q.snapshot,j=q._futureSnapshot;q.snapshot=j,si(K.queryParams,j.queryParams)||q.queryParams.next(j.queryParams),K.fragment!==j.fragment&&q.fragment.next(j.fragment),si(K.params,j.params)||q.params.next(j.params),function(q,K){if(q.length!==K.length)return!1;for(let j=0;j<q.length;++j)if(!si(q[j],K[j]))return!1;return!0}(K.url,j.url)||q.url.next(j.url),si(K.data,j.data)||q.data.next(j.data)}else q.snapshot=q._futureSnapshot,q.data.next(q._futureSnapshot.data)}function Eo(q,K){const j=si(q.params,K.params)&&function(q,K){return mn(q,K)&&q.every((j,ae)=>si(j.parameters,K[ae].parameters))}(q.url,K.url);return j&&!(!q.parent!=!K.parent)&&(!q.parent||Eo(q.parent,K.parent))}function Hs(q,K,j){if(j&&q.shouldReuseRoute(K.value,j.value.snapshot)){const ae=j.value;ae._futureSnapshot=K.value;const ve=function(q,K,j){return K.children.map(ae=>{for(const ve of j.children)if(q.shouldReuseRoute(ae.value,ve.value.snapshot))return Hs(q,ae,ve);return Hs(q,ae)})}(q,K,j);return new _i(ae,ve)}{if(q.shouldAttach(K.value)){const je=q.retrieve(K.value);if(null!==je){const ft=je.route;return ft.value._futureSnapshot=K.value,ft.children=K.children.map(Ot=>Hs(q,Ot)),ft}}const ae=function(q){return new ri(new _e.X(q.url),new _e.X(q.params),new _e.X(q.queryParams),new _e.X(q.fragment),new _e.X(q.data),q.outlet,q.component,q)}(K.value),ve=K.children.map(je=>Hs(q,je));return new _i(ae,ve)}}function Rs(q){return"object"==typeof q&&null!=q&&!q.outlets&&!q.segmentPath}function $o(q){return"object"==typeof q&&null!=q&&q.outlets}function Jo(q,K,j,ae,ve){let je={};return ae&&Vi(ae,(ft,Ot)=>{je[Ot]=Array.isArray(ft)?ft.map(ai=>`${ai}`):`${ft}`}),new Ke(j.root===q?K:no(j.root,q,K),je,ve)}function no(q,K,j){const ae={};return Vi(q.children,(ve,je)=>{ae[je]=ve===K?j:no(ve,K,j)}),new yt(q.segments,ae)}class $s{constructor(K,j,ae){if(this.isAbsolute=K,this.numberOfDoubleDots=j,this.commands=ae,K&&ae.length>0&&Rs(ae[0]))throw new Error("Root segment cannot have matrix parameters");const ve=ae.find($o);if(ve&&ve!==xi(ae))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Js{constructor(K,j,ae){this.segmentGroup=K,this.processChildren=j,this.index=ae}}function bo(q,K,j){if(q||(q=new yt([],{})),0===q.segments.length&&q.hasChildren())return fr(q,K,j);const ae=function(q,K,j){let ae=0,ve=K;const je={match:!1,pathIndex:0,commandIndex:0};for(;ve<q.segments.length;){if(ae>=j.length)return je;const ft=q.segments[ve],Ot=j[ae];if($o(Ot))break;const ai=`${Ot}`,Xi=ae<j.length-1?j[ae+1]:null;if(ve>0&&void 0===ai)break;if(ai&&Xi&&"object"==typeof Xi&&void 0===Xi.outlets){if(!gr(ai,Xi,ft))return je;ae+=2}else{if(!gr(ai,{},ft))return je;ae++}ve++}return{match:!0,pathIndex:ve,commandIndex:ae}}(q,K,j),ve=j.slice(ae.commandIndex);if(ae.match&&ae.pathIndex<q.segments.length){const je=new yt(q.segments.slice(0,ae.pathIndex),{});return je.children[Ue]=new yt(q.segments.slice(ae.pathIndex),q.children),fr(je,0,ve)}return ae.match&&0===ve.length?new yt(q.segments,{}):ae.match&&!q.hasChildren()?Tr(q,K,j):ae.match?fr(q,0,ve):Tr(q,K,j)}function fr(q,K,j){if(0===j.length)return new yt(q.segments,{});{const ae=function(q){return $o(q[0])?q[0].outlets:{[Ue]:q}}(j),ve={};return Vi(ae,(je,ft)=>{"string"==typeof je&&(je=[je]),null!==je&&(ve[ft]=bo(q.children[ft],K,je))}),Vi(q.children,(je,ft)=>{void 0===ae[ft]&&(ve[ft]=je)}),new yt(q.segments,ve)}}function Tr(q,K,j){const ae=q.segments.slice(0,K);let ve=0;for(;ve<j.length;){const je=j[ve];if($o(je)){const ai=Aa(je.outlets);return new yt(ae,ai)}if(0===ve&&Rs(j[0])){ae.push(new Si(q.segments[K].path,Oa(j[0]))),ve++;continue}const ft=$o(je)?je.outlets[Ue]:`${je}`,Ot=ve<j.length-1?j[ve+1]:null;ft&&Ot&&Rs(Ot)?(ae.push(new Si(ft,Oa(Ot))),ve+=2):(ae.push(new Si(ft,{})),ve++)}return new yt(ae,{})}function Aa(q){const K={};return Vi(q,(j,ae)=>{"string"==typeof j&&(j=[j]),null!==j&&(K[ae]=Tr(new yt([],{}),0,j))}),K}function Oa(q){const K={};return Vi(q,(j,ae)=>K[ae]=`${j}`),K}function gr(q,K,j){return q==j.path&&si(K,j.parameters)}class $r{constructor(K,j,ae,ve){this.routeReuseStrategy=K,this.futureState=j,this.currState=ae,this.forwardEvent=ve}activate(K){const j=this.futureState._root,ae=this.currState?this.currState._root:null;this.deactivateChildRoutes(j,ae,K),Qs(this.futureState.root),this.activateChildRoutes(j,ae,K)}deactivateChildRoutes(K,j,ae){const ve=ln(j);K.children.forEach(je=>{const ft=je.value.outlet;this.deactivateRoutes(je,ve[ft],ae),delete ve[ft]}),Vi(ve,(je,ft)=>{this.deactivateRouteAndItsChildren(je,ae)})}deactivateRoutes(K,j,ae){const ve=K.value,je=j?j.value:null;if(ve===je)if(ve.component){const ft=ae.getContext(ve.outlet);ft&&this.deactivateChildRoutes(K,j,ft.children)}else this.deactivateChildRoutes(K,j,ae);else je&&this.deactivateRouteAndItsChildren(j,ae)}deactivateRouteAndItsChildren(K,j){K.value.component&&this.routeReuseStrategy.shouldDetach(K.value.snapshot)?this.detachAndStoreRouteSubtree(K,j):this.deactivateRouteAndOutlet(K,j)}detachAndStoreRouteSubtree(K,j){const ae=j.getContext(K.value.outlet),ve=ae&&K.value.component?ae.children:j,je=ln(K);for(const ft of Object.keys(je))this.deactivateRouteAndItsChildren(je[ft],ve);if(ae&&ae.outlet){const ft=ae.outlet.detach(),Ot=ae.children.onOutletDeactivated();this.routeReuseStrategy.store(K.value.snapshot,{componentRef:ft,route:K,contexts:Ot})}}deactivateRouteAndOutlet(K,j){const ae=j.getContext(K.value.outlet),ve=ae&&K.value.component?ae.children:j,je=ln(K);for(const ft of Object.keys(je))this.deactivateRouteAndItsChildren(je[ft],ve);ae&&ae.outlet&&(ae.outlet.deactivate(),ae.children.onOutletDeactivated(),ae.attachRef=null,ae.resolver=null,ae.route=null)}activateChildRoutes(K,j,ae){const ve=ln(j);K.children.forEach(je=>{this.activateRoutes(je,ve[je.value.outlet],ae),this.forwardEvent(new We(je.value.snapshot))}),K.children.length&&this.forwardEvent(new Ft(K.value.snapshot))}activateRoutes(K,j,ae){const ve=K.value,je=j?j.value:null;if(Qs(ve),ve===je)if(ve.component){const ft=ae.getOrCreateContext(ve.outlet);this.activateChildRoutes(K,j,ft.children)}else this.activateChildRoutes(K,j,ae);else if(ve.component){const ft=ae.getOrCreateContext(ve.outlet);if(this.routeReuseStrategy.shouldAttach(ve.snapshot)){const Ot=this.routeReuseStrategy.retrieve(ve.snapshot);this.routeReuseStrategy.store(ve.snapshot,null),ft.children.onOutletReAttached(Ot.contexts),ft.attachRef=Ot.componentRef,ft.route=Ot.route.value,ft.outlet&&ft.outlet.attach(Ot.componentRef,Ot.route.value),Qs(Ot.route.value),this.activateChildRoutes(K,null,ft.children)}else{const Ot=function(q){for(let K=q.parent;K;K=K.parent){const j=K.routeConfig;if(j&&j._loadedConfig)return j._loadedConfig;if(j&&j.component)return null}return null}(ve.snapshot),ai=Ot?Ot.module.componentFactoryResolver:null;ft.attachRef=null,ft.route=ve,ft.resolver=ai,ft.outlet&&ft.outlet.activateWith(ve,ai),this.activateChildRoutes(K,null,ft.children)}}else this.activateChildRoutes(K,null,ae)}}class ao{constructor(K,j){this.routes=K,this.module=j}}function ys(q){return"function"==typeof q}function Ys(q){return q instanceof Ke}const so=Symbol("INITIAL_VALUE");function Zr(){return(0,se.w)(q=>(0,De.a)(q.map(K=>K.pipe((0,Pe.q)(1),(0,at.O)(so)))).pipe(Rt((K,j)=>{let ae=!1;return j.reduce((ve,je,ft)=>ve!==so?ve:(je===so&&(ae=!0),ae||!1!==je&&ft!==j.length-1&&!Ys(je)?ve:je),K)},so),(0,Wt.h)(K=>K!==so),(0,ge.U)(K=>Ys(K)?K:!0===K),(0,Pe.q)(1)))}class qr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Qo,this.attachRef=null}}class Qo{constructor(){this.contexts=new Map}onChildOutletCreated(K,j){const ae=this.getOrCreateContext(K);ae.outlet=j,this.contexts.set(K,ae)}onChildOutletDestroyed(K){const j=this.getContext(K);j&&(j.outlet=null,j.attachRef=null)}onOutletDeactivated(){const K=this.contexts;return this.contexts=new Map,K}onOutletReAttached(K){this.contexts=K}getOrCreateContext(K){let j=this.getContext(K);return j||(j=new qr,this.contexts.set(K,j)),j}getContext(K){return this.contexts.get(K)||null}}let wr=(()=>{class q{constructor(j,ae,ve,je,ft){this.parentContexts=j,this.location=ae,this.resolver=ve,this.changeDetector=ft,this.activated=null,this._activatedRoute=null,this.activateEvents=new O.vpe,this.deactivateEvents=new O.vpe,this.attachEvents=new O.vpe,this.detachEvents=new O.vpe,this.name=je||Ue,j.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const j=this.parentContexts.getContext(this.name);j&&j.route&&(j.attachRef?this.attach(j.attachRef,j.route):this.activateWith(j.route,j.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const j=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(j.instance),j}attach(j,ae){this.activated=j,this._activatedRoute=ae,this.location.insert(j.hostView),this.attachEvents.emit(j.instance)}deactivate(){if(this.activated){const j=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(j)}}activateWith(j,ae){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=j;const ft=(ae=ae||this.resolver).resolveComponentFactory(j._futureSnapshot.routeConfig.component),Ot=this.parentContexts.getOrCreateContext(this.name).children,ai=new ps(j,Ot,this.location.injector);this.activated=this.location.createComponent(ft,this.location.length,ai),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return q.\u0275fac=function(j){return new(j||q)(O.Y36(Qo),O.Y36(O.s_b),O.Y36(O._Vd),O.$8M("name"),O.Y36(O.sBO))},q.\u0275dir=O.lG2({type:q,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),q})();class ps{constructor(K,j,ae){this.route=K,this.childContexts=j,this.parent=ae}get(K,j){return K===ri?this.route:K===Qo?this.childContexts:this.parent.get(K,j)}}let lr=(()=>{class q{}return q.\u0275fac=function(j){return new(j||q)},q.\u0275cmp=O.Xpm({type:q,selectors:[["ng-component"]],decls:1,vars:0,template:function(j,ae){1&j&&O._UZ(0,"router-outlet")},directives:[wr],encapsulation:2}),q})();function ls(q,K=""){for(let j=0;j<q.length;j++){const ae=q[j];mr(ae,Ta(K,ae))}}function mr(q,K){q.children&&ls(q.children,K)}function Ta(q,K){return K?q||K.path?q&&!K.path?`${q}/`:!q&&K.path?K.path:`${q}/${K.path}`:"":q}function ko(q){const K=q.children&&q.children.map(ko),j=K?Object.assign(Object.assign({},q),{children:K}):Object.assign({},q);return!j.component&&(K||j.loadChildren)&&j.outlet&&j.outlet!==Ue&&(j.component=lr),j}function uo(q){return q.outlet||Ue}function _r(q,K){const j=q.filter(ae=>uo(ae)===K);return j.push(...q.filter(ae=>uo(ae)!==K)),j}const ka={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function gs(q,K,j){var ae;if(""===K.path)return"full"===K.pathMatch&&(q.hasChildren()||j.length>0)?Object.assign({},ka):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const je=(K.matcher||Vt)(j,q,K);if(!je)return Object.assign({},ka);const ft={};Vi(je.posParams,(ai,Xi)=>{ft[Xi]=ai.path});const Ot=je.consumed.length>0?Object.assign(Object.assign({},ft),je.consumed[je.consumed.length-1].parameters):ft;return{matched:!0,consumedSegments:je.consumed,lastChild:je.consumed.length,parameters:Ot,positionalParamSegments:null!==(ae=je.posParams)&&void 0!==ae?ae:{}}}function Sr(q,K,j,ae,ve="corrected"){if(j.length>0&&function(q,K,j){return j.some(ae=>F(q,K,ae)&&uo(ae)!==Ue)}(q,j,ae)){const ft=new yt(K,function(q,K,j,ae){const ve={};ve[Ue]=ae,ae._sourceSegment=q,ae._segmentIndexShift=K.length;for(const je of j)if(""===je.path&&uo(je)!==Ue){const ft=new yt([],{});ft._sourceSegment=q,ft._segmentIndexShift=K.length,ve[uo(je)]=ft}return ve}(q,K,ae,new yt(j,q.children)));return ft._sourceSegment=q,ft._segmentIndexShift=K.length,{segmentGroup:ft,slicedSegments:[]}}if(0===j.length&&function(q,K,j){return j.some(ae=>F(q,K,ae))}(q,j,ae)){const ft=new yt(q.segments,function(q,K,j,ae,ve,je){const ft={};for(const Ot of ae)if(F(q,j,Ot)&&!ve[uo(Ot)]){const ai=new yt([],{});ai._sourceSegment=q,ai._segmentIndexShift="legacy"===je?q.segments.length:K.length,ft[uo(Ot)]=ai}return Object.assign(Object.assign({},ve),ft)}(q,K,j,ae,q.children,ve));return ft._sourceSegment=q,ft._segmentIndexShift=K.length,{segmentGroup:ft,slicedSegments:j}}const je=new yt(q.segments,q.children);return je._sourceSegment=q,je._segmentIndexShift=K.length,{segmentGroup:je,slicedSegments:j}}function F(q,K,j){return(!(q.hasChildren()||K.length>0)||"full"!==j.pathMatch)&&""===j.path}function le(q,K,j,ae){return!!(uo(q)===ae||ae!==Ue&&F(K,j,q))&&("**"===q.path||gs(K,q,j).matched)}function Tt(q,K,j){return 0===K.length&&!q.children[j]}class Jt{constructor(K){this.segmentGroup=K||null}}class Fi{constructor(K){this.urlTree=K}}function Dn(q){return new e.y(K=>K.error(new Jt(q)))}function es(q){return new e.y(K=>K.error(new Fi(q)))}function cs(q){return new e.y(K=>K.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${q}'`)))}class zn{constructor(K,j,ae,ve,je){this.configLoader=j,this.urlSerializer=ae,this.urlTree=ve,this.config=je,this.allowRedirects=!0,this.ngModule=K.get(O.h0i)}apply(){const K=Sr(this.urlTree.root,[],[],this.config).segmentGroup,j=new yt(K.segments,K.children);return this.expandSegmentGroup(this.ngModule,this.config,j,Ue).pipe((0,ge.U)(je=>this.createUrlTree(_n(je),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Be.K)(je=>{if(je instanceof Fi)return this.allowRedirects=!1,this.match(je.urlTree);throw je instanceof Jt?this.noMatchError(je):je}))}match(K){return this.expandSegmentGroup(this.ngModule,this.config,K.root,Ue).pipe((0,ge.U)(ve=>this.createUrlTree(_n(ve),K.queryParams,K.fragment))).pipe((0,Be.K)(ve=>{throw ve instanceof Jt?this.noMatchError(ve):ve}))}noMatchError(K){return new Error(`Cannot match any routes. URL Segment: '${K.segmentGroup}'`)}createUrlTree(K,j,ae){const ve=K.segments.length>0?new yt([],{[Ue]:K}):K;return new Ke(ve,j,ae)}expandSegmentGroup(K,j,ae,ve){return 0===ae.segments.length&&ae.hasChildren()?this.expandChildren(K,j,ae).pipe((0,ge.U)(je=>new yt([],je))):this.expandSegment(K,ae,j,ae.segments,ve,!0)}expandChildren(K,j,ae){const ve=[];for(const je of Object.keys(ae.children))"primary"===je?ve.unshift(je):ve.push(je);return(0,Y.D)(ve).pipe((0,ze.b)(je=>{const ft=ae.children[je],Ot=_r(j,je);return this.expandSegmentGroup(K,Ot,ft,je).pipe((0,ge.U)(ai=>({segment:ai,outlet:je})))}),Rt((je,ft)=>(je[ft.outlet]=ft.segment,je),{}),function(q,K){const j=arguments.length>=2;return ae=>ae.pipe(q?(0,Wt.h)((ve,je)=>q(ve,je,ae)):dt.y,tt(1),j?Qe(K):Oe(()=>new t))}())}expandSegment(K,j,ae,ve,je,ft){return(0,Y.D)(ae).pipe((0,ze.b)(Ot=>this.expandSegmentAgainstRoute(K,j,ae,Ot,ve,je,ft).pipe((0,Be.K)(Xi=>{if(Xi instanceof Jt)return(0,ee.of)(null);throw Xi}))),Re(Ot=>!!Ot),(0,Be.K)((Ot,ai)=>{if(Ot instanceof t||"EmptyError"===Ot.name){if(Tt(j,ve,je))return(0,ee.of)(new yt([],{}));throw new Jt(j)}throw Ot}))}expandSegmentAgainstRoute(K,j,ae,ve,je,ft,Ot){return le(ve,j,je,ft)?void 0===ve.redirectTo?this.matchSegmentAgainstRoute(K,j,ve,je,ft):Ot&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(K,j,ae,ve,je,ft):Dn(j):Dn(j)}expandSegmentAgainstRouteUsingRedirect(K,j,ae,ve,je,ft){return"**"===ve.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(K,ae,ve,ft):this.expandRegularSegmentAgainstRouteUsingRedirect(K,j,ae,ve,je,ft)}expandWildCardWithParamsAgainstRouteUsingRedirect(K,j,ae,ve){const je=this.applyRedirectCommands([],ae.redirectTo,{});return ae.redirectTo.startsWith("/")?es(je):this.lineralizeSegments(ae,je).pipe((0,St.z)(ft=>{const Ot=new yt(ft,{});return this.expandSegment(K,Ot,j,ft,ve,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(K,j,ae,ve,je,ft){const{matched:Ot,consumedSegments:ai,lastChild:Xi,positionalParamSegments:qn}=gs(j,ve,je);if(!Ot)return Dn(j);const Cn=this.applyRedirectCommands(ai,ve.redirectTo,qn);return ve.redirectTo.startsWith("/")?es(Cn):this.lineralizeSegments(ve,Cn).pipe((0,St.z)(vs=>this.expandSegment(K,j,ae,vs.concat(je.slice(Xi)),ft,!1)))}matchSegmentAgainstRoute(K,j,ae,ve,je){if("**"===ae.path)return ae.loadChildren?(ae._loadedConfig?(0,ee.of)(ae._loadedConfig):this.configLoader.load(K.injector,ae)).pipe((0,ge.U)(vs=>(ae._loadedConfig=vs,new yt(ve,{})))):(0,ee.of)(new yt(ve,{}));const{matched:ft,consumedSegments:Ot,lastChild:ai}=gs(j,ae,ve);if(!ft)return Dn(j);const Xi=ve.slice(ai);return this.getChildConfig(K,ae,ve).pipe((0,St.z)(Cn=>{const vs=Cn.module,Ps=Cn.routes,{segmentGroup:Sa,slicedSegments:ur}=Sr(j,Ot,Xi,Ps),oa=new yt(Sa.segments,Sa.children);if(0===ur.length&&oa.hasChildren())return this.expandChildren(vs,Ps,oa).pipe((0,ge.U)(Nr=>new yt(Ot,Nr)));if(0===Ps.length&&0===ur.length)return(0,ee.of)(new yt(Ot,{}));const po=uo(ae)===je;return this.expandSegment(vs,oa,Ps,ur,po?Ue:je,!0).pipe((0,ge.U)(rr=>new yt(Ot.concat(rr.segments),rr.children)))}))}getChildConfig(K,j,ae){return j.children?(0,ee.of)(new ao(j.children,K)):j.loadChildren?void 0!==j._loadedConfig?(0,ee.of)(j._loadedConfig):this.runCanLoadGuards(K.injector,j,ae).pipe((0,St.z)(ve=>{return ve?this.configLoader.load(K.injector,j).pipe((0,ge.U)(je=>(j._loadedConfig=je,je))):(q=j,new e.y(K=>K.error(Xe(`Cannot load children because the guard of the route "path: '${q.path}'" returned false`))));var q})):(0,ee.of)(new ao([],K))}runCanLoadGuards(K,j,ae){const ve=j.canLoad;if(!ve||0===ve.length)return(0,ee.of)(!0);const je=ve.map(ft=>{const Ot=K.get(ft);let ai;if((q=Ot)&&ys(q.canLoad))ai=Ot.canLoad(j,ae);else{if(!ys(Ot))throw new Error("Invalid CanLoad guard");ai=Ot(j,ae)}var q;return Ni(ai)});return(0,ee.of)(je).pipe(Zr(),(0,wt.b)(ft=>{if(!Ys(ft))return;const Ot=Xe(`Redirecting to "${this.urlSerializer.serialize(ft)}"`);throw Ot.url=ft,Ot}),(0,ge.U)(ft=>!0===ft))}lineralizeSegments(K,j){let ae=[],ve=j.root;for(;;){if(ae=ae.concat(ve.segments),0===ve.numberOfChildren)return(0,ee.of)(ae);if(ve.numberOfChildren>1||!ve.children[Ue])return cs(K.redirectTo);ve=ve.children[Ue]}}applyRedirectCommands(K,j,ae){return this.applyRedirectCreatreUrlTree(j,this.urlSerializer.parse(j),K,ae)}applyRedirectCreatreUrlTree(K,j,ae,ve){const je=this.createSegmentGroup(K,j.root,ae,ve);return new Ke(je,this.createQueryParams(j.queryParams,this.urlTree.queryParams),j.fragment)}createQueryParams(K,j){const ae={};return Vi(K,(ve,je)=>{if("string"==typeof ve&&ve.startsWith(":")){const Ot=ve.substring(1);ae[je]=j[Ot]}else ae[je]=ve}),ae}createSegmentGroup(K,j,ae,ve){const je=this.createSegments(K,j.segments,ae,ve);let ft={};return Vi(j.children,(Ot,ai)=>{ft[ai]=this.createSegmentGroup(K,Ot,ae,ve)}),new yt(je,ft)}createSegments(K,j,ae,ve){return j.map(je=>je.path.startsWith(":")?this.findPosParam(K,je,ve):this.findOrReturn(je,ae))}findPosParam(K,j,ae){const ve=ae[j.path.substring(1)];if(!ve)throw new Error(`Cannot redirect to '${K}'. Cannot find '${j.path}'.`);return ve}findOrReturn(K,j){let ae=0;for(const ve of j){if(ve.path===K.path)return j.splice(ae),ve;ae++}return K}}function _n(q){const K={};for(const ae of Object.keys(q.children)){const je=_n(q.children[ae]);(je.segments.length>0||je.hasChildren())&&(K[ae]=je)}return function(q){if(1===q.numberOfChildren&&q.children[Ue]){const K=q.children[Ue];return new yt(q.segments.concat(K.segments),K.children)}return q}(new yt(q.segments,K))}class Or{constructor(K){this.path=K,this.route=this.path[this.path.length-1]}}class Bo{constructor(K,j){this.component=K,this.route=j}}function fa(q,K,j){const ae=q._root;return fe(ae,K?K._root:null,j,[ae.value])}function tr(q,K,j){const ae=function(q){if(!q)return null;for(let K=q.parent;K;K=K.parent){const j=K.routeConfig;if(j&&j._loadedConfig)return j._loadedConfig}return null}(K);return(ae?ae.module.injector:j).get(q)}function fe(q,K,j,ae,ve={canDeactivateChecks:[],canActivateChecks:[]}){const je=ln(K);return q.children.forEach(ft=>{(function(q,K,j,ae,ve={canDeactivateChecks:[],canActivateChecks:[]}){const je=q.value,ft=K?K.value:null,Ot=j?j.getContext(q.value.outlet):null;if(ft&&je.routeConfig===ft.routeConfig){const ai=function(q,K,j){if("function"==typeof j)return j(q,K);switch(j){case"pathParamsChange":return!mn(q.url,K.url);case"pathParamsOrQueryParamsChange":return!mn(q.url,K.url)||!si(q.queryParams,K.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eo(q,K)||!si(q.queryParams,K.queryParams);default:return!Eo(q,K)}}(ft,je,je.routeConfig.runGuardsAndResolvers);ai?ve.canActivateChecks.push(new Or(ae)):(je.data=ft.data,je._resolvedData=ft._resolvedData),fe(q,K,je.component?Ot?Ot.children:null:j,ae,ve),ai&&Ot&&Ot.outlet&&Ot.outlet.isActivated&&ve.canDeactivateChecks.push(new Bo(Ot.outlet.component,ft))}else ft&&Q(K,Ot,ve),ve.canActivateChecks.push(new Or(ae)),fe(q,null,je.component?Ot?Ot.children:null:j,ae,ve)})(ft,je[ft.value.outlet],j,ae.concat([ft.value]),ve),delete je[ft.value.outlet]}),Vi(je,(ft,Ot)=>Q(ft,j.getContext(Ot),ve)),ve}function Q(q,K,j){const ae=ln(q),ve=q.value;Vi(ae,(je,ft)=>{Q(je,ve.component?K?K.children.getContext(ft):null:K,j)}),j.canDeactivateChecks.push(new Bo(ve.component&&K&&K.outlet&&K.outlet.isActivated?K.outlet.component:null,ve))}class Nn{}function An(q){return new e.y(K=>K.error(q))}class On{constructor(K,j,ae,ve,je,ft){this.rootComponentType=K,this.config=j,this.urlTree=ae,this.url=ve,this.paramsInheritanceStrategy=je,this.relativeLinkResolution=ft}recognize(){const K=Sr(this.urlTree.root,[],[],this.config.filter(ft=>void 0===ft.redirectTo),this.relativeLinkResolution).segmentGroup,j=this.processSegmentGroup(this.config,K,Ue);if(null===j)return null;const ae=new Bn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ue,this.rootComponentType,null,this.urlTree.root,-1,{}),ve=new _i(ae,j),je=new En(this.url,ve);return this.inheritParamsAndData(je._root),je}inheritParamsAndData(K){const j=K.value,ae=Di(j,this.paramsInheritanceStrategy);j.params=Object.freeze(ae.params),j.data=Object.freeze(ae.data),K.children.forEach(ve=>this.inheritParamsAndData(ve))}processSegmentGroup(K,j,ae){return 0===j.segments.length&&j.hasChildren()?this.processChildren(K,j):this.processSegment(K,j,j.segments,ae)}processChildren(K,j){const ae=[];for(const je of Object.keys(j.children)){const ft=j.children[je],Ot=_r(K,je),ai=this.processSegmentGroup(Ot,ft,je);if(null===ai)return null;ae.push(...ai)}const ve=Us(ae);return ve.sort((K,j)=>K.value.outlet===Ue?-1:j.value.outlet===Ue?1:K.value.outlet.localeCompare(j.value.outlet)),ve}processSegment(K,j,ae,ve){for(const je of K){const ft=this.processSegmentAgainstRoute(je,j,ae,ve);if(null!==ft)return ft}return Tt(j,ae,ve)?[]:null}processSegmentAgainstRoute(K,j,ae,ve){if(K.redirectTo||!le(K,j,ae,ve))return null;let je,ft=[],Ot=[];if("**"===K.path){const Ps=ae.length>0?xi(ae).parameters:{};je=new Bn(ae,Ps,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Zs(K),uo(K),K.component,K,Qr(j),ir(j)+ae.length,vr(K))}else{const Ps=gs(j,K,ae);if(!Ps.matched)return null;ft=Ps.consumedSegments,Ot=ae.slice(Ps.lastChild),je=new Bn(ft,Ps.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Zs(K),uo(K),K.component,K,Qr(j),ir(j)+ft.length,vr(K))}const ai=(q=K).children?q.children:q.loadChildren?q._loadedConfig.routes:[],{segmentGroup:Xi,slicedSegments:qn}=Sr(j,ft,Ot,ai.filter(Ps=>void 0===Ps.redirectTo),this.relativeLinkResolution);var q;if(0===qn.length&&Xi.hasChildren()){const Ps=this.processChildren(ai,Xi);return null===Ps?null:[new _i(je,Ps)]}if(0===ai.length&&0===qn.length)return[new _i(je,[])];const Cn=uo(K)===ve,vs=this.processSegment(ai,Xi,qn,Cn?Ue:ve);return null===vs?null:[new _i(je,vs)]}}function Cs(q){const K=q.value.routeConfig;return K&&""===K.path&&void 0===K.redirectTo}function Us(q){const K=[],j=new Set;for(const ae of q){if(!Cs(ae)){K.push(ae);continue}const ve=K.find(je=>ae.value.routeConfig===je.value.routeConfig);void 0!==ve?(ve.children.push(...ae.children),j.add(ve)):K.push(ae)}for(const ae of j){const ve=Us(ae.children);K.push(new _i(ae.value,ve))}return K.filter(ae=>!j.has(ae))}function Qr(q){let K=q;for(;K._sourceSegment;)K=K._sourceSegment;return K}function ir(q){let K=q,j=K._segmentIndexShift?K._segmentIndexShift:0;for(;K._sourceSegment;)K=K._sourceSegment,j+=K._segmentIndexShift?K._segmentIndexShift:0;return j-1}function Zs(q){return q.data||{}}function vr(q){return q.resolve||{}}function kr(q){return(0,se.w)(K=>{const j=q(K);return j?(0,Y.D)(j).pipe((0,ge.U)(()=>K)):(0,ee.of)(K)})}class an extends class{shouldDetach(K){return!1}store(K,j){}shouldAttach(K){return!1}retrieve(K){return null}shouldReuseRoute(K,j){return K.routeConfig===j.routeConfig}}{}const Fn=new O.OlP("ROUTES");class Un{constructor(K,j,ae,ve){this.injector=K,this.compiler=j,this.onLoadStartListener=ae,this.onLoadEndListener=ve}load(K,j){if(j._loader$)return j._loader$;this.onLoadStartListener&&this.onLoadStartListener(j);const ve=this.loadModuleFactory(j.loadChildren).pipe((0,ge.U)(je=>{this.onLoadEndListener&&this.onLoadEndListener(j);const ft=je.create(K);return new ao(sn(ft.injector.get(Fn,void 0,O.XFs.Self|O.XFs.Optional)).map(ko),ft)}),(0,Be.K)(je=>{throw j._loader$=void 0,je}));return j._loader$=new I(ve,()=>new Ge.x).pipe(E()),j._loader$}loadModuleFactory(K){return Ni(K()).pipe((0,St.z)(j=>j instanceof O.YKP?(0,ee.of)(j):(0,Y.D)(this.compiler.compileModuleAsync(j))))}}class wo{shouldProcessUrl(K){return!0}extract(K){return K}merge(K,j){return K}}function ds(q){throw q}function sr(q,K,j){return K.parse("/")}function Gs(q,K){return(0,ee.of)(null)}const sl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ol={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _s=(()=>{class q{constructor(j,ae,ve,je,ft,Ot,ai){this.rootComponentType=j,this.urlSerializer=ae,this.rootContexts=ve,this.location=je,this.config=ai,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ge.x,this.errorHandler=ds,this.malformedUriErrorHandler=sr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Gs,afterPreactivation:Gs},this.urlHandlingStrategy=new wo,this.routeReuseStrategy=new an,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ft.get(O.h0i),this.console=ft.get(O.c2e);const Cn=ft.get(O.R0b);this.isNgZoneEnabled=Cn instanceof O.R0b&&O.R0b.isInAngularZone(),this.resetConfig(ai),this.currentUrlTree=new Ke(new yt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Un(ft,Ot,vs=>this.triggerEvent(new Te(vs)),vs=>this.triggerEvent(new xt(vs))),this.routerState=Le(this.currentUrlTree,this.rootComponentType),this.transitions=new _e.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var j;return null===(j=this.location.getState())||void 0===j?void 0:j.\u0275routerPageId}setupNavigations(j){const ae=this.events;return j.pipe((0,Wt.h)(ve=>0!==ve.id),(0,ge.U)(ve=>Object.assign(Object.assign({},ve),{extractedUrl:this.urlHandlingStrategy.extract(ve.rawUrl)})),(0,se.w)(ve=>{let je=!1,ft=!1;return(0,ee.of)(ve).pipe((0,wt.b)(Ot=>{this.currentNavigation={id:Ot.id,initialUrl:Ot.currentRawUrl,extractedUrl:Ot.extractedUrl,trigger:Ot.source,extras:Ot.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,se.w)(Ot=>{const ai=this.browserUrlTree.toString(),Xi=!this.navigated||Ot.extractedUrl.toString()!==ai||ai!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Xi)&&this.urlHandlingStrategy.shouldProcessUrl(Ot.rawUrl))return Ho(Ot.source)&&(this.browserUrlTree=Ot.extractedUrl),(0,ee.of)(Ot).pipe((0,se.w)(Cn=>{const vs=this.transitions.getValue();return ae.next(new Wi(Cn.id,this.serializeUrl(Cn.extractedUrl),Cn.source,Cn.restoredState)),vs!==this.transitions.getValue()?st.E:Promise.resolve(Cn)}),function(q,K,j,ae){return(0,se.w)(ve=>function(q,K,j,ae,ve){return new zn(q,K,j,ae,ve).apply()}(q,K,j,ve.extractedUrl,ae).pipe((0,ge.U)(je=>Object.assign(Object.assign({},ve),{urlAfterRedirects:je}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,wt.b)(Cn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Cn.urlAfterRedirects})}),function(q,K,j,ae,ve){return(0,St.z)(je=>function(q,K,j,ae,ve="emptyOnly",je="legacy"){try{const ft=new On(q,K,j,ae,ve,je).recognize();return null===ft?An(new Nn):(0,ee.of)(ft)}catch(ft){return An(ft)}}(q,K,je.urlAfterRedirects,j(je.urlAfterRedirects),ae,ve).pipe((0,ge.U)(ft=>Object.assign(Object.assign({},je),{targetSnapshot:ft}))))}(this.rootComponentType,this.config,Cn=>this.serializeUrl(Cn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,wt.b)(Cn=>{if("eager"===this.urlUpdateStrategy){if(!Cn.extras.skipLocationChange){const Ps=this.urlHandlingStrategy.merge(Cn.urlAfterRedirects,Cn.rawUrl);this.setBrowserUrl(Ps,Cn)}this.browserUrlTree=Cn.urlAfterRedirects}const vs=new Ce(Cn.id,this.serializeUrl(Cn.extractedUrl),this.serializeUrl(Cn.urlAfterRedirects),Cn.targetSnapshot);ae.next(vs)}));if(Xi&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:vs,extractedUrl:Ps,source:Sa,restoredState:ur,extras:oa}=Ot,po=new Wi(vs,this.serializeUrl(Ps),Sa,ur);ae.next(po);const ra=Le(Ps,this.rootComponentType).snapshot;return(0,ee.of)(Object.assign(Object.assign({},Ot),{targetSnapshot:ra,urlAfterRedirects:Ps,extras:Object.assign(Object.assign({},oa),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ot.rawUrl,Ot.resolve(null),st.E}),kr(Ot=>{const{targetSnapshot:ai,id:Xi,extractedUrl:qn,rawUrl:Cn,extras:{skipLocationChange:vs,replaceUrl:Ps}}=Ot;return this.hooks.beforePreactivation(ai,{navigationId:Xi,appliedUrlTree:qn,rawUrlTree:Cn,skipLocationChange:!!vs,replaceUrl:!!Ps})}),(0,wt.b)(Ot=>{const ai=new vt(Ot.id,this.serializeUrl(Ot.extractedUrl),this.serializeUrl(Ot.urlAfterRedirects),Ot.targetSnapshot);this.triggerEvent(ai)}),(0,ge.U)(Ot=>Object.assign(Object.assign({},Ot),{guards:fa(Ot.targetSnapshot,Ot.currentSnapshot,this.rootContexts)})),function(q,K){return(0,St.z)(j=>{const{targetSnapshot:ae,currentSnapshot:ve,guards:{canActivateChecks:je,canDeactivateChecks:ft}}=j;return 0===ft.length&&0===je.length?(0,ee.of)(Object.assign(Object.assign({},j),{guardsResult:!0})):function(q,K,j,ae){return(0,Y.D)(q).pipe((0,St.z)(ve=>function(q,K,j,ae,ve){const je=K&&K.routeConfig?K.routeConfig.canDeactivate:null;if(!je||0===je.length)return(0,ee.of)(!0);const ft=je.map(Ot=>{const ai=tr(Ot,K,ve);let Xi;if(function(q){return q&&ys(q.canDeactivate)}(ai))Xi=Ni(ai.canDeactivate(q,K,j,ae));else{if(!ys(ai))throw new Error("Invalid CanDeactivate guard");Xi=Ni(ai(q,K,j,ae))}return Xi.pipe(Re())});return(0,ee.of)(ft).pipe(Zr())}(ve.component,ve.route,j,K,ae)),Re(ve=>!0!==ve,!0))}(ft,ae,ve,q).pipe((0,St.z)(Ot=>Ot&&function(q){return"boolean"==typeof q}(Ot)?function(q,K,j,ae){return(0,Y.D)(K).pipe((0,ze.b)(ve=>(0,Ae.z)(function(q,K){return null!==q&&K&&K(new Kt(q)),(0,ee.of)(!0)}(ve.route.parent,ae),function(q,K){return null!==q&&K&&K(new ke(q)),(0,ee.of)(!0)}(ve.route,ae),function(q,K,j){const ae=K[K.length-1],je=K.slice(0,K.length-1).reverse().map(ft=>function(q){const K=q.routeConfig?q.routeConfig.canActivateChild:null;return K&&0!==K.length?{node:q,guards:K}:null}(ft)).filter(ft=>null!==ft).map(ft=>(0,Je.P)(()=>{const Ot=ft.guards.map(ai=>{const Xi=tr(ai,ft.node,j);let qn;if(function(q){return q&&ys(q.canActivateChild)}(Xi))qn=Ni(Xi.canActivateChild(ae,q));else{if(!ys(Xi))throw new Error("Invalid CanActivateChild guard");qn=Ni(Xi(ae,q))}return qn.pipe(Re())});return(0,ee.of)(Ot).pipe(Zr())}));return(0,ee.of)(je).pipe(Zr())}(q,ve.path,j),function(q,K,j){const ae=K.routeConfig?K.routeConfig.canActivate:null;if(!ae||0===ae.length)return(0,ee.of)(!0);const ve=ae.map(je=>(0,Je.P)(()=>{const ft=tr(je,K,j);let Ot;if(function(q){return q&&ys(q.canActivate)}(ft))Ot=Ni(ft.canActivate(K,q));else{if(!ys(ft))throw new Error("Invalid CanActivate guard");Ot=Ni(ft(K,q))}return Ot.pipe(Re())}));return(0,ee.of)(ve).pipe(Zr())}(q,ve.route,j))),Re(ve=>!0!==ve,!0))}(ae,je,q,K):(0,ee.of)(Ot)),(0,ge.U)(Ot=>Object.assign(Object.assign({},j),{guardsResult:Ot})))})}(this.ngModule.injector,Ot=>this.triggerEvent(Ot)),(0,wt.b)(Ot=>{if(Ys(Ot.guardsResult)){const Xi=Xe(`Redirecting to "${this.serializeUrl(Ot.guardsResult)}"`);throw Xi.url=Ot.guardsResult,Xi}const ai=new Ne(Ot.id,this.serializeUrl(Ot.extractedUrl),this.serializeUrl(Ot.urlAfterRedirects),Ot.targetSnapshot,!!Ot.guardsResult);this.triggerEvent(ai)}),(0,Wt.h)(Ot=>!!Ot.guardsResult||(this.restoreHistory(Ot),this.cancelNavigationTransition(Ot,""),!1)),kr(Ot=>{if(Ot.guards.canActivateChecks.length)return(0,ee.of)(Ot).pipe((0,wt.b)(ai=>{const Xi=new Ve(ai.id,this.serializeUrl(ai.extractedUrl),this.serializeUrl(ai.urlAfterRedirects),ai.targetSnapshot);this.triggerEvent(Xi)}),(0,se.w)(ai=>{let Xi=!1;return(0,ee.of)(ai).pipe(function(q,K){return(0,St.z)(j=>{const{targetSnapshot:ae,guards:{canActivateChecks:ve}}=j;if(!ve.length)return(0,ee.of)(j);let je=0;return(0,Y.D)(ve).pipe((0,ze.b)(ft=>function(q,K,j,ae){return function(q,K,j,ae){const ve=Object.keys(q);if(0===ve.length)return(0,ee.of)({});const je={};return(0,Y.D)(ve).pipe((0,St.z)(ft=>function(q,K,j,ae){const ve=tr(q,K,ae);return Ni(ve.resolve?ve.resolve(K,j):ve(K,j))}(q[ft],K,j,ae).pipe((0,wt.b)(Ot=>{je[ft]=Ot}))),tt(1),(0,St.z)(()=>Object.keys(je).length===ve.length?(0,ee.of)(je):st.E))}(q._resolve,q,K,ae).pipe((0,ge.U)(je=>(q._resolvedData=je,q.data=Object.assign(Object.assign({},q.data),Di(q,j).resolve),null)))}(ft.route,ae,q,K)),(0,wt.b)(()=>je++),tt(1),(0,St.z)(ft=>je===ve.length?(0,ee.of)(j):st.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,wt.b)({next:()=>Xi=!0,complete:()=>{Xi||(this.restoreHistory(ai),this.cancelNavigationTransition(ai,"At least one route resolver didn't emit any value."))}}))}),(0,wt.b)(ai=>{const Xi=new de(ai.id,this.serializeUrl(ai.extractedUrl),this.serializeUrl(ai.urlAfterRedirects),ai.targetSnapshot);this.triggerEvent(Xi)}))}),kr(Ot=>{const{targetSnapshot:ai,id:Xi,extractedUrl:qn,rawUrl:Cn,extras:{skipLocationChange:vs,replaceUrl:Ps}}=Ot;return this.hooks.afterPreactivation(ai,{navigationId:Xi,appliedUrlTree:qn,rawUrlTree:Cn,skipLocationChange:!!vs,replaceUrl:!!Ps})}),(0,ge.U)(Ot=>{const ai=function(q,K,j){const ae=Hs(q,K._root,j?j._root:void 0);return new yn(ae,K)}(this.routeReuseStrategy,Ot.targetSnapshot,Ot.currentRouterState);return Object.assign(Object.assign({},Ot),{targetRouterState:ai})}),(0,wt.b)(Ot=>{this.currentUrlTree=Ot.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ot.urlAfterRedirects,Ot.rawUrl),this.routerState=Ot.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ot.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ot),this.browserUrlTree=Ot.urlAfterRedirects)}),((q,K,j)=>(0,ge.U)(ae=>(new $r(K,ae.targetRouterState,ae.currentRouterState,j).activate(q),ae)))(this.rootContexts,this.routeReuseStrategy,Ot=>this.triggerEvent(Ot)),(0,wt.b)({next(){je=!0},complete(){je=!0}}),(0,At.x)(()=>{var Ot;je||ft||this.cancelNavigationTransition(ve,`Navigation ID ${ve.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ot=this.currentNavigation)||void 0===Ot?void 0:Ot.id)===ve.id&&(this.currentNavigation=null)}),(0,Be.K)(Ot=>{if(ft=!0,function(q){return q&&q[Ie]}(Ot)){const ai=Ys(Ot.url);ai||(this.navigated=!0,this.restoreHistory(ve,!0));const Xi=new Lt(ve.id,this.serializeUrl(ve.extractedUrl),Ot.message);ae.next(Xi),ai?setTimeout(()=>{const qn=this.urlHandlingStrategy.merge(Ot.url,this.rawUrlTree),Cn={skipLocationChange:ve.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ho(ve.source)};this.scheduleNavigation(qn,"imperative",null,Cn,{resolve:ve.resolve,reject:ve.reject,promise:ve.promise})},0):ve.resolve(!1)}else{this.restoreHistory(ve,!0);const ai=new yi(ve.id,this.serializeUrl(ve.extractedUrl),Ot);ae.next(ai);try{ve.resolve(this.errorHandler(Ot))}catch(Xi){ve.reject(Xi)}}return st.E}))}))}resetRootComponentType(j){this.rootComponentType=j,this.routerState.root.component=this.rootComponentType}setTransition(j){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),j))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(j=>{const ae="popstate"===j.type?"popstate":"hashchange";"popstate"===ae&&setTimeout(()=>{var ve;const je={replaceUrl:!0},ft=(null===(ve=j.state)||void 0===ve?void 0:ve.navigationId)?j.state:null;if(ft){const ai=Object.assign({},ft);delete ai.navigationId,delete ai.\u0275routerPageId,0!==Object.keys(ai).length&&(je.state=ai)}const Ot=this.parseUrl(j.url);this.scheduleNavigation(Ot,ae,ft,je)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(j){this.events.next(j)}resetConfig(j){ls(j),this.config=j.map(ko),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(j,ae={}){const{relativeTo:ve,queryParams:je,fragment:ft,queryParamsHandling:Ot,preserveFragment:ai}=ae,Xi=ve||this.routerState.root,qn=ai?this.currentUrlTree.fragment:ft;let Cn=null;switch(Ot){case"merge":Cn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),je);break;case"preserve":Cn=this.currentUrlTree.queryParams;break;default:Cn=je||null}return null!==Cn&&(Cn=this.removeEmptyProps(Cn)),function(q,K,j,ae,ve){if(0===j.length)return Jo(K.root,K.root,K,ae,ve);const je=function(q){if("string"==typeof q[0]&&1===q.length&&"/"===q[0])return new $s(!0,0,q);let K=0,j=!1;const ae=q.reduce((ve,je,ft)=>{if("object"==typeof je&&null!=je){if(je.outlets){const Ot={};return Vi(je.outlets,(ai,Xi)=>{Ot[Xi]="string"==typeof ai?ai.split("/"):ai}),[...ve,{outlets:Ot}]}if(je.segmentPath)return[...ve,je.segmentPath]}return"string"!=typeof je?[...ve,je]:0===ft?(je.split("/").forEach((Ot,ai)=>{0==ai&&"."===Ot||(0==ai&&""===Ot?j=!0:".."===Ot?K++:""!=Ot&&ve.push(Ot))}),ve):[...ve,je]},[]);return new $s(j,K,ae)}(j);if(je.toRoot())return Jo(K.root,new yt([],{}),K,ae,ve);const ft=function(q,K,j){if(q.isAbsolute)return new Js(K.root,!0,0);if(-1===j.snapshot._lastPathIndex){const je=j.snapshot._urlSegment;return new Js(je,je===K.root,0)}const ae=Rs(q.commands[0])?0:1;return function(q,K,j){let ae=q,ve=K,je=j;for(;je>ve;){if(je-=ve,ae=ae.parent,!ae)throw new Error("Invalid number of '../'");ve=ae.segments.length}return new Js(ae,!1,ve-je)}(j.snapshot._urlSegment,j.snapshot._lastPathIndex+ae,q.numberOfDoubleDots)}(je,K,q),Ot=ft.processChildren?fr(ft.segmentGroup,ft.index,je.commands):bo(ft.segmentGroup,ft.index,je.commands);return Jo(ft.segmentGroup,Ot,K,ae,ve)}(Xi,this.currentUrlTree,j,Cn,null!=qn?qn:null)}navigateByUrl(j,ae={skipLocationChange:!1}){const ve=Ys(j)?j:this.parseUrl(j),je=this.urlHandlingStrategy.merge(ve,this.rawUrlTree);return this.scheduleNavigation(je,"imperative",null,ae)}navigate(j,ae={skipLocationChange:!1}){return function(q){for(let K=0;K<q.length;K++){const j=q[K];if(null==j)throw new Error(`The requested path contains ${j} segment at index ${K}`)}}(j),this.navigateByUrl(this.createUrlTree(j,ae),ae)}serializeUrl(j){return this.urlSerializer.serialize(j)}parseUrl(j){let ae;try{ae=this.urlSerializer.parse(j)}catch(ve){ae=this.malformedUriErrorHandler(ve,this.urlSerializer,j)}return ae}isActive(j,ae){let ve;if(ve=!0===ae?Object.assign({},sl):!1===ae?Object.assign({},ol):ae,Ys(j))return $i(this.currentUrlTree,j,ve);const je=this.parseUrl(j);return $i(this.currentUrlTree,je,ve)}removeEmptyProps(j){return Object.keys(j).reduce((ae,ve)=>{const je=j[ve];return null!=je&&(ae[ve]=je),ae},{})}processNavigations(){this.navigations.subscribe(j=>{this.navigated=!0,this.lastSuccessfulId=j.id,this.currentPageId=j.targetPageId,this.events.next(new pi(j.id,this.serializeUrl(j.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,j.resolve(!0)},j=>{this.console.warn(`Unhandled Navigation Error: ${j}`)})}scheduleNavigation(j,ae,ve,je,ft){var Ot,ai,Xi;if(this.disposed)return Promise.resolve(!1);const qn=this.transitions.value,Cn=Ho(ae)&&qn&&!Ho(qn.source),vs=qn.rawUrl.toString()===j.toString(),Ps=qn.id===(null===(Ot=this.currentNavigation)||void 0===Ot?void 0:Ot.id);if(Cn&&vs&&Ps)return Promise.resolve(!0);let ur,oa,po;ft?(ur=ft.resolve,oa=ft.reject,po=ft.promise):po=new Promise((Nr,oc)=>{ur=Nr,oa=oc});const ra=++this.navigationId;let rr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ve=this.location.getState()),rr=ve&&ve.\u0275routerPageId?ve.\u0275routerPageId:je.replaceUrl||je.skipLocationChange?null!==(ai=this.browserPageId)&&void 0!==ai?ai:0:(null!==(Xi=this.browserPageId)&&void 0!==Xi?Xi:0)+1):rr=0,this.setTransition({id:ra,targetPageId:rr,source:ae,restoredState:ve,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:j,extras:je,resolve:ur,reject:oa,promise:po,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),po.catch(Nr=>Promise.reject(Nr))}setBrowserUrl(j,ae){const ve=this.urlSerializer.serialize(j),je=Object.assign(Object.assign({},ae.extras.state),this.generateNgRouterState(ae.id,ae.targetPageId));this.location.isCurrentPathEqualTo(ve)||ae.extras.replaceUrl?this.location.replaceState(ve,"",je):this.location.go(ve,"",je)}restoreHistory(j,ae=!1){var ve,je;if("computed"===this.canceledNavigationResolution){const ft=this.currentPageId-j.targetPageId;"popstate"!==j.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ve=this.currentNavigation)||void 0===ve?void 0:ve.finalUrl)||0===ft?this.currentUrlTree===(null===(je=this.currentNavigation)||void 0===je?void 0:je.finalUrl)&&0===ft&&(this.resetState(j),this.browserUrlTree=j.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ft)}else"replace"===this.canceledNavigationResolution&&(ae&&this.resetState(j),this.resetUrlToCurrentUrlTree())}resetState(j){this.routerState=j.currentRouterState,this.currentUrlTree=j.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,j.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(j,ae){const ve=new Lt(j.id,this.serializeUrl(j.extractedUrl),ae);this.triggerEvent(ve),j.resolve(!1)}generateNgRouterState(j,ae){return"computed"===this.canceledNavigationResolution?{navigationId:j,\u0275routerPageId:ae}:{navigationId:j}}}return q.\u0275fac=function(j){O.$Z()},q.\u0275prov=O.Yz7({token:q,factory:q.\u0275fac}),q})();function Ho(q){return"imperative"!==q}let Mr=(()=>{class q{constructor(j,ae,ve){this.router=j,this.route=ae,this.locationStrategy=ve,this.commands=null,this.href=null,this.onChanges=new Ge.x,this.subscription=j.events.subscribe(je=>{je instanceof pi&&this.updateTargetUrlAndHref()})}set routerLink(j){this.commands=null!=j?Array.isArray(j)?j:[j]:null}ngOnChanges(j){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(j,ae,ve,je,ft){if(0!==j||ae||ve||je||ft||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Ot={skipLocationChange:Lr(this.skipLocationChange),replaceUrl:Lr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ot),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Lr(this.preserveFragment)})}}return q.\u0275fac=function(j){return new(j||q)(O.Y36(_s),O.Y36(ri),O.Y36(Xt.S$))},q.\u0275dir=O.lG2({type:q,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(j,ae){1&j&&O.NdJ("click",function(je){return ae.onClick(je.button,je.ctrlKey,je.shiftKey,je.altKey,je.metaKey)}),2&j&&O.uIk("target",ae.target)("href",ae.href,O.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[O.TTD]}),q})();function Lr(q){return""===q||!!q}class jo{}class wa{preload(K,j){return(0,ee.of)(null)}}let ia=(()=>{class q{constructor(j,ae,ve,je){this.router=j,this.injector=ve,this.preloadingStrategy=je,this.loader=new Un(ve,ae,ai=>j.triggerEvent(new Te(ai)),ai=>j.triggerEvent(new xt(ai)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Wt.h)(j=>j instanceof pi),(0,ze.b)(()=>this.preload())).subscribe(()=>{})}preload(){const j=this.injector.get(O.h0i);return this.processRoutes(j,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(j,ae){const ve=[];for(const je of ae)if(je.loadChildren&&!je.canLoad&&je._loadedConfig){const ft=je._loadedConfig;ve.push(this.processRoutes(ft.module,ft.routes))}else je.loadChildren&&!je.canLoad?ve.push(this.preloadConfig(j,je)):je.children&&ve.push(this.processRoutes(j,je.children));return(0,Y.D)(ve).pipe((0,$t.J)(),(0,ge.U)(je=>{}))}preloadConfig(j,ae){return this.preloadingStrategy.preload(ae,()=>(ae._loadedConfig?(0,ee.of)(ae._loadedConfig):this.loader.load(j.injector,ae)).pipe((0,St.z)(je=>(ae._loadedConfig=je,this.processRoutes(je.module,je.routes)))))}}return q.\u0275fac=function(j){return new(j||q)(O.LFG(_s),O.LFG(O.Sil),O.LFG(O.zs3),O.LFG(jo))},q.\u0275prov=O.Yz7({token:q,factory:q.\u0275fac}),q})(),cr=(()=>{class q{constructor(j,ae,ve={}){this.router=j,this.viewportScroller=ae,this.options=ve,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ve.scrollPositionRestoration=ve.scrollPositionRestoration||"disabled",ve.anchorScrolling=ve.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(j=>{j instanceof Wi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=j.navigationTrigger,this.restoredId=j.restoredState?j.restoredState.navigationId:0):j instanceof pi&&(this.lastId=j.id,this.scheduleScrollEvent(j,this.router.parseUrl(j.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(j=>{j instanceof _t&&(j.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(j.position):j.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(j.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(j,ae){this.router.triggerEvent(new _t(j,"popstate"===this.lastSource?this.store[this.restoredId]:null,ae))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return q.\u0275fac=function(j){O.$Z()},q.\u0275prov=O.Yz7({token:q,factory:q.\u0275fac}),q})();const ga=new O.OlP("ROUTER_CONFIGURATION"),al=new O.OlP("ROUTER_FORROOT_GUARD"),ll=[Xt.Ye,{provide:Gt,useClass:Mt},{provide:_s,useFactory:function(q,K,j,ae,ve,je,ft={},Ot,ai){const Xi=new _s(null,q,K,j,ae,ve,sn(je));return Ot&&(Xi.urlHandlingStrategy=Ot),ai&&(Xi.routeReuseStrategy=ai),function(q,K){q.errorHandler&&(K.errorHandler=q.errorHandler),q.malformedUriErrorHandler&&(K.malformedUriErrorHandler=q.malformedUriErrorHandler),q.onSameUrlNavigation&&(K.onSameUrlNavigation=q.onSameUrlNavigation),q.paramsInheritanceStrategy&&(K.paramsInheritanceStrategy=q.paramsInheritanceStrategy),q.relativeLinkResolution&&(K.relativeLinkResolution=q.relativeLinkResolution),q.urlUpdateStrategy&&(K.urlUpdateStrategy=q.urlUpdateStrategy),q.canceledNavigationResolution&&(K.canceledNavigationResolution=q.canceledNavigationResolution)}(ft,Xi),ft.enableTracing&&Xi.events.subscribe(qn=>{var Cn,vs;null===(Cn=console.group)||void 0===Cn||Cn.call(console,`Router Event: ${qn.constructor.name}`),console.log(qn.toString()),console.log(qn),null===(vs=console.groupEnd)||void 0===vs||vs.call(console)}),Xi},deps:[Gt,Qo,Xt.Ye,O.zs3,O.Sil,Fn,ga,[class{},new O.FiY],[class{},new O.FiY]]},Qo,{provide:ri,useFactory:function(q){return q.routerState.root},deps:[_s]},ia,wa,class{preload(K,j){return j().pipe((0,Be.K)(()=>(0,ee.of)(null)))}},{provide:ga,useValue:{enableTracing:!1}}];function Pr(){return new O.PXZ("Router",_s)}let ma=(()=>{class q{constructor(j,ae){}static forRoot(j,ae){return{ngModule:q,providers:[ll,_a(j),{provide:al,useFactory:Rr,deps:[[_s,new O.FiY,new O.tp0]]},{provide:ga,useValue:ae||{}},{provide:Xt.S$,useFactory:cl,deps:[Xt.lw,[new O.tBr(Xt.mr),new O.FiY],ga]},{provide:cr,useFactory:Ec,deps:[_s,Xt.EM,ga]},{provide:jo,useExisting:ae&&ae.preloadingStrategy?ae.preloadingStrategy:wa},{provide:O.PXZ,multi:!0,useFactory:Pr},[sa,{provide:O.ip1,multi:!0,useFactory:ja,deps:[sa]},{provide:nc,useFactory:Al,deps:[sa]},{provide:O.tb,multi:!0,useExisting:nc}]]}}static forChild(j){return{ngModule:q,providers:[_a(j)]}}}return q.\u0275fac=function(j){return new(j||q)(O.LFG(al,8),O.LFG(_s,8))},q.\u0275mod=O.oAB({type:q}),q.\u0275inj=O.cJS({}),q})();function Ec(q,K,j){return j.scrollOffset&&K.setOffset(j.scrollOffset),new cr(q,K,j)}function cl(q,K,j={}){return j.useHash?new Xt.Do(q,K):new Xt.b0(q,K)}function Rr(q){return"guarded"}function _a(q){return[{provide:O.deG,multi:!0,useValue:q},{provide:Fn,multi:!0,useValue:q}]}let sa=(()=>{class q{constructor(j){this.injector=j,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ge.x}appInitializer(){return this.injector.get(Xt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let ae=null;const ve=new Promise(Ot=>ae=Ot),je=this.injector.get(_s),ft=this.injector.get(ga);return"disabled"===ft.initialNavigation?(je.setUpLocationChangeListener(),ae(!0)):"enabled"===ft.initialNavigation||"enabledBlocking"===ft.initialNavigation?(je.hooks.afterPreactivation=()=>this.initNavigation?(0,ee.of)(null):(this.initNavigation=!0,ae(!0),this.resultOfPreactivationDone),je.initialNavigation()):ae(!0),ve})}bootstrapListener(j){const ae=this.injector.get(ga),ve=this.injector.get(ia),je=this.injector.get(cr),ft=this.injector.get(_s),Ot=this.injector.get(O.z2F);j===Ot.components[0]&&(("enabledNonBlocking"===ae.initialNavigation||void 0===ae.initialNavigation)&&ft.initialNavigation(),ve.setUpPreloading(),je.init(),ft.resetRootComponentType(Ot.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return q.\u0275fac=function(j){return new(j||q)(O.LFG(O.zs3))},q.\u0275prov=O.Yz7({token:q,factory:q.\u0275fac}),q})();function ja(q){return q.appInitializer.bind(q)}function Al(q){return q.bootstrapListener.bind(q)}const nc=new O.OlP("Router Initializer")},33:(li,ht,W)=>{"use strict";W.d(ht,{C:()=>at,k:()=>Be});var Pe=W(5e3),Re=W(3075);const ge=["ref"];function se(ze){return ze&&ze.replace(/\r\n|\r/g,"\n")}let at=(()=>{class ze{constructor(wt,At){this._differs=wt,this._ngZone=At,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new Pe.vpe,this.focusChange=new Pe.vpe,this.scroll=new Pe.vpe,this.drop=new Pe.vpe,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=$t=>{},this.onTouched=()=>{}}set options(wt){this._options=wt,!this._differ&&wt&&(this._differ=this._differs.find(wt).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror="undefined"!=typeof CodeMirror?CodeMirror:Promise.resolve().then(W.t.bind(W,8266,19))),this._codeMirror}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>function(ze,St,wt,At){return new(wt||(wt=Promise))(function(Xt,ti){function Wi(yi){try{Lt(At.next(yi))}catch(Ce){ti(Ce)}}function pi(yi){try{Lt(At.throw(yi))}catch(Ce){ti(Ce)}}function Lt(yi){yi.done?Xt(yi.value):function(Xt){return Xt instanceof wt?Xt:new wt(function(ti){ti(Xt)})}(yi.value).then(Wi,pi)}Lt((At=At.apply(ze,St||[])).next())})}(this,void 0,void 0,function*(){const wt=yield this.codeMirrorGlobal;this.codeMirror=((null==wt?void 0:wt.default)?wt.default:wt).fromTextArea(this.ref.nativeElement,this._options),this.codeMirror.on("cursorActivity",$t=>this._ngZone.run(()=>this.cursorActive($t))),this.codeMirror.on("scroll",this.scrollChanged.bind(this)),this.codeMirror.on("blur",()=>this._ngZone.run(()=>this.focusChanged(!1))),this.codeMirror.on("focus",()=>this._ngZone.run(()=>this.focusChanged(!0))),this.codeMirror.on("change",($t,Xt)=>this._ngZone.run(()=>this.codemirrorValueChanged($t,Xt))),this.codeMirror.on("drop",($t,Xt)=>{this._ngZone.run(()=>this.dropFiles($t,Xt))}),this.codeMirror.setValue(this.value)}))}ngDoCheck(){if(!this._differ)return;const wt=this._differ.diff(this._options);wt&&(wt.forEachChangedItem(At=>this.setOptionIfChanged(At.key,At.currentValue)),wt.forEachAddedItem(At=>this.setOptionIfChanged(At.key,At.currentValue)),wt.forEachRemovedItem(At=>this.setOptionIfChanged(At.key,At.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(wt,At){const $t=wt.getValue();this.value!==$t&&(this.value=$t,this.onChange(this.value))}setOptionIfChanged(wt,At){!this.codeMirror||this.codeMirror.setOption(wt,At)}focusChanged(wt){this.onTouched(),this.isFocused=wt,this.focusChange.emit(wt)}scrollChanged(wt){this.scroll.emit(wt.getScrollInfo())}cursorActive(wt){this.cursorActivity.emit(wt)}dropFiles(wt,At){this.drop.emit([wt,At])}writeValue(wt){if(null==wt)return;if(!this.codeMirror)return void(this.value=wt);const At=this.codeMirror.getValue();if(wt!==At&&se(At)!==se(wt))if(this.value=wt,this.preserveScrollPosition){const $t=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo($t.left,$t.top)}else this.codeMirror.setValue(this.value)}registerOnChange(wt){this.onChange=wt}registerOnTouched(wt){this.onTouched=wt}setDisabledState(wt){this.disabled=wt,this.setOptionIfChanged("readOnly",this.disabled)}}return ze.\u0275fac=function(wt){return new(wt||ze)(Pe.Y36(Pe.aQg),Pe.Y36(Pe.R0b))},ze.\u0275cmp=Pe.Xpm({type:ze,selectors:[["ngx-codemirror"]],viewQuery:function(wt,At){if(1&wt&&Pe.Gf(ge,5),2&wt){let $t;Pe.iGM($t=Pe.CRH())&&(At.ref=$t.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop"},features:[Pe._Bn([{provide:Re.JU,useExisting:(0,Pe.Gpc)(()=>ze),multi:!0}])],decls:3,vars:7,consts:[["autocomplete","off",3,"name","autofocus"],["ref",""]],template:function(wt,At){1&wt&&(Pe.TgZ(0,"textarea",0,1),Pe._uU(2,"    "),Pe.qZA()),2&wt&&(Pe.Gre("ngx-codemirror ",At.className,""),Pe.ekj("ngx-codemirror--focused",At.isFocused),Pe.Q6J("name",At.name)("autofocus",At.autoFocus))},encapsulation:2,changeDetection:0}),ze})(),Be=(()=>{class ze{}return ze.\u0275fac=function(wt){return new(wt||ze)},ze.\u0275mod=Pe.oAB({type:ze}),ze.\u0275inj=Pe.cJS({}),ze})()},5861:(li,ht,W)=>{"use strict";function O(t,e,n,a,f,E,I){try{var Y=t[E](I),ee=Y.value}catch(_e){return void n(_e)}Y.done?e(ee):Promise.resolve(ee).then(a,f)}function y(t){return function(){var e=this,n=arguments;return new Promise(function(a,f){var E=t.apply(e,n);function I(ee){O(E,a,f,I,Y,"next",ee)}function Y(ee){O(E,a,f,I,Y,"throw",ee)}I(void 0)})}}W.d(ht,{Z:()=>y})}},li=>{li(li.s=4255)}]);